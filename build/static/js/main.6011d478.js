/*! For license information please see main.6011d478.js.LICENSE.txt */
(()=>{var e={14:e=>{e.exports=function(){return!1}},61:e=>{e.exports=function(e,t){return e<t}},143:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},149:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},320:e=>{e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},438:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).get(e)}},539:(e,t,r)=>{var n=r(9742),i=r(7498),a=r(3279);e.exports=function(e){return e&&e.length?n(e,a,i):void 0}},579:(e,t,r)=>{"use strict";e.exports=r(2799)},620:(e,t,r)=>{var n=r(6913),i=r(4052),a=r(2761);e.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&"[object String]"==n(e)}},643:(e,t,r)=>{var n=r(7676)("toUpperCase");e.exports=n},644:e=>{e.exports=function(e){return e!==e}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},715:e=>{var t="\\ud800-\\udfff",r="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^"+t+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[a,s,o].join("|")+")"+c+l+")*"),d="(?:"+[a+n+"?",n,s,o,r].join("|")+")",h=RegExp(i+"(?="+i+")|"+d+u,"g");e.exports=function(e){return e.match(h)||[]}},755:(e,t,r)=>{var n=r(8895),i=r(7116);e.exports=function e(t,r,a,s,o){var l=-1,c=t.length;for(a||(a=i),o||(o=[]);++l<c;){var u=t[l];r>0&&a(u)?r>1?e(u,r-1,a,s,o):n(o,u):s||(o[o.length]=u)}return o}},793:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},801:(e,t,r)=>{var n=r(1141),i=r(6686),a=r(9841),s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=o.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):s.test(e)?NaN:+e}},914:(e,t,r)=>{var n=r(9841);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},929:(e,t,r)=>{var n=r(3211),i=r(6571),a=r(9194),s=r(6686);e.exports=function(e,t,r){if(!s(r))return!1;var o=typeof t;return!!("number"==o?i(r)&&a(t,r.length):"string"==o&&t in r)&&n(r[t],e)}},977:(e,t,r)=>{var n=r(9096),i=r(4416);e.exports=function(e,t){return e&&e.length?i(e,n(t,2)):[]}},1069:(e,t,r)=>{var n=r(8541);e.exports=function(e){return null==e?"":n(e)}},1141:(e,t,r)=>{var n=r(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},1143:(e,t,r)=>{var n=r(3028)(Object.keys,Object);e.exports=n},1170:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},1268:(e,t,r)=>{var n=r(5428),i=r(7574),a=r(6832),s=a&&a.isTypedArray,o=s?i(s):n;e.exports=o},1310:e=>{e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},1340:(e,t,r)=>{var n=r(3211);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},1497:(e,t,r)=>{"use strict";var n=r(3218);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,a,s){if(s!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return r.PropTypes=r,r}},1558:e=>{e.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},1629:(e,t,r)=>{var n=r(6913),i=r(6686);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1714:(e,t,r)=>{var n=r(1340);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},1733:(e,t,r)=>{var n=r(1775),i=r(4664),a=r(9096);e.exports=function(e,t){var r={};return t=a(t,3),i(e,(function(e,i,a){n(r,i,t(e,i,a))})),r}},1775:(e,t,r)=>{var n=r(5654);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},1946:(e,t,r)=>{var n=r(1340);e.exports=function(e){return n(this.__data__,e)>-1}},2070:(e,t,r)=>{var n=r(7937)(r(6552),"Set");e.exports=n},2074:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},2154:(e,t,r)=>{var n=r(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},2165:(e,t,r)=>{var n=r(5652);e.exports=function(e,t){var r;return n(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}},2322:(e,t,r)=>{var n=r(6913),i=r(5990),a=r(2761),s=Function.prototype,o=Object.prototype,l=s.toString,c=o.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=i(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==u}},2520:(e,t,r)=>{var n=r(5816),i=r(9096),a=r(9140),s=Math.max;e.exports=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var l=null==r?0:a(r);return l<0&&(l=s(o+l,0)),n(e,i(t,3),l)}},2536:(e,t,r)=>{var n=r(149),i=r(2969),a=r(9096),s=r(8883),o=r(320),l=r(7574),c=r(5893),u=r(3279),d=r(4052);e.exports=function(e,t,r){t=t.length?n(t,(function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[u];var h=-1;t=n(t,l(a));var p=s(e,(function(e,r,i){return{criteria:n(t,(function(t){return t(e)})),index:++h,value:e}}));return o(p,(function(e,t){return c(e,t,r)}))}},2541:e=>{e.exports=function(e){return function(){return e}}},2587:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},2597:(e,t,r)=>{var n=r(4052),i=r(9841),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}},2622:(e,t,r)=>{var n=r(705);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},2662:(e,t,r)=>{var n=r(5575);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,r)=>{var n=r(5193),i=r(2761),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return i(e)&&s.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},2794:(e,t,r)=>{var n=r(9742),i=r(7498),a=r(9096);e.exports=function(e,t){return e&&e.length?n(e,a(t,2),i):void 0}},2799:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(e,t,n){var i=null;if(void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),"key"in t)for(var a in n={},t)"key"!==a&&(n[a]=t[a]);else n=t;return t=n.ref,{$$typeof:r,type:e,key:i,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=i,t.jsxs=i},2866:(e,t,r)=>{var n=r(2969);e.exports=function(e){return function(t){return n(t,e)}}},2929:(e,t,r)=>{var n=r(6552).Uint8Array;e.exports=n},2969:(e,t,r)=>{var n=r(5324),i=r(914);e.exports=function(e,t){for(var r=0,a=(t=n(t,e)).length;null!=e&&r<a;)e=e[i(t[r++])];return r&&r==a?e:void 0}},3028:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},3097:(e,t,r)=>{var n=r(2969);e.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},3175:(e,t)=>{"use strict";const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,r){do{const r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function c(e,t,r){for(;t>r;){const r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},3204:(e,t,r)=>{var n=r(3343),i=r(2777),a=r(4052),s=r(4543),o=r(9194),l=r(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),u=!r&&i(e),d=!r&&!u&&s(e),h=!r&&!u&&!d&&l(e),p=r||u||d||h,f=p?n(e.length,String):[],m=f.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,m))||f.push(g);return f}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3279:e=>{e.exports=function(e){return e}},3331:(e,t,r)=>{var n=r(9676),i=r(929),a=r(7303);e.exports=function(e){return function(t,r,s){return s&&"number"!=typeof s&&i(t,r,s)&&(r=s=void 0),t=a(t),void 0===r?(r=t,t=0):r=a(r),s=void 0===s?t<r?1:-1:a(s),n(t,r,s,e)}}},3343:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},3366:(e,t,r)=>{var n=r(7894),i=r(9057);e.exports=function(e,t){return null!=e&&i(e,t,n)}},3411:(e,t,r)=>{var n=r(149),i=r(9096),a=r(8883),s=r(4052);e.exports=function(e,t){return(s(e)?n:a)(e,i(t,3))}},3440:(e,t,r)=>{var n=r(6552)["__core-js_shared__"];e.exports=n},3538:(e,t,r)=>{var n=r(755),i=r(3411);e.exports=function(e,t){return n(i(e,t),1)}},3668:(e,t,r)=>{var n=r(8902),i=r(2587),a=r(8114);e.exports=function(e,t,r,s,o,l){var c=1&r,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var f=-1,m=!0,g=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++f<u;){var v=e[f],x=t[f];if(s)var y=c?s(x,v,f,t,e,l):s(v,x,f,e,t,l);if(void 0!==y){if(y)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!a(g,t)&&(v===e||o(v,e,r,s,l)))return g.push(t)}))){m=!1;break}}else if(v!==x&&!o(v,x,r,s,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},3713:(e,t,r)=>{var n=r(6140),i=r(1143),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},3781:(e,t,r)=>{var n=r(9417),i=r(8673);e.exports=function(e){for(var t=i(e),r=t.length;r--;){var a=t[r],s=e[a];t[r]=[a,s,n(s)]}return t}},3871:e=>{e.exports=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},3932:(e,t,r)=>{var n=r(396),i=r(2866),a=r(2597),s=r(914);e.exports=function(e){return a(e)?n(s(e)):i(e)}},3950:(e,t,r)=>{var n=r(6686),i=r(4757),a=r(801),s=Math.max,o=Math.min;e.exports=function(e,t,r){var l,c,u,d,h,p,f=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var r=l,n=c;return l=c=void 0,f=t,d=e.apply(n,r)}function y(e){var r=e-p;return void 0===p||r>=t||r<0||g&&e-f>=u}function b(){var e=i();if(y(e))return w(e);h=setTimeout(b,function(e){var r=t-(e-p);return g?o(r,u-(e-f)):r}(e))}function w(e){return h=void 0,v&&l?x(e):(l=c=void 0,d)}function _(){var e=i(),r=y(e);if(l=arguments,c=this,p=e,r){if(void 0===h)return function(e){return f=e,h=setTimeout(b,t),m?x(e):d}(p);if(g)return clearTimeout(h),h=setTimeout(b,t),x(p)}return void 0===h&&(h=setTimeout(b,t)),d}return t=a(t)||0,n(r)&&(m=!!r.leading,u=(g="maxWait"in r)?s(a(r.maxWait)||0,t):u,v="trailing"in r?!!r.trailing:v),_.cancel=function(){void 0!==h&&clearTimeout(h),f=0,l=p=c=h=void 0},_.flush=function(){return void 0===h?d:w(i())},_}},4020:e=>{e.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},4052:e=>{var t=Array.isArray;e.exports=t},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},4066:function(e){e.exports=function(){"use strict";var e={},t={};function r(r,n,i){if(t[r]=i,"index"===r){var a="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",s={};return t.shared(s),t.index(e,s),"undefined"!==typeof window&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))),e}}return r("shared",["exports"],(function(e){function t(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n,i;function a(){if(i)return n;function e(e,t){this.x=e,this.y=t}return i=1,n=e,e.prototype={clone:function(){return new e(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=n,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-n*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t},n}"function"==typeof SuppressedError&&SuppressedError;var s,o,l=r(a()),c=function(){if(o)return s;function e(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}return o=1,s=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var i=this.sampleCurveX(r)-e;if(Math.abs(i)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r-=i/a}var s=0,o=1;for(r=e,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-e)<t));n++)e>i?s=r:o=r,r=.5*(o-s)+s;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},s}(),u=r(c);let d,h;function p(){return null==d&&(d="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),d}function f(){if(null==h&&(h=!1,p())){const e=5,t=new OffscreenCanvas(e,e).getContext("2d",{willReadFrequently:!0});if(t){for(let n=0;n<e*e;n++){const r=4*n;t.fillStyle=`rgb(${r},${r+1},${r+2})`,t.fillRect(n%e,Math.floor(n/e),1,1)}const r=t.getImageData(0,0,e,e).data;for(let t=0;t<e*e*4;t++)if(t%4!=3&&r[t]!==t){h=!0;break}}}return h||!1}var m=1e-6,g="undefined"!=typeof Float32Array?Float32Array:Array;function v(){var e=new g(9);return g!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function x(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function y(){var e=new g(3);return g!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function b(e){return Math.hypot(e[0],e[1],e[2])}function w(e,t,r){var n=new g(3);return n[0]=e,n[1]=t,n[2]=r,n}function _(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function k(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function S(e,t,r){var n=t[0],i=t[1],a=t[2],s=r[0],o=r[1],l=r[2];return e[0]=i*l-a*o,e[1]=a*s-n*l,e[2]=n*o-i*s,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var j,E=b;function C(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*s,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*s,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*s,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*s,e}function N(){var e=new g(4);return g!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function T(e,t,r,n){var i=.5*Math.PI/180;t*=i,r*=i,n*=i;var a=Math.sin(t),s=Math.cos(t),o=Math.sin(r),l=Math.cos(r),c=Math.sin(n),u=Math.cos(n);return e[0]=a*l*u-s*o*c,e[1]=s*o*u+a*l*c,e[2]=s*l*c-a*o*u,e[3]=s*l*u+a*o*c,e}function P(){var e=new g(2);return g!=Float32Array&&(e[0]=0,e[1]=0),e}function A(e,t){var r=new g(2);return r[0]=e,r[1]=t,r}y(),j=new g(4),g!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0,j[3]=0),y(),w(1,0,0),w(0,1,0),N(),N(),v(),P();const M=8192;function I(e,t,r){return t*(M/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}function O(e,t){return(e%t+t)%t}function D(e,t,r){return e*(1-r)+t*r}function R(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function L(e,t,r,n){const i=new u(e,t,r,n);return e=>i.solve(e)}const F=L(.25,.1,.25,1);function $(e,t,r){return Math.min(r,Math.max(t,e))}function B(e,t,r){const n=r-t,i=((e-t)%n+n)%n+t;return i===t?r:i}function z(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const i of r)for(const t in i)e[t]=i[t];return e}let U=1;function V(e,t,r){const n={};for(const i in e)n[i]=t.call(this,e[i],i,e);return n}function H(e,t,r){const n={};for(const i in e)t.call(this,e[i],i,e)&&(n[i]=e[i]);return n}function G(e){return Array.isArray(e)?e.map(G):"object"==typeof e&&e?V(e,G):e}const W={};function q(e){W[e]||("undefined"!=typeof console&&console.warn(e),W[e]=!0)}function K(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function Z(e){return"undefined"!=typeof WorkerGlobalScope&&void 0!==e&&e instanceof WorkerGlobalScope}let Y=null;function X(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function J(e,r,n,i,a){return t(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const t=new VideoFrame(e,{timestamp:0});try{const s=null==t?void 0:t.format;if(!s||!s.startsWith("BGR")&&!s.startsWith("RGB"))throw new Error(`Unrecognized format ${s}`);const o=s.startsWith("BGR"),l=new Uint8ClampedArray(i*a*4);if(yield t.copyTo(l,function(e,t,r,n,i){const a=4*Math.max(1,0),s=(Math.max(0,r)-r)*n*4+a,o=4*n,l=Math.max(0,t),c=Math.max(0,r);return{rect:{x:l,y:c,width:Math.min(e.width,t+n)-l,height:Math.min(e.height,r+i)-c},layout:[{offset:s,stride:o}]}}(e,r,n,i,a)),o)for(let e=0;e<l.length;e+=4){const t=l[e];l[e]=l[e+2],l[e+2]=t}return l}finally{t.close()}}))}let ee,te;function re(e,t,r,n){return e.addEventListener(t,r,n),{unsubscribe:()=>{e.removeEventListener(t,r,n)}}}function ne(e){return e*Math.PI/180}function ie(e){return e/Math.PI*180}const ae={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},se={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},oe="AbortError";function le(){return new Error(oe)}const ce={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ue(e){return ce.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))]}const de="global-dispatcher";class he extends Error{constructor(e,t,r,n){super(`AJAXError: ${t} (${e}): ${r}`),this.status=e,this.statusText=t,this.url=r,this.body=n}}const pe=()=>Z(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,fe=function(e,r){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){const t=ue(e.url);if(t)return t(e,r);if(Z(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,targetMapId:de},r)}if(!(/^file:/.test(n=e.url)||/^file:/.test(pe())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(e,r){return t(this,void 0,void 0,(function*(){const t=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,cache:e.cache,referrer:pe(),signal:r.signal});let n,i;"json"!==e.type||t.headers.has("Accept")||t.headers.set("Accept","application/json");try{n=yield fetch(t)}catch(t){throw new he(0,t.message,e.url,new Blob)}if(!n.ok){const t=yield n.blob();throw new he(n.status,n.statusText,e.url,t)}i="arrayBuffer"===e.type||"image"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text();const a=yield i;if(r.signal.aborted)throw le();return{data:a,cacheControl:n.headers.get("Cache-Control"),expires:n.headers.get("Expires")}}))}(e,r);if(Z(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,mustQueue:!0,targetMapId:de},r)}var n;return function(e,t){return new Promise(((r,n)=>{var i;const a=new XMLHttpRequest;a.open(e.method||"GET",e.url,!0),"arrayBuffer"!==e.type&&"image"!==e.type||(a.responseType="arraybuffer");for(const t in e.headers)a.setRequestHeader(t,e.headers[t]);"json"===e.type&&(a.responseType="text",(null===(i=e.headers)||void 0===i?void 0:i.Accept)||a.setRequestHeader("Accept","application/json")),a.withCredentials="include"===e.credentials,a.onerror=()=>{n(new Error(a.statusText))},a.onload=()=>{if(!t.signal.aborted)if((a.status>=200&&a.status<300||0===a.status)&&null!==a.response){let t=a.response;if("json"===e.type)try{t=JSON.parse(a.response)}catch(e){return void n(e)}r({data:t,cacheControl:a.getResponseHeader("Cache-Control"),expires:a.getResponseHeader("Expires")})}else{const t=new Blob([a.response],{type:a.getResponseHeader("Content-Type")});n(new he(a.status,a.statusText,e.url,t))}},t.signal.addEventListener("abort",(()=>{a.abort(),n(le())})),a.send(e.body)}))}(e,r)};function me(e){if(!e||e.indexOf("://")<=0||0===e.indexOf("data:image/")||0===e.indexOf("blob:"))return!0;const t=new URL(e),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function ge(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function ve(e,t,r){if(r&&r[e]){const n=r[e].indexOf(t);-1!==n&&r[e].splice(n,1)}}class xe{constructor(e){z(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=e}}class ye extends xe{constructor(e){super("error",z({error:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class be{on(e,t){return this._listeners=this._listeners||{},ge(e,t,this._listeners),{unsubscribe:()=>{this.off(e,t)}}}off(e,t){return ve(e,t,this._listeners),ve(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},ge(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new xe(e,t||{}));const r=e.type;if(this.listens(r)){e.target=this;const t=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of t)r.call(this,e);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const a of n)ve(r,a,this._oneTimeListeners),a.call(this,e);const i=this._eventedParent;i&&(z(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof ye&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var we={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const _e=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ke(e,t){const r={};for(const n in e)"ref"!==n&&(r[n]=e[n]);return _e.forEach((e=>{e in t&&(r[e]=t[e])})),r}function Se(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Se(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!Se(e[r],t[r]))return!1;return!0}return e===t}function je(e,t){e.push(t)}function Ee(e,t,r){je(r,{command:"addSource",args:[e,t[e]]})}function Ce(e,t,r){je(t,{command:"removeSource",args:[e]}),r[e]=!0}function Ne(e,t,r,n){Ce(e,r,n),Ee(e,t,r)}function Te(e,t,r){let n;for(n in e[r])if(Object.prototype.hasOwnProperty.call(e[r],n)&&"data"!==n&&!Se(e[r][n],t[r][n]))return!1;for(n in t[r])if(Object.prototype.hasOwnProperty.call(t[r],n)&&"data"!==n&&!Se(e[r][n],t[r][n]))return!1;return!0}function Pe(e,t,r,n,i,a){e=e||{},t=t||{};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(Se(e[s],t[s])||r.push({command:a,args:[n,s,t[s],i]}));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&!Object.prototype.hasOwnProperty.call(e,s)&&(Se(e[s],t[s])||r.push({command:a,args:[n,s,t[s],i]}))}function Ae(e){return e.id}function Me(e,t){return e[t.id]=t,e}class Ie{constructor(e,t,r,n){this.message=(e?`${e}: `:"")+r,n&&(this.identifier=n),null!=t&&t.__line__&&(this.line=t.__line__)}}function Oe(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(const i of r)for(const t in i)e[t]=i[t];return e}class De extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Re{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=e,this.bindings={};for(const[r,n]of t)this.bindings[r]=n}concat(e){return new Re(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Le={kind:"null"},Fe={kind:"number"},$e={kind:"string"},Be={kind:"boolean"},ze={kind:"color"},Ue={kind:"projectionDefinition"},Ve={kind:"object"},He={kind:"value"},Ge={kind:"collator"},We={kind:"formatted"},qe={kind:"padding"},Ke={kind:"colorArray"},Ze={kind:"numberArray"},Ye={kind:"resolvedImage"},Xe={kind:"variableAnchorOffsetCollection"};function Qe(e,t){return{kind:"array",itemType:e,N:t}}function Je(e){if("array"===e.kind){const t=Je(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const et=[Le,Fe,$e,Be,ze,Ue,We,Ve,Qe(He),qe,Ze,Ke,Ye,Xe];function tt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!tt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of et)if(!tt(e,t))return null}return`Expected ${Je(e)} but found ${Je(t)} instead.`}function rt(e,t){return t.some((t=>t.kind===e.kind))}function nt(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function it(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const at=.96422,st=.82521,ot=4/29,lt=6/29,ct=3*lt*lt,ut=lt*lt*lt,dt=Math.PI/180,ht=180/Math.PI;function pt(e){return(e%=360)<0&&(e+=360),e}function ft(e){let t,r,[n,i,a,s]=e;const o=gt((.2225045*(n=mt(n))+.7168786*(i=mt(i))+.0606169*(a=mt(a)))/1);n===i&&i===a?t=r=o:(t=gt((.4360747*n+.3850649*i+.1430804*a)/at),r=gt((.0139322*n+.0971045*i+.7141733*a)/st));const l=116*o-16;return[l<0?0:l,500*(t-o),200*(o-r),s]}function mt(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function gt(e){return e>ut?Math.pow(e,1/3):e/ct+ot}function vt(e){let[t,r,n,i]=e,a=(t+16)/116,s=isNaN(r)?a:a+r/500,o=isNaN(n)?a:a-n/200;return a=1*yt(a),s=at*yt(s),o=st*yt(o),[xt(3.1338561*s-1.6168667*a-.4906146*o),xt(-.9787684*s+1.9161415*a+.033454*o),xt(.0719453*s-.2289914*a+1.4052427*o),i]}function xt(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function yt(e){return e>lt?e*e*e:ct*(e-ot)}const bt=Object.hasOwn||function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};function wt(e,t){return bt(e,t)?e[t]:void 0}function _t(e){return parseInt(e.padEnd(2,e),16)/255}function kt(e,t){return St(t?e/100:e,0,1)}function St(e,t,r){return Math.min(Math.max(t,e),r)}function jt(e){return!e.some(Number.isNaN)}const Et={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ct(e,t,r){return e+r*(t-e)}function Nt(e,t,r){return e.map(((e,n)=>Ct(e,t[n],r)))}class Tt{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.r=e,this.g=t,this.b=r,this.a=n,i||(this.r*=n,this.g*=n,this.b*=n,n||this.overwriteGetter("rgb",[e,t,r,n]))}static parse(e){if(e instanceof Tt)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=wt(Et,e);if(t){const[e,r,n]=t;return[e/255,r/255,n/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let r=1;return[_t(e.slice(r,r+=t)),_t(e.slice(r,r+=t)),_t(e.slice(r,r+=t)),_t(e.slice(r,r+t)||"ff")]}if(e.startsWith("rgb")){const t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){const[e,r,n,i,a,s,o,l,c,u,d,h]=t,p=[i||" ",o||" ",u].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[n,s,c].join(""),t="%%%"===e?100:""===e?255:0;if(t){const e=[St(+r/t,0,1),St(+a/t,0,1),St(+l/t,0,1),d?kt(+d,h):1];if(jt(e))return e}}return}}const r=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(r){const[e,t,n,i,a,s,o,l,c]=r,u=[n||" ",a||" ",o].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const e=[+t,St(+i,0,100),St(+s,0,100),l?kt(+l,c):1];if(jt(e))return function(e){let[t,r,n,i]=e;function a(e){const i=(e+t/30)%12,a=r*Math.min(n,1-n);return n-a*Math.max(-1,Math.min(i-3,9-i,1))}return t=pt(t),r/=100,n/=100,[a(0),a(8),a(4),i]}(e)}}}(e);return t?new Tt(...t,!1):void 0}get rgb(){const{r:e,g:t,b:r,a:n}=this,i=n||1/0;return this.overwriteGetter("rgb",[e/i,t/i,r/i,n])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,r,n,i]=ft(e),a=Math.sqrt(r*r+n*n);return[Math.round(1e4*a)?pt(Math.atan2(n,r)*ht):NaN,a,t,i]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ft(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,n]=this.rgb;return`rgba(${[e,t,r].map((e=>Math.round(255*e))).join(",")},${n})`}static interpolate(e,t,r){switch(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb"){case"rgb":{const[n,i,a,s]=Nt(e.rgb,t.rgb,r);return new Tt(n,i,a,s,!1)}case"hcl":{const[n,i,a,s]=e.hcl,[o,l,c,u]=t.hcl;let d,h;if(isNaN(n)||isNaN(o))isNaN(n)?isNaN(o)?d=NaN:(d=o,1!==a&&0!==a||(h=l)):(d=n,1!==c&&0!==c||(h=i));else{let e=o-n;o>n&&e>180?e-=360:o<n&&n-o>180&&(e+=360),d=n+r*e}const[p,f,m,g]=function(e){let[t,r,n,i]=e;return t=isNaN(t)?0:t*dt,vt([n,Math.cos(t)*r,Math.sin(t)*r,i])}([d,null!=h?h:Ct(i,l,r),Ct(a,c,r),Ct(s,u,r)]);return new Tt(p,f,m,g,!1)}case"lab":{const[n,i,a,s]=vt(Nt(e.lab,t.lab,r));return new Tt(n,i,a,s,!1)}}}}Tt.black=new Tt(0,0,0,1),Tt.white=new Tt(1,1,1,1),Tt.transparent=new Tt(0,0,0,0),Tt.red=new Tt(1,0,0,1);class Pt{constructor(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const At=["bottom","center","top"];class Mt{constructor(e,t,r,n,i,a){this.text=e,this.image=t,this.scale=r,this.fontStack=n,this.textColor=i,this.verticalAlign=a}}class It{constructor(e){this.sections=e}static fromString(e){return new It([new Mt(e,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof It?e:It.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}}class Ot{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ot)return e;if("number"==typeof e)return new Ot([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Ot(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Ot(Nt(e.values,t.values,r))}}class Dt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Dt)return e;if("number"==typeof e)return new Dt([e]);if(Array.isArray(e)){for(const t of e)if("number"!=typeof t)return;return new Dt(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Dt(Nt(e.values,t.values,r))}}class Rt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Rt)return e;if("string"==typeof e){const t=Tt.parse(e);if(!t)return;return new Rt([t])}if(!Array.isArray(e))return;const t=[];for(const r of e){if("string"!=typeof r)return;const e=Tt.parse(r);if(!e)return;t.push(e)}return new Rt(t)}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb";const i=[];if(e.values.length!=t.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${t.values.length}), cannot interpolate.`);for(let a=0;a<e.values.length;a++)i.push(Tt.interpolate(e.values[a],t.values[a],r,n));return new Rt(i)}}class Lt extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Ft=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $t{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof $t)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let t=0;t<e.length;t+=2){const r=e[t],n=e[t+1];if("string"!=typeof r||!Ft.has(r))return;if(!Array.isArray(n)||2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])return}return new $t(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const n=e.values,i=t.values;if(n.length!==i.length)throw new Lt(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const a=[];for(let s=0;s<n.length;s+=2){if(n[s]!==i[s])throw new Lt(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${n[s]}, to[${s}]: ${i[s]}`);a.push(n[s]);const[e,t]=n[s+1],[o,l]=i[s+1];a.push([Ct(e,o,r),Ct(t,l,r)])}return new $t(a)}}class Bt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Bt({name:e,available:!1}):null}}class zt{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new zt(e,t,r)}static parse(e){return e instanceof zt?e:Array.isArray(e)&&3===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&"number"==typeof e[2]?new zt(e[0],e[1],e[2]):"object"==typeof e&&"string"==typeof e.from&&"string"==typeof e.to&&"number"==typeof e.transition?new zt(e.from,e.to,e.transition):"string"==typeof e?new zt(e,e,1):void 0}}function Ut(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Vt(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof zt||e instanceof Tt||e instanceof Pt||e instanceof It||e instanceof Ot||e instanceof Dt||e instanceof Rt||e instanceof $t||e instanceof Bt)return!0;if(Array.isArray(e)){for(const t of e)if(!Vt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Vt(e[t]))return!1;return!0}return!1}function Ht(e){if(null===e)return Le;if("string"==typeof e)return $e;if("boolean"==typeof e)return Be;if("number"==typeof e)return Fe;if(e instanceof Tt)return ze;if(e instanceof zt)return Ue;if(e instanceof Pt)return Ge;if(e instanceof It)return We;if(e instanceof Ot)return qe;if(e instanceof Dt)return Ze;if(e instanceof Rt)return Ke;if(e instanceof $t)return Xe;if(e instanceof Bt)return Ye;if(Array.isArray(e)){const t=e.length;let r;for(const n of e){const e=Ht(n);if(r){if(r===e)continue;r=He;break}r=e}return Qe(r||He,t)}return Ve}function Gt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Tt||e instanceof zt||e instanceof It||e instanceof Ot||e instanceof Dt||e instanceof Rt||e instanceof $t||e instanceof Bt?e.toString():JSON.stringify(e)}class Wt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Vt(e[1]))return t.error("invalid value");const r=e[1];let n=Ht(r);const i=t.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new Wt(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const qt={string:$e,number:Fe,boolean:Be,object:Ve};class Kt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r,n=1;const i=e[0];if("array"===i){let i,a;if(e.length>2){const r=e[1];if("string"!=typeof r||!(r in qt)||"object"===r)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=qt[r],n++}else i=He;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],n++}r=Qe(i,a)}else{if(!qt[i])throw new Error(`Types doesn't contain name = ${i}`);r=qt[i]}const a=[];for(;n<e.length;n++){const r=t.parse(e[n],n,He);if(!r)return null;a.push(r)}return new Kt(r,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(!tt(this.type,Ht(r)))return r;if(t===this.args.length-1)throw new Lt(`Expected value to be of type ${Je(this.type)}, but found ${Je(Ht(r))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Zt={"to-boolean":Be,"to-color":ze,"to-number":Fe,"to-string":$e};class Yt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!Zt[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");const n=Zt[r],i=[];for(let a=1;a<e.length;a++){const r=t.parse(e[a],a,He);if(!r)return null;i.push(r)}return new Yt(n,i)}evaluate(e){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(e));case"color":{let t,r;for(const n of this.args){if(t=n.evaluate(e),r=null,t instanceof Tt)return t;if("string"==typeof t){const r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&(r=t.length<3||t.length>4?`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Ut(t[0],t[1],t[2],t[3]),!r))return new Tt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Lt(r||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const n=Ot.parse(t);if(n)return n}throw new Lt(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"numberArray":{let t;for(const r of this.args){t=r.evaluate(e);const n=Dt.parse(t);if(n)return n}throw new Lt(`Could not parse numberArray from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"colorArray":{let t;for(const r of this.args){t=r.evaluate(e);const n=Rt.parse(t);if(n)return n}throw new Lt(`Could not parse colorArray from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const n=$t.parse(t);if(n)return n}throw new Lt(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),null===t)return 0;const n=Number(t);if(!isNaN(n))return n}throw new Lt(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return It.fromString(Gt(this.args[0].evaluate(e)));case"resolvedImage":return Bt.fromString(Gt(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Gt(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Xt=["Unknown","Point","LineString","Polygon"];class Qt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Xt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache.get(e);return t||(t=Tt.parse(e),this._parseColorCache.set(e,t)),t}}class Jt{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Re,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];this.registry=e,this.path=r,this.key=r.map((e=>`[${e}]`)).join(""),this.scope=i,this.errors=a,this.expectedType=n,this._isConstant=t}parse(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,r,n)._parse(e,i):this._parse(e,i)}_parse(e,t){function r(e,t,r){return"assert"===r?new Kt(t,[e]):"coerce"===r?new Yt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(e,this);if(!n)return null;if(this.expectedType){const e=this.expectedType,i=n.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind){if("projectionDefinition"===e.kind&&["string","array"].includes(i.kind)||["color","formatted","resolvedImage"].includes(e.kind)&&["value","string"].includes(i.kind)||["padding","numberArray"].includes(e.kind)&&["value","number","array"].includes(i.kind)||"colorArray"===e.kind&&["value","string","array"].includes(i.kind)||"variableAnchorOffsetCollection"===e.kind&&["value","array"].includes(i.kind))n=r(n,e,t.typeAnnotation||"coerce");else if(this.checkSubtype(e,i))return null}else n=r(n,e,t.typeAnnotation||"assert")}if(!(n instanceof Wt)&&"resolvedImage"!==n.type.kind&&this._isConstant(n)){const t=new Qt;try{n=new Wt(n.type,n.evaluate(t))}catch(e){return this.error(e.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const n="number"==typeof e?this.path.concat(e):this.path,i=r?this.scope.concat(r):this.scope;return new Jt(this.registry,this._isConstant,n,t||null,i,this.errors)}error(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=`${this.key}${r.map((e=>`[${e}]`)).join("")}`;this.errors.push(new De(i,e))}checkSubtype(e,t){const r=tt(e,t);return r&&this.error(r),r}}class er{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let i=1;i<e.length-1;i+=2){const n=e[i];if("string"!=typeof n)return t.error(`Expected string, but found ${typeof n} instead.`,i);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const a=t.parse(e[i+1],i+1);if(!a)return null;r.push([n,a])}const n=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return n?new er(r,n):null}outputDefined(){return this.result.outputDefined()}}class tr{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new tr(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class rr{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Fe),n=t.parse(e[2],2,Qe(t.expectedType||He));return r&&n?new rr(n.type.itemType,r,n):null}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Lt(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new Lt(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new Lt(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class nr{constructor(e,t){this.type=Be,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,He),n=t.parse(e[2],2,He);return r&&n?rt(r.type,[Be,$e,Fe,Le,He])?new nr(r,n):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Je(r.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!nt(t,["boolean","string","number","null"]))throw new Lt(`Expected first argument to be of type boolean, string, number or null, but found ${Je(Ht(t))} instead.`);if(!nt(r,["string","array"]))throw new Lt(`Expected second argument to be of type array or string, but found ${Je(Ht(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class ir{constructor(e,t,r){this.type=Fe,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,He),n=t.parse(e[2],2,He);if(!r||!n)return null;if(!rt(r.type,[Be,$e,Fe,Le,He]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Je(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,Fe);return i?new ir(r,n,i):null}return new ir(r,n)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!nt(t,["boolean","string","number","null"]))throw new Lt(`Expected first argument to be of type boolean, string, number or null, but found ${Je(Ht(t))} instead.`);let n;if(this.fromIndex&&(n=this.fromIndex.evaluate(e)),nt(r,["string"])){const e=r.indexOf(t,n);return-1===e?-1:[...r.slice(0,e)].length}if(nt(r,["array"]))return r.indexOf(t,n);throw new Lt(`Expected second argument to be of type array or string, but found ${Je(Ht(r))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class ar{constructor(e,t,r,n,i,a){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=i,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const i={},a=[];for(let l=2;l<e.length-1;l+=2){let s=e[l];const o=e[l+1];Array.isArray(s)||(s=[s]);const c=t.concat(l);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Ht(e)))return null}else r=Ht(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=a.length}const u=t.parse(o,l,n);if(!u)return null;n=n||u.type,a.push(u)}const s=t.parse(e[1],1,He);if(!s)return null;const o=t.parse(e[e.length-1],e.length-1,n);return o?"value"!==s.type.kind&&t.concat(1).checkSubtype(r,s.type)?null:new ar(r,n,s,i,a,o):null}evaluate(e){const t=this.input.evaluate(e);return(Ht(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class sr{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const n=[];for(let a=1;a<e.length-1;a+=2){const i=t.parse(e[a],a,Be);if(!i)return null;const s=t.parse(e[a+1],a+1,r);if(!s)return null;n.push([i,s]),r=r||s.type}const i=t.parse(e[e.length-1],e.length-1,r);if(!i)return null;if(!r)throw new Error("Can't infer output type");return new sr(r,n,i)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((e=>{let[t,r]=e;return r.outputDefined()}))&&this.otherwise.outputDefined()}}class or{constructor(e,t,r,n){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,He),n=t.parse(e[2],2,Fe);if(!r||!n)return null;if(!rt(r.type,[Qe(He),$e,He]))return t.error(`Expected first argument to be of type array or string, but found ${Je(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,Fe);return i?new or(r.type,r,n,i):null}return new or(r.type,r,n)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let n;if(this.endIndex&&(n=this.endIndex.evaluate(e)),nt(t,["string"]))return[...t].slice(r,n).join("");if(nt(t,["array"]))return t.slice(r,n);throw new Lt(`Expected first argument to be of type array or string, but found ${Je(Ht(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function lr(e,t){const r=e.length-1;let n,i,a=0,s=r,o=0;for(;a<=s;)if(o=Math.floor((a+s)/2),n=e[o],i=e[o+1],n<=t){if(o===r||t<i)return o;a=o+1}else{if(!(n>t))throw new Lt("Input is not a number.");s=o-1}return 0}class cr{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[n,i]of r)this.labels.push(n),this.outputs.push(i)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Fe);if(!r)return null;const n=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let a=1;a<e.length;a+=2){const r=1===a?-1/0:e[a],s=e[a+1],o=a,l=a+1;if("number"!=typeof r)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',o);if(n.length&&n[n.length-1][0]>=r)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',o);const c=t.parse(s,l,i);if(!c)return null;i=i||c.type,n.push([r,c])}return new cr(i,r,n)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const i=t.length;return n>=t[i-1]?r[i-1].evaluate(e):r[lr(t,n)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function ur(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dr,hr,pr=function(){if(hr)return dr;function e(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}return hr=1,dr=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var i=this.sampleCurveX(r)-e;if(Math.abs(i)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r-=i/a}var s=0,o=1;for(r=e,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-e)<t));n++)e>i?s=r:o=r,r=.5*(o-s)+s;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},dr}(),fr=ur(pr);class mr{constructor(e,t,r,n,i){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[a,s]of i)this.labels.push(a),this.outputs.push(s)}static interpolationFactor(e,t,r,n){let i=0;if("exponential"===e.name)i=gr(t,e.base,r,n);else if("linear"===e.name)i=gr(t,1,r,n);else if("cubic-bezier"===e.name){const a=e.controlPoints;i=new fr(a[0],a[1],a[2],a[3]).solve(gr(t,1,r,n))}return i}static parse(e,t){let[r,n,i,...a]=e;if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const e=n[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:e}}else{if("cubic-bezier"!==n[0])return t.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const e=n.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,Fe),!i)return null;const s=[];let o=null;"interpolate-hcl"!==r&&"interpolate-lab"!==r||t.expectedType==Ke?t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType):o=ze;for(let l=0;l<a.length;l+=2){const e=a[l],r=a[l+1],n=l+3,i=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(s.length&&s[s.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);const c=t.parse(r,i,o);if(!c)return null;o=o||c.type,s.push([e,c])}return it(o,Fe)||it(o,Ue)||it(o,ze)||it(o,qe)||it(o,Ze)||it(o,Ke)||it(o,Xe)||it(o,Qe(Fe))?new mr(o,r,n,i,s):t.error(`Type ${Je(o)} is not interpolatable.`)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const i=t.length;if(n>=t[i-1])return r[i-1].evaluate(e);const a=lr(t,n),s=mr.interpolationFactor(this.interpolation,n,t[a],t[a+1]),o=r[a].evaluate(e),l=r[a+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ct(o,l,s);case"color":return Tt.interpolate(o,l,s);case"padding":return Ot.interpolate(o,l,s);case"colorArray":return Rt.interpolate(o,l,s);case"numberArray":return Dt.interpolate(o,l,s);case"variableAnchorOffsetCollection":return $t.interpolate(o,l,s);case"array":return Nt(o,l,s);case"projectionDefinition":return zt.interpolate(o,l,s)}case"interpolate-hcl":switch(this.type.kind){case"color":return Tt.interpolate(o,l,s,"hcl");case"colorArray":return Rt.interpolate(o,l,s,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Tt.interpolate(o,l,s,"lab");case"colorArray":return Rt.interpolate(o,l,s,"lab")}}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function gr(e,t,r,n){const i=n-r,a=e-r;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}const vr={color:Tt.interpolate,number:Ct,padding:Ot.interpolate,numberArray:Dt.interpolate,colorArray:Rt.interpolate,variableAnchorOffsetCollection:$t.interpolate,array:Nt};class xr{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const n=t.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const s of e.slice(1)){const e=t.parse(s,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,i.push(e)}if(!r)throw new Error("No output type");const a=n&&i.some((e=>tt(n,e.type)));return new xr(a?He:r,i)}evaluate(e){let t,r=null,n=0;for(const i of this.args)if(n++,r=i.evaluate(e),r&&r instanceof Bt&&!r.available&&(t||(t=r.name),r=null,n===this.args.length&&(r=t)),null!==r)break;return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function yr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function br(e,t,r,n){return 0===n.compare(t,r)}function wr(e,t,r){const n="=="!==e&&"!="!==e;return class i{constructor(e,t,r){this.type=Be,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const r=e[0];let a=t.parse(e[1],1,He);if(!a)return null;if(!yr(r,a.type))return t.concat(1).error(`"${r}" comparisons are not supported for type '${Je(a.type)}'.`);let s=t.parse(e[2],2,He);if(!s)return null;if(!yr(r,s.type))return t.concat(2).error(`"${r}" comparisons are not supported for type '${Je(s.type)}'.`);if(a.type.kind!==s.type.kind&&"value"!==a.type.kind&&"value"!==s.type.kind)return t.error(`Cannot compare types '${Je(a.type)}' and '${Je(s.type)}'.`);n&&("value"===a.type.kind&&"value"!==s.type.kind?a=new Kt(s.type,[a]):"value"!==a.type.kind&&"value"===s.type.kind&&(s=new Kt(a.type,[s])));let o=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==s.type.kind&&"value"!==a.type.kind&&"value"!==s.type.kind)return t.error("Cannot use collator to compare non-string types.");if(o=t.parse(e[3],3,Ge),!o)return null}return new i(a,s,o)}evaluate(i){const a=this.lhs.evaluate(i),s=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const t=Ht(a),r=Ht(s);if(t.kind!==r.kind||"string"!==t.kind&&"number"!==t.kind)throw new Lt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const e=Ht(a),r=Ht(s);if("string"!==e.kind||"string"!==r.kind)return t(i,a,s)}return this.collator?r(i,a,s,this.collator.evaluate(i)):t(i,a,s)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const _r=wr("==",(function(e,t,r){return t===r}),br),kr=wr("!=",(function(e,t,r){return t!==r}),(function(e,t,r,n){return!br(0,t,r,n)})),Sr=wr("<",(function(e,t,r){return t<r}),(function(e,t,r,n){return n.compare(t,r)<0})),jr=wr(">",(function(e,t,r){return t>r}),(function(e,t,r,n){return n.compare(t,r)>0})),Er=wr("<=",(function(e,t,r){return t<=r}),(function(e,t,r,n){return n.compare(t,r)<=0})),Cr=wr(">=",(function(e,t,r){return t>=r}),(function(e,t,r,n){return n.compare(t,r)>=0}));class Nr{constructor(e,t,r){this.type=Ge,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");const n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Be);if(!n)return null;const i=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Be);if(!i)return null;let a=null;return r.locale&&(a=t.parse(r.locale,1,$e),!a)?null:new Nr(n,i,a)}evaluate(e){return new Pt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class Tr{constructor(e,t,r,n,i){this.type=$e,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Fe);if(!r)return null;const n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&(i=t.parse(n.locale,1,$e),!i))return null;let a=null;if(n.currency&&(a=t.parse(n.currency,1,$e),!a))return null;let s=null;if(n["min-fraction-digits"]&&(s=t.parse(n["min-fraction-digits"],1,Fe),!s))return null;let o=null;return n["max-fraction-digits"]&&(o=t.parse(n["max-fraction-digits"],1,Fe),!o)?null:new Tr(r,i,a,s,o)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Pr{constructor(e){this.type=We,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");const n=[];let i=!1;for(let a=1;a<=e.length-1;++a){const r=e[a];if(i&&"object"==typeof r&&!Array.isArray(r)){i=!1;let e=null;if(r["font-scale"]&&(e=t.parse(r["font-scale"],1,Fe),!e))return null;let a=null;if(r["text-font"]&&(a=t.parse(r["text-font"],1,Qe($e)),!a))return null;let s=null;if(r["text-color"]&&(s=t.parse(r["text-color"],1,ze),!s))return null;let o=null;if(r["vertical-align"]){if("string"==typeof r["vertical-align"]&&!At.includes(r["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${r["vertical-align"]}' instead.`);if(o=t.parse(r["vertical-align"],1,$e),!o)return null}const l=n[n.length-1];l.scale=e,l.font=a,l.textColor=s,l.verticalAlign=o}else{const r=t.parse(e[a],1,He);if(!r)return null;const s=r.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:r,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Pr(n)}evaluate(e){return new It(this.sections.map((t=>{const r=t.content.evaluate(e);return Ht(r)===Ye?new Mt("",r,null,null,null,t.verticalAlign?t.verticalAlign.evaluate(e):null):new Mt(Gt(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null,t.verticalAlign?t.verticalAlign.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class Ar{constructor(e){this.type=Ye,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,$e);return r?new Ar(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Bt.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class Mr{constructor(e){this.type=Fe,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error(`Expected argument of type string or array, but found ${Je(r.type)} instead.`):new Mr(r):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return[...t].length;if(Array.isArray(t))return t.length;throw new Lt(`Expected value to be of type string or array, but found ${Je(Ht(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Ir=8192;function Or(e,t){const r=(180+e[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(r*i*Ir),Math.round(n*i*Ir)]}function Dr(e,t){const r=Math.pow(2,t.z);return[(i=(e[0]/Ir+t.x)/r,360*i-180),(n=(e[1]/Ir+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90)];var n,i}function Rr(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Lr(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Fr(e,t,r){const n=e[0]-t[0],i=e[1]-t[1],a=e[0]-r[0],s=e[1]-r[1];return n*s-a*i==0&&n*a<=0&&i*s<=0}function $r(e,t,r,n){return 0!=(i=[n[0]-r[0],n[1]-r[1]])[0]*(a=[t[0]-e[0],t[1]-e[1]])[1]-i[1]*a[0]&&!(!Gr(e,t,r,n)||!Gr(r,n,e,t));var i,a}function Br(e,t,r){for(const n of r)for(let r=0;r<n.length-1;++r)if($r(e,t,n[r],n[r+1]))return!0;return!1}function zr(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1;for(const o of t)for(let t=0;t<o.length-1;t++){if(Fr(e,o[t],o[t+1]))return r;(a=o[t])[1]>(i=e)[1]!=(s=o[t+1])[1]>i[1]&&i[0]<(s[0]-a[0])*(i[1]-a[1])/(s[1]-a[1])+a[0]&&(n=!n)}var i,a,s;return n}function Ur(e,t){for(const r of t)if(zr(e,r))return!0;return!1}function Vr(e,t){for(const r of e)if(!zr(r,t))return!1;for(let r=0;r<e.length-1;++r)if(Br(e[r],e[r+1],t))return!1;return!0}function Hr(e,t){for(const r of t)if(Vr(e,r))return!0;return!1}function Gr(e,t,r,n){const i=n[0]-r[0],a=n[1]-r[1],s=(e[0]-r[0])*a-i*(e[1]-r[1]),o=(t[0]-r[0])*a-i*(t[1]-r[1]);return s>0&&o<0||s<0&&o>0}function Wr(e,t,r){const n=[];for(let i=0;i<e.length;i++){const a=[];for(let n=0;n<e[i].length;n++){const s=Or(e[i][n],r);Rr(t,s),a.push(s)}n.push(a)}return n}function qr(e,t,r){const n=[];for(let i=0;i<e.length;i++){const a=Wr(e[i],t,r);n.push(a)}return n}function Kr(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){const t=.5*n;let i=e[0]-r[0]>t?-n:r[0]-e[0]>t?n:0;0===i&&(i=e[0]-r[2]>t?-n:r[2]-e[0]>t?n:0),e[0]+=i}Rr(t,e)}function Zr(e,t,r,n){const i=Math.pow(2,n.z)*Ir,a=[n.x*Ir,n.y*Ir],s=[];for(const o of e)for(const e of o){const n=[e.x+a[0],e.y+a[1]];Kr(n,t,r,i),s.push(n)}return s}function Yr(e,t,r,n){const i=Math.pow(2,n.z)*Ir,a=[n.x*Ir,n.y*Ir],s=[];for(const l of e){const e=[];for(const r of l){const n=[r.x+a[0],r.y+a[1]];Rr(t,n),e.push(n)}s.push(e)}if(t[2]-t[0]<=i/2){(o=t)[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(const e of s)for(const n of e)Kr(n,t,r,i)}var o;return s}class Xr{constructor(e,t){this.type=Be,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Vt(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const r of t.features){const{type:t,coordinates:n}=r.geometry;"Polygon"===t&&e.push(n),"MultiPolygon"===t&&e.push(...n)}if(e.length)return new Xr(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new Xr(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new Xr(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const a=Wr(t.coordinates,n,i),s=Zr(e.geometry(),r,n,i);if(!Lr(r,n))return!1;for(const e of s)if(!zr(e,a))return!1}if("MultiPolygon"===t.type){const a=qr(t.coordinates,n,i),s=Zr(e.geometry(),r,n,i);if(!Lr(r,n))return!1;for(const e of s)if(!Ur(e,a))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const a=Wr(t.coordinates,n,i),s=Yr(e.geometry(),r,n,i);if(!Lr(r,n))return!1;for(const e of s)if(!Vr(e,a))return!1}if("MultiPolygon"===t.type){const a=qr(t.coordinates,n,i),s=Yr(e.geometry(),r,n,i);if(!Lr(r,n))return!1;for(const e of s)if(!Hr(e,a))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Qr=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const i=e-1>>1,a=t[i];if(r(n,a)>=0)break;t[e]=a,e=i}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,i=t[e];for(;e<n;){let n=1+(e<<1);const a=n+1;if(a<this.length&&r(t[a],t[n])<0&&(n=a),r(t[n],i)>=0)break;t[e]=t[n],e=n}t[e]=i}};function Jr(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tn;for(;n>r;){if(n-r>600){const a=n-r+1,s=t-r+1,o=Math.log(a),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(a-l)/a)*(s-a/2<0?-1:1);Jr(e,t,Math.max(r,Math.floor(t-s*l/a+c)),Math.min(n,Math.floor(t+(a-s)*l/a+c)),i)}const a=e[t];let s=r,o=n;for(en(e,r,t),i(e[n],a)>0&&en(e,r,n);s<o;){for(en(e,s,o),s++,o--;i(e[s],a)<0;)s++;for(;i(e[o],a)>0;)o--}0===i(e[r],a)?en(e,r,o):(o++,en(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}}function en(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function tn(e,t){return e<t?-1:e>t?1:0}function rn(e,t){if(e.length<=1)return[e];const r=[];let n,i;for(const a of e){const e=an(a);0!==e&&(a.area=Math.abs(e),void 0===i&&(i=e<0),i===e<0?(n&&r.push(n),n=[a]):n.push(a))}if(n&&r.push(n),t>1)for(let a=0;a<r.length;a++)r[a].length<=t||(Jr(r[a],t,1,r[a].length-1,nn),r[a]=r[a].slice(0,t));return r}function nn(e,t){return t.area-e.area}function an(e){let t=0;for(let r,n,i=0,a=e.length,s=a-1;i<a;s=i++)r=e[i],n=e[s],t+=(n.x-r.x)*(r.y+n.y);return t}const sn=1/298.257223563,on=sn*(2-sn),ln=Math.PI/180;class cn{constructor(e){const t=6378.137*ln*1e3,r=Math.cos(e*ln),n=1/(1-on*(1-r*r)),i=Math.sqrt(n);this.kx=t*i*r,this.ky=t*i*n*(1-on)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,n=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+n*n)}pointOnLine(e,t){let r,n,i,a,s=1/0;for(let o=0;o<e.length-1;o++){let l=e[o][0],c=e[o][1],u=this.wrap(e[o+1][0]-l)*this.kx,d=(e[o+1][1]-c)*this.ky,h=0;0===u&&0===d||(h=(this.wrap(t[0]-l)*this.kx*u+(t[1]-c)*this.ky*d)/(u*u+d*d),h>1?(l=e[o+1][0],c=e[o+1][1]):h>0&&(l+=u/this.kx*h,c+=d/this.ky*h)),u=this.wrap(t[0]-l)*this.kx,d=(t[1]-c)*this.ky;const p=u*u+d*d;p<s&&(s=p,r=l,n=c,i=o,a=h)}return{point:[r,n],index:i,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function un(e,t){return t[0]-e[0]}function dn(e){return e[1]-e[0]+1}function hn(e,t){return e[1]>=e[0]&&e[1]<t}function pn(e,t){if(e[0]>e[1])return[null,null];const r=dn(e);if(t){if(2===r)return[e,null];const t=Math.floor(r/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===r)return[e,null];const n=Math.floor(r/2)-1;return[[e[0],e[0]+n],[e[0]+n+1,e[1]]]}function fn(e,t){if(!hn(t,e.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let n=t[0];n<=t[1];++n)Rr(r,e[n]);return r}function mn(e){const t=[1/0,1/0,-1/0,-1/0];for(const r of e)for(const e of r)Rr(t,e);return t}function gn(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function vn(e,t,r){if(!gn(e)||!gn(t))return NaN;let n=0,i=0;return e[2]<t[0]&&(n=t[0]-e[2]),e[0]>t[2]&&(n=e[0]-t[2]),e[1]>t[3]&&(i=e[1]-t[3]),e[3]<t[1]&&(i=t[1]-e[3]),r.distance([0,0],[n,i])}function xn(e,t,r){const n=r.pointOnLine(t,e);return r.distance(e,n.point)}function yn(e,t,r,n,i){const a=Math.min(xn(e,[r,n],i),xn(t,[r,n],i)),s=Math.min(xn(r,[e,t],i),xn(n,[e,t],i));return Math.min(a,s)}function bn(e,t,r,n,i){if(!hn(t,e.length)||!hn(n,r.length))return 1/0;let a=1/0;for(let s=t[0];s<t[1];++s){const t=e[s],o=e[s+1];for(let e=n[0];e<n[1];++e){const n=r[e],s=r[e+1];if($r(t,o,n,s))return 0;a=Math.min(a,yn(t,o,n,s,i))}}return a}function wn(e,t,r,n,i){if(!hn(t,e.length)||!hn(n,r.length))return NaN;let a=1/0;for(let s=t[0];s<=t[1];++s)for(let t=n[0];t<=n[1];++t)if(a=Math.min(a,i.distance(e[s],r[t])),0===a)return a;return a}function _n(e,t,r){if(zr(e,t,!0))return 0;let n=1/0;for(const i of t){const t=i[0],a=i[i.length-1];if(t!==a&&(n=Math.min(n,xn(e,[a,t],r)),0===n))return n;const s=r.pointOnLine(i,e);if(n=Math.min(n,r.distance(e,s.point)),0===n)return n}return n}function kn(e,t,r,n){if(!hn(t,e.length))return NaN;for(let a=t[0];a<=t[1];++a)if(zr(e[a],r,!0))return 0;let i=1/0;for(let a=t[0];a<t[1];++a){const t=e[a],s=e[a+1];for(const e of r)for(let r=0,a=e.length,o=a-1;r<a;o=r++){const a=e[o],l=e[r];if($r(t,s,a,l))return 0;i=Math.min(i,yn(t,s,a,l,n))}}return i}function Sn(e,t){for(const r of e)for(const e of r)if(zr(e,t,!0))return!0;return!1}function jn(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const i=mn(e),a=mn(t);if(n!==1/0&&vn(i,a,r)>=n)return n;if(Lr(i,a)){if(Sn(e,t))return 0}else if(Sn(t,e))return 0;let s=1/0;for(const o of e)for(let e=0,n=o.length,i=n-1;e<n;i=e++){const n=o[i],a=o[e];for(const e of t)for(let t=0,i=e.length,o=i-1;t<i;o=t++){const i=e[o],l=e[t];if($r(n,a,i,l))return 0;s=Math.min(s,yn(n,a,i,l,r))}}return s}function En(e,t,r,n,i,a){if(!a)return;const s=vn(fn(n,a),i,r);s<t&&e.push([s,a,[0,0]])}function Cn(e,t,r,n,i,a,s){if(!a||!s)return;const o=vn(fn(n,a),fn(i,s),r);o<t&&e.push([o,a,s])}function Nn(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=Math.min(n.distance(e[0],r[0][0]),i);if(0===a)return a;const s=new Qr([[0,[0,e.length-1],[0,0]]],un),o=mn(r);for(;s.length>0;){const i=s.pop();if(i[0]>=a)continue;const l=i[1],c=t?50:100;if(dn(l)<=c){if(!hn(l,e.length))return NaN;if(t){const t=kn(e,l,r,n);if(isNaN(t)||0===t)return t;a=Math.min(a,t)}else for(let t=l[0];t<=l[1];++t){const i=_n(e[t],r,n);if(a=Math.min(a,i),0===a)return 0}}else{const r=pn(l,t);En(s,a,n,e,o,r[0]),En(s,a,n,e,o,r[1])}}return a}function Tn(e,t,r,n,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,s=Math.min(a,i.distance(e[0],r[0]));if(0===s)return s;const o=new Qr([[0,[0,e.length-1],[0,r.length-1]]],un);for(;o.length>0;){const a=o.pop();if(a[0]>=s)continue;const l=a[1],c=a[2],u=t?50:100,d=n?50:100;if(dn(l)<=u&&dn(c)<=d){if(!hn(l,e.length)&&hn(c,r.length))return NaN;let a;if(t&&n)a=bn(e,l,r,c,i),s=Math.min(s,a);else if(t&&!n){const t=e.slice(l[0],l[1]+1);for(let e=c[0];e<=c[1];++e)if(a=xn(r[e],t,i),s=Math.min(s,a),0===s)return s}else if(!t&&n){const t=r.slice(c[0],c[1]+1);for(let r=l[0];r<=l[1];++r)if(a=xn(e[r],t,i),s=Math.min(s,a),0===s)return s}else a=wn(e,l,r,c,i),s=Math.min(s,a)}else{const a=pn(l,t),u=pn(c,n);Cn(o,s,i,e,r,a[0],u[0]),Cn(o,s,i,e,r,a[0],u[1]),Cn(o,s,i,e,r,a[1],u[0]),Cn(o,s,i,e,r,a[1],u[1])}}return s}function Pn(e){return"MultiPolygon"===e.type?e.coordinates.map((e=>({type:"Polygon",coordinates:e}))):"MultiLineString"===e.type?e.coordinates.map((e=>({type:"LineString",coordinates:e}))):"MultiPoint"===e.type?e.coordinates.map((e=>({type:"Point",coordinates:e}))):[e]}class An{constructor(e,t){this.type=Fe,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Vt(e[1])){const t=e[1];if("FeatureCollection"===t.type)return new An(t,t.features.map((e=>Pn(e.geometry))).flat());if("Feature"===t.type)return new An(t,Pn(t.geometry));if("type"in t&&"coordinates"in t)return new An(t,Pn(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=e.geometry(),n=r.flat().map((t=>Dr([t.x,t.y],e.canonical)));if(0===r.length)return NaN;const i=new cn(n[0][1]);let a=1/0;for(const s of t){switch(s.type){case"Point":a=Math.min(a,Tn(n,!1,[s.coordinates],!1,i,a));break;case"LineString":a=Math.min(a,Tn(n,!1,s.coordinates,!0,i,a));break;case"Polygon":a=Math.min(a,Nn(n,!1,s.coordinates,i,a))}if(0===a)return a}return a}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=e.geometry(),n=r.flat().map((t=>Dr([t.x,t.y],e.canonical)));if(0===r.length)return NaN;const i=new cn(n[0][1]);let a=1/0;for(const s of t){switch(s.type){case"Point":a=Math.min(a,Tn(n,!0,[s.coordinates],!1,i,a));break;case"LineString":a=Math.min(a,Tn(n,!0,s.coordinates,!0,i,a));break;case"Polygon":a=Math.min(a,Nn(n,!0,s.coordinates,i,a))}if(0===a)return a}return a}(e,this.geometries);if("Polygon"===e.geometryType())return function(e,t){const r=e.geometry();if(0===r.length||0===r[0].length)return NaN;const n=rn(r,0).map((t=>t.map((t=>t.map((t=>Dr([t.x,t.y],e.canonical))))))),i=new cn(n[0][0][0][1]);let a=1/0;for(const s of t)for(const e of n){switch(s.type){case"Point":a=Math.min(a,Nn([s.coordinates],!1,e,i,a));break;case"LineString":a=Math.min(a,Nn(s.coordinates,!0,e,i,a));break;case"Polygon":a=Math.min(a,jn(e,s.coordinates,i,a))}if(0===a)return a}return a}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Mn{constructor(e){this.type=He,this.key=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=e[1];return null==r?t.error("Global state property must be defined."):"string"!=typeof r?t.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new Mn(r)}evaluate(e){var t;const r=null===(t=e.globals)||void 0===t?void 0:t.globalState;return r&&0!==Object.keys(r).length?wt(r,this.key):null}eachChild(){}outputDefined(){return!1}}const In={"==":_r,"!=":kr,">":jr,"<":Sr,">=":Cr,"<=":Er,array:Kt,at:rr,boolean:Kt,case:sr,coalesce:xr,collator:Nr,format:Pr,image:Ar,in:nr,"index-of":ir,interpolate:mr,"interpolate-hcl":mr,"interpolate-lab":mr,length:Mr,let:er,literal:Wt,match:ar,number:Kt,"number-format":Tr,object:Kt,slice:or,step:cr,string:Kt,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:tr,within:Xr,distance:An,"global-state":Mn};class On{constructor(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],n=On.definitions[r];if(!n)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter((t=>{let[r]=t;return!Array.isArray(r)||r.length===e.length-1}));let o=null;for(const[l,c]of s){o=new Jt(t.registry,$n,t.path,null,t.scope);const n=[];let a=!1;for(let t=1;t<e.length;t++){const r=e[t],i=Array.isArray(l)?l[t-1]:l.type,s=o.parse(r,1+n.length,i);if(!s){a=!0;break}n.push(s)}if(!a)if(Array.isArray(l)&&l.length!==n.length)o.error(`Expected ${l.length} arguments, but found ${n.length} instead.`);else{for(let e=0;e<n.length;e++){const t=Array.isArray(l)?l[e]:l.type,r=n[e];o.concat(e+1).checkSubtype(t,r.type)}if(0===o.errors.length)return new On(r,i,c,n)}}if(1===s.length)t.errors.push(...o.errors);else{const r=(s.length?s:a).map((e=>{let[t]=e;return r=t,Array.isArray(r)?`(${r.map(Je).join(", ")})`:`(${Je(r.type)}...)`;var r})).join(" | "),n=[];for(let i=1;i<e.length;i++){const r=t.parse(e[i],1+n.length);if(!r)return null;n.push(Je(r.type))}t.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(e,t){On.definitions=t;for(const r in t)e[r]=On}}function Dn(e,t){let[r,n,i,a]=t;r=r.evaluate(e),n=n.evaluate(e),i=i.evaluate(e);const s=a?a.evaluate(e):1,o=Ut(r,n,i,s);if(o)throw new Lt(o);return new Tt(r/255,n/255,i/255,s,!1)}function Rn(e,t){return e in t}function Ln(e,t){const r=t[e];return void 0===r?null:r}function Fn(e){return{type:e}}function $n(e){if(e instanceof tr)return $n(e.boundExpression);if(e instanceof On&&"error"===e.name)return!1;if(e instanceof Nr)return!1;if(e instanceof Xr)return!1;if(e instanceof An)return!1;if(e instanceof Mn)return!1;const t=e instanceof Yt||e instanceof Kt;let r=!0;return e.eachChild((e=>{r=t?r&&$n(e):r&&e instanceof Wt})),!!r&&Bn(e)&&Un(e,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Bn(e){if(e instanceof On){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Xr)return!1;if(e instanceof An)return!1;let t=!0;return e.eachChild((e=>{t&&!Bn(e)&&(t=!1)})),t}function zn(e){if(e instanceof On&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!zn(e)&&(t=!1)})),t}function Un(e,t){if(e instanceof On&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild((e=>{r&&!Un(e,t)&&(r=!1)})),r}function Vn(e){return{result:"success",value:e}}function Hn(e){return{result:"error",value:e}}function Gn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Wn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function qn(e){return!!e.expression&&e.expression.interpolated}function Kn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Zn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&Ht(e)===Ve}function Yn(e){return e}function Xn(e,t){const r=e.stops&&"object"==typeof e.stops[0][0],n=r||!(r||void 0!==e.property),i=e.type||(qn(t)?"exponential":"interval"),a=function(e){switch(e.type){case"color":return Tt.parse;case"padding":return Ot.parse;case"numberArray":return Dt.parse;case"colorArray":return Rt.parse;default:return null}}(t);if(a&&((e=Oe({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],a(e[1])]))),e.default=a(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==(s=e.colorSpace)&&"hcl"!==s&&"lab"!==s)throw new Error(`Unknown color space: "${e.colorSpace}"`);var s;const o=function(e){switch(e){case"exponential":return ti;case"interval":return ei;case"categorical":return Jn;case"identity":return ri;default:throw new Error(`Unknown function type "${e}"`)}}(i);let l,c;if("categorical"===i){l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}if(r){const r={},n=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],a=i[0].zoom;void 0===r[a]&&(r[a]={zoom:a,type:e.type,property:e.property,default:e.default,stops:[]},n.push(a)),r[a].stops.push([i[0].value,i[1]])}const i=[];for(const e of n)i.push([r[e].zoom,Xn(r[e],t)]);const a={name:"linear"};return{kind:"composite",interpolationType:a,interpolationFactor:mr.interpolationFactor.bind(void 0,a),zoomStops:i.map((e=>e[0])),evaluate:(r,n)=>{let{zoom:a}=r;return ti({stops:i,base:e.base},t,a).evaluate(a,n)}}}if(n){const r="exponential"===i?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:mr.interpolationFactor.bind(void 0,r),zoomStops:e.stops.map((e=>e[0])),evaluate:r=>{let{zoom:n}=r;return o(e,t,n,l,c)}}}return{kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[e.property]:void 0;return void 0===i?Qn(e.default,t.default):o(e,t,i,l,c)}}}function Qn(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function Jn(e,t,r,n,i){return Qn(typeof r===i?n[r]:void 0,e.default,t.default)}function ei(e,t,r){if("number"!==Kn(r))return Qn(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const i=lr(e.stops.map((e=>e[0])),r);return e.stops[i][1]}function ti(e,t,r){const n=void 0!==e.base?e.base:1;if("number"!==Kn(r))return Qn(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];const a=lr(e.stops.map((e=>e[0])),r),s=function(e,t,r,n){const i=n-r,a=e-r;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(r,n,e.stops[a][0],e.stops[a+1][0]),o=e.stops[a][1],l=e.stops[a+1][1],c=vr[t.type]||Yn;return"function"==typeof o.evaluate?{evaluate(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=o.evaluate.apply(void 0,r),a=l.evaluate.apply(void 0,r);if(void 0!==i&&void 0!==a)return c(i,a,s,e.colorSpace)}}:c(o,l,s,e.colorSpace)}function ri(e,t,r){switch(t.type){case"color":r=Tt.parse(r);break;case"formatted":r=It.fromString(r.toString());break;case"resolvedImage":r=Bt.fromString(r.toString());break;case"padding":r=Ot.parse(r);break;case"colorArray":r=Rt.parse(r);break;case"numberArray":r=Dt.parse(r);break;default:Kn(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0)}return Qn(r,e.default,t.default)}On.register(In,{error:[{kind:"error"},[$e],(e,t)=>{let[r]=t;throw new Lt(r.evaluate(e))}],typeof:[$e,[He],(e,t)=>{let[r]=t;return Je(Ht(r.evaluate(e)))}],"to-rgba":[Qe(Fe,4),[ze],(e,t)=>{let[r]=t;const[n,i,a,s]=r.evaluate(e).rgb;return[255*n,255*i,255*a,s]}],rgb:[ze,[Fe,Fe,Fe],Dn],rgba:[ze,[Fe,Fe,Fe,Fe],Dn],has:{type:Be,overloads:[[[$e],(e,t)=>{let[r]=t;return Rn(r.evaluate(e),e.properties())}],[[$e,Ve],(e,t)=>{let[r,n]=t;return Rn(r.evaluate(e),n.evaluate(e))}]]},get:{type:He,overloads:[[[$e],(e,t)=>{let[r]=t;return Ln(r.evaluate(e),e.properties())}],[[$e,Ve],(e,t)=>{let[r,n]=t;return Ln(r.evaluate(e),n.evaluate(e))}]]},"feature-state":[He,[$e],(e,t)=>{let[r]=t;return Ln(r.evaluate(e),e.featureState||{})}],properties:[Ve,[],e=>e.properties()],"geometry-type":[$e,[],e=>e.geometryType()],id:[He,[],e=>e.id()],zoom:[Fe,[],e=>e.globals.zoom],"heatmap-density":[Fe,[],e=>e.globals.heatmapDensity||0],elevation:[Fe,[],e=>e.globals.elevation||0],"line-progress":[Fe,[],e=>e.globals.lineProgress||0],accumulated:[He,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[Fe,Fn(Fe),(e,t)=>{let r=0;for(const n of t)r+=n.evaluate(e);return r}],"*":[Fe,Fn(Fe),(e,t)=>{let r=1;for(const n of t)r*=n.evaluate(e);return r}],"-":{type:Fe,overloads:[[[Fe,Fe],(e,t)=>{let[r,n]=t;return r.evaluate(e)-n.evaluate(e)}],[[Fe],(e,t)=>{let[r]=t;return-r.evaluate(e)}]]},"/":[Fe,[Fe,Fe],(e,t)=>{let[r,n]=t;return r.evaluate(e)/n.evaluate(e)}],"%":[Fe,[Fe,Fe],(e,t)=>{let[r,n]=t;return r.evaluate(e)%n.evaluate(e)}],ln2:[Fe,[],()=>Math.LN2],pi:[Fe,[],()=>Math.PI],e:[Fe,[],()=>Math.E],"^":[Fe,[Fe,Fe],(e,t)=>{let[r,n]=t;return Math.pow(r.evaluate(e),n.evaluate(e))}],sqrt:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.sqrt(r.evaluate(e))}],log10:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.log(r.evaluate(e))/Math.LN10}],ln:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.log(r.evaluate(e))}],log2:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.log(r.evaluate(e))/Math.LN2}],sin:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.sin(r.evaluate(e))}],cos:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.cos(r.evaluate(e))}],tan:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.tan(r.evaluate(e))}],asin:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.asin(r.evaluate(e))}],acos:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.acos(r.evaluate(e))}],atan:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.atan(r.evaluate(e))}],min:[Fe,Fn(Fe),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[Fe,Fn(Fe),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.abs(r.evaluate(e))}],round:[Fe,[Fe],(e,t)=>{let[r]=t;const n=r.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.floor(r.evaluate(e))}],ceil:[Fe,[Fe],(e,t)=>{let[r]=t;return Math.ceil(r.evaluate(e))}],"filter-==":[Be,[$e,He],(e,t)=>{let[r,n]=t;return e.properties()[r.value]===n.value}],"filter-id-==":[Be,[He],(e,t)=>{let[r]=t;return e.id()===r.value}],"filter-type-==":[Be,[$e],(e,t)=>{let[r]=t;return e.geometryType()===r.value}],"filter-<":[Be,[$e,He],(e,t)=>{let[r,n]=t;const i=e.properties()[r.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[Be,[He],(e,t)=>{let[r]=t;const n=e.id(),i=r.value;return typeof n==typeof i&&n<i}],"filter->":[Be,[$e,He],(e,t)=>{let[r,n]=t;const i=e.properties()[r.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[Be,[He],(e,t)=>{let[r]=t;const n=e.id(),i=r.value;return typeof n==typeof i&&n>i}],"filter-<=":[Be,[$e,He],(e,t)=>{let[r,n]=t;const i=e.properties()[r.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[Be,[He],(e,t)=>{let[r]=t;const n=e.id(),i=r.value;return typeof n==typeof i&&n<=i}],"filter->=":[Be,[$e,He],(e,t)=>{let[r,n]=t;const i=e.properties()[r.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[Be,[He],(e,t)=>{let[r]=t;const n=e.id(),i=r.value;return typeof n==typeof i&&n>=i}],"filter-has":[Be,[He],(e,t)=>{let[r]=t;return r.value in e.properties()}],"filter-has-id":[Be,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Be,[Qe($e)],(e,t)=>{let[r]=t;return r.value.indexOf(e.geometryType())>=0}],"filter-id-in":[Be,[Qe(He)],(e,t)=>{let[r]=t;return r.value.indexOf(e.id())>=0}],"filter-in-small":[Be,[$e,Qe(He)],(e,t)=>{let[r,n]=t;return n.value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[Be,[$e,Qe(He)],(e,t)=>{let[r,n]=t;return function(e,t,r,n){for(;r<=n;){const i=r+n>>1;if(t[i]===e)return!0;t[i]>e?n=i-1:r=i+1}return!1}(e.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:Be,overloads:[[[Be,Be],(e,t)=>{let[r,n]=t;return r.evaluate(e)&&n.evaluate(e)}],[Fn(Be),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:Be,overloads:[[[Be,Be],(e,t)=>{let[r,n]=t;return r.evaluate(e)||n.evaluate(e)}],[Fn(Be),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[Be,[Be],(e,t)=>{let[r]=t;return!r.evaluate(e)}],"is-supported-script":[Be,[$e],(e,t)=>{let[r]=t;const n=e.globals&&e.globals.isSupportedScript;return!n||n(r.evaluate(e))}],upcase:[$e,[$e],(e,t)=>{let[r]=t;return r.evaluate(e).toUpperCase()}],downcase:[$e,[$e],(e,t)=>{let[r]=t;return r.evaluate(e).toLowerCase()}],concat:[$e,Fn(He),(e,t)=>t.map((t=>Gt(t.evaluate(e)))).join("")],"resolved-locale":[$e,[Ge],(e,t)=>{let[r]=t;return r.evaluate(e).resolvedLocale()}]});class ni{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Qt,this._defaultValue=t?function(e){if("color"===e.type&&Zn(e.default))return new Tt(0,0,0,0);switch(e.type){case"color":return Tt.parse(e.default)||null;case"padding":return Ot.parse(e.default)||null;case"numberArray":return Dt.parse(e.default)||null;case"colorArray":return Rt.parse(e.default)||null;case"variableAnchorOffsetCollection":return $t.parse(e.default)||null;case"projectionDefinition":return zt.parse(e.default)||null;default:return void 0===e.default?null:e.default}}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,n,i,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,n,i,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Lt(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function ii(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in In}function ai(e,t){const r=new Jt(In,$n,[],t?function(e){const t={color:ze,string:$e,number:Fe,enum:$e,boolean:Be,formatted:We,padding:qe,numberArray:Ze,colorArray:Ke,projectionDefinition:Ue,resolvedImage:Ye,variableAnchorOffsetCollection:Xe};return"array"===e.type?Qe(t[e.value]||He,e.length):t[e.type]}(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Vn(new ni(n,t)):Hn(r.errors)}class si{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!zn(t.expression),this.globalStateRefs=di(t.expression)}evaluateWithoutErrorHandling(e,t,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,a)}evaluate(e,t,r,n,i,a){return this._styleExpression.evaluate(e,t,r,n,i,a)}}class oi{constructor(e,t,r,n){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!zn(t.expression),this.globalStateRefs=di(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,r,n,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,a)}evaluate(e,t,r,n,i,a){return this._styleExpression.evaluate(e,t,r,n,i,a)}interpolationFactor(e,t,r){return this.interpolationType?mr.interpolationFactor(this.interpolationType,e,t,r):0}}function li(e,t){const r=ai(e,t);if("error"===r.result)return r;const n=r.value.expression,i=Bn(n);if(!i&&!Gn(t))return Hn([new De("","data expressions not supported")]);const a=Un(n,["zoom"]);if(!a&&!Wn(t))return Hn([new De("","zoom expressions not supported")]);const s=ui(n);return s||a?s instanceof De?Hn([s]):s instanceof mr&&!qn(t)?Hn([new De("",'"interpolate" expressions cannot be used with this property')]):Vn(s?new oi(i?"camera":"composite",r.value,s.labels,s instanceof mr?s.interpolation:void 0):new si(i?"constant":"source",r.value)):Hn([new De("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ci{constructor(e,t){this._parameters=e,this._specification=t,Oe(this,Xn(this._parameters,this._specification))}static deserialize(e){return new ci(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ui(e){let t=null;if(e instanceof er)t=ui(e.result);else if(e instanceof xr){for(const r of e.args)if(t=ui(r),t)break}else(e instanceof cr||e instanceof mr)&&e.input instanceof On&&"zoom"===e.input.name&&(t=e);return t instanceof De||e.eachChild((e=>{const r=ui(e);r instanceof De?t=r:!t&&r?t=new De("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new De("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function di(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return e instanceof Mn&&t.add(e.key),e.eachChild((e=>{di(e,t)})),t}function hi(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!hi(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const pi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fi(e){if(null==e)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};hi(e)||(e=vi(e));const t=ai(e,pi);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,r,n)=>t.value.evaluate(e,r,{},n),needGeometry:gi(e),getGlobalStateRefs:()=>di(t.value.expression)}}function mi(e,t){return e<t?-1:e>t?1:0}function gi(e){if(!Array.isArray(e))return!1;if("within"===e[0]||"distance"===e[0])return!0;for(let t=1;t<e.length;t++)if(gi(e[t]))return!0;return!1}function vi(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?xi(e[1],e[2],"=="):"!="===t?wi(xi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?xi(e[1],e[2],t):"any"===t?(r=e.slice(1),["any"].concat(r.map(vi))):"all"===t?["all"].concat(e.slice(1).map(vi)):"none"===t?["all"].concat(e.slice(1).map(vi).map(wi)):"in"===t?yi(e[1],e.slice(2)):"!in"===t?wi(yi(e[1],e.slice(2))):"has"===t?bi(e[1]):"!has"!==t||wi(bi(e[1]));var r}function xi(e,t,r){switch(e){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,e,t]}}function yi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(mi)]]:["filter-in-small",e,["literal",t]]}}function bi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function wi(e){return["!",e]}function _i(e){const t=typeof e;if("number"===t||"boolean"===t||"string"===t||null==e)return JSON.stringify(e);if(Array.isArray(e)){let t="[";for(const r of e)t+=`${_i(r)},`;return`${t}]`}const r=Object.keys(e).sort();let n="{";for(let i=0;i<r.length;i++)n+=`${JSON.stringify(r[i])}:${_i(e[r[i]])},`;return`${n}}`}function ki(e){let t="";for(const r of _e)t+=`/${_i(e[r])}`;return t}function Si(e){const t=e.value;return t?[new Ie(e.key,t,"constants have been deprecated as of v8")]:[]}function ji(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ei(e){if(Array.isArray(e))return e.map(Ei);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=Ei(e[r]);return t}return ji(e)}function Ci(e){const t=e.key,r=e.value,n=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,s=e.styleSpec,o=e.validateSpec;let l=[];const c=Kn(r);if("object"!==c)return[new Ie(t,r,`object expected, ${c} found`)];for(const u in r){const e=u.split(".")[0],c=wt(n,e)||n["*"];let d;if(wt(i,e))d=i[e];else if(wt(n,e))d=o;else if(i["*"])d=i["*"];else{if(!n["*"]){l.push(new Ie(t,r[u],`unknown property "${u}"`));continue}d=o}l=l.concat(d({key:(t?`${t}.`:t)+u,value:r[u],valueSpec:c,style:a,styleSpec:s,object:r,objectKey:u,validateSpec:o},r))}for(const u in n)i[u]||n[u].required&&void 0===n[u].default&&void 0===r[u]&&l.push(new Ie(t,r,`missing required property "${u}"`));return l}function Ni(e){const t=e.value,r=e.valueSpec,n=e.style,i=e.styleSpec,a=e.key,s=e.arrayElementValidator||e.validateSpec;if("array"!==Kn(t))return[new Ie(a,t,`array expected, ${Kn(t)} found`)];if(r.length&&t.length!==r.length)return[new Ie(a,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new Ie(a,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let o={type:r.value,values:r.values};i.$version<7&&(o.function=r.function),"object"===Kn(r.value)&&(o=r.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(s({array:t,arrayIndex:c,value:t[c],valueSpec:o,validateSpec:e.validateSpec,style:n,styleSpec:i,key:`${a}[${c}]`}));return l}function Ti(e){const t=e.key,r=e.value,n=e.valueSpec;let i=Kn(r);return"number"===i&&r!=r&&(i="NaN"),"number"!==i?[new Ie(t,r,`number expected, ${i} found`)]:"minimum"in n&&r<n.minimum?[new Ie(t,r,`${r} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&r>n.maximum?[new Ie(t,r,`${r} is greater than the maximum value ${n.maximum}`)]:[]}function Pi(e){const t=e.valueSpec,r=ji(e.value.type);let n,i,a,s={};const o="categorical"!==r&&void 0===e.value.property,l=!o,c="array"===Kn(e.value.stops)&&"array"===Kn(e.value.stops[0])&&"object"===Kn(e.value.stops[0][0]),u=Ci({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new Ie(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const n=e.value;return t=t.concat(Ni({key:e.key,value:n,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===Kn(n)&&0===n.length&&t.push(new Ie(e.key,n,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&o&&u.push(new Ie(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||u.push(new Ie(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!qn(e.valueSpec)&&u.push(new Ie(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Gn(e.valueSpec)?u.push(new Ie(e.key,e.value,"property functions not supported")):o&&!Wn(e.valueSpec)&&u.push(new Ie(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!c||void 0!==e.value.property||u.push(new Ie(e.key,e.value,'"property" property is required')),u;function d(e){let r=[];const n=e.value,o=e.key;if("array"!==Kn(n))return[new Ie(o,n,`array expected, ${Kn(n)} found`)];if(2!==n.length)return[new Ie(o,n,`array length 2 expected, length ${n.length} found`)];if(c){if("object"!==Kn(n[0]))return[new Ie(o,n,`object expected, ${Kn(n[0])} found`)];if(void 0===n[0].zoom)return[new Ie(o,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new Ie(o,n,"object stop key must have value")];if(a&&a>ji(n[0].zoom))return[new Ie(o,n[0].zoom,"stop zoom values must appear in ascending order")];ji(n[0].zoom)!==a&&(a=ji(n[0].zoom),i=void 0,s={}),r=r.concat(Ci({key:`${o}[0]`,value:n[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Ti,value:h}}))}else r=r.concat(h({key:`${o}[0]`,value:n[0],validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},n));return ii(Ei(n[1]))?r.concat([new Ie(`${o}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(e.validateSpec({key:`${o}[1]`,value:n[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function h(e,a){const o=Kn(e.value),l=ji(e.value),c=null!==e.value?e.value:a;if(n){if(o!==n)return[new Ie(e.key,c,`${o} stop domain type must match previous stop domain type ${n}`)]}else n=o;if("number"!==o&&"string"!==o&&"boolean"!==o)return[new Ie(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==o&&"categorical"!==r){let n=`number expected, ${o} found`;return Gn(t)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(e.key,c,n)]}return"categorical"!==r||"number"!==o||isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===o&&void 0!==i&&l<i?[new Ie(e.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===r&&l in s?[new Ie(e.key,c,"stop domain values must be unique")]:(s[l]=!0,[])):[new Ie(e.key,c,`integer expected, found ${l}`)]}}function Ai(e){const t=("property"===e.expressionContext?li:ai)(Ei(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new Ie(`${e.key}${t.key}`,e.value,t.message)));const r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new Ie(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!zn(r))return[new Ie(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!zn(r))return[new Ie(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Un(r,["zoom","feature-state"]))return[new Ie(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Bn(r))return[new Ie(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mi(e){const t=e.key,r=e.value,n=Kn(r);return"string"!==n?[new Ie(t,r,`color expected, ${n} found`)]:Tt.parse(String(r))?[]:[new Ie(t,r,`color expected, "${r}" found`)]}function Ii(e){const t=e.key,r=e.value,n=e.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(ji(r))&&i.push(new Ie(t,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(ji(r))&&i.push(new Ie(t,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function Oi(e){return hi(Ei(e.value))?Ai(Oe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Di(e)}function Di(e){const t=e.value,r=e.key;if("array"!==Kn(t))return[new Ie(r,t,`array expected, ${Kn(t)} found`)];const n=e.styleSpec;let i,a=[];if(t.length<1)return[new Ie(r,t,"filter array must have at least 1 element")];switch(a=a.concat(Ii({key:`${r}[0]`,value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),ji(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===ji(t[1])&&a.push(new Ie(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&a.push(new Ie(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Kn(t[1]),"string"!==i&&a.push(new Ie(`${r}[1]`,t[1],`string expected, ${i} found`)));for(let s=2;s<t.length;s++)i=Kn(t[s]),"$type"===ji(t[1])?a=a.concat(Ii({key:`${r}[${s}]`,value:t[s],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Ie(`${r}[${s}]`,t[s],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let n=1;n<t.length;n++)a=a.concat(Di({key:`${r}[${n}]`,value:t[n],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Kn(t[1]),2!==t.length?a.push(new Ie(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&a.push(new Ie(`${r}[1]`,t[1],`string expected, ${i} found`))}return a}function Ri(e,t){const r=e.key,n=e.validateSpec,i=e.style,a=e.styleSpec,s=e.value,o=e.objectKey,l=a[`${t}_${e.layerType}`];if(!l)return[];const c=o.match(/^(.*)-transition$/);if("paint"===t&&c&&l[c[1]]&&l[c[1]].transition)return n({key:r,value:s,valueSpec:a.transition,style:i,styleSpec:a});const u=e.valueSpec||l[o];if(!u)return[new Ie(r,s,`unknown property "${o}"`)];let d;if("string"===Kn(s)&&Gn(u)&&!u.tokens&&(d=/^{([^}]+)}$/.exec(s)))return[new Ie(r,s,`"${o}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(d[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===o&&i&&!i.glyphs&&h.push(new Ie(r,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Zn(Ei(s))&&"identity"===ji(s.type)&&h.push(new Ie(r,s,'"text-font" does not support identity functions'))),h.concat(n({key:e.key,value:s,valueSpec:u,style:i,styleSpec:a,expressionContext:"property",propertyType:t,propertyKey:o}))}function Li(e){return Ri(e,"paint")}function Fi(e){return Ri(e,"layout")}function $i(e){let t=[];const r=e.value,n=e.key,i=e.style,a=e.styleSpec;if("object"!==Kn(r))return[new Ie(n,r,`object expected, ${Kn(r)} found`)];r.type||r.ref||t.push(new Ie(n,r,'either "type" or "ref" is required'));let s=ji(r.type);const o=ji(r.ref);if(r.id){const a=ji(r.id);for(let s=0;s<e.arrayIndex;s++){const e=i.layers[s];ji(e.id)===a&&t.push(new Ie(n,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in r&&t.push(new Ie(n,r[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{ji(t.id)===o&&(e=t)})),e?e.ref?t.push(new Ie(n,r.ref,"ref cannot reference another ref layer")):s=ji(e.type):t.push(new Ie(n,r.ref,`ref layer "${o}" not found`))}else if("background"!==s)if(r.source){const e=i.sources&&i.sources[r.source],a=e&&ji(e.type);e?"vector"===a&&"raster"===s?t.push(new Ie(n,r.source,`layer "${r.id}" requires a raster source`)):"raster-dem"!==a&&"hillshade"===s||"raster-dem"!==a&&"color-relief"===s?t.push(new Ie(n,r.source,`layer "${r.id}" requires a raster-dem source`)):"raster"===a&&"raster"!==s?t.push(new Ie(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==a||r["source-layer"]?"raster-dem"===a&&"hillshade"!==s&&"color-relief"!==s?t.push(new Ie(n,r.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===a&&e.lineMetrics||t.push(new Ie(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ie(n,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new Ie(n,r.source,`source "${r.source}" not found`))}else t.push(new Ie(n,r,'missing required property "source"'));return t=t.concat(Ci({key:n,value:r,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:`${n}.type`,value:r.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:r,objectKey:"type"}),filter:Oi,layout:e=>Ci({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Fi(Oe({layerType:s},e))}}),paint:e=>Ci({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Li(Oe({layerType:s},e))}})}})),t}function Bi(e){const t=e.value,r=e.key,n=Kn(t);return"string"!==n?[new Ie(r,t,`string expected, ${n} found`)]:[]}const zi={promoteId:function(e){let{key:t,value:r}=e;if("string"===Kn(r))return Bi({key:t,value:r});{const e=[];for(const n in r)e.push(...Bi({key:`${t}.${n}`,value:r[n]}));return e}}};function Ui(e){const t=e.value,r=e.key,n=e.styleSpec,i=e.style,a=e.validateSpec;if(!t.type)return[new Ie(r,t,'"type" is required')];const s=ji(t.type);let o;switch(s){case"vector":case"raster":return o=Ci({key:r,value:t,valueSpec:n[`source_${s.replace("-","_")}`],style:e.style,styleSpec:n,objectElementValidators:zi,validateSpec:a}),o;case"raster-dem":return o=function(e){var t;const r=null!==(t=e.sourceName)&&void 0!==t?t:"",n=e.value,i=e.styleSpec,a=i.source_raster_dem,s=e.style;let o=[];const l=Kn(n);if(void 0===n)return o;if("object"!==l)return o.push(new Ie("source_raster_dem",n,`object expected, ${l} found`)),o;const c="custom"===ji(n.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],d=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const h in n)!c&&u.includes(h)?o.push(new Ie(h,n[h],`In "${r}": "${h}" is only valid when "encoding" is set to "custom". ${d} encoding found`)):a[h]?o=o.concat(e.validateSpec({key:h,value:n[h],valueSpec:a[h],validateSpec:e.validateSpec,style:s,styleSpec:i})):o.push(new Ie(h,n[h],`unknown property "${h}"`));return o}({sourceName:r,value:t,style:e.style,styleSpec:n,validateSpec:a}),o;case"geojson":if(o=Ci({key:r,value:t,valueSpec:n.source_geojson,style:i,styleSpec:n,validateSpec:a,objectElementValidators:zi}),t.cluster)for(const e in t.clusterProperties){const[n,i]=t.clusterProperties[e],a="string"==typeof n?[n,["accumulated"],["get",e]]:n;o.push(...Ai({key:`${r}.${e}.map`,value:i,expressionContext:"cluster-map"})),o.push(...Ai({key:`${r}.${e}.reduce`,value:a,expressionContext:"cluster-reduce"}))}return o;case"video":return Ci({key:r,value:t,valueSpec:n.source_video,style:i,validateSpec:a,styleSpec:n});case"image":return Ci({key:r,value:t,valueSpec:n.source_image,style:i,validateSpec:a,styleSpec:n});case"canvas":return[new Ie(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ii({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Vi(e){const t=e.value,r=e.styleSpec,n=r.light,i=e.style;let a=[];const s=Kn(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new Ie("light",t,`object expected, ${s} found`)]),a;for(const o in t){const s=o.match(/^(.*)-transition$/);a=a.concat(s&&n[s[1]]&&n[s[1]].transition?e.validateSpec({key:o,value:t[o],valueSpec:r.transition,validateSpec:e.validateSpec,style:i,styleSpec:r}):n[o]?e.validateSpec({key:o,value:t[o],valueSpec:n[o],validateSpec:e.validateSpec,style:i,styleSpec:r}):[new Ie(o,t[o],`unknown property "${o}"`)])}return a}function Hi(e){const t=e.value,r=e.styleSpec,n=r.sky,i=e.style,a=Kn(t);if(void 0===t)return[];if("object"!==a)return[new Ie("sky",t,`object expected, ${a} found`)];let s=[];for(const o in t)s=s.concat(n[o]?e.validateSpec({key:o,value:t[o],valueSpec:n[o],style:i,styleSpec:r}):[new Ie(o,t[o],`unknown property "${o}"`)]);return s}function Gi(e){const t=e.value,r=e.styleSpec,n=r.terrain,i=e.style;let a=[];const s=Kn(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new Ie("terrain",t,`object expected, ${s} found`)]),a;for(const o in t)a=a.concat(n[o]?e.validateSpec({key:o,value:t[o],valueSpec:n[o],validateSpec:e.validateSpec,style:i,styleSpec:r}):[new Ie(o,t[o],`unknown property "${o}"`)]);return a}function Wi(e){let t=[];const r=e.value,n=e.key;if(Array.isArray(r)){const i=[],a=[];for(const s in r)r[s].id&&i.includes(r[s].id)&&t.push(new Ie(n,r,`all the sprites' ids must be unique, but ${r[s].id} is duplicated`)),i.push(r[s].id),r[s].url&&a.includes(r[s].url)&&t.push(new Ie(n,r,`all the sprites' URLs must be unique, but ${r[s].url} is duplicated`)),a.push(r[s].url),t=t.concat(Ci({key:`${n}[${s}]`,value:r[s],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:e.validateSpec}));return t}return Bi({key:n,value:r})}function qi(e){return t=e.value,Boolean(t)&&t.constructor===Object?[]:[new Ie(e.key,e.value,`object expected, ${Kn(e.value)} found`)];var t}const Ki={"*":()=>[],array:Ni,boolean:function(e){const t=e.value,r=e.key,n=Kn(t);return"boolean"!==n?[new Ie(r,t,`boolean expected, ${n} found`)]:[]},number:Ti,color:Mi,constants:Si,enum:Ii,filter:Oi,function:Pi,layer:$i,object:Ci,source:Ui,light:Vi,sky:Hi,terrain:Gi,projection:function(e){const t=e.value,r=e.styleSpec,n=r.projection,i=e.style,a=Kn(t);if(void 0===t)return[];if("object"!==a)return[new Ie("projection",t,`object expected, ${a} found`)];let s=[];for(const o in t)s=s.concat(n[o]?e.validateSpec({key:o,value:t[o],valueSpec:n[o],style:i,styleSpec:r}):[new Ie(o,t[o],`unknown property "${o}"`)]);return s},projectionDefinition:function(e){const t=e.key;let r=e.value;r=r instanceof String?r.valueOf():r;const n=Kn(r);return"array"!==n||function(e){return Array.isArray(e)&&3===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&"number"==typeof e[2]}(r)||function(e){return!!["interpolate","step","literal"].includes(e[0])}(r)?["array","string"].includes(n)?[]:[new Ie(t,r,`projection expected, invalid type "${n}" found`)]:[new Ie(t,r,`projection expected, invalid array ${JSON.stringify(r)} found`)]},string:Bi,formatted:function(e){return 0===Bi(e).length?[]:Ai(e)},resolvedImage:function(e){return 0===Bi(e).length?[]:Ai(e)},padding:function(e){const t=e.key,r=e.value;if("array"===Kn(r)){if(r.length<1||r.length>4)return[new Ie(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const n={type:"number"};let i=[];for(let a=0;a<r.length;a++)i=i.concat(e.validateSpec({key:`${t}[${a}]`,value:r[a],validateSpec:e.validateSpec,valueSpec:n}));return i}return Ti({key:t,value:r,valueSpec:{}})},numberArray:function(e){const t=e.key,r=e.value;if("array"===Kn(r)){const n={type:"number"};if(r.length<1)return[new Ie(t,r,"array length at least 1 expected, length 0 found")];let i=[];for(let a=0;a<r.length;a++)i=i.concat(e.validateSpec({key:`${t}[${a}]`,value:r[a],validateSpec:e.validateSpec,valueSpec:n}));return i}return Ti({key:t,value:r,valueSpec:{}})},colorArray:function(e){const t=e.key,r=e.value;if("array"===Kn(r)){if(r.length<1)return[new Ie(t,r,"array length at least 1 expected, length 0 found")];let e=[];for(let n=0;n<r.length;n++)e=e.concat(Mi({key:`${t}[${n}]`,value:r[n]}));return e}return Mi({key:t,value:r})},variableAnchorOffsetCollection:function(e){const t=e.key,r=e.value,n=Kn(r),i=e.styleSpec;if("array"!==n||r.length<1||r.length%2!=0)return[new Ie(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let a=[];for(let s=0;s<r.length;s+=2)a=a.concat(Ii({key:`${t}[${s}]`,value:r[s],valueSpec:i.layout_symbol["text-anchor"]})),a=a.concat(Ni({key:`${t}[${s+1}]`,value:r[s+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:i}));return a},sprite:Wi,state:qi};function Zi(e){const t=e.value,r=e.valueSpec,n=e.styleSpec;return e.validateSpec=Zi,r.expression&&Zn(ji(t))?Pi(e):r.expression&&ii(Ei(t))?Ai(e):r.type&&Ki[r.type]?Ki[r.type](e):Ci(Oe({},e,{valueSpec:r.type?n[r.type]:r}))}function Yi(e){const t=e.value,r=e.key,n=Bi(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new Ie(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new Ie(r,t,'"glyphs" url must include a "{range}" token'))),n}function Xi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we,r=[];return r=r.concat(Zi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:Zi,objectElementValidators:{glyphs:Yi,"*":()=>[]}})),e.constants&&(r=r.concat(Si({key:"constants",value:e.constants}))),Ji(r)}function Qi(e){return function(t){return e({...t,validateSpec:Zi})}}function Ji(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function ea(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ji(e.apply(this,r))}}Xi.source=ea(Qi(Ui)),Xi.sprite=ea(Qi(Wi)),Xi.glyphs=ea(Qi(Yi)),Xi.light=ea(Qi(Vi)),Xi.sky=ea(Qi(Hi)),Xi.terrain=ea(Qi(Gi)),Xi.state=ea(Qi(qi)),Xi.layer=ea(Qi($i)),Xi.filter=ea(Qi(Oi)),Xi.paintProperty=ea(Qi(Li)),Xi.layoutProperty=ea(Qi(Fi));const ta=Xi,ra=ta.light,na=ta.sky,ia=ta.paintProperty,aa=ta.layoutProperty;function sa(e,t){let r=!1;if(t&&t.length)for(const n of t)e.fire(new ye(new Error(n.message))),r=!0;return r}class oa{constructor(e,t,r){const n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(r=i[2]);for(let e=0;e<this.d*this.d;e++){const t=i[3+e],r=i[3+e+1];n.push(t===r?null:i.subarray(t,r))}const a=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],a),this.bboxes=i.subarray(a),this.insert=this._insertReadonly}else{this.d=t+2*r;for(let e=0;e<this.d*this.d;e++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;const i=r/t*e;this.min=-i,this.max=e+i}insert(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,r,n,i,a){this.cells[i].push(a)}query(e,t,r,n,i){const a=this.min,s=this.max;if(e<=a&&t<=a&&s<=r&&s<=n&&!i)return Array.prototype.slice.call(this.keys);{const a=[];return this._forEachCell(e,t,r,n,this._queryCell,a,{},i),a}}_queryCell(e,t,r,n,i,a,s,o){const l=this.cells[i];if(null!==l){const i=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const d=l[u];if(void 0===s[d]){const l=4*d;(o?o(c[l+0],c[l+1],c[l+2],c[l+3]):e<=c[l+2]&&t<=c[l+3]&&r>=c[l+0]&&n>=c[l+1])?(s[d]=!0,a.push(i[d])):s[d]=!1}}}}_forEachCell(e,t,r,n,i,a,s,o){const l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(r),d=this._convertToCellCoord(n);for(let h=l;h<=u;h++)for(let l=c;l<=d;l++){const c=this.d*l+h;if((!o||o(this._convertFromCellCoord(h),this._convertFromCellCoord(l),this._convertFromCellCoord(h+1),this._convertFromCellCoord(l+1)))&&i.call(this,e,t,r,n,c,a,s,o))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let r=0;for(let a=0;a<this.cells.length;a++)r+=this.cells[a].length;const n=new Int32Array(t+r+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;let i=t;for(let a=0;a<e.length;a++){const t=e[a];n[3+a]=i,n.set(t,i),i+=t.length}return n[3+e.length]=i,n.set(this.keys,i),i+=this.keys.length,n[3+e.length+1]=i,n.set(this.bboxes,i),i+=this.bboxes.length,n.buffer}static serialize(e,t){const r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}}static deserialize(e){return new oa(e.buffer)}}const la={};function ca(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(la[e])throw new Error(`${e} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),la[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}ca("Object",Object),ca("Set",Set),ca("TransferableGridIndex",oa),ca("Color",Tt),ca("Error",Error),ca("AJAXError",he),ca("ResolvedImage",Bt),ca("StylePropertyFunction",ci),ca("StyleExpression",ni,{omit:["_evaluator"]}),ca("ZoomDependentExpression",oi),ca("ZoomConstantExpression",si),ca("CompoundExpression",On,{omit:["_evaluate"]});for(const wh in In)In[wh]._classRegistryKey||ca(`Expression_${wh}`,In[wh]);function ua(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function da(e){return e.$name||e.constructor._classRegistryKey}function ha(e){return!function(e){if(null===e||"object"!=typeof e)return!1;const t=da(e);return!(!t||"Object"===t)}(e)&&(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error||ua(e)||X(e)||ArrayBuffer.isView(e)||e instanceof ImageData)}function pa(e,t){if(ha(e))return(ua(e)||X(e))&&t&&t.push(e),ArrayBuffer.isView(e)&&t&&t.push(e.buffer),e instanceof ImageData&&t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const r=[];for(const n of e)r.push(pa(n,t));return r}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);const r=da(e);if(!r)throw new Error(`can't serialize object of unregistered class ${e.constructor.name}`);if(!la[r])throw new Error(`${r} is not registered.`);const{klass:n}=la[r],i=n.serialize?n.serialize(e,t):{};if(n.serialize){if(t&&i===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const n in e){if(!e.hasOwnProperty(n))continue;if(la[r].omit.indexOf(n)>=0)continue;const a=e[n];i[n]=la[r].shallow.indexOf(n)>=0?a:pa(a,t)}e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}function fa(e){if(ha(e))return e;if(Array.isArray(e))return e.map(fa);if("object"!=typeof e)throw new Error("can't deserialize object of type "+typeof e);const t=da(e)||"Object";if(!la[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=la[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(e);const n=Object.create(r.prototype);for(const i of Object.keys(e)){if("$name"===i)continue;const r=e[i];n[i]=la[t].shallow.indexOf(i)>=0?r:fa(r)}return n}class ma{constructor(){this.first=!0}update(e,t){const r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))}}const ga={"Latin-1 Supplement":e=>e>=128&&e<=255,"Hangul Jamo":e=>e>=4352&&e<=4607,Khmer:e=>e>=6016&&e<=6143,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Kanbun:e=>e>=12688&&e<=12703,"CJK Strokes":e=>e>=12736&&e<=12783,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Hangul Syllables":e=>e>=44032&&e<=55215,"Private Use Area":e=>e>=57344&&e<=63743,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function va(e){for(const t of e)if(ka(t.charCodeAt(0)))return!0;return!1}function xa(e){for(const t of e)if(!wa(t.charCodeAt(0)))return!1;return!0}function ya(e){const t=e.map((e=>{try{return new RegExp(`\\p{sc=${e}}`,"u").source}catch(e){return null}})).filter((e=>e));return new RegExp(t.join("|"),"u")}const ba=ya(["Arab","Dupl","Mong","Ougr","Syrc"]);function wa(e){return!ba.test(String.fromCodePoint(e))}const _a=ya(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ka(e){return!(746!==e&&747!==e&&(e<4352||!(ga["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||ga["CJK Compatibility"](e)||ga["CJK Strokes"](e)||!(!ga["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||ga["Enclosed CJK Letters and Months"](e)||ga["Ideographic Description Characters"](e)||ga.Kanbun(e)||ga.Katakana(e)&&12540!==e||!(!ga["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!ga["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||ga["Vertical Forms"](e)||ga["Yijing Hexagram Symbols"](e)||/\p{sc=Cans}/u.test(String.fromCodePoint(e))||/\p{sc=Hang}/u.test(String.fromCodePoint(e))||_a.test(String.fromCodePoint(e)))))}function Sa(e){return!(ka(e)||function(e){return!!(ga["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||ga["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||ga["Letterlike Symbols"](e)||ga["Number Forms"](e)||ga["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||ga["Control Pictures"](e)&&9251!==e||ga["Optical Character Recognition"](e)||ga["Enclosed Alphanumerics"](e)||ga["Geometric Shapes"](e)||ga["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||ga["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ga["CJK Symbols and Punctuation"](e)||ga.Katakana(e)||ga["Private Use Area"](e)||ga["CJK Compatibility Forms"](e)||ga["Small Form Variants"](e)||ga["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}const ja=ya(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ea(e){return ja.test(String.fromCodePoint(e))}function Ca(e,t){return!(!t&&Ea(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||ga.Khmer(e))}function Na(e){for(const t of e)if(Ea(t.charCodeAt(0)))return!0;return!1}const Ta=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(e){this.pluginStatus=e.pluginStatus,this.pluginURL=e.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(e){if(Ta.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=e.applyArabicShaping,this.processBidirectionalText=e.processBidirectionalText,this.processStyledBidirectionalText=e.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getRTLTextPluginStatus(){return this.pluginStatus}syncState(e,r){return t(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if("loading"!==e.pluginStatus)return this.setState(e),e;const t=e.pluginURL,n=new Promise((e=>{this.loadScriptResolve=e}));r(t);const i=new Promise((e=>setTimeout((()=>e()),this.TIMEOUT)));if(yield Promise.race([n,i]),this.isParsed()){const e={pluginStatus:"loaded",pluginURL:t};return this.setState(e),e}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${t}`)}))}};class Pa{constructor(e,t){this.zoom=e,t?(this.now=t.now||0,this.fadeDuration=t.fadeDuration||0,this.zoomHistory=t.zoomHistory||new ma,this.transition=t.transition||{},this.globalState=t.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ma,this.transition={},this.globalState={})}isSupportedScript(e){return function(e,t){for(const r of e)if(!Ca(r.charCodeAt(0),t))return!1;return!0}(e,"loaded"===Ta.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}}}class Aa{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Zn(e))return new ci(e,t);if(ii(e)){const r=li(e,t);if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return r.value}{let r=e;return"color"===t.type&&"string"==typeof e?r=Tt.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"numberArray"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"colorArray"!==t.type||"string"!=typeof e&&!Array.isArray(e)?"variableAnchorOffsetCollection"===t.type&&Array.isArray(e)?r=$t.parse(e):"projectionDefinition"===t.type&&"string"==typeof e&&(r=zt.parse(e)):r=Rt.parse(e):r=Dt.parse(e):r=Ot.parse(e),{globalStateRefs:new Set,kind:"constant",evaluate:()=>r}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}class Ma{constructor(e){this.property=e,this.value=new Aa(e,void 0)}transitioned(e,t){return new Oa(this.property,this.value,t,z({},e.transition,this.transition),e.now)}untransitioned(){return new Oa(this.property,this.value,null,{},0)}}class Ia{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return G(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Ma(this._values[e].property)),this._values[e].value=new Aa(this._values[e].property,null===t?void 0:G(t))}getTransition(e){return G(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Ma(this._values[e].property)),this._values[e].transition=G(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r);const n=this.getTransition(t);void 0!==n&&(e[`${t}-transition`]=n)}return e}transitioned(e,t){const r=new Da(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(e,t._values[n]);return r}untransitioned(){const e=new Da(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Oa{constructor(e,t,r,n,i){this.property=e,this.value=t,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,e.specification.transition&&(n.delay||n.duration)&&(this.prior=r)}possiblyEvaluate(e,t,r){const n=e.now||0,i=this.value.possiblyEvaluate(e,t,r),a=this.prior;if(a){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return a.possiblyEvaluate(e,t,r);{const s=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,r),i,R(s))}}return i}}class Da{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,r){const n=new Fa(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(e,t,r);return n}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ra{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return void 0!==this._values[e].value}getValue(e){return G(this._values[e].value)}setValue(e,t){this._values[e]=new Aa(this._values[e].property,null===t?void 0:G(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r)}return e}possiblyEvaluate(e,t,r){const n=new Fa(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(e,t,r);return n}}class La{constructor(e,t,r){this.property=e,this.value=t,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,r,n){return this.property.evaluate(this.value,this.parameters,e,t,r,n)}}class Fa{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class $a{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,r){const n=vr[this.specification.type];return n?n(e,t,r):e}}class Ba{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,r,n){return new La(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,n)}:e.expression,t)}interpolate(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new La(this,{kind:"constant",value:void 0},e.parameters);const n=vr[this.specification.type];if(n){const i=n(e.value.value,t.value.value,r);return new La(this,{kind:"constant",value:i},e.parameters)}return e}evaluate(e,t,r,n,i,a){return"constant"===e.kind?e.value:e.evaluate(t,r,n,i,a)}}class za extends Ba{possiblyEvaluate(e,t,r,n){if(void 0===e.value)return new La(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},r,n),a="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,s=this._calculate(a,a,a,t);return new La(this,{kind:"constant",value:s},t)}if("camera"===e.expression.kind){const r=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new La(this,{kind:"constant",value:r},t)}return new La(this,e.expression,t)}evaluate(e,t,r,n,i,a){if("source"===e.kind){const s=e.evaluate(t,r,n,i,a);return this._calculate(s,s,s,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},r,n),e.evaluate({zoom:Math.floor(t.zoom)},r,n),e.evaluate({zoom:Math.floor(t.zoom)+1},r,n),t):e.value}_calculate(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class Ua{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){if(void 0!==e.value){if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},r,n);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new Pa(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Pa(Math.floor(t.zoom),t)),e.expression.evaluate(new Pa(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class Va{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){return!!e.expression.evaluate(t,null,{},r,n)}interpolate(){return!1}}class Ha{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const r=e[t];r.specification.overridable&&this.overridableProperties.push(t);const n=this.defaultPropertyValues[t]=new Aa(r,void 0),i=this.defaultTransitionablePropertyValues[t]=new Ma(r);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=n.possiblyEvaluate({})}}}ca("DataDrivenProperty",Ba),ca("DataConstantProperty",$a),ca("CrossFadedDataDrivenProperty",za),ca("CrossFadedProperty",Ua),ca("ColorRampProperty",Va);const Ga="-transition";class Wa extends be{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=fi(e.filter)),t.layout&&(this._unevaluatedLayout=new Ra(t.layout)),t.paint)){this._transitionablePaint=new Ia(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fa(t.paint)}}setFilter(e){this.filter=e,this._featureFilter=fi(e)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){const e=new Set;if(this._unevaluatedLayout)for(const t in this._unevaluatedLayout._values){const r=this._unevaluatedLayout._values[t];for(const t of r.getGlobalStateRefs())e.add(t)}for(const t of this._featureFilter.getGlobalStateRefs())e.add(t);return e}setLayoutProperty(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(aa,`layers.${this.id}.layout.${e}`,e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(Ga)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(ia,`layers.${this.id}.paint.${e}`,e,t,r))return!1;if(e.endsWith(Ga))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const r=this._transitionablePaint._values[e],n="cross-faded-data-driven"===r.property.specification["property-type"],i=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const s=this._transitionablePaint._values[e].value;return s.isDataDriven()||i||n||this._handleOverridablePaintPropertyUpdate(e,a,s)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),H(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&sa(this,e.call(ta,{key:t,layerType:this.type,objectKey:r,value:n,styleSpec:we,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof La&&Gn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const qa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ka{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Za{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ya(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=0,n=0;return{members:e.map((e=>{const i=qa[e.type].BYTES_PER_ELEMENT,a=r=Xa(r,Math.max(t,i)),s=e.components||1;return n=Math.max(n,i),r+=i*s,{name:e.name,type:e.type,components:s,offset:a}})),size:Xa(r,Math.max(n,t)),alignment:t}}function Xa(e,t){return Math.ceil(e/t)*t}class Qa extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.int16[n+0]=t,this.int16[n+1]=r,e}}Qa.prototype.bytesPerElement=4,ca("StructArrayLayout2i4",Qa);class Ja extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=n,e}}Ja.prototype.bytesPerElement=6,ca("StructArrayLayout3i6",Ja);class es extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const a=4*e;return this.int16[a+0]=t,this.int16[a+1]=r,this.int16[a+2]=n,this.int16[a+3]=i,e}}es.prototype.bytesPerElement=8,ca("StructArrayLayout4i8",es);class ts extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,a)}emplace(e,t,r,n,i,a,s){const o=6*e;return this.int16[o+0]=t,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,this.int16[o+4]=a,this.int16[o+5]=s,e}}ts.prototype.bytesPerElement=12,ca("StructArrayLayout2i4i12",ts);class rs extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,a)}emplace(e,t,r,n,i,a,s){const o=4*e,l=8*e;return this.int16[o+0]=t,this.int16[o+1]=r,this.uint8[l+4]=n,this.uint8[l+5]=i,this.uint8[l+6]=a,this.uint8[l+7]=s,e}}rs.prototype.bytesPerElement=8,ca("StructArrayLayout2i4ub8",rs);class ns extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.float32[n+0]=t,this.float32[n+1]=r,e}}ns.prototype.bytesPerElement=8,ca("StructArrayLayout2f8",ns);class is extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,s,o,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,r,n,i,a,s,o,l,c)}emplace(e,t,r,n,i,a,s,o,l,c,u){const d=10*e;return this.uint16[d+0]=t,this.uint16[d+1]=r,this.uint16[d+2]=n,this.uint16[d+3]=i,this.uint16[d+4]=a,this.uint16[d+5]=s,this.uint16[d+6]=o,this.uint16[d+7]=l,this.uint16[d+8]=c,this.uint16[d+9]=u,e}}is.prototype.bytesPerElement=20,ca("StructArrayLayout10ui20",is);class as extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,s,o,l,c,u,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,r,n,i,a,s,o,l,c,u,d)}emplace(e,t,r,n,i,a,s,o,l,c,u,d,h){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=i,this.uint16[p+4]=a,this.uint16[p+5]=s,this.uint16[p+6]=o,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=d,this.int16[p+11]=h,e}}as.prototype.bytesPerElement=24,ca("StructArrayLayout4i4ui4i24",as);class ss extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,e}}ss.prototype.bytesPerElement=12,ca("StructArrayLayout3f12",ss);class os extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}os.prototype.bytesPerElement=4,ca("StructArrayLayout1ul4",os);class ls extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,s,o,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,r,n,i,a,s,o,l)}emplace(e,t,r,n,i,a,s,o,l,c){const u=10*e,d=5*e;return this.int16[u+0]=t,this.int16[u+1]=r,this.int16[u+2]=n,this.int16[u+3]=i,this.int16[u+4]=a,this.int16[u+5]=s,this.uint32[d+3]=o,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}ls.prototype.bytesPerElement=20,ca("StructArrayLayout6i1ul2ui20",ls);class cs extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,a)}emplace(e,t,r,n,i,a,s){const o=6*e;return this.int16[o+0]=t,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,this.int16[o+4]=a,this.int16[o+5]=s,e}}cs.prototype.bytesPerElement=12,ca("StructArrayLayout2i2i2i12",cs);class us extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i)}emplace(e,t,r,n,i,a){const s=4*e,o=8*e;return this.float32[s+0]=t,this.float32[s+1]=r,this.float32[s+2]=n,this.int16[o+6]=i,this.int16[o+7]=a,e}}us.prototype.bytesPerElement=16,ca("StructArrayLayout2f1f2i16",us);class ds extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,r,n,i,a)}emplace(e,t,r,n,i,a,s){const o=16*e,l=4*e,c=8*e;return this.uint8[o+0]=t,this.uint8[o+1]=r,this.float32[l+1]=n,this.float32[l+2]=i,this.int16[c+6]=a,this.int16[c+7]=s,e}}ds.prototype.bytesPerElement=16,ca("StructArrayLayout2ub2f2i16",ds);class hs extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,this.uint16[i+2]=n,e}}hs.prototype.bytesPerElement=6,ca("StructArrayLayout3ui6",hs);class ps extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g){const v=this.length;return this.resize(v+1),this.emplace(v,e,t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g)}emplace(e,t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v){const x=24*e,y=12*e,b=48*e;return this.int16[x+0]=t,this.int16[x+1]=r,this.uint16[x+2]=n,this.uint16[x+3]=i,this.uint32[y+2]=a,this.uint32[y+3]=s,this.uint32[y+4]=o,this.uint16[x+10]=l,this.uint16[x+11]=c,this.uint16[x+12]=u,this.float32[y+7]=d,this.float32[y+8]=h,this.uint8[b+36]=p,this.uint8[b+37]=f,this.uint8[b+38]=m,this.uint32[y+10]=g,this.int16[x+22]=v,e}}ps.prototype.bytesPerElement=48,ca("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ps);class fs extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_,k,S,j,E,C){const N=this.length;return this.resize(N+1),this.emplace(N,e,t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_,k,S,j,E,C)}emplace(e,t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_,k,S,j,E,C,N){const T=32*e,P=16*e;return this.int16[T+0]=t,this.int16[T+1]=r,this.int16[T+2]=n,this.int16[T+3]=i,this.int16[T+4]=a,this.int16[T+5]=s,this.int16[T+6]=o,this.int16[T+7]=l,this.uint16[T+8]=c,this.uint16[T+9]=u,this.uint16[T+10]=d,this.uint16[T+11]=h,this.uint16[T+12]=p,this.uint16[T+13]=f,this.uint16[T+14]=m,this.uint16[T+15]=g,this.uint16[T+16]=v,this.uint16[T+17]=x,this.uint16[T+18]=y,this.uint16[T+19]=b,this.uint16[T+20]=w,this.uint16[T+21]=_,this.uint16[T+22]=k,this.uint32[P+12]=S,this.float32[P+13]=j,this.float32[P+14]=E,this.uint16[T+30]=C,this.uint16[T+31]=N,e}}fs.prototype.bytesPerElement=64,ca("StructArrayLayout8i15ui1ul2f2ui64",fs);class ms extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}ms.prototype.bytesPerElement=4,ca("StructArrayLayout1f4",ms);class gs extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.uint16[6*e+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,e}}gs.prototype.bytesPerElement=12,ca("StructArrayLayout1ui2f12",gs);class vs extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=4*e;return this.uint32[2*e+0]=t,this.uint16[i+2]=r,this.uint16[i+3]=n,e}}vs.prototype.bytesPerElement=8,ca("StructArrayLayout1ul2ui8",vs);class xs extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,e}}xs.prototype.bytesPerElement=4,ca("StructArrayLayout2ui4",xs);class ys extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}ys.prototype.bytesPerElement=2,ca("StructArrayLayout1ui2",ys);class bs extends Za{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const a=4*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,this.float32[a+3]=i,e}}bs.prototype.bytesPerElement=16,ca("StructArrayLayout4f16",bs);class ws extends Ka{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new l(this.anchorPointX,this.anchorPointY)}}ws.prototype.size=20;class _s extends ls{get(e){return new ws(this,e)}}ca("CollisionBoxArray",_s);class ks extends Ka{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ks.prototype.size=48;class Ss extends ps{get(e){return new ks(this,e)}}ca("PlacedSymbolArray",Ss);class js extends Ka{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}js.prototype.size=64;class Es extends fs{get(e){return new js(this,e)}}ca("SymbolInstanceArray",Es);class Cs extends ms{getoffsetX(e){return this.float32[1*e+0]}}ca("GlyphOffsetArray",Cs);class Ns extends Ja{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}ca("SymbolLineVertexArray",Ns);class Ts extends Ka{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ts.prototype.size=12;class Ps extends gs{get(e){return new Ts(this,e)}}ca("TextAnchorOffsetArray",Ps);class As extends Ka{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}As.prototype.size=8;class Ms extends vs{get(e){return new As(this,e)}}ca("FeatureIndexArray",Ms);class Is extends Qa{}class Os extends Qa{}class Ds extends Qa{}class Rs extends ts{}class Ls extends rs{}class Fs extends ns{}class $s extends is{}class Bs extends as{}class zs extends ss{}class Us extends os{}class Vs extends cs{}class Hs extends ds{}class Gs extends hs{}class Ws extends xs{}const qs=Ya([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ks}=qs;class Zs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,t,r,n){const i=this.segments[this.segments.length-1];return e>Zs.MAX_VERTEX_ARRAY_LENGTH&&q(`Max vertices per segment is ${Zs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Zs.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!i||i.vertexLength+e>Zs.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n?this.createNewSegment(t,r,n):i}createNewSegment(e,t,r){const n={vertexOffset:e.length,primitiveOffset:t.length,vertexLength:0,primitiveLength:0,vaos:{}};return void 0!==r&&(n.sortKey=r),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(n),n}getOrCreateLatestSegment(e,t,r){return this.prepareSegment(0,e,t,r)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,r,n){return new Zs([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}function Ys(e,t){return 256*(e=$(Math.floor(e),0,255))+$(Math.floor(t),0,255)}Zs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ca("SegmentVector",Zs);const Xs=Ya([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Qs,Js,eo,to={exports:{}},ro={exports:{}},no={exports:{}},io=function(){if(eo)return to.exports;eo=1;var e=(Qs||(Qs=1,ro.exports=function(e,t){var r,n,i,a,s,o,l,c;for(n=e.length-(r=3&e.length),i=t,s=3432918353,o=461845907,c=0;c<n;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(a=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}),ro.exports),t=(Js||(Js=1,no.exports=function(e,t){for(var r,n=e.length,i=t^n,a=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}),no.exports);return to.exports=e,to.exports.murmur3=e,to.exports.murmur2=t,to.exports}(),ao=r(io);class so{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,r,n){this.ids.push(oo(e)),this.positions.push(t,r,n)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=oo(e);let r=0,n=this.ids.length-1;for(;r<n;){const e=r+n>>1;this.ids[e]>=t?n=e:r=e+1}const i=[];for(;this.ids[r]===t;)i.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return i}static serialize(e,t){const r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return lo(r,n,0,r.length-1),t&&t.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(e){const t=new so;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function oo(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ao(String(e))}function lo(e,t,r,n){for(;r<n;){const i=e[r+n>>1];let a=r-1,s=n+1;for(;;){do{a++}while(e[a]<i);do{s--}while(e[s]>i);if(a>=s)break;co(e,a,s),co(t,3*a,3*s),co(t,3*a+1,3*s+1),co(t,3*a+2,3*s+2)}s-r<n-s?(lo(e,t,r,s),r=s+1):(lo(e,t,s+1,n),n=s)}}function co(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}ca("FeaturePositionMap",so);class uo{constructor(e,t){this.gl=e.gl,this.location=t}}class ho extends uo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class po extends uo{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class fo extends uo{constructor(e,t){super(e,t),this.current=Tt.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const mo=new Float32Array(16);function go(e){return[Ys(255*e.r,255*e.g),Ys(255*e.b,255*e.a)]}class vo{constructor(e,t,r){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=r}setUniform(e,t,r){e.set(r.constantOr(this.value))}getBinding(e,t,r){return"color"===this.type?new fo(e,t):new ho(e,t)}}class xo{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,r,n){const i="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;i&&e.set(i)}getBinding(e,t,r){return"u_pattern"===r.substr(0,9)?new po(e,t):new ho(e,t)}}class yo{constructor(e,t,r,n){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(e,t,r,n,i){const a=this.paintVertexArray.length,s=this.expression.evaluate(new Pa(0),t,{},n,[],i);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,t,r,n){const i=this.expression.evaluate({zoom:0},r,n);this._setPaintValue(e,t,i)}_setPaintValue(e,t,r){if("color"===this.type){const n=go(r);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n[0],n[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class bo{constructor(e,t,r,n,i,a){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new a}populatePaintArray(e,t,r,n,i){const a=this.expression.evaluate(new Pa(this.zoom),t,{},n,[],i),s=this.expression.evaluate(new Pa(this.zoom+1),t,{},n,[],i),o=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(o,e,a,s)}updatePaintArray(e,t,r,n){const i=this.expression.evaluate({zoom:this.zoom},r,n),a=this.expression.evaluate({zoom:this.zoom+1},r,n);this._setPaintValue(e,t,i,a)}_setPaintValue(e,t,r,n){if("color"===this.type){const i=go(r),a=go(n);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,i[0],i[1],a[0],a[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const r=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,n=$(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);e.set(n)}getBinding(e,t,r){return new ho(e,t)}}class wo{constructor(e,t,r,n,i,a){this.expression=e,this.type=t,this.useIntegerZoom=r,this.zoom=n,this.layerId=a,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}populatePaintArray(e,t,r){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],r)}updatePaintArray(e,t,r,n,i){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],i)}_setPaintValues(e,t,r,n){if(!n||!r)return;const{min:i,mid:a,max:s}=r,o=n[i],l=n[a],c=n[s];if(o&&l&&c)for(let u=e;u<t;u++)this.zoomInPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],l.pixelRatio,o.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Xs.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Xs.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _o{constructor(e,t,r){this.binders={},this._buffers=[];const n=[];for(const i in e.paint._values){if(!r(i))continue;const a=e.paint.get(i);if(!(a instanceof La&&Gn(a.property.specification)))continue;const s=So(i,e.type),o=a.value,l=a.property.specification.type,c=a.property.useIntegerZoom,u=a.property.specification["property-type"],d="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===o.kind)this.binders[i]=d?new xo(o.value,s):new vo(o.value,s,l),n.push(`/u_${i}`);else if("source"===o.kind||d){const r=jo(i,l,"source");this.binders[i]=d?new wo(o,l,c,t,r,e.id):new yo(o,s,l,r),n.push(`/a_${i}`)}else{const e=jo(i,l,"composite");this.binders[i]=new bo(o,s,l,c,t,e),n.push(`/z_${i}`)}}this.cacheKey=n.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof yo||t instanceof bo?t.maxValue:0}populatePaintArrays(e,t,r,n,i){for(const a in this.binders){const s=this.binders[a];(s instanceof yo||s instanceof bo||s instanceof wo)&&s.populatePaintArray(e,t,r,n,i)}}setConstantPatternPositions(e,t){for(const r in this.binders){const n=this.binders[r];n instanceof xo&&n.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,r,n,i){let a=!1;for(const s in e){const o=t.getPositions(s);for(const t of o){const o=r.feature(t.index);for(const r in this.binders){const l=this.binders[r];if((l instanceof yo||l instanceof bo||l instanceof wo)&&!0===l.expression.isStateDependent){const c=n.paint.get(r);l.expression=c.value,l.updatePaintArray(t.start,t.end,o,e[s],i),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const r=this.binders[t];(r instanceof vo||r instanceof xo)&&e.push(...r.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof yo||r instanceof bo)for(let t=0;t<r.paintVertexAttributes.length;t++)e.push(r.paintVertexAttributes[t].name);else if(r instanceof wo)for(let t=0;t<Xs.members.length;t++)e.push(Xs.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof vo||r instanceof xo||r instanceof bo)for(const t of r.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const r=[];for(const n in this.binders){const i=this.binders[n];if(i instanceof vo||i instanceof xo||i instanceof bo)for(const a of i.uniformNames)if(t[a]){const s=i.getBinding(e,t[a],a);r.push({name:a,property:n,binding:s})}}return r}setUniforms(e,t,r,n){for(const{name:i,property:a,binding:s}of t)this.binders[a].setUniform(s,n,r.get(a),i)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const r=this.binders[t];if(e&&r instanceof wo){const t=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(r instanceof yo||r instanceof bo)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const t in this.binders){const r=this.binders[t];(r instanceof yo||r instanceof bo||r instanceof wo)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof yo||t instanceof bo||t instanceof wo)&&t.destroy()}}}class ko{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const n of e)this.programConfigurations[n.id]=new _o(n,t,r);this.needsUpload=!1,this._featureMap=new so,this._bufferOffset=0}populatePaintArrays(e,t,r,n,i,a){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,n,i,a);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,r,n){for(const i of r)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(e,this._featureMap,t,i,n)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function So(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function jo(e,t,r){const n={color:{source:ns,composite:bs},number:{source:ms,composite:ns}},i=function(e){return{"line-pattern":{source:$s,composite:$s},"fill-pattern":{source:$s,composite:$s},"fill-extrusion-pattern":{source:$s,composite:$s}}[e]}(e);return i&&i[r]||n[t][r]}ca("ConstantBinder",vo),ca("CrossFadedConstantBinder",xo),ca("SourceExpressionBinder",yo),ca("CrossFadedCompositeBinder",wo),ca("CompositeExpressionBinder",bo),ca("ProgramConfiguration",_o,{omit:["_buffers"]}),ca("ProgramConfigurationSet",ko);const Eo=Math.pow(2,14)-1,Co=-Eo-1;function No(e){const t=M/e.extent,r=e.loadGeometry();for(let n=0;n<r.length;n++){const e=r[n];for(let r=0;r<e.length;r++){const n=e[r],i=Math.round(n.x*t),a=Math.round(n.y*t);n.x=$(i,Co,Eo),n.y=$(a,Co,Eo),(i<n.x||i>n.x+1||a<n.y||a>n.y+1)&&q("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function To(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?No(e):[]}}const Po=-32768;function Ao(e,t,r,n,i){e.emplaceBack(Po+8*t+n,Po+8*r+i)}class Mo{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Os,this.indexArray=new Gs,this.segments=new Zs,this.programConfigurations=new ko(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){const n=this.layers[0],i=[];let a=null,s=!1,o="heatmap"===n.type;if("circle"===n.type){const e=n;a=e.layout.get("circle-sort-key"),s=!a.isConstant(),o=o||"map"===e.paint.get("circle-pitch-alignment")}const l=o?t.subdivisionGranularity.circle:1;for(const{feature:c,id:u,index:d,sourceLayerIndex:h}of e){const e=this.layers[0]._featureFilter.needGeometry,t=To(c,e);if(!this.layers[0]._featureFilter.filter(new Pa(this.zoom,{globalState:this.globalState}),t,r))continue;const n=s?a.evaluate(t,{},r):void 0,o={id:u,properties:c.properties,type:c.type,sourceLayerIndex:h,index:d,geometry:e?t.geometry:No(c),patterns:{},sortKey:n};i.push(o)}s&&i.sort(((e,t)=>e.sortKey-t.sortKey));for(const c of i){const{geometry:n,index:i,sourceLayerIndex:a}=c,s=e[i].feature;this.addFeature(c,n,i,r,l),t.featureIndex.insert(s,n,i,a,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ks),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,n){let i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;switch(a){case 1:i=[0,7];break;case 3:i=[0,2,5,7];break;case 5:i=[0,1,3,4,6,7];break;case 7:i=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${a}; valid values are 1, 3, 5, 7.`)}const s=i.length;for(const o of t)for(const t of o){const r=t.x,n=t.y;if(r<0||r>=M||n<0||n>=M)continue;const a=this.segments.prepareSegment(s*s,this.layoutVertexArray,this.indexArray,e.sortKey),o=a.vertexLength;for(let e=0;e<s;e++)for(let t=0;t<s;t++)Ao(this.layoutVertexArray,r,n,i[t],i[e]);for(let e=0;e<s-1;e++)for(let t=0;t<s-1;t++){const r=o+e*s+t,n=o+(e+1)*s+t;this.indexArray.emplaceBack(r,n+1,r+1),this.indexArray.emplaceBack(r,n,n+1)}a.vertexLength+=s*s,a.primitiveLength+=(s-1)*(s-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},n)}}function Io(e,t){for(let r=0;r<e.length;r++)if(Uo(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(Uo(e,t[r]))return!0;return!!Lo(e,t)}function Oo(e,t,r){return!!Uo(e,t)||!!$o(t,e,r)}function Do(e,t){if(1===e.length)return zo(t,e[0]);for(let r=0;r<t.length;r++){const n=t[r];for(let t=0;t<n.length;t++)if(Uo(e,n[t]))return!0}for(let r=0;r<e.length;r++)if(zo(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(Lo(e,t[r]))return!0;return!1}function Ro(e,t,r){if(e.length>1){if(Lo(e,t))return!0;for(let n=0;n<t.length;n++)if($o(t[n],e,r))return!0}for(let n=0;n<e.length;n++)if($o(e[n],t,r))return!0;return!1}function Lo(e,t){if(0===e.length||0===t.length)return!1;for(let r=0;r<e.length-1;r++){const n=e[r],i=e[r+1];for(let e=0;e<t.length-1;e++)if(Fo(n,i,t[e],t[e+1]))return!0}return!1}function Fo(e,t,r,n){return K(e,r,n)!==K(t,r,n)&&K(e,t,r)!==K(e,t,n)}function $o(e,t,r){const n=r*r;if(1===t.length)return e.distSqr(t[0])<n;for(let i=1;i<t.length;i++)if(Bo(e,t[i-1],t[i])<n)return!0;return!1}function Bo(e,t,r){const n=t.distSqr(r);if(0===n)return e.distSqr(t);const i=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;return e.distSqr(i<0?t:i>1?r:r.sub(t)._mult(i)._add(t))}function zo(e,t){let r,n,i,a=!1;for(let s=0;s<e.length;s++){r=e[s];for(let e=0,s=r.length-1;e<r.length;s=e++)n=r[e],i=r[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(a=!a)}return a}function Uo(e,t){let r=!1;for(let n=0,i=e.length-1;n<e.length;i=n++){const a=e[n],s=e[i];a.y>t.y!=s.y>t.y&&t.x<(s.x-a.x)*(t.y-a.y)/(s.y-a.y)+a.x&&(r=!r)}return r}function Vo(e,t,r){const n=r[0],i=r[2];if(e.x<n.x&&t.x<n.x||e.x>i.x&&t.x>i.x||e.y<n.y&&t.y<n.y||e.y>i.y&&t.y>i.y)return!1;const a=K(e,t,r[0]);return a!==K(e,t,r[1])||a!==K(e,t,r[2])||a!==K(e,t,r[3])}function Ho(e,t,r){const n=t.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(t.id).getMaxValue(e)}function Go(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Wo(e,t,r,n,i){if(!t[0]&&!t[1])return e;const a=l.convert(t)._mult(i);"viewport"===r&&a._rotate(-n);const s=[];for(let o=0;o<e.length;o++)s.push(e[o].sub(a));return s}let qo,Ko;ca("CircleBucket",Mo,{omit:["layers"]});var Zo={get paint(){return Ko=Ko||new Ha({"circle-radius":new Ba(we.paint_circle["circle-radius"]),"circle-color":new Ba(we.paint_circle["circle-color"]),"circle-blur":new Ba(we.paint_circle["circle-blur"]),"circle-opacity":new Ba(we.paint_circle["circle-opacity"]),"circle-translate":new $a(we.paint_circle["circle-translate"]),"circle-translate-anchor":new $a(we.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new $a(we.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new $a(we.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ba(we.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ba(we.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ba(we.paint_circle["circle-stroke-opacity"])})},get layout(){return qo=qo||new Ha({"circle-sort-key":new Ba(we.layout_circle["circle-sort-key"])})}};class Yo extends Wa{constructor(e){super(e,Zo)}createBucket(e){return new Mo(e)}queryRadius(e){const t=e;return Ho("circle-radius",this,t)+Ho("circle-stroke-width",this,t)+Go(this.paint.get("circle-translate"))}queryIntersectsFeature(e){let{queryGeometry:t,feature:r,featureState:n,geometry:i,transform:a,pixelsToTileUnits:s,unwrappedTileID:o,getElevation:l}=e;const c=Wo(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-a.bearingInRadians,s),u=this.paint.get("circle-radius").evaluate(r,n)+this.paint.get("circle-stroke-width").evaluate(r,n),d="map"===this.paint.get("circle-pitch-alignment"),h=d?c:function(e,t,r,n){return e.map((e=>Xo(e,t,r,n)))}(c,a,o,l),p=d?u*s:u;for(const f of i)for(const e of f){const t=d?e:Xo(e,a,o,l);let r=p;const n=a.projectTileCoordinates(e.x,e.y,o,l).signedDistanceFromCamera;if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?r*=n/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(r*=a.cameraToCenterDistance/n),Oo(h,t,r))return!0}return!1}}function Xo(e,t,r,n){const i=t.projectTileCoordinates(e.x,e.y,r,n).point;return new l((.5*i.x+.5)*t.width,(.5*-i.y+.5)*t.height)}class Qo extends Mo{}let Jo;ca("HeatmapBucket",Qo,{omit:["layers"]});var el={get paint(){return Jo=Jo||new Ha({"heatmap-radius":new Ba(we.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ba(we.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new $a(we.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Va(we.paint_heatmap["heatmap-color"]),"heatmap-opacity":new $a(we.paint_heatmap["heatmap-opacity"])})}};function tl(e,t,r,n){let{width:i,height:a}=t;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==i*a*r)throw new RangeError(`mismatched image size. expected: ${n.length} but got: ${i*a*r}`)}else n=new Uint8Array(i*a*r);return e.width=i,e.height=a,e.data=n,e}function rl(e,t,r){let{width:n,height:i}=t;if(n===e.width&&i===e.height)return;const a=tl({},{width:n,height:i},r);nl(e,a,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,i)},r),e.width=n,e.height=i,e.data=a.data}function nl(e,t,r,n,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const s=e.data,o=t.data;if(s===o)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){const c=((r.y+l)*e.width+r.x)*a,u=((n.y+l)*t.width+n.x)*a;for(let e=0;e<i.width*a;e++)o[u+e]=s[c+e]}return t}class il{constructor(e,t){tl(this,e,1,t)}resize(e){rl(this,e,1)}clone(){return new il({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,i){nl(e,t,r,n,i,1)}}class al{constructor(e,t){tl(this,e,4,t)}resize(e){rl(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new al({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,i){nl(e,t,r,n,i,4)}setPixel(e,t,r){const n=4*(e*this.width+t);this.data[n+0]=Math.round(255*r.r/r.a),this.data[n+1]=Math.round(255*r.g/r.a),this.data[n+2]=Math.round(255*r.b/r.a),this.data[n+3]=Math.round(255*r.a)}}function sl(e){const t={},r=e.resolution||256,n=e.clips?e.clips.length:1,i=e.image||new al({width:r,height:n});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const a=(n,a,s)=>{t[e.evaluationKey]=s;const o=e.expression.evaluate(t);i.setPixel(n/4/r,a/4,o)};if(e.clips)for(let s=0,o=0;s<n;++s,o+=4*r)for(let t=0,n=0;t<r;t++,n+=4){const i=t/(r-1),{start:l,end:c}=e.clips[s];a(o,n,l*(1-i)+c*i)}else for(let s=0,o=0;s<r;s++,o+=4)a(0,o,s/(r-1));return i}ca("AlphaImage",il),ca("RGBAImage",al);const ol="big-fb";class ll extends Wa{createBucket(e){return new Qo(e)}constructor(e){super(e,el),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=sl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ol)&&this.heatmapFbos.delete(ol)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let cl;var ul={get paint(){return cl=cl||new Ha({"hillshade-illumination-direction":new $a(we.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new $a(we.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new $a(we.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new $a(we.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new $a(we.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new $a(we.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new $a(we.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new $a(we.paint_hillshade["hillshade-method"])})}};class dl extends Wa{constructor(e){super(e,ul),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,t=this.paint.get("hillshade-illumination-altitude").values,r=this.paint.get("hillshade-highlight-color").values,n=this.paint.get("hillshade-shadow-color").values;const i=Math.max(e.length,t.length,r.length,n.length);e=e.concat(Array(i-e.length).fill(e.at(-1))),t=t.concat(Array(i-t.length).fill(t.at(-1))),r=r.concat(Array(i-r.length).fill(r.at(-1))),n=n.concat(Array(i-n.length).fill(n.at(-1)));const a=t.map(ne);return{directionRadians:e.map(ne),altitudeRadians:a,shadowColor:n,highlightColor:r}}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}let hl;var pl={get paint(){return hl=hl||new Ha({"color-relief-opacity":new $a(we["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Va(we["paint_color-relief"]["color-relief-color"])})}};class fl{constructor(e,t,r,n){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,n)}update(e,t,r){const{width:n,height:i}=e,a=!(this.size&&this.size[0]===n&&this.size[1]===i||r),{context:s}=this,{gl:o}=s;if(this.useMipmap=Boolean(t&&t.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!t||!1!==t.premultiply)),a)this.size=[n,i],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||X(e)?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,n,i,0,this.format,o.UNSIGNED_BYTE,e.data);else{const{x:t,y:a}=r||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||X(e)?o.texSubImage2D(o.TEXTURE_2D,0,t,a,o.RGBA,o.UNSIGNED_BYTE,e):o.texSubImage2D(o.TEXTURE_2D,0,t,a,n,i,o.RGBA,o.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D),s.pixelStoreUnpackFlipY.setDefault(),s.pixelStoreUnpack.setDefault(),s.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,t,r){const{context:n}=this,{gl:i}=n;i.bindTexture(i.TEXTURE_2D,this.texture),r!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=i.LINEAR),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r||e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class ml{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&!["mapbox","terrarium","custom"].includes(r))return void q(`"${r}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=t.height;const o=this.dim=t.height-2;switch(this.data=new Uint32Array(t.data.buffer),r){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=n,this.greenFactor=i,this.blueFactor=a,this.baseShift=s;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let l=0;l<o;l++)this.data[this._idx(-1,l)]=this.data[this._idx(0,l)],this.data[this._idx(o,l)]=this.data[this._idx(o-1,l)],this.data[this._idx(l,-1)]=this.data[this._idx(l,0)],this.data[this._idx(l,o)]=this.data[this._idx(l,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let l=0;l<o;l++)for(let e=0;e<o;e++){const t=this.get(l,e);t>this.max&&(this.max=t),t<this.min&&(this.min=t)}}get(e,t){const r=new Uint8Array(this.data.buffer),n=4*this._idx(e,t);return this.unpack(r[n],r[n+1],r[n+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}unpack(e,t,r){return e*this.redFactor+t*this.greenFactor+r*this.blueFactor-this.baseShift}pack(e){return gl(e,this.getUnpackVector())}getPixels(){return new al({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let n=t*this.dim,i=t*this.dim+this.dim,a=r*this.dim,s=r*this.dim+this.dim;switch(t){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:a=s-1;break;case 1:s=a+1}const o=-t*this.dim,l=-r*this.dim;for(let c=a;c<s;c++)for(let t=n;t<i;t++)this.data[this._idx(t,c)]=e.data[this._idx(t+o,c+l)]}}function gl(e,t){const r=t[0],n=t[1],i=t[2],a=t[3],s=Math.min(r,n,i),o=Math.round((e+a)/s);return{r:Math.floor(o*s/r)%256,g:Math.floor(o*s/n)%256,b:Math.floor(o*s/i)%256}}ca("DEMData",ml);class vl extends Wa{constructor(e){super(e,pl)}_createColorRamp(e){const t={elevationStops:[],colorStops:[]},r=this._transitionablePaint._values["color-relief-color"].value.expression;if(r instanceof si&&r._styleExpression.expression instanceof mr){this.colorRampExpression=r;const e=r._styleExpression.expression;t.elevationStops=e.labels,t.colorStops=[];for(const r of t.elevationStops)t.colorStops.push(e.evaluate({globals:{elevation:r}}))}if(t.elevationStops.length<1&&(t.elevationStops=[0],t.colorStops=[Tt.transparent]),t.elevationStops.length<2&&(t.elevationStops.push(t.elevationStops[0]+1),t.colorStops.push(t.colorStops[0])),t.elevationStops.length<=e)return t;const n={elevationStops:[],colorStops:[]},i=(t.elevationStops.length-1)/(e-1);for(let a=0;a<t.elevationStops.length-.5;a+=i)n.elevationStops.push(t.elevationStops[Math.round(a)]),n.colorStops.push(t.colorStops[Math.round(a)]);return q(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),n}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,t,r){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const n=this._createColorRamp(t),i=new al({width:n.colorStops.length,height:1}),a=new al({width:n.colorStops.length,height:1});for(let s=0;s<n.elevationStops.length;s++){const e=gl(n.elevationStops[s],r);a.setPixel(0,s,new Tt(e.r/255,e.g/255,e.b/255,1)),i.setPixel(0,s,n.colorStops[s])}return this.colorRampTextures={elevationTexture:new fl(e,a,e.gl.RGBA),colorTexture:new fl(e,i,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return"none"!==this.visibility&&!!this.colorRampTextures}}const xl=Ya([{name:"a_pos",components:2,type:"Int16"}],4),{members:yl}=xl;function bl(e,t,r){const n=r.patternDependencies;let i=!1;for(const a of t){const t=a.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const r=t.constantOr(null);r&&(i=!0,n[r.to]=!0,n[r.from]=!0)}return i}function wl(e,t,r,n,i){const a=i.patternDependencies;for(const s of t){const t=s.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:n-1},r,{},i.availableImages),o=t.evaluate({zoom:n},r,{},i.availableImages),l=t.evaluate({zoom:n+1},r,{},i.availableImages);e=e&&e.name?e.name:e,o=o&&o.name?o.name:o,l=l&&l.name?l.name:l,a[e]=!0,a[o]=!0,a[l]=!0,r.patterns[s.id]={min:e,mid:o,max:l}}}return r}function _l(e,t,r,n,i){let a;if(i===function(e,t,r,n){let i=0;for(let a=t,s=r-n;a<r;a+=n)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}(e,t,r,n)>0)for(let s=t;s<r;s+=n)a=Hl(s/n|0,e[s],e[s+1],a);else for(let s=r-n;s>=t;s-=n)a=Hl(s/n|0,e[s],e[s+1],a);return a&&Fl(a,a.next)&&(Gl(a),a=a.next),a}function kl(e,t){if(!e)return e;t||(t=e);let r,n=e;do{if(r=!1,n.steiner||!Fl(n,n.next)&&0!==Ll(n.prev,n,n.next))n=n.next;else{if(Gl(n),n=t=n.prev,n===n.next)break;r=!0}}while(r||n!==t);return t}function Sl(e,t,r,n,i,a,s){if(!e)return;!s&&a&&function(e,t,r,n){let i=e;do{0===i.z&&(i.z=Ml(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,r=1;do{let n,i=e;e=null;let a=null;for(t=0;i;){t++;let s=i,o=0;for(let e=0;e<r&&(o++,s=s.nextZ,s);e++);let l=r;for(;o>0||l>0&&s;)0!==o&&(0===l||!s||i.z<=s.z)?(n=i,i=i.nextZ,o--):(n=s,s=s.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;i=s}a.nextZ=null,r*=2}while(t>1)}(i)}(e,n,i,a);let o=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(a?El(e,n,i,a):jl(e))t.push(l.i,e.i,c.i),Gl(e),e=c.next,o=c.next;else if((e=c)===o){s?1===s?Sl(e=Cl(kl(e),t),t,r,n,i,a,2):2===s&&Nl(e,t,r,n,i,a):Sl(kl(e),t,r,n,i,a,1);break}}}function jl(e){const t=e.prev,r=e,n=e.next;if(Ll(t,r,n)>=0)return!1;const i=t.x,a=r.x,s=n.x,o=t.y,l=r.y,c=n.y,u=Math.min(i,a,s),d=Math.min(o,l,c),h=Math.max(i,a,s),p=Math.max(o,l,c);let f=n.next;for(;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&Dl(i,o,a,l,s,c,f.x,f.y)&&Ll(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function El(e,t,r,n){const i=e.prev,a=e,s=e.next;if(Ll(i,a,s)>=0)return!1;const o=i.x,l=a.x,c=s.x,u=i.y,d=a.y,h=s.y,p=Math.min(o,l,c),f=Math.min(u,d,h),m=Math.max(o,l,c),g=Math.max(u,d,h),v=Ml(p,f,t,r,n),x=Ml(m,g,t,r,n);let y=e.prevZ,b=e.nextZ;for(;y&&y.z>=v&&b&&b.z<=x;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==i&&y!==s&&Dl(o,u,l,d,c,h,y.x,y.y)&&Ll(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==s&&Dl(o,u,l,d,c,h,b.x,b.y)&&Ll(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;y&&y.z>=v;){if(y.x>=p&&y.x<=m&&y.y>=f&&y.y<=g&&y!==i&&y!==s&&Dl(o,u,l,d,c,h,y.x,y.y)&&Ll(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=x;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==s&&Dl(o,u,l,d,c,h,b.x,b.y)&&Ll(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Cl(e,t){let r=e;do{const n=r.prev,i=r.next.next;!Fl(n,i)&&$l(n,r,r.next,i)&&Ul(n,i)&&Ul(i,n)&&(t.push(n.i,r.i,i.i),Gl(r),Gl(r.next),r=e=i),r=r.next}while(r!==e);return kl(r)}function Nl(e,t,r,n,i,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&Rl(s,e)){let o=Vl(s,e);return s=kl(s,s.next),o=kl(o,o.next),Sl(s,t,r,n,i,a,0),void Sl(o,t,r,n,i,a,0)}e=e.next}s=s.next}while(s!==e)}function Tl(e,t){let r=e.x-t.x;return 0===r&&(r=e.y-t.y,0===r)&&(r=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)),r}function Pl(e,t){const r=function(e,t){let r=t;const n=e.x,i=e.y;let a,s=-1/0;if(Fl(e,r))return r;do{if(Fl(e,r.next))return r.next;if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){const e=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=n&&e>s&&(s=e,a=r.x<r.next.x?r:r.next,e===n))return a}r=r.next}while(r!==t);if(!a)return null;const o=a,l=a.x,c=a.y;let u=1/0;r=a;do{if(n>=r.x&&r.x>=l&&n!==r.x&&Ol(i<c?n:s,i,l,c,i<c?s:n,i,r.x,r.y)){const t=Math.abs(i-r.y)/(n-r.x);Ul(r,e)&&(t<u||t===u&&(r.x>a.x||r.x===a.x&&Al(a,r)))&&(a=r,u=t)}r=r.next}while(r!==o);return a}(e,t);if(!r)return t;const n=Vl(r,e);return kl(n,n.next),kl(r,r.next)}function Al(e,t){return Ll(e.prev,e,t.prev)<0&&Ll(t.next,e,e.next)<0}function Ml(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Il(e){let t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function Ol(e,t,r,n,i,a,s,o){return(i-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(n-o)>=(r-s)*(t-o)&&(r-s)*(a-o)>=(i-s)*(n-o)}function Dl(e,t,r,n,i,a,s,o){return!(e===s&&t===o)&&Ol(e,t,r,n,i,a,s,o)}function Rl(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&$l(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(Ul(e,t)&&Ul(t,e)&&function(e,t){let r=e,n=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(Ll(e.prev,e,t.prev)||Ll(e,t.prev,t))||Fl(e,t)&&Ll(e.prev,e,e.next)>0&&Ll(t.prev,t,t.next)>0)}function Ll(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Fl(e,t){return e.x===t.x&&e.y===t.y}function $l(e,t,r,n){const i=zl(Ll(e,t,r)),a=zl(Ll(e,t,n)),s=zl(Ll(r,n,e)),o=zl(Ll(r,n,t));return i!==a&&s!==o||!(0!==i||!Bl(e,r,t))||!(0!==a||!Bl(e,n,t))||!(0!==s||!Bl(r,e,n))||!(0!==o||!Bl(r,t,n))}function Bl(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function zl(e){return e>0?1:e<0?-1:0}function Ul(e,t){return Ll(e.prev,e,e.next)<0?Ll(e,t,e.next)>=0&&Ll(e,e.prev,t)>=0:Ll(e,t,e.prev)<0||Ll(e,e.next,t)<0}function Vl(e,t){const r=Wl(e.i,e.x,e.y),n=Wl(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function Hl(e,t,r,n){const i=Wl(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Gl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Wl(e,t,r){return{i:e,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class ql{constructor(e,t){if(t>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=t}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class Kl{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}Kl.noSubdivision=new Kl({fill:new ql(0,0),line:new ql(0,0),tile:new ql(0,0),stencil:new ql(0,0),circle:1}),ca("SubdivisionGranularityExpression",ql),ca("SubdivisionGranularitySetting",Kl);const Zl=-32768,Yl=32767;class Xl{constructor(e,t){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=M/e,this._canonical=t}_getKey(e,t){return(e+=32768)<<16|t+32768}_vertexToIndex(e,t){if(e<-32768||t<-32768||e>32767||t>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const r=0|Math.round(e),n=0|Math.round(t),i=this._getKey(r,n);if(this._vertexDictionary.has(i))return this._vertexDictionary.get(i);const a=this._vertexBuffer.length/2;return this._vertexDictionary.set(i,a),this._vertexBuffer.push(r,n),a}_subdivideTrianglesScanline(e){if(this._granularity<2)return function(e,t){const r=[];for(let n=0;n<t.length;n+=3){const i=t[n],a=t[n+1],s=t[n+2],o=e[2*i],l=e[2*i+1];(e[2*a]-o)*(e[2*s+1]-l)-(e[2*a+1]-l)*(e[2*s]-o)>0?(r.push(i),r.push(s),r.push(a)):(r.push(i),r.push(a),r.push(s))}return r}(this._vertexBuffer,e);const t=[],r=e.length;for(let n=0;n<r;n+=3){const r=[e[n+0],e[n+1],e[n+2]],i=[this._vertexBuffer[2*e[n+0]+0],this._vertexBuffer[2*e[n+0]+1],this._vertexBuffer[2*e[n+1]+0],this._vertexBuffer[2*e[n+1]+1],this._vertexBuffer[2*e[n+2]+0],this._vertexBuffer[2*e[n+2]+1]];let a=1/0,s=1/0,o=-1/0,l=-1/0;for(let e=0;e<3;e++){const t=i[2*e],r=i[2*e+1];a=Math.min(a,t),o=Math.max(o,t),s=Math.min(s,r),l=Math.max(l,r)}if(a===o||s===l)continue;const c=Math.floor(a/this._granularityCellSize),u=Math.ceil(o/this._granularityCellSize),d=Math.floor(s/this._granularityCellSize),h=Math.ceil(l/this._granularityCellSize);if(c!==u||d!==h)for(let e=d;e<h;e++){const n=this._scanlineGenerateVertexRingForCellRow(e,i,r);ec(this._vertexBuffer,n,t)}else t.push(...r)}return t}_scanlineGenerateVertexRingForCellRow(e,t,r){const n=e*this._granularityCellSize,i=n+this._granularityCellSize,a=[];for(let s=0;s<3;s++){const e=t[2*s],o=t[2*s+1],l=t[2*(s+1)%6],c=t[(2*(s+1)+1)%6],u=t[2*(s+2)%6],d=t[(2*(s+2)+1)%6],h=l-e,p=c-o,f=0===h,m=0===p,g=(n-o)/p,v=(i-o)/p,x=Math.min(g,v),y=Math.max(g,v);if(!m&&(x>=1||y<=0)||m&&(o<n||o>i)){c>=n&&c<=i&&a.push(r[(s+1)%3]);continue}!m&&x>0&&a.push(this._vertexToIndex(e+h*x,o+p*x));const b=e+h*Math.max(x,0),w=e+h*Math.min(y,1);f||this._generateIntraEdgeVertices(a,e,o,l,c,b,w),!m&&y<1&&a.push(this._vertexToIndex(e+h*y,o+p*y)),(m||c>=n&&c<=i)&&a.push(r[(s+1)%3]),!m&&(c<=n||c>=i)&&this._generateInterEdgeVertices(a,e,o,l,c,u,d,w,n,i)}return a}_generateIntraEdgeVertices(e,t,r,n,i,a,s){const o=n-t,l=i-r,c=0===l,u=c?Math.min(t,n):Math.min(a,s),d=c?Math.max(t,n):Math.max(a,s),h=Math.floor(u/this._granularityCellSize)+1,p=Math.ceil(d/this._granularityCellSize)-1;if(c?t<n:a<s)for(let f=h;f<=p;f++){const n=f*this._granularityCellSize;e.push(this._vertexToIndex(n,r+l*(n-t)/o))}else for(let f=p;f>=h;f--){const n=f*this._granularityCellSize;e.push(this._vertexToIndex(n,r+l*(n-t)/o))}}_generateInterEdgeVertices(e,t,r,n,i,a,s,o,l,c){const u=i-r,d=a-n,h=s-i,p=(l-i)/h,f=(c-i)/h,m=Math.min(p,f),g=Math.max(p,f),v=n+d*m;let x=Math.floor(Math.min(v,o)/this._granularityCellSize)+1,y=Math.ceil(Math.max(v,o)/this._granularityCellSize)-1,b=o<v;const w=0===h;if(w&&(s===l||s===c))return;if(w||m>=1||g<=0){const e=r-s,n=a+(t-a)*Math.min((l-s)/e,(c-s)/e);x=Math.floor(Math.min(n,o)/this._granularityCellSize)+1,y=Math.ceil(Math.max(n,o)/this._granularityCellSize)-1,b=o<n}const _=u>0?c:l;if(b)for(let k=x;k<=y;k++)e.push(this._vertexToIndex(k*this._granularityCellSize,_));else for(let k=y;k>=x;k--)e.push(this._vertexToIndex(k*this._granularityCellSize,_))}_generateOutline(e){const t=[];for(const r of e){const e=Jl(r,this._granularity,!0),n=this._pointArrayToIndices(e),i=[];for(let t=1;t<n.length;t++)i.push(n[t-1]),i.push(n[t]);t.push(i)}return t}_handlePoles(e){let t=!1,r=!1;this._canonical&&(0===this._canonical.y&&(t=!0),this._canonical.y===(1<<this._canonical.z)-1&&(r=!0)),(t||r)&&this._fillPoles(e,t,r)}_ensureNoPoleVertices(){const e=this._vertexBuffer;for(let t=0;t<e.length;t+=2){const r=e[t+1];r===Zl&&(e[t+1]=-32767),r===Yl&&(e[t+1]=32766)}}_generatePoleQuad(e,t,r,n,i,a){n>i!=(a===Zl)?(e.push(t),e.push(r),e.push(this._vertexToIndex(n,a)),e.push(r),e.push(this._vertexToIndex(i,a)),e.push(this._vertexToIndex(n,a))):(e.push(r),e.push(t),e.push(this._vertexToIndex(n,a)),e.push(this._vertexToIndex(i,a)),e.push(r),e.push(this._vertexToIndex(n,a)))}_fillPoles(e,t,r){const n=this._vertexBuffer,i=M,a=e.length;for(let s=2;s<a;s+=3){const a=e[s-2],o=e[s-1],l=e[s],c=n[2*a],u=n[2*a+1],d=n[2*o],h=n[2*o+1],p=n[2*l],f=n[2*l+1];t&&(0===u&&0===h&&this._generatePoleQuad(e,a,o,c,d,Zl),0===h&&0===f&&this._generatePoleQuad(e,o,l,d,p,Zl),0===f&&0===u&&this._generatePoleQuad(e,l,a,p,c,Zl)),r&&(u===i&&h===i&&this._generatePoleQuad(e,a,o,c,d,Yl),h===i&&f===i&&this._generatePoleQuad(e,o,l,d,p,Yl),f===i&&u===i&&this._generatePoleQuad(e,l,a,p,c,Yl))}}_initializeVertices(e){for(let t=0;t<e.length;t+=2)this._vertexToIndex(e[t],e[t+1])}subdividePolygonInternal(e,t){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:r,holeIndices:n}=function(e){const t=[],r=[];for(const n of e)if(0!==n.length){n!==e[0]&&t.push(r.length/2);for(let e=0;e<n.length;e++)r.push(n[e].x),r.push(n[e].y)}return{flattened:r,holeIndices:t}}(e);let i;this._initializeVertices(r);try{const e=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=t&&t.length,i=n?t[0]*r:e.length;let a=_l(e,0,i,r,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c;if(n&&(a=function(e,t,r,n){const i=[];for(let a=0,s=t.length;a<s;a++){const r=_l(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n,!1);r===r.next&&(r.steiner=!0),i.push(Il(r))}i.sort(Tl);for(let a=0;a<i.length;a++)r=Pl(i[a],r);return r}(e,t,a,r)),e.length>80*r){o=1/0,l=1/0;let t=-1/0,n=-1/0;for(let a=r;a<i;a+=r){const r=e[a],i=e[a+1];r<o&&(o=r),i<l&&(l=i),r>t&&(t=r),i>n&&(n=i)}c=Math.max(t-o,n-l),c=0!==c?32767/c:0}return Sl(a,s,r,o,l,c,0),s}(r,n),t=this._convertIndices(r,e);i=this._subdivideTrianglesScanline(t)}catch(e){console.error(e)}let a=[];return t&&(a=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(i),{verticesFlattened:this._vertexBuffer,indicesTriangles:i,indicesLineList:a}}_convertIndices(e,t){const r=[];for(let n=0;n<t.length;n++)r.push(this._vertexToIndex(e[2*t[n]],e[2*t[n]+1]));return r}_pointArrayToIndices(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];t.push(this._vertexToIndex(n.x,n.y))}return t}}function Ql(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Xl(r,t).subdividePolygonInternal(e,n)}function Jl(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||e.length<1)return[];if(e.length<2)return[];const n=e[0],i=e[e.length-1],a=r&&(n.x!==i.x||n.y!==i.y);if(t<2)return a?[...e,e[0]]:[...e];const s=Math.floor(M/t),o=[];o.push(new l(e[0].x,e[0].y));const c=e.length,u=a?c:c-1;for(let d=0;d<u;d++){const t=e[d],r=d<c-1?e[d+1]:e[0],n=t.x,i=t.y,a=r.x,u=r.y,h=n!==a,p=i!==u;if(!h&&!p)continue;const f=a-n,m=u-i,g=Math.abs(f),v=Math.abs(m);let x=n,y=i;for(;;){const e=f>0?(Math.floor(x/s)+1)*s:(Math.ceil(x/s)-1)*s,t=m>0?(Math.floor(y/s)+1)*s:(Math.ceil(y/s)-1)*s,r=Math.abs(x-e),n=Math.abs(y-t),i=Math.abs(x-a),c=Math.abs(y-u),d=h?r/g:Number.POSITIVE_INFINITY,b=p?n/v:Number.POSITIVE_INFINITY;if((i<=r||!h)&&(c<=n||!p))break;if(d<b&&h||!p){x=e,y+=m*d;const t=new l(x,Math.round(y));o[o.length-1].x===t.x&&o[o.length-1].y===t.y||o.push(t)}else{x+=f*b,y=t;const e=new l(Math.round(x),y);o[o.length-1].x===e.x&&o[o.length-1].y===e.y||o.push(e)}}const b=new l(a,u);o[o.length-1].x===b.x&&o[o.length-1].y===b.y||o.push(b)}return o}function ec(e,t,r){if(0===t.length)throw new Error("Subdivision vertex ring is empty.");let n=0,i=e[2*t[0]];for(let l=1;l<t.length;l++){const r=e[2*t[l]];r<i&&(i=r,n=l)}const a=t.length;let s=n,o=(s+1)%a;for(;;){const n=s-1>=0?s-1:a-1,i=(o+1)%a,l=e[2*t[n]],c=e[2*t[i]],u=e[2*t[s]],d=e[2*t[s]+1],h=e[2*t[o]+1];let p=!1;if(l<c)p=!0;else if(l>c)p=!1;else{const r=h-d,a=-(e[2*t[o]]-u),s=d<h?1:-1;((l-u)*r+(e[2*t[n]+1]-d)*a)*s>((c-u)*r+(e[2*t[i]+1]-d)*a)*s&&(p=!0)}if(p){const e=t[n],i=t[s],l=t[o];e!==i&&e!==l&&i!==l&&r.push(l,i,e),s--,s<0&&(s=a-1)}else{const e=t[i],n=t[s],l=t[o];e!==n&&e!==l&&n!==l&&r.push(l,n,e),o++,o>=a&&(o=0)}if(n===i)break}}function tc(e,t,r,n,i,a,s,o,l){const c=i.length/2,u=s&&o&&l;if(c<Zs.MAX_VERTEX_ARRAY_LENGTH){const d=t.prepareSegment(c,r,n),h=d.vertexLength;for(let e=0;e<a.length;e+=3)n.emplaceBack(h+a[e],h+a[e+1],h+a[e+2]);let p,f;d.vertexLength+=c,d.primitiveLength+=a.length/3,u&&(f=s.prepareSegment(c,r,o),p=f.vertexLength,f.vertexLength+=c);for(let t=0;t<i.length;t+=2)e(i[t],i[t+1]);if(u)for(let e=0;e<l.length;e++){const t=l[e];for(let e=1;e<t.length;e+=2)o.emplaceBack(p+t[e-1],p+t[e]);f.primitiveLength+=t.length/2}}else!function(e,t,r,n,i,a){const s=[];for(let d=0;d<n.length/2;d++)s.push(-1);const o={count:0};let l=0,c=e.getOrCreateLatestSegment(t,r),u=c.vertexLength;for(let d=2;d<i.length;d+=3){const h=i[d-2],p=i[d-1],f=i[d];let m=s[h]<l,g=s[p]<l,v=s[f]<l;c.vertexLength+((m?1:0)+(g?1:0)+(v?1:0))>Zs.MAX_VERTEX_ARRAY_LENGTH&&(c=e.createNewSegment(t,r),l=o.count,m=!0,g=!0,v=!0,u=0);const x=rc(s,n,a,o,h,m,c),y=rc(s,n,a,o,p,g,c),b=rc(s,n,a,o,f,v,c);r.emplaceBack(u+x-l,u+y-l,u+b-l),c.primitiveLength++}}(t,r,n,i,a,e),u&&function(e,t,r,n,i,a){const s=[];for(let d=0;d<n.length/2;d++)s.push(-1);const o={count:0};let l=0,c=e.getOrCreateLatestSegment(t,r),u=c.vertexLength;for(let d=0;d<i.length;d++){const h=i[d];for(let p=1;p<i[d].length;p+=2){const i=h[p-1],d=h[p];let f=s[i]<l,m=s[d]<l;c.vertexLength+((f?1:0)+(m?1:0))>Zs.MAX_VERTEX_ARRAY_LENGTH&&(c=e.createNewSegment(t,r),l=o.count,f=!0,m=!0,u=0);const g=rc(s,n,a,o,i,f,c),v=rc(s,n,a,o,d,m,c);r.emplaceBack(u+g-l,u+v-l),c.primitiveLength++}}}(s,r,o,i,l,e),t.forceNewSegmentOnNextPrepare(),null==s||s.forceNewSegmentOnNextPrepare()}function rc(e,t,r,n,i,a,s){if(a){const a=n.count;return r(t[2*i],t[2*i+1]),e[i]=n.count,n.count++,s.vertexLength++,a}return e[i]}class nc{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ds,this.indexArray=new Gs,this.indexArray2=new Ws,this.programConfigurations=new ko(e.layers,e.zoom),this.segments=new Zs,this.segments2=new Zs,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=bl("fill",this.layers,t);const n=this.layers[0].layout.get("fill-sort-key"),i=!n.isConstant(),a=[];for(const{feature:s,id:o,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=To(s,e);if(!this.layers[0]._featureFilter.filter(new Pa(this.zoom,{globalState:this.globalState}),u,r))continue;const d=i?n.evaluate(u,{},r,t.availableImages):void 0,h={id:o,properties:s.properties,type:s.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:No(s),patterns:{},sortKey:d};a.push(h)}i&&a.sort(((e,t)=>e.sortKey-t.sortKey));for(const s of a){const{geometry:n,index:i,sourceLayerIndex:a}=s;if(this.hasPattern){const e=wl("fill",this.layers,s,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(s,n,i,r,{},t.subdivisionGranularity);t.featureIndex.insert(e[i].feature,n,i,a,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const n of this.patternFeatures)this.addFeature(n,n.geometry,n.index,t,r,e.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,yl),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,r,n,i,a){for(const s of rn(t,500)){const e=Ql(s,n,a.fill.getGranularityForZoomLevel(n.z)),t=this.layoutVertexArray;tc(((e,r)=>{t.emplaceBack(e,r)}),this.segments,this.layoutVertexArray,this.indexArray,e.verticesFlattened,e.indicesTriangles,this.segments2,this.indexArray2,e.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,n)}}let ic,ac;ca("FillBucket",nc,{omit:["layers","patternFeatures"]});var sc={get paint(){return ac=ac||new Ha({"fill-antialias":new $a(we.paint_fill["fill-antialias"]),"fill-opacity":new Ba(we.paint_fill["fill-opacity"]),"fill-color":new Ba(we.paint_fill["fill-color"]),"fill-outline-color":new Ba(we.paint_fill["fill-outline-color"]),"fill-translate":new $a(we.paint_fill["fill-translate"]),"fill-translate-anchor":new $a(we.paint_fill["fill-translate-anchor"]),"fill-pattern":new za(we.paint_fill["fill-pattern"])})},get layout(){return ic=ic||new Ha({"fill-sort-key":new Ba(we.layout_fill["fill-sort-key"])})}};class oc extends Wa{constructor(e){super(e,sc)}recalculate(e,t){super.recalculate(e,t);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new nc(e)}queryRadius(){return Go(this.paint.get("fill-translate"))}queryIntersectsFeature(e){let{queryGeometry:t,geometry:r,transform:n,pixelsToTileUnits:i}=e;return Do(Wo(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-n.bearingInRadians,i),r)}isTileClipped(){return!0}}const lc=Ya([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),cc=Ya([{name:"a_centroid",components:2,type:"Int16"}],4),{members:uc}=lc;var dc,hc,pc,fc,mc,gc,vc,xc={};function yc(){if(hc)return dc;hc=1;var e=a();function t(e,t,n,i,a){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=a,e.readFields(r,this,t)}function r(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function n(e){for(var t,r,n=0,i=0,a=e.length,s=a-1;i<a;s=i++)n+=((r=e[s]).x-(t=e[i]).x)*(t.y+r.y);return n}return dc=t,t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var r,n=t.readVarint()+t.pos,i=1,a=0,s=0,o=0,l=[];t.pos<n;){if(a<=0){var c=t.readVarint();i=7&c,a=c>>3}if(a--,1===i||2===i)s+=t.readSVarint(),o+=t.readSVarint(),1===i&&(r&&l.push(r),r=[]),r.push(new e(s,o));else{if(7!==i)throw new Error("unknown command "+i);r&&r.push(r[0].clone())}}return r&&l.push(r),l},t.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,a=0,s=1/0,o=-1/0,l=1/0,c=-1/0;e.pos<t;){if(n<=0){var u=e.readVarint();r=7&u,n=u>>3}if(n--,1===r||2===r)(i+=e.readSVarint())<s&&(s=i),i>o&&(o=i),(a+=e.readSVarint())<l&&(l=a),a>c&&(c=a);else if(7!==r)throw new Error("unknown command "+r)}return[s,l,o,c]},t.prototype.toGeoJSON=function(e,r,i){var a,s,o=this.extent*Math.pow(2,i),l=this.extent*e,c=this.extent*r,u=this.loadGeometry(),d=t.types[this.type];function h(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+l)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+c)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(a=0;a<u.length;a++)p[a]=u[a][0];h(u=p);break;case 2:for(a=0;a<u.length;a++)h(u[a]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var r,i,a=[],s=0;s<t;s++){var o=n(e[s]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(r&&a.push(r),r=[e[s]]):r.push(e[s]))}return r&&a.push(r),a}(u),a=0;a<u.length;a++)for(s=0;s<u[a].length;s++)h(u[a][s])}1===u.length?u=u[0]:d="Multi"+d;var f={type:"Feature",geometry:{type:d,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f},dc}function bc(){if(fc)return pc;fc=1;var e=yc();function t(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(r,this,t),this.length=this._features.length}function r(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}return pc=t,t.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var r=this._pbf.readVarint()+this._pbf.pos;return new e(this._pbf,r,this.extent,this._keys,this._values)},pc}function wc(){return vc||(vc=1,xc.VectorTile=function(){if(gc)return mc;gc=1;var e=bc();function t(t,r,n){if(3===t){var i=new e(n,n.readVarint()+n.pos);i.length&&(r[i.name]=i)}}return mc=function(e,r){this.layers=e.readFields(t,{},r)},mc}(),xc.VectorTileFeature=yc(),xc.VectorTileLayer=bc()),xc}var _c=r(wc());const kc=_c.VectorTileFeature.types,Sc=Math.pow(2,13);function jc(e,t,r,n,i,a,s,o){e.emplaceBack(t,r,2*Math.floor(n*Sc)+s,i*Sc*2,a*Sc*2,Math.round(o))}class Ec{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Rs,this.centroidVertexArray=new Is,this.indexArray=new Gs,this.programConfigurations=new ko(e.layers,e.zoom),this.segments=new Zs,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.features=[],this.hasPattern=bl("fill-extrusion",this.layers,t);for(const{feature:n,id:i,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,o=To(n,e);if(!this.layers[0]._featureFilter.filter(new Pa(this.zoom,{globalState:this.globalState}),o,r))continue;const l={id:i,sourceLayerIndex:s,index:a,geometry:e?o.geometry:No(n),properties:n.properties,type:n.type,patterns:{}};this.hasPattern?this.features.push(wl("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,a,r,{},t.subdivisionGranularity),t.featureIndex.insert(n,l.geometry,a,s,this.index,!0)}}addFeatures(e,t,r){for(const n of this.features){const{geometry:i}=n;this.addFeature(n,i,n.index,t,r,e.subdivisionGranularity)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,uc),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,cc.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,r,n,i,a){for(const s of rn(t,500)){const t={x:0,y:0,sampleCount:0},r=this.layoutVertexArray.length;this.processPolygon(t,n,e,s,a);const i=this.layoutVertexArray.length-r,o=Math.floor(t.x/t.sampleCount),l=Math.floor(t.y/t.sampleCount);for(let e=0;e<i;e++)this.centroidVertexArray.emplaceBack(o,l)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,n)}processPolygon(e,t,r,n,i){if(n.length<1)return;if(Tc(n[0]))return;for(const u of n)0!==u.length&&Cc(e,u);const a={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},s=i.fill.getGranularityForZoomLevel(t.z),o="Polygon"===kc[r.type];for(const u of n){if(0===u.length)continue;if(Tc(u))continue;const e=Jl(u,s,o);this._generateSideFaces(e,a)}if(!o)return;const l=Ql(n,t,s,!1),c=this.layoutVertexArray;tc(((e,t)=>{jc(c,e,t,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,l.verticesFlattened,l.indicesTriangles)}_generateSideFaces(e,t){let r=0;for(let n=1;n<e.length;n++){const i=e[n],a=e[n-1];if(Nc(i,a))continue;t.segment.vertexLength+4>Zs.MAX_VERTEX_ARRAY_LENGTH&&(t.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const s=i.sub(a)._perp()._unit(),o=a.dist(i);r+o>32768&&(r=0),jc(this.layoutVertexArray,i.x,i.y,s.x,s.y,0,0,r),jc(this.layoutVertexArray,i.x,i.y,s.x,s.y,0,1,r),r+=o,jc(this.layoutVertexArray,a.x,a.y,s.x,s.y,0,0,r),jc(this.layoutVertexArray,a.x,a.y,s.x,s.y,0,1,r);const l=t.segment.vertexLength;this.indexArray.emplaceBack(l,l+2,l+1),this.indexArray.emplaceBack(l+1,l+2,l+3),t.segment.vertexLength+=4,t.segment.primitiveLength+=2}}}function Cc(e,t){for(let r=0;r<t.length;r++){const n=t[r];r===t.length-1&&t[0].x===n.x&&t[0].y===n.y||(e.x+=n.x,e.y+=n.y,e.sampleCount++)}}function Nc(e,t){return e.x===t.x&&(e.x<0||e.x>M)||e.y===t.y&&(e.y<0||e.y>M)}function Tc(e){return e.every((e=>e.x<0))||e.every((e=>e.x>M))||e.every((e=>e.y<0))||e.every((e=>e.y>M))}let Pc;ca("FillExtrusionBucket",Ec,{omit:["layers","features"]});var Ac={get paint(){return Pc=Pc||new Ha({"fill-extrusion-opacity":new $a(we["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ba(we["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new $a(we["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new $a(we["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new za(we["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ba(we["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ba(we["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new $a(we["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Mc extends Wa{constructor(e){super(e,Ac)}createBucket(e){return new Ec(e)}queryRadius(){return Go(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e){let{queryGeometry:t,feature:r,featureState:n,geometry:i,transform:a,pixelsToTileUnits:s,pixelPosMatrix:o}=e;const c=Wo(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-a.bearingInRadians,s),u=this.paint.get("fill-extrusion-height").evaluate(r,n),d=this.paint.get("fill-extrusion-base").evaluate(r,n),h=function(e,t){const r=[];for(const n of e){const e=[n.x,n.y,0,1];C(e,e,t),r.push(new l(e[0]/e[3],e[1]/e[3]))}return r}(c,o),p=function(e,t,r,n){const i=[],a=[],s=n[8]*t,o=n[9]*t,c=n[10]*t,u=n[11]*t,d=n[8]*r,h=n[9]*r,p=n[10]*r,f=n[11]*r;for(const m of e){const e=[],t=[];for(const r of m){const i=r.x,a=r.y,m=n[0]*i+n[4]*a+n[12],g=n[1]*i+n[5]*a+n[13],v=n[2]*i+n[6]*a+n[14],x=n[3]*i+n[7]*a+n[15],y=v+c,b=x+u,w=m+d,_=g+h,k=v+p,S=x+f,j=new l((m+s)/b,(g+o)/b);j.z=y/b,e.push(j);const E=new l(w/S,_/S);E.z=k/S,t.push(E)}i.push(e),a.push(t)}return[i,a]}(i,d,u,o);return function(e,t,r){let n=1/0;Do(r,t)&&(n=Oc(r,t[0]));for(let i=0;i<t.length;i++){const a=t[i],s=e[i];for(let e=0;e<a.length-1;e++){const t=a[e],i=[t,a[e+1],s[e+1],s[e],t];Io(r,i)&&(n=Math.min(n,Oc(r,i)))}}return n!==1/0&&n}(p[0],p[1],h)}}function Ic(e,t){return e.x*t.x+e.y*t.y}function Oc(e,t){if(1===e.length){let r=0;const n=t[r++];let i;for(;!i||n.equals(i);)if(i=t[r++],!i)return 1/0;for(;r<t.length;r++){const a=t[r],s=e[0],o=i.sub(n),l=a.sub(n),c=s.sub(n),u=Ic(o,o),d=Ic(o,l),h=Ic(l,l),p=Ic(c,o),f=Ic(c,l),m=u*h-d*d,g=(h*p-d*f)/m,v=(u*f-d*p)/m,x=n.z*(1-g-v)+i.z*g+a.z*v;if(isFinite(x))return x}return 1/0}{let e=1/0;for(const r of t)e=Math.min(e,r.z);return e}}const Dc=Ya([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Rc}=Dc,Lc=Ya([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Fc}=Lc,$c=_c.VectorTileFeature.types,Bc=Math.cos(Math.PI/180*37.5),zc=Math.pow(2,14)/.5;class Uc{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new Ls,this.layoutVertexArray2=new Fs,this.indexArray=new Gs,this.programConfigurations=new ko(e.layers,e.zoom),this.segments=new Zs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=bl("line",this.layers,t);const n=this.layers[0].layout.get("line-sort-key"),i=!n.isConstant(),a=[];for(const{feature:s,id:o,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,t=To(s,e);if(!this.layers[0]._featureFilter.filter(new Pa(this.zoom,{globalState:this.globalState}),t,r))continue;const u=i?n.evaluate(t,{},r):void 0,d={id:o,properties:s.properties,type:s.type,sourceLayerIndex:c,index:l,geometry:e?t.geometry:No(s),patterns:{},sortKey:u};a.push(d)}i&&a.sort(((e,t)=>e.sortKey-t.sortKey));for(const s of a){const{geometry:n,index:i,sourceLayerIndex:a}=s;if(this.hasPattern){const e=wl("line",this.layers,s,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(s,n,i,r,{},t.subdivisionGranularity);t.featureIndex.insert(e[i].feature,n,i,a,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const n of this.patternFeatures)this.addFeature(n,n.geometry,n.index,t,r,e.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Fc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Rc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,r,n,i,a){const s=this.layers[0].layout,o=s.get("line-join").evaluate(e,{}),l=s.get("line-cap"),c=s.get("line-miter-limit"),u=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const d of t)this.addLine(d,e,o,l,c,u,n,a);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,n)}addLine(e,t,r,n,i,a,s,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=Jl(e,s?o.line.getGranularityForZoomLevel(s.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const l="Polygon"===$c[t.type];let c=e.length;for(;c>=2&&e[c-1].equals(e[c-2]);)c--;let u=0;for(;u<c-1&&e[u].equals(e[u+1]);)u++;if(c<(l?3:2))return;"bevel"===r&&(i=1.05);const d=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);let p,f,m,g,v;this.e1=this.e2=-1,l&&(p=e[c-2],v=e[u].sub(p)._unit()._perp());for(let x=u;x<c;x++){if(m=x===c-1?l?e[u+1]:void 0:e[x+1],m&&e[x].equals(m))continue;v&&(g=v),p&&(f=p),p=e[x],v=m?m.sub(p)._unit()._perp():g,g=g||v;let t=g.add(v);0===t.x&&0===t.y||t._unit();const s=g.x*v.x+g.y*v.y,o=t.x*v.x+t.y*v.y,y=0!==o?1/o:1/0,b=2*Math.sqrt(2-2*o),w=o<Bc&&f&&m,_=g.x*v.y-g.y*v.x>0;if(w&&x>u){const e=p.dist(f);if(e>2*d){const t=p.sub(p.sub(f)._mult(d/e)._round());this.updateDistance(f,t),this.addCurrentVertex(t,g,0,0,h),f=t}}const k=f&&m;let S=k?r:l?"butt":n;if(k&&"round"===S&&(y<a?S="miter":y<=2&&(S="fakeround")),"miter"===S&&y>i&&(S="bevel"),"bevel"===S&&(y>2&&(S="flipbevel"),y<i&&(S="miter")),f&&this.updateDistance(f,p),"miter"===S)t._mult(y),this.addCurrentVertex(p,t,0,0,h);else if("flipbevel"===S){if(y>100)t=v.mult(-1);else{const e=y*g.add(v).mag()/g.sub(v).mag();t._perp()._mult(e*(_?-1:1))}this.addCurrentVertex(p,t,0,0,h),this.addCurrentVertex(p,t.mult(-1),0,0,h)}else if("bevel"===S||"fakeround"===S){const e=-Math.sqrt(y*y-1),t=_?e:0,r=_?0:e;if(f&&this.addCurrentVertex(p,g,t,r,h),"fakeround"===S){const e=Math.round(180*b/Math.PI/20);for(let t=1;t<e;t++){let r=t/e;if(.5!==r){const e=r-.5;r+=r*e*(r-1)*((1.0904+s*(s*(3.55645-1.43519*s)-3.2452))*e*e+(.848013+s*(.215638*s-1.06021)))}const n=v.sub(g)._mult(r)._add(g)._unit()._mult(_?-1:1);this.addHalfVertex(p,n.x,n.y,!1,_,0,h)}}m&&this.addCurrentVertex(p,v,-t,-r,h)}else if("butt"===S)this.addCurrentVertex(p,t,0,0,h);else if("square"===S){const e=f?1:-1;this.addCurrentVertex(p,t,e,e,h)}else"round"===S&&(f&&(this.addCurrentVertex(p,g,0,0,h),this.addCurrentVertex(p,g,1,1,h,!0)),m&&(this.addCurrentVertex(p,v,-1,-1,h,!0),this.addCurrentVertex(p,v,0,0,h)));if(w&&x<c-1){const e=p.dist(m);if(e>2*d){const t=p.add(m.sub(p)._mult(d/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,v,0,0,h),p=t}}}}addCurrentVertex(e,t,r,n,i){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=t.y*n-t.x,o=-t.y-t.x*n;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,a,!1,r,i),this.addHalfVertex(e,s,o,a,!0,-n,i),this.distance>zc/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,t,r,n,i,a))}addHalfVertex(e,t,r,n,i,a,s){let{x:o,y:l}=e;const c=.5*(this.lineClips?this.scaledDistance*(zc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(n?1:0),(l<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1)|(63&c)<<2,c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,u,this.e2),s.primitiveLength++),i?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}let Vc,Hc;ca("LineBucket",Uc,{omit:["layers","patternFeatures"]});var Gc={get paint(){return Hc=Hc||new Ha({"line-opacity":new Ba(we.paint_line["line-opacity"]),"line-color":new Ba(we.paint_line["line-color"]),"line-translate":new $a(we.paint_line["line-translate"]),"line-translate-anchor":new $a(we.paint_line["line-translate-anchor"]),"line-width":new Ba(we.paint_line["line-width"]),"line-gap-width":new Ba(we.paint_line["line-gap-width"]),"line-offset":new Ba(we.paint_line["line-offset"]),"line-blur":new Ba(we.paint_line["line-blur"]),"line-dasharray":new Ua(we.paint_line["line-dasharray"]),"line-pattern":new za(we.paint_line["line-pattern"]),"line-gradient":new Va(we.paint_line["line-gradient"])})},get layout(){return Vc=Vc||new Ha({"line-cap":new $a(we.layout_line["line-cap"]),"line-join":new Ba(we.layout_line["line-join"]),"line-miter-limit":new $a(we.layout_line["line-miter-limit"]),"line-round-limit":new $a(we.layout_line["line-round-limit"]),"line-sort-key":new Ba(we.layout_line["line-sort-key"])})}};class Wc extends Ba{possiblyEvaluate(e,t){return t=new Pa(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,r,n){return t=z({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,r,n)}}let qc;class Kc extends Wa{constructor(e){super(e,Gc),this.gradientVersion=0,qc||(qc=new Wc(Gc.paint.properties["line-width"].specification),qc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this.gradientExpression();this.stepInterpolant=!!function(e){return void 0!==e._styleExpression}(e)&&e._styleExpression.expression instanceof cr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=qc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Uc(e)}queryRadius(e){const t=e,r=Zc(Ho("line-width",this,t),Ho("line-gap-width",this,t)),n=Ho("line-offset",this,t);return r/2+Math.abs(n)+Go(this.paint.get("line-translate"))}queryIntersectsFeature(e){let{queryGeometry:t,feature:r,featureState:n,geometry:i,transform:a,pixelsToTileUnits:s}=e;const o=Wo(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-a.bearingInRadians,s),c=s/2*Zc(this.paint.get("line-width").evaluate(r,n),this.paint.get("line-gap-width").evaluate(r,n)),u=this.paint.get("line-offset").evaluate(r,n);return u&&(i=function(e,t){const r=[];for(let n=0;n<e.length;n++){const i=e[n],a=[];for(let e=0;e<i.length;e++){const r=i[e-1],n=i[e],s=i[e+1],o=0===e?new l(0,0):n.sub(r)._unit()._perp(),c=e===i.length-1?new l(0,0):s.sub(n)._unit()._perp(),u=o._add(c)._unit(),d=u.x*c.x+u.y*c.y;0!==d&&u._mult(1/d),a.push(u._mult(t)._add(n))}r.push(a)}return r}(i,u*s)),function(e,t,r){for(let n=0;n<t.length;n++){const i=t[n];if(e.length>=3)for(let t=0;t<i.length;t++)if(Uo(e,i[t]))return!0;if(Ro(e,i,r))return!0}return!1}(o,i,c)}isTileClipped(){return!0}}function Zc(e,t){return t>0?t+2*e:e}const Yc=Ya([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Xc=Ya([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ya([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Qc=Ya([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ya([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Jc=Ya([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),eu=Ya([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function tu(e,t,r){return e.sections.forEach((e=>{e.text=function(e,t,r){const n=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),Ta.applyArabicShaping&&(e=Ta.applyArabicShaping(e)),e}(e.text,t,r)})),e}Ya([{name:"triangle",components:3,type:"Uint16"}]),Ya([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ya([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ya([{type:"Float32",name:"offsetX"}]),Ya([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ya([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const ru={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var nu,iu,au,su=24,ou={};function lu(){return nu||(nu=1,ou.read=function(e,t,r,n,i){var a,s,o=8*i-n-1,l=(1<<o)-1,c=l>>1,u=-7,d=r?i-1:0,h=r?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-u)-1,p>>=-u,u+=o;u>0;a=256*a+e[t+d],d+=h,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=n;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===a)a=1-c;else{if(a===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),a-=c}return(p?-1:1)*s*Math.pow(2,a-n)},ou.write=function(e,t,r,n,i,a){var s,o,l,c=8*a-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(o=0,s=u):s+d>=1?(o=(t*l-1)*Math.pow(2,i),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&o,p+=f,o/=256,i-=8);for(s=s<<i|o,c+=i;c>0;e[r+p]=255&s,p+=f,s/=256,c-=8);e[r+p-f]|=128*m}),ou}function cu(){if(au)return iu;au=1,iu=t;var e=lu();function t(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var r=4294967296,n=1/r,i="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function a(e){return e.type===t.Bytes?e.readVarint()+e.pos:e.pos+1}function s(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function o(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function l(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function c(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function u(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function d(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function h(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function p(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function f(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function m(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function g(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function v(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function x(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function y(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}return t.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=7&n,e(i,t,this),this.pos===a&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=v(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=y(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=v(this.buf,this.pos)+v(this.buf,this.pos+4)*r;return this.pos+=8,e},readSFixed64:function(){var e=v(this.buf,this.pos)+y(this.buf,this.pos+4)*r;return this.pos+=8,e},readFloat:function(){var t=e.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=e.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,i,a=r.buf;if(n=(112&(i=a[r.pos++]))>>4,i<128)return s(e,n,t);if(n|=(127&(i=a[r.pos++]))<<3,i<128)return s(e,n,t);if(n|=(127&(i=a[r.pos++]))<<10,i<128)return s(e,n,t);if(n|=(127&(i=a[r.pos++]))<<17,i<128)return s(e,n,t);if(n|=(127&(i=a[r.pos++]))<<24,i<128)return s(e,n,t);if(n|=(1&(i=a[r.pos++]))<<31,i<128)return s(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&i?function(e,t,r){return i.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var n="",i=t;i<r;){var a,s,o,l=e[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>r)break;1===u?l<128&&(c=l):2===u?128==(192&(a=e[i+1]))&&(c=(31&l)<<6|63&a)<=127&&(c=null):3===u?(s=e[i+2],128==(192&(a=e[i+1]))&&128==(192&s)&&((c=(15&l)<<12|(63&a)<<6|63&s)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(s=e[i+2],o=e[i+3],128==(192&(a=e[i+1]))&&128==(192&s)&&128==(192&o)&&((c=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),i+=u}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,r){if(this.type!==t.Bytes)return e.push(this.readVarint(r));var n=a(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(r));return e},readPackedSVarint:function(e){if(this.type!==t.Bytes)return e.push(this.readSVarint());var r=a(this);for(e=e||[];this.pos<r;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==t.Bytes)return e.push(this.readBoolean());var r=a(this);for(e=e||[];this.pos<r;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==t.Bytes)return e.push(this.readFloat());var r=a(this);for(e=e||[];this.pos<r;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==t.Bytes)return e.push(this.readDouble());var r=a(this);for(e=e||[];this.pos<r;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==t.Bytes)return e.push(this.readFixed32());var r=a(this);for(e=e||[];this.pos<r;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==t.Bytes)return e.push(this.readSFixed32());var r=a(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==t.Bytes)return e.push(this.readFixed64());var r=a(this);for(e=e||[];this.pos<r;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==t.Bytes)return e.push(this.readSFixed64());var r=a(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed64());return e},skip:function(e){var r=7&e;if(r===t.Varint)for(;this.buf[this.pos++]>127;);else if(r===t.Bytes)this.pos=this.readVarint()+this.pos;else if(r===t.Fixed32)this.pos+=4;else{if(r!==t.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*n),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*n),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,i,a=0;a<t.length;a++){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){n>56319||a+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&o(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),e.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),e.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&o(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,r,n){this.writeTag(e,t.Bytes),this.writeRawMessage(r,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,l,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,c,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,h,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,u,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,d,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,p,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,f,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,m,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,g,t)},writeBytesField:function(e,r){this.writeTag(e,t.Bytes),this.writeBytes(r)},writeFixed32Field:function(e,r){this.writeTag(e,t.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(e,r){this.writeTag(e,t.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(e,r){this.writeTag(e,t.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(e,r){this.writeTag(e,t.Fixed64),this.writeSFixed64(r)},writeVarintField:function(e,r){this.writeTag(e,t.Varint),this.writeVarint(r)},writeSVarintField:function(e,r){this.writeTag(e,t.Varint),this.writeSVarint(r)},writeStringField:function(e,r){this.writeTag(e,t.Bytes),this.writeString(r)},writeFloatField:function(e,r){this.writeTag(e,t.Fixed32),this.writeFloat(r)},writeDoubleField:function(e,r){this.writeTag(e,t.Fixed64),this.writeDouble(r)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}},iu}var uu,du=r(cu());function hu(e,t,r){1===e&&r.readMessage(pu,t)}function pu(e,t,r){if(3===e){const{id:e,bitmap:n,width:i,height:a,left:s,top:o,advance:l}=r.readMessage(fu,{});t.push({id:e,bitmap:new il({width:i+6,height:a+6},n),metrics:{width:i,height:a,left:s,top:o,advance:l}})}}function fu(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}function mu(e){let t=0,r=0;for(const s of e)t+=s.w*s.h,r=Math.max(r,s.w);e.sort(((e,t)=>t.h-e.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let i=0,a=0;for(const s of e)for(let e=n.length-1;e>=0;e--){const t=n[e];if(!(s.w>t.w||s.h>t.h)){if(s.x=t.x,s.y=t.y,a=Math.max(a,s.y+s.h),i=Math.max(i,s.x+s.w),s.w===t.w&&s.h===t.h){const t=n.pop();e<n.length&&(n[e]=t)}else s.h===t.h?(t.x+=s.w,t.w-=s.w):s.w===t.w?(t.y+=s.h,t.h-=s.h):(n.push({x:t.x+s.w,y:t.y,w:t.w-s.w,h:s.h}),t.y+=s.h,t.h-=s.h);break}}return{w:i,h:a,fill:t/(i*a)||0}}class gu{constructor(e,t){let{pixelRatio:r,version:n,stretchX:i,stretchY:a,content:s,textFitWidth:o,textFitHeight:l}=t;this.paddedRect=e,this.pixelRatio=r,this.stretchX=i,this.stretchY=a,this.content=s,this.version=n,this.textFitWidth=o,this.textFitHeight=l}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class vu{constructor(e,t){const r={},n={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,r,i),this.addImages(t,n,i);const{w:a,h:s}=mu(i),o=new al({width:a||1,height:s||1});for(const l in e){const t=e[l],n=r[l].paddedRect;al.copy(t.data,o,{x:0,y:0},{x:n.x+1,y:n.y+1},t.data)}for(const l in t){const e=t[l],r=n[l].paddedRect,i=r.x+1,a=r.y+1,s=e.data.width,c=e.data.height;al.copy(e.data,o,{x:0,y:0},{x:i,y:a},e.data),al.copy(e.data,o,{x:0,y:c-1},{x:i,y:a-1},{width:s,height:1}),al.copy(e.data,o,{x:0,y:0},{x:i,y:a+c},{width:s,height:1}),al.copy(e.data,o,{x:s-1,y:0},{x:i-1,y:a},{width:1,height:c}),al.copy(e.data,o,{x:0,y:0},{x:i+s,y:a},{width:1,height:c})}this.image=o,this.iconPositions=r,this.patternPositions=n}addImages(e,t,r){for(const n in e){const i=e[n],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(a),t[n]=new gu(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}patchUpdatedImage(e,t,r){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[n,i]=e.tl;r.update(t.data,void 0,{x:n,y:i})}}ca("ImagePosition",gu),ca("ImageAtlas",vu),e.an=void 0,(uu=e.an||(e.an={}))[uu.none=0]="none",uu[uu.horizontal=1]="horizontal",uu[uu.vertical=2]="vertical",uu[uu.horizontalOnly=3]="horizontalOnly";class xu{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(e,t,r){const n=new xu;return n.scale=e||1,n.fontStack=t,n.verticalAlign=r||"bottom",n}static forImage(e,t){const r=new xu;return r.imageName=e,r.verticalAlign=t||"bottom",r}}class yu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const r=new yu;for(let n=0;n<e.sections.length;n++){const i=e.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,t)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r+1)||null,i=e.charCodeAt(r-1)||null;t+=n&&Sa(n)&&!ru[e[r+1]]||i&&Sa(i)&&!ru[e[r-1]]||!ru[e[r]]?e[r]:ru[e[r]]}return t}(this.text)}trim(){let e=0;for(let r=0;r<this.text.length&&wu[this.text.charCodeAt(r)];r++)e++;let t=this.text.length;for(let r=this.text.length-1;r>=0&&r>=e&&wu[this.text.charCodeAt(r)];r--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const r=new yu;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}getMaxImageSize(e){let t=0,r=0;for(let n=0;n<this.length();n++){const i=this.getSection(n);if(i.imageName){const n=e[i.imageName];if(!n)continue;const a=n.displaySize;t=Math.max(t,a[0]),r=Math.max(r,a[1])}}return{maxImageWidth:t,maxImageHeight:r}}addTextSection(e,t){this.text+=e.text,this.sections.push(xu.forText(e.scale,e.fontStack||t,e.verticalAlign));const r=this.sections.length-1;for(let n=0;n<e.text.length;++n)this.sectionIndex.push(r)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void q("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(xu.forImage(t,e.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):q("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bu(t,r,n,i,a,s,o,l,c,u,d,h,p,f,m){const g=yu.fromFeature(t,a);let v;h===e.an.vertical&&g.verticalizePunctuation();const{processBidirectionalText:x,processStyledBidirectionalText:y}=Ta;if(x&&1===g.sections.length){v=[];const e=x(g.toString(),Tu(g,u,s,r,i,f));for(const t of e){const e=new yu;e.text=t,e.sections=g.sections;for(let r=0;r<t.length;r++)e.sectionIndex.push(0);v.push(e)}}else if(y){v=[];const e=y(g.text,g.sectionIndex,Tu(g,u,s,r,i,f));for(const t of e){const e=new yu;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,v.push(e)}}else v=function(e,t){const r=[],n=e.text;let i=0;for(const a of t)r.push(e.substring(i,a)),i=a;return i<n.length&&r.push(e.substring(i,n.length)),r}(g,Tu(g,u,s,r,i,f));const b=[],w={positionedLines:b,text:g.toString(),top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(e,t,r,n,i,a,s,o,l,c,u,d){let h=0,p=0,f=0,m=0;const g="right"===o?1:"left"===o?0:.5,v=su/d;let x=0;for(const w of i){w.trim();const i=w.getMaxScale(),s={positionedGlyphs:[],lineOffset:0};e.positionedLines[x]=s;const o=s.positionedGlyphs;let d=0;if(!w.length()){p+=a,++x;continue}const y=Au(n,w,v);for(let a=0;a<w.length();a++){const s=w.getSection(a),f=w.getSectionIndex(a),m=w.getCharCode(a),g=Iu(l,u,m);let x;if(s.imageName){if(e.iconsInText=!0,s.scale=s.scale*v,x=Du(s,g,i,y,n),!x)continue;d=Math.max(d,x.imageOffset)}else if(x=Ou(s,m,g,y,t,r),!x)continue;const{rect:b,metrics:_,baselineOffset:k}=x;o.push({glyph:m,imageName:s.imageName,x:h,y:p+k+-17,vertical:g,scale:s.scale,fontStack:s.fontStack,sectionIndex:f,metrics:_,rect:b}),g?(e.verticalizable=!0,h+=(s.imageName?_.advance:su)*s.scale+c):h+=_.advance*s.scale+c}0!==o.length&&(f=Math.max(h-c,f),Ru(o,0,o.length-1,g)),h=0,s.lineOffset=Math.max(d,(i-1)*su);const b=a*i+d;p+=b,m=Math.max(b,m),++x}const{horizontalAlign:y,verticalAlign:b}=Pu(s);(function(e,t,r,n,i,a,s,o,l){const c=(t-r)*i;let u=0;u=a!==s?-o*n- -17:-n*l*s+.5*s;for(const d of e)for(const e of d.positionedGlyphs)e.x+=c,e.y+=u})(e.positionedLines,g,y,b,f,m,a,p,i.length),e.top+=-b*p,e.bottom=e.top+p,e.left+=-y*f,e.right=e.left+f}(w,r,n,i,v,o,l,c,h,u,p,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&w}const wu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_u={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ku={40:!0};function Su(e,t,r,n,i,a){if(t.imageName){const e=n[t.imageName];return e?e.displaySize[0]*t.scale*su/a+i:0}{const n=r[t.fontStack],a=n&&n[e];return a?a.metrics.advance*t.scale+i:0}}function ju(e,t,r,n){const i=Math.pow(e-t,2);return n?e<t?i/2:2*i:i+Math.abs(r)*r}function Eu(e,t,r){let n=0;return 10===e&&(n-=1e4),r&&(n+=150),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function Cu(e,t,r,n,i,a){let s=null,o=ju(t,r,i,a);for(const l of n){const e=ju(t-l.x,r,i,a)+l.badness;e<=o&&(s=l,o=e)}return{index:e,x:t,priorBreak:s,badness:o}}function Nu(e){return e?Nu(e.priorBreak).concat(e.index):[]}function Tu(e,t,r,n,i,a){if(!e)return[];const s=[],o=function(e,t,r,n,i,a){let s=0;for(let o=0;o<e.length();o++){const r=e.getSection(o);s+=Su(e.getCharCode(o),r,n,i,t,a)}return s/Math.max(1,Math.ceil(s/r))}(e,t,r,n,i,a),l=e.text.indexOf("\u200b")>=0;let c=0;for(let d=0;d<e.length();d++){const r=e.getSection(d),h=e.getCharCode(d);if(wu[h]||(c+=Su(h,r,n,i,t,a)),d<e.length()-1){const t=!((u=h)<11904)&&(!!ga["CJK Compatibility Forms"](u)||!!ga["CJK Compatibility"](u)||!!ga["CJK Strokes"](u)||!!ga["CJK Symbols and Punctuation"](u)||!!ga["Enclosed CJK Letters and Months"](u)||!!ga["Halfwidth and Fullwidth Forms"](u)||!!ga["Ideographic Description Characters"](u)||!!ga["Vertical Forms"](u)||_a.test(String.fromCodePoint(u)));(_u[h]||t||r.imageName||d!==e.length()-2&&ku[e.getCharCode(d+1)])&&s.push(Cu(d+1,c,o,s,Eu(h,e.getCharCode(d+1),t&&l),!1))}}var u;return Nu(Cu(e.length(),c,o,s,0,!0))}function Pu(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Au(e,t,r){const n=t.getMaxScale()*su,{maxImageWidth:i,maxImageHeight:a}=t.getMaxImageSize(e),s=Math.max(n,a*r);return{verticalLineContentWidth:Math.max(n,i*r),horizontalLineContentHeight:s}}function Mu(e){switch(e){case"top":return 0;case"center":return.5;default:return 1}}function Iu(t,r,n){return!(t===e.an.horizontal||!r&&!ka(n)||r&&(wu[n]||(i=n,/\p{sc=Arab}/u.test(String.fromCodePoint(i)))));var i}function Ou(e,t,r,n,i,a){const s=a[e.fontStack],o=function(e,t,r,n){if(e&&e.rect)return e;const i=t[r.fontStack],a=i&&i[n];return a?{rect:null,metrics:a.metrics}:null}(s&&s[t],i,e,t);if(null===o)return null;let l;if(r)l=n.verticalLineContentWidth-e.scale*su;else{const t=Mu(e.verticalAlign);l=(n.horizontalLineContentHeight-e.scale*su)*t}return{rect:o.rect,metrics:o.metrics,baselineOffset:l}}function Du(e,t,r,n,i){const a=i[e.imageName];if(!a)return null;const s=a.paddedRect,o=a.displaySize,l={width:o[0],height:o[1],left:1,top:-3,advance:t?o[1]:o[0]};let c;if(t)c=n.verticalLineContentWidth-o[1]*e.scale;else{const t=Mu(e.verticalAlign);c=(n.horizontalLineContentHeight-o[1]*e.scale)*t}return{rect:s,metrics:l,baselineOffset:c,imageOffset:(t?o[0]:o[1])*e.scale-su*r}}function Ru(e,t,r,n){if(0===n)return;const i=e[r],a=(e[r].x+i.metrics.advance*i.scale)*n;for(let s=t;s<=r;s++)e[s].x-=a}function Lu(e,t,r){const{horizontalAlign:n,verticalAlign:i}=Pu(r),a=t[0]-e.displaySize[0]*n,s=t[1]-e.displaySize[1]*i;return{image:e,top:s,bottom:s+e.displaySize[1],left:a,right:a+e.displaySize[0]}}function Fu(e){var t,r;let n=e.left,i=e.top,a=e.right-n,s=e.bottom-i;const o=null!==(t=e.image.textFitWidth)&&void 0!==t?t:"stretchOrShrink",l=null!==(r=e.image.textFitHeight)&&void 0!==r?r:"stretchOrShrink",c=(e.image.content[2]-e.image.content[0])/(e.image.content[3]-e.image.content[1]);if("proportional"===l){if("stretchOnly"===o&&a/s<c||"proportional"===o){const e=Math.ceil(s*c);n*=e/a,a=e}}else if("proportional"===o&&"stretchOnly"===l&&0!==c&&a/s>c){const e=Math.ceil(a/c);i*=e/s,s=e}return{x1:n,y1:i,x2:n+a,y2:i+s}}function $u(e,t,r,n,i,a){const s=e.image;let o;if(s.content){const e=s.content,t=s.pixelRatio||1;o=[e[0]/t,e[1]/t,s.displaySize[0]-e[2]/t,s.displaySize[1]-e[3]/t]}const l=t.left*a,c=t.right*a;let u,d,h,p;"width"===r||"both"===r?(p=i[0]+l-n[3],d=i[0]+c+n[1]):(p=i[0]+(l+c-s.displaySize[0])/2,d=p+s.displaySize[0]);const f=t.top*a,m=t.bottom*a;return"height"===r||"both"===r?(u=i[1]+f-n[0],h=i[1]+m+n[2]):(u=i[1]+(f+m-s.displaySize[1])/2,h=u+s.displaySize[1]),{image:s,top:u,right:d,bottom:h,left:p,collisionPadding:o}}const Bu=128,zu=32640;function Uu(e,t){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new Pa(e+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:n}=r;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let a=i;for(;a<t.length&&t[a]<e+1;)a++;a=Math.min(t.length-1,a);const s=t[i],o=t[a];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:o,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:o,minSize:r.evaluate(new Pa(s)),maxSize:r.evaluate(new Pa(o)),interpolationType:n}}}function Vu(e,t,r){let n="never";const i=e.get(t);return i?n=i:e.get(r)&&(n="always"),n}const Hu=_c.VectorTileFeature.types,Gu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wu(e,t,r,n,i,a,s,o,l,c,u,d,h){const p=o?Math.min(zu,Math.round(o[0])):0,f=o?Math.min(zu,Math.round(o[1])):0;e.emplaceBack(t,r,Math.round(32*n),Math.round(32*i),a,s,(p<<1)+(l?1:0),f,16*c,16*u,256*d,256*h)}function qu(e,t,r){e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r)}function Ku(e){for(const t of e.sections)if(Na(t.text))return!0;return!1}class Zu{constructor(e){this.layoutVertexArray=new Bs,this.indexArray=new Gs,this.programConfigurations=e,this.segments=new Zs,this.dynamicLayoutVertexArray=new zs,this.opacityVertexArray=new Us,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ss}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yc.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Xc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Gu,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ca("SymbolBuffers",Zu);class Yu{constructor(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new Zs,this.collisionVertexArray=new Hs}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Qc.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ca("CollisionBuffers",Yu);class Xu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Uu(this.zoom,r["text-size"]),this.iconSizeData=Uu(this.zoom,r["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),a=n.get("symbol-z-order");this.canOverlap="never"!==Vu(n,"text-overlap","text-allow-overlap")||"never"!==Vu(n,"icon-overlap","icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((t=>e.an[t]))),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=t.sourceID}createArrays(){this.text=new Zu(new ko(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Zu(new ko(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new Cs,this.lineVertexArray=new Ns,this.symbolInstances=new Es,this.textAnchorOffsets=new Ps}calculateGlyphDependencies(e,t,r,n,i){for(let a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,(r||n)&&i){const r=ru[e.charAt(a)];r&&(t[r.charCodeAt(0)]=!0)}}populate(t,r,n){const i=this.layers[0],a=i.layout,s=a.get("text-font"),o=a.get("text-field"),l=a.get("icon-image"),c=("constant"!==o.value.kind||o.value.value instanceof It&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,d=a.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const h=r.iconDependencies,p=r.glyphDependencies,f=r.availableImages,m=new Pa(this.zoom,{globalState:this.globalState});for(const{feature:g,id:v,index:x,sourceLayerIndex:y}of t){const t=i._featureFilter.needGeometry,r=To(g,t);if(!i._featureFilter.filter(m,r,n))continue;let o,l;if(t||(r.geometry=No(g)),c){const e=i.getValueAndResolveTokens("text-field",r,n,f),t=It.factory(e),a=this.hasRTLText=this.hasRTLText||Ku(t);(!a||"unavailable"===Ta.getRTLTextPluginStatus()||a&&Ta.isParsed())&&(o=tu(t,i,r))}if(u){const e=i.getValueAndResolveTokens("icon-image",r,n,f);l=e instanceof Bt?e:Bt.fromString(e)}if(!o&&!l)continue;const b=this.sortFeaturesByKey?d.evaluate(r,{},n):void 0;if(this.features.push({id:v,text:o,icon:l,index:x,sourceLayerIndex:y,geometry:r.geometry,properties:g.properties,type:Hu[g.type],sortKey:b}),l&&(h[l.name]=!0),o){const t=s.evaluate(r,{},n).join(","),i="viewport"!==a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.an.vertical)>=0;for(const e of o.sections)if(e.image)h[e.image.name]=!0;else{const r=va(o.toString()),n=e.fontStack||t,a=p[n]=p[n]||{};this.calculateGlyphDependencies(e.text,a,i,this.allowVerticalPlacement,r)}}}"line"===a.get("symbol-placement")&&(this.features=function(e){const t={},r={},n=[];let i=0;function a(t){n.push(e[t]),i++}function s(e,t,i){const a=r[e];return delete r[e],r[t]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(i[0]),a}function o(e,r,i){const a=t[r];return delete t[r],t[e]=a,n[a].geometry[0].shift(),n[a].geometry[0]=i[0].concat(n[a].geometry[0]),a}function l(e,t,r){const n=r?t[0][t[0].length-1]:t[0][0];return`${e}:${n.x}:${n.y}`}for(let c=0;c<e.length;c++){const u=e[c],d=u.geometry,h=u.text?u.text.toString():null;if(!h){a(c);continue}const p=l(h,d),f=l(h,d,!0);if(p in r&&f in t&&r[p]!==t[f]){const e=o(p,f,d),i=s(p,f,n[e].geometry);delete t[p],delete r[f],r[l(h,n[i].geometry,!0)]=i,n[e].geometry=null}else p in r?s(p,f,d):f in t?o(p,f,d):(a(c),t[p]=i-1,r[f]=i-1)}return n.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const r=this.lineVertexArray.length;if(void 0!==e.segment){let r=e.dist(t[e.segment+1]),n=e.dist(t[e.segment]);const i={};for(let a=e.segment+1;a<t.length;a++)i[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:r},a<t.length-1&&(r+=t[a+1].dist(t[a]));for(let a=e.segment||0;a>=0;a--)i[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:n},a>0&&(n+=t[a-1].dist(t[a]));for(let e=0;e<t.length;e++){const t=i[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(t,r,n,i,a,s,o,l,c,u,d,h){const p=t.indexArray,f=t.layoutVertexArray,m=t.segments.prepareSegment(4*r.length,f,p,this.canOverlap?s.sortKey:void 0),g=this.glyphOffsetArray.length,v=m.vertexLength,x=this.allowVerticalPlacement&&o===e.an.vertical?Math.PI/2:0,y=s.text&&s.text.sections;for(let e=0;e<r.length;e++){const{tl:i,tr:a,bl:o,br:c,tex:u,pixelOffsetTL:d,pixelOffsetBR:g,minFontScaleX:v,minFontScaleY:b,glyphOffset:w,isSDF:_,sectionIndex:k}=r[e],S=m.vertexLength,j=w[1];Wu(f,l.x,l.y,i.x,j+i.y,u.x,u.y,n,_,d.x,d.y,v,b),Wu(f,l.x,l.y,a.x,j+a.y,u.x+u.w,u.y,n,_,g.x,d.y,v,b),Wu(f,l.x,l.y,o.x,j+o.y,u.x,u.y+u.h,n,_,d.x,g.y,v,b),Wu(f,l.x,l.y,c.x,j+c.y,u.x+u.w,u.y+u.h,n,_,g.x,g.y,v,b),qu(t.dynamicLayoutVertexArray,l,x),p.emplaceBack(S,S+2,S+1),p.emplaceBack(S+1,S+2,S+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(w[0]),e!==r.length-1&&k===r[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,s,s.index,{},h,y&&y[k])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,v,c,u,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],o,0,!1,0,d)}_addCollisionDebugVertex(e,t,r,n,i,a){return t.emplaceBack(0,0),e.emplaceBack(r.x,r.y,n,i,Math.round(a.x),Math.round(a.y))}addCollisionDebugVertices(e,t,r,n,i,a,s){const o=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),c=o.vertexLength,u=i.layoutVertexArray,d=i.collisionVertexArray,h=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(u,d,a,h,p,new l(e,t)),this._addCollisionDebugVertex(u,d,a,h,p,new l(r,t)),this._addCollisionDebugVertex(u,d,a,h,p,new l(r,n)),this._addCollisionDebugVertex(u,d,a,h,p,new l(e,n)),o.vertexLength+=4;const f=i.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),o.primitiveLength+=4}addDebugCollisionBoxes(e,t,r,n){for(let i=e;i<t;i++){const e=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,n?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,r)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yu(Vs,Jc.members,Ws),this.iconCollisionBox=new Yu(Vs,Jc.members,Ws);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,r,n,i,a,s,o,l){const c={};for(let u=t;u<r;u++){const t=e.get(u);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let u=n;u<i;u++){const t=e.get(u);c.verticalTextBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalTextFeatureIndex=t.featureIndex;break}for(let u=a;u<s;u++){const t=e.get(u);c.iconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.iconFeatureIndex=t.featureIndex;break}for(let u=o;u<l;u++){const t=e.get(u);c.verticalIconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalIconFeatureIndex=t.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const r=e.placedSymbolArray.get(t),n=r.vertexStartIndex+4*r.numGlyphs;for(let i=r.vertexStartIndex;i<n;i+=4)e.indexArray.emplaceBack(i,i+2,i+1),e.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),r=Math.cos(e),n=[],i=[],a=[];for(let s=0;s<this.symbolInstances.length;++s){a.push(s);const e=this.symbolInstances.get(s);n.push(0|Math.round(t*e.anchorX+r*e.anchorY)),i.push(e.featureIndex)}return a.sort(((e,t)=>n[e]-n[t]||i[t]-i[e])),a}addToSortKeyRanges(e,t){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,r)=>{e>=0&&r.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Qu,Ju;ca("SymbolBucket",Xu,{omit:["layers","collisionBoxArray","features","compareText"]}),Xu.MAX_GLYPHS=65535,Xu.addDynamicAttributes=qu;var ed={get paint(){return Ju=Ju||new Ha({"icon-opacity":new Ba(we.paint_symbol["icon-opacity"]),"icon-color":new Ba(we.paint_symbol["icon-color"]),"icon-halo-color":new Ba(we.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ba(we.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ba(we.paint_symbol["icon-halo-blur"]),"icon-translate":new $a(we.paint_symbol["icon-translate"]),"icon-translate-anchor":new $a(we.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ba(we.paint_symbol["text-opacity"]),"text-color":new Ba(we.paint_symbol["text-color"],{runtimeType:ze,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Ba(we.paint_symbol["text-halo-color"]),"text-halo-width":new Ba(we.paint_symbol["text-halo-width"]),"text-halo-blur":new Ba(we.paint_symbol["text-halo-blur"]),"text-translate":new $a(we.paint_symbol["text-translate"]),"text-translate-anchor":new $a(we.paint_symbol["text-translate-anchor"])})},get layout(){return Qu=Qu||new Ha({"symbol-placement":new $a(we.layout_symbol["symbol-placement"]),"symbol-spacing":new $a(we.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new $a(we.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ba(we.layout_symbol["symbol-sort-key"]),"symbol-z-order":new $a(we.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new $a(we.layout_symbol["icon-allow-overlap"]),"icon-overlap":new $a(we.layout_symbol["icon-overlap"]),"icon-ignore-placement":new $a(we.layout_symbol["icon-ignore-placement"]),"icon-optional":new $a(we.layout_symbol["icon-optional"]),"icon-rotation-alignment":new $a(we.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ba(we.layout_symbol["icon-size"]),"icon-text-fit":new $a(we.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new $a(we.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ba(we.layout_symbol["icon-image"]),"icon-rotate":new Ba(we.layout_symbol["icon-rotate"]),"icon-padding":new Ba(we.layout_symbol["icon-padding"]),"icon-keep-upright":new $a(we.layout_symbol["icon-keep-upright"]),"icon-offset":new Ba(we.layout_symbol["icon-offset"]),"icon-anchor":new Ba(we.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new $a(we.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new $a(we.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new $a(we.layout_symbol["text-rotation-alignment"]),"text-field":new Ba(we.layout_symbol["text-field"]),"text-font":new Ba(we.layout_symbol["text-font"]),"text-size":new Ba(we.layout_symbol["text-size"]),"text-max-width":new Ba(we.layout_symbol["text-max-width"]),"text-line-height":new $a(we.layout_symbol["text-line-height"]),"text-letter-spacing":new Ba(we.layout_symbol["text-letter-spacing"]),"text-justify":new Ba(we.layout_symbol["text-justify"]),"text-radial-offset":new Ba(we.layout_symbol["text-radial-offset"]),"text-variable-anchor":new $a(we.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ba(we.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ba(we.layout_symbol["text-anchor"]),"text-max-angle":new $a(we.layout_symbol["text-max-angle"]),"text-writing-mode":new $a(we.layout_symbol["text-writing-mode"]),"text-rotate":new Ba(we.layout_symbol["text-rotate"]),"text-padding":new $a(we.layout_symbol["text-padding"]),"text-keep-upright":new $a(we.layout_symbol["text-keep-upright"]),"text-transform":new Ba(we.layout_symbol["text-transform"]),"text-offset":new Ba(we.layout_symbol["text-offset"]),"text-allow-overlap":new $a(we.layout_symbol["text-allow-overlap"]),"text-overlap":new $a(we.layout_symbol["text-overlap"]),"text-ignore-placement":new $a(we.layout_symbol["text-ignore-placement"]),"text-optional":new $a(we.layout_symbol["text-optional"])})}};class td{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:Le,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ca("FormatSectionOverride",td,{omit:["defaultValue"]});class rd extends Wa{constructor(e){super(e,ed)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const r of e)t.indexOf(r)<0&&t.push(r);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,r,n){const i=this.layout.get(e).evaluate(t,{},r,n),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||ii(a.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,r)=>e&&r in e?String(e[r]):""))}(t.properties,i)}createBucket(e){return new Xu(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of ed.paint.overridableProperties){if(!rd.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),r=new td(t),n=new ni(r,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new si("source",n):new oi("composite",n,t.value.zoomStops),this.paint._values[e]=new La(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&rd.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const r=e.get("text-field"),n=ed.paint.properties[t];let i=!1;const a=e=>{for(const t of e)if(n.overrides&&n.overrides.hasOverride(t))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof It)a(r.value.value.sections);else if("source"===r.value.kind){const e=t=>{i||(t instanceof Wt&&Ht(t.value)===We?a(t.value.sections):t instanceof Pr?a(t.sections):t.eachChild(e))},t=r.value;t._styleExpression&&e(t._styleExpression.expression)}return i}}let nd;var id={get paint(){return nd=nd||new Ha({"background-color":new $a(we.paint_background["background-color"]),"background-pattern":new Ua(we.paint_background["background-pattern"]),"background-opacity":new $a(we.paint_background["background-opacity"])})}};class ad extends Wa{constructor(e){super(e,id)}}let sd;var od={get paint(){return sd=sd||new Ha({"raster-opacity":new $a(we.paint_raster["raster-opacity"]),"raster-hue-rotate":new $a(we.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new $a(we.paint_raster["raster-brightness-min"]),"raster-brightness-max":new $a(we.paint_raster["raster-brightness-max"]),"raster-saturation":new $a(we.paint_raster["raster-saturation"]),"raster-contrast":new $a(we.paint_raster["raster-contrast"]),"raster-resampling":new $a(we.paint_raster["raster-resampling"]),"raster-fade-duration":new $a(we.paint_raster["raster-fade-duration"])})}};class ld extends Wa{constructor(e){super(e,od)}}class cd extends Wa{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class ud{constructor(e){this._methodToThrottle=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const dd={once:!0},hd=6371008.8;class pd{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new pd(B(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,r=this.lat*t,n=e.lat*t,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((e.lng-this.lng)*t);return hd*Math.acos(Math.min(i,1))}static convert(e){if(e instanceof pd)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new pd(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new pd(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const fd=2*Math.PI*hd;function md(e){return fd*Math.cos(e*Math.PI/180)}function gd(e){return(180+e)/360}function vd(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function xd(e,t){return e/md(t)}function yd(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function bd(e,t){return e*md(yd(t))}class wd{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+e,this.y=+t,this.z=+r}static fromLngLat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=pd.convert(e);return new wd(gd(r.lng),vd(r.lat),xd(t,r.lat))}toLngLat(){return new pd(360*this.x-180,yd(this.y))}toAltitude(){return bd(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/fd*(e=yd(this.y),1/Math.cos(e*Math.PI/180));var e}}function _d(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}class kd{constructor(e,t,r){if(!function(e,t,r){return!(e<0||e>25||r<0||r>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))}(e,t,r))throw new Error(`x=${t}, y=${r}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=t,this.y=r,this.key=Ed(0,e,e,t,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,r){const n=(a=this.y,s=this.z,o=_d(256*(i=this.x),256*(a=Math.pow(2,s)-a-1),s),l=_d(256*(i+1),256*(a+1),s),o[0]+","+o[1]+","+l[0]+","+l[1]);var i,a,s,o,l;const c=function(e,t,r){let n,i="";for(let a=e;a>0;a--)n=1<<a-1,i+=(t&n?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===r?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,n)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new l((e.x*t-this.x)*M,(e.y*t-this.y)*M)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Sd{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Ed(e,t.z,t.z,t.x,t.y)}}class jd{constructor(e,t,r,n,i){if(this.terrainRttPosMatrix32f=null,e<r)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${r}`);this.overscaledZ=e,this.wrap=t,this.canonical=new kd(r,+n,+i),this.key=Ed(t,e,r,n,i)}clone(){return new jd(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const t=this.canonical.z-e;return e>this.canonical.z?new jd(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jd(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-e;return e>this.canonical.z?Ed(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Ed(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new jd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new jd(t,this.wrap,t,r,n),new jd(t,this.wrap,t,r+1,n),new jd(t,this.wrap,t,r,n+1),new jd(t,this.wrap,t,r+1,n+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new jd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new jd(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Sd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new wd(e.x-this.wrap,e.y))}}function Ed(e,t,r,n,i){(e*=2)<0&&(e=-1*e-1);const a=1<<r;return(a*a*e+a*i+n).toString(36)+r.toString(36)+t.toString(36)}ca("CanonicalTileID",kd),ca("OverscaledTileID",jd,{omit:["terrainRttPosMatrix32f"]});class Cd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){const t=new Cd;return t.extend(e(new l(this.minX,this.minY))),t.extend(e(new l(this.maxX,this.minY))),t.extend(e(new l(this.minX,this.maxY))),t.extend(e(new l(this.maxX,this.maxY))),t}static fromPoints(e){const t=new Cd;for(const r of e)t.extend(r);return t}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class Nd{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Td{constructor(e,t,r,n,i){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=r,e._y=n,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class Pd{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new oa(M,16,0),this.grid3D=new oa(M,16,0),this.featureIndexArray=new Ms,this.promoteId=t}insert(e,t,r,n,i,a){const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);const o=a?this.grid3D:this.grid;for(let l=0;l<t.length;l++){const e=t[l],r=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const n=e[t];r[0]=Math.min(r[0],n.x),r[1]=Math.min(r[1],n.y),r[2]=Math.max(r[2],n.x),r[3]=Math.max(r[3],n.y)}r[0]<M&&r[1]<M&&r[2]>=0&&r[3]>=0&&o.insert(s,r[0],r[1],r[2],r[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new _c.VectorTile(new du(this.rawTileData)).layers,this.sourceLayerCoder=new Nd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,r,n){this.loadVTLayers();const i=e.params,a=M/e.tileSize/e.scale,s=fi(i.filter),o=e.queryGeometry,c=e.queryPadding*a,u=Cd.fromPoints(o),d=this.grid.query(u.minX-c,u.minY-c,u.maxX+c,u.maxY+c),h=Cd.fromPoints(e.cameraQueryGeometry).expandBy(c),p=this.grid3D.query(h.minX,h.minY,h.maxX,h.maxY,((t,r,n,i)=>function(e,t,r,n,i){for(const s of e)if(t<=s.x&&r<=s.y&&n>=s.x&&i>=s.y)return!0;const a=[new l(t,r),new l(t,i),new l(n,i),new l(n,r)];if(e.length>2)for(const s of a)if(Uo(e,s))return!0;for(let s=0;s<e.length-1;s++)if(Vo(e[s],e[s+1],a))return!0;return!1}(e.cameraQueryGeometry,t-c,r-c,n+c,i+c)));for(const l of p)d.push(l);d.sort(Md);const f={};let m;for(let l=0;l<d.length;l++){const c=d[l];if(c===m)continue;m=c;const u=this.featureIndexArray.get(c);let h=null;this.loadMatchingFeature(f,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,s,i.layers,i.availableImages,t,r,n,((t,r,n)=>(h||(h=No(t)),r.queryIntersectsFeature({queryGeometry:o,feature:t,featureState:n,geometry:h,zoom:this.z,transform:e.transform,pixelsToTileUnits:a,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation}))))}return f}loadMatchingFeature(e,t,r,n,i,a,s,o,l,c,u){const d=this.bucketLayerIDs[t];if(a&&!d.some((e=>a.has(e))))return;const h=this.sourceLayerCoder.decode(r),p=this.vtLayers[h].feature(n);if(i.needGeometry){const e=To(p,!0);if(!i.filter(new Pa(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!i.filter(new Pa(this.tileID.overscaledZ),p))return;const f=this.getId(p,h);for(let m=0;m<d.length;m++){const t=d[m];if(a&&!a.has(t))continue;const r=o[t];if(!r)continue;let i={};f&&c&&(i=c.getState(r.sourceLayer||"_geojsonTileLayer",f));const h=z({},l[t]);h.paint=Ad(h.paint,r.paint,p,i,s),h.layout=Ad(h.layout,r.layout,p,i,s);const g=!u||u(p,r,i);if(!g)continue;const v=new Td(p,this.z,this.x,this.y,f);v.layer=h;let x=e[t];void 0===x&&(x=e[t]=[]),x.push({featureIndex:n,feature:v,intersectionZ:g})}}lookupSymbolFeatures(e,t,r,n,i,a,s,o){const l={};this.loadVTLayers();const c=fi(i);for(const u of e)this.loadMatchingFeature(l,r,n,u,c,a,s,o,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const r of t)if(e===r)return!0;return!1}getId(e,t){var r;let n=e.id;return this.promoteId&&(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof n&&(n=Number(n)),void 0===n&&(null===(r=e.properties)||void 0===r?void 0:r.cluster)&&this.promoteId&&(n=Number(e.properties.cluster_id))),n}}function Ad(e,t,r,n,i){return V(e,((e,a)=>{const s=t instanceof Fa?t.get(a):null;return s&&s.evaluate?s.evaluate(r,n,i):s}))}function Md(e,t){return t-e}function Id(e,t,r,n,i){const a=[];for(let s=0;s<e.length;s++){const o=e[s];let c;for(let e=0;e<o.length-1;e++){let s=o[e],u=o[e+1];s.x<t&&u.x<t||(s.x<t?s=new l(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<t&&(u=new l(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<r&&u.y<r||(s.y<r?s=new l(s.x+(r-s.y)/(u.y-s.y)*(u.x-s.x),r)._round():u.y<r&&(u=new l(s.x+(r-s.y)/(u.y-s.y)*(u.x-s.x),r)._round()),s.x>=n&&u.x>=n||(s.x>=n?s=new l(n,s.y+(n-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=n&&(u=new l(n,s.y+(n-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=i&&u.y>=i||(s.y>=i?s=new l(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round():u.y>=i&&(u=new l(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}ca("FeatureIndex",Pd,{omit:["rawTileData","sourceLayerCoder"]});class Od extends l{constructor(e,t,r,n){super(e,t),this.angle=r,void 0!==n&&(this.segment=n)}clone(){return new Od(this.x,this.y,this.angle,this.segment)}}function Dd(e,t,r,n,i){if(void 0===t.segment||0===r)return!0;let a=t,s=t.segment+1,o=0;for(;o>-r/2;){if(s--,s<0)return!1;o-=e[s].dist(a),a=e[s]}o+=e[s].dist(e[s+1]),s++;const l=[];let c=0;for(;o<r/2;){const t=e[s],r=e[s+1];if(!r)return!1;let a=e[s-1].angleTo(t)-t.angleTo(r);for(a=Math.abs((a+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:o,angleDelta:a}),c+=a;o-l[0].distance>n;)c-=l.shift().angleDelta;if(c>i)return!1;s++,o+=t.dist(r)}return!0}function Rd(e){let t=0;for(let r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function Ld(e,t,r){return e?.6*t*r:0}function Fd(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function $d(e,t,r,n,i,a){const s=Ld(r,i,a),o=Fd(r,n)*a;let l=0;const c=Rd(e)/2;for(let u=0;u<e.length-1;u++){const r=e[u],n=e[u+1],i=r.dist(n);if(l+i>c){const a=(c-l)/i,d=vr.number(r.x,n.x,a),h=vr.number(r.y,n.y,a),p=new Od(d,h,n.angleTo(r),u);return p._round(),!s||Dd(e,p,o,s,t)?p:void 0}l+=i}}function Bd(e,t,r,n,i,a,s,o,l){const c=Ld(n,a,s),u=Fd(n,i),d=u*s,h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-d<t/4&&(t=d+t/4),zd(e,h?t/2*o%t:(u/2+2*a)*s*o%t,t,c,r,d,h,!1,l)}function zd(e,t,r,n,i,a,s,o,l){const c=a/2,u=Rd(e);let d=0,h=t-r,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],s=e[f+1],o=t.dist(s),m=s.angleTo(t);for(;h+r<d+o;){h+=r;const g=(h-d)/o,v=vr.number(t.x,s.x,g),x=vr.number(t.y,s.y,g);if(v>=0&&v<l&&x>=0&&x<l&&h-c>=0&&h+c<=u){const t=new Od(v,x,m,f);t._round(),n&&!Dd(e,t,a,n,i)||p.push(t)}}d+=o}return o||p.length||s||(p=zd(e,d/2,r,n,i,a,s,!0,l)),p}function Ud(e,t,r,n){const i=[],a=e.image,s=a.pixelRatio,o=a.paddedRect.w-2,c=a.paddedRect.h-2;let u={x1:e.left,y1:e.top,x2:e.right,y2:e.bottom};const d=a.stretchX||[[0,o]],h=a.stretchY||[[0,c]],p=(e,t)=>e+t[1]-t[0],f=d.reduce(p,0),m=h.reduce(p,0),g=o-f,v=c-m;let x=0,y=f,b=0,w=m,_=0,k=g,S=0,j=v;if(a.content&&n){const t=a.content,r=t[2]-t[0],n=t[3]-t[1];(a.textFitWidth||a.textFitHeight)&&(u=Fu(e)),x=Vd(d,0,t[0]),b=Vd(h,0,t[1]),y=Vd(d,t[0],t[2]),w=Vd(h,t[1],t[3]),_=t[0]-x,S=t[1]-b,k=r-y,j=n-w}const E=u.x1,C=u.y1,N=u.x2-E,T=u.y2-C,P=(e,n,i,o)=>{const c=Gd(e.stretch-x,y,N,E),u=Wd(e.fixed-_,k,e.stretch,f),d=Gd(n.stretch-b,w,T,C),h=Wd(n.fixed-S,j,n.stretch,m),p=Gd(i.stretch-x,y,N,E),g=Wd(i.fixed-_,k,i.stretch,f),v=Gd(o.stretch-b,w,T,C),P=Wd(o.fixed-S,j,o.stretch,m),A=new l(c,d),M=new l(p,d),I=new l(p,v),O=new l(c,v),D=new l(u/s,h/s),R=new l(g/s,P/s),L=t*Math.PI/180;if(L){const e=Math.sin(L),t=Math.cos(L),r=[t,-e,e,t];A._matMult(r),M._matMult(r),O._matMult(r),I._matMult(r)}const F=e.stretch+e.fixed,$=n.stretch+n.fixed;return{tl:A,tr:M,bl:O,br:I,tex:{x:a.paddedRect.x+1+F,y:a.paddedRect.y+1+$,w:i.stretch+i.fixed-F,h:o.stretch+o.fixed-$},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:R,minFontScaleX:k/s/N,minFontScaleY:j/s/T,isSDF:r}};if(n&&(a.stretchX||a.stretchY)){const e=Hd(d,g,f),t=Hd(h,v,m);for(let r=0;r<e.length-1;r++){const n=e[r],a=e[r+1];for(let e=0;e<t.length-1;e++)i.push(P(n,t[e],a,t[e+1]))}}else i.push(P({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:o+1},{fixed:0,stretch:c+1}));return i}function Vd(e,t,r){let n=0;for(const i of e)n+=Math.max(t,Math.min(r,i[1]))-Math.max(t,Math.min(r,i[0]));return n}function Hd(e,t,r){const n=[{fixed:-1,stretch:0}];for(const[i,a]of e){const e=n[n.length-1];n.push({fixed:i-e.stretch,stretch:e.stretch}),n.push({fixed:i-e.stretch,stretch:e.stretch+(a-i)})}return n.push({fixed:t+1,stretch:r}),n}function Gd(e,t,r,n){return e/t*r+n}function Wd(e,t,r,n){return e-t*r/n}ca("Anchor",Od);class qd{constructor(e,t,r,n,i,a,s,o,c,u){var d;if(this.boxStartIndex=e.length,c){let e=a.top,t=a.bottom;const r=a.collisionPadding;r&&(e-=r[1],t+=r[3]);let n=t-e;n>0&&(n=Math.max(10,n),this.circleDiameter=n)}else{const c=(null===(d=a.image)||void 0===d?void 0:d.content)&&(a.image.textFitWidth||a.image.textFitHeight)?Fu(a):{x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};c.y1=c.y1*s-o[0],c.y2=c.y2*s+o[2],c.x1=c.x1*s-o[3],c.x2=c.x2*s+o[1];const h=a.collisionPadding;if(h&&(c.x1-=h[0]*s,c.y1-=h[1]*s,c.x2+=h[2]*s,c.y2+=h[3]*s),u){const e=new l(c.x1,c.y1),t=new l(c.x2,c.y1),r=new l(c.x1,c.y2),n=new l(c.x2,c.y2),i=u*Math.PI/180;e._rotate(i),t._rotate(i),r._rotate(i),n._rotate(i),c.x1=Math.min(e.x,t.x,r.x,n.x),c.x2=Math.max(e.x,t.x,r.x,n.x),c.y1=Math.min(e.y,t.y,r.y,n.y),c.y2=Math.max(e.y,t.y,r.y,n.y)}e.emplaceBack(t.x,t.y,c.x1,c.y1,c.x2,c.y2,r,n,i)}this.boxEndIndex=e.length}}class Kd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const i=e-1>>1,a=t[i];if(r(n,a)>=0)break;t[e]=a,e=i}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,i=t[e];for(;e<n;){let n=1+(e<<1);const a=n+1;if(a<this.length&&r(t[a],t[n])<0&&(n=a),r(t[n],i)>=0)break;t[e]=t[n],e=n}t[e]=i}}function Zd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=Cd.fromPoints(e[0]),i=Math.min(n.width(),n.height());let a=i/2;const s=new Kd([],Yd),{minX:o,minY:c,maxX:u,maxY:d}=n;if(0===i)return new l(o,c);for(let l=o;l<u;l+=i)for(let t=c;t<d;t+=i)s.push(new Xd(l+a,t+a,a,e));let h=function(e){let t=0,r=0,n=0;const i=e[0];for(let a=0,s=i.length,o=s-1;a<s;o=a++){const e=i[a],s=i[o],l=e.x*s.y-s.x*e.y;r+=(e.x+s.x)*l,n+=(e.y+s.y)*l,t+=3*l}return new Xd(r/t,n/t,0,e)}(e),p=s.length;for(;s.length;){const n=s.pop();(n.d>h.d||!h.d)&&(h=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,p)),n.max-h.d<=t||(a=n.h/2,s.push(new Xd(n.p.x-a,n.p.y-a,a,e)),s.push(new Xd(n.p.x+a,n.p.y-a,a,e)),s.push(new Xd(n.p.x-a,n.p.y+a,a,e)),s.push(new Xd(n.p.x+a,n.p.y+a,a,e)),p+=4)}return r&&(console.log(`num probes: ${p}`),console.log(`best distance: ${h.d}`)),h.p}function Yd(e,t){return t.max-e.max}function Xd(e,t,r,n){this.p=new l(e,t),this.h=r,this.d=function(e,t){let r=!1,n=1/0;for(let i=0;i<t.length;i++){const a=t[i];for(let t=0,i=a.length,s=i-1;t<i;s=t++){const i=a[t],o=a[s];i.y>e.y!=o.y>e.y&&e.x<(o.x-i.x)*(e.y-i.y)/(o.y-i.y)+i.x&&(r=!r),n=Math.min(n,Bo(e,i,o))}}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}var Qd;e.aD=void 0,(Qd=e.aD||(e.aD={}))[Qd.center=1]="center",Qd[Qd.left=2]="left",Qd[Qd.right=3]="right",Qd[Qd.top=4]="top",Qd[Qd.bottom=5]="bottom",Qd[Qd["top-left"]=6]="top-left",Qd[Qd["top-right"]=7]="top-right",Qd[Qd["bottom-left"]=8]="bottom-left",Qd[Qd["bottom-right"]=9]="bottom-right";const Jd=Number.POSITIVE_INFINITY;function eh(e,t){return t[1]!==Jd?function(e,t,r){let n=0,i=0;switch(t=Math.abs(t),r=Math.abs(r),e){case"top-right":case"top-left":case"top":i=r-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-r}switch(e){case"top-right":case"bottom-right":case"right":n=-t;break;case"top-left":case"bottom-left":case"left":n=t}return[n,i]}(e,t[0],t[1]):function(e,t){let r=0,n=0;t<0&&(t=0);const i=t/Math.SQRT2;switch(e){case"top-right":case"top-left":n=i-7;break;case"bottom-right":case"bottom-left":n=7-i;break;case"bottom":n=7-t;break;case"top":n=t-7}switch(e){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=t;break;case"right":r=-t}return[r,n]}(e,t[0])}function th(e,t,r){var n;const i=e.layout,a=null===(n=i.get("text-variable-anchor-offset"))||void 0===n?void 0:n.evaluate(t,{},r);if(a){const e=a.values,t=[];for(let r=0;r<e.length;r+=2){const n=t[r]=e[r],i=e[r+1].map((e=>e*su));n.startsWith("top")?i[1]-=7:n.startsWith("bottom")&&(i[1]+=7),t[r+1]=i}return new $t(t)}const s=i.get("text-variable-anchor");if(s){let n;n=void 0!==e._unevaluatedLayout.getValue("text-radial-offset")?[i.get("text-radial-offset").evaluate(t,{},r)*su,Jd]:i.get("text-offset").evaluate(t,{},r).map((e=>e*su));const a=[];for(const e of s)a.push(e,eh(e,n));return new $t(a)}return null}function rh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nh(t,r,n,i,a,s,o,l,c,u,d,h){let p=s.textMaxSize.evaluate(r,{});void 0===p&&(p=o);const f=t.layers[0].layout,m=f.get("icon-offset").evaluate(r,{},d),g=ah(n.horizontal),v=o/24,x=t.tilePixelRatio*v,y=t.tilePixelRatio*p/24,b=t.tilePixelRatio*l,w=t.tilePixelRatio*f.get("symbol-spacing"),_=f.get("text-padding")*t.tilePixelRatio,k=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.get("icon-padding").evaluate(t,{},r),a=i&&i.values;return[a[0]*n,a[1]*n,a[2]*n,a[3]*n]}(f,r,d,t.tilePixelRatio),S=f.get("text-max-angle")/180*Math.PI,j="viewport"!==f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),E="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),C=f.get("symbol-placement"),N=w/2,T=f.get("icon-text-fit");let P;i&&"none"!==T&&(t.allowVerticalPlacement&&n.vertical&&(P=$u(i,n.vertical,T,f.get("icon-text-fit-padding"),m,v)),g&&(i=$u(i,g,T,f.get("icon-text-fit-padding"),m,v)));const A=d?h.line.getGranularityForZoomLevel(d.z):1,I=(l,h)=>{h.x<0||h.x>=M||h.y<0||h.y>=M||function(t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_,k,S,j){const E=t.addToLineVertexArray(r,n);let C,N,T,P,A=0,M=0,I=0,O=0,D=-1,R=-1;const L={};let F=ao("");if(t.allowVerticalPlacement&&i.vertical){const e=l.layout.get("text-rotate").evaluate(w,{},S)+90;T=new qd(c,r,u,d,h,i.vertical,p,f,m,e),o&&(P=new qd(c,r,u,d,h,o,v,x,m,e))}if(a){const n=l.layout.get("icon-rotate").evaluate(w,{}),i="none"!==l.layout.get("icon-text-fit"),s=Ud(a,n,k,i),p=o?Ud(o,n,k,i):void 0;N=new qd(c,r,u,d,h,a,v,x,!1,n),A=4*s.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[Bu*l.layout.get("icon-size").evaluate(w,{})],m[0]>zu&&q(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===f.kind&&(m=[Bu*_.compositeIconSizes[0].evaluate(w,{},S),Bu*_.compositeIconSizes[1].evaluate(w,{},S)],(m[0]>zu||m[1]>zu)&&q(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,s,m,b,y,w,e.an.none,r,E.lineStartIndex,E.lineLength,-1,S),D=t.icon.placedSymbolArray.length-1,p&&(M=4*p.length,t.addSymbols(t.icon,p,m,b,y,w,e.an.vertical,r,E.lineStartIndex,E.lineLength,-1,S),R=t.icon.placedSymbolArray.length-1)}const $=Object.keys(i.horizontal);for(const q of $){const n=i.horizontal[q];if(!C){F=ao(n.text);const e=l.layout.get("text-rotate").evaluate(w,{},S);C=new qd(c,r,u,d,h,n,p,f,m,e)}const a=1===n.positionedLines.length;if(I+=ih(t,r,n,s,l,m,w,g,E,i.vertical?e.an.horizontal:e.an.horizontalOnly,a?$:[q],L,D,_,S),a)break}i.vertical&&(O+=ih(t,r,i.vertical,s,l,m,w,g,E,e.an.vertical,["vertical"],L,R,_,S));const B=C?C.boxStartIndex:t.collisionBoxArray.length,z=C?C.boxEndIndex:t.collisionBoxArray.length,U=T?T.boxStartIndex:t.collisionBoxArray.length,V=T?T.boxEndIndex:t.collisionBoxArray.length,H=N?N.boxStartIndex:t.collisionBoxArray.length,G=N?N.boxEndIndex:t.collisionBoxArray.length,W=P?P.boxStartIndex:t.collisionBoxArray.length,K=P?P.boxEndIndex:t.collisionBoxArray.length;let Z=-1;const Y=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;Z=Y(C,Z),Z=Y(T,Z),Z=Y(N,Z),Z=Y(P,Z);const X=Z>-1?1:0;X&&(Z*=j/su),t.glyphOffsetArray.length>=Xu.MAX_GLYPHS&&q("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,w.sortKey);const Q=th(l,w,S),[J,ee]=function(t,r){const n=t.length,i=null==r?void 0:r.values;if((null==i?void 0:i.length)>0)for(let a=0;a<i.length;a+=2){const r=i[a+1];t.emplaceBack(e.aD[i[a]],r[0],r[1])}return[n,t.length]}(t.textAnchorOffsets,Q);t.symbolInstances.emplaceBack(r.x,r.y,L.right>=0?L.right:-1,L.center>=0?L.center:-1,L.left>=0?L.left:-1,L.vertical||-1,D,R,F,B,z,U,V,H,G,W,K,u,I,O,A,M,X,0,p,Z,J,ee)}(t,h,l,n,i,a,P,t.layers[0],t.collisionBoxArray,r.index,r.sourceLayerIndex,t.index,x,[_,_,_,_],j,c,b,k,E,m,r,s,u,d,o)};if("line"===C)for(const e of Id(r.geometry,0,0,M,M)){const r=Jl(e,A),a=Bd(r,w,S,n.vertical||g,i,24,y,t.overscaling,M);for(const e of a)g&&sh(t,g.text,N,e)||I(r,e)}else if("line-center"===C){for(const e of r.geometry)if(e.length>1){const t=Jl(e,A),r=$d(t,S,n.vertical||g,i,24,y);r&&I(t,r)}}else if("Polygon"===r.type)for(const e of rn(r.geometry,0)){const t=Zd(e,16);I(Jl(e[0],A,!0),new Od(t.x,t.y,0))}else if("LineString"===r.type)for(const e of r.geometry){const t=Jl(e,A);I(t,new Od(t[0].x,t[0].y,0))}else if("Point"===r.type)for(const e of r.geometry)for(const t of e)I([t],new Od(t.x,t.y,0))}function ih(e,t,r,n,i,a,s,o,c,u,d,h,p,f,m){const g=function(e,t,r,n,i,a,s,o){const c=n.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=[];for(const d of t.positionedLines)for(const e of d.positionedGlyphs){if(!e.rect)continue;const n=e.rect||{};let a=4,h=!0,p=1,f=0;const m=(i||o)&&e.vertical,g=e.metrics.advance*e.scale/2;if(o&&t.verticalizable&&(f=d.lineOffset/2-(e.imageName?-(su-e.metrics.width*e.scale)/2:(e.scale-1)*su)),e.imageName){const t=s[e.imageName];h=t.sdf,p=t.pixelRatio,a=1/p}const v=i?[e.x+g,e.y]:[0,0];let x=i?[0,0]:[e.x+g+r[0],e.y+r[1]-f],y=[0,0];m&&(y=x,x=[0,0]);const b=e.metrics.isDoubleResolution?2:1,w=(e.metrics.left-a)*e.scale-g+x[0],_=(-e.metrics.top-a)*e.scale+x[1],k=w+n.w/b*e.scale/p,S=_+n.h/b*e.scale/p,j=new l(w,_),E=new l(k,_),C=new l(w,S),N=new l(k,S);if(m){const t=new l(-g,g- -17),r=-Math.PI/2,n=12-g,i=new l(22-n,-(e.imageName?n:0)),a=new l(...y);j._rotateAround(r,t)._add(i)._add(a),E._rotateAround(r,t)._add(i)._add(a),C._rotateAround(r,t)._add(i)._add(a),N._rotateAround(r,t)._add(i)._add(a)}if(c){const e=Math.sin(c),t=Math.cos(c),r=[t,-e,e,t];j._matMult(r),E._matMult(r),C._matMult(r),N._matMult(r)}const T=new l(0,0),P=new l(0,0);u.push({tl:j,tr:E,bl:C,br:N,tex:n,writingMode:t.writingMode,glyphOffset:v,sectionIndex:e.sectionIndex,isSDF:h,pixelOffsetTL:T,pixelOffsetBR:P,minFontScaleX:0,minFontScaleY:0})}return u}(0,r,o,i,a,s,n,e.allowVerticalPlacement),v=e.textSizeData;let x=null;"source"===v.kind?(x=[Bu*i.layout.get("text-size").evaluate(s,{})],x[0]>zu&&q(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===v.kind&&(x=[Bu*f.compositeTextSizes[0].evaluate(s,{},m),Bu*f.compositeTextSizes[1].evaluate(s,{},m)],(x[0]>zu||x[1]>zu)&&q(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,g,x,o,a,s,u,t,c.lineStartIndex,c.lineLength,p,m);for(const l of d)h[l]=e.text.placedSymbolArray.length-1;return 4*g.length}function ah(e){for(const t in e)return e[t];return null}function sh(e,t,r,n){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(n.dist(e[t])<r)return!0}else i[t]=[];return i[t].push(n),!1}const oh=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class lh{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const n=r>>4;if(1!==n)throw new Error(`Got v${n} data when expected v1.`);const i=oh[15&r];if(!i)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(e,2,1),[s]=new Uint32Array(e,4,1);return new lh(s,a,i,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,n=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=oh.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,o=(8-s%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${r}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+o,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+s+o),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+o,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return ch(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:a,nodeSize:s}=this,o=[0,i.length-1,0],l=[];for(;o.length;){const c=o.pop()||0,u=o.pop()||0,d=o.pop()||0;if(u-d<=s){for(let s=d;s<=u;s++){const o=a[2*s],c=a[2*s+1];o>=e&&o<=r&&c>=t&&c<=n&&l.push(i[s])}continue}const h=d+u>>1,p=a[2*h],f=a[2*h+1];p>=e&&p<=r&&f>=t&&f<=n&&l.push(i[h]),(0===c?e<=p:t<=f)&&(o.push(d),o.push(h-1),o.push(1-c)),(0===c?r>=p:n>=f)&&(o.push(h+1),o.push(u),o.push(1-c))}return l}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:i,nodeSize:a}=this,s=[0,n.length-1,0],o=[],l=r*r;for(;s.length;){const c=s.pop()||0,u=s.pop()||0,d=s.pop()||0;if(u-d<=a){for(let r=d;r<=u;r++)ph(i[2*r],i[2*r+1],e,t)<=l&&o.push(n[r]);continue}const h=d+u>>1,p=i[2*h],f=i[2*h+1];ph(p,f,e,t)<=l&&o.push(n[h]),(0===c?e-r<=p:t-r<=f)&&(s.push(d),s.push(h-1),s.push(1-c)),(0===c?e+r>=p:t+r>=f)&&(s.push(h+1),s.push(u),s.push(1-c))}return o}}function ch(e,t,r,n,i,a){if(i-n<=r)return;const s=n+i>>1;uh(e,t,s,n,i,a),ch(e,t,r,n,s-1,1-a),ch(e,t,r,s+1,i,1-a)}function uh(e,t,r,n,i,a){for(;i>n;){if(i-n>600){const s=i-n+1,o=r-n+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(o-s/2<0?-1:1);uh(e,t,r,Math.max(n,Math.floor(r-o*c/s+u)),Math.min(i,Math.floor(r+(s-o)*c/s+u)),a)}const s=t[2*r+a];let o=n,l=i;for(dh(e,t,n,r),t[2*i+a]>s&&dh(e,t,n,i);o<l;){for(dh(e,t,o,l),o++,l--;t[2*o+a]<s;)o++;for(;t[2*l+a]>s;)l--}t[2*n+a]===s?dh(e,t,n,l):(l++,dh(e,t,l,i)),l<=r&&(n=l+1),r<=l&&(i=l-1)}}function dh(e,t,r,n){hh(e,r,n),hh(t,2*r,2*n),hh(t,2*r+1,2*n+1)}function hh(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function ph(e,t,r,n){const i=e-r,a=t-n;return i*i+a*a}var fh;e.cw=void 0,(fh=e.cw||(e.cw={})).create="create",fh.load="load",fh.fullLoad="fullLoad";let mh=null,gh=[];const vh=1e3/60,xh="loadTime",yh="fullLoadTime",bh={mark(e){performance.mark(e)},frame(e){const t=e;null!=mh&&gh.push(t-mh),mh=t},clearMetrics(){mh=null,gh=[],performance.clearMeasures(xh),performance.clearMeasures(yh);for(const t in e.cw)performance.clearMarks(e.cw[t])},getPerformanceMetrics(){performance.measure(xh,e.cw.create,e.cw.load),performance.measure(yh,e.cw.create,e.cw.fullLoad);const t=performance.getEntriesByName(xh)[0].duration,r=performance.getEntriesByName(yh)[0].duration,n=gh.length,i=1/(gh.reduce(((e,t)=>e+t),0)/n/1e3),a=gh.filter((e=>e>vh)).reduce(((e,t)=>e+(t-vh)/vh),0);return{loadTime:t,fullLoadTime:r,fps:i,percentDroppedFrames:a/(n+a)*100,totalFrames:n}}};e.$=M,e.A=g,e.B=function(e){let[t,r,n]=e;return r+=90,r*=Math.PI/180,n*=Math.PI/180,{x:t*Math.cos(r)*Math.sin(n),y:t*Math.sin(r)*Math.sin(n),z:t*Math.cos(n)}},e.C=vr,e.D=$a,e.E=be,e.F=Pa,e.G=na,e.H=function(e){if(null==Y){const t=e.navigator?e.navigator.userAgent:null;Y=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Y},e.I=gu,e.J=class{constructor(e,t){this.target=e,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new ud((()=>this.process())),this.subscription=re(this.target,"message",(e=>this.receive(e)),!1),this.globalScope=Z(self)?e:window}registerMessageHandler(e,t){this.messageHandlers[e]=t}sendAsync(e,t){return new Promise(((r,n)=>{const i=Math.round(1e18*Math.random()).toString(36).substring(0,10),a=t?re(t.signal,"abort",(()=>{null==a||a.unsubscribe(),delete this.resolveRejects[i];const t={id:i,type:"<cancel>",origin:location.origin,targetMapId:e.targetMapId,sourceMapId:this.mapId};this.target.postMessage(t)}),dd):null;this.resolveRejects[i]={resolve:e=>{null==a||a.unsubscribe(),r(e)},reject:e=>{null==a||a.unsubscribe(),n(e)}};const s=[],o=Object.assign(Object.assign({},e),{id:i,sourceMapId:this.mapId,origin:location.origin,data:pa(e.data,s)});this.target.postMessage(o,{transfer:s})}))}receive(e){const t=e.data,r=t.id;if(!("file://"!==t.origin&&"file://"!==location.origin&&"resource://android"!==t.origin&&"resource://android"!==location.origin&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if("<cancel>"===t.type){delete this.tasks[r];const e=this.abortControllers[r];return delete this.abortControllers[r],void(e&&e.abort())}if(Z(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(0===this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,r){return t(this,void 0,void 0,(function*(){if("<response>"===r.type){const t=this.resolveRejects[e];if(delete this.resolveRejects[e],!t)return;return void(r.error?t.reject(fa(r.error)):t.resolve(fa(r.data)))}if(!this.messageHandlers[r.type])return void this.completeTask(e,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const t=fa(r.data),n=new AbortController;this.abortControllers[e]=n;try{const i=yield this.messageHandlers[r.type](r.sourceMapId,t,n);this.completeTask(e,null,i)}catch(t){this.completeTask(e,t)}}))}completeTask(e,t,r){const n=[];delete this.abortControllers[e];const i={id:e,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?pa(t):null,data:pa(r,n)};this.target.postMessage(i,{transfer:n})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},e.K=de,e.L=function(){var e=new g(16);return g!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.M=function(e,t,r){var n,i,a,s,o,l,c,u,d,h,p,f,m=r[0],g=r[1],v=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],e[0]=n=t[0],e[1]=i,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=p,e[11]=f,e[12]=n*m+o*g+d*v+t[12],e[13]=i*m+l*g+h*v+t[13],e[14]=a*m+c*g+p*v+t[14],e[15]=s*m+u*g+f*v+t[15]),e},e.N=function(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.O=function(e,t,r){var n=t[0],i=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],m=t[12],g=t[13],v=t[14],x=t[15],y=r[0],b=r[1],w=r[2],_=r[3];return e[0]=y*n+b*o+w*d+_*m,e[1]=y*i+b*l+w*h+_*g,e[2]=y*a+b*c+w*p+_*v,e[3]=y*s+b*u+w*f+_*x,e[4]=(y=r[4])*n+(b=r[5])*o+(w=r[6])*d+(_=r[7])*m,e[5]=y*i+b*l+w*h+_*g,e[6]=y*a+b*c+w*p+_*v,e[7]=y*s+b*u+w*f+_*x,e[8]=(y=r[8])*n+(b=r[9])*o+(w=r[10])*d+(_=r[11])*m,e[9]=y*i+b*l+w*h+_*g,e[10]=y*a+b*c+w*p+_*v,e[11]=y*s+b*u+w*f+_*x,e[12]=(y=r[12])*n+(b=r[13])*o+(w=r[14])*d+(_=r[15])*m,e[13]=y*i+b*l+w*h+_*g,e[14]=y*a+b*c+w*p+_*v,e[15]=y*s+b*u+w*f+_*x,e},e.P=l,e.Q=function(e,t){const r={};for(let n=0;n<t.length;n++){const i=t[n];i in e&&(r[i]=e[i])}return r},e.R=al,e.S=pd,e.T=fl,e.U=vd,e.V=gd,e.W=p,e.X=f,e.Y=J,e.Z=jd,e._=t,e.a=ce,e.a$=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},e.a0=wd,e.a1=Cd,e.a2=25,e.a3=kd,e.a4=e=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((r=>{t.onloadstart=()=>{r(t)};for(const n of e){const e=window.document.createElement("source");me(n)||(t.crossOrigin="Anonymous"),e.src=n,t.appendChild(e)}}))},e.a5=Ie,e.a6=function(){return U++},e.a7=_s,e.a8=Xu,e.a9=fi,e.aA=su,e.aB=I,e.aC=function(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!r[0]&&!r[1])return[0,0];const a=i?"map"===n?-e.bearingInRadians:0:"viewport"===n?e.bearingInRadians:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}return[i?r[0]:I(t,r[0],e.zoom),i?r[1]:I(t,r[1],e.zoom)]},e.aE=Vu,e.aF=rh,e.aG=Pu,e.aH=lh,e.aI=Ya,e.aJ=Kl,e.aK=Is,e.aL=Zs,e.aM=Gs,e.aN=B,e.aO=ie,e.aP=bd,e.aQ=k,e.aR=_,e.aS=function(e){var t=new g(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.aT=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},e.aU=function(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e},e.aV=S,e.aW=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.aX=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},e.aY=b,e.aZ=function(e,t,r){const n=t[0]*r[0]+t[1]*r[1]+t[2]*r[2];return 0===n?null:(-(e[0]*r[0]+e[1]*r[1]+e[2]*r[2])-r[3])/n},e.a_=E,e.aa=To,e.ab=Td,e.ac=function(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,r,n,i)=>{const a=n||i;return t[r]=!a||a.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t},e.ad=ne,e.ae=function(e){return Math.pow(2,e)},e.af=x,e.ag=$,e.ah=85.051129,e.ai=xd,e.aj=function(e){return Math.log(e)/Math.LN2},e.ak=function(e){var t=e[0],r=e[1];return t*t+r*r},e.al=function(e,t){const r=[];for(const n in e)n in t||r.push(n);return r},e.am=function(e,t){let r=0,n=0;if("constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:a,maxZoom:s}=e,o=i?$(mr.interpolationFactor(i,t,a,s),0,1):0;"camera"===e.kind?n=vr.number(e.minSize,e.maxSize,o):r=o}return{uSizeT:r,uSize:n}},e.ao=function(e,t,r){let{uSize:n,uSizeT:i}=t,{lowerSize:a,upperSize:s}=r;return"source"===e.kind?a/Bu:"composite"===e.kind?vr.number(a/Bu,s/Bu,i):n},e.ap=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],v=t[15],x=r*o-n*s,y=r*l-i*s,b=r*c-a*s,w=n*l-i*o,_=n*c-a*o,k=i*c-a*l,S=u*m-d*f,j=u*g-h*f,E=u*v-p*f,C=d*g-h*m,N=d*v-p*m,T=h*v-p*g,P=x*T-y*N+b*C+w*E-_*j+k*S;return P?(e[0]=(o*T-l*N+c*C)*(P=1/P),e[1]=(i*N-n*T-a*C)*P,e[2]=(m*k-g*_+v*w)*P,e[3]=(h*_-d*k-p*w)*P,e[4]=(l*E-s*T-c*j)*P,e[5]=(r*T-i*E+a*j)*P,e[6]=(g*b-f*k-v*y)*P,e[7]=(u*k-h*b+p*y)*P,e[8]=(s*N-o*E+c*S)*P,e[9]=(n*E-r*N-a*S)*P,e[10]=(f*_-m*b+v*x)*P,e[11]=(d*b-u*_-p*x)*P,e[12]=(o*j-s*C-l*S)*P,e[13]=(r*C-n*j+i*S)*P,e[14]=(m*y-f*w-g*x)*P,e[15]=(u*w-d*y+h*x)*P,e):null},e.aq=P,e.ar=function(e){return Math.hypot(e[0],e[1])},e.as=function(e){return e[0]=0,e[1]=0,e},e.at=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},e.au=qu,e.av=C,e.aw=function(e,t,r,n){const i=t.y-e.y,a=t.x-e.x,s=n.y-r.y,o=n.x-r.x,c=s*a-o*i;if(0===c)return null;const u=(o*(e.y-r.y)-s*(e.x-r.x))/c;return new l(e.x+u*a,e.y+u*i)},e.ax=Id,e.ay=Io,e.az=function(e){let t=1/0,r=1/0,n=-1/0,i=-1/0;for(const a of e)t=Math.min(t,a.x),r=Math.min(r,a.y),n=Math.max(n,a.x),i=Math.max(i,a.y);return[t,r,n,i]},e.b=X,e.b$=eu,e.b0=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]},e.b1=Sd,e.b2=Ed,e.b3=function(e,t,r,n,i){var a,s=1/Math.tan(t/2);return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+n)*(a=1/(n-i)),e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e},e.b4=function(e){var t=new g(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.b5=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],s=t[1],o=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*n,e[1]=s*i+u*n,e[2]=o*i+d*n,e[3]=l*i+h*n,e[4]=c*i-a*n,e[5]=u*i-s*n,e[6]=d*i-o*n,e[7]=h*i-l*n,e},e.b6=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],s=t[5],o=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*n,e[5]=s*i+u*n,e[6]=o*i+d*n,e[7]=l*i+h*n,e[8]=c*i-a*n,e[9]=u*i-s*n,e[10]=d*i-o*n,e[11]=h*i-l*n,e},e.b7=function(){const e=new Float32Array(16);return x(e),e},e.b8=function(){const e=new Float64Array(16);return x(e),e},e.b9=function(){return new Float64Array(16)},e.bA=function(e){return e[0]=0,e[1]=0,e[2]=0,e},e.bB=function(e,t,r,n){const i=Math.sqrt(e*e+t*t),a=Math.sqrt(r*r+n*n);e/=i,t/=i,r/=a,n/=a;const s=Math.acos(e*r+t*n);return-t*r+e*n>0?s:-s},e.bC=function(e,t){const r=O(e,2*Math.PI),n=O(t,2*Math.PI);return Math.min(Math.abs(r-n),Math.abs(r-n+2*Math.PI),Math.abs(r-n-2*Math.PI))},e.bD=function(){const e={},t=we.$version;for(const r in we.$root){const n=we.$root[r];if(n.required){let i=null;i="version"===r?t:"array"===n.type?[]:{},null!=i&&(e[r]=i)}}return e},e.bE=ma,e.bF=pe,e.bG=function e(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(!e(t[n],r[n]))return!1;return!0}return t===r},e.bH=function(e){e=e.slice();const t=Object.create(null);for(let r=0;r<e.length;r++)t[e[r].id]=e[r];for(let r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=ke(e[r],t[e[r].ref]));return e},e.bI=function(e){if("custom"===e.type)return new cd(e);switch(e.type){case"background":return new ad(e);case"circle":return new Yo(e);case"color-relief":return new vl(e);case"fill":return new oc(e);case"fill-extrusion":return new Mc(e);case"heatmap":return new ll(e);case"hillshade":return new dl(e);case"line":return new Kc(e);case"raster":return new ld(e);case"symbol":return new rd(e)}},e.bJ=G,e.bK=function(e,t){if(!e)return[{command:"setStyle",args:[t]}];let r=[];try{if(!Se(e.version,t.version))return[{command:"setStyle",args:[t]}];Se(e.center,t.center)||r.push({command:"setCenter",args:[t.center]}),Se(e.state,t.state)||r.push({command:"setGlobalState",args:[t.state]}),Se(e.centerAltitude,t.centerAltitude)||r.push({command:"setCenterAltitude",args:[t.centerAltitude]}),Se(e.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),Se(e.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),Se(e.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),Se(e.roll,t.roll)||r.push({command:"setRoll",args:[t.roll]}),Se(e.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),Se(e.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),Se(e.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),Se(e.light,t.light)||r.push({command:"setLight",args:[t.light]}),Se(e.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),Se(e.sky,t.sky)||r.push({command:"setSky",args:[t.sky]}),Se(e.projection,t.projection)||r.push({command:"setProjection",args:[t.projection]});const n={},i=[];!function(e,t,r,n){let i;for(i in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(t,i)||Ce(i,r,n));for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(e,i)?Se(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type&&Te(e,t,i)?je(r,{command:"setGeoJSONSourceData",args:[i,t[i].data]}):Ne(i,t,r,n)):Ee(i,t,r))}(e.sources,t.sources,i,n);const a=[];e.layers&&e.layers.forEach((e=>{"source"in e&&n[e.source]?r.push({command:"removeLayer",args:[e.id]}):a.push(e)})),r=r.concat(i),function(e,t,r){t=t||[];const n=(e=e||[]).map(Ae),i=t.map(Ae),a=e.reduce(Me,{}),s=t.reduce(Me,{}),o=n.slice(),l=Object.create(null);let c,u,d,h,p;for(let f=0,m=0;f<n.length;f++)c=n[f],Object.prototype.hasOwnProperty.call(s,c)?m++:(je(r,{command:"removeLayer",args:[c]}),o.splice(o.indexOf(c,m),1));for(let f=0,m=0;f<i.length;f++)c=i[i.length-1-f],o[o.length-1-f]!==c&&(Object.prototype.hasOwnProperty.call(a,c)?(je(r,{command:"removeLayer",args:[c]}),o.splice(o.lastIndexOf(c,o.length-m),1)):m++,h=o[o.length-f],je(r,{command:"addLayer",args:[s[c],h]}),o.splice(o.length-f,0,c),l[c]=!0);for(let f=0;f<i.length;f++)if(c=i[f],u=a[c],d=s[c],!l[c]&&!Se(u,d))if(Se(u.source,d.source)&&Se(u["source-layer"],d["source-layer"])&&Se(u.type,d.type)){for(p in Pe(u.layout,d.layout,r,c,null,"setLayoutProperty"),Pe(u.paint,d.paint,r,c,null,"setPaintProperty"),Se(u.filter,d.filter)||je(r,{command:"setFilter",args:[c,d.filter]}),Se(u.minzoom,d.minzoom)&&Se(u.maxzoom,d.maxzoom)||je(r,{command:"setLayerZoomRange",args:[c,d.minzoom,d.maxzoom]}),u)Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?Pe(u[p],d[p],r,c,p.slice(6),"setPaintProperty"):Se(u[p],d[p])||je(r,{command:"setLayerProperty",args:[c,p,d[p]]}));for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&!Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?Pe(u[p],d[p],r,c,p.slice(6),"setPaintProperty"):Se(u[p],d[p])||je(r,{command:"setLayerProperty",args:[c,p,d[p]]}))}else je(r,{command:"removeLayer",args:[c]}),h=o[o.lastIndexOf(c)+1],je(r,{command:"addLayer",args:[d,h]})}(a,t.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:"setStyle",args:[t]}]}return r},e.bL=function(e){const t=[],r=e.id;return void 0===r&&t.push({message:`layers.${r}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${r}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},e.bM=V,e.bN=H,e.bO=class extends uo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.bP=fo,e.bQ=class extends uo{constructor(e,t){super(e,t),this.current=mo}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.bR=po,e.bS=class extends uo{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.bT=class extends uo{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.bU=v,e.bV=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.bW=function(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e},e.bX=function(e,t,r,n,i,a,s){var o=1/(t-r),l=1/(n-i),c=1/(a-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*o,e[13]=(i+n)*l,e[14]=(s+a)*c,e[15]=1,e},e.bY=class extends uo{constructor(e,t){super(e,t),this.current=new Array}set(e){if(e!=this.current){this.current=e;const t=new Float32Array(4*e.length);for(let r=0;r<e.length;r++)t[4*r]=e[r].r,t[4*r+1]=e[r].g,t[4*r+2]=e[r].b,t[4*r+3]=e[r].a;this.gl.uniform4fv(this.location,t)}}},e.bZ=class extends uo{constructor(e,t){super(e,t),this.current=new Array}set(e){if(e!=this.current){this.current=e;const t=new Float32Array(e);this.gl.uniform1fv(this.location,t)}}},e.b_=class extends us{},e.ba=function(e,t,r){const n=new Float64Array(4);return T(n,e,t-90,r),n},e.bb=function(e,t,r,n){var i,a,s,o,l,c=t[0],u=t[1],d=t[2],h=t[3],p=r[0],f=r[1],g=r[2],v=r[3];return(a=c*p+u*f+d*g+h*v)<0&&(a=-a,p=-p,f=-f,g=-g,v=-v),1-a>m?(i=Math.acos(a),s=Math.sin(i),o=Math.sin((1-n)*i)/s,l=Math.sin(n*i)/s):(o=1-n,l=n),e[0]=o*c+l*p,e[1]=o*u+l*f,e[2]=o*d+l*g,e[3]=o*h+l*v,e},e.bc=function(e){const t=new Float64Array(9);var r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y;d=(i=(n=e)[0])*(l=i+i),h=(a=n[1])*l,f=(s=n[2])*l,m=s*(c=a+a),v=(o=n[3])*l,x=o*c,y=o*(u=s+s),(r=t)[0]=1-(p=a*c)-(g=s*u),r[3]=h-y,r[6]=f+x,r[1]=h+y,r[4]=1-d-g,r[7]=m-v,r[2]=f-x,r[5]=m+v,r[8]=1-d-p;const b=ie(-Math.asin($(t[2],-1,1)));let w,_;return Math.hypot(t[5],t[8])<.001?(w=0,_=-ie(Math.atan2(t[3],t[4]))):(w=ie(0===t[5]&&0===t[8]?0:Math.atan2(t[5],t[8])),_=ie(0===t[1]&&0===t[0]?0:Math.atan2(t[1],t[0]))),{roll:w,pitch:b+90,bearing:_}},e.bd=function(e,t){return e.roll==t.roll&&e.pitch==t.pitch&&e.bearing==t.bearing},e.be=Tt,e.bf=ho,e.bg=Zl,e.bh=Yl,e.bi=ql,e.bj=D,e.bk=R,e.bl=zt,e.bm=function(e,t,r,n,i){return D(n,i,$((e-t)/(r-t),0,1))},e.bn=O,e.bo=function(){return new Float64Array(3)},e.bp=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},e.bq=T,e.br=function(e,t,r){var n=r[0],i=r[1],a=r[2],s=t[0],o=t[1],l=t[2],c=i*l-a*o,u=a*s-n*l,d=n*o-i*s,h=i*d-a*u,p=a*c-n*d,f=n*u-i*c,m=2*r[3];return u*=m,d*=m,p*=2,f*=2,e[0]=s+(c*=m)+(h*=2),e[1]=o+u+p,e[2]=l+d+f,e},e.bs=function(e,t,r){const n=(i=[e[0],e[1],e[2],t[0],t[1],t[2],r[0],r[1],r[2]])[0]*((u=i[8])*(s=i[4])-(o=i[5])*(c=i[7]))+i[1]*(-u*(a=i[3])+o*(l=i[6]))+i[2]*(c*a-s*l);var i,a,s,o,l,c,u;if(0===n)return null;const d=S([],[t[0],t[1],t[2]],[r[0],r[1],r[2]]),h=S([],[r[0],r[1],r[2]],[e[0],e[1],e[2]]),p=S([],[e[0],e[1],e[2]],[t[0],t[1],t[2]]),f=k([],d,-e[3]);return _(f,f,k([],h,-t[3])),_(f,f,k([],p,-r[3])),k(f,f,1/n),f},e.bt=hd,e.bu=function(){return new Float64Array(4)},e.bv=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},e.bw=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},e.bx=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},e.by=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],s=t[1],o=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*n,e[1]=s*i-u*n,e[2]=o*i-d*n,e[3]=l*i-h*n,e[8]=a*n+c*i,e[9]=s*n+u*i,e[10]=o*n+d*i,e[11]=l*n+h*i,e},e.bz=function(e,t){const r=O(e,360),n=O(t,360),i=n-r,a=n>r?i-360:i+360;return Math.abs(i)<Math.abs(a)?i:a},e.c=le,e.c0=class extends hs{},e.c1=ol,e.c2=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.c3=sl,e.c4=function(e,t,r){var n=t[0],i=t[1],a=t[2],s=r[3]*n+r[7]*i+r[11]*a+r[15];return e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/(s=s||1),e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/s,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/s,e},e.c5=class extends es{},e.c6=class extends ys{},e.c7=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},e.c8=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],f=e[12],g=e[13],v=e[14],x=e[15],y=t[0],b=t[1],w=t[2],_=t[3],k=t[4],S=t[5],j=t[6],E=t[7],C=t[8],N=t[9],T=t[10],P=t[11],A=t[12],M=t[13],I=t[14],O=t[15];return Math.abs(r-y)<=m*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-b)<=m*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-w)<=m*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-_)<=m*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-k)<=m*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(o-S)<=m*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(l-j)<=m*Math.max(1,Math.abs(l),Math.abs(j))&&Math.abs(c-E)<=m*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(u-C)<=m*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(d-N)<=m*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(h-T)<=m*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(p-P)<=m*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(f-A)<=m*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(g-M)<=m*Math.max(1,Math.abs(g),Math.abs(M))&&Math.abs(v-I)<=m*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(x-O)<=m*Math.max(1,Math.abs(x),Math.abs(O))},e.c9=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.cA=function(e){delete ce.REGISTERED_PROTOCOLS[e]},e.cB=function(e,t){const r={};for(let i=0;i<e.length;i++){const n=t&&t[e[i].id]||ki(e[i]);t&&(t[e[i].id]=n);let a=r[n];a||(a=r[n]=[]),a.push(e[i])}const n=[];for(const i in r)n.push(r[i]);return n},e.cC=ca,e.cD=Nd,e.cE=Pd,e.cF=vu,e.cG=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=M/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const r=t.bucket.layers[0],n=r.layout,i=r._unevaluatedLayout._values,a={layoutIconSize:i["icon-size"].possiblyEvaluate(new Pa(t.bucket.zoom+1),t.canonical),layoutTextSize:i["text-size"].possiblyEvaluate(new Pa(t.bucket.zoom+1),t.canonical),textMaxSize:i["text-size"].possiblyEvaluate(new Pa(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:r}=t.bucket.textSizeData;a.compositeTextSizes=[i["text-size"].possiblyEvaluate(new Pa(e),t.canonical),i["text-size"].possiblyEvaluate(new Pa(r),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:r}=t.bucket.iconSizeData;a.compositeIconSizes=[i["icon-size"].possiblyEvaluate(new Pa(e),t.canonical),i["icon-size"].possiblyEvaluate(new Pa(r),t.canonical)]}const s=n.get("text-line-height")*su,o="viewport"!==n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),l=n.get("text-keep-upright"),c=n.get("text-size");for(const u of t.bucket.features){const i=n.get("text-font").evaluate(u,{},t.canonical).join(","),d=c.evaluate(u,{},t.canonical),h=a.layoutTextSize.evaluate(u,{},t.canonical),p=a.layoutIconSize.evaluate(u,{},t.canonical),f={horizontal:{},vertical:void 0},m=u.text;let g,v=[0,0];if(m){const a=m.toString(),c=n.get("text-letter-spacing").evaluate(u,{},t.canonical)*su,p=xa(a)?c:0,g=n.get("text-anchor").evaluate(u,{},t.canonical),x=th(r,u,t.canonical);if(!x){const e=n.get("text-radial-offset").evaluate(u,{},t.canonical);v=e?eh(g,[e*su,Jd]):n.get("text-offset").evaluate(u,{},t.canonical).map((e=>e*su))}let y=o?"center":n.get("text-justify").evaluate(u,{},t.canonical);const b="point"===n.get("symbol-placement")?n.get("text-max-width").evaluate(u,{},t.canonical)*su:1/0,w=()=>{t.bucket.allowVerticalPlacement&&va(a)&&(f.vertical=bu(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,s,g,"left",p,v,e.an.vertical,!0,h,d))};if(!o&&x){const r=new Set;if("auto"===y)for(let e=0;e<x.values.length;e+=2)r.add(rh(x.values[e]));else r.add(y);let n=!1;for(const a of r)if(!f.horizontal[a])if(n)f.horizontal[a]=f.horizontal[0];else{const r=bu(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,s,"center",a,p,v,e.an.horizontal,!1,h,d);r&&(f.horizontal[a]=r,n=1===r.positionedLines.length)}w()}else{"auto"===y&&(y=rh(g));const r=bu(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,s,g,y,p,v,e.an.horizontal,!1,h,d);r&&(f.horizontal[y]=r),w(),va(a)&&o&&l&&(f.vertical=bu(m,t.glyphMap,t.glyphPositions,t.imagePositions,i,b,s,g,y,p,v,e.an.vertical,!1,h,d))}}let x=!1;if(u.icon&&u.icon.name){const e=t.imageMap[u.icon.name];e&&(g=Lu(t.imagePositions[u.icon.name],n.get("icon-offset").evaluate(u,{},t.canonical),n.get("icon-anchor").evaluate(u,{},t.canonical)),x=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=x:t.bucket.sdfIcons!==x&&q("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==n.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const y=ah(f.horizontal)||f.vertical;t.bucket.iconsInText=!!y&&y.iconsInText,(y||g)&&nh(t.bucket,u,f,g,t.imageMap,a,h,p,v,x,t.canonical,t.subdivisionGranularity)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.cH=Uc,e.cI=nc,e.cJ=Ec,e.cK=_c,e.cL=du,e.cM=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.cN=function(e,r,n,i,a){return t(this,void 0,void 0,(function*(){if(f())try{return yield J(e,r,n,i,a)}catch(e){}return function(e,t,r,n,i){const a=e.width,s=e.height;ee&&te||(ee=new OffscreenCanvas(a,s),te=ee.getContext("2d",{willReadFrequently:!0})),ee.width=a,ee.height=s,te.drawImage(e,0,0,a,s);const o=te.getImageData(t,r,n,i);return te.clearRect(0,0,a,s),o.data}(e,r,n,i,a)}))},e.cO=ml,e.cP=r,e.cQ=a,e.cR=wc,e.cS=cu,e.cT=ai,e.cU=Ta,e.ca=e=>"symbol"===e.type,e.cb=e=>"circle"===e.type,e.cc=e=>"heatmap"===e.type,e.cd=e=>"line"===e.type,e.ce=e=>"fill"===e.type,e.cf=e=>"fill-extrusion"===e.type,e.cg=e=>"hillshade"===e.type,e.ch=e=>"color-relief"===e.type,e.ci=e=>"raster"===e.type,e.cj=e=>"background"===e.type,e.ck=e=>"custom"===e.type,e.cl=L,e.cm=function(e,t,r){const n=A(t.x-r.x,t.y-r.y),i=A(e.x-r.x,e.y-r.y);var a,s;return ie(Math.atan2(n[0]*i[1]-n[1]*i[0],(a=n)[0]*(s=i)[0]+a[1]*s[1]))},e.cn=F,e.co=function(e,t){return se[t]&&(e instanceof MouseEvent||e instanceof WheelEvent)},e.cp=function(e,t){return ae[t]&&"touches"in e},e.cq=function(e){return ae[e]||se[e]},e.cr=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e},e.cs=function(e,t){const{x:r,y:n}=wd.fromLngLat(t);return!(e<0||e>25||n<0||n>=1||r<0||r>=1)},e.ct=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.cu=class extends Ja{},e.cv=bh,e.cx=function(e){return e.message===oe},e.cy=he,e.cz=function(e,t){ce.REGISTERED_PROTOCOLS[e]=t},e.d=me,e.e=z,e.f=e=>t(void 0,void 0,void 0,(function*(){if(0===e.byteLength)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(e)],{type:"image/png"});try{return createImageBitmap(t)}catch(e){throw new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),e.g=ue,e.h=e=>new Promise(((t,r)=>{const n=new Image;n.onload=()=>{t(n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((()=>{n.src=Q}))},n.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?URL.createObjectURL(i):Q})),e.i=Z,e.j=(e,t)=>fe(z(e,{type:"json"}),t),e.k=ye,e.l=xe,e.m=fe,e.n=(e,t)=>fe(z(e,{type:"arrayBuffer"}),t),e.o=function(e){return new du(e).readFields(hu,[])},e.p=mu,e.q=il,e.r=Ha,e.s=re,e.t=Ia,e.u=ga,e.v=we,e.w=q,e.x=ra,e.y=sa,e.z=ta})),r("worker",["./shared"],(function(e){class t{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const i of t){this._layerConfigs[i.id]=i;const t=this._layers[i.id]=e.bI(i);t._featureFilter=e.a9(t.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const n=e.cB(Object.values(this._layerConfigs),this.keyCache);for(const e of n){const t=e.map((e=>this._layers[e.id])),r=t[0];if("none"===r.visibility)continue;const n=r.source||"";let i=this.familiesBySource[n];i||(i=this.familiesBySource[n]={});const a=r.sourceLayer||"_geojsonTileLayer";let s=i[a];s||(s=i[a]=[]),s.push(t)}}}class r{constructor(t){const r={},n=[];for(const e in t){const i=t[e],a=r[e]={};for(const e in i){const t=i[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const r={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};n.push(r),a[e]={rect:r,metrics:t.metrics}}}const{w:i,h:a}=e.p(n),s=new e.q({width:i||1,height:a||1});for(const o in t){const n=t[o];for(const t in n){const i=n[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=r[o][t].rect;e.q.copy(i.bitmap,s,{x:0,y:0},{x:a.x+1,y:a.y+1},i.bitmap)}}this.image=s,this.positions=r}}e.cC("GlyphAtlas",r);class n{constructor(t){this.tileID=new e.Z(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.inFlightDependencies=[],this.globalState=t.globalState}parse(t,n,a,s,o){return e._(this,void 0,void 0,(function*(){this.status="parsing",this.data=t,this.collisionBoxArray=new e.a7;const l=new e.cD(Object.keys(t.layers).sort()),c=new e.cE(this.tileID,this.promoteId);c.bucketLayerIDs=[];const u={},d={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:a,subdivisionGranularity:o},h=n.familiesBySource[this.source];for(const r in h){const n=t.layers[r];if(!n)continue;1===n.version&&e.w(`Vector tile source "${this.source}" layer "${r}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const s=l.encode(r),o=[];for(let e=0;e<n.length;e++){const t=n.feature(e),i=c.getId(t,r);o.push({feature:t,id:i,index:e,sourceLayerIndex:s})}for(const t of h[r]){const r=t[0];r.source!==this.source&&e.w(`layer.source = ${r.source} does not equal this.source = ${this.source}`),r.minzoom&&this.zoom<Math.floor(r.minzoom)||r.maxzoom&&this.zoom>=r.maxzoom||"none"!==r.visibility&&(i(t,this.zoom,a),(u[r.id]=r.createBucket({index:c.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:s,sourceID:this.source,globalState:this.globalState})).populate(o,d,this.tileID.canonical),c.bucketLayerIDs.push(t.map((e=>e.id))))}}const p=e.bM(d.glyphDependencies,(e=>Object.keys(e).map(Number)));this.inFlightDependencies.forEach((e=>null==e?void 0:e.abort())),this.inFlightDependencies=[];let f=Promise.resolve({});if(Object.keys(p).length){const e=new AbortController;this.inFlightDependencies.push(e),f=s.sendAsync({type:"GG",data:{stacks:p,source:this.source,tileID:this.tileID,type:"glyphs"}},e)}const m=Object.keys(d.iconDependencies);let g=Promise.resolve({});if(m.length){const e=new AbortController;this.inFlightDependencies.push(e),g=s.sendAsync({type:"GI",data:{icons:m,source:this.source,tileID:this.tileID,type:"icons"}},e)}const v=Object.keys(d.patternDependencies);let x=Promise.resolve({});if(v.length){const e=new AbortController;this.inFlightDependencies.push(e),x=s.sendAsync({type:"GI",data:{icons:v,source:this.source,tileID:this.tileID,type:"patterns"}},e)}const[y,b,w]=yield Promise.all([f,g,x]),_=new r(y),k=new e.cF(b,w);for(const t in u){const r=u[t];r instanceof e.a8?(i(r.layers,this.zoom,a),e.cG({bucket:r,glyphMap:y,glyphPositions:_.positions,imageMap:b,imagePositions:k.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:d.subdivisionGranularity})):r.hasPattern&&(r instanceof e.cH||r instanceof e.cI||r instanceof e.cJ)&&(i(r.layers,this.zoom,a),r.addFeatures(d,this.tileID.canonical,k.patternPositions))}return this.status="done",{buckets:Object.values(u).filter((e=>!e.isEmpty())),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:_.image,imageAtlas:k,glyphMap:this.returnDependencies?y:null,iconMap:this.returnDependencies?b:null,glyphPositions:this.returnDependencies?_.positions:null}}))}}function i(t,r,n){const i=new e.F(r);for(const e of t)e.recalculate(i,n)}class a{constructor(e,t,r){this.actor=e,this.layerIndex=t,this.availableImages=r,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(t,r){return e._(this,void 0,void 0,(function*(){const n=yield e.n(t.request,r);try{return{vectorTile:new e.cK.VectorTile(new e.cL(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires}}catch(e){const i=new Uint8Array(n.data);let a=`Unable to parse the tile at ${t.request.url}, `;throw a+=31===i[0]&&139===i[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${e.message}`,new Error(a)}}))}loadTile(t){return e._(this,void 0,void 0,(function*(){const r=t.uid,i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.cM(t.request),a=new n(t);this.loading[r]=a;const s=new AbortController;a.abort=s;try{const n=yield this.loadVectorTile(t,s);if(delete this.loading[r],!n)return null;const o=n.rawData,l={};n.expires&&(l.expires=n.expires),n.cacheControl&&(l.cacheControl=n.cacheControl);const c={};if(i){const e=i.finish();e&&(c.resourceTiming=JSON.parse(JSON.stringify(e)))}a.vectorTile=n.vectorTile;const u=a.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity);this.loaded[r]=a,this.fetching[r]={rawTileData:o,cacheControl:l,resourceTiming:c};try{const t=yield u;return e.e({rawTileData:o.slice(0)},t,l,c)}finally{delete this.fetching[r]}}catch(e){throw delete this.loading[r],a.status="done",this.loaded[r]=a,e}}))}reloadTile(t){return e._(this,void 0,void 0,(function*(){const r=t.uid;if(!this.loaded||!this.loaded[r])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const n=this.loaded[r];if(n.showCollisionBoxes=t.showCollisionBoxes,n.globalState=t.globalState,"parsing"===n.status){const i=yield n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity);let a;if(this.fetching[r]){const{rawTileData:t,cacheControl:n,resourceTiming:s}=this.fetching[r];delete this.fetching[r],a=e.e({rawTileData:t.slice(0)},i,n,s)}else a=i;return a}if("done"===n.status&&n.vectorTile)return n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity)}))}abortTile(t){return e._(this,void 0,void 0,(function*(){const e=this.loading,r=t.uid;e&&e[r]&&e[r].abort&&(e[r].abort.abort(),delete e[r])}))}removeTile(t){return e._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[t.uid]&&delete this.loaded[t.uid]}))}}class s{constructor(){this.loaded={}}loadTile(t){return e._(this,void 0,void 0,(function*(){const{uid:r,encoding:n,rawImageData:i,redFactor:a,greenFactor:s,blueFactor:o,baseShift:l}=t,c=i.width+2,u=i.height+2,d=e.b(i)?new e.R({width:c,height:u},yield e.cN(i,-1,-1,c,u)):i,h=new e.cO(r,d,n,a,s,o,l);return this.loaded=this.loaded||{},this.loaded[r]=h,h}))}removeTile(e){const t=this.loaded,r=e.uid;t&&t[r]&&delete t[r]}}var o,l,c=function(){if(l)return o;function e(e,r){if(0!==e.length){t(e[0],r);for(var n=1;n<e.length;n++)t(e[n],!r)}}function t(e,t){for(var r=0,n=0,i=0,a=e.length,s=a-1;i<a;s=i++){var o=(e[i][0]-e[s][0])*(e[s][1]+e[i][1]),l=r+o;n+=Math.abs(r)>=Math.abs(o)?r-l+o:o-l+r,r=l}r+n>=0!=!!t&&e.reverse()}return l=1,o=function t(r,n){var i,a=r&&r.type;if("FeatureCollection"===a)for(i=0;i<r.features.length;i++)t(r.features[i],n);else if("GeometryCollection"===a)for(i=0;i<r.geometries.length;i++)t(r.geometries[i],n);else if("Feature"===a)t(r.geometry,n);else if("Polygon"===a)e(r.coordinates,n);else if("MultiPolygon"===a)for(i=0;i<r.coordinates.length;i++)e(r.coordinates[i],n);return r}}(),u=e.cP(c);const d=e.cK.VectorTileFeature.prototype.toGeoJSON;class h{constructor(t){this._feature=t,this.extent=e.$,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.P(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const n=[];for(const t of r)n.push(new e.P(t[0],t[1]));t.push(n)}return t}}toGeoJSON(e,t,r){return d.call(this,e,t,r)}}class p{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.$,this.length=t.length,this._features=t}feature(e){return new h(this._features[e])}}var f,m,g,v={exports:{}},x=function(){if(g)return v.exports;g=1;var t=e.cS(),r=function(){if(m)return f;m=1;var t=e.cQ(),r=e.cR().VectorTileFeature;function n(e,t){this.options=t||{},this.features=e,this.length=e.length}function i(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}return f=n,n.prototype.feature=function(e){return new i(this.features[e],this.options.extent)},i.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var r=0;r<e.length;r++){for(var n=e[r],i=[],a=0;a<n.length;a++)i.push(new t(n[a][0],n[a][1]));this.geometry.push(i)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,i=-1/0,a=0;a<e.length;a++)for(var s=e[a],o=0;o<s.length;o++){var l=s[o];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[t,n,r,i]},i.prototype.toGeoJSON=r.prototype.toGeoJSON,f}();function n(e){var r=new t;return function(e,t){for(var r in e.layers)t.writeMessage(3,i,e.layers[r])}(e,r),r.finish()}function i(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,a,n);var i=n.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var s=n.values;for(r=0;r<s.length;r++)t.writeMessage(4,u,s[r])}function a(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,s,e),t.writeVarintField(3,r.type),t.writeMessage(4,c,r)}function s(e,t){var r=e.feature,n=e.keys,i=e.values,a=e.keycache,s=e.valuecache;for(var o in r.properties){var l=r.properties[o],c=a[o];if(null!==l){void 0===c&&(n.push(o),a[o]=c=n.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var d=u+":"+l,h=s[d];void 0===h&&(i.push(l),s[d]=h=i.length-1),t.writeVarint(h)}}}function o(e,t){return(t<<3)+(7&e)}function l(e){return e<<1^e>>31}function c(e,t){for(var r=e.loadGeometry(),n=e.type,i=0,a=0,s=r.length,c=0;c<s;c++){var u=r[c],d=1;1===n&&(d=u.length),t.writeVarint(o(1,d));for(var h=3===n?u.length-1:u.length,p=0;p<h;p++){1===p&&1!==n&&t.writeVarint(o(2,h-1));var f=u[p].x-i,m=u[p].y-a;t.writeVarint(l(f)),t.writeVarint(l(m)),i+=f,a+=m}3===n&&t.writeVarint(o(7,1))}}function u(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}return v.exports=n,v.exports.fromVectorTileJs=n,v.exports.fromGeojsonVt=function(e,t){t=t||{};var i={};for(var a in e)i[a]=new r(e[a].features,t),i[a].name=a,i[a].version=t.version,i[a].extent=t.extent;return n({layers:i})},v.exports.GeoJSONWrapper=r,v.exports}(),y=e.cP(x);const b={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},w=Math.fround||(_=new Float32Array(1),e=>(_[0]=+e,_[0]));var _;class k{constructor(e){this.options=Object.assign(Object.create(b),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:r,maxZoom:n}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const a=[];for(let o=0;o<e.length;o++){const t=e[o];if(!t.geometry)continue;const[r,n]=t.geometry.coordinates,i=w(E(r)),s=w(C(n));a.push(i,s,1/0,o,-1,1),this.options.reduce&&a.push(0)}let s=this.trees[n+1]=this._createTree(a);t&&console.timeEnd(i);for(let o=n;o>=r;o--){const e=+Date.now();s=this.trees[o]=this._createTree(this._cluster(s,o)),t&&console.log("z%d: %d clusters in %dms",o,s.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const e=this.getClusters([r,n,180,a],t),s=this.getClusters([-180,n,i,a],t);return e.concat(s)}const s=this.trees[this._limitZoom(t)],o=s.range(E(r),C(a),E(i),C(n)),l=s.data,c=[];for(const u of o){const e=this.stride*u;c.push(l[e+5]>1?S(l,e,this.clusterProps):this.points[l[e+3]])}return c}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);const a=i.data;if(t*this.stride>=a.length)throw new Error(n);const s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),o=i.within(a[t*this.stride],a[t*this.stride+1],s),l=[];for(const c of o){const t=c*this.stride;a[t+4]===e&&l.push(a[t+5]>1?S(a,t,this.clusterProps):this.points[a[t+3]])}if(0===l.length)throw new Error(n);return l}getLeaves(e,t,r){const n=[];return this._appendLeaves(n,e,t=t||10,r=r||0,0),n}getTile(e,t,r){const n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:a,radius:s}=this.options,o=s/a,l=(r-o)/i,c=(r+1+o)/i,u={features:[]};return this._addTileFeatures(n.range((t-o)/i,l,(t+1+o)/i,c),n.data,t,r,i,u),0===t&&this._addTileFeatures(n.range(1-o/i,l,1,c),n.data,i,r,i,u),t===i-1&&this._addTileFeatures(n.range(0,l,o/i,c),n.data,-1,r,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,n,i){const a=this.getChildren(t);for(const s of a){const t=s.properties;if(t&&t.cluster?i+t.point_count<=n?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,r,n,i):i<n?i++:e.push(s),e.length===r)break}return i}_createTree(t){const r=new e.aH(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)r.add(t[e],t[e+1]);return r.finish(),r.data=t,r}_addTileFeatures(e,t,r,n,i,a){for(const s of e){const e=s*this.stride,o=t[e+5]>1;let l,c,u;if(o)l=j(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const r=this.points[t[e+3]];l=r.properties;const[n,i]=r.geometry.coordinates;c=E(n),u=C(i)}const d={type:1,geometry:[[Math.round(this.options.extent*(c*i-r)),Math.round(this.options.extent*(u*i-n))]],tags:l};let h;h=o||this.options.generateId?t[e+3]:this.points[t[e+3]].id,void 0!==h&&(d.id=h),a.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:r,extent:n,reduce:i,minPoints:a}=this.options,s=r/(n*Math.pow(2,t)),o=e.data,l=[],c=this.stride;for(let u=0;u<o.length;u+=c){if(o[u+2]<=t)continue;o[u+2]=t;const r=o[u],n=o[u+1],d=e.within(o[u],o[u+1],s),h=o[u+5];let p=h;for(const e of d){const r=e*c;o[r+2]>t&&(p+=o[r+5])}if(p>h&&p>=a){let e,a=r*h,s=n*h,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const r of d){const n=r*c;if(o[n+2]<=t)continue;o[n+2]=t;const l=o[n+5];a+=o[n]*l,s+=o[n+1]*l,o[n+4]=m,i&&(e||(e=this._map(o,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(o,n)))}o[u+4]=m,l.push(a/p,s/p,1/0,m,-1,p),i&&l.push(f)}else{for(let e=0;e<c;e++)l.push(o[u+e]);if(p>1)for(const e of d){const r=e*c;if(!(o[r+2]<=t)){o[r+2]=t;for(let e=0;e<c;e++)l.push(o[r+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+5]>1){const n=this.clusterProps[e[t+6]];return r?Object.assign({},n):n}const n=this.points[e[t+3]].properties,i=this.options.map(n);return r&&i===n?Object.assign({},i):i}}function S(e,t,r){return{type:"Feature",id:e[t+3],properties:j(e,t,r),geometry:{type:"Point",coordinates:[(n=e[t],360*(n-.5)),N(e[t+1])]}};var n}function j(e,t,r){const n=e[t+5],i=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?Math.round(n/100)/10+"k":n,a=e[t+6],s=-1===a?{}:Object.assign({},r[a]);return Object.assign(s,{cluster:!0,cluster_id:e[t+3],point_count:n,point_count_abbreviated:i})}function E(e){return e/360+.5}function C(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function N(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function T(e,t,r,n){let i=n;const a=t+(r-t>>1);let s,o=r-t;const l=e[t],c=e[t+1],u=e[r],d=e[r+1];for(let h=t+3;h<r;h+=3){const t=P(e[h],e[h+1],l,c,u,d);if(t>i)s=h,i=t;else if(t===i){const e=Math.abs(h-a);e<o&&(s=h,o=e)}}i>n&&(s-t>3&&T(e,t,s,n),e[s+2]=i,r-s>3&&T(e,s,r,n))}function P(e,t,r,n,i,a){let s=i-r,o=a-n;if(0!==s||0!==o){const l=((e-r)*s+(t-n)*o)/(s*s+o*o);l>1?(r=i,n=a):l>0&&(r+=s*l,n+=o*l)}return s=e-r,o=t-n,s*s+o*o}function A(e,t,r,n){const i={id:null==e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===t||"MultiPoint"===t||"LineString"===t)M(i,r);else if("Polygon"===t)M(i,r[0]);else if("MultiLineString"===t)for(const a of r)M(i,a);else if("MultiPolygon"===t)for(const a of r)M(i,a[0]);return i}function M(e,t){for(let r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function I(e,t,r,n){if(!t.geometry)return;const i=t.geometry.coordinates;if(i&&0===i.length)return;const a=t.geometry.type,s=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2);let o=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===a)O(i,o);else if("MultiPoint"===a)for(const c of i)O(c,o);else if("LineString"===a)D(i,o,s,!1);else if("MultiLineString"===a){if(r.lineMetrics){for(const r of i)o=[],D(r,o,s,!1),e.push(A(l,"LineString",o,t.properties));return}R(i,o,s,!1)}else if("Polygon"===a)R(i,o,s,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(const i of t.geometry.geometries)I(e,{id:l,geometry:i,properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const e of i){const t=[];R(e,t,s,!0),o.push(t)}}e.push(A(l,a,o,t.properties))}function O(e,t){t.push(L(e[0]),F(e[1]),0)}function D(e,t,r,n){let i,a,s=0;for(let l=0;l<e.length;l++){const r=L(e[l][0]),o=F(e[l][1]);t.push(r,o,0),l>0&&(s+=n?(i*o-r*a)/2:Math.sqrt(Math.pow(r-i,2)+Math.pow(o-a,2))),i=r,a=o}const o=t.length-3;t[2]=1,T(t,0,o,r),t[o+2]=1,t.size=Math.abs(s),t.start=0,t.end=t.size}function R(e,t,r,n){for(let i=0;i<e.length;i++){const a=[];D(e[i],a,r,n),t.push(a)}}function L(e){return e/360+.5}function F(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function $(e,t,r,n,i,a,s,o){if(n/=t,a>=(r/=t)&&s<n)return e;if(s<r||a>=n)return null;const l=[];for(const c of e){const e=c.geometry;let t=c.type;const a=0===i?c.minX:c.minY,s=0===i?c.maxX:c.maxY;if(a>=r&&s<n){l.push(c);continue}if(s<r||a>=n)continue;let u=[];if("Point"===t||"MultiPoint"===t)B(e,u,r,n,i);else if("LineString"===t)z(e,u,r,n,i,!1,o.lineMetrics);else if("MultiLineString"===t)V(e,u,r,n,i,!1);else if("Polygon"===t)V(e,u,r,n,i,!0);else if("MultiPolygon"===t)for(const o of e){const e=[];V(o,e,r,n,i,!0),e.length&&u.push(e)}if(u.length){if(o.lineMetrics&&"LineString"===t){for(const e of u)l.push(A(c.id,t,e,c.tags));continue}"LineString"!==t&&"MultiLineString"!==t||(1===u.length?(t="LineString",u=u[0]):t="MultiLineString"),"Point"!==t&&"MultiPoint"!==t||(t=3===u.length?"Point":"MultiPoint"),l.push(A(c.id,t,u,c.tags))}}return l.length?l:null}function B(e,t,r,n,i){for(let a=0;a<e.length;a+=3){const s=e[a+i];s>=r&&s<=n&&H(t,e[a],e[a+1],e[a+2])}}function z(e,t,r,n,i,a,s){let o=U(e);const l=0===i?G:W;let c,u,d=e.start;for(let g=0;g<e.length-3;g+=3){const h=e[g],p=e[g+1],f=e[g+2],m=e[g+3],v=e[g+4],x=0===i?h:p,y=0===i?m:v;let b=!1;s&&(c=Math.sqrt(Math.pow(h-m,2)+Math.pow(p-v,2))),x<r?y>r&&(u=l(o,h,p,m,v,r),s&&(o.start=d+c*u)):x>n?y<n&&(u=l(o,h,p,m,v,n),s&&(o.start=d+c*u)):H(o,h,p,f),y<r&&x>=r&&(u=l(o,h,p,m,v,r),b=!0),y>n&&x<=n&&(u=l(o,h,p,m,v,n),b=!0),!a&&b&&(s&&(o.end=d+c*u),t.push(o),o=U(e)),s&&(d+=c)}let h=e.length-3;const p=e[h],f=e[h+1],m=0===i?p:f;m>=r&&m<=n&&H(o,p,f,e[h+2]),h=o.length-3,a&&h>=3&&(o[h]!==o[0]||o[h+1]!==o[1])&&H(o,o[0],o[1],o[2]),o.length&&t.push(o)}function U(e){const t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function V(e,t,r,n,i,a){for(const s of e)z(s,t,r,n,i,a,!1)}function H(e,t,r,n){e.push(t,r,n)}function G(e,t,r,n,i,a){const s=(a-t)/(n-t);return H(e,a,r+(i-r)*s,1),s}function W(e,t,r,n,i,a){const s=(a-r)/(i-r);return H(e,t+(n-t)*s,a,1),s}function q(e,t){const r=[];for(let n=0;n<e.length;n++){const i=e[n],a=i.type;let s;if("Point"===a||"MultiPoint"===a||"LineString"===a)s=K(i.geometry,t);else if("MultiLineString"===a||"Polygon"===a){s=[];for(const e of i.geometry)s.push(K(e,t))}else if("MultiPolygon"===a){s=[];for(const e of i.geometry){const r=[];for(const n of e)r.push(K(n,t));s.push(r)}}r.push(A(i.id,a,s,i.tags))}return r}function K(e,t){const r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(let n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function Z(e,t){if(e.transformed)return e;const r=1<<e.z,n=e.x,i=e.y;for(const a of e.features){const e=a.geometry,s=a.type;if(a.geometry=[],1===s)for(let o=0;o<e.length;o+=2)a.geometry.push(Y(e[o],e[o+1],t,r,n,i));else for(let o=0;o<e.length;o++){const s=[];for(let a=0;a<e[o].length;a+=2)s.push(Y(e[o][a],e[o][a+1],t,r,n,i));a.geometry.push(s)}}return e.transformed=!0,e}function Y(e,t,r,n,i,a){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-a))]}function X(e,t,r,n,i){const a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:e.length,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const o of e)Q(s,o,a,i);return s}function Q(e,t,r,n){const i=t.geometry,a=t.type,s=[];if(e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),"Point"===a||"MultiPoint"===a)for(let o=0;o<i.length;o+=3)s.push(i[o],i[o+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)J(s,i,e,r,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(let o=0;o<i.length;o++)J(s,i[o],e,r,"Polygon"===a,0===o);else if("MultiPolygon"===a)for(let o=0;o<i.length;o++){const t=i[o];for(let n=0;n<t.length;n++)J(s,t[n],e,r,!0,0===n)}if(s.length){let r=t.tags||null;if("LineString"===a&&n.lineMetrics){r={};for(const e in t.tags)r[e]=t.tags[e];r.mapbox_clip_start=i.start/i.size,r.mapbox_clip_end=i.end/i.size}const o={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:r};null!==t.id&&(o.id=t.id),e.features.push(o)}}function J(e,t,r,n,i,a){const s=n*n;if(n>0&&t.size<(i?s:n))return void(r.numPoints+=t.length/3);const o=[];for(let l=0;l<t.length;l+=3)(0===n||t[l+2]>s)&&(r.numSimplified++,o.push(t[l],t[l+1])),r.numPoints++;i&&function(e,t){let r=0;for(let n=0,i=e.length,a=i-2;n<i;a=n,n+=2)r+=(e[n]-e[a])*(e[n+1]+e[a+1]);if(r>0===t)for(let n=0,i=e.length;n<i/2;n+=2){const t=e[n],r=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=t,e[i-1-n]=r}}(o,a),e.push(o)}const ee={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class te{constructor(e,t){const r=(t=this.options=function(e,t){for(const r in t)e[r]=t[r];return e}(Object.create(ee),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");let n=function(e,t){const r=[];if("FeatureCollection"===e.type)for(let n=0;n<e.features.length;n++)I(r,e.features[n],t,n);else I(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=function(e,t){const r=t.buffer/t.extent;let n=e;const i=$(e,1,-1-r,r,0,-1,2,t),a=$(e,1,1-r,2+r,0,-1,2,t);return(i||a)&&(n=$(e,1,-r,1+r,0,-1,2,t)||[],i&&(n=q(i,1).concat(n)),a&&(n=n.concat(q(a,-1)))),n}(n,t),n.length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(e,t,r,n,i,a,s){const o=[e,t,r,n],l=this.options,c=l.debug;for(;o.length;){n=o.pop(),r=o.pop(),t=o.pop(),e=o.pop();const u=1<<t,d=re(t,r,n);let h=this.tiles[d];if(!h&&(c>1&&console.time("creation"),h=this.tiles[d]=X(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));const e=`z${t}`;this.stats[e]=(this.stats[e]||0)+1,this.total++}if(h.source=e,null==i){if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue}else{if(t===l.maxZoom||t===i)continue;if(null!=i){const e=i-t;if(r!==a>>e||n!==s>>e)continue}}if(h.source=null,0===e.length)continue;c>1&&console.time("clipping");const p=.5*l.buffer/l.extent,f=.5-p,m=.5+p,g=1+p;let v=null,x=null,y=null,b=null,w=$(e,u,r-p,r+m,0,h.minX,h.maxX,l),_=$(e,u,r+f,r+g,0,h.minX,h.maxX,l);e=null,w&&(v=$(w,u,n-p,n+m,1,h.minY,h.maxY,l),x=$(w,u,n+f,n+g,1,h.minY,h.maxY,l),w=null),_&&(y=$(_,u,n-p,n+m,1,h.minY,h.maxY,l),b=$(_,u,n+f,n+g,1,h.minY,h.maxY,l),_=null),c>1&&console.timeEnd("clipping"),o.push(v||[],t+1,2*r,2*n),o.push(x||[],t+1,2*r,2*n+1),o.push(y||[],t+1,2*r+1,2*n),o.push(b||[],t+1,2*r+1,2*n+1)}}getTile(e,t,r){e=+e,t=+t,r=+r;const n=this.options,{extent:i,debug:a}=n;if(e<0||e>24)return null;const s=1<<e,o=re(e,t=t+s&s-1,r);if(this.tiles[o])return Z(this.tiles[o],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,r);let l,c=e,u=t,d=r;for(;!l&&c>0;)c--,u>>=1,d>>=1,l=this.tiles[re(c,u,d)];return l&&l.source?(a>1&&(console.log("found parent tile z%d-%d-%d",c,u,d),console.time("drilling down")),this.splitTile(l.source,c,u,d,e,t,r),a>1&&console.timeEnd("drilling down"),this.tiles[o]?Z(this.tiles[o],i):null):null}}function re(e,t,r){return 32*((1<<e)*r+t)+e}function ne(e,t){return t?e.properties[t]:e.id}function ie(e,t){if(null==e)return!0;if("Feature"===e.type)return null!=ne(e,t);if("FeatureCollection"===e.type){const r=new Set;for(const n of e.features){const e=ne(n,t);if(null==e)return!1;if(r.has(e))return!1;r.add(e)}return!0}return!1}function ae(e,t){const r=new Map;if(null==e);else if("Feature"===e.type)r.set(ne(e,t),e);else for(const n of e.features)r.set(ne(n,t),n);return r}class se extends a{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(t,r){return e._(this,void 0,void 0,(function*(){const e=t.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const r=this._geoJSONIndex.getTile(e.z,e.x,e.y);if(!r)return null;const n=new p(r.features);let i=y(n);return 0===i.byteOffset&&i.byteLength===i.buffer.byteLength||(i=new Uint8Array(i)),{vectorTile:n,rawData:i.buffer}}))}loadData(t){return e._(this,void 0,void 0,(function*(){var r;null===(r=this._pendingRequest)||void 0===r||r.abort();const n=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.cM(t.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(t,this._pendingRequest),this._geoJSONIndex=t.cluster?new k(function(t){let{superclusterOptions:r,clusterProperties:n}=t;if(!n||!r)return r;const i={},a={},s={accumulated:null,zoom:0},o={properties:null},l=Object.keys(n);for(const c of l){const[t,r]=n[c],s=e.cT(r),o=e.cT("string"==typeof t?[t,["accumulated"],["get",c]]:t);i[c]=s.value,a[c]=o.value}return r.map=e=>{o.properties=e;const t={};for(const r of l)t[r]=i[r].evaluate(s,o);return t},r.reduce=(e,t)=>{o.properties=t;for(const r of l)s.accumulated=e[r],e[r]=a[r].evaluate(s,o)},r}(t)).load((yield this._pendingData).features):(i=yield this._pendingData,new te(i,t.geojsonVtOptions)),this.loaded={};const r={};if(n){const e=n.finish();e&&(r.resourceTiming={},r.resourceTiming[t.source]=JSON.parse(JSON.stringify(e)))}return r}catch(t){if(delete this._pendingRequest,e.cx(t))return{abandoned:!0};throw t}var i}))}getData(){return e._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(e){const t=this.loaded;return t&&t[e.uid]?super.reloadTile(e):this.loadTile(e)}loadAndProcessGeoJSON(t,r){return e._(this,void 0,void 0,(function*(){let n=yield this.loadGeoJSON(t,r);if(delete this._pendingRequest,"object"!=typeof n)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(u(n,!0),t.filter){const r=e.cT(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const i=n.features.filter((e=>r.value.evaluate({zoom:0},e)));n={type:"FeatureCollection",features:i}}return n}))}loadGeoJSON(t,r){return e._(this,void 0,void 0,(function*(){const{promoteId:n}=t;if(t.request){const i=yield e.j(t.request,r);return this._dataUpdateable=ie(i.data,n)?ae(i.data,n):void 0,i.data}if("string"==typeof t.data)try{const e=JSON.parse(t.data);return this._dataUpdateable=ie(e,n)?ae(e,n):void 0,e}catch(e){throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`)}if(!t.dataDiff)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${t.source}`);return function(e,t,r){var n,i,a,s;if(t.removeAll&&e.clear(),t.remove)for(const o of t.remove)e.delete(o);if(t.add)for(const o of t.add){const t=ne(o,r);null!=t&&e.set(t,o)}if(t.update)for(const o of t.update){let t=e.get(o.id);if(null==t)continue;const r=!o.removeAllProperties&&((null===(n=o.removeProperties)||void 0===n?void 0:n.length)>0||(null===(i=o.addOrUpdateProperties)||void 0===i?void 0:i.length)>0);if((o.newGeometry||o.removeAllProperties||r)&&(t=Object.assign({},t),e.set(o.id,t),r&&(t.properties=Object.assign({},t.properties))),o.newGeometry&&(t.geometry=o.newGeometry),o.removeAllProperties)t.properties={};else if((null===(a=o.removeProperties)||void 0===a?void 0:a.length)>0)for(const e of o.removeProperties)Object.prototype.hasOwnProperty.call(t.properties,e)&&delete t.properties[e];if((null===(s=o.addOrUpdateProperties)||void 0===s?void 0:s.length)>0)for(const{key:e,value:n}of o.addOrUpdateProperties)t.properties[e]=n}}(this._dataUpdateable,t.dataDiff,n),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(t){return e._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(e){return this._geoJSONIndex.getClusterExpansionZoom(e.clusterId)}getClusterChildren(e){return this._geoJSONIndex.getChildren(e.clusterId)}getClusterLeaves(e){return this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset)}}class oe{constructor(t){this.self=t,this.actor=new e.J(t),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(e,t)=>{if(this.externalWorkerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.externalWorkerSourceTypes[e]=t},this.self.addProtocol=e.cz,this.self.removeProtocol=e.cA,this.self.registerRTLTextPlugin=t=>{e.cU.setMethods(t)},this.actor.registerMessageHandler("LDT",((e,t)=>this._getDEMWorkerSource(e,t.source).loadTile(t))),this.actor.registerMessageHandler("RDT",((t,r)=>e._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(t,r.source).removeTile(r)})))),this.actor.registerMessageHandler("GCEZ",((t,r)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,r.type,r.source).getClusterExpansionZoom(r)})))),this.actor.registerMessageHandler("GCC",((t,r)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,r.type,r.source).getClusterChildren(r)})))),this.actor.registerMessageHandler("GCL",((t,r)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,r.type,r.source).getClusterLeaves(r)})))),this.actor.registerMessageHandler("LD",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadData(t))),this.actor.registerMessageHandler("GD",((e,t)=>this._getWorkerSource(e,t.type,t.source).getData())),this.actor.registerMessageHandler("LT",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadTile(t))),this.actor.registerMessageHandler("RT",((e,t)=>this._getWorkerSource(e,t.type,t.source).reloadTile(t))),this.actor.registerMessageHandler("AT",((e,t)=>this._getWorkerSource(e,t.type,t.source).abortTile(t))),this.actor.registerMessageHandler("RMT",((e,t)=>this._getWorkerSource(e,t.type,t.source).removeTile(t))),this.actor.registerMessageHandler("RS",((t,r)=>e._(this,void 0,void 0,(function*(){if(!this.workerSources[t]||!this.workerSources[t][r.type]||!this.workerSources[t][r.type][r.source])return;const e=this.workerSources[t][r.type][r.source];delete this.workerSources[t][r.type][r.source],void 0!==e.removeSource&&e.removeSource(r)})))),this.actor.registerMessageHandler("RM",(t=>e._(this,void 0,void 0,(function*(){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t]})))),this.actor.registerMessageHandler("SR",((t,r)=>e._(this,void 0,void 0,(function*(){this.referrer=r})))),this.actor.registerMessageHandler("SRPS",((e,t)=>this._syncRTLPluginState(e,t))),this.actor.registerMessageHandler("IS",((t,r)=>e._(this,void 0,void 0,(function*(){this.self.importScripts(r)})))),this.actor.registerMessageHandler("SI",((e,t)=>this._setImages(e,t))),this.actor.registerMessageHandler("UL",((t,r)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).update(r.layers,r.removedIds)})))),this.actor.registerMessageHandler("SL",((t,r)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).replace(r)}))))}_setImages(t,r){return e._(this,void 0,void 0,(function*(){this.availableImages[t]=r;for(const e in this.workerSources[t]){const n=this.workerSources[t][e];for(const e in n)n[e].availableImages=r}}))}_syncRTLPluginState(t,r){return e._(this,void 0,void 0,(function*(){return yield e.cU.syncState(r,this.self.importScripts)}))}_getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}_getLayerIndex(e){let r=this.layerIndexes[e];return r||(r=this.layerIndexes[e]=new t),r}_getWorkerSource(e,t,r){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){const n={sendAsync:(t,r)=>(t.targetMapId=e,this.actor.sendAsync(t,r))};switch(t){case"vector":this.workerSources[e][t][r]=new a(n,this._getLayerIndex(e),this._getAvailableImages(e));break;case"geojson":this.workerSources[e][t][r]=new se(n,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][t][r]=new this.externalWorkerSourceTypes[t](n,this._getLayerIndex(e),this._getAvailableImages(e))}}return this.workerSources[e][t][r]}_getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new s),this.demWorkerSources[e][t]}}return e.i(self)&&(self.worker=new oe(self)),oe})),r("index",["exports","./shared"],(function(e,t){var r="5.6.0";function n(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}let i,a;const s={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(e,r,n){const i=requestAnimationFrame((e=>{a(),r(e)})),{unsubscribe:a}=t.s(e.signal,"abort",(()=>{a(),cancelAnimationFrame(i),n(t.c())}),!1)},frameAsync(e){return new Promise(((t,r)=>{this.frame(e,t,r)}))},getImageData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),r=t.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r},resolveURL:e=>(i||(i=document.createElement("a")),i.href=e,i.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==a&&(a=matchMedia("(prefers-reduced-motion: reduce)")),a.matches)}};class o{static testProp(e){if(!o.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in o.docStyle)return e[t];return e[0]}static create(e,t,r){const n=window.document.createElement(e);return void 0!==t&&(n.className=t),r&&r.appendChild(n),n}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){o.docStyle&&o.selectProp&&(o.userSelect=o.docStyle[o.selectProp],o.docStyle[o.selectProp]="none")}static enableDrag(){o.docStyle&&o.selectProp&&(o.docStyle[o.selectProp]=o.userSelect)}static setTransform(e,t){e.style[o.transformProp]=t}static addEventListener(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,r,"passive"in n?n:n.capture)}static removeEventListener(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,r,"passive"in n?n:n.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",o.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",o.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",o.suppressClickInternal,!0)}),0)}static getScale(e){const t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}static getPoint(e,r,n){const i=r.boundingClientRect;return new t.P((n.clientX-i.left)/r.x-e.clientLeft,(n.clientY-i.top)/r.y-e.clientTop)}static mousePos(e,t){const r=o.getScale(e);return o.getPoint(e,r,t)}static touchPos(e,t){const r=[],n=o.getScale(e);for(let i=0;i<t.length;i++)r.push(o.getPoint(e,n,t[i]));return r}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const t=(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body"),r=t.querySelectorAll("script");for(const n of r)n.remove();return o.clean(t),t.innerHTML}static isPossiblyDangerous(e,t){const r=t.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!r.includes("javascript:")&&!r.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const t=e.children;for(const r of t)o.removeAttributes(r),o.clean(r)}static removeAttributes(e){for(const{name:t,value:r}of e.attributes)o.isPossiblyDangerous(t,r)&&e.removeAttribute(t)}}o.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,o.selectProp=o.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o.transformProp=o.testProp(["transform","WebkitTransform"]);const l={supported:!1,testSupport:function(e){!d&&u&&(h?p(e):c=e)}};let c,u,d=!1,h=!1;function p(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,u),e.isContextLost())return;l.supported=!0}catch(e){}e.deleteTexture(t),d=!0}var f;"undefined"!=typeof document&&(u=document.createElement("img"),u.onload=()=>{c&&p(c),c=null,h=!0},u.onerror=()=>{d=!0,c=null},u.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let r,n,i,a;e.resetRequestQueue=()=>{r=[],n=0,i=0,a={}},e.addThrottleControl=e=>{const t=i++;return a[t]=e,t},e.removeThrottleControl=e=>{delete a[e],o()},e.getImage=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(((a,s)=>{l.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),t.e(e,{type:"image"}),r.push({abortController:n,requestParameters:e,supportImageRefresh:i,state:"queued",onError:e=>{s(e)},onSuccess:e=>{a(e)}}),o()}))};const s=e=>t._(this,void 0,void 0,(function*(){e.state="running";const{requestParameters:r,supportImageRefresh:i,onError:a,onSuccess:s,abortController:l}=e,u=!1===i&&!t.i(self)&&!t.g(r.url)&&(!r.headers||Object.keys(r.headers).reduce(((e,t)=>e&&"accept"===t),!0));n++;const d=u?c(r,l):t.m(r,l);try{const r=yield d;delete e.abortController,e.state="completed",r.data instanceof HTMLImageElement||t.b(r.data)?s(r):r.data&&s({data:yield(h=r.data,"function"==typeof createImageBitmap?t.f(h):t.h(h)),cacheControl:r.cacheControl,expires:r.expires})}catch(t){delete e.abortController,a(t)}finally{n--,o()}var h})),o=()=>{const e=(()=>{for(const e of Object.keys(a))if(a[e]())return!0;return!1})()?t.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let t=n;t<e&&r.length>0;t++){const e=r.shift();e.abortController.signal.aborted?t--:s(e)}},c=(e,r)=>new Promise(((n,i)=>{const a=new Image,s=e.url,o=e.credentials;o&&"include"===o?a.crossOrigin="use-credentials":(o&&"same-origin"===o||!t.d(s))&&(a.crossOrigin="anonymous"),r.signal.addEventListener("abort",(()=>{a.src="",i(t.c())})),a.fetchPriority="high",a.onload=()=>{a.onerror=a.onload=null,n({data:a})},a.onerror=()=>{a.onerror=a.onload=null,r.signal.aborted||i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},a.src=s}))}(f||(f={})),f.resetRequestQueue();class m{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function g(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const r=[];for(const{id:n,url:i}of e){const e=`${n}${i}`;-1===r.indexOf(e)&&(r.push(e),t.push({id:n,url:i}))}}return t}function v(e,t,r){try{const n=new URL(e);return n.pathname+=`${t}${r}`,n.toString()}catch(t){throw new Error(`Invalid sprite URL "${e}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function x(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class y extends t.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,promiseResolve:t}of this.requestors)t(this._getImagesForIds(e));this.requestors=[]}}getImage(e){const r=this.images[e];if(r&&!r.data&&r.spriteData){const e=r.spriteData;r.data=new t.R({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),r.spriteData=null}return r}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t)}_validate(e,r){let n=!0;const i=r.data||r.spriteData;return this._validateStretch(r.stretchX,i&&i.width)||(this.fire(new t.k(new Error(`Image "${e}" has invalid "stretchX" value`))),n=!1),this._validateStretch(r.stretchY,i&&i.height)||(this.fire(new t.k(new Error(`Image "${e}" has invalid "stretchY" value`))),n=!1),this._validateContent(r.content,r)||(this.fire(new t.k(new Error(`Image "${e}" has invalid "content" value`))),n=!1),n}_validateStretch(e,t){if(!e)return!0;let r=0;for(const n of e){if(n[0]<r||n[1]<n[0]||t<n[1])return!1;r=n[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;const r=t.spriteData,n=r&&r.width||t.data.width,i=r&&r.height||t.data.height;return!(e[0]<0||n<e[0]||e[1]<0||i<e[1]||e[2]<0||n<e[2]||e[3]<0||i<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this.getImage(e);if(r&&(n.data.width!==t.data.width||n.data.height!==t.data.height))throw new Error(`size mismatch between old image (${n.data.width}x${n.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=n.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((t,r)=>{let n=!0;if(!this.isLoaded())for(const i of e)this.images[i]||(n=!1);this.isLoaded()||n?t(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:t})}))}_getImagesForIds(e){const r={};for(const n of e){let e=this.getImage(n);e||(this.fire(new t.l("styleimagemissing",{id:n})),e=this.getImage(n)),e?r[n]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,textFitWidth:e.textFitWidth,textFitHeight:e.textFitHeight,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.w(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return r}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(e){const r=this.patterns[e],n=this.getImage(e);if(!n)return null;if(r&&r.position.version===n.version)return r.position;if(r)r.position.version=n.version;else{const r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},i=new t.I(r,n);this.patterns[e]={bin:r,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.T(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:r,h:n}=t.p(e),i=this.atlasImage;i.resize({width:r||1,height:n||1});for(const a in this.patterns){const{bin:e}=this.patterns[a],r=e.x+1,n=e.y+1,s=this.getImage(a).data,o=s.width,l=s.height;t.R.copy(s,i,{x:0,y:0},{x:r,y:n},{width:o,height:l}),t.R.copy(s,i,{x:0,y:l-1},{x:r,y:n-1},{width:o,height:1}),t.R.copy(s,i,{x:0,y:0},{x:r,y:n+l},{width:o,height:1}),t.R.copy(s,i,{x:o-1,y:0},{x:r-1,y:n},{width:1,height:l}),t.R.copy(s,i,{x:0,y:0},{x:r+o,y:n},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const r of e){if(this.callbackDispatchedThisFrame[r])continue;this.callbackDispatchedThisFrame[r]=!0;const e=this.getImage(r);e||t.w(`Image with ID: "${r}" was not found`),x(e)&&this.updateImage(r,e)}}}const b=1e20;function w(e,t,r,n,i,a,s,o,l){for(let c=t;c<t+n;c++)_(e,r*a+c,a,i,s,o,l);for(let c=r;c<r+i;c++)_(e,c*a+t,1,n,s,o,l)}function _(e,t,r,n,i,a,s){a[0]=0,s[0]=-1e20,s[1]=b,i[0]=e[t];for(let o=1,l=0,c=0;o<n;o++){i[o]=e[t+o*r];const n=o*o;do{const e=a[l];c=(i[o]-i[e]+n-e*e)/(o-e)/2}while(c<=s[l]&&--l>-1);l++,a[l]=o,s[l]=c,s[l+1]=b}for(let o=0,l=0;o<n;o++){for(;s[l+1]<o;)l++;const n=a[l],c=o-n;e[t+o*r]=i[n]+c*c}}class k{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return t._(this,void 0,void 0,(function*(){const t=[];for(const i in e)for(const r of e[i])t.push(this._getAndCacheGlyphsPromise(i,r));const r=yield Promise.all(t),n={};for(const{stack:e,id:i,glyph:a}of r)n[e]||(n[e]={}),n[e][i]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics};return n}))}_getAndCacheGlyphsPromise(e,r){return t._(this,void 0,void 0,(function*(){let t=this.entries[e];t||(t=this.entries[e]={glyphs:{},requests:{},ranges:{}});let n=t.glyphs[r];if(void 0!==n)return{stack:e,id:r,glyph:n};if(n=this._tinySDF(t,e,r),n)return t.glyphs[r]=n,{stack:e,id:r,glyph:n};const i=Math.floor(r/256);if(256*i>65535)throw new Error("glyphs > 65535 not supported");if(t.ranges[i])return{stack:e,id:r,glyph:n};if(!this.url)throw new Error("glyphsUrl is not set");if(!t.requests[i]){const r=k.loadGlyphRange(e,i,this.url,this.requestManager);t.requests[i]=r}const a=yield t.requests[i];for(const e in a)this._doesCharSupportLocalGlyph(+e)||(t.glyphs[+e]=a[+e]);return t.ranges[i]=!0,{stack:e,id:r,glyph:a[r]||null}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(e))||t.u["CJK Unified Ideographs"](e)||t.u["Hangul Syllables"](e)||t.u.Hiragana(e)||t.u.Katakana(e)||t.u["CJK Symbols and Punctuation"](e)||t.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,r,n){const i=this.localIdeographFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(n))return;let a=e.tinySDF;if(!a){let t="400";/bold/i.test(r)?t="900":/medium/i.test(r)?t="500":/light/i.test(r)&&(t="200"),a=e.tinySDF=new k.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:i,fontWeight:t})}const s=a.draw(String.fromCharCode(n));return{id:n,bitmap:new t.q({width:s.width||60,height:s.height||60},s.data),metrics:{width:s.glyphWidth/2||24,height:s.glyphHeight/2||24,left:s.glyphLeft/2+.5||0,top:s.glyphTop/2-27.5||-8,advance:s.glyphAdvance/2||24,isDoubleResolution:!0}}}}k.loadGlyphRange=function(e,r,n,i){return t._(this,void 0,void 0,(function*(){const a=256*r,s=a+255,o=i.transformRequest(n.replace("{fontstack}",e).replace("{range}",`${a}-${s}`),"Glyphs"),l=yield t.n(o,new AbortController);if(!l||!l.data)throw new Error(`Could not load glyph range. range: ${r}, ${a}-${s}`);const c={};for(const e of t.o(l.data))c[e.id]=e;return c}))},k.TinySDF=class{constructor(){let{fontSize:e=24,buffer:t=3,radius:r=8,cutoff:n=.25,fontFamily:i="sans-serif",fontWeight:a="normal",fontStyle:s="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=n,this.radius=r;const o=this.size=e+4*t,l=this._createCanvas(o),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${s} ${a} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:i,actualBoundingBoxRight:a}=this.ctx.measureText(e),s=Math.ceil(r),o=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-i))),l=Math.min(this.size-this.buffer,s+Math.ceil(n)),c=o+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),p={data:h,width:c,height:u,glyphWidth:o,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:t};if(0===o||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:v}=this;f.clearRect(m,m,o,l),f.fillText(e,m,m+s);const x=f.getImageData(m,m,o,l);v.fill(b,0,d),g.fill(0,0,d);for(let y=0;y<l;y++)for(let e=0;e<o;e++){const t=x.data[4*(y*o+e)+3]/255;if(0===t)continue;const r=(y+m)*c+e+m;if(1===t)v[r]=0,g[r]=b;else{const e=.5-t;v[r]=e>0?e*e:0,g[r]=e<0?e*e:0}}w(v,0,0,c,u,c,this.f,this.v,this.z),w(g,m,m,o,l,c,this.f,this.v,this.z);for(let y=0;y<d;y++){const e=Math.sqrt(v[y])-Math.sqrt(g[y]);h[y]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};class S{constructor(){this.specification=t.v.light.position}possiblyEvaluate(e,r){return t.B(e.expression.evaluate(r))}interpolate(e,r,n){return{x:t.C.number(e.x,r.x,n),y:t.C.number(e.y,r.y,n),z:t.C.number(e.z,r.z,n)}}}let j;class E extends t.E{constructor(e){super(),j=j||new t.r({anchor:new t.D(t.v.light.anchor),position:new S,color:new t.D(t.v.light.color),intensity:new t.D(t.v.light.intensity)}),this._transitionable=new t.t(j),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.x,e,r))for(const t in e){const r=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),r):this._transitionable.setValue(t,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r,n){return(!n||!1!==n.validate)&&t.y(this,e.call(t.z,{value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.v}))}}const C=new t.r({"sky-color":new t.D(t.v.sky["sky-color"]),"horizon-color":new t.D(t.v.sky["horizon-color"]),"fog-color":new t.D(t.v.sky["fog-color"]),"fog-ground-blend":new t.D(t.v.sky["fog-ground-blend"]),"horizon-fog-blend":new t.D(t.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new t.D(t.v.sky["sky-horizon-blend"]),"atmosphere-blend":new t.D(t.v.sky["atmosphere-blend"])});class N extends t.E{constructor(e){super(),this._transitionable=new t.t(C),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.F(0))}setSky(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.G,e,r)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const t in e){const r=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),r):this._transitionable.setValue(t,r)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!1!==(null==n?void 0:n.validate)&&t.y(this,e.call(t.z,t.e({value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class T{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const r=e.join(",")+String(t);return this.dashEntry[r]||(this.dashEntry[r]=this.addDash(e,t)),this.dashEntry[r]}getDashRanges(e,t,r){const n=[];let i=e.length%2==1?-e[e.length-1]*r:0,a=e[0]*r,s=!0;n.push({left:i,right:a,isDash:s,zeroLength:0===e[0]});let o=e[0];for(let l=1;l<e.length;l++){s=!s;const t=e[l];i=o*r,o+=t,a=o*r,n.push({left:i,right:a,isDash:s,zeroLength:0===t})}return n}addRoundDash(e,t,r){const n=t/2;for(let i=-r;i<=r;i++){const t=this.width*(this.nextRow+r+i);let a=0,s=e[a];for(let o=0;o<this.width;o++){o/s.right>1&&(s=e[++a]);const l=Math.abs(o-s.left),c=Math.abs(o-s.right),u=Math.min(l,c);let d;const h=i/r*(n+1);if(s.isDash){const e=n-Math.abs(h);d=Math.sqrt(u*u+e*e)}else d=n-Math.sqrt(u*u+h*h);this.data[t+o]=Math.max(0,Math.min(255,d+128))}}}addRegularDash(e){for(let s=e.length-1;s>=0;--s){const t=e[s],r=e[s+1];t.zeroLength?e.splice(s,1):r&&r.isDash===t.isDash&&(r.left=t.left,e.splice(s,1))}const t=e[0],r=e[e.length-1];t.isDash===r.isDash&&(t.left=r.left-this.width,r.right=t.right+this.width);const n=this.width*this.nextRow;let i=0,a=e[i];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++i]);const t=Math.abs(s-a.left),r=Math.abs(s-a.right),o=Math.min(t,r);this.data[n+s]=Math.max(0,Math.min(255,(a.isDash?o:-o)+128))}}addDash(e,r){const n=r?7:0,i=2*n+1;if(this.nextRow+i>this.height)return t.w("LineAtlas out of space"),null;let a=0;for(let t=0;t<e.length;t++)a+=e[t];if(0!==a){const t=this.width/a,i=this.getDashRanges(e,this.width,t);r?this.addRoundDash(i,t,n):this.addRegularDash(i)}const s={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:a};return this.nextRow+=i,this.dirty=!0,s}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}const P="maplibre_preloaded_worker_pool";class A{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<A.workerCount;)this.workers.push(new Worker(t.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[P]}numActive(){return Object.keys(this.active).length}}const M=Math.floor(s.hardwareConcurrency/2);let I,O;function D(){return I||(I=new A),I}A.workerCount=t.H(globalThis)?Math.max(Math.min(M,3),1):1;class R{constructor(e,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r;const n=this.workerPool.acquire(r);for(let i=0;i<n.length;i++){const e=new t.J(n[i],r);e.name=`Worker ${i}`,this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t){const r=[];for(const n of this.actors)r.push(n.sendAsync({type:e,data:t}));return Promise.all(r)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.actors.forEach((e=>{e.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,t){for(const r of this.actors)r.registerMessageHandler(e,t)}}function L(){return O||(O=new R(D(),t.K),O.registerMessageHandler("GR",((e,r,n)=>t.m(r,n)))),O}function F(e,r){const n=t.L();return t.M(n,n,[1,1,0]),t.N(n,n,[.5*e.width,.5*e.height,1]),e.calculatePosMatrix?t.O(n,n,e.calculatePosMatrix(r.toUnwrapped())):n}function $(e,t,r,n,i,a,s){var o;const l=function(e,t,r){if(e)for(const n of e){const e=t[n];if(e&&e.source===r&&"fill-extrusion"===e.type)return!0}else for(const n in t){const e=t[n];if(e.source===r&&"fill-extrusion"===e.type)return!0}return!1}(null!==(o=null==i?void 0:i.layers)&&void 0!==o?o:null,t,e.id),c=a.maxPitchScaleFactor(),u=e.tilesIn(n,c,l);u.sort(B);const d=[];for(const h of u)d.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,r,e._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,a,c,F(e.transform,h.tileID),s?(e,t)=>s(h.tileID,e,t):void 0)});return function(e,t){for(const r in e)for(const n of e[r])z(n,t);return e}(function(e){const t={},r={};for(const n of e){const e=n.queryResults,i=n.wrappedTileID,a=r[i]=r[i]||{};for(const r in e){const n=e[r],i=a[r]=a[r]||{},s=t[r]=t[r]||[];for(const e of n)i[e.featureIndex]||(i[e.featureIndex]=!0,s.push(e))}}return t}(d),e)}function B(e,t){const r=e.tileID,n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function z(e,t){const r=e.feature,n=t.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n}function U(e,r,n){return t._(this,void 0,void 0,(function*(){let i=e;if(e.url?i=(yield t.j(r.transformRequest(e.url,"Source"),n)).data:yield s.frameAsync(n),!i)return null;const a=t.Q(t.e(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in i&&i.vector_layers&&(a.vectorLayerIds=i.vector_layers.map((e=>e.id))),a}))}class V{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof t.S?new t.S(e.lng,e.lat):t.S.convert(e),this}setSouthWest(e){return this._sw=e instanceof t.S?new t.S(e.lng,e.lat):t.S.convert(e),this}extend(e){const r=this._sw,n=this._ne;let i,a;if(e instanceof t.S)i=e,a=e;else{if(!(e instanceof V))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(V.convert(e)):this.extend(t.S.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(t.S.convert(e)):this;if(i=e._sw,a=e._ne,!i||!a)return this}return r||n?(r.lng=Math.min(i.lng,r.lng),r.lat=Math.min(i.lat,r.lat),n.lng=Math.max(a.lng,n.lng),n.lat=Math.max(a.lat,n.lat)):(this._sw=new t.S(i.lng,i.lat),this._ne=new t.S(a.lng,a.lat)),this}getCenter(){return new t.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new t.S(this.getWest(),this.getNorth())}getSouthEast(){return new t.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:n}=t.S.convert(e);let i=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i}static convert(e){return e instanceof V?e:e?new V(e):e}static fromLngLat(e){const r=360*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/40075017,n=r/Math.cos(Math.PI/180*e.lat);return new V(new t.S(e.lng-n,e.lat-r),new t.S(e.lng+n,e.lat+r))}adjustAntiMeridian(){const e=new t.S(this._sw.lng,this._sw.lat),r=new t.S(this._ne.lng,this._ne.lat);return new V(e,e.lng>r.lng?new t.S(r.lng+360,r.lat):r)}}class H{constructor(e,t,r){this.bounds=V.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const r=Math.pow(2,e.z),n=Math.floor(t.V(this.bounds.getWest())*r),i=Math.floor(t.U(this.bounds.getNorth())*r),a=Math.ceil(t.V(this.bounds.getEast())*r),s=Math.ceil(t.U(this.bounds.getSouth())*r);return e.x>=n&&e.x<a&&e.y>=i&&e.y<s}}class G extends t.E{constructor(e,r,n,i){if(super(),this.id=e,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.e(this,t.Q(r,["url","scheme","tileSize","promoteId"])),this._options=t.e({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield U(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(t.e(this,e),e.bounds&&(this.tileBounds=new H(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.k(e))}}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return t.e({},this._options)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),r={request:this.map._requestManager.transformRequest(t,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};r.request.collectResourceTiming=this._collectResourceTiming;let n="RT";if(e.actor&&"expired"!==e.state){if("loading"===e.state)return new Promise(((t,r)=>{e.reloadPromise={resolve:t,reject:r}}))}else e.actor=this.dispatcher.getActor(),n="LT";e.abortController=new AbortController;try{const t=yield e.actor.sendAsync({type:n,data:r},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,t)}catch(t){if(delete e.abortController,e.aborted)return;if(t&&404!==t.status)throw t;this._afterTileLoadWorkerResponse(e,null)}}))}_afterTileLoadWorkerResponse(e,t){if(t&&t.resourceTiming&&(e.resourceTiming=t.resourceTiming),t&&this.map._refreshExpiredTiles&&e.setExpiryData(t),e.loadVectorData(t,this.map.painter),e.reloadPromise){const t=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(t.resolve).catch(t.reject)}}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class W extends t.E{constructor(e,r,n,i){super(),this.id=e,this.dispatcher=n,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.e({type:"raster"},r),t.e(this,t.Q(r,["url","scheme","tileSize"]))}load(){return t._(this,arguments,void 0,(function(){var e=this;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){e._loaded=!1,e.fire(new t.l("dataloading",{dataType:"source"})),e._tileJSONRequest=new AbortController;try{const n=yield U(e._options,e.map._requestManager,e._tileJSONRequest);e._tileJSONRequest=null,e._loaded=!0,n&&(t.e(e,n),n.bounds&&(e.tileBounds=new H(n.bounds,e.minzoom,e.maxzoom)),e.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(r){e._tileJSONRequest=null,e.fire(new t.k(r))}}()}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}serialize(){return t.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return t._(this,void 0,void 0,(function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const n=yield f.getImage(this.map._requestManager.transformRequest(r,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(n&&n.data){this.map._refreshExpiredTiles&&(n.cacheControl||n.expires)&&e.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const r=this.map.painter.context,i=r.gl,a=n.data;e.texture=this.map.painter.getTileTexture(a.width),e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new t.T(r,a,i.RGBA,{useMipmap:!0}),e.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)}))}hasTransition(){return!1}}class q extends W{constructor(e,r,n,i){super(e,r,n,i),this.type="raster-dem",this.maxzoom=22,this._options=t.e({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox",this.redFactor=r.redFactor,this.greenFactor=r.greenFactor,this.blueFactor=r.blueFactor,this.baseShift=r.baseShift}loadTile(e){return t._(this,void 0,void 0,(function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n=this.map._requestManager.transformRequest(r,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const r=yield f.getImage(n,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(r&&r.data){const n=r.data;this.map._refreshExpiredTiles&&(r.cacheControl||r.expires)&&e.setExpiryData({cacheControl:r.cacheControl,expires:r.expires});const i=t.b(n)&&t.W()?n:yield this.readImageNow(n),a={type:this.type,uid:e.uid,source:this.id,rawImageData:i,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||"expired"===e.state){e.actor=this.dispatcher.getActor();const t=yield e.actor.sendAsync({type:"LDT",data:a});e.dem=t,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}readImageNow(e){return t._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&t.X()){const r=e.width+2,n=e.height+2;try{return new t.R({width:r,height:n},yield t.Y(e,-1,-1,r,n))}catch(e){}}return s.getImageData(e,1)}))}_getNeighboringTiles(e){const r=e.canonical,n=Math.pow(2,r.z),i=(r.x-1+n)%n,a=0===r.x?e.wrap-1:e.wrap,s=(r.x+1+n)%n,o=r.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.Z(e.overscaledZ,a,r.z,i,r.y).key]={backfilled:!1},l[new t.Z(e.overscaledZ,o,r.z,s,r.y).key]={backfilled:!1},r.y>0&&(l[new t.Z(e.overscaledZ,a,r.z,i,r.y-1).key]={backfilled:!1},l[new t.Z(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new t.Z(e.overscaledZ,o,r.z,s,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new t.Z(e.overscaledZ,a,r.z,i,r.y+1).key]={backfilled:!1},l[new t.Z(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new t.Z(e.overscaledZ,o,r.z,s,r.y+1).key]={backfilled:!1}),l}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))}))}}class K extends t.E{constructor(e,r,n,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=n.getActor(),this.setEventedParent(i),this._data=r.data,this._options=t.e({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId,void 0!==r.clusterMaxZoom&&this.maxzoom<=r.clusterMaxZoom&&t.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${r.clusterMaxZoom}".`),this.workerOptions=t.e({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(void 0!==r.buffer?r.buffer:128),tolerance:this._pixelsToTileUnits(void 0!==r.tolerance?r.tolerance:.375),extent:t.$,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(r.clusterMaxZoom),minPoints:Math.max(2,r.clusterMinPoints||2),extent:t.$,radius:this._pixelsToTileUnits(r.clusterRadius||50),log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(e){return e*(t.$/this.tileSize)}_getClusterMaxZoom(e){const r=e?Math.round(e):this.maxzoom-1;return Number.isInteger(e)||void 0===e||t.w(`Integer expected for option 'clusterMaxZoom': provided value "${e}" rounded to "${r}"`),r}load(){return t._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return t._(this,void 0,void 0,(function*(){const e=t.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})}))}getCoordinatesFromGeometry(e){return"GeometryCollection"===e.type?e.geometries.map((e=>e.coordinates)).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return t._(this,void 0,void 0,(function*(){const e=new V,t=yield this.getData();let r;switch(t.type){case"FeatureCollection":r=t.features.map((e=>this.getCoordinatesFromGeometry(e.geometry))).flat(1/0);break;case"Feature":r=this.getCoordinatesFromGeometry(t.geometry);break;default:r=this.getCoordinatesFromGeometry(t)}if(0==r.length)return e;for(let n=0;n<r.length-1;n+=2)e.extend([r[n],r[n+1]]);return e}))}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(e.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,t,r){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:t,offset:r}})}_updateWorkerData(e){return t._(this,void 0,void 0,(function*(){const r=t.e({type:this.type},this.workerOptions);e?r.dataDiff=e:"string"==typeof this._data?(r.request=this.map._requestManager.transformRequest(s.resolveURL(this._data),"Source"),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new t.l("dataloading",{dataType:"source"}));try{const e=yield this.actor.sendAsync({type:"LD",data:r});if(this._pendingLoads--,this._removed||e.abandoned)return void this.fire(new t.l("dataabort",{dataType:"source"}));let n=null;e.resourceTiming&&e.resourceTiming[this.id]&&(n=e.resourceTiming[this.id].slice(0));const i={dataType:"source"};this._collectResourceTiming&&n&&n.length>0&&t.e(i,{resourceTiming:n}),this.fire(new t.l("data",Object.assign(Object.assign({},i),{sourceDataType:"metadata"}))),this.fire(new t.l("data",Object.assign(Object.assign({},i),{sourceDataType:"content"})))}catch(e){if(this._pendingLoads--,this._removed)return void this.fire(new t.l("dataabort",{dataType:"source"}));this.fire(new t.k(e))}}))}loaded(){return 0===this._pendingLoads}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.actor?"RT":"LT";e.actor=this.actor;const r={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};e.abortController=new AbortController;const n=yield this.actor.sendAsync({type:t,data:r},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(n,this.map.painter,"RT"===t)}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return t.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Z extends t.E{constructor(e,t,r,n){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=t}load(e){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const t=yield f.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,t&&t.data&&(this.image=t.data,e&&(this.coordinates=e),this._finishLoading())}catch(e){this._request=null,this._loaded=!0,this.fire(new t.k(e))}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const r=e.map(t.a0.fromLngLat);var n;return this.tileID=function(e){const r=t.a1.fromPoints(e),n=r.width(),i=r.height(),a=Math.max(n,i),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),o=Math.pow(2,s);return new t.a3(s,Math.floor((r.minX+r.maxX)/2*o),Math.floor((r.minY+r.maxY)/2*o))}(r),this.terrainTileRanges=this._getOverlappingTileRanges(r),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=r.map((e=>this.tileID.getTilePoint(e)._round())),this.flippedWindingOrder=((n=this.tileCoords)[1].x-n[0].x)*(n[2].y-n[0].y)-(n[1].y-n[0].y)*(n[2].x-n[0].x)<0,this.fire(new t.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,r=e.gl;this.texture||(this.texture=new t.T(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let n=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,n=!0)}n&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return t._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){const{minX:r,minY:n,maxX:i,maxY:a}=t.a1.fromPoints(e),s={};for(let o=0;o<=t.a2;o++){const e=Math.pow(2,o),t=Math.floor(r*e),l=Math.floor(n*e),c=Math.floor(i*e),u=Math.floor(a*e);s[o]={minTileX:t,minTileY:l,maxTileX:c,maxTileY:u}}return s}}class Y extends Z{constructor(e,t,r,n){super(e,t,r,n),this.roundZoom=!0,this.type="video",this.options=t}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,"Source").url);try{const e=yield t.a4(this.urls);if(this._loaded=!0,!e)return;this.video=e,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(e){this.fire(new t.k(e))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new t.k(new t.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,r=e.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new t.T(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let n=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,n=!0)}n&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class X extends Z{constructor(e,r,n,i){super(e,r,n,i),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new t.k(new t.a5(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.k(new t.a5(`sources.${e}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.k(new t.a5(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof HTMLCanvasElement||this.fire(new t.k(new t.a5(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.k(new t.a5(`sources.${e}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const r=this.map.painter.context,n=r.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.T(r,this.canvas,n.RGBA,{premultiply:!0});let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Q={},J=e=>{switch(e){case"geojson":return K;case"image":return Z;case"raster":return W;case"raster-dem":return q;case"vector":return G;case"video":return Y;case"canvas":return X}return Q[e]},ee="RTLPluginLoaded";class te extends t.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=L()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch((e=>{throw this.status="error",e}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return t._(this,arguments,void 0,(function(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){if(t.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(t.url=s.resolveURL(e),!t.url)throw new Error(`requested url ${e} is invalid`);if("unavailable"===t.status){if(!r)return t._requestImport();t.status="deferred",t._syncState(t.status)}else if("requested"===t.status)return t._requestImport()}()}))}_requestImport(){return t._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new t.l(ee))}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let re=null;function ne(){return re||(re=new te),re}class ie{constructor(e,r){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=t.a6(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,r,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const r={};if(!t)return r;for(const n of e){const e=n.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){n.layers=e,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)r[t.id]=n}}return r}(e.buckets,null==r?void 0:r.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const r=this.buckets[e];if(r instanceof t.a8){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const r=this.buckets[e];if(r instanceof t.a8&&r.hasRTLText){this.hasRTLText=!0,ne().lazyLoad();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(e).queryRadius(t))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.a7}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const r=this.buckets[t];r.uploadPending()&&r.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new t.T(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new t.T(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,r,n,i,a,s,o,l,c,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:i,scale:a,tileSize:this.tileSize,pixelPosMatrix:c,transform:o,params:s,queryPadding:this.queryPadding*l,getElevation:u},e,t,r):{}}querySourceFeatures(e,r){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const i=n.loadVTLayers(),a=r&&r.sourceLayer?r.sourceLayer:"",s=i._geojsonTileLayer||i[a];if(!s)return;const o=t.a9(r&&r.filter),{z:l,x:c,y:u}=this.tileID.canonical,d={z:l,x:c,y:u};for(let h=0;h<s.length;h++){const r=s.feature(h);if(o.needGeometry){const e=t.aa(r,!0);if(!o.filter(new t.F(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!o.filter(new t.F(this.tileID.overscaledZ),r))continue;const i=n.getId(r,a),p=new t.ab(r,l,c,u,i);p.tile=d,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const r=t.ac(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(r)if(this.expirationTime<r)t=!0;else{const n=this.expirationTime-r;n?this.expirationTime=e+Math.max(n,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const r=this.latestFeatureIndex.loadVTLayers();for(const n in this.buckets){if(!t.style.hasLayer(n))continue;const i=this.buckets[n],a=i.layers[0].sourceLayer||"_geojsonTileLayer",s=r[a],o=e[a];if(!s||!o||0===Object.keys(o).length)continue;i.update(o,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=s.now()+e}setDependencies(e,t){const r={};for(const n of t)r[n]=!0;this.dependencies[e]=r}hasDependency(e,t){for(const r of e){const e=this.dependencies[r];if(e)for(const r of t)if(e[r])return!0}return!1}}class ae{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,r){const n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const i={value:t,timeout:void 0};if(void 0!==r&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),r)),this.data[n].push(i),this.order.push(n),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const r=e.wrapped().key,n=void 0===t?0:this.data[r].indexOf(t),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const r in this.data)for(const n of this.data[r])e(n.value)||t.push(n);for(const r of t)this.remove(r.value.tileID,r)}}class se{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,n){const i=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},t.e(this.stateChanges[e][i],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])n[t]||(this.deletedStates[e][i][t]=null)}else for(const t in n)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(e,t,r){if(null===this.deletedStates[e])return;const n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(r in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][r]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}getState(e,r){const n=String(r),i=t.e({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][r];if(null===t)return{};for(const e in t)delete i[e]}return i}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,r){const n={};for(const i in this.stateChanges){this.state[i]=this.state[i]||{};const e={};for(const r in this.stateChanges[i])this.state[i][r]||(this.state[i][r]={}),t.e(this.state[i][r],this.stateChanges[i][r]),e[r]=this.state[i][r];n[i]=e}for(const i in this.deletedStates){this.state[i]=this.state[i]||{};const e={};if(null===this.deletedStates[i])for(const t in this.state[i])e[t]={},this.state[i][t]={};else for(const t in this.deletedStates[i]){if(null===this.deletedStates[i][t])this.state[i][t]={};else for(const e of Object.keys(this.deletedStates[i][t]))delete this.state[i][t][e];e[t]=this.state[i][t]}n[i]=n[i]||{},t.e(n[i],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const t in e)e[t].setFeatureState(n,r)}}const oe=89.25;function le(e,r){const n=t.ag(r.lat,-85.051129,t.ah);return new t.P(t.V(r.lng)*e,t.U(n)*e)}function ce(e,r){return new t.a0(r.x/e,r.y/e).toLngLat()}function ue(e){return e.cameraToCenterDistance*Math.min(.85*Math.tan(t.ad(90-e.pitch)),Math.tan(t.ad(oe-e.pitch)))}function de(e,r){const n=e.canonical,i=r/t.ae(n.z),a=n.x+Math.pow(2,n.z)*e.wrap,s=t.af(new Float64Array(16));return t.M(s,s,[a*i,n.y*i,0]),t.N(s,s,[i/t.$,i/t.$,1]),s}function he(e,r,n,i,a){const s=t.a0.fromLngLat(e,r),o=a*t.ai(1,e.lat),l=o*Math.cos(t.ad(n)),c=Math.sqrt(o*o-l*l),u=c*Math.sin(t.ad(-i)),d=c*Math.cos(t.ad(-i));return new t.a0(s.x+u,s.y+d,s.z+l)}function pe(e,t,r){const n=t.intersectsFrustum(e);if(!r||0===n)return n;const i=t.intersectsPlane(r);return 0===i?0:2===n&&2===i?2:1}function fe(e,t,r){let n=0;const i=(r-t)/10;for(let a=0;a<10;a++)n+=i*Math.pow(Math.cos(t+(a+.5)/10*(r-t)),e);return n}function me(e,r){return function(n,i,a,s,o){const l=2*((e-1)/t.aj(Math.cos(t.ad(oe-o))/Math.cos(t.ad(oe)))-1),c=Math.acos(a/s),u=2*fe(l-1,0,t.ad(o/2)),d=Math.min(t.ad(oe),c+t.ad(o/2)),h=fe(l-1,Math.min(d,c-t.ad(o/2)),d),p=Math.atan(i/a),f=Math.hypot(i,a);let m=n;return m+=t.aj(s/f/Math.max(.5,Math.cos(t.ad(o/2)))),m+=l*t.aj(Math.cos(p))/2,m-=t.aj(Math.max(1,h/u/r))/2,m}}const ge=me(9.314,3);function ve(e,r){const n=(r.roundZoom?Math.round:Math.floor)(e.zoom+t.aj(e.tileSize/r.tileSize));return Math.max(0,n)}function xe(e,r){const n=e.getCameraFrustum(),i=e.getClippingPlane(),a=e.screenPointToMercatorCoordinate(e.getCameraPoint()),s=t.a0.fromLngLat(e.center,e.elevation);a.z=s.z+Math.cos(e.pitchInRadians)*e.cameraToCenterDistance/e.worldSize;const o=e.getCoveringTilesDetailsProvider(),l=o.allowVariableZoom(e,r),c=ve(e,r),u=r.minzoom||0,d=void 0!==r.maxzoom?r.maxzoom:e.maxZoom,h=Math.min(Math.max(0,c),d),p=Math.pow(2,h),f=[p*a.x,p*a.y,0],m=[p*s.x,p*s.y,0],g=Math.hypot(s.x-a.x,s.y-a.y),v=Math.abs(s.z-a.z),x=Math.hypot(g,v),y=e=>({zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),b=[],w=[];if(e.renderWorldCopies&&o.allowWorldCopies())for(let t=1;t<=3;t++)b.push(y(-t)),b.push(y(t));for(b.push(y(0));b.length>0;){const p=b.pop(),g=p.x,y=p.y;let _=p.fullyVisible;const k={x:g,y:y,z:p.zoom},S=o.getTileBoundingVolume(k,p.wrap,e.elevation,r);if(!_){const e=pe(n,S,i);if(0===e)continue;_=2===e}const j=o.distanceToTile2d(a.x,a.y,k,S);let E=c;l&&(E=(r.calculateTileZoom||ge)(e.zoom+t.aj(e.tileSize/r.tileSize),j,v,x,e.fov)),E=(r.roundZoom?Math.round:Math.floor)(E),E=Math.max(0,E);const C=Math.min(E,d);if(p.wrap=o.getWrap(s,k,p.wrap),p.zoom>=C){if(p.zoom<u)continue;const e=h-p.zoom,n=f[0]-.5-(g<<e),i=f[1]-.5-(y<<e),a=r.reparseOverscaled?Math.max(p.zoom,E):p.zoom;w.push({tileID:new t.Z(p.zoom===d?a:p.zoom,p.wrap,p.zoom,g,y),distanceSq:t.ak([m[0]-.5-g,m[1]-.5-y]),tileDistanceToCamera:Math.sqrt(n*n+i*i)})}else for(let e=0;e<4;e++)b.push({zoom:p.zoom+1,x:(g<<1)+e%2,y:(y<<1)+(e>>1),wrap:p.wrap,fullyVisible:_})}return w.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}const ye=t.a1.fromPoints([new t.P(0,0),new t.P(t.$,t.$)]);class be extends t.E{constructor(e,t,r){super(),this.id=e,this.dispatcher=r,this.on("data",(e=>this._dataHandler(e))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((e,t,r,n)=>{const i=new(J(t.type))(e,t,r,n);if(i.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${i.id}`);return i})(e,t,r,this),this._tiles={},this._cache=new ae(0,(e=>this._unloadTile(e))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new se,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,r,n){return t._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,r,n)}catch(r){e.state="errored",404!==r.status?this._source.fire(new t.k(r,{tile:e})):this.update(this.transform,this.terrain)}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new t.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(we).map((e=>e.key))}getRenderableIds(e){const r=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&r.push(this._tiles[t]);return e?r.sort(((e,r)=>{const n=e.tileID,i=r.tileID,a=new t.P(n.canonical.x,n.canonical.y)._rotate(-this.transform.bearingInRadians),s=new t.P(i.canonical.x,i.canonical.y)._rotate(-this.transform.bearingInRadians);return n.overscaledZ-i.overscaledZ||s.y-a.y||s.x-a.x})).map((e=>e.tileID.key)):r.map((e=>e.tileID)).sort(we).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)e?this._reloadTile(t,"expired"):"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(e,r){return t._(this,void 0,void 0,(function*(){const t=this._tiles[e];t&&("loading"!==t.state&&(t.state=r),yield this._loadTile(t,e,r))}))}_tileLoaded(e,r,n){e.timeAdded=s.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let n=0;n<t.length;n++){const i=t[n];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);r(e,t),r(t,e)}}function r(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let r=t.tileID.canonical.x-e.tileID.canonical.x;const n=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,n),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,r,n){for(const i in this._tiles){let a=this._tiles[i];if(n[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>r)continue;let s=a.tileID;for(;a&&a.tileID.overscaledZ>t+1;){const e=a.tileID.scaledTo(a.tileID.overscaledZ-1);a=this._tiles[e.key],a&&a.hasData()&&(s=e)}let o=s;for(;o.overscaledZ>t;)if(o=o.scaledTo(o.overscaledZ-1),e[o.key]||e[o.canonical.key]){n[s.key]=s;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(let r=e.overscaledZ-1;r>=t;r--){const t=e.scaledTo(r),n=this._getLoadedTile(t);if(n)return n}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const r=Math.ceil(e.width/this._source.tileSize)+1,n=Math.ceil(e.height/this._source.tileSize)+1,i=Math.floor(r*n*(null===this._maxTileCacheZoomLevels?t.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const r in this._tiles){const n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),e[n.tileID.key]=n}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}_updateCoveredAndRetainedTiles(e,t,r,n,i,a){const o={},l={},c=Object.keys(e),u=s.now();for(const s of c){const r=e[s],n=this._tiles[s];if(!n||0!==n.fadeEndTime&&n.fadeEndTime<=u)continue;const i=this.findLoadedParent(r,t),a=this.findLoadedSibling(r),c=i||a||null;c&&(this._addTile(c.tileID),o[c.tileID.key]=c.tileID),l[s]=r}this._retainLoadedChildren(l,n,r,e);for(const s in o)e[s]||(this._coveredTiles[s]=!0,e[s]=o[s]);if(a){const t={},r={};for(const e of i)this._tiles[e.key].hasData()?t[e.key]=e:r[e.key]=e;for(const n in r){const i=r[n].children(this._source.maxzoom);this._tiles[i[0].key]&&this._tiles[i[1].key]&&this._tiles[i[2].key]&&this._tiles[i[3].key]&&(t[i[0].key]=e[i[0].key]=i[0],t[i[1].key]=e[i[1].key]=i[1],t[i[2].key]=e[i[2].key]=i[2],t[i[3].key]=e[i[3].key]=i[3],delete r[n])}for(const n in r){const i=r[n],a=this.findLoadedParent(i,this._source.minzoom),s=this.findLoadedSibling(i),o=a||s||null;if(o){t[o.tileID.key]=e[o.tileID.key]=o.tileID;for(const e in t)t[e].isChildOf(o.tileID)&&delete t[e]}}for(const e in this._tiles)t[e]||(this._coveredTiles[e]=!0)}}update(e,r){if(!this._sourceLoaded||this._paused)return;let n;this.transform=e,this.terrain=r,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.Z(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(n=xe(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:r,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(n=n.filter((e=>this._source.hasTile(e))))):n=[];const i=ve(e,this._source),a=Math.max(i-be.maxOverzooming,this._source.minzoom),s=Math.max(i+be.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of n)if(t.canonical.z>this._source.minzoom){const r=t.scaledTo(t.canonical.z-1);e[r.key]=r;const n=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[n.key]=n}n=n.concat(Object.values(e))}const o=0===n.length&&!this._updated&&this._didEmitContent;this._updated=!0,o&&this.fire(new t.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const l=this._updateRetainedTiles(n,i);_e(this._source.type)&&this._updateCoveredAndRetainedTiles(l,a,s,i,n,r);for(const t in l)this._tiles[t].clearFadeHold();const c=t.al(this._tiles,l);for(const t of c){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){var r;const n={},i={},a=Math.max(t-be.maxOverzooming,this._source.minzoom),s=Math.max(t+be.maxUnderzooming,this._source.minzoom),o={};for(const l of e){const e=this._addTile(l);n[l.key]=l,e.hasData()||t<this._source.maxzoom&&(o[l.key]=l)}this._retainLoadedChildren(o,t,s,n);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){n[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(n[e[0].key]&&n[e[1].key]&&n[e[2].key]&&n[e[3].key])continue}let s=e.wasRequested();for(let t=l.overscaledZ-1;t>=a;--t){const a=l.scaledTo(t);if(i[a.key])break;if(i[a.key]=!0,e=this.getTile(a),!e&&s&&(e=this._addTile(a)),e){const t=e.hasData();if((t||!(null===(r=this.map)||void 0===r?void 0:r.cancelPendingTileRequestsWhileZooming)||s)&&(n[a.key]=a),s=e.wasRequested(),t)break}}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let r,n=this._tiles[e].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}t.push(n.key);const e=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(e),r)break;n=e}for(const e of t)this._loadedParentTiles[e]=r}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const t=this._tiles[e].tileID,r=this._getLoadedTile(t);this._loadedSiblingTiles[t.key]=r}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const n=r;return r||(r=new ie(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,e.key,r.state)),r.uses++,this._tiles[e.key]=r,n||this._source.fire(new t.l("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),r))}refreshTiles(e){for(const t in this._tiles)(this._isIdRenderable(t)||"errored"==this._tiles[t].state)&&e.some((e=>e.equals(this._tiles[t].tileID.canonical)))&&this._reloadTile(t,"expired")}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}_dataHandler(e){const t=e.sourceDataType;"source"===e.dataType&&"metadata"===t&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===t&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,r,n){const i=[],a=this.transform;if(!a)return i;const s=a.getCoveringTilesDetailsProvider().allowWorldCopies(),o=n?a.getCameraQueryGeometry(e):e,l=e=>a.screenPointToMercatorCoordinate(e,this.terrain),c=this.transformBbox(e,l,!s),u=this.transformBbox(o,l,!s),d=this.getIds(),h=t.a1.fromPoints(u);for(let p=0;p<d.length;p++){const e=this._tiles[d[p]];if(e.holdingForFade())continue;const n=s?[e.tileID]:[e.tileID.unwrapTo(-1),e.tileID.unwrapTo(0)],o=Math.pow(2,a.zoom-e.tileID.overscaledZ),l=r*e.queryPadding*t.$/e.tileSize/o;for(const r of n){const n=h.map((e=>r.getTilePoint(new t.a0(e.x,e.y))));if(n.expandBy(l),n.intersects(ye)){const t=c.map((e=>r.getTilePoint(e))),n=u.map((e=>r.getTilePoint(e)));i.push({tile:e,tileID:s?r:r.unwrapTo(0),queryGeometry:t,cameraQueryGeometry:n,scale:o})}}}return i}transformBbox(e,r,n){let i=e.map(r);if(n){const n=t.a1.fromPoints(e);n.shrinkBy(.001*Math.min(n.width(),n.height()));const a=n.map(r);t.a1.fromPoints(i).covers(a)||(i=i.map((e=>e.x>.5?new t.a0(e.x-1,e.y,e.z):e)))}return i}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));return this.transform&&this.transform.populateCache(t),t}hasTransition(){if(this._source.hasTransition())return!0;if(_e(this._source.type)){const e=s.now();for(const t in this._tiles)if(this._tiles[t].fadeEndTime>=e)return!0}return!1}setFeatureState(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}removeFeatureState(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,r){const n=this._tiles[e];n&&n.setDependencies(t,r)}reloadTilesForDependencies(e,t){for(const r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(r,"reloading");this._cache.filter((r=>!r.hasDependency(e,t)))}}function we(e,t){const r=Math.abs(2*e.wrap)-+(e.wrap<0),n=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function _e(e){return"raster"===e||"image"===e||"video"===e}be.maxOverzooming=10,be.maxUnderzooming=3;class ke{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.ag(e,0,1);let r=1,n=this._distances[r];const i=e*this.paddedLength+this.padding;for(;n<i&&r<this._distances.length;)n=this._distances[++r];const a=r-1,s=this._distances[a],o=n-s,l=o>0?(i-s)/o:0;return this.points[a].mult(1-l).add(this.points[r].mult(l))}}function Se(e,t){let r=!0;return"always"===e||"never"!==e&&"never"!==t||(r=!1),r}class je{constructor(e,t,r){const n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(let a=0;a<this.xCellCount*this.yCellCount;a++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}insertCircle(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)}_insertBoxCell(e,t,r,n,i,a){this.boxCells[i].push(a)}_insertCircleCell(e,t,r,n,i,a){this.circleCells[i].push(a)}_query(e,t,r,n,i,a,s){if(r<0||e>this.width||n<0||t>this.height)return[];const o=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(i)return[{key:null,x1:e,y1:t,x2:r,y2:n}];for(let e=0;e<this.boxKeys.length;e++)o.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],r=this.circles[3*e+1],n=this.circles[3*e+2];o.push({key:this.circleKeys[e],x1:t-n,y1:r-n,x2:t+n,y2:r+n})}}else this._forEachCell(e,t,r,n,this._queryCell,o,{hitTest:i,overlapMode:a,seenUids:{box:{},circle:{}}},s);return o}query(e,t,r,n){return this._query(e,t,r,n,!1,null)}hitTest(e,t,r,n,i,a){return this._query(e,t,r,n,!0,i,a).length>0}hitTestCircle(e,t,r,n,i){const a=e-r,s=e+r,o=t-r,l=t+r;if(s<0||a>this.width||l<0||o>this.height)return!1;const c=[];return this._forEachCell(a,o,s,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},i),c.length>0}_queryCell(e,t,r,n,i,a,s,o){const{seenUids:l,hitTest:c,overlapMode:u}=s,d=this.boxCells[i];if(null!==d){const i=this.bboxes;for(const s of d)if(!l.box[s]){l.box[s]=!0;const d=4*s,h=this.boxKeys[s];if(e<=i[d+2]&&t<=i[d+3]&&r>=i[d+0]&&n>=i[d+1]&&(!o||o(h))&&(!c||!Se(u,h.overlapMode))&&(a.push({key:h,x1:i[d],y1:i[d+1],x2:i[d+2],y2:i[d+3]}),c))return!0}}const h=this.circleCells[i];if(null!==h){const i=this.circles;for(const s of h)if(!l.circle[s]){l.circle[s]=!0;const d=3*s,h=this.circleKeys[s];if(this._circleAndRectCollide(i[d],i[d+1],i[d+2],e,t,r,n)&&(!o||o(h))&&(!c||!Se(u,h.overlapMode))){const e=i[d],t=i[d+1],r=i[d+2];if(a.push({key:h,x1:e-r,y1:t-r,x2:e+r,y2:t+r}),c)return!0}}}return!1}_queryCellCircle(e,t,r,n,i,a,s,o){const{circle:l,seenUids:c,overlapMode:u}=s,d=this.boxCells[i];if(null!==d){const e=this.bboxes;for(const t of d)if(!c.box[t]){c.box[t]=!0;const r=4*t,n=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!o||o(n))&&!Se(u,n.overlapMode))return a.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const e=this.circles;for(const t of h)if(!c.circle[t]){c.circle[t]=!0;const r=3*t,n=this.circleKeys[t];if(this._circlesCollide(e[r],e[r+1],e[r+2],l.x,l.y,l.radius)&&(!o||o(n))&&!Se(u,n.overlapMode))return a.push(!0),!0}}}_forEachCell(e,t,r,n,i,a,s,o){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(r),d=this._convertToYCellCoord(n);for(let h=l;h<=u;h++)for(let l=c;l<=d;l++)if(i.call(this,e,t,r,n,this.xCellCount*l+h,a,s,o))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,r,n,i,a){const s=n-e,o=i-t,l=r+a;return l*l>s*s+o*o}_circleAndRectCollide(e,t,r,n,i,a,s){const o=(a-n)/2,l=Math.abs(e-(n+o));if(l>o+r)return!1;const c=(s-i)/2,u=Math.abs(t-(i+c));if(u>c+r)return!1;if(l<=o||u<=c)return!0;const d=l-o,h=u-c;return d*d+h*h<=r*r}}function Ee(e,r,i){const a=t.L();if(!e){const{vecSouth:e,vecEast:t}=Ne(r),i=n();i[0]=t[0],i[1]=t[1],i[2]=e[0],i[3]=e[1],s=i,(h=(l=(o=i)[0])*(d=o[3])-(u=o[2])*(c=o[1]))&&(s[0]=d*(h=1/h),s[1]=-c*h,s[2]=-u*h,s[3]=l*h),a[0]=i[0],a[1]=i[1],a[4]=i[2],a[5]=i[3]}var s,o,l,c,u,d,h;return t.N(a,a,[1/i,1/i,1]),a}function Ce(e,r,n,i){if(e){const e=t.L();if(!r){const{vecSouth:t,vecEast:r}=Ne(n);e[0]=r[0],e[1]=r[1],e[4]=t[0],e[5]=t[1]}return t.N(e,e,[i,i,1]),e}return n.pixelsToClipSpaceMatrix}function Ne(e){const r=Math.cos(e.rollInRadians),n=Math.sin(e.rollInRadians),i=Math.cos(e.pitchInRadians),a=Math.cos(e.bearingInRadians),s=Math.sin(e.bearingInRadians),o=t.aq();o[0]=-a*i*n-s*r,o[1]=-s*i*n+a*r;const l=t.ar(o);l<1e-9?t.as(o):t.at(o,o,1/l);const c=t.aq();c[0]=a*i*r-s*n,c[1]=s*i*r+a*n;const u=t.ar(c);return u<1e-9?t.as(c):t.at(c,c,1/u),{vecEast:c,vecSouth:o}}function Te(e,r,n,i){let a;i?(a=[e,r,i(e,r),1],t.av(a,a,n)):(a=[e,r,0,1],We(a,a,n));const s=a[3];return{point:new t.P(a[0]/s,a[1]/s),signedDistanceFromCamera:s,isOccluded:!1}}function Pe(e,t){return.5+e/t*.5}function Ae(e,t){return e.x>=-t[0]&&e.x<=t[0]&&e.y>=-t[1]&&e.y<=t[1]}function Me(e,r,n,i,a,s,o,l,c,u,d,h,p){const f=n?e.textSizeData:e.iconSizeData,m=t.am(f,r.transform.zoom),g=[256/r.width*2+1,256/r.height*2+1],v=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;v.clear();const x=e.lineVertexArray,y=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,b=r.transform.width/r.transform.height;let w=!1;for(let _=0;_<y.length;_++){const n=y.get(_);if(n.hidden||n.writingMode===t.an.vertical&&!w){Ge(n.numGlyphs,v);continue}w=!1;const k=new t.P(n.anchorX,n.anchorY),S={getElevation:p,pitchedLabelPlaneMatrix:i,lineVertexArray:x,pitchWithMap:s,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:k,unwrappedTileID:c,width:u,height:d,translation:h},j=Be(n.anchorX,n.anchorY,S);if(!Ae(j.point,g)){Ge(n.numGlyphs,v);continue}const E=Pe(r.transform.cameraToCenterDistance,j.signedDistanceFromCamera),C=t.ao(f,m,n),N=s?C*r.transform.getPitchedTextCorrection(n.anchorX,n.anchorY,c)/E:C*E,T=De({projectionContext:S,pitchedLabelPlaneMatrixInverse:a,symbol:n,fontSize:N,flip:!1,keepUpright:o,glyphOffsetArray:e.glyphOffsetArray,dynamicLayoutVertexArray:v,aspectRatio:b,rotateToLine:l});w=T.useVertical,(T.notEnoughRoom||w||T.needsFlipping&&De({projectionContext:S,pitchedLabelPlaneMatrixInverse:a,symbol:n,fontSize:N,flip:!0,keepUpright:o,glyphOffsetArray:e.glyphOffsetArray,dynamicLayoutVertexArray:v,aspectRatio:b,rotateToLine:l}).notEnoughRoom)&&Ge(n.numGlyphs,v)}n?e.text.dynamicLayoutVertexBuffer.updateData(v):e.icon.dynamicLayoutVertexBuffer.updateData(v)}function Ie(e,t,r,n,i,a,s,o){const l=a.glyphStartIndex+a.numGlyphs,c=a.lineStartIndex,u=a.lineStartIndex+a.lineLength,d=t.getoffsetX(a.glyphStartIndex),h=t.getoffsetX(l-1),p=Ve(e*d,r,n,i,a.segment,c,u,o,s);if(!p)return null;const f=Ve(e*h,r,n,i,a.segment,c,u,o,s);return f?o.projectionCache.anyProjectionOccluded?null:{first:p,last:f}:null}function Oe(e,r,n,i){return e===t.an.horizontal&&Math.abs(n.y-r.y)>Math.abs(n.x-r.x)*i?{useVertical:!0}:(e===t.an.vertical?r.y<n.y:r.x>n.x)?{needsFlipping:!0}:null}function De(e){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:n,symbol:i,fontSize:a,flip:s,keepUpright:o,glyphOffsetArray:l,dynamicLayoutVertexArray:c,aspectRatio:u,rotateToLine:d}=e,h=a/24,p=i.lineOffsetX*h,f=i.lineOffsetY*h;let m;if(i.numGlyphs>1){const e=i.glyphStartIndex+i.numGlyphs,t=i.lineStartIndex,a=i.lineStartIndex+i.lineLength,c=Ie(h,l,p,f,s,i,d,r);if(!c)return{notEnoughRoom:!0};const g=$e(c.first.point.x,c.first.point.y,r,n),v=$e(c.last.point.x,c.last.point.y,r,n);if(o&&!s){const e=Oe(i.writingMode,g,v,u);if(e)return e}m=[c.first];for(let n=i.glyphStartIndex+1;n<e-1;n++){const e=Ve(h*l.getoffsetX(n),p,f,s,i.segment,t,a,r,d);if(!e)return{notEnoughRoom:!0};m.push(e)}m.push(c.last)}else{if(o&&!s){const e=Fe(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,a=i.lineStartIndex+i.segment+1,s=new t.P(r.lineVertexArray.getx(a),r.lineVertexArray.gety(a)),o=Fe(s.x,s.y,r),l=o.signedDistanceFromCamera>0?o.point:Re(r.tileAnchorPoint,s,e,1,r),c=$e(e.x,e.y,r,n),d=$e(l.x,l.y,r,n),h=Oe(i.writingMode,c,d,u);if(h)return h}const e=Ve(h*l.getoffsetX(i.glyphStartIndex),p,f,s,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,r,d);if(!e||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};m=[e]}for(const g of m)t.au(c,g.point,g.angle);return{}}function Re(e,t,r,n,i){const a=e.add(e.sub(t)._unit()),s=Fe(a.x,a.y,i).point,o=r.sub(s);return r.add(o._mult(n/o.mag()))}function Le(e,r,n){const i=r.projectionCache;if(i.projections[e])return i.projections[e];const a=new t.P(r.lineVertexArray.getx(e),r.lineVertexArray.gety(e)),s=Fe(a.x,a.y,r);if(s.signedDistanceFromCamera>0)return i.projections[e]=s.point,i.anyProjectionOccluded=i.anyProjectionOccluded||s.isOccluded,s.point;const o=e-n.direction;return Re(0===n.distanceFromAnchor?r.tileAnchorPoint:new t.P(r.lineVertexArray.getx(o),r.lineVertexArray.gety(o)),a,n.previousVertex,n.absOffsetX-n.distanceFromAnchor+1,r)}function Fe(e,t,r){const n=e+r.translation[0],i=t+r.translation[1];let a;return r.pitchWithMap?(a=Te(n,i,r.pitchedLabelPlaneMatrix,r.getElevation),a.isOccluded=!1):(a=r.transform.projectTileCoordinates(n,i,r.unwrappedTileID,r.getElevation),a.point.x=(.5*a.point.x+.5)*r.width,a.point.y=(.5*-a.point.y+.5)*r.height),a}function $e(e,r,n,i){if(n.pitchWithMap){const a=[e,r,0,1];return t.av(a,a,i),n.transform.projectTileCoordinates(a[0]/a[3],a[1]/a[3],n.unwrappedTileID,n.getElevation).point}return{x:e/n.width*2-1,y:r/n.height*2-1}}function Be(e,t,r){return r.transform.projectTileCoordinates(e,t,r.unwrappedTileID,r.getElevation)}function ze(e,t,r){return e._unit()._perp()._mult(t*r)}function Ue(e,r,n,i,a,s,o,l,c){if(l.projectionCache.offsets[e])return l.projectionCache.offsets[e];const u=n.add(r);if(e+c.direction<i||e+c.direction>=a)return l.projectionCache.offsets[e]=u,u;const d=Le(e+c.direction,l,c),h=ze(d.sub(n),o,c.direction),p=n.add(h),f=d.add(h);return l.projectionCache.offsets[e]=t.aw(s,u,p,f)||u,l.projectionCache.offsets[e]}function Ve(e,t,r,n,i,a,s,o,l){const c=n?e-t:e+t;let u=c>0?1:-1,d=0;n&&(u*=-1,d=Math.PI),u<0&&(d+=Math.PI);let h,p=u>0?a+i:a+i+1;o.projectionCache.cachedAnchorPoint?h=o.projectionCache.cachedAnchorPoint:(h=Fe(o.tileAnchorPoint.x,o.tileAnchorPoint.y,o).point,o.projectionCache.cachedAnchorPoint=h);let f,m,g=h,v=h,x=0,y=0;const b=Math.abs(c),w=[];let _;for(;x+y<=b;){if(p+=u,p<a||p>=s)return null;x+=y,v=g,m=f;const e={absOffsetX:b,direction:u,distanceFromAnchor:x,previousVertex:v};if(g=Le(p,o,e),0===r)w.push(v),_=g.sub(v);else{let t;const n=g.sub(v);t=0===n.mag()?ze(Le(p+u,o,e).sub(g),r,u):ze(n,r,u),m||(m=v.add(t)),f=Ue(p,t,g,a,s,m,r,o,e),w.push(m),_=f.sub(m)}y=_.mag()}const k=_._mult((b-x)/y)._add(m||v),S=d+Math.atan2(g.y-v.y,g.x-v.x);return w.push(k),{point:k,angle:l?S:0,path:w}}const He=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ge(e,t){for(let r=0;r<e;r++){const e=t.length;t.resize(e+4),t.float32.set(He,3*e)}}function We(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e[3]=r[3]*n+r[7]*i+r[15],e}const qe=100;class Ke{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new je(e.width+200,e.height+200,25),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new je(e.width+200,e.height+200,25);this.transform=e,this.grid=t,this.ignoredGrid=r,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+qe,this.screenBottomBoundary=e.height+qe,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,r,n,i,a,s,o,l,c,u,d){const h=this.projectAndGetPerspectiveRatio(e.anchorPointX+o[0],e.anchorPointY+o[1],i,c,d),p=r*h.perspectiveRatio;let f;if(a||s)f=this._projectCollisionBox(e,p,n,i,a,s,o,h,c,u,d);else{const t=h.x+(u?u.x*p:0),r=h.y+(u?u.y*p:0);f={allPointsOccluded:!1,box:[t+e.x1*p,r+e.y1*p,t+e.x2*p,r+e.y2*p]}}const[m,g,v,x]=f.box,y=a?f.allPointsOccluded:h.isOccluded;let b=y;return b||(b=h.perspectiveRatio<this.perspectiveRatioCutoff),b||(b=!this.isInsideGrid(m,g,v,x)),b||"always"!==t&&this.grid.hitTest(m,g,v,x,t,l)?{box:[m,g,v,x],placeable:!1,offscreen:!1,occluded:y}:{box:[m,g,v,x],placeable:!0,offscreen:this.isOffscreen(m,g,v,x),occluded:y}}placeCollisionCircles(e,r,n,i,a,s,o,l,c,u,d,h,p,f){const m=[],g=new t.P(r.anchorX,r.anchorY),v=this.getPerspectiveRatio(g.x,g.y,s,f),x=(c?a*this.transform.getPitchedTextCorrection(r.anchorX,r.anchorY,s)/v:a*v)/t.aA,y={getElevation:f,pitchedLabelPlaneMatrix:o,lineVertexArray:n,pitchWithMap:c,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:g,unwrappedTileID:s,width:this.transform.width,height:this.transform.height,translation:p},b=Ie(x,i,r.lineOffsetX*x,r.lineOffsetY*x,!1,r,!1,y);let w=!1,_=!1,k=!0;if(b){const r=.5*d*v+h,n=new t.P(-100,-100),i=new t.P(this.screenRightBoundary,this.screenBottomBoundary),a=new ke,s=b.first,o=b.last;let p=[];for(let e=s.path.length-1;e>=1;e--)p.push(s.path[e]);for(let e=1;e<o.path.length;e++)p.push(o.path[e]);const f=2.5*r;if(c){const e=this.projectPathToScreenSpace(p,y);p=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let g=[];if(p.length>0){const e=p[0].clone(),r=p[0].clone();for(let t=1;t<p.length;t++)e.x=Math.min(e.x,p[t].x),e.y=Math.min(e.y,p[t].y),r.x=Math.max(r.x,p[t].x),r.y=Math.max(r.y,p[t].y);g=e.x>=n.x&&r.x<=i.x&&e.y>=n.y&&r.y<=i.y?[p]:r.x<n.x||e.x>i.x||r.y<n.y||e.y>i.y?[]:t.ax([p],n.x,n.y,i.x,i.y)}for(const t of g){a.reset(t,.25*r);let n=0;n=a.length<=.5*r?1:Math.ceil(a.paddedLength/f)+1;for(let t=0;t<n;t++){const i=t/Math.max(n-1,1),s=a.lerp(i),o=s.x+qe,c=s.y+qe;m.push(o,c,r,0);const d=o-r,h=c-r,p=o+r,f=c+r;if(k=k&&this.isOffscreen(d,h,p,f),_=_||this.isInsideGrid(d,h,p,f),"always"!==e&&this.grid.hitTestCircle(o,c,r,e,u)&&(w=!0,!l))return{circles:[],offscreen:!1,collisionDetected:w}}}}return{circles:!l&&w||!_||v<this.perspectiveRatioCutoff?[]:m,offscreen:k,collisionDetected:w}}projectPathToScreenSpace(e,r){const n=function(e,r){const n=t.L();return t.ap(n,r.pitchedLabelPlaneMatrix),e.map((e=>{const t=Te(e.x,e.y,n,r.getElevation),i=r.transform.projectTileCoordinates(t.point.x,t.point.y,r.unwrappedTileID,r.getElevation);return i.point.x=(.5*i.point.x+.5)*r.width,i.point.y=(.5*-i.point.y+.5)*r.height,i}))}(e,r);return function(e){let t=0,r=0,n=0,i=0;for(let a=0;a<e.length;a++)e[a].isOccluded?(n=a+1,i=0):(i++,i>r&&(r=i,t=n));return e.slice(t,t+r)}(n)}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const r=[],n=new t.a1;for(const d of e){const e=new t.P(d.x+qe,d.y+qe);n.extend(e),r.push(e)}const{minX:i,minY:a,maxX:s,maxY:o}=n,l=this.grid.query(i,a,s,o).concat(this.ignoredGrid.query(i,a,s,o)),c={},u={};for(const d of l){const e=d.key;if(void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]={}),c[e.bucketInstanceId][e.featureIndex])continue;const n=[new t.P(d.x1,d.y1),new t.P(d.x2,d.y1),new t.P(d.x2,d.y2),new t.P(d.x1,d.y2)];t.ay(r,n)&&(c[e.bucketInstanceId][e.featureIndex]=!0,void 0===u[e.bucketInstanceId]&&(u[e.bucketInstanceId]=[]),u[e.bucketInstanceId].push(e.featureIndex))}return u}insertCollisionBox(e,t,r,n,i,a){(r?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:a,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,r,n,i,a){const s=r?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:i,collisionGroupID:a,overlapMode:t};for(let l=0;l<e.length;l+=4)s.insertCircle(o,e[l],e[l+1],e[l+2])}projectAndGetPerspectiveRatio(e,r,n,i,a){if(a){let n;i?(n=[e,r,i(e,r),1],t.av(n,n,a)):(n=[e,r,0,1],We(n,n,a));const s=n[3];return{x:(n[0]/s+1)/2*this.transform.width+qe,y:(-n[1]/s+1)/2*this.transform.height+qe,perspectiveRatio:.5+this.transform.cameraToCenterDistance/s*.5,isOccluded:!1,signedDistanceFromCamera:s}}{const t=this.transform.projectTileCoordinates(e,r,n,i);return{x:(t.point.x+1)/2*this.transform.width+qe,y:(1-t.point.y)/2*this.transform.height+qe,perspectiveRatio:.5+this.transform.cameraToCenterDistance/t.signedDistanceFromCamera*.5,isOccluded:t.isOccluded,signedDistanceFromCamera:t.signedDistanceFromCamera}}}getPerspectiveRatio(e,t,r,n){const i=this.transform.projectTileCoordinates(e,t,r,n);return.5+this.transform.cameraToCenterDistance/i.signedDistanceFromCamera*.5}isOffscreen(e,t,r,n){return r<qe||e>=this.screenRightBoundary||n<qe||t>this.screenBottomBoundary}isInsideGrid(e,t,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=t.af([]);return t.M(e,e,[-100,-100,0]),e}_projectCollisionBox(e,r,n,i,a,s,o,l,c,u,d){let h=1,p=0,f=0,m=1;const g=e.anchorPointX+o[0],v=e.anchorPointY+o[1];if(s&&!a){const e=this.projectAndGetPerspectiveRatio(g+1,v,i,c,d),t=e.x-l.x,r=Math.atan((e.y-l.y)/t)+(t<0?Math.PI:0),n=Math.sin(r),a=Math.cos(r);h=a,p=n,f=-n,m=a}else if(!s&&a){const e=Ne(this.transform);h=e.vecEast[0],p=e.vecEast[1],f=e.vecSouth[0],m=e.vecSouth[1]}let x=l.x,y=l.y,b=r;a&&(x=g,y=v,b=Math.pow(2,-(this.transform.zoom-n.overscaledZ)),b*=this.transform.getPitchedTextCorrection(g,v,i),u||(b*=t.ag(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),u&&(x+=h*u.x*b+f*u.y*b,y+=p*u.x*b+m*u.y*b);const w=e.x1*b,_=e.x2*b,k=(w+_)/2,S=e.y1*b,j=e.y2*b,E=(S+j)/2,C=[{offsetX:w,offsetY:S},{offsetX:k,offsetY:S},{offsetX:_,offsetY:S},{offsetX:_,offsetY:E},{offsetX:_,offsetY:j},{offsetX:k,offsetY:j},{offsetX:w,offsetY:j},{offsetX:w,offsetY:E}];let N=[];for(const{offsetX:P,offsetY:A}of C)N.push(new t.P(x+h*P+f*A,y+p*P+m*A));let T=!1;if(a){const e=N.map((e=>this.projectAndGetPerspectiveRatio(e.x,e.y,i,c,d)));T=e.some((e=>!e.isOccluded)),N=e.map((e=>new t.P(e.x,e.y)))}else T=!0;return{box:t.az(N),allPointsOccluded:!T}}}class Ze{constructor(e,t,r,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):n&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class Ye{constructor(e,t,r,n,i){this.text=new Ze(e?e.text:null,t,r,i),this.icon=new Ze(e?e.icon:null,t,n,i)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xe{constructor(e,t,r){this.text=e,this.icon=t,this.skipFade=r}}class Qe{constructor(e,t,r,n,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i}}class Je{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function et(e,r,n,i,a){const{horizontalAlign:s,verticalAlign:o}=t.aG(e);return new t.P(-(s-.5)*r+i[0]*a,-(o-.5)*n+i[1]*a)}class tt{constructor(e,t,r,n,i){this.transform=e.clone(),this.terrain=t,this.collisionIndex=new Ke(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=r,this.retainedQueryData={},this.collisionGroups=new Je(n),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const t=this.terrain;return t?(r,n)=>t.getElevation(e,r,n):null}getBucketParts(e,r,n,i){const a=n.getBucket(r),s=n.latestFeatureIndex;if(!a||!s||r.id!==a.layerIds[0])return;const o=n.collisionBoxArray,l=a.layers[0].layout,c=a.layers[0].paint,u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),d=n.tileSize/t.$,h=n.tileID.toUnwrapped(),p="map"===l.get("text-rotation-alignment"),f=t.aB(n,1,this.transform.zoom),m=t.aC(this.collisionIndex.transform,n,c.get("text-translate"),c.get("text-translate-anchor")),g=t.aC(this.collisionIndex.transform,n,c.get("icon-translate"),c.get("icon-translate-anchor")),v=Ee(p,this.transform,f);this.retainedQueryData[a.bucketInstanceId]=new Qe(a.bucketInstanceId,s,a.sourceLayerIndex,a.index,n.tileID);const x={bucket:a,layout:l,translationText:m,translationIcon:g,unwrappedTileID:h,pitchedLabelPlaneMatrix:v,scale:u,textPixelRatio:d,holdingForFade:n.holdingForFade(),collisionBoxArray:o,partiallyEvaluatedTextSize:t.am(a.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i)for(const t of a.sortKeyRanges){const{sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i}=t;e.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i,parameters:x})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:x})}attemptAnchorPlacement(e,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b){const w=t.aD[e.textAnchor],_=[e.textOffset0,e.textOffset1],k=et(w,n,i,_,a),S=this.collisionIndex.placeCollisionBox(r,h,l,c,u,o,s,g,d.predicate,y,k,b);if((!x||this.collisionIndex.placeCollisionBox(x,h,l,c,u,o,s,v,d.predicate,y,k,b).placeable)&&S.placeable){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(e=this.prevPlacement.variableOffsets[p.crossTileID].anchor),0===p.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[p.crossTileID]={textOffset:_,width:n,height:i,anchor:w,textBoxScale:a,prevAnchor:e},this.markUsedJustification(f,w,p,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,p),this.placedOrientations[p.crossTileID]=m),{shift:k,placedGlyphBoxes:S}}}placeLayerBucketPart(e,r,n){const{bucket:i,layout:a,translationText:s,translationIcon:o,unwrappedTileID:l,pitchedLabelPlaneMatrix:c,textPixelRatio:u,holdingForFade:d,collisionBoxArray:h,partiallyEvaluatedTextSize:p,collisionGroup:f}=e.parameters,m=a.get("text-optional"),g=a.get("icon-optional"),v=t.aE(a,"text-overlap","text-allow-overlap"),x="always"===v,y=t.aE(a,"icon-overlap","icon-allow-overlap"),b="always"===y,w="map"===a.get("text-rotation-alignment"),_="map"===a.get("text-pitch-alignment"),k="none"!==a.get("icon-text-fit"),S="viewport-y"===a.get("symbol-z-order"),j=x&&(b||!i.hasIconData()||g),E=b&&(x||!i.hasTextData()||m);!i.collisionArrays&&h&&i.deserializeCollisionBoxes(h);const C=this.retainedQueryData[i.bucketInstanceId].tileID,N=this._getTerrainElevationFunc(C),T=this.transform.getFastPathSimpleProjectionMatrix(C),P=(e,h,b)=>{var S,P;if(r[e.crossTileID])return;if(d)return void(this.placements[e.crossTileID]=new Xe(!1,!1,!1));let A=!1,M=!1,I=!0,O=null,D={box:null,placeable:!1,offscreen:null,occluded:!1},R={placeable:!1},L=null,F=null,$=null,B=0,z=0,U=0;h.textFeatureIndex?B=h.textFeatureIndex:e.useRuntimeCollisionCircles&&(B=e.featureIndex),h.verticalTextFeatureIndex&&(z=h.verticalTextFeatureIndex);const V=h.textBox;if(V){const r=r=>{let n=t.an.horizontal;if(i.allowVerticalPlacement&&!r&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,n=t,this.markUsedOrientation(i,n,e))}return n},a=(r,n)=>{if(i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&h.verticalTextBox){for(const e of i.writingModes)if(e===t.an.vertical?(D=n(),R=D):D=r(),D&&D.placeable)break}else D=r()},c=e.textAnchorOffsetStartIndex,d=e.textAnchorOffsetEndIndex;if(d===c){const n=(t,r)=>{const n=this.collisionIndex.placeCollisionBox(t,v,u,C,l,_,w,s,f.predicate,N,void 0,T);return n&&n.placeable&&(this.markUsedOrientation(i,r,e),this.placedOrientations[e.crossTileID]=r),n};a((()=>n(V,t.an.horizontal)),(()=>{const r=h.verticalTextBox;return i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&r?n(r,t.an.vertical):{box:null,offscreen:null}})),r(D&&D.placeable)}else{let p=t.aD[null===(P=null===(S=this.prevPlacement)||void 0===S?void 0:S.variableOffsets[e.crossTileID])||void 0===P?void 0:P.anchor];const m=(t,r,a)=>{const h=t.x2-t.x1,m=t.y2-t.y1,g=e.textBoxScale,x=k&&"never"===y?r:null;let b=null,S="never"===v?1:2,j="never";p&&S++;for(let n=0;n<S;n++){for(let r=c;r<d;r++){const n=i.textAnchorOffsets.get(r);if(p&&n.textAnchor!==p)continue;const c=this.attemptAnchorPlacement(n,t,h,m,g,w,_,u,C,l,f,j,e,i,a,s,o,x,N);if(c&&(b=c.placedGlyphBoxes,b&&b.placeable))return A=!0,O=c.shift,b}p?p=null:j=v}return n&&!b&&(b={box:this.collisionIndex.placeCollisionBox(V,"always",u,C,l,_,w,s,f.predicate,N,void 0,T).box,offscreen:!1,placeable:!1,occluded:!1}),b};a((()=>m(V,h.iconBox,t.an.horizontal)),(()=>{const r=h.verticalTextBox;return i.allowVerticalPlacement&&(!D||!D.placeable)&&e.numVerticalGlyphVertices>0&&r?m(r,h.verticalIconBox,t.an.vertical):{box:null,occluded:!0,offscreen:null}})),D&&(A=D.placeable,I=D.offscreen);const g=r(D&&D.placeable);if(!A&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(i,t.anchor,e,g))}}}if(L=D,A=L&&L.placeable,I=L&&L.offscreen,e.useRuntimeCollisionCircles){const r=i.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),o=t.ao(i.textSizeData,p,r),u=a.get("text-padding");F=this.collisionIndex.placeCollisionCircles(v,r,i.lineVertexArray,i.glyphOffsetArray,o,l,c,n,_,f.predicate,e.collisionCircleDiameter,u,s,N),F.circles.length&&F.collisionDetected&&!n&&t.w("Collisions detected, but collision boxes are not shown"),A=x||F.circles.length>0&&!F.collisionDetected,I=I&&F.offscreen}if(h.iconFeatureIndex&&(U=h.iconFeatureIndex),h.iconBox){const e=e=>this.collisionIndex.placeCollisionBox(e,y,u,C,l,_,w,o,f.predicate,N,k&&O?O:void 0,T);R&&R.placeable&&h.verticalIconBox?($=e(h.verticalIconBox),M=$.placeable):($=e(h.iconBox),M=$.placeable),I=I&&$.offscreen}const H=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,G=g||0===e.numIconVertices;H||G?G?H||(M=M&&A):A=M&&A:M=A=M&&A;const W=M&&$.placeable;if(A&&L.placeable&&this.collisionIndex.insertCollisionBox(L.box,v,a.get("text-ignore-placement"),i.bucketInstanceId,R&&R.placeable&&z?z:B,f.ID),W&&this.collisionIndex.insertCollisionBox($.box,y,a.get("icon-ignore-placement"),i.bucketInstanceId,U,f.ID),F&&A&&this.collisionIndex.insertCollisionCircles(F.circles,v,a.get("text-ignore-placement"),i.bucketInstanceId,B,f.ID),n&&this.storeCollisionData(i.bucketInstanceId,b,h,L,$,F),0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===i.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new Xe((A||j)&&!(null==L?void 0:L.occluded),(M||E)&&!(null==$?void 0:$.occluded),I||i.justReloaded),r[e.crossTileID]=!0};if(S){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=i.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let e=t.length-1;e>=0;--e){const r=t[e];P(i.symbolInstances.get(r),i.collisionArrays[r],r)}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)P(i.symbolInstances.get(t),i.collisionArrays[t],t);i.justReloaded=!1}storeCollisionData(e,t,r,n,i,a){if(r.textBox||r.iconBox){let a,s;this.collisionBoxArrays.has(e)?a=this.collisionBoxArrays.get(e):(a=new Map,this.collisionBoxArrays.set(e,a)),a.has(t)?s=a.get(t):(s={text:null,icon:null},a.set(t,s)),r.textBox&&(s.text=n.box),r.iconBox&&(s.icon=i.box)}if(a){let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=[]);for(let e=0;e<a.circles.length;e+=4)t.push(a.circles[e+0]-qe),t.push(a.circles[e+1]-qe),t.push(a.circles[e+2]),t.push(a.collisionDetected?1:0)}}markUsedJustification(e,r,n,i){let a;a=i===t.an.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[t.aF(r)];const s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=a>=0&&t!==a?0:n.crossTileID)}markUsedOrientation(e,r,n){const i=r===t.an.horizontal||r===t.an.horizontalOnly?r:0,a=r===t.an.vertical?r:0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];for(const t of s)e.text.placedSymbolArray.get(t).placedOrientation=i;n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=a)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const n=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},a=t?t.variableOffsets:{},s=t?t.placedOrientations:{};for(const o in this.placements){const e=this.placements[o],t=i[o];t?(this.opacities[o]=new Ye(t,n,e.text,e.icon),r=r||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[o]=new Ye(null,n,e.text,e.icon,e.skipFade),r=r||e.text||e.icon)}for(const o in i){const e=i[o];if(!this.opacities[o]){const t=new Ye(e,n,!1,!1);t.isHidden()||(this.opacities[o]=t,r=r||e.text.placed||e.icon.placed)}}for(const o in a)this.variableOffsets[o]||!this.opacities[o]||this.opacities[o].isHidden()||(this.variableOffsets[o]=a[o]);for(const o in s)this.placedOrientations[o]||!this.opacities[o]||this.opacities[o].isHidden()||(this.placedOrientations[o]=s[o]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const r={};for(const n of t){const t=n.getBucket(e);t&&n.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n.tileID,r,n.collisionBoxArray)}}updateBucketOpacities(e,r,n,i){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const a=e.layers[0],s=a.layout,o=new Ye(null,0,!1,!1,!0),l=s.get("text-allow-overlap"),c=s.get("icon-allow-overlap"),u=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),d="map"===s.get("text-rotation-alignment"),h="map"===s.get("text-pitch-alignment"),p="none"!==s.get("icon-text-fit"),f=new Ye(null,0,l&&(c||!e.hasIconData()||s.get("icon-optional")),c&&(l||!e.hasTextData()||s.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);const m=(e,t,r)=>{for(let n=0;n<t/4;n++)e.opacityVertexArray.emplaceBack(r);e.hasVisibleVertices=e.hasVisibleVertices||r!==dt},g=this.collisionBoxArrays.get(e.bucketInstanceId);for(let v=0;v<e.symbolInstances.length;v++){const r=e.symbolInstances.get(v),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:a,crossTileID:s}=r;let l=this.opacities[s];n[s]?l=o:l||(l=f,this.opacities[s]=l),n[s]=!0;const c=r.numIconVertices>0,x=this.placedOrientations[r.crossTileID],y=x===t.an.vertical,b=x===t.an.horizontal||x===t.an.horizontalOnly;if(i>0||a>0){const t=ut(l.text);m(e.text,i,y?dt:t),m(e.text,a,b?dt:t);const n=l.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=n||y?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=n||b?1:0);const s=this.variableOffsets[r.crossTileID];s&&this.markUsedJustification(e,s.anchor,r,x);const o=this.placedOrientations[r.crossTileID];o&&(this.markUsedJustification(e,"left",r,o),this.markUsedOrientation(e,o,r))}if(c){const t=ut(l.icon),n=!(p&&r.verticalPlacedIconSymbolIndex&&y);r.placedIconSymbolIndex>=0&&(m(e.icon,r.numIconVertices,n?t:dt),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=l.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,r.numVerticalIconVertices,n?dt:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}const w=g&&g.has(v)?g.get(v):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const r=e.collisionArrays[v];if(r){let n=new t.P(0,0);if(r.textBox||r.verticalTextBox){let t=!0;if(u){const e=this.variableOffsets[s];e?(n=et(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),d&&n._rotate(h?-this.transform.bearingInRadians:this.transform.bearingInRadians)):t=!1}if(r.textBox||r.verticalTextBox){let i;r.textBox&&(i=y),r.verticalTextBox&&(i=b),rt(e.textCollisionBox.collisionVertexArray,l.text.placed,!t||i,w.text,n.x,n.y)}}if(r.iconBox||r.verticalIconBox){const t=Boolean(!b&&r.verticalIconBox);let i;r.iconBox&&(i=t),r.verticalIconBox&&(i=!t),rt(e.iconCollisionBox.collisionVertexArray,l.icon.placed,i,w.icon,p?n.x:0,p?n.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function rt(e,t,r,n,i,a){n&&0!==n.length||(n=[0,0,0,0]);const s=n[0]-qe,o=n[1]-qe,l=n[2]-qe,c=n[3]-qe;e.emplaceBack(t?1:0,r?1:0,i||0,a||0,s,o),e.emplaceBack(t?1:0,r?1:0,i||0,a||0,l,o),e.emplaceBack(t?1:0,r?1:0,i||0,a||0,l,c),e.emplaceBack(t?1:0,r?1:0,i||0,a||0,s,c)}const nt=Math.pow(2,25),it=Math.pow(2,24),at=Math.pow(2,17),st=Math.pow(2,16),ot=Math.pow(2,9),lt=Math.pow(2,8),ct=Math.pow(2,1);function ut(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*nt+t*it+r*at+t*st+r*ot+t*lt+r*ct+t}const dt=0;class ht{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,r,n,i){const a=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(a,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<a.length;)if(t.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,r),this._currentPartIndex++,i())return!0;return!1}}class pt{constructor(e,t,r,n,i,a,s,o){this.placement=new tt(e,t,a,s,o),this._currentPlacementIndex=r.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,t,r){const n=s.now(),i=()=>!this._forceFullPlacement&&s.now()-n>2;for(;this._currentPlacementIndex>=0;){const n=t[e[this._currentPlacementIndex]],a=this.placement.collisionIndex.transform.zoom;if("symbol"===n.type&&(!n.minzoom||n.minzoom<=a)&&(!n.maxzoom||n.maxzoom>a)){if(this._inProgressLayer||(this._inProgressLayer=new ht(n)),this._inProgressLayer.continuePlacement(r[n.source],this.placement,this._showCollisionBoxes,n,i))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const ft=512/t.$/2;class mt{constructor(e,r,n){this.tileID=e,this.bucketInstanceId=n,this._symbolsByKey={};const i=new Map;for(let t=0;t<r.length;t++){const e=r.get(t),n=e.key,a=i.get(n);a?a.push(e):i.set(n,[e])}for(const[a,s]of i){const e={positions:s.map((e=>({x:Math.floor(e.anchorX*ft),y:Math.floor(e.anchorY*ft)}))),crossTileIDs:s.map((e=>e.crossTileID))};if(e.positions.length>128){const r=new t.aH(e.positions.length,16,Uint16Array);for(const{x:t,y:n}of e.positions)r.add(t,n);r.finish(),delete e.positions,e.index=r}this._symbolsByKey[a]=e}}getScaledCoordinates(e,r){const{x:n,y:i,z:a}=this.tileID.canonical,{x:s,y:o,z:l}=r.canonical,c=ft/Math.pow(2,l-a),u=(o*t.$+e.anchorY)*c,d=i*t.$*ft;return{x:Math.floor((s*t.$+e.anchorX)*c-n*t.$*ft),y:Math.floor(u-d)}}findMatches(e,t,r){const n=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const a=e.get(i);if(a.crossTileID)continue;const s=this._symbolsByKey[a.key];if(!s)continue;const o=this.getScaledCoordinates(a,t);if(s.index){const e=s.index.range(o.x-n,o.y-n,o.x+n,o.y+n).sort();for(const t of e){const e=s.crossTileIDs[t];if(!r[e]){r[e]=!0,a.crossTileID=e;break}}}else if(s.positions)for(let e=0;e<s.positions.length;e++){const t=s.positions[e],i=s.crossTileIDs[e];if(Math.abs(t.x-o.x)<=n&&Math.abs(t.y-o.y)<=n&&!r[i]){r[i]=!0,a.crossTileID=i;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((e=>{let{crossTileIDs:t}=e;return t}))}}class gt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const r in this.indexes){const e=this.indexes[r],n={};for(const r in e){const i=e[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}this.indexes[r]=n}this.lng=e}addBucket(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const n=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const r=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in r){const a=r[i];a.tileID.isChildOf(e)&&a.findMatches(t.symbolInstances,e,n)}else{const a=r[e.scaledTo(Number(i)).key];a&&a.findMatches(t.symbolInstances,e,n)}}for(let i=0;i<t.symbolInstances.length;i++){const e=t.symbolInstances.get(i);e.crossTileID||(e.crossTileID=r.generate(),n[e.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new mt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const r of t.getCrossTileIDsLists())for(const t of r)delete this.usedCrossTileIDs[e][t]}removeStaleBuckets(e){let t=!1;for(const r in this.indexes){const n=this.indexes[r];for(const i in n)e[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],t=!0)}return t}}class xt{constructor(){this.layerIndexes={},this.crossTileIDs=new gt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,r){let n=this.layerIndexes[e.id];void 0===n&&(n=this.layerIndexes[e.id]=new vt);let i=!1;const a={};n.handleWrapJump(r);for(const s of t){const t=s.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(s.tileID,t,this.crossTileIDs)&&(i=!0),a[t.bucketInstanceId]=!0)}return n.removeStaleBuckets(a)&&(i=!0),i}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const r in this.layerIndexes)t[r]||delete this.layerIndexes[r]}}var yt="void main() {fragColor=vec4(1.0);}";const bt={prelude:wt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nout highp vec4 fragColor;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c\n);}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\n#ifdef GLOBE\nif ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}\n#endif\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;"),projectionMercator:wt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:wt("","#define GLOBE_RADIUS 6371008.8\nuniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos\n);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); \nif (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len\n);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}"),background:wt("uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:wt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wt("in vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {\n#ifdef GLOBE\nvec3 center_vector=projectToSphere(circle_center);\n#endif\nfloat angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {\n#ifdef GLOBE\nvec4 projected_center=interpolateProjection(circle_center,center_vector,ele);\n#else\nvec4 projected_center=projectTileWithElevation(circle_center,ele);\n#endif\ncorner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}\n#ifdef GLOBE\nvec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);\n#else\ngl_Position=projectTileWithElevation(corner_position,ele);\n#endif\n} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:wt(yt,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:wt("uniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);\n#ifdef GLOBE\nvec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);\n#else\ngl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));\n#endif\n}"),heatmapTexture:wt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:wt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else\n{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:wt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:wt(yt,"in vec2 a_pos;void main() {\n#ifdef GLOBE\ngl_Position=projectTileFor3D(a_pos,0.0);\n#else\ngl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);\n#endif\n}"),fill:wt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nfragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_fill_translate;in vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);}"),fillOutline:wt("in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillOutlinePattern:wt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillPattern:wt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:wt("in vec4 v_color;void main() {fragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\nout vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);\n#ifdef GLOBE\nmat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);\n#endif\ndirectional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:wt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\n#ifdef GLOBE\nout vec3 v_sphere_pos;\n#endif\nout vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nvec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:wt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wt("uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];\n#define PI 3.141592653589793\n#define STANDARD 0\n#define COMBINED 1\n#define IGOR 2\n#define MULTIDIRECTIONAL 3\n#define BASIC 4\nfloat get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else\n{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else\n{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:\nbasic_hillshade(deriv);break;case COMBINED:\ncombined_hillshade(deriv);break;case IGOR:\nigor_hillshade(deriv);break;case MULTIDIRECTIONAL:\nmultidirectional_hillshade(deriv);break;case STANDARD:\ndefault:\nstandard_hillshade(deriv);break;}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:wt("uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:wt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:wt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:wt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:wt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;\n#ifdef GLOBE\nif (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}\n#endif\nv_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:wt("uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:wt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:wt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:wt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:wt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:wt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:wt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:wt("in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758\n);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}","in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:wt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function wt(e,t){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=t.match(/in ([\w]+) ([\w]+)/g),i=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=a?a.concat(i):i,o={};return{fragmentSource:e=e.replace(r,((e,t,r,n,i)=>(o[i]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nin ${r} ${n} ${i};\n#else\nuniform ${r} ${n} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${r} ${n} ${i} = u_${i};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,r,n,i)=>{const a="float"===n?"vec2":"vec4",s=i.match(/color/)?"color":a;return o[i]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nin ${r} ${a} a_${i};\nout ${r} ${n} ${i};\n#else\nuniform ${r} ${n} u_${i};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${r} ${n} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${s}(a_${i}, u_${i}_t);\n#else\n    ${r} ${n} ${i} = u_${i};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nin ${r} ${a} a_${i};\n#else\nuniform ${r} ${n} u_${i};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${r} ${n} ${i} = a_${i};\n#else\n    ${r} ${n} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${r} ${n} ${i} = unpack_mix_${s}(a_${i}, u_${i}_t);\n#else\n    ${r} ${n} ${i} = u_${i};\n#endif\n`})),staticAttributes:n,staticUniforms:s}}class _t{constructor(e,t,r){this.vertexBuffer=e,this.indexBuffer=t,this.segments=r}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var kt=t.aI([{name:"a_pos",type:"Int16",components:2}]);const St="#define PROJECTION_MERCATOR",jt="mercator";class Et{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return jt}get shaderDefine(){return St}get shaderPreludeCode(){return bt.projectionMercator}get vertexShaderPreludeCode(){return bt.projectionMercator.vertexSource}get subdivisionGranularity(){return t.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,r,n,i,a){if(this._cachedMesh)return this._cachedMesh;const s=new t.aK;s.emplaceBack(0,0),s.emplaceBack(t.$,0),s.emplaceBack(0,t.$),s.emplaceBack(t.$,t.$);const o=e.createVertexBuffer(s,kt.members),l=t.aL.simpleSegment(0,0,4,2),c=new t.aM;c.emplaceBack(1,0,2),c.emplaceBack(1,2,3);const u=e.createIndexBuffer(c);return this._cachedMesh=new _t(o,u,l),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class Ct{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(r)||r<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=r,this.right=n}interpolate(e,r,n){return null!=r.top&&null!=e.top&&(this.top=t.C.number(e.top,r.top,n)),null!=r.bottom&&null!=e.bottom&&(this.bottom=t.C.number(e.bottom,r.bottom,n)),null!=r.left&&null!=e.left&&(this.left=t.C.number(e.left,r.left,n)),null!=r.right&&null!=e.right&&(this.right=t.C.number(e.right,r.right,n)),this}getCenter(e,r){const n=t.ag((this.left+e-this.right)/2,0,e),i=t.ag((this.top+r-this.bottom)/2,0,r);return new t.P(n,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Ct(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Nt(e,t){if(!e.renderWorldCopies||e.lngRange)return;const r=t.lng-e.center.lng;t.lng+=r>180?-360:r<-180?360:0}function Tt(e){return Math.max(0,Math.floor(e))}class Pt{constructor(e,r,n,i,a,s){this._callbacks=e,this._tileSize=512,this._renderWorldCopies=void 0===s||!!s,this._minZoom=r||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==a?60:a,this.setMaxBounds(),this._width=0,this._height=0,this._center=new t.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Tt(this._zoom),this._scale=t.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ct,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,r,n){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=Tt(this._zoom),this._scale=t.ae(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new Ct(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!n&&e.autoCalculateNearFarZ,r&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const r=t.aN(e,-180,180)*Math.PI/180;var i,a,s,o,l,c,u,d,h;this._bearingInRadians!==r&&(this._unmodified=!1,this._bearingInRadians=r,this._calcMatrices(),this._rotationMatrix=n(),i=this._rotationMatrix,s=-this._bearingInRadians,o=(a=this._rotationMatrix)[0],l=a[1],c=a[2],u=a[3],d=Math.sin(s),h=Math.cos(s),i[0]=o*h+c*d,i[1]=l*h+u*d,i[2]=o*-d+c*h,i[3]=l*-d+u*h)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const r=t.ag(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==r&&(this._unmodified=!1,this._pitchInRadians=r,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const t=e/180*Math.PI;this._rollInRadians!==t&&(this._unmodified=!1,this._rollInRadians=t,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return t.aO(this._fovInRadians)}setFov(e){e=t.ag(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=t.ad(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const r=this.getConstrained(this._center,e).zoom;this._zoom!==r&&(this._unmodified=!1,this._zoom=r,this._tileZoom=Math.max(0,Math.floor(r)),this._scale=t.ae(r),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,t){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=t,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}resize(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._width=e,this._height=t,r&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&2===this._latRange.length&&this._lngRange&&2===this._lngRange.length?new V([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,t.ah])}getConstrained(e,t){return this._callbacks.getConstrained(e,t)}getCameraQueryGeometry(e,r){if(1===r.length)return[r[0],e];{const{minX:n,minY:i,maxX:a,maxY:s}=t.a1.fromPoints(r).extend(e);return[new t.P(n,i),new t.P(a,i),new t.P(a,s),new t.P(n,s),new t.P(n,i)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:t,zoom:r}=this.getConstrained(this.center,this.zoom);this.setCenter(t),this.setZoom(r),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=t.af(new Float64Array(16));t.N(e,e,[this._width/2,-this._height/2,1]),t.M(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=t.af(new Float64Array(16)),t.N(e,e,[1,-1,1]),t.M(e,e,[-1,-1,0]),t.N(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,r,n,i){const a=void 0!==n?n:this.bearing,s=i=void 0!==i?i:this.pitch,o=t.a0.fromLngLat(e,r),l=-Math.cos(t.ad(s)),c=Math.sin(t.ad(s)),u=c*Math.sin(t.ad(a)),d=-c*Math.cos(t.ad(a));let h=this.elevation;const p=r-h;let f;l*p>=0||Math.abs(l)<.1?(f=1e4,h=r+f*l):f=-p/l;let m,g,v=t.aP(1,o.y),x=0;do{if(x+=1,x>10)break;g=f/v,m=new t.a0(o.x+u*g,o.y+d*g),v=1/m.meterInMercatorCoordinateUnits()}while(Math.abs(f-g*v)>1e-12);return{center:m.toLngLat(),elevation:h,zoom:t.aj(this.height/2/Math.tan(this.fovInRadians/2)/g/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const r=t.ai(1,this.center.lat)*this.worldSize,n=this.cameraToCenterDistance/r,i=t.a0.fromLngLat(this.center,this.elevation),a=he(this.center,this.elevation,this.pitch,this.bearing,n);this._elevation=e;const s=this.calculateCenterFromCameraLngLatAlt(a.toLngLat(),t.aP(a.z,i.y),this.bearing,this.pitch);this._elevation=s.elevation,this._center=s.center,this.setZoom(s.zoom)}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=t.ai(1,this.center.lat)*this.worldSize;return he(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const r=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/r,e.canonical.y/r,1/r/t.$,1/r/t.$]}}class At{constructor(e,r){this.min=e,this.max=r,this.center=t.aQ([],t.aR([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],n=t.aS(this.min),i=t.aS(this.max);for(let t=0;t<r.length;t++)n[t]=r[t]?this.min[t]:this.center[t],i[t]=r[t]?this.center[t]:this.max[t];return i[2]=this.max[2],new At(n,i)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let t=!0;for(let r=0;r<e.planes.length;r++){const n=this.intersectsPlane(e.planes[r]);if(0===n)return 0;1===n&&(t=!1)}return t?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let t=e[3],r=e[3];for(let n=0;n<3;n++)e[n]>0?(t+=e[n]*this.min[n],r+=e[n]*this.max[n]):(r+=e[n]*this.min[n],t+=e[n]*this.max[n]);return t>=0?2:r<0?0:1}}class Mt{distanceToTile2d(e,t,r,n){const i=n.distanceX([e,t]),a=n.distanceY([e,t]);return Math.hypot(i,a)}getWrap(e,t,r){return r}getTileBoundingVolume(e,r,n,i){var a,s;let o=n,l=n;if(null==i?void 0:i.terrain){const c=new t.Z(e.z,r,e.z,e.x,e.y),u=i.terrain.getMinMaxElevation(c);o=null!==(a=u.minElevation)&&void 0!==a?a:n,l=null!==(s=u.maxElevation)&&void 0!==s?s:n}const c=1<<e.z;return new At([r+e.x/c,e.y/c,o],[r+(e.x+1)/c,(e.y+1)/c,l])}allowVariableZoom(e,r){const n=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,i=t.ag(78.5-n/2,0,60);return!!r.terrain||e.pitch>i}allowWorldCopies(){return!0}prepareNextFrame(){}}class It{constructor(e,t,r){this.points=e,this.planes=t,this.aabb=r}static fromInvProjectionMatrix(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;const s=a?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],o=Math.pow(2,n),l=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>function(e,r,n,i){const a=t.av([],e,r),s=1/a[3]/n*i;return t.aX(a,a,[s,s,1/a[3],s])}(n,e,r,o)));i&&function(e,r,n,i){const a=i?4:0,s=i?0:4;let o=0;const l=[],c=[];for(let h=0;h<4;h++){const r=t.aT([],e[h+s],e[h+a]),n=t.aY(r);t.aQ(r,r,1/n),l.push(n),c.push(r)}for(let h=0;h<4;h++){const r=t.aZ(e[h+a],c[h],n);o=null!==r&&r>=0?Math.max(o,r):Math.max(o,l[h])}const u=function(e,r){const n=t.aT([],e[r[0]],e[r[1]]),i=t.aT([],e[r[2]],e[r[1]]),a=[0,0,0,0];return t.aU(a,t.aV([],n,i)),a[3]=-t.aW(a,e[r[0]]),a}(e,r),d=function(e,r){const n=t.a_(e),i=t.a$([],e,1/n),a=t.aT([],r,t.aQ([],i,t.aW(r,i))),s=t.a_(a);if(s>0){const e=Math.sqrt(1-i[3]*i[3]),n=t.aQ([],i,-i[3]),o=t.aR([],n,t.aQ([],a,e/s));return t.b0(r,o)}return null}(n,u);if(null!==d){const e=d/t.aW(c[0],u);o=Math.min(o,e)}for(let t=0;t<4;t++){const r=Math.min(o,l[t]);e[t+s]=[e[t+a][0]+c[t][0]*r,e[t+a][1]+c[t][1]*r,e[t+a][2]+c[t][2]*r,1]}}(l,s[0],i,a);const c=s.map((e=>{const r=t.aT([],l[e[0]],l[e[1]]),n=t.aT([],l[e[2]],l[e[1]]),i=t.aU([],t.aV([],r,n)),a=-t.aW(i,l[e[1]]);return i.concat(a)})),u=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],d=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const t of l)for(let e=0;e<3;e++)u[e]=Math.min(u[e],t[e]),d[e]=Math.max(d[e],t[e]);return new It(l,c,new At(u,d))}}class Ot{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,t,r){return this._helper.interpolatePadding(e,t,r)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._helper.resize(e,t,r)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,t){}constructor(e,t,r,n,i){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Pt({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,t)=>this.getConstrained(e,t)},e,t,r,n,i),this._coveringTilesDetailsProvider=new Mt}clone(){const e=new Ot;return e.apply(this),e}apply(e,t,r){this._helper.apply(e,t,r)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const r=[new t.b1(0,e)];if(this._helper._renderWorldCopies){const n=this.screenPointToMercatorCoordinate(new t.P(0,0)),i=this.screenPointToMercatorCoordinate(new t.P(this._helper._width,0)),a=this.screenPointToMercatorCoordinate(new t.P(this._helper._width,this._helper._height)),s=this.screenPointToMercatorCoordinate(new t.P(0,this._helper._height)),o=Math.floor(Math.min(n.x,i.x,a.x,s.x)),l=Math.floor(Math.max(n.x,i.x,a.x,s.x)),c=1;for(let u=o-c;u<=l+c;u++)0!==u&&r.push(new t.b1(u,e))}return r}getCameraFrustum(){return It.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const t=this.screenPointToLocation(this.centerPoint,e),r=e?e.getElevationForLngLatZoom(t,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(r)}setLocationAtPoint(e,r){const n=t.ai(this.elevation,this.center.lat),i=this.screenPointToMercatorCoordinateAtZ(r,n),a=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,n),s=t.a0.fromLngLat(e),o=new t.a0(s.x-(i.x-a.x),s.y-(i.y-a.y));this.setCenter(null==o?void 0:o.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,r){return r?this.coordinatePoint(t.a0.fromLngLat(e),r.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(t.a0.fromLngLat(e))}screenPointToLocation(e,t){var r;return null===(r=this.screenPointToMercatorCoordinate(e,t))||void 0===r?void 0:r.toLngLat()}screenPointToMercatorCoordinate(e,t){if(t){const r=t.pointCoordinate(e);if(null!=r)return r}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,r){const n=r||0,i=[e.x,e.y,0,1],a=[e.x,e.y,1,1];t.av(i,i,this._pixelMatrixInverse),t.av(a,a,this._pixelMatrixInverse);const s=i[3],o=a[3],l=i[1]/s,c=a[1]/o,u=i[2]/s,d=a[2]/o,h=u===d?0:(n-u)/(d-u);return new t.a0(t.C.number(i[0]/s,a[0]/o,h)/this.worldSize,t.C.number(l,c,h)/this.worldSize,n)}coordinatePoint(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._pixelMatrix;const i=[e.x*this.worldSize,e.y*this.worldSize,r,1];return t.av(i,i,n),new t.P(i[0]/i[3],i[1]/i[3])}getBounds(){const e=Math.max(0,this._helper._height/2-ue(this));return(new V).extend(this.screenPointToLocation(new t.P(0,e))).extend(this.screenPointToLocation(new t.P(this._helper._width,e))).extend(this.screenPointToLocation(new t.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new t.P(0,this._helper._height)))}isPointOnMapSurface(e,t){return t?null!=t.pointCoordinate(e):e.y>this.height/2-ue(this)}calculatePosMatrix(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;var i;const a=null!==(i=e.key)&&void 0!==i?i:t.b2(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),s=r?this._alignedPosMatrixCache:this._posMatrixCache;if(s.has(a)){const e=s.get(a);return n?e.f32:e.f64}const o=de(e,this.worldSize);t.O(o,r?this._alignedProjMatrix:this._viewProjMatrix,o);const l={f64:o,f32:new Float32Array(o)};return s.set(a,l),n?l.f32:l.f64}calculateFogMatrix(e){const r=e.key,n=this._fogMatrixCacheF32;if(n.has(r))return n.get(r);const i=de(e,this.worldSize);return t.O(i,this._fogMatrix,i),n.set(r,new Float32Array(i)),n.get(r)}getConstrained(e,r){r=t.ag(+r,this.minZoom,this.maxZoom);const n={center:new t.S(e.lng,e.lat),zoom:r};let i=this._helper._lngRange;this._helper._renderWorldCopies||null!==i||(i=[-179.9999999999,180-1e-10]);const a=this.tileSize*t.ae(n.zoom);let s=0,o=a,l=0,c=a,u=0,d=0;const{x:h,y:p}=this.size;if(this._helper._latRange){const e=this._helper._latRange;s=t.U(e[1])*a,o=t.U(e[0])*a,o-s<p&&(u=p/(o-s))}i&&(l=t.aN(t.V(i[0])*a,0,a),c=t.aN(t.V(i[1])*a,0,a),c<l&&(c+=a),c-l<h&&(d=h/(c-l)));const{x:f,y:m}=le(a,e);let g,v;const x=Math.max(d||0,u||0);if(x){const e=new t.P(d?(c+l)/2:f,u?(o+s)/2:m);return n.center=ce(a,e).wrap(),n.zoom+=t.aj(x),n}if(this._helper._latRange){const e=p/2;m-e<s&&(v=s+e),m+e>o&&(v=o-e)}if(i){const e=(l+c)/2;let r=f;this._helper._renderWorldCopies&&(r=t.aN(f,e-a/2,e+a/2));const n=h/2;r-n<l&&(g=l+n),r+n>c&&(g=c-n)}if(void 0!==g||void 0!==v){const e=new t.P(null!=g?g:f,null!=v?v:m);n.center=ce(a,e).wrap()}return n}calculateCenterFromCameraLngLatAlt(e,t,r,n){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,r,n)}_calculateNearFarZIfNeeded(e,r,n){if(!this._helper.autoCalculateNearFarZ)return;const i=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),a=e-i*this._helper._pixelPerMeter/Math.cos(r),s=i<0?a:e,o=Math.PI/2+this.pitchInRadians,l=t.ad(this.fov)*(Math.abs(Math.cos(t.ad(this.roll)))*this.height+Math.abs(Math.sin(t.ad(this.roll)))*this.width)/this.height*(.5+n.y/this.height),c=Math.sin(l)*s/Math.sin(t.ag(Math.PI-o-l,.01,Math.PI-.01)),u=ue(this),d=Math.atan(u/this._helper.cameraToCenterDistance),h=t.ad(.75),p=d>h?2*d*(.5+n.y/(2*u)):h,f=Math.sin(p)*s/Math.sin(t.ag(Math.PI-o-p,.01,Math.PI-.01)),m=Math.min(c,f);this._helper._farZ=1.01*(Math.cos(Math.PI/2-r)*m+s),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,r=le(this.worldSize,this.center),n=r.x,i=r.y;this._helper._pixelPerMeter=t.ai(1,this.center.lat)*this.worldSize;const a=t.ad(Math.min(this.pitch,oe)),s=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(a));let o;this._calculateNearFarZIfNeeded(s,a,e),o=new Float64Array(16),t.b3(o,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),t.ap(this._invProjMatrix,o),o[8]=2*-e.x/this._helper._width,o[9]=2*e.y/this._helper._height,this._projectionMatrix=t.b4(o),t.N(o,o,[1,-1,1]),t.M(o,o,[0,0,-this._helper.cameraToCenterDistance]),t.b5(o,o,-this.rollInRadians),t.b6(o,o,this.pitchInRadians),t.b5(o,o,-this.bearingInRadians),t.M(o,o,[-n,-i,0]),this._mercatorMatrix=t.N([],o,[this.worldSize,this.worldSize,this.worldSize]),t.N(o,o,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=t.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,o),t.M(o,o,[0,0,-this.elevation]),this._viewProjMatrix=o,this._invViewProjMatrix=t.ap([],o);const l=[0,0,-1,1];t.av(l,l,this._invViewProjMatrix),this._cameraPosition=[l[0]/l[3],l[1]/l[3],l[2]/l[3]],this._fogMatrix=new Float64Array(16),t.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,s,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,t.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),t.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),t.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),t.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),t.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),t.M(this._fogMatrix,this._fogMatrix,[-n,-i,0]),t.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),t.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=t.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,o);const c=this._helper._width%2/2,u=this._helper._height%2/2,d=Math.cos(this.bearingInRadians),h=Math.sin(-this.bearingInRadians),p=n-Math.round(n)+d*c+h*u,f=i-Math.round(i)+d*u+h*c,m=new Float64Array(o);if(t.M(m,m,[p>.5?p-1:p,f>.5?f-1:f,0]),this._alignedProjMatrix=m,o=t.ap(new Float64Array(16),this._pixelMatrix),!o)throw new Error("failed to invert matrix");this._pixelMatrixInverse=o,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new t.P(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.av(r,r,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=t.ai(1,this.center.lat)*this.worldSize;return he(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,r){const n=t.a0.fromLngLat(e),i=[n.x*this.worldSize,n.y*this.worldSize,r,1];return t.av(i,i,this._viewProjMatrix),i[2]/i[3]}getProjectionData(e){const{overscaledTileID:r,aligned:n,applyTerrainMatrix:i}=e,a=this._helper.getMercatorTileCoordinates(r),s=r?this.calculatePosMatrix(r,n,!0):null;let o;return o=r&&r.terrainRttPosMatrix32f&&i?r.terrainRttPosMatrix32f:s||t.b7(),{mainMatrix:o,tileMercatorCoords:a,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:o}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,t,r){return 1}transformLightDirection(e){return t.aS(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,r,n,i){const a=this.calculatePosMatrix(n);let s;i?(s=[e,r,i(e,r),1],t.av(s,s,a)):(s=[e,r,0,1],We(s,s,a));const o=s[3];return{point:new t.P(s[0]/o,s[1]/o),signedDistanceFromCamera:o,isOccluded:!1}}populateCache(e){for(const t of e)this.calculatePosMatrix(t)}getMatrixForModel(e,r){const n=t.a0.fromLngLat(e,r),i=n.meterInMercatorCoordinateUnits(),a=t.b8();return t.M(a,a,[n.x,n.y,n.z]),t.b5(a,a,Math.PI),t.b6(a,a,Math.PI/2),t.N(a,a,[-i,i,i]),a}getProjectionDataForCustomLayer(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const r=new t.Z(0,0,0,0,0),n=this.getProjectionData({overscaledTileID:r,applyGlobeMatrix:e}),i=de(r,this.worldSize);t.O(i,this._viewProjMatrix,i),n.tileMercatorCoords=[0,0,1,1];const a=[t.$,t.$,this.worldSize/this._helper.pixelsPerMeter],s=t.b9();return t.N(s,i,a),n.fallbackMatrix=s,n.mainMatrix=s,n}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function Dt(){t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Rt(e){if(e.useSlerp)if(e.k<1){const r=t.ba(e.startEulerAngles.roll,e.startEulerAngles.pitch,e.startEulerAngles.bearing),n=t.ba(e.endEulerAngles.roll,e.endEulerAngles.pitch,e.endEulerAngles.bearing),i=new Float64Array(4);t.bb(i,r,n,e.k);const a=t.bc(i);e.tr.setRoll(a.roll),e.tr.setPitch(a.pitch),e.tr.setBearing(a.bearing)}else e.tr.setRoll(e.endEulerAngles.roll),e.tr.setPitch(e.endEulerAngles.pitch),e.tr.setBearing(e.endEulerAngles.bearing);else e.tr.setRoll(t.C.number(e.startEulerAngles.roll,e.endEulerAngles.roll,e.k)),e.tr.setPitch(t.C.number(e.startEulerAngles.pitch,e.endEulerAngles.pitch,e.k)),e.tr.setBearing(t.C.number(e.startEulerAngles.bearing,e.endEulerAngles.bearing,e.k))}function Lt(e,r,n,i,a){const s=a.padding,o=le(a.worldSize,n.getNorthWest()),l=le(a.worldSize,n.getNorthEast()),c=le(a.worldSize,n.getSouthEast()),u=le(a.worldSize,n.getSouthWest()),d=t.ad(-i),h=o.rotate(d),p=l.rotate(d),f=c.rotate(d),m=u.rotate(d),g=new t.P(Math.max(h.x,p.x,m.x,f.x),Math.max(h.y,p.y,m.y,f.y)),v=new t.P(Math.min(h.x,p.x,m.x,f.x),Math.min(h.y,p.y,m.y,f.y)),x=g.sub(v),y=(a.width-(s.left+s.right+r.left+r.right))/x.x,b=(a.height-(s.top+s.bottom+r.top+r.bottom))/x.y;if(b<0||y<0)return void Dt();const w=Math.min(t.aj(a.scale*Math.min(y,b)),e.maxZoom),_=t.P.convert(e.offset),k=new t.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(t.ad(i)),S=_.add(k).mult(a.scale/t.ae(w));return{center:ce(a.worldSize,o.add(c).div(2).sub(S)),zoom:w,bearing:i}}class Ft{get useGlobeControls(){return!1}handlePanInertia(e,t){return{easingOffset:e,easingCenter:t.center}}handleMapControlsRollPitchBearingZoom(e,t){e.bearingDelta&&t.setBearing(t.bearing+e.bearingDelta),e.pitchDelta&&t.setPitch(t.pitch+e.pitchDelta),e.rollDelta&&t.setRoll(t.roll+e.rollDelta),e.zoomDelta&&t.setZoom(t.zoom+e.zoomDelta)}handleMapControlsPan(e,t,r){e.around.distSqr(t.centerPoint)<.01||t.setLocationAtPoint(r,e.around)}cameraForBoxAndBearing(e,t,r,n,i){return Lt(e,t,r,n,i)}handleJumpToCenterZoom(e,r){e.zoom!==(void 0!==r.zoom?+r.zoom:e.zoom)&&e.setZoom(+r.zoom),void 0!==r.center&&e.setCenter(t.S.convert(r.center))}handleEaseTo(e,r){const n=e.zoom,i=e.padding,a={roll:e.roll,pitch:e.pitch,bearing:e.bearing},s={roll:void 0===r.roll?e.roll:r.roll,pitch:void 0===r.pitch?e.pitch:r.pitch,bearing:void 0===r.bearing?e.bearing:r.bearing},o=void 0!==r.zoom,l=!e.isPaddingEqual(r.padding);let c=!1;const u=o?+r.zoom:e.zoom;let d=e.centerPoint.add(r.offsetAsPoint);const h=e.screenPointToLocation(d),{center:p,zoom:f}=e.getConstrained(t.S.convert(r.center||h),null!=u?u:n);Nt(e,p);const m=le(e.worldSize,h),g=le(e.worldSize,p).sub(m),v=t.ae(f-n);return c=f!==n,{easeFunc:o=>{if(c&&e.setZoom(t.C.number(n,f,o)),t.bd(a,s)||Rt({startEulerAngles:a,endEulerAngles:s,tr:e,k:o,useSlerp:a.roll!=s.roll}),l&&(e.interpolatePadding(i,r.padding,o),d=e.centerPoint.add(r.offsetAsPoint)),r.around)e.setLocationAtPoint(r.around,r.aroundPoint);else{const r=t.ae(e.zoom-n),i=f>n?Math.min(2,v):Math.max(.5,v),a=Math.pow(i,1-o),s=ce(e.worldSize,m.add(g.mult(o*a)).mult(r));e.setLocationAtPoint(e.renderWorldCopies?s.wrap():s,d)}},isZooming:c,elevationCenter:p}}handleFlyTo(e,r){const n=void 0!==r.zoom,i=e.zoom,a=e.getConstrained(t.S.convert(r.center||r.locationAtOffset),n?+r.zoom:i),s=a.center,o=a.zoom;Nt(e,s);const l=le(e.worldSize,r.locationAtOffset),c=le(e.worldSize,s).sub(l),u=c.mag(),d=t.ae(o-i);let h;if(void 0!==r.minZoom){const n=Math.min(+r.minZoom,i,o),a=e.getConstrained(s,n).zoom;h=t.ae(a-i)}return{easeFunc:(r,n,a,u)=>{e.setZoom(1===r?o:i+t.aj(n));const d=1===r?s:ce(e.worldSize,l.add(c.mult(a)).mult(n));e.setLocationAtPoint(e.renderWorldCopies?d.wrap():d,u)},scaleOfZoom:d,targetCenter:s,scaleOfMinZoom:h,pixelPathLength:u}}}class $t{constructor(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r}}$t.Replace=[1,0],$t.disabled=new $t($t.Replace,t.be.transparent,[!1,!1,!1,!1]),$t.unblended=new $t($t.Replace,t.be.transparent,[!0,!0,!0,!0]),$t.alphaBlended=new $t([1,771],t.be.transparent,[!0,!0,!0,!0]);const Bt=2305;class zt{constructor(e,t,r){this.enable=e,this.mode=t,this.frontFace=r}}zt.disabled=new zt(!1,1029,Bt),zt.backCCW=new zt(!0,1029,Bt),zt.frontCCW=new zt(!0,1028,Bt);class Ut{constructor(e,t,r){this.func=e,this.mask=t,this.range=r}}Ut.ReadOnly=!1,Ut.ReadWrite=!0,Ut.disabled=new Ut(519,Ut.ReadOnly,[0,1]);const Vt=7680;class Ht{constructor(e,t,r,n,i,a){this.test=e,this.ref=t,this.mask=r,this.fail=n,this.depthFail=i,this.pass=a}}Ht.disabled=new Ht({func:519,mask:0},0,0,Vt,Vt,Vt);const Gt=new WeakMap;function Wt(e){var t;if(Gt.has(e))return Gt.get(e);{const r=null===(t=e.getParameter(e.VERSION))||void 0===t?void 0:t.startsWith("WebGL 2.0");return Gt.set(e,r),r}}class qt{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const r=e.context,n=r.gl;this._texFormat=n.RGBA,this._texType=n.UNSIGNED_BYTE;const i=new t.aK;i.emplaceBack(-1,-1),i.emplaceBack(2,-1),i.emplaceBack(-1,2);const a=new t.aM;a.emplaceBack(0,1,2),this._fullscreenTriangle=new _t(r.createVertexBuffer(i,kt.members),r.createIndexBuffer(a),t.aL.simpleSegment(0,0,i.length,a.length)),this._resultBuffer=new Uint8Array(4),r.activeTexture.set(n.TEXTURE1);const s=n.createTexture();n.bindTexture(n.TEXTURE_2D,s),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texImage2D(n.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=r.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(s),Wt(n)&&(this._pbo=n.createBuffer(),n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.bufferData(n.PIXEL_PACK_BUFFER,4,n.STREAM_READ),n.bindBuffer(n.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,t){const r=this._updateCount;return this._readbackQueue?r>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():r>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,t),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,t=e.gl;e.activeTexture.set(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,r){const n=this._cachedRenderContext.context,i=n.gl;if(this._bindFramebuffer(),n.viewport.set([0,0,this._texWidth,this._texHeight]),n.clear({color:t.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(n,i.TRIANGLES,Ut.disabled,Ht.disabled,$t.unblended,zt.disabled,((e,t)=>({u_input:e,u_output_expected:t}))(e,r),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Wt(i)){i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.readBuffer(i.COLOR_ATTACHMENT0),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),i.bindBuffer(i.PIXEL_PACK_BUFFER,null);const e=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);i.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:e}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Wt(e)){const r=e.clientWaitSync(this._readbackQueue.sync,0,0);if(r===e.WAIT_FAILED)return t.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(r===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=qt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let t=0;return t+=e[0]/256,t+=e[1]/65536,t+=e[2]/16777216,e[3]<127&&(t=-t),t/128}}const Kt=t.$/128;function Zt(e,r){const n=void 0!==e.granularity?Math.max(e.granularity,1):1,i=n+(e.generateBorders?2:0),a=n+(e.extendToNorthPole||e.generateBorders?1:0)+(e.extendToSouthPole||e.generateBorders?1:0),s=i+1,o=a+1,l=e.generateBorders?-1:0,c=e.generateBorders||e.extendToNorthPole?-1:0,u=n+(e.generateBorders?1:0),d=n+(e.generateBorders||e.extendToSouthPole?1:0),h=s*o,p=i*a*6,f=s*o>65536;if(f&&"16bit"===r)throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const m=f||"32bit"===r,g=new Int16Array(2*h);let v=0;for(let b=c;b<=d;b++)for(let r=l;r<=u;r++){let i=r/n*t.$;-1===r&&(i=-64),r===n+1&&(i=t.$+Kt);let a=b/n*t.$;-1===b&&(a=e.extendToNorthPole?t.bg:-64),b===n+1&&(a=e.extendToSouthPole?t.bh:t.$+Kt),g[v++]=i,g[v++]=a}const x=m?new Uint32Array(p):new Uint16Array(p);let y=0;for(let t=0;t<a;t++)for(let e=0;e<i;e++){const r=e+1+t*s,n=e+(t+1)*s,i=e+1+(t+1)*s;x[y++]=e+t*s,x[y++]=n,x[y++]=r,x[y++]=r,x[y++]=n,x[y++]=i}return{vertices:g.buffer.slice(0),indices:x.buffer.slice(0),uses32bitIndices:m}}const Yt=new t.aJ({fill:new t.bi(128,2),line:new t.bi(512,0),tile:new t.bi(128,32),stencil:new t.bi(128,1),circle:3});class Xt{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return bt.projectionGlobe}get vertexShaderPreludeCode(){return bt.projectionMercator.vertexSource}get subdivisionGranularity(){return Yt}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new qt(e));const r=t.U(this._errorQueryLatitudeDegrees),n=2*Math.atan(Math.exp(Math.PI-r*Math.PI*2))-.5*Math.PI,i=this._errorMeasurement.updateErrorLoop(r,n),a=s.now();i!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=i,this._errorMeasurementLastChangeTime=a);const o=Math.min(Math.max((a-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=t.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,t.bk(o))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,t,r,n,i){const a=("stencil"===i?Yt.stencil:Yt.tile).getGranularityForZoomLevel(t.z);return this._getMesh(e,{granularity:a,generateBorders:r,extendToNorthPole:0===t.y&&n,extendToSouthPole:t.y===(1<<t.z)-1&&n})}_getMesh(e,r){const n=this._getMeshKey(r);if(n in this._tileMeshCache)return this._tileMeshCache[n];const i=function(e,r){const n=Zt(r,"16bit"),i=t.aK.deserialize({arrayBuffer:n.vertices,length:n.vertices.byteLength/2/2}),a=t.aM.deserialize({arrayBuffer:n.indices,length:n.indices.byteLength/2/3});return new _t(e.createVertexBuffer(i,kt.members),e.createIndexBuffer(a),t.aL.simpleSegment(0,0,i.length,a.length))}(e,r);return this._tileMeshCache[n]=i,i}recalculate(e){}hasTransition(){const e=s.now();let t=!1;return t=t||(e-this._errorMeasurementLastChangeTime)/1e3<.7,t=t||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,t}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const Qt=new t.r({type:new t.D(t.v.projection.type)});class Jt extends t.E{constructor(e){super(),this._transitionable=new t.t(Qt),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.F(0)),this._mercatorProjection=new Et,this._verticalPerspectiveProjection=new Xt}get transitionState(){const e=this.properties.get("type");if("string"==typeof e&&"mercator"===e)return 0;if("string"==typeof e&&"vertical-perspective"===e)return 1;if(e instanceof t.bl){if("vertical-perspective"===e.from&&"mercator"===e.to)return 1-e.transition;if("mercator"===e.from&&"vertical-perspective"===e.to)return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,t,r,n,i){return this.currentProjection.getMeshFromTileID(e,t,r,n,i)}setProjection(e){this._transitionable.setValue("type",(null==e?void 0:e.type)||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function er(e){const t=nr(e.worldSize,e.center.lat);return 2*Math.PI*t}function tr(e,r,n,i,a){const s=1/(1<<a),o=r/t.$*s+i*s,l=t.bn((e/t.$*s+n*s)*Math.PI*2+Math.PI,2*Math.PI),c=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,u=Math.cos(c),d=new Float64Array(3);return d[0]=Math.sin(l)*u,d[1]=Math.sin(c),d[2]=Math.cos(l)*u,d}function rr(e){return function(e,t){const r=Math.cos(t),n=new Float64Array(3);return n[0]=Math.sin(e)*r,n[1]=Math.sin(t),n[2]=Math.cos(e)*r,n}(e.lng*Math.PI/180,e.lat*Math.PI/180)}function nr(e,t){return e/(2*Math.PI)/Math.cos(t*Math.PI/180)}function ir(e){const r=Math.asin(e[1])/Math.PI*180,n=Math.sqrt(e[0]*e[0]+e[2]*e[2]);if(n>1e-6){const i=e[0]/n,a=Math.acos(e[2]/n),s=(i>0?a:-a)/Math.PI*180;return new t.S(t.aN(s,-180,180),r)}return new t.S(0,r)}function ar(e){return Math.cos(e*Math.PI/180)}function sr(e,r){const n=ar(e),i=ar(r);return t.aj(i/n)}function or(e,r){const n=e.rotate(r.bearingInRadians),i=r.zoom+sr(r.center.lat,0),a=t.bj(1/ar(r.center.lat),1/ar(Math.min(Math.abs(r.center.lat),60)),t.bm(i,7,3,0,1)),s=360/er({worldSize:r.worldSize,center:{lat:r.center.lat}});return new t.S(r.center.lng-n.x*s*a,t.ag(r.center.lat+n.y*s,-85.051129,t.ah))}function lr(e){const t=.5*e,r=Math.sin(t),n=Math.cos(t);return Math.log(r+n)-Math.log(n-r)}function cr(e,r,n,i){const a=e.lat+n*i;if(Math.abs(n)>1){const s=(Math.sign(e.lat+n)!==Math.sign(e.lat)?-Math.abs(e.lat):Math.abs(e.lat))*Math.PI/180,o=Math.abs(e.lat+n)*Math.PI/180,l=lr(s+i*(o-s)),c=lr(s),u=lr(o);return new t.S(e.lng+r*((l-c)/(u-c)),a)}return new t.S(e.lng+r*i,a)}class ur{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=e}swapBuffers(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(e,t,r,n){const i=`${e.z}_${e.x}_${e.y}_${(null==n?void 0:n.terrain)?"t":""}`,a=this._cache.get(i);if(a)return a;const s=this._cachePrevious.get(i);if(s)return this._cache.set(i,s),s;const o=this._boundingVolumeFactory(e,t,r,n);return this._cache.set(i,o),this._hadAnyChanges=!0,o}}class dr{constructor(e,t,r,n){this.min=r,this.max=n,this.points=e,this.planes=t}static fromAabb(e,t){const r=[];for(let n=0;n<8;n++)r.push([1&~n?e[0]:t[0],1==(n>>1&1)?t[1]:e[1],1==(n>>2&1)?t[2]:e[2]]);return new dr(r,[[-1,0,0,t[0]],[1,0,0,-e[0]],[0,-1,0,t[1]],[0,1,0,-e[1]],[0,0,-1,t[2]],[0,0,1,-e[2]]],e,t)}static fromCenterSizeAngles(e,r,n){const i=t.bq([],n[0],n[1],n[2]),a=t.br([],[r[0],0,0],i),s=t.br([],[0,r[1],0],i),o=t.br([],[0,0,r[2]],i),l=[...e],c=[...e];for(let t=0;t<8;t++)for(let r=0;r<3;r++){const n=e[r]+a[r]*(1&~t?-1:1)+s[r]*(1==(t>>1&1)?1:-1)+o[r]*(1==(t>>2&1)?1:-1);l[r]=Math.min(l[r],n),c[r]=Math.max(c[r],n)}const u=[];for(let d=0;d<8;d++){const r=[...e];t.aR(r,r,t.aQ([],a,1&~d?-1:1)),t.aR(r,r,t.aQ([],s,1==(d>>1&1)?1:-1)),t.aR(r,r,t.aQ([],o,1==(d>>2&1)?1:-1)),u.push(r)}return new dr(u,[[...a,-t.aW(a,u[0])],[...s,-t.aW(s,u[0])],[...o,-t.aW(o,u[0])],[-a[0],-a[1],-a[2],-t.aW(a,u[7])],[-s[0],-s[1],-s[2],-t.aW(s,u[7])],[-o[0],-o[1],-o[2],-t.aW(o,u[7])]],l,c)}intersectsFrustum(e){let t=!0;const r=this.points.length,n=this.planes.length,i=e.planes.length,a=e.points.length;for(let s=0;s<i;s++){const n=e.planes[s];let i=0;for(let e=0;e<r;e++){const t=this.points[e];n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]>=0&&i++}if(0===i)return 0;i<r&&(t=!1)}if(t)return 2;for(let s=0;s<n;s++){const t=this.planes[s];let r=0;for(let n=0;n<a;n++){const i=e.points[n];t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]>=0&&r++}if(0===r)return 0}return 1}intersectsPlane(e){const t=this.points.length;let r=0;for(let n=0;n<t;n++){const t=this.points[n];e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]>=0&&r++}return r===t?2:0===r?0:1}}function hr(e,t,r){const n=e-t;return n<0?-n:Math.max(0,n-r)}function pr(e,t,r,n,i){const a=e-r;let s;return s=a<0?Math.min(-a,1+a-i):a>1?Math.min(Math.max(a-i,0),1-a):0,Math.max(s,hr(t,n,i))}class fr{constructor(){this._boundingVolumeCache=new ur(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(e,t,r,n){const i=1<<r.z,a=1/i,s=r.x/i,o=r.y/i;let l=2;return l=Math.min(l,pr(e,t,s,o,a)),l=Math.min(l,pr(e,t,s+.5,-o-a,a)),l=Math.min(l,pr(e,t,s+.5,2-o-a,a)),l}getWrap(e,t,r){const n=1<<t.z,i=1/n,a=t.x/n,s=hr(e.x,a,i),o=hr(e.x,a-1,i),l=hr(e.x,a+1,i),c=Math.min(s,o,l);return c===l?1:c===o?-1:0}allowVariableZoom(e,t){return ve(e,t)>4}allowWorldCopies(){return!1}getTileBoundingVolume(e,t,r,n){return this._boundingVolumeCache.getTileBoundingVolume(e,t,r,n)}_computeTileBoundingVolume(e,r,n,i){var a,s;let o=n,l=n;if(null==i?void 0:i.terrain){const c=new t.Z(e.z,r,e.z,e.x,e.y),u=i.terrain.getMinMaxElevation(c);o=null!==(a=u.minElevation)&&void 0!==a?a:n,l=null!==(s=u.maxElevation)&&void 0!==s?s:n}if(o/=t.bt,l/=t.bt,o+=1,l+=1,e.z<=0)return dr.fromAabb([-l,-l,-l],[l,l,l]);if(1===e.z)return dr.fromAabb([0===e.x?-l:0,0===e.y?0:-l,-l],[0===e.x?0:l,0===e.y?l:0,l]);{const r=[tr(0,0,e.x,e.y,e.z),tr(t.$,0,e.x,e.y,e.z),tr(t.$,t.$,e.x,e.y,e.z),tr(0,t.$,e.x,e.y,e.z)],n=[];for(const e of r)n.push(t.aQ([],e,l));if(l!==o)for(const e of r)n.push(t.aQ([],e,o));0===e.y&&n.push([0,1,0]),e.y===(1<<e.z)-1&&n.push([0,-1,0]);const i=[1,1,1],a=[-1,-1,-1];for(const e of n)for(let t=0;t<3;t++)i[t]=Math.min(i[t],e[t]),a[t]=Math.max(a[t],e[t]);const s=tr(t.$/2,t.$/2,e.x,e.y,e.z),c=t.aV([],[0,1,0],s);t.aU(c,c);const u=t.aV([],s,c);t.aU(u,u);const d=t.aV([],r[2],r[1]);t.aU(d,d);const h=t.aV([],r[0],r[3]);t.aU(h,h),n.push(t.aQ([],s,l)),e.y>=(1<<e.z)/2&&n.push(t.aQ([],tr(t.$/2,0,e.x,e.y,e.z),l)),e.y<(1<<e.z)/2&&n.push(t.aQ([],tr(t.$/2,t.$,e.x,e.y,e.z),l));const p=mr(s,n),f=mr(u,n),m=[-s[0],-s[1],-s[2],p.max],g=[s[0],s[1],s[2],-p.min],v=[-u[0],-u[1],-u[2],f.max],x=[u[0],u[1],u[2],-f.min],y=[...d,0],b=[...h,0],w=[];return 0===e.y?w.push(t.bs(b,y,m),t.bs(b,y,g)):w.push(t.bs(v,y,m),t.bs(v,y,g),t.bs(v,b,m),t.bs(v,b,g)),e.y===(1<<e.z)-1?w.push(t.bs(b,y,m),t.bs(b,y,g)):w.push(t.bs(x,y,m),t.bs(x,y,g),t.bs(x,b,m),t.bs(x,b,g)),new dr(w,[m,g,v,x,y,b],i,a)}}}function mr(e,r){let n=1/0,i=-1/0;for(const a of r){const r=t.aW(e,a);n=Math.min(n,r),i=Math.max(i,r)}return{min:n,max:i}}class gr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,t,r){return this._helper.interpolatePadding(e,t,r)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t){this._helper.resize(e,t)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(){this._cachedClippingPlane=t.bu(),this._projectionMatrix=t.b8(),this._globeViewProjMatrix32f=t.b7(),this._globeViewProjMatrixNoCorrection=t.b8(),this._globeViewProjMatrixNoCorrectionInverted=t.b8(),this._globeProjMatrixInverted=t.b8(),this._cameraPosition=t.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Pt({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,t)=>this.getConstrained(e,t)}),this._coveringTilesDetailsProvider=new fr}clone(){const e=new gr;return e.apply(this),e}apply(e,t){this._globeLatitudeErrorCorrectionRadians=t||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=t.bo();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:t,applyGlobeMatrix:r}=e,n=this._helper.getMercatorTileCoordinates(t);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:n,clippingPlane:this._cachedClippingPlane,projectionTransition:r?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const r=this.pitchInRadians,n=this.cameraToCenterDistance/e,i=Math.sin(r)*n,a=Math.cos(r)*n+1,s=1/Math.sqrt(i*i+a*a)*1;let o=-i,l=a;const c=Math.sqrt(o*o+l*l);o/=c,l/=c;const u=[0,o,l];t.bv(u,u,[0,0,0],-this.bearingInRadians),t.bw(u,u,[0,0,0],-1*this.center.lat*Math.PI/180),t.bx(u,u,[0,0,0],this.center.lng*Math.PI/180);const d=1/t.aY(u);return t.aQ(u,u,d),[...u,-s*d]}isLocationOccluded(e){return!this.isSurfacePointVisible(rr(e))}transformLightDirection(e){const r=this._helper._center.lng*Math.PI/180,n=this._helper._center.lat*Math.PI/180,i=Math.cos(n),a=[Math.sin(r)*i,Math.sin(n),Math.cos(r)*i],s=[a[2],0,-a[0]],o=[0,0,0];t.aV(o,s,a),t.aU(s,s),t.aU(o,o);const l=[0,0,0];return t.aU(l,[s[0]*e[0]+o[0]*e[1]+a[0]*e[2],s[1]*e[0]+o[1]*e[1]+a[1]*e[2],s[2]*e[0]+o[2]*e[1]+a[2]*e[2]]),l}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,r,n){const i=function(e,r,n){const i=1/(1<<n.z);return new t.a0(e/t.$*i+n.x*i,r/t.$*i+n.y*i)}(e,r,n.canonical),a=(s=i.y,[t.bn(i.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-s*Math.PI*2))-.5*Math.PI]);var s;return this.getCircleRadiusCorrection()/Math.cos(a[1])}projectTileCoordinates(e,r,n,i){const a=n.canonical,s=tr(e,r,a.x,a.y,a.z),o=1+(i?i(e,r):0)/t.bt,l=[s[0]*o,s[1]*o,s[2]*o,1];t.av(l,l,this._globeViewProjMatrixNoCorrection);const c=this._cachedClippingPlane,u=c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]<0;return{point:new t.P(l[0]/l[3],l[1]/l[3]),signedDistanceFromCamera:l[3],isOccluded:u}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=nr(this.worldSize,this.center.lat),r=t.b9(),n=t.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),t.b3(r,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const i=this.centerOffset;r[8]=2*-i.x/this._helper._width,r[9]=2*i.y/this._helper._height,this._projectionMatrix=t.b4(r),this._globeProjMatrixInverted=t.b9(),t.ap(this._globeProjMatrixInverted,r),t.M(r,r,[0,0,-this.cameraToCenterDistance]),t.b5(r,r,this.rollInRadians),t.b6(r,r,-this.pitchInRadians),t.b5(r,r,this.bearingInRadians),t.M(r,r,[0,0,-e]);const a=t.bo();a[0]=e,a[1]=e,a[2]=e,t.b6(n,r,this.center.lat*Math.PI/180),t.by(n,n,-this.center.lng*Math.PI/180),t.N(n,n,a),this._globeViewProjMatrixNoCorrection=n,t.b6(r,r,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),t.by(r,r,-this.center.lng*Math.PI/180),t.N(r,r,a),this._globeViewProjMatrix32f=new Float32Array(r),this._globeViewProjMatrixNoCorrectionInverted=t.b9(),t.ap(this._globeViewProjMatrixNoCorrectionInverted,n);const s=t.bo();this._cameraPosition=t.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/e,t.bv(this._cameraPosition,this._cameraPosition,s,-this.rollInRadians),t.bw(this._cameraPosition,this._cameraPosition,s,this.pitchInRadians),t.bv(this._cameraPosition,this._cameraPosition,s,-this.bearingInRadians),t.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),t.bw(this._cameraPosition,this._cameraPosition,s,-this.center.lat*Math.PI/180),t.bx(this._cameraPosition,this._cameraPosition,s,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const o=t.b4(this._globeViewProjMatrixNoCorrectionInverted);t.N(o,o,[1,1,-1]),this._cachedFrustum=It.fromInvProjectionMatrix(o,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(e){t.w("calculateFogMatrix is not supported on globe projection.");const r=t.b9();return t.af(r),r}getVisibleUnwrappedCoordinates(e){return[new t.b1(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&t.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,r){if(!this._globeViewProjMatrixNoCorrection)return 1;const n=rr(e);t.aQ(n,n,1+r/t.bt);const i=t.bu();return t.av(i,[n[0],n[1],n[2],1],this._globeViewProjMatrixNoCorrection),i[2]/i[3]}populateCache(e){}getBounds(){const e=.5*this.width,r=.5*this.height,n=[new t.P(0,0),new t.P(e,0),new t.P(this.width,0),new t.P(this.width,r),new t.P(this.width,this.height),new t.P(e,this.height),new t.P(0,this.height),new t.P(0,r)],i=[];for(const t of n)i.push(this.unprojectScreenPoint(t));let a=0,s=0,o=0,l=0;const c=this.center;for(const d of i){const e=t.bz(c.lng,d.lng),r=t.bz(c.lat,d.lat);e<s&&(s=e),e>a&&(a=e),r<l&&(l=r),r>o&&(o=r)}const u=[c.lng+s,c.lat+l,c.lng+a,c.lat+o];return this.isSurfacePointOnScreen([0,1,0])&&(u[3]=90,u[0]=-180,u[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(u[1]=-90,u[0]=-180,u[2]=180),new V(u)}getConstrained(e,r){const n=t.ag(e.lat,-85.051129,t.ah),i=t.ag(+r,this.minZoom+sr(0,n),this.maxZoom);return{center:new t.S(e.lng,n),zoom:i}}calculateCenterFromCameraLngLatAlt(e,t,r,n){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,r,n)}setLocationAtPoint(e,r){const n=rr(this.unprojectScreenPoint(r)),i=rr(e),a=t.bo();t.bA(a);const s=t.bo();t.bx(s,n,a,-this.center.lng*Math.PI/180),t.bw(s,s,a,this.center.lat*Math.PI/180);const o=i[0]*i[0]+i[2]*i[2],l=s[0]*s[0];if(o<l)return;const c=Math.sqrt(o-l),u=-c,d=t.bB(i[0],i[2],s[0],c),h=t.bB(i[0],i[2],s[0],u),p=t.bo();t.bx(p,i,a,-d);const f=t.bB(p[1],p[2],s[1],s[2]),m=t.bo();t.bx(m,i,a,-h);const g=t.bB(m[1],m[2],s[1],s[2]),v=.5*Math.PI,x=f>=-v&&f<=v,y=g>=-v&&g<=v;let b,w;if(x&&y){const e=this.center.lng*Math.PI/180,r=this.center.lat*Math.PI/180;t.bC(d,e)+t.bC(f,r)<t.bC(h,e)+t.bC(g,r)?(b=d,w=f):(b=h,w=g)}else if(x)b=d,w=f;else{if(!y)return;b=h,w=g}const _=b/Math.PI*180,k=w/Math.PI*180,S=this.center.lat;this.setCenter(new t.S(_,t.ag(k,-90,90))),this.setZoom(this.zoom+sr(S,this.center.lat))}locationToScreenPoint(e,r){const n=rr(e);if(r){const i=r.getElevationForLngLatZoom(e,this._helper._tileZoom);t.aQ(n,n,1+i/t.bt)}return this._projectSurfacePointToScreen(n)}_projectSurfacePointToScreen(e){const r=t.bu();return t.av(r,[...e,1],this._globeViewProjMatrixNoCorrection),r[0]/=r[3],r[1]/=r[3],new t.P((.5*r[0]+.5)*this.width,(.5*-r[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,r){if(r){const t=r.pointCoordinate(e);if(t)return t}return t.a0.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,t){var r;return null===(r=this.screenPointToMercatorCoordinate(e,t))||void 0===r?void 0:r.toLngLat()}isPointOnMapSurface(e,t){const r=this._cameraPosition,n=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(r,n)}getRayDirectionFromPixel(e){const r=t.bu();r[0]=e.x/this.width*2-1,r[1]=-1*(e.y/this.height*2-1),r[2]=1,r[3]=1,t.av(r,r,this._globeViewProjMatrixNoCorrectionInverted),r[0]/=r[3],r[1]/=r[3],r[2]/=r[3];const n=t.bo();n[0]=r[0]-this._cameraPosition[0],n[1]=r[1]-this._cameraPosition[1],n[2]=r[2]-this._cameraPosition[2];const i=t.bo();return t.aU(i,n),i}isSurfacePointVisible(e){const t=this._cachedClippingPlane;return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const r=t.bu();return t.av(r,[...e,1],this._globeViewProjMatrixNoCorrection),r[0]/=r[3],r[1]/=r[3],r[2]/=r[3],r[0]>-1&&r[0]<1&&r[1]>-1&&r[1]<1&&r[2]>-1&&r[2]<1}rayPlanetIntersection(e,r){const n=t.aW(e,r),i=t.bo(),a=t.bo();t.aQ(a,r,n),t.aT(i,e,a);const s=1-t.aW(i,i);if(s<0)return null;const o=t.aW(e,e)-1,l=-n+(n<0?1:-1)*Math.sqrt(s),c=o/l,u=l;return{tMin:Math.min(c,u),tMax:Math.max(c,u)}}unprojectScreenPoint(e){const r=this._cameraPosition,n=this.getRayDirectionFromPixel(e),i=this.rayPlanetIntersection(r,n);if(i){const e=t.bo();t.aR(e,r,[n[0]*i.tMin,n[1]*i.tMin,n[2]*i.tMin]);const a=t.bo();return t.aU(a,e),ir(a)}const a=this._cachedClippingPlane,s=a[0]*n[0]+a[1]*n[1]+a[2]*n[2],o=-t.b0(a,r)/s,l=t.bo();if(o>0)t.aR(l,r,[n[0]*o,n[1]*o,n[2]*o]);else{const e=t.bo();t.aR(e,r,[2*n[0],2*n[1],2*n[2]]);const i=t.b0(this._cachedClippingPlane,e);t.aT(l,e,[this._cachedClippingPlane[0]*i,this._cachedClippingPlane[1]*i,this._cachedClippingPlane[2]*i])}const c=function(e){const r=t.bo();return r[0]=e[0]*-e[3],r[1]=e[1]*-e[3],r[2]=e[2]*-e[3],{center:r,radius:Math.sqrt(1-e[3]*e[3])}}(a);return ir(function(e,r,n){const i=t.bo();t.aT(i,n,e);const a=t.bo();return t.bp(a,e,i,r/t.a_(i)),a}(c.center,c.radius,l))}getMatrixForModel(e,r){const n=t.S.convert(e),i=1/t.bt,a=t.b8();return t.by(a,a,n.lng/180*Math.PI),t.b6(a,a,-n.lat/180*Math.PI),t.M(a,a,[0,0,1+r/t.bt]),t.b6(a,a,.5*Math.PI),t.N(a,a,[i,i,i]),a}getProjectionDataForCustomLayer(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const r=this.getProjectionData({overscaledTileID:new t.Z(0,0,0,0,0),applyGlobeMatrix:e});return r.tileMercatorCoords=[0,0,1,1],r}getFastPathSimpleProjectionMatrix(e){}}class vr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,t,r){return this._helper.interpolatePadding(e,t,r)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._helper.resize(e,t,r)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,t){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=t,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Pt({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,t)=>this.getConstrained(e,t)}),this._globeness=1,this._mercatorTransform=new Ot,this._verticalPerspectiveTransform=new gr}clone(){const e=new vr;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const t=this._mercatorTransform.getProjectionData(e),r=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?r.mainMatrix:t.mainMatrix,clippingPlane:r.clippingPlane,tileMercatorCoords:r.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:t.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return t.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return t.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,r,n){const i=this._mercatorTransform.getPitchedTextCorrection(e,r,n),a=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,r,n);return t.bj(i,a,this._globeness)}projectTileCoordinates(e,t,r,n){return this.currentTransform.projectTileCoordinates(e,t,r,n)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,t){return this.currentTransform.lngLatToCameraDepth(e,t)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}getConstrained(e,t){return this.currentTransform.getConstrained(e,t)}calculateCenterFromCameraLngLatAlt(e,t,r,n){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,r,n)}setLocationAtPoint(e,t){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,t),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,t),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,t){return this.currentTransform.locationToScreenPoint(e,t)}screenPointToMercatorCoordinate(e,t){return this.currentTransform.screenPointToMercatorCoordinate(e,t)}screenPointToLocation(e,t){return this.currentTransform.screenPointToLocation(e,t)}isPointOnMapSurface(e,t){return this.currentTransform.isPointOnMapSurface(e,t)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,t){return this.currentTransform.getMatrixForModel(e,t)}getProjectionDataForCustomLayer(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return t;const r=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return r.fallbackMatrix=t.mainMatrix,r}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class xr{get useGlobeControls(){return!0}handlePanInertia(e,r){const n=or(e,r);return Math.abs(n.lng-r.center.lng)>180&&(n.lng=r.center.lng+179.5*Math.sign(n.lng-r.center.lng)),{easingCenter:n,easingOffset:new t.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,r){const n=e.around,i=r.screenPointToLocation(n);e.bearingDelta&&r.setBearing(r.bearing+e.bearingDelta),e.pitchDelta&&r.setPitch(r.pitch+e.pitchDelta),e.rollDelta&&r.setRoll(r.roll+e.rollDelta);const a=r.zoom;e.zoomDelta&&r.setZoom(r.zoom+e.zoomDelta);const s=r.zoom-a;if(0===s)return;const o=t.bz(r.center.lng,i.lng),l=o/(Math.abs(o/180)+1),c=t.bz(r.center.lat,i.lat),u=r.getRayDirectionFromPixel(n),d=r.cameraPosition,h=-1*t.aW(d,u),p=t.bo();t.aR(p,d,[u[0]*h,u[1]*h,u[2]*h]);const f=t.aY(p)-1,m=Math.exp(.5*-Math.max(f-.3,0)),g=nr(r.worldSize,r.center.lat)/Math.min(r.width,r.height),v=t.bm(g,.9,.5,1,.25),x=(1-t.ae(-s))*Math.min(m,v),y=r.center.lat,b=r.zoom,w=new t.S(r.center.lng+l*x,t.ag(r.center.lat+c*x,-85.051129,t.ah));r.setLocationAtPoint(i,n);const _=r.center,k=t.bm(Math.abs(o),45,85,0,1),S=t.bm(g,.75,.35,0,1),j=Math.pow(Math.max(k,S),.25),E=t.bz(_.lng,w.lng),C=t.bz(_.lat,w.lat);r.setCenter(new t.S(_.lng+E*j,_.lat+C*j).wrap()),r.setZoom(b+sr(y,r.center.lat))}handleMapControlsPan(e,t,r){if(!e.panDelta)return;const n=t.center.lat,i=t.zoom;t.setCenter(or(e.panDelta,t).wrap()),t.setZoom(i+sr(n,t.center.lat))}cameraForBoxAndBearing(e,r,n,i,a){const s=Lt(e,r,n,i,a),o=r.left/a.width*2-1,l=(a.width-r.right)/a.width*2-1,c=r.top/a.height*-2+1,u=(a.height-r.bottom)/a.height*-2+1,d=t.bz(n.getWest(),n.getEast())<0,h=d?n.getEast():n.getWest(),p=d?n.getWest():n.getEast(),f=Math.max(n.getNorth(),n.getSouth()),m=Math.min(n.getNorth(),n.getSouth()),g=h+.5*t.bz(h,p),v=f+.5*t.bz(f,m),x=a.clone();x.setCenter(s.center),x.setBearing(s.bearing),x.setPitch(0),x.setRoll(0),x.setZoom(s.zoom);const y=x.modelViewProjectionMatrix,b=[rr(n.getNorthWest()),rr(n.getNorthEast()),rr(n.getSouthWest()),rr(n.getSouthEast()),rr(new t.S(p,v)),rr(new t.S(h,v)),rr(new t.S(g,f)),rr(new t.S(g,m))],w=rr(s.center);let _=Number.POSITIVE_INFINITY;for(const t of b)o<0&&(_=xr.getLesserNonNegativeNonNull(_,xr.solveVectorScale(t,w,y,"x",o))),l>0&&(_=xr.getLesserNonNegativeNonNull(_,xr.solveVectorScale(t,w,y,"x",l))),c>0&&(_=xr.getLesserNonNegativeNonNull(_,xr.solveVectorScale(t,w,y,"y",c))),u<0&&(_=xr.getLesserNonNegativeNonNull(_,xr.solveVectorScale(t,w,y,"y",u)));if(Number.isFinite(_)&&0!==_)return s.zoom=x.zoom+t.aj(_),s;Dt()}handleJumpToCenterZoom(e,r){const n=e.center.lat,i=e.getConstrained(r.center?t.S.convert(r.center):e.center,e.zoom).center;e.setCenter(i.wrap());const a=void 0!==r.zoom?+r.zoom:e.zoom+sr(n,i.lat);e.zoom!==a&&e.setZoom(a)}handleEaseTo(e,r){const n=e.zoom,i=e.center,a=e.padding,s={roll:e.roll,pitch:e.pitch,bearing:e.bearing},o={roll:void 0===r.roll?e.roll:r.roll,pitch:void 0===r.pitch?e.pitch:r.pitch,bearing:void 0===r.bearing?e.bearing:r.bearing},l=void 0!==r.zoom,c=!e.isPaddingEqual(r.padding);let u=!1;const d=r.center?t.S.convert(r.center):i,h=e.getConstrained(d,n).center;Nt(e,h);const p=e.clone();p.setCenter(h),p.setZoom(l?+r.zoom:n+sr(i.lat,d.lat)),p.setBearing(r.bearing);const f=new t.P(t.ag(e.centerPoint.x+r.offsetAsPoint.x,0,e.width),t.ag(e.centerPoint.y+r.offsetAsPoint.y,0,e.height));p.setLocationAtPoint(h,f);const m=(r.offset&&r.offsetAsPoint.mag())>0?p.center:h,g=l?+r.zoom:n+sr(i.lat,m.lat),v=n+sr(i.lat,0),x=g+sr(m.lat,0),y=t.bz(i.lng,m.lng),b=t.bz(i.lat,m.lat),w=t.ae(x-v);return u=g!==n,{easeFunc:n=>{if(t.bd(s,o)||Rt({startEulerAngles:s,endEulerAngles:o,tr:e,k:n,useSlerp:s.roll!=o.roll}),c&&e.interpolatePadding(a,r.padding,n),r.around)t.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(r.around,r.aroundPoint);else{const t=x>v?Math.min(2,w):Math.max(.5,w),r=Math.pow(t,1-n),a=cr(i,y,b,n*r);e.setCenter(a.wrap())}if(u){const r=t.C.number(v,x,n)+sr(0,e.center.lat);e.setZoom(r)}},isZooming:u,elevationCenter:m}}handleFlyTo(e,r){const n=void 0!==r.zoom,i=e.center,a=e.zoom,s=e.padding,o=!e.isPaddingEqual(r.padding),l=e.getConstrained(t.S.convert(r.center||r.locationAtOffset),a).center,c=n?+r.zoom:e.zoom+sr(e.center.lat,l.lat),u=e.clone();u.setCenter(l),u.setZoom(c),u.setBearing(r.bearing);const d=new t.P(t.ag(e.centerPoint.x+r.offsetAsPoint.x,0,e.width),t.ag(e.centerPoint.y+r.offsetAsPoint.y,0,e.height));u.setLocationAtPoint(l,d);const h=u.center;Nt(e,h);const p=function(e,r,n){const i=rr(r),a=rr(n),s=t.aW(i,a),o=Math.acos(s),l=er(e);return o/(2*Math.PI)*l}(e,i,h),f=a+sr(i.lat,0),m=c+sr(h.lat,0),g=t.ae(m-f);let v;if("number"==typeof r.minZoom){const n=+r.minZoom+sr(h.lat,0),i=Math.min(n,f,m)+sr(0,h.lat),a=e.getConstrained(h,i).zoom+sr(h.lat,0);v=t.ae(a-f)}const x=t.bz(i.lng,h.lng),y=t.bz(i.lat,h.lat);return{easeFunc:(n,a,l,u)=>{const d=cr(i,x,y,l);o&&e.interpolatePadding(s,r.padding,n);const p=1===n?h:d;e.setCenter(p.wrap());const m=f+t.aj(a);e.setZoom(1===n?c:m+sr(0,p.lat))},scaleOfZoom:g,targetCenter:h,scaleOfMinZoom:v,pixelPathLength:p}}static solveVectorScale(e,t,r,n,i){const a="x"===n?[r[0],r[4],r[8],r[12]]:[r[1],r[5],r[9],r[13]],s=[r[3],r[7],r[11],r[15]],o=e[0]*a[0]+e[1]*a[1]+e[2]*a[2],l=e[0]*s[0]+e[1]*s[1]+e[2]*s[2],c=t[0]*a[0]+t[1]*a[1]+t[2]*a[2],u=t[0]*s[0]+t[1]*s[1]+t[2]*s[2];return c+i*l===o+i*u||s[3]*(o-c)+a[3]*(u-l)+o*u==c*l?null:(c+a[3]-i*u-i*s[3])/(c-o-i*u+i*l)}static getLesserNonNegativeNonNull(e,t){return null!==t&&t>=0&&t<e?t:e}}class yr{constructor(e){this._globe=e,this._mercatorCameraHelper=new Ft,this._verticalPerspectiveCameraHelper=new xr}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,t){return this.currentHelper.handlePanInertia(e,t)}handleMapControlsRollPitchBearingZoom(e,t){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,t)}handleMapControlsPan(e,t,r){this.currentHelper.handleMapControlsPan(e,t,r)}cameraForBoxAndBearing(e,t,r,n,i){return this.currentHelper.cameraForBoxAndBearing(e,t,r,n,i)}handleJumpToCenterZoom(e,t){this.currentHelper.handleJumpToCenterZoom(e,t)}handleEaseTo(e,t){return this.currentHelper.handleEaseTo(e,t)}handleFlyTo(e,t){return this.currentHelper.handleFlyTo(e,t)}}const br=(e,r)=>t.y(e,r&&r.filter((e=>"source.canvas"!==e.identifier))),wr=t.bD();class _r extends t.E{constructor(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._rtlPluginLoaded=()=>{for(const e in this.sourceCaches){const t=this.sourceCaches[e].getSource().type;"vector"!==t&&"geojson"!==t||this.sourceCaches[e].reload()}},this.map=e,this.dispatcher=new R(D(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",((e,t)=>this.getGlyphs(e,t))),this.dispatcher.registerMessageHandler("GI",((e,t)=>this.getImages(e,t))),this.imageManager=new y,this.imageManager.setEventedParent(this),this.glyphManager=new k(e._requestManager,r.localIdeographFontFamily),this.lineAtlas=new T(256,512),this.crossTileSymbolIndex=new xt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",t.bF()),ne().on(ee,this._rtlPluginLoaded),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const r=t.getSource();if(r&&r.vectorLayerIds)for(const n in this._layers){const e=this._layers[n];e.source===r.id&&this._validateLayer(e)}}))}setGlobalStateProperty(e,r){var n,i,a;this._checkLoaded();const s=null===r?null!==(a=null===(i=null===(n=this.stylesheet.state)||void 0===n?void 0:n[e])||void 0===i?void 0:i.default)&&void 0!==a?a:null:r;if(t.bG(s,this._globalState[e]))return this;this._globalState[e]=s;const o=this._findGlobalStateAffectedSources([e]);for(const t in this.sourceCaches)o.has(t)&&(this._reloadSource(t),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(e){this._checkLoaded();const r=[];for(const i in e)!t.bG(this._globalState[i],e[i].default)&&(r.push(i),this._globalState[i]=e[i].default);const n=this._findGlobalStateAffectedSources(r);for(const t in this.sourceCaches)n.has(t)&&(this._reloadSource(t),this._changed=!0)}_findGlobalStateAffectedSources(e){if(0===e.length)return new Set;const t=new Set;for(const r in this._layers){const n=this._layers[r],i=n.getLayoutAffectingGlobalStateRefs();for(const r of e)i.has(r)&&t.add(n.source)}return t}loadURL(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.fire(new t.l("dataloading",{dataType:"style"})),r.validate="boolean"!=typeof r.validate||r.validate;const i=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const a=this._loadStyleRequest;t.j(i,this._loadStyleRequest).then((e=>{this._loadStyleRequest=null,this._load(e.data,r,n)})).catch((e=>{this._loadStyleRequest=null,e&&!a.signal.aborted&&this.fire(new t.k(e))}))}loadJSON(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.fire(new t.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,s.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,r.validate=!1!==r.validate,this._load(e,r,n)})).catch((()=>{}))}loadEmpty(){this.fire(new t.l("dataloading",{dataType:"style"})),this._load(wr,{validate:!1})}_load(e,r,n){var i,a,s;const o=r.transformStyle?r.transformStyle(n,e):e;if(!r.validate||!br(this,t.z(o))){this._loaded=!0,this.stylesheet=o;for(const e in o.sources)this.addSource(e,o.sources[e],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs),this._createLayers(),this.light=new E(this.stylesheet.light),this._setProjectionInternal((null===(i=this.stylesheet.projection)||void 0===i?void 0:i.type)||"mercator"),this.sky=new N(this.stylesheet.sky),this.map.setTerrain(null!==(a=this.stylesheet.terrain)&&void 0!==a?a:null),this.setGlobalState(null!==(s=this.stylesheet.state)&&void 0!==s?s:null),this.fire(new t.l("data",{dataType:"style"})),this.fire(new t.l("style.load"))}}_createLayers(){const e=t.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map((e=>e.id)),this._layers={},this._serializedLayers=null;for(const r of e){const e=t.bI(r);e.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=e}}_loadSprite(e){let r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(e,r,n,i){return t._(this,void 0,void 0,(function*(){const a=g(e),o=n>1?"@2x":"",l={},c={};for(const{id:e,url:n}of a){const a=r.transformRequest(v(n,o,".json"),"SpriteJSON");l[e]=t.j(a,i);const s=r.transformRequest(v(n,o,".png"),"SpriteImage");c[e]=f.getImage(s,i)}return yield Promise.all([...Object.values(l),...Object.values(c)]),function(e,r){return t._(this,void 0,void 0,(function*(){const t={};for(const n in e){t[n]={};const i=s.getImageCanvasContext((yield r[n]).data),a=(yield e[n]).data;for(const e in a){const{width:r,height:s,x:o,y:l,sdf:c,pixelRatio:u,stretchX:d,stretchY:h,content:p,textFitWidth:f,textFitHeight:m}=a[e];t[n][e]={data:null,pixelRatio:u,sdf:c,stretchX:d,stretchY:h,content:p,textFitWidth:f,textFitHeight:m,spriteData:{width:r,height:s,x:o,y:l,context:i}}}}return t}))}(l,c)}))}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((e=>{if(this._spriteRequest=null,e)for(const t in e){this._spritesImagesIds[t]=[];const r=this._spritesImagesIds[t]?this._spritesImagesIds[t].filter((t=>!(t in e))):[];for(const e of r)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const i in e[t]){const r="default"===t?i:`${t}:${i}`;this._spritesImagesIds[t].push(r),r in this.imageManager.images?this.imageManager.updateImage(r,e[t][i],!1):this.imageManager.addImage(r,e[t][i]),n&&(this._changedImages[r]=!0)}}})).catch((e=>{this._spriteRequest=null,r=e,this.fire(new t.k(r))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),n&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"})),i&&i(r)}))}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}))}_validateLayer(e){const r=this.sourceCaches[e.source];if(!r)return;const n=e.sourceLayer;if(!n)return;const i=r.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(n))&&this.fire(new t.k(new Error(`Source layer "${n}" does not exist on source "${i.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._serializedAllLayers();if(!e||0===e.length)return Object.values(r?t.bJ(n):n);const i=[];for(const a of e)if(n[a]){const e=r?t.bJ(n[a]):n[a];i.push(e)}return i}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const r of t){const t=this._layers[r];"custom"!==t.type&&(e[r]=t.serialize())}return e}hasTransitions(){var e,t,r;if(null===(e=this.light)||void 0===e?void 0:e.hasTransition())return!0;if(null===(t=this.sky)||void 0===t?void 0:t.hasTransition())return!0;if(null===(r=this.projection)||void 0===r?void 0:r.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const r=this._changed;if(r){const t=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(t.length||r.length)&&this._updateWorkerLayers(t,r);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const n in this._updatedPaintProps)this._layers[n].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const n={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];n[t]=e.used,e.used=!1}for(const t of this._order){const r=this._layers[t];r.recalculate(e,this._availableImages),!r.isHidden(e.zoom)&&r.source&&(this.sourceCaches[r.source].used=!0)}for(const i in n){const e=this.sourceCaches[i];!!n[i]!=!!e.used&&e.fire(new t.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:i}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,r&&this.fire(new t.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;this._checkLoaded();const i=this.serialize();if(e=r.transformStyle?r.transformStyle(i,e):e,(null===(n=r.validate)||void 0===n||n)&&br(this,t.z(e)))return!1;(e=t.bJ(e)).layers=t.bH(e.layers);const a=t.bK(i,e),s=this._getOperationsToPerform(a);if(s.unimplemented.length>0)throw new Error(`Unimplemented: ${s.unimplemented.join(", ")}.`);if(0===s.operations.length)return!1;for(const t of s.operations)t();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const t=[],r=[];for(const n of e)switch(n.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":t.push((()=>this.addLayer.apply(this,n.args)));break;case"removeLayer":t.push((()=>this.removeLayer.apply(this,n.args)));break;case"setPaintProperty":t.push((()=>this.setPaintProperty.apply(this,n.args)));break;case"setLayoutProperty":t.push((()=>this.setLayoutProperty.apply(this,n.args)));break;case"setFilter":t.push((()=>this.setFilter.apply(this,n.args)));break;case"addSource":t.push((()=>this.addSource.apply(this,n.args)));break;case"removeSource":t.push((()=>this.removeSource.apply(this,n.args)));break;case"setLayerZoomRange":t.push((()=>this.setLayerZoomRange.apply(this,n.args)));break;case"setLight":t.push((()=>this.setLight.apply(this,n.args)));break;case"setGeoJSONSourceData":t.push((()=>this.setGeoJSONSourceData.apply(this,n.args)));break;case"setGlyphs":t.push((()=>this.setGlyphs.apply(this,n.args)));break;case"setSprite":t.push((()=>this.setSprite.apply(this,n.args)));break;case"setTerrain":t.push((()=>this.map.setTerrain.apply(this,n.args)));break;case"setSky":t.push((()=>this.setSky.apply(this,n.args)));break;case"setProjection":this.setProjection.apply(this,n.args);break;case"setGlobalState":t.push((()=>this.setGlobalState.apply(this,n.args)));break;case"setTransition":t.push((()=>{}));break;default:r.push(n.command)}return{operations:t,unimplemented:r}}addImage(e,r){if(this.getImage(e))return this.fire(new t.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,r),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new t.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(t.z.source,`sources.${e}`,r,null,n))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const i=this.sourceCaches[e]=new be(e,r,this.dispatcher);i.style=this,i.setEventedParent(this,(()=>({isSourceLoaded:i.loaded(),source:i.serialize(),sourceId:e}))),i.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===e)return this.fire(new t.k(new Error(`Source "${e}" cannot be removed while layer "${n}" is using it.`)));const r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error(`There is no source with this ID=${e}`);const r=this.sourceCaches[e].getSource();if("geojson"!==r.type)throw new Error(`geojsonSource.type is ${r.type}, which is !== 'geojson`);r.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.k(new Error(`Layer "${i}" already exists on this map.`)));let a;if("custom"===e.type){if(br(this,t.bL(e)))return;a=t.bI(e)}else{if("source"in e&&"object"==typeof e.source&&(this.addSource(i,e.source),e=t.bJ(e),e=t.e(e,{source:i})),this._validate(t.z.layer,`layers.${i}`,e,{arrayIndex:-1},n))return;a=t.bI(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}})}const s=r?this._order.indexOf(r):this._order.length;if(r&&-1===s)this.fire(new t.k(new Error(`Cannot add layer "${i}" before non-existing layer "${r}".`)));else{if(this._order.splice(s,0,i),this._layerOrderChanged=!0,this._layers[i]=a,this._removedLayers[i]&&a.source&&"custom"!==a.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}moveLayer(e,r){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===r)return;const n=this._order.indexOf(e);this._order.splice(n,1);const i=r?this._order.indexOf(r):this._order.length;r&&-1===i?this.fire(new t.k(new Error(`Cannot move layer "${e}" before non-existing layer "${r}".`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const r=this._layers[e];if(!r)return void this.fire(new t.k(new Error(`Cannot remove non-existing layer "${e}".`)));r.setEventedParent(null);const n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,r,n){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===r&&i.maxzoom===n||(null!=r&&(i.minzoom=r),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new t.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const i=this.getLayer(e);if(i){if(!t.bG(i.filter,r))return null==r?(i.setFilter(void 0),void this._updateLayer(i)):void(this._validate(t.z.filter,`layers.${i.id}.filter`,r,null,n)||(i.setFilter(t.bJ(r)),this._updateLayer(i)))}else this.fire(new t.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.bJ(this.getLayer(e).filter)}setLayoutProperty(e,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(e);a?t.bG(a.getLayoutProperty(r),n)||(a.setLayoutProperty(r,n,i),this._updateLayer(a)):this.fire(new t.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,r){const n=this.getLayer(e);if(n)return n.getLayoutProperty(r);this.fire(new t.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const a=this.getLayer(e);a?t.bG(a.getPaintProperty(r),n)||(a.setPaintProperty(r,n,i)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new t.k(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,r){this._checkLoaded();const n=e.source,i=e.sourceLayer,a=this.sourceCaches[n];if(void 0===a)return void this.fire(new t.k(new Error(`The source '${n}' does not exist in the map's style.`)));const s=a.getSource().type;"geojson"===s&&i?this.fire(new t.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||i?(void 0===e.id&&this.fire(new t.k(new Error("The feature id parameter must be provided."))),a.setFeatureState(i,e.id,r)):this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,r){this._checkLoaded();const n=e.source,i=this.sourceCaches[n];if(void 0===i)return void this.fire(new t.k(new Error(`The source '${n}' does not exist in the map's style.`)));const a=i.getSource().type,s="vector"===a?e.sourceLayer:void 0;"vector"!==a||s?r&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.k(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(s,e.id,r):this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const r=e.source,n=e.sourceLayer,i=this.sourceCaches[r];if(void 0!==i)return"vector"!==i.getSource().type||n?(void 0===e.id&&this.fire(new t.k(new Error("The feature id parameter must be provided."))),i.getFeatureState(n,e.id)):void this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.k(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=t.bM(this.sourceCaches,(e=>e.serialize())),r=this._serializeByIds(this._order,!0),n=this.map.getTerrain()||void 0,i=this.stylesheet;return t.bN({version:i.version,name:i.name,metadata:i.metadata,light:i.light,sky:i.sky,center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch,sprite:i.sprite,glyphs:i.glyphs,transition:i.transition,projection:i.projection,sources:e,layers:r,terrain:n},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,r={},n=[];for(let a=this._order.length-1;a>=0;a--){const i=this._order[a];if(t(i)){r[i]=a;for(const t of e){const e=t[i];if(e)for(const t of e)n.push(t)}}}n.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let a=this._order.length-1;a>=0;a--){const s=this._order[a];if(t(s))for(let e=n.length-1;e>=0;e--){const t=n[e].feature;if(r[t.layer.id]<a)break;i.push(t),n.pop()}else for(const t of e){const e=t[s];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(e,r,n){r&&r.filter&&this._validate(t.z.filter,"queryRenderedFeatures.filter",r.filter,null,r);const i={};if(r&&r.layers){if(!(Array.isArray(r.layers)||r.layers instanceof Set))return this.fire(new t.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const e of r.layers){const r=this._layers[e];if(!r)return this.fire(new t.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[r.source]=!0}}const a=[];r.availableImages=this._availableImages;const s=this._serializedAllLayers(),o=r.layers instanceof Set?r.layers:Array.isArray(r.layers)?new Set(r.layers):null,l=Object.assign(Object.assign({},r),{layers:o});for(const t in this.sourceCaches)r.layers&&!i[t]||a.push($(this.sourceCaches[t],this._layers,s,e,l,n,this.map.terrain?(e,t,r)=>this.map.terrain.getElevation(e,t,r):void 0));return this.placement&&a.push(function(e,t,r,n,i,a,s){const o={},l=a.queryRenderedSymbols(n),c=[];for(const u of Object.keys(l).map(Number))c.push(s[u]);c.sort(B);for(const u of c){const r=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in r){const t=o[e]=o[e]||[],n=r[e];n.sort(((e,t)=>{const r=u.featureSortOrder;if(r){const n=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));for(const e of n)t.push(e)}}return function(e,t,r){for(const n in e)for(const i of e[n])z(i,r[t[n].source]);return e}(o,e,r)}(this._layers,s,this.sourceCaches,e,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(a)}querySourceFeatures(e,r){r&&r.filter&&this._validate(t.z.filter,"querySourceFeatures.filter",r.filter,null,r);const n=this.sourceCaches[e];return n?function(e,t){const r=e.getRenderableIds().map((t=>e.getTileByID(t))),n=[],i={};for(let a=0;a<r.length;a++){const e=r[a],s=e.tileID.canonical.key;i[s]||(i[s]=!0,e.querySourceFeatures(n,t))}return n}(n,r):[]}getLight(){return this.light.getLight()}setLight(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const n=this.light.getLight();let i=!1;for(const s in e)if(!t.bG(e[s],n[s])){i=!0;break}if(!i)return;const a={now:s.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(a)}getProjection(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.sky}setSky(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const n=this.getSky();let i=!1;if(!e&&!n)return;if(e&&!n)i=!0;else if(!e&&n)i=!0;else for(const s in e)if(!t.bG(e[s],n[s])){i=!0;break}if(!i)return;const a={now:s.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,r),this.sky.updateTransitions(a)}_setProjectionInternal(e){const r=function(e){if(Array.isArray(e)){const t=new Jt({type:e});return{projection:t,transform:new vr,cameraHelper:new yr(t)}}switch(e){case"mercator":return{projection:new Et,transform:new Ot,cameraHelper:new Ft};case"globe":{const e=new Jt({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:e,transform:new vr,cameraHelper:new yr(e)}}case"vertical-perspective":return{projection:new Xt,transform:new gr,cameraHelper:new xr};default:return t.w(`Unknown projection name: ${e}. Falling back to mercator projection.`),{projection:new Et,transform:new Ot,cameraHelper:new Ft}}}(e);this.projection=r.projection,this.map.migrateProjection(r.transform,r.cameraHelper);for(const t in this.sourceCaches)this.sourceCaches[t].reload()}_validate(e,r,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&br(this,e.call(t.z,t.e({key:r,style:this.serialize(),value:n,styleSpec:t.v},i)))}_remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ne().off(ee,this._rtlPluginLoaded);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!1,o=!1;const l={};for(const s of this._order){const t=this._layers[s];if("symbol"!==t.type)continue;if(!l[t.source]){const e=this.sourceCaches[t.source];l[t.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(t,l[t.source],e.center.lng);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((i=i||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.now(),e.zoom))&&(this.pauseablePlacement=new pt(e,this.map.terrain,this._order,i,t,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.now()),o=!0),a&&this.pauseablePlacement.placement.setStale()),o||a)for(const s of this._order){const e=this._layers[s];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,r){return t._(this,void 0,void 0,(function*(){const e=yield this.imageManager.getImages(r.icons);this._updateTilesForChangedImages();const t=this.sourceCaches[r.source];return t&&t.setDependencies(r.tileID.key,r.type,r.icons),e}))}getGlyphs(e,r){return t._(this,void 0,void 0,(function*(){const e=yield this.glyphManager.getGlyphs(r.stacks),t=this.sourceCaches[r.source];return t&&t.setDependencies(r.tileID.key,r.type,[""]),e}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded(),e&&this._validate(t.z.glyphs,"glyphs",e,null,r)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;this._checkLoaded();const a=[{id:e,url:r}],s=[...g(this.stylesheet.sprite),...a];this._validate(t.z.sprite,"sprite",s,null,n)||(this.stylesheet.sprite=s,this._loadSprite(a,!0,i))}removeSprite(e){this._checkLoaded();const r=g(this.stylesheet.sprite);if(r.find((t=>t.id===e))){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;r.splice(r.findIndex((t=>t.id===e)),1),this.stylesheet.sprite=r.length>0?r:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}))}else this.fire(new t.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return g(this.stylesheet.sprite)}setSprite(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),e&&this._validate(t.z.sprite,"sprite",e,null,r)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,n):(this._unloadSprite(),n&&n(null)))}}var kr=t.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Sr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,r,n,i,a,s,o,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==n.length;for(let u=0;!c&&u<n.length;u++)this.boundPaintVertexBuffers[u]!==n[u]&&(c=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||c||this.boundIndexBuffer!==i||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==s||this.boundDynamicVertexBuffer2!==o||this.boundDynamicVertexBuffer3!==l?this.freshBind(t,r,n,i,a,s,o,l):(e.bindVertexArray.set(this.vao),s&&s.bind(),i&&i.dynamicDraw&&i.bind(),o&&o.bind(),l&&l.bind())}freshBind(e,t,r,n,i,a,s,o){const l=e.numAttributes,c=this.context,u=c.gl;this.vao&&this.destroy(),this.vao=c.createVertexArray(),c.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=s,this.boundDynamicVertexBuffer3=o,t.enableAttributes(u,e);for(const d of r)d.enableAttributes(u,e);a&&a.enableAttributes(u,e),s&&s.enableAttributes(u,e),o&&o.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);for(const d of r)d.bind(),d.setVertexAttribPointers(u,e,i);a&&(a.bind(),a.setVertexAttribPointers(u,e,i)),n&&n.bind(),s&&(s.bind(),s.setVertexAttribPointers(u,e,i)),o&&(o.bind(),o.setVertexAttribPointers(u,e,i)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const jr=(e,r,n,i,a)=>({u_texture:0,u_ele_delta:e,u_fog_matrix:r,u_fog_color:n?n.properties.get("fog-color"):t.be.white,u_fog_ground_blend:n?n.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:a?0:n?n.calculateFogBlendOpacity(i):0,u_horizon_color:n?n.properties.get("horizon-color"):t.be.white,u_horizon_fog_blend:n?n.properties.get("horizon-fog-blend"):1,u_is_globe_mode:a?1:0}),Er={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Cr(e){const t=[];for(let r=0;r<e.length;r++){if(null===e[r])continue;const n=e[r].split(" ");t.push(n.pop())}return t}class Nr{constructor(e,r,n,i,a,s,o,l){let c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];const u=e.gl;this.program=u.createProgram();const d=Cr(r.staticAttributes),h=n?n.getBinderAttributes():[],p=d.concat(h),f=bt.prelude.staticUniforms?Cr(bt.prelude.staticUniforms):[],m=o.staticUniforms?Cr(o.staticUniforms):[],g=r.staticUniforms?Cr(r.staticUniforms):[],v=n?n.getBinderUniforms():[],x=f.concat(m).concat(g).concat(v),y=[];for(const t of x)y.indexOf(t)<0&&y.push(t);const b=n?n.defines():[];Wt(u)&&b.unshift("#version 300 es"),a&&b.push("#define OVERDRAW_INSPECTOR;"),s&&b.push("#define TERRAIN3D;"),l&&b.push(l),c&&b.push(...c);let w=b.concat(bt.prelude.fragmentSource,o.fragmentSource,r.fragmentSource).join("\n"),_=b.concat(bt.prelude.vertexSource,o.vertexSource,r.vertexSource).join("\n");Wt(u)||(w=function(e){return e.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(w),_=function(e){return e.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(_));const k=u.createShader(u.FRAGMENT_SHADER);if(u.isContextLost())return void(this.failedToCreate=!0);if(u.shaderSource(k,w),u.compileShader(k),!u.getShaderParameter(k,u.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${u.getShaderInfoLog(k)}`);u.attachShader(this.program,k);const S=u.createShader(u.VERTEX_SHADER);if(u.isContextLost())return void(this.failedToCreate=!0);if(u.shaderSource(S,_),u.compileShader(S),!u.getShaderParameter(S,u.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${u.getShaderInfoLog(S)}`);u.attachShader(this.program,S),this.attributes={};const j={};this.numAttributes=p.length;for(let t=0;t<this.numAttributes;t++)p[t]&&(u.bindAttribLocation(this.program,t,p[t]),this.attributes[p[t]]=t);if(u.linkProgram(this.program),!u.getProgramParameter(this.program,u.LINK_STATUS))throw new Error(`Program failed to link: ${u.getProgramInfoLog(this.program)}`);u.deleteShader(S),u.deleteShader(k);for(let t=0;t<y.length;t++){const e=y[t];if(e&&!j[e]){const t=u.getUniformLocation(this.program,e);t&&(j[e]=t)}}this.fixedUniforms=i(e,j),this.terrainUniforms=((e,r)=>({u_depth:new t.bO(e,r.u_depth),u_terrain:new t.bO(e,r.u_terrain),u_terrain_dim:new t.bf(e,r.u_terrain_dim),u_terrain_matrix:new t.bQ(e,r.u_terrain_matrix),u_terrain_unpack:new t.bR(e,r.u_terrain_unpack),u_terrain_exaggeration:new t.bf(e,r.u_terrain_exaggeration)}))(e,j),this.projectionUniforms=((e,r)=>({u_projection_matrix:new t.bQ(e,r.u_projection_matrix),u_projection_tile_mercator_coords:new t.bR(e,r.u_projection_tile_mercator_coords),u_projection_clipping_plane:new t.bR(e,r.u_projection_clipping_plane),u_projection_transition:new t.bf(e,r.u_projection_transition),u_projection_fallback_matrix:new t.bQ(e,r.u_projection_fallback_matrix)}))(e,j),this.binderUniforms=n?n.getUniforms(e,j):[]}draw(e,t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x){const y=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(n),e.setColorMode(i),e.setCullFace(a),o){e.activeTexture.set(y.TEXTURE2),y.bindTexture(y.TEXTURE_2D,o.depthTexture),e.activeTexture.set(y.TEXTURE3),y.bindTexture(y.TEXTURE_2D,o.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(o[e])}if(l)for(const w in l)this.projectionUniforms[Er[w]].set(l[w]);if(s)for(const w in this.fixedUniforms)this.fixedUniforms[w].set(s[w]);m&&m.setUniforms(e,this.binderUniforms,p,{zoom:f});let b=0;switch(t){case y.LINES:b=2;break;case y.TRIANGLES:b=3;break;case y.LINE_STRIP:b=1}for(const w of h.get()){const r=w.vaos||(w.vaos={});(r[c]||(r[c]=new Sr)).bind(e,this,u,m?m.getPaintVertexBuffers():[],d,w.vertexOffset,g,v,x),y.drawElements(t,w.primitiveLength*b,y.UNSIGNED_SHORT,w.primitiveOffset*b*2)}}}function Tr(e,r,n){const i=1/t.aB(n,1,r.transform.tileZoom),a=Math.pow(2,n.tileID.overscaledZ),s=n.tileSize*Math.pow(2,r.transform.tileZoom)/a,o=s*(n.tileID.canonical.x+n.tileID.wrap*a),l=s*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,l>>16],u_pixel_coord_lower:[65535&o,65535&l]}}const Pr=(e,r,n,i)=>{const a=e.style.light,s=a.properties.get("position"),o=[s.x,s.y,s.z],l=t.bU();"viewport"===a.properties.get("anchor")&&t.bV(l,e.transform.bearingInRadians),t.bW(o,o,l);const c=e.transform.transformLightDirection(o),u=a.properties.get("color");return{u_lightpos:o,u_lightpos_globe:c,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r,u_opacity:n,u_fill_translate:i}},Ar=(e,r,n,i,a,s,o)=>t.e(Pr(e,r,n,i),Tr(s,e,o),{u_height_factor:-Math.pow(2,a.overscaledZ)/o.tileSize/8}),Mr=(e,r,n,i)=>t.e(Tr(r,e,n),{u_fill_translate:i}),Ir=(e,t)=>({u_world:e,u_fill_translate:t}),Or=(e,r,n,i,a)=>t.e(Mr(e,r,n,a),{u_world:i}),Dr=(e,r,n,i,a)=>{const s=e.transform;let o,l,c=0;if("map"===n.paint.get("circle-pitch-alignment")){const e=t.aB(r,1,s.zoom);o=!0,l=[e,e],c=e/(t.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*a}else o=!1,l=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_pitch_with_map:+o,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:l,u_globe_extrude_scale:c,u_translate:i}},Rr=e=>({u_pixel_extrude_scale:[1/e.width,1/e.height]}),Lr=e=>({u_viewport_size:[e.width,e.height]}),Fr=function(e){return{u_color:e,u_overlay:0,u_overlay_scale:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1}},$r=(e,r,n,i)=>{const a=t.aB(e,1,r)/(t.$*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*i;return{u_extrude_scale:t.aB(e,1,r),u_intensity:n,u_globe_extrude_scale:a}},Br=(e,r,n,i)=>{const a=t.L();t.bX(a,0,e.width,e.height,0,0,1);const s=e.context.gl;return{u_matrix:a,u_world:[s.drawingBufferWidth,s.drawingBufferHeight],u_image:n,u_color_ramp:i,u_opacity:r.paint.get("heatmap-opacity")}},zr=(e,t,r)=>{const n=r.paint.get("hillshade-accent-color");let i;switch(r.paint.get("hillshade-method")){case"basic":i=4;break;case"combined":i=1;break;case"igor":i=2;break;case"multidirectional":i=3;break;default:i=0}const a=r.getIlluminationProperties();for(let s=0;s<a.directionRadians.length;s++)"viewport"===r.paint.get("hillshade-illumination-anchor")&&(a.directionRadians[s]+=e.transform.bearingInRadians);return{u_image:0,u_latrange:Vr(0,t.tileID),u_exaggeration:r.paint.get("hillshade-exaggeration"),u_altitudes:a.altitudeRadians,u_azimuths:a.directionRadians,u_accent:n,u_method:i,u_highlights:a.highlightColor,u_shadows:a.shadowColor}},Ur=(e,r)=>{const n=r.stride,i=t.L();return t.bX(i,0,t.$,-8192,0,0,1),t.M(i,i,[0,-8192,0]),{u_matrix:i,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:r.getUnpackVector()}};function Vr(e,r){const n=Math.pow(2,r.canonical.z),i=r.canonical.y;return[new t.a0(0,i/n).toLngLat().lat,new t.a0(0,(i+1)/n).toLngLat().lat]}const Hr=(e,t)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_opacity:e.paint.get("color-relief-opacity")}),Gr=(e,r,n,i)=>{const a=e.transform;return{u_translation:Yr(e,r,n),u_ratio:i/t.aB(r,1,a.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Wr=(e,r,n,i,a)=>t.e(Gr(e,r,n,i),{u_image:0,u_image_height:a}),qr=(e,r,n,i,a)=>{const s=e.transform,o=Zr(r,s);return{u_translation:Yr(e,r,n),u_texsize:r.imageAtlasTexture.size,u_ratio:i/t.aB(r,1,s.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[o,a.fromScale,a.toScale],u_fade:a.t,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]}},Kr=(e,r,n,i,a,s)=>{const o=e.lineAtlas,l=Zr(r,e.transform),c="round"===n.layout.get("line-cap"),u=o.getDash(a.from,c),d=o.getDash(a.to,c),h=u.width*s.fromScale,p=d.width*s.toScale;return t.e(Gr(e,r,n,i),{u_patternscale_a:[l/h,-u.height/2],u_patternscale_b:[l/p,-d.height/2],u_sdfgamma:o.width/(256*Math.min(h,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:d.y,u_mix:s.t})};function Zr(e,r){return 1/t.aB(e,1,r.tileZoom)}function Yr(e,r,n){return t.aC(e.transform,r,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Xr=(e,t,r,n,i)=>{return{u_tl_parent:e,u_scale_parent:t,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(s=n.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=n.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Qr(n.paint.get("raster-hue-rotate")),u_coords_top:[i[0].x,i[0].y,i[1].x,i[1].y],u_coords_bottom:[i[3].x,i[3].y,i[2].x,i[2].y]};var a,s};function Qr(e){e*=Math.PI/180;const t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const Jr=(e,t,r,n,i,a,s,o,l,c,u,d,h)=>{const p=s.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:p.cameraToCenterDistance,u_pitch:p.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:p.width/p.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_label_plane_matrix:o,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+n,u_is_along_line:i,u_is_variable_anchor:a,u_texsize:d,u_texture:0,u_translation:c,u_pitched_scale:h}},en=(e,r,n,i,a,s,o,l,c,u,d,h,p,f)=>{const m=o.transform;return t.e(Jr(e,r,n,i,a,s,o,l,c,u,d,h,f),{u_gamma_scale:i?Math.cos(m.pitch*Math.PI/180)*m.cameraToCenterDistance:1,u_device_pixel_ratio:o.pixelRatio,u_is_halo:1})},tn=(e,r,n,i,a,s,o,l,c,u,d,h,p)=>t.e(en(e,r,n,i,a,s,o,l,c,u,!0,d,0,p),{u_texsize_icon:h,u_texture_icon:1}),rn=(e,t)=>({u_opacity:e,u_color:t}),nn=(e,r,n,i,a)=>t.e(function(e,r,n,i){const a=n.imageManager.getPattern(e.from.toString()),s=n.imageManager.getPattern(e.to.toString()),{width:o,height:l}=n.imageManager.getPixelSize(),c=Math.pow(2,i.tileID.overscaledZ),u=i.tileSize*Math.pow(2,n.transform.tileZoom)/c,d=u*(i.tileID.canonical.x+i.tileID.wrap*c),h=u*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:a.tl,u_pattern_br_a:a.br,u_pattern_tl_b:s.tl,u_pattern_br_b:s.br,u_texsize:[o,l],u_mix:r.t,u_pattern_size_a:a.displaySize,u_pattern_size_b:s.displaySize,u_scale_a:r.fromScale,u_scale_b:r.toScale,u_tile_units_to_pixels:1/t.aB(i,1,n.transform.tileZoom),u_pixel_coord_upper:[d>>16,h>>16],u_pixel_coord_lower:[65535&d,65535&h]}}(n,a,r,i),{u_opacity:e}),an=(e,t)=>{},sn={fillExtrusion:(e,r)=>({u_lightpos:new t.bS(e,r.u_lightpos),u_lightpos_globe:new t.bS(e,r.u_lightpos_globe),u_lightintensity:new t.bf(e,r.u_lightintensity),u_lightcolor:new t.bS(e,r.u_lightcolor),u_vertical_gradient:new t.bf(e,r.u_vertical_gradient),u_opacity:new t.bf(e,r.u_opacity),u_fill_translate:new t.bT(e,r.u_fill_translate)}),fillExtrusionPattern:(e,r)=>({u_lightpos:new t.bS(e,r.u_lightpos),u_lightpos_globe:new t.bS(e,r.u_lightpos_globe),u_lightintensity:new t.bf(e,r.u_lightintensity),u_lightcolor:new t.bS(e,r.u_lightcolor),u_vertical_gradient:new t.bf(e,r.u_vertical_gradient),u_height_factor:new t.bf(e,r.u_height_factor),u_opacity:new t.bf(e,r.u_opacity),u_fill_translate:new t.bT(e,r.u_fill_translate),u_image:new t.bO(e,r.u_image),u_texsize:new t.bT(e,r.u_texsize),u_pixel_coord_upper:new t.bT(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.bT(e,r.u_pixel_coord_lower),u_scale:new t.bS(e,r.u_scale),u_fade:new t.bf(e,r.u_fade)}),fill:(e,r)=>({u_fill_translate:new t.bT(e,r.u_fill_translate)}),fillPattern:(e,r)=>({u_image:new t.bO(e,r.u_image),u_texsize:new t.bT(e,r.u_texsize),u_pixel_coord_upper:new t.bT(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.bT(e,r.u_pixel_coord_lower),u_scale:new t.bS(e,r.u_scale),u_fade:new t.bf(e,r.u_fade),u_fill_translate:new t.bT(e,r.u_fill_translate)}),fillOutline:(e,r)=>({u_world:new t.bT(e,r.u_world),u_fill_translate:new t.bT(e,r.u_fill_translate)}),fillOutlinePattern:(e,r)=>({u_world:new t.bT(e,r.u_world),u_image:new t.bO(e,r.u_image),u_texsize:new t.bT(e,r.u_texsize),u_pixel_coord_upper:new t.bT(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.bT(e,r.u_pixel_coord_lower),u_scale:new t.bS(e,r.u_scale),u_fade:new t.bf(e,r.u_fade),u_fill_translate:new t.bT(e,r.u_fill_translate)}),circle:(e,r)=>({u_camera_to_center_distance:new t.bf(e,r.u_camera_to_center_distance),u_scale_with_map:new t.bO(e,r.u_scale_with_map),u_pitch_with_map:new t.bO(e,r.u_pitch_with_map),u_extrude_scale:new t.bT(e,r.u_extrude_scale),u_device_pixel_ratio:new t.bf(e,r.u_device_pixel_ratio),u_globe_extrude_scale:new t.bf(e,r.u_globe_extrude_scale),u_translate:new t.bT(e,r.u_translate)}),collisionBox:(e,r)=>({u_pixel_extrude_scale:new t.bT(e,r.u_pixel_extrude_scale)}),collisionCircle:(e,r)=>({u_viewport_size:new t.bT(e,r.u_viewport_size)}),debug:(e,r)=>({u_color:new t.bP(e,r.u_color),u_overlay:new t.bO(e,r.u_overlay),u_overlay_scale:new t.bf(e,r.u_overlay_scale)}),depth:an,clippingMask:an,heatmap:(e,r)=>({u_extrude_scale:new t.bf(e,r.u_extrude_scale),u_intensity:new t.bf(e,r.u_intensity),u_globe_extrude_scale:new t.bf(e,r.u_globe_extrude_scale)}),heatmapTexture:(e,r)=>({u_matrix:new t.bQ(e,r.u_matrix),u_world:new t.bT(e,r.u_world),u_image:new t.bO(e,r.u_image),u_color_ramp:new t.bO(e,r.u_color_ramp),u_opacity:new t.bf(e,r.u_opacity)}),hillshade:(e,r)=>({u_image:new t.bO(e,r.u_image),u_latrange:new t.bT(e,r.u_latrange),u_exaggeration:new t.bf(e,r.u_exaggeration),u_altitudes:new t.bZ(e,r.u_altitudes),u_azimuths:new t.bZ(e,r.u_azimuths),u_accent:new t.bP(e,r.u_accent),u_method:new t.bO(e,r.u_method),u_shadows:new t.bY(e,r.u_shadows),u_highlights:new t.bY(e,r.u_highlights)}),hillshadePrepare:(e,r)=>({u_matrix:new t.bQ(e,r.u_matrix),u_image:new t.bO(e,r.u_image),u_dimension:new t.bT(e,r.u_dimension),u_zoom:new t.bf(e,r.u_zoom),u_unpack:new t.bR(e,r.u_unpack)}),colorRelief:(e,r)=>({u_image:new t.bO(e,r.u_image),u_unpack:new t.bR(e,r.u_unpack),u_dimension:new t.bT(e,r.u_dimension),u_elevation_stops:new t.bO(e,r.u_elevation_stops),u_color_stops:new t.bO(e,r.u_color_stops),u_opacity:new t.bf(e,r.u_opacity)}),line:(e,r)=>({u_translation:new t.bT(e,r.u_translation),u_ratio:new t.bf(e,r.u_ratio),u_device_pixel_ratio:new t.bf(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.bT(e,r.u_units_to_pixels)}),lineGradient:(e,r)=>({u_translation:new t.bT(e,r.u_translation),u_ratio:new t.bf(e,r.u_ratio),u_device_pixel_ratio:new t.bf(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.bT(e,r.u_units_to_pixels),u_image:new t.bO(e,r.u_image),u_image_height:new t.bf(e,r.u_image_height)}),linePattern:(e,r)=>({u_translation:new t.bT(e,r.u_translation),u_texsize:new t.bT(e,r.u_texsize),u_ratio:new t.bf(e,r.u_ratio),u_device_pixel_ratio:new t.bf(e,r.u_device_pixel_ratio),u_image:new t.bO(e,r.u_image),u_units_to_pixels:new t.bT(e,r.u_units_to_pixels),u_scale:new t.bS(e,r.u_scale),u_fade:new t.bf(e,r.u_fade)}),lineSDF:(e,r)=>({u_translation:new t.bT(e,r.u_translation),u_ratio:new t.bf(e,r.u_ratio),u_device_pixel_ratio:new t.bf(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.bT(e,r.u_units_to_pixels),u_patternscale_a:new t.bT(e,r.u_patternscale_a),u_patternscale_b:new t.bT(e,r.u_patternscale_b),u_sdfgamma:new t.bf(e,r.u_sdfgamma),u_image:new t.bO(e,r.u_image),u_tex_y_a:new t.bf(e,r.u_tex_y_a),u_tex_y_b:new t.bf(e,r.u_tex_y_b),u_mix:new t.bf(e,r.u_mix)}),raster:(e,r)=>({u_tl_parent:new t.bT(e,r.u_tl_parent),u_scale_parent:new t.bf(e,r.u_scale_parent),u_buffer_scale:new t.bf(e,r.u_buffer_scale),u_fade_t:new t.bf(e,r.u_fade_t),u_opacity:new t.bf(e,r.u_opacity),u_image0:new t.bO(e,r.u_image0),u_image1:new t.bO(e,r.u_image1),u_brightness_low:new t.bf(e,r.u_brightness_low),u_brightness_high:new t.bf(e,r.u_brightness_high),u_saturation_factor:new t.bf(e,r.u_saturation_factor),u_contrast_factor:new t.bf(e,r.u_contrast_factor),u_spin_weights:new t.bS(e,r.u_spin_weights),u_coords_top:new t.bR(e,r.u_coords_top),u_coords_bottom:new t.bR(e,r.u_coords_bottom)}),symbolIcon:(e,r)=>({u_is_size_zoom_constant:new t.bO(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.bO(e,r.u_is_size_feature_constant),u_size_t:new t.bf(e,r.u_size_t),u_size:new t.bf(e,r.u_size),u_camera_to_center_distance:new t.bf(e,r.u_camera_to_center_distance),u_pitch:new t.bf(e,r.u_pitch),u_rotate_symbol:new t.bO(e,r.u_rotate_symbol),u_aspect_ratio:new t.bf(e,r.u_aspect_ratio),u_fade_change:new t.bf(e,r.u_fade_change),u_label_plane_matrix:new t.bQ(e,r.u_label_plane_matrix),u_coord_matrix:new t.bQ(e,r.u_coord_matrix),u_is_text:new t.bO(e,r.u_is_text),u_pitch_with_map:new t.bO(e,r.u_pitch_with_map),u_is_along_line:new t.bO(e,r.u_is_along_line),u_is_variable_anchor:new t.bO(e,r.u_is_variable_anchor),u_texsize:new t.bT(e,r.u_texsize),u_texture:new t.bO(e,r.u_texture),u_translation:new t.bT(e,r.u_translation),u_pitched_scale:new t.bf(e,r.u_pitched_scale)}),symbolSDF:(e,r)=>({u_is_size_zoom_constant:new t.bO(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.bO(e,r.u_is_size_feature_constant),u_size_t:new t.bf(e,r.u_size_t),u_size:new t.bf(e,r.u_size),u_camera_to_center_distance:new t.bf(e,r.u_camera_to_center_distance),u_pitch:new t.bf(e,r.u_pitch),u_rotate_symbol:new t.bO(e,r.u_rotate_symbol),u_aspect_ratio:new t.bf(e,r.u_aspect_ratio),u_fade_change:new t.bf(e,r.u_fade_change),u_label_plane_matrix:new t.bQ(e,r.u_label_plane_matrix),u_coord_matrix:new t.bQ(e,r.u_coord_matrix),u_is_text:new t.bO(e,r.u_is_text),u_pitch_with_map:new t.bO(e,r.u_pitch_with_map),u_is_along_line:new t.bO(e,r.u_is_along_line),u_is_variable_anchor:new t.bO(e,r.u_is_variable_anchor),u_texsize:new t.bT(e,r.u_texsize),u_texture:new t.bO(e,r.u_texture),u_gamma_scale:new t.bf(e,r.u_gamma_scale),u_device_pixel_ratio:new t.bf(e,r.u_device_pixel_ratio),u_is_halo:new t.bO(e,r.u_is_halo),u_translation:new t.bT(e,r.u_translation),u_pitched_scale:new t.bf(e,r.u_pitched_scale)}),symbolTextAndIcon:(e,r)=>({u_is_size_zoom_constant:new t.bO(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.bO(e,r.u_is_size_feature_constant),u_size_t:new t.bf(e,r.u_size_t),u_size:new t.bf(e,r.u_size),u_camera_to_center_distance:new t.bf(e,r.u_camera_to_center_distance),u_pitch:new t.bf(e,r.u_pitch),u_rotate_symbol:new t.bO(e,r.u_rotate_symbol),u_aspect_ratio:new t.bf(e,r.u_aspect_ratio),u_fade_change:new t.bf(e,r.u_fade_change),u_label_plane_matrix:new t.bQ(e,r.u_label_plane_matrix),u_coord_matrix:new t.bQ(e,r.u_coord_matrix),u_is_text:new t.bO(e,r.u_is_text),u_pitch_with_map:new t.bO(e,r.u_pitch_with_map),u_is_along_line:new t.bO(e,r.u_is_along_line),u_is_variable_anchor:new t.bO(e,r.u_is_variable_anchor),u_texsize:new t.bT(e,r.u_texsize),u_texsize_icon:new t.bT(e,r.u_texsize_icon),u_texture:new t.bO(e,r.u_texture),u_texture_icon:new t.bO(e,r.u_texture_icon),u_gamma_scale:new t.bf(e,r.u_gamma_scale),u_device_pixel_ratio:new t.bf(e,r.u_device_pixel_ratio),u_is_halo:new t.bO(e,r.u_is_halo),u_translation:new t.bT(e,r.u_translation),u_pitched_scale:new t.bf(e,r.u_pitched_scale)}),background:(e,r)=>({u_opacity:new t.bf(e,r.u_opacity),u_color:new t.bP(e,r.u_color)}),backgroundPattern:(e,r)=>({u_opacity:new t.bf(e,r.u_opacity),u_image:new t.bO(e,r.u_image),u_pattern_tl_a:new t.bT(e,r.u_pattern_tl_a),u_pattern_br_a:new t.bT(e,r.u_pattern_br_a),u_pattern_tl_b:new t.bT(e,r.u_pattern_tl_b),u_pattern_br_b:new t.bT(e,r.u_pattern_br_b),u_texsize:new t.bT(e,r.u_texsize),u_mix:new t.bf(e,r.u_mix),u_pattern_size_a:new t.bT(e,r.u_pattern_size_a),u_pattern_size_b:new t.bT(e,r.u_pattern_size_b),u_scale_a:new t.bf(e,r.u_scale_a),u_scale_b:new t.bf(e,r.u_scale_b),u_pixel_coord_upper:new t.bT(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.bT(e,r.u_pixel_coord_lower),u_tile_units_to_pixels:new t.bf(e,r.u_tile_units_to_pixels)}),terrain:(e,r)=>({u_texture:new t.bO(e,r.u_texture),u_ele_delta:new t.bf(e,r.u_ele_delta),u_fog_matrix:new t.bQ(e,r.u_fog_matrix),u_fog_color:new t.bP(e,r.u_fog_color),u_fog_ground_blend:new t.bf(e,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new t.bf(e,r.u_fog_ground_blend_opacity),u_horizon_color:new t.bP(e,r.u_horizon_color),u_horizon_fog_blend:new t.bf(e,r.u_horizon_fog_blend),u_is_globe_mode:new t.bf(e,r.u_is_globe_mode)}),terrainDepth:(e,r)=>({u_ele_delta:new t.bf(e,r.u_ele_delta)}),terrainCoords:(e,r)=>({u_texture:new t.bO(e,r.u_texture),u_terrain_coords_id:new t.bf(e,r.u_terrain_coords_id),u_ele_delta:new t.bf(e,r.u_ele_delta)}),projectionErrorMeasurement:(e,r)=>({u_input:new t.bf(e,r.u_input),u_output_expected:new t.bf(e,r.u_output_expected)}),atmosphere:(e,r)=>({u_sun_pos:new t.bS(e,r.u_sun_pos),u_atmosphere_blend:new t.bf(e,r.u_atmosphere_blend),u_globe_position:new t.bS(e,r.u_globe_position),u_globe_radius:new t.bf(e,r.u_globe_radius),u_inv_proj_matrix:new t.bQ(e,r.u_inv_proj_matrix)}),sky:(e,r)=>({u_sky_color:new t.bP(e,r.u_sky_color),u_horizon_color:new t.bP(e,r.u_horizon_color),u_horizon:new t.bT(e,r.u_horizon),u_horizon_normal:new t.bT(e,r.u_horizon_normal),u_sky_horizon_blend:new t.bf(e,r.u_sky_horizon_blend),u_sky_blend:new t.bf(e,r.u_sky_blend)})};class on{constructor(e,t,r){this.context=e;const n=e.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ln={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class cn{constructor(e,t,r,n){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let r=0;r<this.attributes.length;r++){const n=t.attributes[this.attributes[r].name];void 0!==n&&e.enableVertexAttribArray(n)}}setVertexAttribPointers(e,t,r){for(let n=0;n<this.attributes.length;n++){const i=this.attributes[n],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[ln[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class un{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class dn extends un{getDefault(){return t.be.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class hn extends un{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class pn extends un{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class fn extends un{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class mn extends un{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class gn extends un{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class vn extends un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class xn extends un{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class yn extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class bn extends un{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class wn extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class _n extends un{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class kn extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class Sn extends un{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class jn extends un{getDefault(){return t.be.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class En extends un{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Cn extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class Nn extends un{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class Tn extends un{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class Pn extends un{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class An extends un{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Mn extends un{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class In extends un{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class On extends un{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Dn extends un{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Rn extends un{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Ln extends un{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Fn extends un{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const r=this.gl;Wt(r)?r.bindVertexArray(e):null===(t=r.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class $n extends un{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Bn extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class zn extends un{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Un extends un{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Vn extends Un{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Hn extends Un{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Gn extends Un{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const Wn="Framebuffer is not complete";class qn{constructor(e,t,r,n,i){this.context=e,this.width=t,this.height=r;const a=e.gl,s=this.framebuffer=a.createFramebuffer();if(this.colorAttachment=new Vn(e,s),n)this.depthAttachment=i?new Gn(e,s):new Hn(e,s);else if(i)throw new Error("Stencil cannot be set without depth");if(a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE)throw new Error(Wn)}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Kn{constructor(e){var t,r;if(this.gl=e,this.clearColor=new dn(this),this.clearDepth=new hn(this),this.clearStencil=new pn(this),this.colorMask=new fn(this),this.depthMask=new mn(this),this.stencilMask=new gn(this),this.stencilFunc=new vn(this),this.stencilOp=new xn(this),this.stencilTest=new yn(this),this.depthRange=new bn(this),this.depthTest=new wn(this),this.depthFunc=new _n(this),this.blend=new kn(this),this.blendFunc=new Sn(this),this.blendColor=new jn(this),this.blendEquation=new En(this),this.cullFace=new Cn(this),this.cullFaceSide=new Nn(this),this.frontFace=new Tn(this),this.program=new Pn(this),this.activeTexture=new An(this),this.viewport=new Mn(this),this.bindFramebuffer=new In(this),this.bindRenderbuffer=new On(this),this.bindTexture=new Dn(this),this.bindVertexBuffer=new Rn(this),this.bindElementBuffer=new Ln(this),this.bindVertexArray=new Fn(this),this.pixelStoreUnpack=new $n(this),this.pixelStoreUnpackPremultiplyAlpha=new Bn(this),this.pixelStoreUnpackFlipY=new zn(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Wt(e)){this.HALF_FLOAT=e.HALF_FLOAT;const n=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==n?void 0:n.RGBA16F_EXT,this.RGB16F=null!==(r=e.RGB16F)&&void 0!==r?r:null==n?void 0:n.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new on(this,e,t)}createVertexBuffer(e,t,r){return new cn(this,e,t,r)}createRenderbuffer(e,t,r){const n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,r,n){return new qn(this,e,t,r,n)}clear(e){let{color:t,depth:r,stencil:n}=e;const i=this.gl;let a=0;t&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),void 0!==n&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),i.clear(a)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){t.bG(e.blendFunction,$t.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Wt(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return Wt(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let Zn;function Yn(e,r,n,i,a){const s=e.context,o=e.transform,l=s.gl,c=e.useProgram("collisionBox"),u=[];let d=0,h=0;for(let t=0;t<i.length;t++){const p=i[t],f=r.getTile(p).getBucket(n);if(!f)continue;const m=a?f.textCollisionBox:f.iconCollisionBox,g=f.collisionCircleArray;g.length>0&&(u.push({circleArray:g,circleOffset:h,coord:p}),d+=g.length/4,h=d),m&&c.draw(s,l.LINES,Ut.disabled,Ht.disabled,e.colorModeForRenderPass(),zt.disabled,Rr(e.transform),e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),o.getProjectionData({overscaledTileID:p,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,e.transform.zoom,null,null,m.collisionVertexBuffer)}if(!a||!u.length)return;const p=e.useProgram("collisionCircle"),f=new t.b_;f.resize(4*d),f._trim();let m=0;for(const t of u)for(let e=0;e<t.circleArray.length/4;e++){const r=4*e,n=t.circleArray[r+0],i=t.circleArray[r+1],a=t.circleArray[r+2],s=t.circleArray[r+3];f.emplace(m++,n,i,a,s,0),f.emplace(m++,n,i,a,s,1),f.emplace(m++,n,i,a,s,2),f.emplace(m++,n,i,a,s,3)}(!Zn||Zn.length<2*d)&&(Zn=function(e){const r=2*e,n=new t.c0;n.resize(r),n._trim();for(let t=0;t<r;t++){const e=6*t;n.uint16[e+0]=4*t+0,n.uint16[e+1]=4*t+1,n.uint16[e+2]=4*t+2,n.uint16[e+3]=4*t+2,n.uint16[e+4]=4*t+3,n.uint16[e+5]=4*t+0}return n}(d));const g=s.createIndexBuffer(Zn,!0),v=s.createVertexBuffer(f,t.b$.members,!0);for(const x of u){const r=Lr(e.transform);p.draw(s,l.TRIANGLES,Ut.disabled,Ht.disabled,e.colorModeForRenderPass(),zt.disabled,r,e.style.map.terrain&&e.style.map.terrain.getTerrainData(x.coord),null,n.id,v,g,t.aL.simpleSegment(0,2*x.circleOffset,x.circleArray.length,x.circleArray.length/2),null,e.transform.zoom,null,null,null)}v.destroy(),g.destroy()}const Xn=t.af(new Float32Array(16));function Qn(e,r,n,i,a,s){const{horizontalAlign:o,verticalAlign:l}=t.aG(e);return new t.P((-(o-.5)*r/a+i[0])*s,(-(l-.5)*n/a+i[1])*s)}function Jn(e,r,n,i,a,s){const o=r.tileAnchorPoint.add(new t.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let e=i.mult(s);n||(e=e.rotate(-a));const t=o.add(e);return Te(t.x,t.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(n){const t=Fe(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(e),n=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0);return e.add(i.rotate(n))}return e.add(i)}function ei(e,r,n,i,a,s,o,l,c,u,d,h){const p=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,g={};f.clear();for(let v=0;v<p.length;v++){const m=p.get(v),x=m.hidden||!m.crossTileID||e.allowVerticalPlacement&&!m.placedOrientation?null:i[m.crossTileID];if(x){const i=new t.P(m.anchorX,m.anchorY),p={getElevation:h,width:a.width,height:a.height,pitchedLabelPlaneMatrix:s,pitchWithMap:n,transform:a,tileAnchorPoint:i,translation:u,unwrappedTileID:d},v=n?Be(i.x,i.y,p):Fe(i.x,i.y,p),y=Pe(a.cameraToCenterDistance,v.signedDistanceFromCamera);let b=t.ao(e.textSizeData,l,m)*y/t.aA;n&&(b*=e.tilePixelRatio/o);const{width:w,height:_,anchor:k,textOffset:S,textBoxScale:j}=x,E=Qn(k,w,_,S,j,b),C=a.getPitchedTextCorrection(i.x+u[0],i.y+u[1],d),N=Jn(v.point,p,r,E,-a.bearingInRadians,C),T=e.allowVerticalPlacement&&m.placedOrientation===t.an.vertical?Math.PI/2:0;for(let e=0;e<m.numGlyphs;e++)t.au(f,N,T);c&&m.associatedIconIndex>=0&&(g[m.associatedIconIndex]={shiftedAnchor:N,angle:T})}else Ge(m.numGlyphs,f)}if(c){m.clear();const r=e.icon.placedSymbolArray;for(let e=0;e<r.length;e++){const n=r.get(e);if(n.hidden)Ge(n.numGlyphs,m);else{const r=g[e];if(r)for(let e=0;e<n.numGlyphs;e++)t.au(m,r.shiftedAnchor,r.angle);else Ge(n.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function ti(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function ri(e,r,n,i,a,s,o,l,c,u,d,h,p){const f=e.context,m=f.gl,g=e.transform,v="map"===l,x="map"===c,y="viewport"!==l&&"point"!==n.layout.get("symbol-placement"),b=v&&!x&&!y,w=!n.layout.get("symbol-sort-key").isConstant();let _=!1;const k=e.getDepthModeForSublayer(0,Ut.ReadOnly),S=n._unevaluatedLayout.hasValue("text-variable-anchor")||n._unevaluatedLayout.hasValue("text-variable-anchor-offset"),j=[],E=g.getCircleRadiusCorrection();for(const C of i){const i=r.getTile(C),l=i.getBucket(n);if(!l)continue;const c=a?l.text:l.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)continue;const d=c.programConfigurations.get(n.id),h=a||l.sdfIcons,f=a?l.textSizeData:l.iconSizeData,k=x||0!==g.pitch,N=e.useProgram(ti(h,a,l),d),T=t.am(f,g.zoom),P=e.style.map.terrain&&e.style.map.terrain.getTerrainData(C);let A,M,I,O,D=[0,0],R=null;if(a)M=i.glyphAtlasTexture,I=m.LINEAR,A=i.glyphAtlasTexture.size,l.iconsInText&&(D=i.imageAtlasTexture.size,R=i.imageAtlasTexture,O=k||e.options.rotating||e.options.zooming||"composite"===f.kind||"camera"===f.kind?m.LINEAR:m.NEAREST);else{const t=1!==n.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;M=i.imageAtlasTexture,I=h||e.options.rotating||e.options.zooming||t||k?m.LINEAR:m.NEAREST,A=i.imageAtlasTexture.size}const L=t.aB(i,1,e.transform.zoom),F=Ee(v,e.transform,L),$=t.L();t.ap($,F);const B=Ce(x,v,e.transform,L),z=t.aC(g,i,s,o),U=g.getProjectionData({overscaledTileID:C,applyGlobeMatrix:!p,applyTerrainMatrix:!0}),V=S&&l.hasTextData(),H="none"!==n.layout.get("icon-text-fit")&&V&&l.hasIconData();if(y){const t=e.style.map.terrain?(t,r)=>e.style.map.terrain.getElevation(C,t,r):null,r="map"===n.layout.get("text-rotation-alignment");Me(l,e,a,F,$,x,u,r,C.toUnwrapped(),g.width,g.height,z,t)}const G=a&&S||H,W=y||G?Xn:x?F:e.transform.clipSpaceToPixelsMatrix,q=h&&0!==n.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);let K;K=h?l.iconsInText?tn(f.kind,T,b,x,y,G,e,W,B,z,A,D,E):en(f.kind,T,b,x,y,G,e,W,B,z,a,A,0,E):Jr(f.kind,T,b,x,y,G,e,W,B,z,a,A,E);const Z={program:N,buffers:c,uniformValues:K,projectionData:U,atlasTexture:M,atlasTextureIcon:R,atlasInterpolation:I,atlasInterpolationIcon:O,isSDF:h,hasHalo:q};if(w&&l.canOverlap){_=!0;const e=c.segments.get();for(const r of e)j.push({segments:new t.aL([r]),sortKey:r.sortKey,state:Z,terrainData:P})}else j.push({segments:c.segments,sortKey:0,state:Z,terrainData:P})}_&&j.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of j){const r=t.state;if(f.activeTexture.set(m.TEXTURE0),r.atlasTexture.bind(r.atlasInterpolation,m.CLAMP_TO_EDGE),r.atlasTextureIcon&&(f.activeTexture.set(m.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),r.isSDF){const i=r.uniformValues;r.hasHalo&&(i.u_is_halo=1,ni(r.buffers,t.segments,n,e,r.program,k,d,h,i,r.projectionData,t.terrainData)),i.u_is_halo=0}ni(r.buffers,t.segments,n,e,r.program,k,d,h,r.uniformValues,r.projectionData,t.terrainData)}}function ni(e,t,r,n,i,a,s,o,l,c,u){const d=n.context;i.draw(d,d.gl.TRIANGLES,a,s,o,zt.backCCW,l,u,c,r.id,e.layoutVertexBuffer,e.indexBuffer,t,r.paint,n.transform.zoom,e.programConfigurations.get(r.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function ii(e,r,n,i,a){const s=e.context,o=s.gl,l=Ht.disabled,c=new $t([o.ONE,o.ONE],t.be.transparent,[!0,!0,!0,!0]),u=r.getBucket(n);if(!u)return;const d=i.key;let h=n.heatmapFbos.get(d);h||(h=si(s,r.tileSize,r.tileSize),n.heatmapFbos.set(d,h)),s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,r.tileSize,r.tileSize]),s.clear({color:t.be.transparent});const p=u.programConfigurations.get(n.id),f=e.useProgram("heatmap",p,!a),m=e.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),g=e.style.map.terrain.getTerrainData(i);f.draw(s,o.TRIANGLES,Ut.disabled,l,c,zt.disabled,$r(r,e.transform.zoom,n.paint.get("heatmap-intensity"),1),g,m,n.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,n.paint,e.transform.zoom,p)}function ai(e,t,r,n,i){const a=e.context,s=a.gl,o=e.transform;a.setColorMode(e.colorModeForRenderPass());const l=oi(a,t),c=r.key,u=t.heatmapFbos.get(c);if(!u)return;a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get()),a.activeTexture.set(s.TEXTURE1),l.bind(s.LINEAR,s.CLAMP_TO_EDGE);const d=o.getProjectionData({overscaledTileID:r,applyTerrainMatrix:i,applyGlobeMatrix:!n});e.useProgram("heatmapTexture").draw(a,s.TRIANGLES,Ut.disabled,Ht.disabled,e.colorModeForRenderPass(),zt.disabled,Br(e,t,0,1),null,d,t.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments,t.paint,o.zoom),u.destroy(),t.heatmapFbos.delete(c)}function si(e,t,r){var n,i;const a=e.gl,s=a.createTexture();a.bindTexture(a.TEXTURE_2D,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);const o=null!==(n=e.HALF_FLOAT)&&void 0!==n?n:a.UNSIGNED_BYTE,l=null!==(i=e.RGBA16F)&&void 0!==i?i:a.RGBA;a.texImage2D(a.TEXTURE_2D,0,l,t,r,0,a.RGBA,o,null);const c=e.createFramebuffer(t,r,!1,!1);return c.colorAttachment.set(s),c}function oi(e,r){return r.colorRampTexture||(r.colorRampTexture=new t.T(e,r.colorRamp,e.gl.RGBA)),r.colorRampTexture}function li(e,t,r,n,i){if(!r||!n||!n.imageAtlas)return;const a=n.imageAtlas.patternPositions;let s=a[r.to.toString()],o=a[r.from.toString()];if(!s&&o&&(s=o),!o&&s&&(o=s),!s||!o){const e=i.getPaintProperty(t);s=a[e],o=a[e]}s&&o&&e.setConstantPatternPositions(s,o)}function ci(e,r,n,i,a,s,o,l){const c=e.context.gl,u="fill-pattern",d=n.paint.get(u),h=d&&d.constantOr(1),p=n.getCrossfadeParameters();let f,m,g,v,x;const y=e.transform,b=n.paint.get("fill-translate"),w=n.paint.get("fill-translate-anchor");o?(m=h&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",f=c.LINES):(m=h?"fillPattern":"fill",f=c.TRIANGLES);const _=d.constantOr(null);for(const k of i){const i=r.getTile(k);if(h&&!i.patternsLoaded())continue;const d=i.getBucket(n);if(!d)continue;const S=d.programConfigurations.get(n.id),j=e.useProgram(m,S),E=e.style.map.terrain&&e.style.map.terrain.getTerrainData(k);h&&(e.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),S.updatePaintBuffers(p)),li(S,u,_,i,n);const C=y.getProjectionData({overscaledTileID:k,applyGlobeMatrix:!l,applyTerrainMatrix:!0}),N=t.aC(y,i,b,w);if(o){v=d.indexBuffer2,x=d.segments2;const t=[c.drawingBufferWidth,c.drawingBufferHeight];g="fillOutlinePattern"===m&&h?Or(e,p,i,t,N):Ir(t,N)}else v=d.indexBuffer,x=d.segments,g=h?Mr(e,p,i,N):{u_fill_translate:N};const T=e.stencilModeForClipping(k);j.draw(e.context,f,a,T,s,zt.backCCW,g,E,C,n.id,d.layoutVertexBuffer,v,x,n.paint,e.transform.zoom,S)}}function ui(e,r,n,i,a,s,o,l){const c=e.context,u=c.gl,d="fill-extrusion-pattern",h=n.paint.get(d),p=h.constantOr(1),f=n.getCrossfadeParameters(),m=n.paint.get("fill-extrusion-opacity"),g=h.constantOr(null),v=e.transform;for(const x of i){const i=r.getTile(x),h=i.getBucket(n);if(!h)continue;const y=e.style.map.terrain&&e.style.map.terrain.getTerrainData(x),b=h.programConfigurations.get(n.id),w=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",b);p&&(e.context.activeTexture.set(u.TEXTURE0),i.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),b.updatePaintBuffers(f));const _=v.getProjectionData({overscaledTileID:x,applyGlobeMatrix:!l,applyTerrainMatrix:!0});li(b,d,g,i,n);const k=t.aC(v,i,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),S=n.paint.get("fill-extrusion-vertical-gradient"),j=p?Ar(e,S,m,k,x,f,i):Pr(e,S,m,k);w.draw(c,c.gl.TRIANGLES,a,s,o,zt.backCCW,j,y,_,n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,n.paint,e.transform.zoom,b,e.style.map.terrain&&h.centroidVertexBuffer)}}function di(e,t,r,n,i,a,s,o,l){var c;const u=e.style.projection,d=e.context,h=e.transform,p=d.gl,f=[`#define NUM_ILLUMINATION_SOURCES ${r.paint.get("hillshade-highlight-color").values.length}`],m=e.useProgram("hillshade",null,!1,f),g=!e.options.moving;for(const v of n){const n=t.getTile(v),f=n.fbo;if(!f)continue;const x=u.getMeshFromTileID(d,v.canonical,o,!0,"raster"),y=null===(c=e.style.map.terrain)||void 0===c?void 0:c.getTerrainData(v);d.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,f.colorAttachment.get());const b=h.getProjectionData({overscaledTileID:v,aligned:g,applyGlobeMatrix:!l,applyTerrainMatrix:!0});m.draw(d,p.TRIANGLES,a,i[v.overscaledZ],s,zt.backCCW,zr(e,n,r),y,b,r.id,x.vertexBuffer,x.indexBuffer,x.segments)}}function hi(e,r,n,i,a,s,o,l,c){var u;const d=e.style.projection,h=e.context,p=e.transform,f=h.gl,m=e.useProgram("colorRelief"),g=!e.options.moving;let v=!0;for(const x of i){const i=r.getTile(x),y=i.dem;if(v){const e=f.getParameter(f.MAX_TEXTURE_SIZE),{elevationTexture:t,colorTexture:r}=n.getColorRampTextures(h,e,y.getUnpackVector());h.activeTexture.set(f.TEXTURE1),t.bind(f.NEAREST,f.CLAMP_TO_EDGE),h.activeTexture.set(f.TEXTURE4),r.bind(f.LINEAR,f.CLAMP_TO_EDGE),v=!1}if(!y||!y.data)continue;const b=y.stride,w=y.getPixels();if(h.activeTexture.set(f.TEXTURE0),h.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(b),i.demTexture){const e=i.demTexture;e.update(w,{premultiply:!1}),e.bind(f.LINEAR,f.CLAMP_TO_EDGE)}else i.demTexture=new t.T(h,w,f.RGBA,{premultiply:!1}),i.demTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE);const _=d.getMeshFromTileID(h,x.canonical,l,!0,"raster"),k=null===(u=e.style.map.terrain)||void 0===u?void 0:u.getTerrainData(x),S=p.getProjectionData({overscaledTileID:x,aligned:g,applyGlobeMatrix:!c,applyTerrainMatrix:!0});m.draw(h,f.TRIANGLES,s,a[x.overscaledZ],o,zt.backCCW,Hr(n,i.dem),k,S,n.id,_.vertexBuffer,_.indexBuffer,_.segments)}}const pi=[new t.P(0,0),new t.P(t.$,0),new t.P(t.$,t.$),new t.P(0,t.$)];function fi(e,t,r,n,i,a,s,o){let l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9];const u=n[n.length-1].overscaledZ,d=e.context,h=d.gl,p=e.useProgram("raster"),f=e.transform,m=e.style.projection,g=e.colorModeForRenderPass(),v=!e.options.moving;for(const x of n){const n=e.getDepthModeForSublayer(x.overscaledZ-u,1===r.paint.get("raster-opacity")?Ut.ReadWrite:Ut.ReadOnly,h.LESS),y=t.getTile(x);y.registerFadeDuration(r.paint.get("raster-fade-duration"));const b=t.findLoadedParent(x,0),w=t.findLoadedSibling(x),_=mi(y,b||w||null,t,r,e.transform,e.style.map.terrain);let k,S;const j="nearest"===r.paint.get("raster-resampling")?h.NEAREST:h.LINEAR;d.activeTexture.set(h.TEXTURE0),y.texture.bind(j,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST),d.activeTexture.set(h.TEXTURE1),b?(b.texture.bind(j,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST),k=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),S=[y.tileID.canonical.x*k%1,y.tileID.canonical.y*k%1]):y.texture.bind(j,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST),y.texture.useMipmap&&d.extTextureFilterAnisotropic&&e.transform.pitch>20&&h.texParameterf(h.TEXTURE_2D,d.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,d.extTextureFilterAnisotropicMax);const E=e.style.map.terrain&&e.style.map.terrain.getTerrainData(x),C=f.getProjectionData({overscaledTileID:x,aligned:v,applyGlobeMatrix:!c,applyTerrainMatrix:!0}),N=Xr(S||[0,0],k||1,_,r,o),T=m.getMeshFromTileID(d,x.canonical,a,s,"raster");p.draw(d,h.TRIANGLES,n,i?i[x.overscaledZ]:Ht.disabled,g,l?zt.frontCCW:zt.backCCW,N,E,C,r.id,T.vertexBuffer,T.indexBuffer,T.segments)}}function mi(e,r,n,i,a,o){const l=i.paint.get("raster-fade-duration");if(!o&&l>0){const i=s.now(),o=(i-e.timeAdded)/l,c=r?(i-r.timeAdded)/l:-1,u=n.getSource(),d=ve(a,{tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!r||Math.abs(r.tileID.overscaledZ-d)>Math.abs(e.tileID.overscaledZ-d),p=h&&e.refreshedUponExpiration?1:t.ag(h?o:1-c,0,1);return e.refreshedUponExpiration&&o>=1&&(e.refreshedUponExpiration=!1),r?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const gi=new t.be(1,0,0,1),vi=new t.be(0,1,0,1),xi=new t.be(0,0,1,1),yi=new t.be(1,0,1,1),bi=new t.be(0,1,1,1);function wi(e,t,r,n){ki(e,0,t+r/2,e.transform.width,r,n)}function _i(e,t,r,n){ki(e,t-r/2,0,r,e.transform.height,n)}function ki(e,t,r,n,i,a){const s=e.context,o=s.gl;o.enable(o.SCISSOR_TEST),o.scissor(t*e.pixelRatio,r*e.pixelRatio,n*e.pixelRatio,i*e.pixelRatio),s.clear({color:a}),o.disable(o.SCISSOR_TEST)}function Si(e,r,n){const i=e.context,a=i.gl,s=e.useProgram("debug"),o=Ut.disabled,l=Ht.disabled,c=e.colorModeForRenderPass(),u="$debug",d=e.style.map.terrain&&e.style.map.terrain.getTerrainData(n);i.activeTexture.set(a.TEXTURE0);const h=r.getTileByID(n.key).latestRawTileData,p=Math.floor((h&&h.byteLength||0)/1024),f=r.getTile(n).tileSize,m=512/Math.min(f,512)*(n.overscaledZ/e.transform.zoom)*.5;let g=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(g+=` => ${n.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const r=e.debugOverlayCanvas,n=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,r.width,r.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(e,`${g} ${p}kB`);const v=e.transform.getProjectionData({overscaledTileID:n,applyGlobeMatrix:!0,applyTerrainMatrix:!0});s.draw(i,a.TRIANGLES,o,l,$t.alphaBlended,zt.disabled,Fr(t.be.transparent,m),null,v,u,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(i,a.LINE_STRIP,o,l,c,zt.disabled,Fr(t.be.red),d,v,u,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function ji(e,t,r,n){const{isRenderingGlobe:i}=n,a=e.context,s=a.gl,o=e.transform,l=e.colorModeForRenderPass(),c=e.getDepthModeFor3D(),u=e.useProgram("terrain");a.bindFramebuffer.set(null),a.viewport.set([0,0,e.width,e.height]);for(const d of r){const r=t.getTerrainMesh(d.tileID),n=e.renderToTexture.getTexture(d),h=t.getTerrainData(d.tileID);a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,n.texture);const p=t.getMeshFrameDelta(o.zoom),f=o.calculateFogMatrix(d.tileID.toUnwrapped()),m=jr(p,f,e.style.sky,o.pitch,i),g=o.getProjectionData({overscaledTileID:d.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});u.draw(a,s.TRIANGLES,c,Ht.disabled,l,zt.backCCW,m,h,g,"terrain",r.vertexBuffer,r.indexBuffer,r.segments)}}function Ei(e,r){if(!r.mesh){const n=new t.aK;n.emplaceBack(-1,-1),n.emplaceBack(1,-1),n.emplaceBack(1,1),n.emplaceBack(-1,1);const i=new t.aM;i.emplaceBack(0,1,2),i.emplaceBack(0,2,3),r.mesh=new _t(e.createVertexBuffer(n,kt.members),e.createIndexBuffer(i),t.aL.simpleSegment(0,0,n.length,i.length))}return r.mesh}class Ci{constructor(e,r){this.context=new Kn(e),this.transform=r,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=be.maxUnderzooming+be.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new xt}resize(e,t,r){if(this.width=Math.floor(e*r),this.height=Math.floor(t*r),this.pixelRatio=r,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const n of this.style._order)this.style._layers[n].resize()}setup(){const e=this.context,r=new t.aK;r.emplaceBack(0,0),r.emplaceBack(t.$,0),r.emplaceBack(0,t.$),r.emplaceBack(t.$,t.$),this.tileExtentBuffer=e.createVertexBuffer(r,kt.members),this.tileExtentSegments=t.aL.simpleSegment(0,0,4,2);const n=new t.aK;n.emplaceBack(0,0),n.emplaceBack(t.$,0),n.emplaceBack(0,t.$),n.emplaceBack(t.$,t.$),this.debugBuffer=e.createVertexBuffer(n,kt.members),this.debugSegments=t.aL.simpleSegment(0,0,4,5);const i=new t.c5;i.emplaceBack(0,0,0,0),i.emplaceBack(t.$,0,t.$,0),i.emplaceBack(0,t.$,0,t.$),i.emplaceBack(t.$,t.$,t.$,t.$),this.rasterBoundsBuffer=e.createVertexBuffer(i,kr.members),this.rasterBoundsSegments=t.aL.simpleSegment(0,0,4,2);const a=new t.aK;a.emplaceBack(0,0),a.emplaceBack(t.$,0),a.emplaceBack(0,t.$),a.emplaceBack(t.$,t.$),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(a,kt.members),this.rasterBoundsSegmentsPosOnly=t.aL.simpleSegment(0,0,4,5);const s=new t.aK;s.emplaceBack(0,0),s.emplaceBack(1,0),s.emplaceBack(0,1),s.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(s,kt.members),this.viewportSegments=t.aL.simpleSegment(0,0,4,2);const o=new t.c6;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);const l=new t.aM;l.emplaceBack(1,0,2),l.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(l);const c=this.context.gl;this.stencilClearMode=new Ht({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO),this.tileExtentMesh=new _t(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const n=t.L();t.bX(n,0,this.width,this.height,0,0,1),t.N(n,n,[r.drawingBufferWidth,r.drawingBufferHeight,0]);const i={mainMatrix:n,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:n};this.useProgram("clippingMask",null,!0).draw(e,r.TRIANGLES,Ut.disabled,this.stencilClearMode,$t.disabled,zt.disabled,null,null,i,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t,r){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source,this.nextStencilID+t.length>256&&this.clearStencil();const n=this.context;n.setColorMode($t.disabled),n.setDepthMode(Ut.disabled);const i={};for(const a of t)i[a.key]=this.nextStencilID++;this._renderTileMasks(i,t,r,!0),this._renderTileMasks(i,t,r,!1),this._tileClippingMaskIDs=i}_renderTileMasks(e,t,r,n){const i=this.context,a=i.gl,s=this.style.projection,o=this.transform,l=this.useProgram("clippingMask");for(const c of t){const t=e[c.key],u=this.style.map.terrain&&this.style.map.terrain.getTerrainData(c),d=s.getMeshFromTileID(this.context,c.canonical,n,!0,"stencil"),h=o.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!r,applyTerrainMatrix:!0});l.draw(i,a.TRIANGLES,Ut.disabled,new Ht({func:a.ALWAYS,mask:0},t,255,a.KEEP,a.KEEP,a.REPLACE),$t.disabled,r?zt.disabled:zt.backCCW,null,u,h,"$clipping",d.vertexBuffer,d.indexBuffer,d.segments)}}_renderTilesDepthBuffer(){const e=this.context,t=e.gl,r=this.style.projection,n=this.transform,i=this.useProgram("depth"),a=this.getDepthModeFor3D(),s=xe(n,{tileSize:n.tileSize});for(const o of s){const s=this.style.map.terrain&&this.style.map.terrain.getTerrainData(o),l=r.getMeshFromTileID(this.context,o.canonical,!0,!0,"raster"),c=n.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});i.draw(e,t.TRIANGLES,a,Ht.disabled,$t.disabled,zt.backCCW,null,s,c,"$clipping",l.vertexBuffer,l.indexBuffer,l.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new Ht({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new Ht({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const t=this.context.gl,r=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),n=r[r.length-1].overscaledZ,i=r[0].overscaledZ-n+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const e={};for(let r=0;r<i;r++)e[r+n]=new Ht({func:t.GEQUAL,mask:255},r+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=i,[e,r]}return[{[n]:Ht.disabled},r]}stencilConfigForOverlapTwoPass(e){const t=this.context.gl,r=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),n=r[r.length-1].overscaledZ,i=r[0].overscaledZ-n+1;if(this.clearStencil(),i>1){const e={},a={};for(let r=0;r<i;r++)e[r+n]=new Ht({func:t.GREATER,mask:255},i+1+r,255,t.KEEP,t.KEEP,t.REPLACE),a[r+n]=new Ht({func:t.GREATER,mask:255},1+r,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID=2*i+1,[e,a,r]}return this.nextStencilID=3,[{[n]:new Ht({func:t.GREATER,mask:255},2,255,t.KEEP,t.KEEP,t.REPLACE)},{[n]:new Ht({func:t.GREATER,mask:255},1,255,t.KEEP,t.KEEP,t.REPLACE)},r]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const r=1/8;return new $t([e.CONSTANT_COLOR,e.ONE],new t.be(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?$t.unblended:$t.alphaBlended}getDepthModeForSublayer(e,t,r){if(!this.opaquePassEnabledForLayer())return Ut.disabled;const n=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Ut(r||this.context.gl.LEQUAL,t,[n,n])}getDepthModeFor3D(){return new Ut(this.context.gl.LEQUAL,Ut.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,r){var n,i;this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(s.now()),this.imageManager.beginFrame();const a=this.style._order,o=this.style.sourceCaches,l={},c={},u={},d={isRenderingToTexture:!1,isRenderingGlobe:(null===(n=e.projection)||void 0===n?void 0:n.transitionState)>0};for(const t in o){const e=o[t];e.used&&e.prepare(this.context),l[t]=e.getVisibleCoordinates(!1),c[t]=l[t].slice().reverse(),u[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<a.length;t++)if(this.style._layers[a[t]].is3D()){this.opaquePassCutoff=t;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const t of a){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const r=c[e.source];("custom"===e.type||r.length)&&this.renderLayer(this,o[e.source],e,r,d)}if(null===(i=this.style.projection)||void 0===i||i.updateGPUdependent({context:this.context,useProgram:e=>this.useProgram(e)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?t.be.black:t.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(e,t){const r=e.context,n=r.gl,i=((e,t,r)=>{const n=Math.cos(t.rollInRadians),i=Math.sin(t.rollInRadians),a=ue(t),s=t.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:e.properties.get("sky-color"),u_horizon_color:e.properties.get("horizon-color"),u_horizon:[(t.width/2-a*i)*r,(t.height/2+a*n)*r],u_horizon_normal:[-i,n],u_sky_horizon_blend:e.properties.get("sky-horizon-blend")*t.height/2*r,u_sky_blend:s}})(t,e.style.map.transform,e.pixelRatio),a=new Ut(n.LEQUAL,Ut.ReadWrite,[0,1]),s=Ht.disabled,o=e.colorModeForRenderPass(),l=e.useProgram("sky"),c=Ei(r,t);l.draw(r,n.TRIANGLES,a,s,o,zt.disabled,i,null,void 0,"sky",c.vertexBuffer,c.indexBuffer,c.segments)}(this,this.style.sky),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=a.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[a[this.currentLayer]],t=o[e.source],r=l[e.source];this._renderTileClippingMasks(e,r,!1),this.renderLayer(this,t,e,r,d)}this.renderPass="translucent";let h=!1;for(this.currentLayer=0;this.currentLayer<a.length;this.currentLayer++){const e=this.style._layers[a[this.currentLayer]],t=o[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e,d))continue;this.opaquePassEnabledForLayer()||h||(h=!0,d.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const r=("symbol"===e.type?u:c)[e.source];this._renderTileClippingMasks(e,l[e.source],!!this.renderToTexture),this.renderLayer(this,t,e,r,d)}if(d.isRenderingGlobe&&function(e,r,n){const i=e.context,a=i.gl,s=e.useProgram("atmosphere"),o=new Ut(a.LEQUAL,Ut.ReadOnly,[0,1]),l=e.transform,c=function(e,r){const n=e.properties.get("position"),i=[-n.x,-n.y,-n.z],a=t.af(new Float64Array(16));return"map"===e.properties.get("anchor")&&(t.b5(a,a,r.rollInRadians),t.b6(a,a,-r.pitchInRadians),t.b5(a,a,r.bearingInRadians),t.b6(a,a,r.center.lat*Math.PI/180),t.by(a,a,-r.center.lng*Math.PI/180)),t.c4(i,i,a),i}(n,e.transform),u=l.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d=r.properties.get("atmosphere-blend")*u.projectionTransition;if(0===d)return;const h=nr(l.worldSize,l.center.lat),p=l.inverseProjectionMatrix,f=new Float64Array(4);f[3]=1,t.av(f,f,l.modelViewProjectionMatrix),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[3]=1,t.av(f,f,p),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[3]=1;const m=((e,t,r,n,i)=>({u_sun_pos:e,u_atmosphere_blend:t,u_globe_position:r,u_globe_radius:n,u_inv_proj_matrix:i}))(c,d,[f[0],f[1],f[2]],h,p),g=Ei(i,r);s.draw(i,a.TRIANGLES,o,Ht.disabled,$t.alphaBlended,zt.disabled,m,null,null,"atmosphere",g.vertexBuffer,g.indexBuffer,g.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const e=function(e,t){let r=null;const n=Object.values(e._layers).flatMap((r=>r.source&&!r.isHidden(t)?[e.sourceCaches[r.source]]:[])),i=n.filter((e=>"vector"===e.getSource().type)),a=n.filter((e=>"vector"!==e.getSource().type)),s=e=>{(!r||r.getSource().maxzoom<e.getSource().maxzoom)&&(r=e)};return i.forEach((e=>s(e))),r||a.forEach((e=>s(e))),r}(this.style,this.transform.zoom);e&&function(e,t,r){for(let n=0;n<r.length;n++)Si(e,t,r[n])}(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;wi(e,e.transform.height-(t.top||0),3,gi),wi(e,t.bottom||0,3,vi),_i(e,t.left||0,3,xi),_i(e,e.transform.width-(t.right||0),3,yi);const r=e.transform.centerPoint;!function(e,t,r,n){ki(e,t-1,r-10,2,20,n),ki(e,t-10,r-1,20,2,n)}(e,r.x,e.transform.height-r.y,bi)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const r=this.terrainFacilitator.matrix,n=this.transform.modelViewProjectionMatrix;let i=this.terrainFacilitator.dirty;i||(i=e?!t.c7(r,n):!t.c8(r,n)),i||(i=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),i&&(t.c9(r,n),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,r){const n=e.context,i=n.gl,a=e.transform,s=$t.unblended,o=new Ut(i.LEQUAL,Ut.ReadWrite,[0,1]),l=r.sourceCache.getRenderableTiles(),c=e.useProgram("terrainDepth");n.bindFramebuffer.set(r.getFramebuffer("depth").framebuffer),n.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),n.clear({color:t.be.transparent,depth:1});for(const t of l){const e=r.getTerrainMesh(t.tileID),l=r.getTerrainData(t.tileID),u=a.getProjectionData({overscaledTileID:t.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),d={u_ele_delta:r.getMeshFrameDelta(a.zoom)};c.draw(n,i.TRIANGLES,o,Ht.disabled,s,zt.backCCW,d,l,u,"terrain",e.vertexBuffer,e.indexBuffer,e.segments)}n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,r){const n=e.context,i=n.gl,a=e.transform,s=$t.unblended,o=new Ut(i.LEQUAL,Ut.ReadWrite,[0,1]),l=r.getCoordsTexture(),c=r.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");n.bindFramebuffer.set(r.getFramebuffer("coords").framebuffer),n.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),n.clear({color:t.be.transparent,depth:1}),r.coordsIndex=[];for(const t of c){const e=r.getTerrainMesh(t.tileID),c=r.getTerrainData(t.tileID);n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l.texture);const d={u_terrain_coords_id:(255-r.coordsIndex.length)/255,u_texture:0,u_ele_delta:r.getMeshFrameDelta(a.zoom)},h=a.getProjectionData({overscaledTileID:t.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});u.draw(n,i.TRIANGLES,o,Ht.disabled,s,zt.backCCW,d,c,h,"terrain",e.vertexBuffer,e.indexBuffer,e.segments),r.coordsIndex.push(t.tileID.key)}n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}renderLayer(e,r,n,i,a){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||(i||[]).length)&&(this.id=n.id,t.ca(n)?function(e,r,n,i,a,s){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:o}=s,l=Ht.disabled,c=e.colorModeForRenderPass();(n._unevaluatedLayout.hasValue("text-variable-anchor")||n._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,r,n,i,a,s,o,l,c){const u=r.transform,d=r.style.map.terrain,h="map"===a,p="map"===s;for(const f of e){const e=i.getTile(f),a=e.getBucket(n);if(!a||!a.text||!a.text.segments.get().length)continue;const s=t.am(a.textSizeData,u.zoom),m=t.aB(e,1,r.transform.zoom),g=Ee(h,r.transform,m),v="none"!==n.layout.get("icon-text-fit")&&a.hasIconData();if(s){const r=Math.pow(2,u.zoom-e.tileID.overscaledZ),n=d?(e,t)=>d.getElevation(f,e,t):null;ei(a,h,p,c,u,g,r,s,v,t.aC(u,e,o,l),f.toUnwrapped(),n)}}}(i,e,n,r,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),a),0!==n.paint.get("icon-opacity").constantOr(1)&&ri(e,r,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),l,c,o),0!==n.paint.get("text-opacity").constantOr(1)&&ri(e,r,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),l,c,o),r.map.showCollisionBoxes&&(Yn(e,r,n,i,!0),Yn(e,r,n,i,!1))}(e,r,n,i,this.style.placement.variableOffsets,a):t.cb(n)?function(e,r,n,i,a){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:s}=a,o=n.paint.get("circle-opacity"),l=n.paint.get("circle-stroke-width"),c=n.paint.get("circle-stroke-opacity"),u=!n.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===l.constantOr(1)||0===c.constantOr(1)))return;const d=e.context,h=d.gl,p=e.transform,f=e.getDepthModeForSublayer(0,Ut.ReadOnly),m=Ht.disabled,g=e.colorModeForRenderPass(),v=[],x=p.getCircleRadiusCorrection();for(let y=0;y<i.length;y++){const a=i[y],o=r.getTile(a),l=o.getBucket(n);if(!l)continue;const c=n.paint.get("circle-translate"),d=n.paint.get("circle-translate-anchor"),h=t.aC(p,o,c,d),f=l.programConfigurations.get(n.id),m=e.useProgram("circle",f),g=l.layoutVertexBuffer,b=l.indexBuffer,w=e.style.map.terrain&&e.style.map.terrain.getTerrainData(a),_={programConfiguration:f,program:m,layoutVertexBuffer:g,indexBuffer:b,uniformValues:Dr(e,o,n,h,x),terrainData:w,projectionData:p.getProjectionData({overscaledTileID:a,applyGlobeMatrix:!s,applyTerrainMatrix:!0})};if(u){const e=l.segments.get();for(const r of e)v.push({segments:new t.aL([r]),sortKey:r.sortKey,state:_})}else v.push({segments:l.segments,sortKey:0,state:_})}u&&v.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of v){const{programConfiguration:r,program:i,layoutVertexBuffer:a,indexBuffer:s,uniformValues:o,terrainData:l,projectionData:c}=t.state;i.draw(d,h.TRIANGLES,f,m,g,zt.backCCW,o,l,c,n.id,a,s,t.segments,n.paint,e.transform.zoom,r)}}(e,r,n,i,a):t.cc(n)?function(e,r,n,i,a){if(0===n.paint.get("heatmap-opacity"))return;const s=e.context,{isRenderingToTexture:o,isRenderingGlobe:l}=a;if(e.style.map.terrain){for(const t of i){const i=r.getTile(t);r.hasRenderableParent(t)||("offscreen"===e.renderPass?ii(e,i,n,t,l):"translucent"===e.renderPass&&ai(e,n,t,o,l))}s.viewport.set([0,0,e.width,e.height])}else"offscreen"===e.renderPass?function(e,r,n,i){const a=e.context,s=a.gl,o=e.transform,l=Ht.disabled,c=new $t([s.ONE,s.ONE],t.be.transparent,[!0,!0,!0,!0]);(function(e,r,n){const i=e.gl;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,r.width/4,r.height/4]);let a=n.heatmapFbos.get(t.c1);a?(i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),e.bindFramebuffer.set(a.framebuffer)):(a=si(e,r.width/4,r.height/4),n.heatmapFbos.set(t.c1,a))})(a,e,n),a.clear({color:t.be.transparent});for(let t=0;t<i.length;t++){const u=i[t];if(r.hasRenderableParent(u))continue;const d=r.getTile(u),h=d.getBucket(n);if(!h)continue;const p=h.programConfigurations.get(n.id),f=e.useProgram("heatmap",p),m=o.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),g=o.getCircleRadiusCorrection();f.draw(a,s.TRIANGLES,Ut.disabled,l,c,zt.backCCW,$r(d,o.zoom,n.paint.get("heatmap-intensity"),g),null,m,n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,n.paint,o.zoom,p)}a.viewport.set([0,0,e.width,e.height])}(e,r,n,i):"translucent"===e.renderPass&&function(e,r){const n=e.context,i=n.gl;n.setColorMode(e.colorModeForRenderPass());const a=r.heatmapFbos.get(t.c1);a&&(n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),n.activeTexture.set(i.TEXTURE1),oi(n,r).bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,i.TRIANGLES,Ut.disabled,Ht.disabled,e.colorModeForRenderPass(),zt.disabled,Br(e,r,0,1),null,null,r.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,r.paint,e.transform.zoom))}(e,n)}(e,r,n,i,a):t.cd(n)?function(e,r,n,i,a){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:s}=a,o=n.paint.get("line-opacity"),l=n.paint.get("line-width");if(0===o.constantOr(1)||0===l.constantOr(1))return;const c=e.getDepthModeForSublayer(0,Ut.ReadOnly),u=e.colorModeForRenderPass(),d=n.paint.get("line-dasharray"),h=n.paint.get("line-pattern"),p=h.constantOr(1),f=n.paint.get("line-gradient"),m=n.getCrossfadeParameters(),g=p?"linePattern":d?"lineSDF":f?"lineGradient":"line",v=e.context,x=v.gl,y=e.transform;let b=!0;for(const w of i){const i=r.getTile(w);if(p&&!i.patternsLoaded())continue;const a=i.getBucket(n);if(!a)continue;const o=a.programConfigurations.get(n.id),l=e.context.program.get(),_=e.useProgram(g,o),k=b||_.program!==l,S=e.style.map.terrain&&e.style.map.terrain.getTerrainData(w),j=h.constantOr(null);if(j&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[j.to.toString()],r=e.patternPositions[j.from.toString()];t&&r&&o.setConstantPatternPositions(t,r)}const E=y.getProjectionData({overscaledTileID:w,applyGlobeMatrix:!s,applyTerrainMatrix:!0}),C=y.getPixelScale(),N=p?qr(e,i,n,C,m):d?Kr(e,i,n,C,d,m):f?Wr(e,i,n,C,a.lineClipsArray.length):Gr(e,i,n,C);if(p)v.activeTexture.set(x.TEXTURE0),i.imageAtlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),o.updatePaintBuffers(m);else if(d&&(k||e.lineAtlas.dirty))v.activeTexture.set(x.TEXTURE0),e.lineAtlas.bind(v);else if(f){const i=a.gradients[n.id];let s=i.texture;if(n.gradientVersion!==i.version){let o=256;if(n.stepInterpolant){const n=r.getSource().maxzoom,i=w.canonical.z===n?Math.ceil(1<<e.transform.maxZoom-w.canonical.z):1;o=t.ag(t.c2(a.maxLineLength/t.$*1024*i),256,v.maxTextureSize)}i.gradient=t.c3({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:o,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new t.T(v,i.gradient,x.RGBA),i.version=n.gradientVersion,s=i.texture}v.activeTexture.set(x.TEXTURE0),s.bind(n.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE)}const T=e.stencilModeForClipping(w);_.draw(v,x.TRIANGLES,c,T,u,zt.disabled,N,S,E,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,n.paint,e.transform.zoom,o,a.layoutVertexBuffer2),b=!1}}(e,r,n,i,a):t.ce(n)?function(e,r,n,i,a){const s=n.paint.get("fill-color"),o=n.paint.get("fill-opacity");if(0===o.constantOr(1))return;const{isRenderingToTexture:l}=a,c=e.colorModeForRenderPass(),u=n.paint.get("fill-pattern"),d=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===s.constantOr(t.be.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===d){const t=e.getDepthModeForSublayer(1,"opaque"===e.renderPass?Ut.ReadWrite:Ut.ReadOnly);ci(e,r,n,i,t,c,!1,l)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){const t=e.getDepthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Ut.ReadOnly);ci(e,r,n,i,t,c,!0,l)}}(e,r,n,i,a):t.cf(n)?function(e,t,r,n,i){const a=r.paint.get("fill-extrusion-opacity");if(0===a)return;const{isRenderingToTexture:s}=i;if("translucent"===e.renderPass){const i=new Ut(e.context.gl.LEQUAL,Ut.ReadWrite,e.depthRangeFor3D);if(1!==a||r.paint.get("fill-extrusion-pattern").constantOr(1))ui(e,t,r,n,i,Ht.disabled,$t.disabled,s),ui(e,t,r,n,i,e.stencilModeFor3D(),e.colorModeForRenderPass(),s);else{const a=e.colorModeForRenderPass();ui(e,t,r,n,i,Ht.disabled,a,s)}}}(e,r,n,i,a):t.cg(n)?function(e,r,n,i,a){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const{isRenderingToTexture:s}=a,o=e.context,l=e.style.projection.useSubdivision,c=e.getDepthModeForSublayer(0,Ut.ReadOnly),u=e.colorModeForRenderPass();if("offscreen"===e.renderPass)!function(e,r,n,i,a,s,o){const l=e.context,c=l.gl;for(const u of n){const n=r.getTile(u),d=n.dem;if(!d||!d.data)continue;if(!n.needsHillshadePrepare)continue;const h=d.dim,p=d.stride,f=d.getPixels();if(l.activeTexture.set(c.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(p),n.demTexture){const e=n.demTexture;e.update(f,{premultiply:!1}),e.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else n.demTexture=new t.T(l,f,c.RGBA,{premultiply:!1}),n.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);l.activeTexture.set(c.TEXTURE0);let m=n.fbo;if(!m){const e=new t.T(l,{width:h,height:h,data:null},c.RGBA);e.bind(c.LINEAR,c.CLAMP_TO_EDGE),m=n.fbo=l.createFramebuffer(h,h,!0,!1),m.colorAttachment.set(e.texture)}l.bindFramebuffer.set(m.framebuffer),l.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(l,c.TRIANGLES,a,s,o,zt.disabled,Ur(n.tileID,d),null,null,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}(e,r,i,n,c,Ht.disabled,u),o.viewport.set([0,0,e.width,e.height]);else if("translucent"===e.renderPass)if(l){const[t,a,o]=e.stencilConfigForOverlapTwoPass(i);di(e,r,n,o,t,c,u,!1,s),di(e,r,n,o,a,c,u,!0,s)}else{const[t,a]=e.getStencilConfigForOverlapAndUpdateStencilID(i);di(e,r,n,a,t,c,u,!1,s)}}(e,r,n,i,a):t.ch(n)?function(e,t,r,n,i){if("translucent"!==e.renderPass)return;if(!n.length)return;const{isRenderingToTexture:a}=i,s=e.style.projection.useSubdivision,o=e.getDepthModeForSublayer(0,Ut.ReadOnly),l=e.colorModeForRenderPass();if(s){const[i,s,c]=e.stencilConfigForOverlapTwoPass(n);hi(e,t,r,c,i,o,l,!1,a),hi(e,t,r,c,s,o,l,!0,a)}else{const[i,s]=e.getStencilConfigForOverlapAndUpdateStencilID(n);hi(e,t,r,s,i,o,l,!1,a)}}(e,r,n,i,a):t.ci(n)?function(e,t,r,n,i){if("translucent"!==e.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!n.length)return;const{isRenderingToTexture:a}=i,s=t.getSource(),o=e.style.projection.useSubdivision;if(s instanceof Z)fi(e,t,r,n,null,!1,!1,s.tileCoords,s.flippedWindingOrder,a);else if(o){const[i,s,o]=e.stencilConfigForOverlapTwoPass(n);fi(e,t,r,o,i,!1,!0,pi,!1,a),fi(e,t,r,o,s,!0,!0,pi,!1,a)}else{const[i,s]=e.getStencilConfigForOverlapAndUpdateStencilID(n);fi(e,t,r,s,i,!1,!0,pi,!1,a)}}(e,r,n,i,a):t.cj(n)?function(e,t,r,n,i){const a=r.paint.get("background-color"),s=r.paint.get("background-opacity");if(0===s)return;const{isRenderingToTexture:o}=i,l=e.context,c=l.gl,u=e.style.projection,d=e.transform,h=d.tileSize,p=r.paint.get("background-pattern");if(e.isPatternMissing(p))return;const f=!p&&1===a.a&&1===s&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==f)return;const m=Ht.disabled,g=e.getDepthModeForSublayer(0,"opaque"===f?Ut.ReadWrite:Ut.ReadOnly),v=e.colorModeForRenderPass(),x=e.useProgram(p?"backgroundPattern":"background"),y=n||xe(d,{tileSize:h,terrain:e.style.map.terrain});p&&(l.activeTexture.set(c.TEXTURE0),e.imageManager.bind(e.context));const b=r.getCrossfadeParameters();for(const w of y){const t=d.getProjectionData({overscaledTileID:w,applyGlobeMatrix:!o,applyTerrainMatrix:!0}),n=p?nn(s,e,p,{tileID:w,tileSize:h},b):rn(s,a),i=e.style.map.terrain&&e.style.map.terrain.getTerrainData(w),f=u.getMeshFromTileID(l,w.canonical,!1,!0,"raster");x.draw(l,c.TRIANGLES,g,m,v,zt.backCCW,n,i,t,r.id,f.vertexBuffer,f.indexBuffer,f.segments)}}(e,0,n,i,a):t.ck(n)&&function(e,t,r,n){const{isRenderingGlobe:i}=n,a=e.context,s=r.implementation,o=e.style.projection,l=e.transform,c=l.getProjectionDataForCustomLayer(i),u={farZ:l.farZ,nearZ:l.nearZ,fov:l.fov*Math.PI/180,modelViewProjectionMatrix:l.modelViewProjectionMatrix,projectionMatrix:l.projectionMatrix,shaderData:{variantName:o.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;\nuniform mat4 u_projection_matrix;\n${o.shaderPreludeCode.vertexSource}`,define:o.shaderDefine},defaultProjectionData:c},d=s.renderingMode?s.renderingMode:"2d";if("offscreen"===e.renderPass){const t=s.prerender;t&&(e.setCustomLayerDefaults(),a.setColorMode(e.colorModeForRenderPass()),t.call(s,a.gl,u),a.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),a.setColorMode(e.colorModeForRenderPass()),a.setStencilMode(Ht.disabled);const t="3d"===d?e.getDepthModeFor3D():e.getDepthModeForSublayer(0,Ut.ReadOnly);a.setDepthMode(t),s.render(a.gl,u),a.setDirty(),e.setBaseState(),a.bindFramebuffer.set(null)}}(e,0,n,a))}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),r=this.imageManager.getPattern(e.to.toString());return!t||!r}useProgram(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.cache=this.cache||{};const i=!!this.style.map.terrain,a=this.style.projection,s=r?bt.projectionMercator:a.shaderPreludeCode,o=r?St:a.shaderDefine,l=e+(t?t.cacheKey:"")+`/${r?jt:a.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(i?"/terrain":"")+(n?`/${n.join("/")}`:"");return this.cache[l]||(this.cache[l]=new Nr(this.context,bt[e],t,sn[e],this._showOverdrawInspector,i,s,o,n)),this.cache[l]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:t}=this.context.gl;return this.width!==e||this.height!==t}}function Ni(e,t){var r=this;let n,i=!1,a=null,s=null;const o=()=>{a=null,i&&(e.apply(s,n),a=setTimeout(o,t),i=!1)};return function(){for(var e=arguments.length,t=new Array(e),l=0;l<e;l++)t[l]=arguments[l];return i=!0,s=r,n=t,a||o(),a}}class Ti{constructor(e){this._getCurrentHash=()=>{const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((e=>e.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")},this._onHashChange=()=>{const e=this._getCurrentHash();if(!this._isValidHash(e))return!1;const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0},this._updateHashUnthrottled=()=>{const e=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,e)},this._removeHash=()=>{const e=this._getCurrentHash();if(0===e.length)return;const t=e.join("/");let r=t;r.split("&").length>0&&(r=r.split("&")[0]),this._hashName&&(r=`${this._hashName}=${t}`);let n=window.location.hash.replace(r,"");n.startsWith("#&")?n=n.slice(0,1)+n.slice(2):"#"===n&&(n="");let i=window.location.href.replace(/(#.+)?$/,n);i=i.replace("&&","&"),window.history.replaceState(window.history.state,null,i)},this._updateHash=Ni(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const t=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,n),a=Math.round(t.lng*i)/i,s=Math.round(t.lat*i)/i,o=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?`/${a}/${s}/${r}`:`${r}/${s}/${a}`,(o||l)&&(c+="/"+Math.round(10*o)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const e=this._hashName;let t=!1;const r=window.location.hash.slice(1).split("&").map((r=>{const n=r.split("=")[0];return n===e?(t=!0,`${n}=${c}`):r})).filter((e=>e));return t||r.push(`${e}=${c}`),`#${r.join("&")}`}return`#${c}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new t.S(+e[2],+e[1])}catch(e){return!1}const r=+e[0],n=+(e[3]||0),i=+(e[4]||0);return r>=this._map.getMinZoom()&&r<=this._map.getMaxZoom()&&n>=-180&&n<=180&&i>=this._map.getMinPitch()&&i<=this._map.getMaxPitch()}}const Pi={linearity:.3,easing:t.cl(0,0,.3,1)},Ai=t.e({deceleration:2500,maxSpeed:1400},Pi),Mi=t.e({deceleration:20,maxSpeed:1400},Pi),Ii=t.e({deceleration:1e3,maxSpeed:360},Pi),Oi=t.e({deceleration:1e3,maxSpeed:90},Pi),Di=t.e({deceleration:1e3,maxSpeed:360},Pi);class Ri{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=s.now();for(;e.length>0&&t-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,roll:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)r.zoom+=t.zoomDelta||0,r.bearing+=t.bearingDelta||0,r.pitch+=t.pitchDelta||0,r.roll+=t.rollDelta||0,t.panDelta&&r.pan._add(t.panDelta),t.around&&(r.around=t.around),t.pinchAround&&(r.pinchAround=t.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(r.pan.mag()){const a=Fi(r.pan.mag(),n,t.e({},Ai,e||{})),s=r.pan.mult(a.amount/r.pan.mag()),o=this._map.cameraHelper.handlePanInertia(s,this._map.transform);i.center=o.easingCenter,i.offset=o.easingOffset,Li(i,a)}if(r.zoom){const e=Fi(r.zoom,n,Mi);i.zoom=this._map.transform.zoom+e.amount,Li(i,e)}if(r.bearing){const e=Fi(r.bearing,n,Ii);i.bearing=this._map.transform.bearing+t.ag(e.amount,-179,179),Li(i,e)}if(r.pitch){const e=Fi(r.pitch,n,Oi);i.pitch=this._map.transform.pitch+e.amount,Li(i,e)}if(r.roll){const e=Fi(r.roll,n,Di);i.roll=this._map.transform.roll+t.ag(e.amount,-179,179),Li(i,e)}if(i.zoom||i.bearing){const e=void 0===r.pinchAround?r.around:r.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),t.e(i,{noMoveStart:!0})}}function Li(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Fi(e,r,n){const{maxSpeed:i,linearity:a,deceleration:s}=n,o=t.ag(e*a/(r/1e3),-i,i),l=Math.abs(o)/(s*a);return{easing:n.easing,duration:1e3*l,amount:o*(l/2)}}class $i extends t.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=n instanceof MouseEvent?n:new MouseEvent(e,n);const a=o.mousePos(r.getCanvas(),n),s=r.unproject(a);super(e,t.e({point:a,lngLat:s,originalEvent:n},i)),this._defaultPrevented=!1,this.target=r}}class Bi extends t.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,n){const i="touchend"===e?n.changedTouches:n.touches,a=o.touchPos(r.getCanvasContainer(),i),s=a.map((e=>r.unproject(e))),l=a.reduce(((e,t,r,n)=>e.add(t.div(n.length))),new t.P(0,0));super(e,{points:a,point:l,lngLats:s,lngLat:r.unproject(l),originalEvent:n}),this._defaultPrevented=!1}}class zi extends t.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class Ui{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new zi(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new $i(e.type,this._map,e))}mouseup(e){this._map.fire(new $i(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new $i(e.type,this._map,e))}dblclick(e){return this._firePreventable(new $i(e.type,this._map,e))}mouseover(e){this._map.fire(new $i(e.type,this._map,e))}mouseout(e){this._map.fire(new $i(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Bi(e.type,this._map,e))}touchmove(e){this._map.fire(new Bi(e.type,this._map,e))}touchend(e){this._map.fire(new Bi(e.type,this._map,e))}touchcancel(e){this._map.fire(new Bi(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new $i(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new $i(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hi{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(t.P.convert(e),this._map.terrain)}}class Gi{constructor(e,t){this._map=e,this._tr=new Hi(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(o.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const r=t;if(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)return;const n=this._startPos;this._lastPos=r,this._box||(this._box=o.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const i=Math.min(n.x,r.x),a=Math.max(n.x,r.x),s=Math.min(n.y,r.y),l=Math.max(n.y,r.y);o.setTransform(this._box,`translate(${i}px,${s}px)`),this._box.style.width=a-i+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,r){if(!this._active)return;if(0!==e.button)return;const n=this._startPos,i=r;if(this.reset(),o.suppressClick(),n.x!==i.x||n.y!==i.y)return this._map.fire(new t.l("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(n,i,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,r){return this._map.fire(new t.l(e,{originalEvent:r}))}}function Wi(e,t){if(e.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${e.length}, points ${t.length}`);const r={};for(let n=0;n<e.length;n++)r[e[n].identifier]=t[n];return r}class qi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,r,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){const r=new t.P(0,0);for(const t of e)r._add(t);return r.div(e.length)}(r),this.touches=Wi(n,r)))}touchmove(e,t,r){if(this.aborted||!this.centroid)return;const n=Wi(r,t);for(const i in this.touches){const e=n[i];(!e||e.dist(this.touches[i])>30)&&(this.aborted=!0)}}touchend(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Ki{constructor(e){this.singleTap=new qi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,r){this.singleTap.touchstart(e,t,r)}touchmove(e,t,r){this.singleTap.touchmove(e,t,r)}touchend(e,t,r){const n=this.singleTap.touchend(e,t,r);if(n){const t=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(n)<30;if(t&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class Zi{constructor(e){this._tr=new Hi(e),this._zoomIn=new Ki({numTouches:1,numTaps:2}),this._zoomOut=new Ki({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}touchmove(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}touchend(e,t,r){const n=this._zoomIn.touchend(e,t,r),i=this._zoomOut.touchend(e,t,r),a=this._tr;return n?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:a.zoom+1,around:a.unproject(n)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:a.zoom-1,around:a.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yi{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(){const e=this._moveFunction(...arguments);if(e.bearingDelta||e.pitchDelta||e.rollDelta||e.around||e.panDelta)return this._active=!0,e}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(t)?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,t){if(!this.isEnabled())return;const r=this._lastPoint;if(!r)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const n=Array.isArray(t)?t[0]:t;return!this._moved&&n.dist(r)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=n,this._move(r,n))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&o.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Xi=0,Qi=2,Ji={[Xi]:1,[Qi]:2};class ea{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const t=o.mouseButton(e);this._eventButton=t}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(e,t){const r=Ji[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton)}isValidEndEvent(e){return o.mouseButton(e)===this._eventButton}}class ta{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class ra{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ea({checkCorrectEvent:()=>!0}),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ta;this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=t}_executeRelevantHandler(e,t,r){return e instanceof MouseEvent?t(e):"undefined"!=typeof TouchEvent&&e instanceof TouchEvent?r(e):void 0}startMove(e){this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.startMove(e)),(e=>this.oneFingerTouchMoveStateManager.startMove(e)))}endMove(e){this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.endMove(e)),(e=>this.oneFingerTouchMoveStateManager.endMove(e)))}isValidStartEvent(e){return this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.isValidStartEvent(e)),(e=>this.oneFingerTouchMoveStateManager.isValidStartEvent(e)))}isValidMoveEvent(e){return this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.isValidMoveEvent(e)),(e=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(e)))}isValidEndEvent(e){return this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.isValidEndEvent(e)),(e=>this.oneFingerTouchMoveStateManager.isValidEndEvent(e)))}}const na=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=e=>{e.preventDefault()}};class ia{constructor(e,t){this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,t,r){return this._calculateTransform(e,t,r)}touchmove(e,t,r){if(this._active){if(!this._shouldBePrevented(r.length))return e.preventDefault(),this._calculateTransform(e,t,r);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,t,r){this._calculateTransform(e,t,r),this._active&&this._shouldBePrevented(r.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,r,n){n.length>0&&(this._active=!0);const i=Wi(n,r),a=new t.P(0,0),s=new t.P(0,0);let o=0;for(const t in i){const e=i[t],r=this._touches[t];r&&(a._add(e),s._add(e.sub(r)),o++,i[t]=e)}if(this._touches=i,this._shouldBePrevented(o)||!s.mag())return;const l=s.div(o);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(o),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class aa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,r){if(!this._firstTwoTouches)return;e.preventDefault();const[n,i]=this._firstTwoTouches,a=sa(r,t,n),s=sa(r,t,i);if(!a||!s)return;const o=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],o,e)}touchend(e,t,r){if(!this._firstTwoTouches)return;const[n,i]=this._firstTwoTouches,a=sa(r,t,n),s=sa(r,t,i);a&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function sa(e,t,r){for(let n=0;n<e.length;n++)if(e[n].identifier===r)return t[n]}function oa(e,t){return Math.log(e/t)/Math.LN2}class la extends aa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(oa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:oa(this._distance,r),pinchAround:t}}}function ca(e,t){return 180*e.angleWith(t)/Math.PI}class ua extends aa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t,r){const n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ca(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,r=ca(e,this._startVector);return Math.abs(r)<t}}function da(e){return Math.abs(e.y)>Math.abs(e.x)}class ha extends aa{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,r){super.touchstart(e,t,r),this._currentTouchCount=r.length}_start(e){this._lastPoints=e,da(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,r){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const n=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(n,i,r.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(n.y+i.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,r){if(void 0!==this._valid)return this._valid;const n=e.mag()>=2,i=t.mag()>=2;if(!n&&!i)return;if(!n||!i)return void 0===this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const a=e.y>0==t.y>0;return da(e)&&da(t)&&a}}const pa={panStep:100,bearingStep:15,pitchStep:10};class fa{constructor(e){this._tr=new Hi(e);const t=pa;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,r=0,n=0,i=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?n=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,n=0),{cameraAnimation:s=>{const o=this._tr;s.easeTo({duration:300,easeId:"keyboardHandler",easing:ma,zoom:t?Math.round(o.zoom)+t*(e.shiftKey?2:1):o.zoom,bearing:o.bearing+r*this._bearingStep,pitch:o.pitch+n*this._pitchStep,offset:[-i*this._panStep,-a*this._panStep],center:o.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ma(e){return e*(2-e)}const ga=4.000244140625,va=1/450;class xa{constructor(e,t){this._onTimeout=e=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},this._map=e,this._tr=new Hi(e),this._triggerRenderFrame=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=va}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=s.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==t&&t%ga==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const r=o.mousePos(this._map.getCanvas(),e),n=this._tr;this._aroundPoint=this._aroundCenter?n.transform.locationToScreenPoint(t.S.convert(n.center)):r,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if("number"==typeof this._lastExpectedZoom){const t=e.zoom-this._lastExpectedZoom;"number"==typeof this._startZoom&&(this._startZoom+=t),"number"==typeof this._targetZoom&&(this._targetZoom+=t)}if(0!==this._delta){const r="wheel"===this._type&&Math.abs(this._delta)>ga?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==n&&(n=1/n);const i="number"!=typeof this._targetZoom?e.scale:t.ae(this._targetZoom);this._targetZoom=e.getConstrained(e.getCameraLngLat(),t.aj(i*n)).zoom,"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"!=typeof this._targetZoom?e.zoom:this._targetZoom,n=this._startZoom,i=this._easing;let a,o=!1;if("wheel"===this._type&&n&&i){const e=s.now()-this._lastWheelEventTime,l=Math.min((e+5)/200,1),c=i(l);a=t.C.number(n,r,c),l<1?this._frameId||(this._frameId=!0):o=!0}else a=r,o=!0;return this._active=!0,o&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=a,{noInertia:!0,needsRenderFrame:!o,zoomDelta:a-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let r=t.cn;if(this._prevEase){const e=this._prevEase,n=(s.now()-e.start)/e.duration,i=e.easing(n+.01)-e.easing(n),a=.27/Math.sqrt(i*i+1e-4)*.01,o=Math.sqrt(.0729-a*a);r=t.cl(a,o,.25,1)}return this._prevEase={start:s.now(),duration:e,easing:r},r}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ya{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ba{constructor(e){this._tr=new Hi(e),this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wa{constructor(){this._tap=new Ki({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,t,r){if(!this._swipePoint)if(this._tapTime){const n=t[0],i=e.timeStamp-this._tapTime<500,a=this._tapPoint.dist(n)<30;i&&a?r.length>0&&(this._swipePoint=n,this._swipeTouch=r[0].identifier):this.reset()}else this._tap.touchstart(e,t,r)}touchmove(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const n=t[0],i=n.y-this._swipePoint.y;return this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,r)}touchend(e,t,r){if(this._tapTime)this._swipePoint&&0===r.length&&this.reset();else{const n=this._tap.touchend(e,t,r);n&&(this._tapTime=e.timeStamp,this._tapPoint=n)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _a{constructor(e,t,r){this._el=e,this._mousePan=t,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ka{constructor(e,t,r,n){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=t,this._mousePitch=r,this._mouseRoll=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Sa{constructor(e,t,r,n){this._el=e,this._touchZoom=t,this._touchRotate=r,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ja{constructor(e,t){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=e,this._options=t,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=o.create("div","maplibregl-cooperative-gesture-screen",e);let t=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(t=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const r=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),n=document.createElement("div");n.className="maplibregl-desktop-message",n.textContent=t,this._container.appendChild(n);const i=document.createElement("div");i.className="maplibregl-mobile-message",i.textContent=r,this._container.appendChild(i),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(o.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,r){this._enabled&&(this._map.fire(new t.l("cooperativegestureprevented",{gestureType:e,originalEvent:r})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Ea=e=>e.zoom||e.drag||e.roll||e.pitch||e.rotate;class Ca extends t.l{}function Na(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta||e.rollDelta}class Ta{constructor(e,r){this.handleWindowEvent=e=>{this.handleEvent(e,`${e.type}Window`)},this.handleEvent=(e,r)=>{if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===e.type?void 0:e,i={needsRenderFrame:!1},a={},s={};for(const{handlerName:u,handler:d,allowed:h}of this._handlers){if(!d.isEnabled())continue;let l;if(this._blockedByActive(s,h,u))d.reset();else if(d[r||e.type]){if(t.co(e,r||e.type)){const t=o.mousePos(this._map.getCanvas(),e);l=d[r||e.type](e,t)}else if(t.cp(e,r||e.type)){const t=this._getMapTouches(e.touches),n=o.touchPos(this._map.getCanvas(),t);l=d[r||e.type](e,n,t)}else t.cq(r||e.type)||(l=d[r||e.type](e));this.mergeHandlerResult(i,a,l,u,n),l&&l.needsRenderFrame&&this._triggerRenderFrame()}(l||d.isActive())&&(s[u]=d)}const l={};for(const t in this._previousActiveHandlers)s[t]||(l[t]=n);this._previousActiveHandlers=s,(Object.keys(l).length||Na(i))&&(this._changes.push([i,a,l]),this._triggerRenderFrame()),(Object.keys(s).length||Na(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:c}=i;c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],c(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ri(e),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[window,"blur",void 0]];for(const[t,i,a]of this._listeners)o.addEventListener(t,i,t===document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[e,t,r]of this._listeners)o.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const r=this._map,n=r.getCanvasContainer();this._add("mapEvent",new Ui(r,e));const i=r.boxZoom=new Gi(r,e);this._add("boxZoom",i),e.interactive&&e.boxZoom&&i.enable();const a=r.cooperativeGestures=new ja(r,e.cooperativeGestures);this._add("cooperativeGestures",a),e.cooperativeGestures&&a.enable();const s=new Zi(r),l=new ba(r);r.doubleClickZoom=new ya(l,s),this._add("tapZoom",s),this._add("clickZoom",l),e.interactive&&e.doubleClickZoom&&r.doubleClickZoom.enable();const c=new wa;this._add("tapDragZoom",c);const u=r.touchPitch=new ha(r);this._add("touchPitch",u),e.interactive&&e.touchPitch&&r.touchPitch.enable(e.touchPitch);const d=()=>r.project(r.getCenter()),h=function(e,r){let{enable:n,clickTolerance:i,aroundCenter:a=!0,minPixelCenterThreshold:s=100,rotateDegreesPerPixelMoved:l=.8}=e;const c=new ea({checkCorrectEvent:e=>0===o.mouseButton(e)&&e.ctrlKey||2===o.mouseButton(e)&&!e.ctrlKey});return new Yi({clickTolerance:i,move:(e,n)=>{const i=r();if(a&&Math.abs(i.y-e.y)>s)return{bearingDelta:t.cm(new t.P(e.x,n.y),n,i)};let o=(n.x-e.x)*l;return a&&n.y<i.y&&(o=-o),{bearingDelta:o}},moveStateManager:c,enable:n,assignEvents:na})}(e,d),p=function(e){let{enable:t,clickTolerance:r,pitchDegreesPerPixelMoved:n=-.5}=e;const i=new ea({checkCorrectEvent:e=>0===o.mouseButton(e)&&e.ctrlKey||2===o.mouseButton(e)});return new Yi({clickTolerance:r,move:(e,t)=>({pitchDelta:(t.y-e.y)*n}),moveStateManager:i,enable:t,assignEvents:na})}(e),f=function(e,t){let{enable:r,clickTolerance:n,rollDegreesPerPixelMoved:i=.3}=e;const a=new ea({checkCorrectEvent:e=>2===o.mouseButton(e)&&e.ctrlKey});return new Yi({clickTolerance:n,move:(e,r)=>{const n=t();let a=(r.x-e.x)*i;return r.y<n.y&&(a=-a),{rollDelta:a}},moveStateManager:a,enable:r,assignEvents:na})}(e,d);r.dragRotate=new ka(e,h,p,f),this._add("mouseRotate",h,["mousePitch"]),this._add("mousePitch",p,["mouseRotate","mouseRoll"]),this._add("mouseRoll",f,["mousePitch"]),e.interactive&&e.dragRotate&&r.dragRotate.enable();const m=function(e){let{enable:t,clickTolerance:r}=e;const n=new ea({checkCorrectEvent:e=>0===o.mouseButton(e)&&!e.ctrlKey});return new Yi({clickTolerance:r,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:n,enable:t,assignEvents:na})}(e),g=new ia(e,r);r.dragPan=new _a(n,m,g),this._add("mousePan",m),this._add("touchPan",g,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&r.dragPan.enable(e.dragPan);const v=new ua,x=new la;r.touchZoomRotate=new Sa(n,x,v,c),this._add("touchRotate",v,["touchPan","touchZoom"]),this._add("touchZoom",x,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&r.touchZoomRotate.enable(e.touchZoomRotate);const y=r.scrollZoom=new xa(r,(()=>this._triggerRenderFrame()));this._add("scrollZoom",y,["mousePan"]),e.interactive&&e.scrollZoom&&r.scrollZoom.enable(e.scrollZoom);const b=r.keyboard=new fa(r);this._add("keyboard",b),e.interactive&&e.keyboard&&r.keyboard.enable(),this._add("blockableMapEvent",new Vi(r))}_add(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ea(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,r){for(const n in e)if(n!==r&&(!t||t.indexOf(n)<0))return!0;return!1}_getMapTouches(e){const t=[];for(const r of e)this._el.contains(r.target)&&t.push(r);return t}mergeHandlerResult(e,r,n,i,a){if(!n)return;t.e(e,n);const s={handlerName:i,originalEvent:n.originalEvent||a};void 0!==n.zoomDelta&&(r.zoom=s),void 0!==n.panDelta&&(r.drag=s),void 0!==n.rollDelta&&(r.roll=s),void 0!==n.pitchDelta&&(r.pitch=s),void 0!==n.bearingDelta&&(r.rotate=s)}_applyChanges(){const e={},r={},n={};for(const[i,a,s]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.P(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),i.rollDelta&&(e.rollDelta=(e.rollDelta||0)+i.rollDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.e(r,a),t.e(n,s);this._updateMapTransform(e,r,n),this._changes=[]}_updateMapTransform(e,t,r){const n=this._map,i=n._getTransformForUpdate(),a=n.terrain;if(!(Na(e)||a&&this._terrainMovement))return this._fireEvents(t,r,!0);n._stop(!0);let{panDelta:s,zoomDelta:o,bearingDelta:l,pitchDelta:c,rollDelta:u,around:d,pinchAround:h}=e;void 0!==h&&(d=h),d=d||n.transform.centerPoint,a&&!i.isPointOnMapSurface(d)&&(d=i.centerPoint);const p={panDelta:s,zoomDelta:o,rollDelta:u,pitchDelta:c,bearingDelta:l,around:d};this._map.cameraHelper.useGlobeControls&&!i.isPointOnMapSurface(d)&&(d=i.centerPoint);const f=d.distSqr(i.centerPoint)<.01?i.center:i.screenPointToLocation(s?d.sub(s):d);a?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(p,i),this._terrainMovement||!t.drag&&!t.zoom?t.drag&&this._terrainMovement?i.setCenter(i.screenPointToLocation(i.centerPoint.sub(s))):this._map.cameraHelper.handleMapControlsPan(p,i,f):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(p,i,f))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(p,i),this._map.cameraHelper.handleMapControlsPan(p,i,f)),n._applyUpdatedTransform(i),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,r,!0)}_fireEvents(e,r,n){const i=Ea(this._eventsInProgress),a=Ea(e),o={};for(const t in e){const{originalEvent:r}=e[t];this._eventsInProgress[t]||(o[`${t}start`]=r),this._eventsInProgress[t]=e[t]}!i&&a&&this._fireEvent("movestart",a.originalEvent);for(const t in o)this._fireEvent(t,o[t]);a&&this._fireEvent("move",a.originalEvent);for(const t in e){const{originalEvent:r}=e[t];this._fireEvent(t,r)}const l={};let c;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:n}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],c=r[e]||n,l[`${t}end`]=c)}for(const t in l)this._fireEvent(t,l[t]);const u=Ea(this._eventsInProgress),d=(i||a)&&!u;if(d&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const e=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&e.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(e)}if(n&&d){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),r=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;!e||!e.essential&&s.prefersReducedMotion?(this._map.fire(new t.l("moveend",{originalEvent:c})),r(this._map.getBearing())&&this._map.resetNorth()):(r(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:c})),this._updatingCamera=!1}}_fireEvent(e,r){this._map.fire(new t.l(e,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new Ca("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Pa extends t.E{constructor(e,t,r){super(),this._renderFrameCallback=()=>{const e=Math.min((s.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=r.bearingSnap,this.cameraHelper=t,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(e,t){e.apply(this.transform),this.transform=e,this.cameraHelper=t}getCenter(){return new t.S(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,t){return this.jumpTo({elevation:e},t),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,r,n){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},r),n)}panTo(e,r,n){return this.easeTo(t.e({center:e},r),n)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,r,n){return this.easeTo(t.e({zoom:e},r),n)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,r){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new t.l("movestart",r)).fire(new t.l("move",r)).fire(new t.l("moveend",r))),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,r,n){return this.easeTo(t.e({bearing:e},r),n)}resetNorth(e,r){return this.rotateTo(0,t.e({duration:1e3},e),r),this}resetNorthPitch(e,r){return this.easeTo(t.e({bearing:0,pitch:0,roll:0,duration:1e3},e),r),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}getRoll(){return this.transform.roll}setRoll(e,t){return this.jumpTo({roll:e},t),this}cameraForBounds(e,t){e=V.convert(e).adjustAntiMeridian();const r=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,t)}_cameraForBoxAndBearing(e,r,n,i){const a={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.e({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const e=i.padding;i.padding={top:e,bottom:e,right:e,left:e}}const s=t.e(a,i.padding);i.padding=s;const o=this.transform,l=new V(e,r);return this.cameraHelper.cameraForBoxAndBearing(i,s,l,n,o)}fitBounds(e,t,r){return this._fitInternal(this.cameraForBounds(e,t),t,r)}fitScreenCoordinates(e,r,n,i,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(t.P.convert(e)),this.transform.screenPointToLocation(t.P.convert(r)),n,i),i,a)}_fitInternal(e,r,n){return e?(delete(r=t.e(e,r)).padding,r.linear?this.easeTo(r,n):this.flyTo(r,n)):this}jumpTo(e,r){this.stop();const n=this._getTransformForUpdate();let i=!1,a=!1,s=!1;const o=n.zoom;this.cameraHelper.handleJumpToCenterZoom(n,e);const l=n.zoom!==o;return"elevation"in e&&n.elevation!==+e.elevation&&n.setElevation(+e.elevation),"bearing"in e&&n.bearing!==+e.bearing&&(i=!0,n.setBearing(+e.bearing)),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.setPitch(+e.pitch)),"roll"in e&&n.roll!==+e.roll&&(s=!0,n.setRoll(+e.roll)),null==e.padding||n.isPaddingEqual(e.padding)||n.setPadding(e.padding),this._applyUpdatedTransform(n),this.fire(new t.l("movestart",r)).fire(new t.l("move",r)),l&&this.fire(new t.l("zoomstart",r)).fire(new t.l("zoom",r)).fire(new t.l("zoomend",r)),i&&this.fire(new t.l("rotatestart",r)).fire(new t.l("rotate",r)).fire(new t.l("rotateend",r)),a&&this.fire(new t.l("pitchstart",r)).fire(new t.l("pitch",r)).fire(new t.l("pitchend",r)),s&&this.fire(new t.l("rollstart",r)).fire(new t.l("roll",r)).fire(new t.l("rollend",r)),this.fire(new t.l("moveend",r))}calculateCameraOptionsFromTo(e,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a=t.a0.fromLngLat(e,r),s=t.a0.fromLngLat(n,i),o=s.x-a.x,l=s.y-a.y,c=s.z-a.z,u=Math.hypot(o,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const d=Math.hypot(o,l),h=t.aj(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(o,-l)/Math.PI;let f=180*Math.acos(d/u)/Math.PI;return f=c<0?90-f:90+f,{center:s.toLngLat(),elevation:i,zoom:h,pitch:f,bearing:p}}calculateCameraOptionsFromCameraLngLatAltRotation(e,t,r,n,i){const a=this.transform.calculateCenterFromCameraLngLatAlt(e,t,r,n);return{center:a.center,elevation:a.elevation,zoom:a.zoom,bearing:r,pitch:n,roll:i}}easeTo(e,r){this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.cn},e)).animate||!e.essential&&s.prefersReducedMotion)&&(e.duration=0);const n=this._getTransformForUpdate(),i=this.getBearing(),a=n.pitch,o=n.roll,l="bearing"in e?this._normalizeBearing(e.bearing,i):i,c="pitch"in e?+e.pitch:a,u="roll"in e?this._normalizeBearing(e.roll,o):o,d="padding"in e?e.padding:n.padding,h=t.P.convert(e.offset);let p,f;e.around&&(p=t.S.convert(e.around),f=n.locationToScreenPoint(p));const m={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},g=this.cameraHelper.handleEaseTo(n,{bearing:l,pitch:c,roll:u,padding:d,around:p,aroundPoint:f,offsetAsPoint:h,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||i!==l,this._pitching=this._pitching||c!==a,this._rolling=this._rolling||u!==o,this._padding=!n.isPaddingEqual(d),this._zooming=this._zooming||g.isZooming,this._easeId=e.easeId,this._prepareEase(r,e.noMoveStart,m),this.terrain&&this._prepareElevation(g.elevationCenter),this._ease((t=>{g.easeFunc(t),this.terrain&&!e.freezeElevation&&this._updateElevation(t),this._applyUpdatedTransform(n),this._fireMoveEvents(r)}),(t=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r,t)}),e),this}_prepareEase(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,r||n.moving||this.fire(new t.l("movestart",e)),this._zooming&&!n.zooming&&this.fire(new t.l("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new t.l("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new t.l("pitchstart",e)),this._rolling&&!n.rolling&&this.fire(new t.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const r=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&r!==this._elevationTarget){const t=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(t-(r-(t*e+this._elevationStart))/(1-e)),this._elevationTarget=r}this.transform.setElevation(t.C.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const t=e.getCameraLngLat(),r=e.getCameraAltitude(),n=this.terrain?this.terrain.getElevationForLngLatZoom(t,e.zoom):0;if(r<n){const r=this.calculateCameraOptionsFromTo(t,n,e.center,e.elevation);return{pitch:r.pitch,zoom:r.zoom}}return{}}_applyUpdatedTransform(e){const t=[];if(t.push((e=>this._elevateCameraIfInsideTerrain(e))),this.transformCameraUpdate&&t.push((e=>this.transformCameraUpdate(e))),!t.length)return;const r=e.clone();for(const n of t){const e=r.clone(),{center:t,zoom:i,roll:a,pitch:s,bearing:o,elevation:l}=n(e);t&&e.setCenter(t),void 0!==l&&e.setElevation(l),void 0!==i&&e.setZoom(i),void 0!==a&&e.setRoll(a),void 0!==s&&e.setPitch(s),void 0!==o&&e.setBearing(o),r.apply(e)}this.transform.apply(r)}_fireMoveEvents(e){this.fire(new t.l("move",e)),this._zooming&&this.fire(new t.l("zoom",e)),this._rotating&&this.fire(new t.l("rotate",e)),this._pitching&&this.fire(new t.l("pitch",e)),this._rolling&&this.fire(new t.l("roll",e))}_afterEase(e,r){if(this._easeId&&r&&this._easeId===r)return;delete this._easeId;const n=this._zooming,i=this._rotating,a=this._pitching,s=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,n&&this.fire(new t.l("zoomend",e)),i&&this.fire(new t.l("rotateend",e)),a&&this.fire(new t.l("pitchend",e)),s&&this.fire(new t.l("rollend",e)),this.fire(new t.l("moveend",e))}flyTo(e,r){if(!e.essential&&s.prefersReducedMotion){const n=t.Q(e,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(n,r)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.cn},e);const n=this._getTransformForUpdate(),i=n.bearing,a=n.pitch,o=n.roll,l=n.padding,c="bearing"in e?this._normalizeBearing(e.bearing,i):i,u="pitch"in e?+e.pitch:a,d="roll"in e?this._normalizeBearing(e.roll,o):o,h="padding"in e?e.padding:n.padding,p=t.P.convert(e.offset);let f=n.centerPoint.add(p);const m=n.screenPointToLocation(f),g=this.cameraHelper.handleFlyTo(n,{bearing:c,pitch:u,roll:d,padding:h,locationAtOffset:m,offsetAsPoint:p,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let v=e.curve;const x=Math.max(n.width,n.height),y=x/g.scaleOfZoom,b=g.pixelPathLength;"number"==typeof g.scaleOfMinZoom&&(v=Math.sqrt(x/g.scaleOfMinZoom/b*2));const w=v*v;function _(e){const t=(y*y-x*x+(e?-1:1)*w*w*b*b)/(2*(e?y:x)*w*b);return Math.log(Math.sqrt(t*t+1)-t)}function k(e){return(Math.exp(e)-Math.exp(-e))/2}function S(e){return(Math.exp(e)+Math.exp(-e))/2}const j=_(!1);let E=function(e){return S(j)/S(j+v*e)},C=function(e){return x*((S(j)*(k(t=j+v*e)/S(t))-k(j))/w)/b;var t},N=(_(!0)-j)/v;if(Math.abs(b)<2e-6||!isFinite(N)){if(Math.abs(x-y)<1e-6)return this.easeTo(e,r);const t=y<x?-1:1;N=Math.abs(Math.log(y/x))/v,C=()=>0,E=e=>Math.exp(t*v*e)}return e.duration="duration"in e?+e.duration:1e3*N/("screenSpeed"in e?+e.screenSpeed/v:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=i!==c,this._pitching=u!==a,this._rolling=d!==o,this._padding=!n.isPaddingEqual(h),this._prepareEase(r,!1),this.terrain&&this._prepareElevation(g.targetCenter),this._ease((s=>{const m=s*N,v=1/E(m),x=C(m);this._rotating&&n.setBearing(t.C.number(i,c,s)),this._pitching&&n.setPitch(t.C.number(a,u,s)),this._rolling&&n.setRoll(t.C.number(o,d,s)),this._padding&&(n.interpolatePadding(l,h,s),f=n.centerPoint.add(p)),g.easeFunc(s,v,x,f),this.terrain&&!e.freezeElevation&&this._updateElevation(s),this._applyUpdatedTransform(n),this._fireMoveEvents(r)}),(()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){var r;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}return e||null===(r=this.handlers)||void 0===r||r.stop(!1),this}_ease(e,t,r){!1===r.animate||0===r.duration?(e(1),t()):(this._easeStart=s.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,r){e=t.aN(e,-180,180);const n=Math.abs(e-r);return Math.abs(e-360-r)<n&&(e-=360),Math.abs(e+360-r)<n&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(t.S.convert(e),this.transform.tileZoom):null}}const Aa={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ma{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa;this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=e=>{!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=o.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=o.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const r=this._map._getUIString(`AttributionControl.${t}`);e.title=r,e.setAttribute("aria-label",r)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const n in t){const r=t[n];if(r.used||r.usedForTerrain){const t=r.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter((e=>String(e).trim())),e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,r)=>{for(let n=r+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0}));const r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=o.sanitize(r),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ia{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._updateCompact=()=>{const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=o.create("div","maplibregl-ctrl");const t=o.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Oa{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,r=t?this._queue.concat(t):this._queue;for(const n of r)if(n.id===e)return void(n.cancelled=!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const r of t)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Da=t.aI([{name:"a_pos3d",type:"Int16",components:3}]);class Ra extends t.E{constructor(e){super(),this._lastTilesetChange=s.now(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,r){this.sourceCache.update(e,r),this._renderableTilesKeys=[];const n={};for(const i of xe(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:r,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))n[i.key]=!0,this._renderableTilesKeys.push(i.key),this._tiles[i.key]||(i.terrainRttPosMatrix32f=new Float64Array(16),t.bX(i.terrainRttPosMatrix32f,0,t.$,t.$,0,0,1),this._tiles[i.key]=new ie(i,this.tileSize),this._lastTilesetChange=s.now());for(const t in this._tiles)n[t]||delete this._tiles[t]}freeRtt(e){for(const t in this._tiles){const r=this._tiles[t];(!e||r.tileID.equals(e)||r.tileID.isChildOf(e)||e.isChildOf(r.tileID))&&(r.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,t){return t?this._getTerrainCoordsForTileRanges(e,t):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const r={};for(const n of this._renderableTilesKeys){const i=this._tiles[n].tileID,a=e.clone(),s=t.b9();if(i.canonical.equals(e.canonical))t.bX(s,0,t.$,t.$,0,0,1);else if(i.canonical.isChildOf(e.canonical)){const r=i.canonical.z-e.canonical.z,n=i.canonical.x-(i.canonical.x>>r<<r),a=i.canonical.y-(i.canonical.y>>r<<r),o=t.$>>r;t.bX(s,0,o,o,0,0,1),t.M(s,s,[-n*o,-a*o,0])}else{if(!e.canonical.isChildOf(i.canonical))continue;{const r=e.canonical.z-i.canonical.z,n=e.canonical.x-(e.canonical.x>>r<<r),a=e.canonical.y-(e.canonical.y>>r<<r),o=t.$>>r;t.bX(s,0,t.$,t.$,0,0,1),t.M(s,s,[n*o,a*o,0]),t.N(s,s,[1/2**r,1/2**r,0])}}a.terrainRttPosMatrix32f=new Float32Array(s),r[n]=a}return r}_getTerrainCoordsForTileRanges(e,r){const n={};for(const i of this._renderableTilesKeys){const a=this._tiles[i].tileID;if(!this._isWithinTileRanges(a,r))continue;const s=e.clone(),o=t.b9();if(a.canonical.z===e.canonical.z){const r=e.canonical.x-a.canonical.x,n=e.canonical.y-a.canonical.y;t.bX(o,0,t.$,t.$,0,0,1),t.M(o,o,[r*t.$,n*t.$,0])}else if(a.canonical.z>e.canonical.z){const r=a.canonical.z-e.canonical.z,n=a.canonical.x-(a.canonical.x>>r<<r),i=a.canonical.y-(a.canonical.y>>r<<r),s=e.canonical.x-(a.canonical.x>>r),l=e.canonical.y-(a.canonical.y>>r),c=t.$>>r;t.bX(o,0,c,c,0,0,1),t.M(o,o,[-n*c+s*t.$,-i*c+l*t.$,0])}else{const r=e.canonical.z-a.canonical.z,n=e.canonical.x-(e.canonical.x>>r<<r),i=e.canonical.y-(e.canonical.y>>r<<r),s=(e.canonical.x>>r)-a.canonical.x,l=(e.canonical.y>>r)-a.canonical.y,c=t.$<<r;t.bX(o,0,c,c,0,0,1),t.M(o,o,[n*t.$+s*c,i*t.$+l*c,0])}s.terrainRttPosMatrix32f=new Float32Array(o),n[i]=s}return n}getSourceTile(e,t){const r=this.sourceCache._source;let n=e.overscaledZ-this.deltaZoom;if(n>r.maxzoom&&(n=r.maxzoom),n<r.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(n).key);let i=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!i||!i.dem)&&t)for(;n>=r.minzoom&&(!i||!i.dem);)i=this.sourceCache.getTileByID(e.scaledTo(n--).key);return i}anyTilesAfterTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this._lastTilesetChange>=e}_isWithinTileRanges(e,t){return t[e.canonical.z]&&e.canonical.x>=t[e.canonical.z].minTileX&&e.canonical.x<=t[e.canonical.z].maxTileX&&e.canonical.y>=t[e.canonical.z].minTileY&&e.canonical.y<=t[e.canonical.z].maxTileY}}class La{constructor(e,t,r){this._meshCache={},this.painter=e,this.sourceCache=new Ra(t),this.options=r,this.exaggeration="number"==typeof r.exaggeration?r.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.$;var a;if(!(r>=0&&r<i&&n>=0&&n<i))return 0;const s=this.getTerrainData(e),o=null===(a=s.tile)||void 0===a?void 0:a.dem;if(!o)return 0;const l=t.cr([],[r/i*t.$,n/i*t.$],s.u_terrain_matrix),c=[l[0]*o.dim,l[1]*o.dim],u=Math.floor(c[0]),d=Math.floor(c[1]),h=c[0]-u,p=c[1]-d;return o.get(u,d)*(1-h)*(1-p)+o.get(u+1,d)*h*(1-p)+o.get(u,d+1)*(1-h)*p+o.get(u+1,d+1)*h*p}getElevationForLngLatZoom(e,r){if(!t.cs(r,e.wrap()))return 0;const{tileID:n,mercatorX:i,mercatorY:a}=this._getOverscaledTileIDFromLngLatZoom(e,r);return this.getElevation(n,i%t.$,a%t.$,t.$)}getElevation(e,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.$;return this.getDEMElevation(e,r,n,i)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,r=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new t.T(e,r,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new t.T(e,new t.R({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.af([])}const r=this.sourceCache.getSourceTile(e,!0);if(r&&r.dem&&(!r.demTexture||r.needsTerrainPrepare)){const e=this.painter.context;r.demTexture=this.painter.getTileTexture(r.dem.stride),r.demTexture?r.demTexture.update(r.dem.getPixels(),{premultiply:!1}):r.demTexture=new t.T(e,r.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),r.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),r.needsTerrainPrepare=!1}const n=r&&r+r.tileID.key+e.key;if(n&&!this._demMatrixCache[n]){const n=this.sourceCache.sourceCache._source.maxzoom;let i=e.canonical.z-r.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=n?i=e.canonical.z-n:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const a=e.canonical.x-(e.canonical.x>>i<<i),s=e.canonical.y-(e.canonical.y>>i<<i),o=t.ct(new Float64Array(16),[1/(t.$<<i),1/(t.$<<i),0]);t.M(o,o,[a*t.$,s*t.$,0]),this._demMatrixCache[e.key]={matrix:o,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:r&&r.dem&&r.dem.dim||1,u_terrain_matrix:n?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:r&&r.dem&&r.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(r&&r.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:r}}getFramebuffer(e){const r=this.painter,n=r.width/devicePixelRatio,i=r.height/devicePixelRatio;return!this._fbo||this._fbo.width===n&&this._fbo.height===i||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new t.T(r.context,{width:n,height:i,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new t.T(r.context,{width:n,height:i,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=r.context.createFramebuffer(n,i,!0,!1),this._fbo.depthAttachment.set(r.context.createRenderbuffer(r.context.gl.DEPTH_COMPONENT16,n,i))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const r=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,a=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,a+=4)r[a+0]=255&e,r[a+1]=255&t,r[a+2]=e>>8<<4|t>>8,r[a+3]=0;const n=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(r.buffer)),i=new t.T(e,n,e.gl.RGBA,{premultiply:!1});return i.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=i,i}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const r=new Uint8Array(4),n=this.painter.context,i=n.gl,a=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),s=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),o=Math.round(this.painter.height/devicePixelRatio);n.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),i.readPixels(a,o-s-1,1,1,i.RGBA,i.UNSIGNED_BYTE,r),n.bindFramebuffer.set(null);const l=r[0]+(r[2]>>4<<8),c=r[1]+((15&r[2])<<8),u=this.coordsIndex[255-r[3]],d=u&&this.sourceCache.getTileByID(u);if(!d)return null;const h=this._coordsTextureSize,p=(1<<d.tileID.canonical.z)*h;return new t.a0((d.tileID.canonical.x*h+l)/p+d.tileID.wrap,(d.tileID.canonical.y*h+c)/p,this.getElevation(d.tileID,l,c,h))}depthAtPoint(e){const t=new Uint8Array(4),r=this.painter.context,n=r.gl;return r.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),n.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,n.RGBA,n.UNSIGNED_BYTE,t),r.bindFramebuffer.set(null),(t[0]/16777216+t[1]/65536+t[2]/256+t[3])/256}getTerrainMesh(e){var r;const n=(null===(r=this.painter.style.projection)||void 0===r?void 0:r.transitionState)>0,i=n&&0===e.canonical.y,a=n&&e.canonical.y===(1<<e.canonical.z)-1,s=`m_${i?"n":""}_${a?"s":""}`;if(this._meshCache[s])return this._meshCache[s];const o=this.painter.context,l=new t.cu,c=new t.aM,u=this.meshSize,d=t.$/u,h=u*u;for(let t=0;t<=u;t++)for(let e=0;e<=u;e++)l.emplaceBack(e*d,t*d,0);for(let t=0;t<h;t+=u+1)for(let e=0;e<u;e++)c.emplaceBack(e+t,u+e+t+1,u+e+t+2),c.emplaceBack(e+t,u+e+t+2,e+t+1);const p=l.length,f=p+(u+1),m=(u+1)*u,g=i?t.bg:0,v=i?0:1,x=a?t.bh:t.$,y=a?0:1;for(let t=0;t<=u;t++)l.emplaceBack(t*d,g,v);for(let t=0;t<=u;t++)l.emplaceBack(t*d,x,y);for(let t=0;t<u;t++)c.emplaceBack(m+t,f+t,f+t+1),c.emplaceBack(m+t,f+t+1,m+t+1),c.emplaceBack(0+t,p+t+1,p+t),c.emplaceBack(0+t,0+t+1,p+t+1);const b=l.length,w=b+2*(u+1);for(const k of[0,1])for(let e=0;e<=u;e++)for(const r of[0,1])l.emplaceBack(k*t.$,e*d,r);for(let t=0;t<2*u;t+=2)c.emplaceBack(b+t,b+t+1,b+t+3),c.emplaceBack(b+t,b+t+3,b+t+2),c.emplaceBack(w+t,w+t+3,w+t+1),c.emplaceBack(w+t,w+t+2,w+t+3);const _=new _t(o.createVertexBuffer(l,Da.members),o.createIndexBuffer(c),t.aL.simpleSegment(0,0,l.length,c.length));return this._meshCache[s]=_,_}getMeshFrameDelta(e){return 2*Math.PI*t.bt/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,t){var r;const{tileID:n}=this._getOverscaledTileIDFromLngLatZoom(e,t);return null!==(r=this.getMinMaxElevation(n).minElevation)&&void 0!==r?r:0}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,r={minElevation:null,maxElevation:null};return t&&t.dem&&(r.minElevation=t.dem.min*this.exaggeration,r.maxElevation=t.dem.max*this.exaggeration),r}_getOverscaledTileIDFromLngLatZoom(e,r){const n=t.a0.fromLngLat(e.wrap()),i=(1<<r)*t.$,a=n.x*i,s=n.y*i,o=Math.floor(a/t.$),l=Math.floor(s/t.$);return{tileID:new t.Z(r,0,r,o,l),mercatorX:a,mercatorY:s}}}class Fa{constructor(e,t,r){this._context=e,this._size=t,this._tileSize=r,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const r=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),n=new t.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return n.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),r.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),r.colorAttachment.set(n.texture),{id:e,fbo:r,texture:n,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((t=>e.id!==t)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const t of this._recentlyUsed)if(!this._objects[t].inUse)return this._objects[t];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((e=>!e.inUse))}}const $a={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Ba{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new Fa(e.context,30,t.sourceCache.tileSize*t.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter((r=>!e._layers[r].isHidden(t))),this._coordsAscending={};for(const r in e.sourceCaches){this._coordsAscending[r]={};const t=e.sourceCaches[r].getVisibleCoordinates(),n=e.sourceCaches[r].getSource(),i=n instanceof Z?n.terrainTileRanges:null;for(const e of t){const t=this.terrain.sourceCache.getTerrainCoords(e,i);for(const e in t)this._coordsAscending[r][e]||(this._coordsAscending[r][e]=[]),this._coordsAscending[r][e].push(t[e])}}this._coordsAscendingStr={};for(const r of e._order){const t=e._layers[r],n=t.source;if($a[t.type]&&!this._coordsAscendingStr[n]){this._coordsAscendingStr[n]={};for(const e in this._coordsAscending[n])this._coordsAscendingStr[n][e]=this._coordsAscending[n][e].map((e=>e.key)).sort().join()}}for(const r of this._renderableTiles)for(const e in this._coordsAscendingStr){const t=this._coordsAscendingStr[e][r.tileID.key];t&&t!==r.rttCoords[e]&&(r.rtt=[])}}renderLayer(e,r){if(e.isHidden(this.painter.transform.zoom))return!1;const n=Object.assign(Object.assign({},r),{isRenderingToTexture:!0}),i=e.type,a=this.painter,s=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if($a[i]&&(this._prevType&&$a[this._prevType]||this._stacks.push([]),this._prevType=i,this._stacks[this._stacks.length-1].push(e.id),!s))return!0;if($a[this._prevType]||$a[i]&&s){this._prevType=i;const e=this._stacks.length-1,r=this._stacks[e]||[];for(const i of this._renderableTiles){if(this.pool.isFull()&&(ji(this.painter,this.terrain,this._rttTiles,n),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(i),i.rtt[e]){const t=this.pool.getObjectForId(i.rtt[e].id);if(t.stamp===i.rtt[e].stamp){this.pool.useObject(t);continue}}const s=this.pool.getOrCreateFreeObject();this.pool.useObject(s),this.pool.stampObject(s),i.rtt[e]={id:s.id,stamp:s.stamp},a.context.bindFramebuffer.set(s.fbo.framebuffer),a.context.clear({color:t.be.transparent,stencil:0}),a.currentStencilSource=void 0;for(let e=0;e<r.length;e++){const t=a.style._layers[r[e]],o=t.source?this._coordsAscending[t.source][i.tileID.key]:[i.tileID];a.context.viewport.set([0,0,s.fbo.width,s.fbo.height]),a._renderTileClippingMasks(t,o,!0),a.renderLayer(a,a.style.sourceCaches[t.source],t,o,n),t.source&&(i.rttCoords[t.source]=this._coordsAscendingStr[t.source][i.tileID.key])}}return ji(this.painter,this.terrain,this._rttTiles,n),this._rttTiles=[],this.pool.freeAllObjects(),$a[i]}return!1}}const za={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ua=r,Va={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Aa,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Ha={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ga{constructor(e,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.mousedown=e=>{this.startMove(e,o.mousePos(this.element,e)),o.addEventListener(window,"mousemove",this.mousemove),o.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=e=>{this.move(e,o.mousePos(this.element,e))},this.mouseup=e=>{this._rotatePitchHanlder.dragEnd(e),this.offTemp()},this.touchstart=e=>{1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,e.targetTouches)[0],this.startMove(e,this._startPos),o.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),o.addEventListener(window,"touchend",this.touchend))},this.touchmove=e=>{1!==e.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,e.targetTouches)[0],this.move(e,this._lastPos))},this.touchend=e=>{0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=r;const i=new ra;this._rotatePitchHanlder=new Yi({clickTolerance:3,move:(e,i)=>{const a=r.getBoundingClientRect(),s=new t.P((a.bottom-a.top)/2,(a.right-a.left)/2);return{bearingDelta:t.cm(new t.P(e.x,i.y),i,s),pitchDelta:n?-.5*(i.y-e.y):void 0}},moveStateManager:i,enable:!0,assignEvents:()=>{}}),this.map=e,o.addEventListener(r,"mousedown",this.mousedown),o.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(r,"touchcancel",this.reset)}startMove(e,t){this._rotatePitchHanlder.dragStart(e,t),o.disableDrag()}move(e,t){const r=this.map,{bearingDelta:n,pitchDelta:i}=this._rotatePitchHanlder.dragMove(e,t)||{};n&&r.setBearing(r.getBearing()+n),i&&r.setPitch(r.getPitch()+i)}off(){const e=this.element;o.removeEventListener(e,"mousedown",this.mousedown),o.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),o.removeEventListener(window,"touchend",this.touchend),o.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(window,"mousemove",this.mousemove),o.removeEventListener(window,"mouseup",this.mouseup),o.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),o.removeEventListener(window,"touchend",this.touchend)}}let Wa;function qa(e,r,n){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]||!n.getCoveringTilesDetailsProvider().allowWorldCopies())return null==e?void 0:e.wrap();const i=new t.S(e.lng,e.lat);if(e=new t.S(e.lng,e.lat),r){const i=new t.S(e.lng-360,e.lat),a=new t.S(e.lng+360,e.lat),s=n.locationToScreenPoint(e).distSqr(r);n.locationToScreenPoint(i).distSqr(r)<s?e=i:n.locationToScreenPoint(a).distSqr(r)<s&&(e=a)}for(;Math.abs(e.lng-n.center.lng)>180;){const t=n.locationToScreenPoint(e);if(t.x>=0&&t.y>=0&&t.x<=n.width&&t.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e.lng!==i.lng&&n.isPointOnMapSurface(n.locationToScreenPoint(e))?e:i}const Ka={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Za(e,t,r){const n=e.classList;for(const i in Ka)n.remove(`maplibregl-${r}-anchor-${i}`);n.add(`maplibregl-${r}-anchor-${t}`)}class Ya extends t.E{constructor(e){if(super(),this._onKeyPress=e=>{const t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()},this._onMapClick=e=>{const t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()},this._update=e=>{if(!this._map)return;const t=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==e?void 0:e.type)||"render"===(null==e?void 0:e.type)&&!t)&&this._map.once("render",this._update),this._lngLat=qa(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let r="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?r=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(r=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||e&&"moveend"!==e.type||(this._pos=this._pos.round()),o.setTransform(this._element,`${Ka[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${r}`),s.frameAsync(new AbortController).then((()=>{this._updateOpacity(e&&"moveend"===e.type)})).catch((()=>{}))},this._onMove=e=>{if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.l("dragstart"))),this.fire(new t.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.l("dragend")),this._state="inactive"},this._addDragHandler=e=>{this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,this.setOpacity(null==e?void 0:e.opacity,null==e?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=t.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div");const r=o.createNS("http://www.w3.org/2000/svg","svg"),n=41,i=27;r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height",`${n}px`),r.setAttributeNS(null,"width",`${i}px`),r.setAttributeNS(null,"viewBox",`0 0 ${i} ${n}`);const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=o.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=o.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const d=o.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(d);const h=o.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25"),h.setAttributeNS(null,"fill","#000000");const p=o.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),h.appendChild(p);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=o.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const v=o.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#FFFFFF"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(v),s.appendChild(l),s.appendChild(u),s.appendChild(h),s.appendChild(f),s.appendChild(m),r.appendChild(s),r.setAttributeNS(null,"height",n*this._scale+"px"),r.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(r),this._offset=t.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),Za(this._element,this._anchor,"marker"),e&&e.className)for(const t of e.className.split(" "))this._element.classList.add(t);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.S.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,r=13.5,n=Math.abs(r)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[n,-1*(t-r+n)],"bottom-right":[-n,-1*(t-r+n)],left:[r,-1*(t-r)],right:[-13.5,-1*(t-r)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r,n;const i=null===(r=this._map)||void 0===r?void 0:r.terrain,a=this._map.transform.isLocationOccluded(this._lngLat);if(!i||a){const e=a?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==e&&(this._element.style.opacity=e))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const s=this._map,o=s.terrain.depthAtPoint(this._pos),l=s.terrain.getElevationForLngLatZoom(this._lngLat,s.transform.tileZoom);if(s.transform.lngLatToCameraDepth(this._lngLat,l)-o<.006)return void(this._element.style.opacity=this._opacity);const c=-this._offset.y/s.transform.pixelsPerMeter,u=Math.sin(s.getPitch()*Math.PI/180)*c,d=s.terrain.depthAtPoint(new t.P(this._pos.x,this._pos.y-this._offset.y)),h=s.transform.lngLatToCameraDepth(this._lngLat,l+u)-d>.006;(null===(n=this._popup)||void 0===n?void 0:n.isOpen())&&h&&this._popup.remove(),this._element.style.opacity=h?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=t.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,t){return(void 0===this._opacity||void 0===e&&void 0===t)&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==e&&(this._opacity=e),void 0!==t&&(this._opacityWhenCovered=t),this._map&&this._updateOpacity(!0),this}}const Xa={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Qa=0,Ja=!1;const es={maxWidth:100,unit:"metric"};function ts(e,t,r){const n=r&&r.maxWidth||100,i=e._container.clientHeight/2,a=e._container.clientWidth/2,s=e.unproject([a-n/2,i]),o=e.unproject([a+n/2,i]),l=Math.round(e.project(o).x-e.project(s).x),c=Math.min(n,l,e._container.clientWidth),u=s.distanceTo(o);if(r&&"imperial"===r.unit){const r=3.2808*u;r>5280?rs(t,c,r/5280,e._getUIString("ScaleControl.Miles")):rs(t,c,r,e._getUIString("ScaleControl.Feet"))}else r&&"nautical"===r.unit?rs(t,c,u/1852,e._getUIString("ScaleControl.NauticalMiles")):u>=1e3?rs(t,c,u/1e3,e._getUIString("ScaleControl.Kilometers")):rs(t,c,u,e._getUIString("ScaleControl.Meters"))}function rs(e,t,r,n){const i=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}(r);e.style.width=t*(i/r)+"px",e.innerHTML=`${i}&nbsp;${n}`}const ns={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},is=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function as(e){if(e){if("number"==typeof e){const r=Math.round(Math.abs(e)/Math.SQRT2);return{center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(r,r),"top-right":new t.P(-r,r),bottom:new t.P(0,-e),"bottom-left":new t.P(r,-r),"bottom-right":new t.P(-r,-r),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){const r=t.P.convert(e);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return as(new t.P(0,0))}const ss=r;e.AJAXError=t.cy,e.Event=t.l,e.Evented=t.E,e.LngLat=t.S,e.MercatorCoordinate=t.a0,e.Point=t.P,e.addProtocol=t.cz,e.config=t.a,e.removeProtocol=t.cA,e.AttributionControl=Ma,e.BoxZoomHandler=Gi,e.CanvasSource=X,e.CooperativeGesturesHandler=ja,e.DoubleClickZoomHandler=ya,e.DragPanHandler=_a,e.DragRotateHandler=ka,e.EdgeInsets=Ct,e.FullscreenControl=class extends t.E{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._onFullscreenChange=()=>{var e;let t=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.fullscreenElement;)t=t.shadowRoot.fullscreenElement;t===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const e=this._fullscreenButton=o.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);o.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new t.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},e.GeoJSONSource=K,e.GeolocateControl=class extends t.E{constructor(e){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new t.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const r=new t.S(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,i=this._map.getBearing(),a=t.e({bearing:i},this.options.fitBoundsOptions),s=V.fromLngLat(r,n);this._map.fitBounds(s,a,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const r=new t.S(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Ja)return;this.options.trackUserLocation&&this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new t.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o.create("button","maplibregl-ctrl-geolocate",this._container),o.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ya({element:this._dotElement}),this._circleElement=o.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ya({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new t.l("trackuserlocationend")),this.fire(new t.l("userlocationlostfocus")))}))}},this.options=t.e({},Xa,e)}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return t._(this,arguments,void 0,(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){if(void 0!==Wa&&!e)return Wa;if(void 0===window.navigator.permissions)return Wa=!!window.navigator.geolocation,Wa;try{const e=yield window.navigator.permissions.query({name:"geolocation"});Wa="denied"!==e.state}catch(e){Wa=!!window.navigator.geolocation}return Wa}()}))}().then((e=>this._finishSetupUI(e))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Qa=0,Ja=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),r=e.coords;return t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const e=this._map.getBounds(),t=e.getSouthEast(),r=e.getNorthEast(),n=t.distanceTo(r),i=Math.ceil(this._accuracy/(n/this._map._container.clientHeight)*2);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qa--,Ja=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.l("trackuserlocationstart")),this.fire(new t.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Qa++,Qa>1?(e={maximumAge:6e5,timeout:0},Ja=!0):(e=this.options.positionOptions,Ja=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},e.GlobeControl=class{constructor(){this._toggleProjection=()=>{var e;const t=null===(e=this._map.getProjection())||void 0===e?void 0:e.type;this._map.setProjection("mercator"!==t&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var e;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),"globe"===(null===(e=this._map.getProjection())||void 0===e?void 0:e.type)?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=o.create("button","maplibregl-ctrl-globe",this._container),o.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},e.Hash=Ti,e.ImageSource=Z,e.KeyboardHandler=fa,e.LngLatBounds=V,e.LogoControl=Ia,e.Map=class extends Pa{constructor(e){var r,n;t.cv.mark(t.cw.create);const i=Object.assign(Object.assign(Object.assign({},Va),e),{canvasContextAttributes:Object.assign(Object.assign({},Va.canvasContextAttributes),e.canvasContextAttributes)});if(null!=i.minZoom&&null!=i.maxZoom&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=i.minPitch&&null!=i.maxPitch&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=i.minPitch&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=i.maxPitch&&i.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const a=new Ot,s=new Ft;if(void 0!==i.minZoom&&a.setMinZoom(i.minZoom),void 0!==i.maxZoom&&a.setMaxZoom(i.maxZoom),void 0!==i.minPitch&&a.setMinPitch(i.minPitch),void 0!==i.maxPitch&&a.setMaxPitch(i.maxPitch),void 0!==i.renderWorldCopies&&a.setRenderWorldCopies(i.renderWorldCopies),super(a,s,{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Oa,this._controls=[],this._mapId=t.a6(),this._contextLost=e=>{e.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new t.l("webglcontextlost",{originalEvent:e}))},this._contextRestored=e=>{this._setupPainter(),this.resize(),this._update(),this.fire(new t.l("webglcontextrestored",{originalEvent:e}))},this._onMapScroll=e=>{if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},i.canvasContextAttributes),this._trackResize=!0===i.trackResize,this._bearingSnap=i.bearingSnap,this._centerClampedToGround=i.centerClampedToGround,this._refreshExpiredTiles=!0===i.refreshExpiredTiles,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=!0===i.crossSourceCollisions,this._collectResourceTiming=!0===i.collectResourceTiming,this._locale=Object.assign(Object.assign({},za),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===i.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=f.addThrottleControl((()=>this.isMoving())),this._requestManager=new m(i.transformRequest),"string"==typeof i.container){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let e=!1;const t=Ni((e=>{this._trackResize&&!this._removed&&(this.resize(e),this.redraw())}),50);this._resizeObserver=new ResizeObserver((r=>{e?t(r):e=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Ta(this,i),this._hash=i.hash&&new Ti("string"==typeof i.hash&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,elevation:i.elevation,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch,roll:i.roll}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,t.e({},i.fitBoundsOptions,{duration:0}))));const o="string"==typeof i.style||!("globe"===(null===(n=null===(r=i.style)||void 0===r?void 0:r.projection)||void 0===n?void 0:n.type));this.resize(null,o),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new Ma("boolean"==typeof i.attributionControl?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new Ia,i.logoPosition),this.on("style.load",(()=>{if(o||this._resizeTransform(),this.transform.unmodified){const e=t.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(e)}})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.l(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.l(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.l("sourcedataabort",e))}))}_getMapId(){return this._mapId}setGlobalStateProperty(e,t){return this.style.setGlobalStateProperty(e,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(e,r){if(void 0===r&&(r=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[r];return-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(e);return r>-1&&this._controls.splice(r,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,r,n){return null==n&&this.terrain&&(n=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(e,t,r,n)}resize(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[n,i]=this._containerDimensions(),a=this._getClampedPixelRatio(n,i);if(this._resizeCanvas(n,i,a),this.painter.resize(n,i,a),this.painter.overLimit()){const e=this.painter.context.gl;this._maxCanvasSize=[e.drawingBufferWidth,e.drawingBufferHeight];const t=this._getClampedPixelRatio(n,i);this._resizeCanvas(n,i,t),this.painter.resize(n,i,t)}this._resizeTransform(r);const s=!this._moving;return s&&(this.stop(),this.fire(new t.l("movestart",e)).fire(new t.l("move",e))),this.fire(new t.l("resize",e)),s&&this.fire(new t.l("moveend",e)),this}_resizeTransform(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;const[r,n]=this._containerDimensions();this.transform.resize(r,n,e),null===(t=this._requestedCameraState)||void 0===t||t.resize(r,n,e)}_getClampedPixelRatio(e,t){const{0:r,1:n}=this._maxCanvasSize,i=this.getPixelRatio(),a=e*i,s=t*i;return Math.min(a>r?r/a:1,s>n?n/s:1)*i}getPixelRatio(){var e;return null!==(e=this._overridePixelRatio)&&void 0!==e?e:devicePixelRatio}setPixelRatio(e){this._overridePixelRatio=e,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(V.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.setMinZoom(e),this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.setMaxZoom(e),this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.setMinPitch(e),this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>180)throw new Error("maxPitch must be less than or equal to 180");if(e>=this.transform.minPitch)return this.transform.setMaxPitch(e),this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.setRenderWorldCopies(e),this._update()}project(e){return this.transform.locationToScreenPoint(t.S.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.screenPointToLocation(t.P.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,r){if("mouseenter"===e||"mouseover"===e){let n=!1;const i=i=>{const a=t.filter((e=>this.getLayer(e))),s=0!==a.length?this.queryRenderedFeatures(i.point,{layers:a}):[];s.length?n||(n=!0,r.call(this,new $i(e,this,i.originalEvent,{features:s}))):n=!1};return{layers:t,listener:r,delegates:{mousemove:i,mouseout:()=>{n=!1}}}}if("mouseleave"===e||"mouseout"===e){let n=!1;const i=i=>{const a=t.filter((e=>this.getLayer(e)));(0!==a.length?this.queryRenderedFeatures(i.point,{layers:a}):[]).length?n=!0:n&&(n=!1,r.call(this,new $i(e,this,i.originalEvent)))},a=t=>{n&&(n=!1,r.call(this,new $i(e,this,t.originalEvent)))};return{layers:t,listener:r,delegates:{mousemove:i,mouseout:a}}}{const n=e=>{const n=t.filter((e=>this.getLayer(e))),i=0!==n.length?this.queryRenderedFeatures(e.point,{layers:n}):[];i.length&&(e.features=i,r.call(this,e),delete e.features)};return{layers:t,listener:r,delegates:{[e]:n}}}}_saveDelegatedListener(e,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(t)}_removeDelegatedListener(e,t,r){if(!this._delegatedListeners||!this._delegatedListeners[e])return;const n=this._delegatedListeners[e];for(let i=0;i<n.length;i++){const e=n[i];if(e.listener===r&&e.layers.length===t.length&&e.layers.every((e=>t.includes(e)))){for(const t in e.delegates)this.off(t,e.delegates[t]);return void n.splice(i,1)}}}on(e,t,r){if(void 0===r)return super.on(e,t);const n="string"==typeof t?[t]:t,i=this._createDelegatedListener(e,n,r);this._saveDelegatedListener(e,i);for(const a in i.delegates)this.on(a,i.delegates[a]);return{unsubscribe:()=>{this._removeDelegatedListener(e,n,r)}}}once(e,t,r){var n=this;if(void 0===r)return super.once(e,t);const i="string"==typeof t?[t]:t,a=this._createDelegatedListener(e,i,r);for(const s in a.delegates){const t=a.delegates[s];a.delegates[s]=function(){n._removeDelegatedListener(e,i,r),t(...arguments)}}this._saveDelegatedListener(e,a);for(const s in a.delegates)this.once(s,a.delegates[s]);return this}off(e,t,r){return void 0===r?super.off(e,t):(this._removeDelegatedListener(e,"string"==typeof t?[t]:t,r),this)}queryRenderedFeatures(e,r){if(!this.style)return[];let n;const i=e instanceof t.P||Array.isArray(e),a=i?e:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(i?{}:e)||{},a instanceof t.P||"number"==typeof a[0])n=[t.P.convert(a)];else{const e=t.P.convert(a[0]),r=t.P.convert(a[1]);n=[e,new t.P(r.x,e.y),r,new t.P(e.x,r.y),e]}return this.style.queryRenderedFeatures(n,r,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,r){return!1!==(r=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(e,r))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){var r,n;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(e,t)));const i=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new _r(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,i):this.style.loadJSON(e,t,i),this):(null===(n=null===(r=this.style)||void 0===r?void 0:r.projection)||void 0===n||n.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new _r(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,r){if("string"==typeof e){const n=this._requestManager.transformRequest(e,"Style");t.j(n,new AbortController).then((e=>{this._updateDiff(e.data,r)})).catch((e=>{e&&this.fire(new t.k(e))}))}else"object"==typeof e&&this._updateDiff(e,r)}_updateDiff(e,r){try{this.style.setState(e,r)&&this._update(!0)}catch(n){t.w(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(e,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const r=this.style&&this.style.sourceCaches[e];if(void 0!==r)return r.loaded();this.fire(new t.k(new Error(`There is no source with ID '${e}'`)))}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const r=this.style.sourceCaches[e.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);null===this.terrain&&r.reload();for(const n in this.style._layers){const r=this.style._layers[n];"hillshade"===r.type&&r.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),"color-relief"===r.type&&r.source===e.source&&t.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new La(this.painter,r,e),this.painter.renderToTexture=new Ba(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=t=>{var r;"style"===t.dataType?this.terrain.sourceCache.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),"image"===(null===(r=t.source)||void 0===r?void 0:r.type)?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new t.l("terrain",{terrain:e})),this}getTerrain(){var e,t;return null!==(t=null===(e=this.terrain)||void 0===e?void 0:e.options)&&void 0!==t?t:null}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const r=e[t]._tiles;for(const e in r){const t=r[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}setSourceTileLodParams(e,t,r){if(r){const n=this.getSource(r);if(!n)throw new Error(`There is no source with ID "${r}", cannot set LOD parameters`);n.calculateTileZoom=me(Math.max(1,e),Math.max(1,t))}else for(const n in this.style.sourceCaches)this.style.sourceCaches[n].getSource().calculateTileZoom=me(Math.max(1,e),Math.max(1,t));return this._update(!0),this}refreshTiles(e,r){const n=this.style.sourceCaches[e];if(!n)throw new Error(`There is no source cache with ID "${e}", cannot refresh tile`);void 0===r?n.reload(!0):n.refreshTiles(r.map((e=>new t.a3(e.z,e.x,e.y))))}addImage(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{pixelRatio:i=1,sdf:a=!1,stretchX:o,stretchY:l,content:c,textFitWidth:u,textFitHeight:d}=n;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||t.b(r))){if(void 0===r.width||void 0===r.height)return this.fire(new t.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:n,height:s,data:h}=r,p=r;return this.style.addImage(e,{data:new t.R({width:n,height:s},new Uint8Array(h)),pixelRatio:i,stretchX:o,stretchY:l,content:c,textFitWidth:u,textFitHeight:d,sdf:a,version:0,userImage:p}),p.onAdd&&p.onAdd(this,e),this}}{const{width:n,height:h,data:p}=s.getImageData(r);this.style.addImage(e,{data:new t.R({width:n,height:h},p),pixelRatio:i,stretchX:o,stretchY:l,content:c,textFitWidth:u,textFitHeight:d,sdf:a,version:0})}}updateImage(e,r){const n=this.style.getImage(e);if(!n)return this.fire(new t.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=r instanceof HTMLImageElement||t.b(r)?s.getImageData(r):r,{width:a,height:o,data:l}=i;if(void 0===a||void 0===o)return this.fire(new t.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==n.data.width||o!==n.data.height)return this.fire(new t.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const c=!(r instanceof HTMLImageElement||t.b(r));return n.data.replace(l,c),this.style.updateImage(e,n),this}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.k(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e){return f.getImage(this._requestManager.transformRequest(e,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}setFilter(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,r),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,r,n),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,r,n),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,r,(e=>{e||this._update(!0)})),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,(e=>{e||this._update(!0)})),this}setLight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSky(e,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=o.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=o.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const r=this._containerDimensions(),n=this._getClampedPixelRatio(r[0],r[1]);this._resizeCanvas(r[0],r[1],n);const i=this._controlContainer=o.create("div","maplibregl-control-container",e),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{a[e]=o.create("div",`maplibregl-ctrl-${e} `,i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,t,r){this._canvas.width=Math.floor(r*e),this._canvas.height=Math.floor(r*t),this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const e=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",(r=>{t={requestedAttributes:e},r&&(t.statusMessage=r.statusMessage,t.type=r.type)}),{once:!0});let r=null;if(r=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,e):this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e),!r){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new Ci(r,this.transform),l.testSupport(r)}migrateProjection(e,r){super.migrateProjection(e,r),this.painter.transform=e,this.fire(new t.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){var r,n,i,a,o;const l=this._idleTriggered?this._fadeDuration:0,c=(null===(r=this.style.projection)||void 0===r?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,r=s.now();this.style.zoomHistory.update(e,r);const n=new t.F(e,{now:r,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),i=n.crossFadingFactor();1===i&&i===this._crossFadingFactor||(u=!0,this._crossFadingFactor=i),this.style.update(n)}const d=(null===(n=this.style.projection)||void 0===n?void 0:n.transitionState)>0!==c;null===(i=this.style.projection)||void 0===i||i.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState(null===(a=this.style.projection)||void 0===a?void 0:a.transitionState,null===(o=this.style.projection)||void 0===o?void 0:o.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||d)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,l,this._crossSourceCollisions,d),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,showPadding:this.showPadding}),this.fire(new t.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.cv.mark(t.cw.load),this.fire(new t.l("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.l("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0,t.cv.mark(t.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),f.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==r?void 0:r.loseContext)&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),o.remove(this._canvasContainer),o.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),t.cv.clearMetrics(),this._removed=!0,this.fire(new t.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,s.frame(this._frameRequest,(e=>{t.cv.frame(e),this._frameRequest=null;try{this._render(e)}catch(e){if(!t.cx(e)&&!function(e){return e.message===Wn}(e))throw e}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get version(){return Ua}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(e){return this._lazyInitEmptyStyle(),this.style.setProjection(e),this._update(!0)}},e.MapMouseEvent=$i,e.MapTouchEvent=Bi,e.MapWheelEvent=zi,e.Marker=Ya,e.NavigationControl=class{constructor(e){this._updateZoomButtons=()=>{const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),r=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,t)=>{const r=this._map._getUIString(`NavigationControl.${t}`);e.title=r,e.setAttribute("aria-label",r)},this.options=t.e({},Ha,e),this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),o.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),o.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=o.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ga(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const r=o.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}},e.Popup=class extends t.E{constructor(e){super(),this._updateOpacity=()=>{void 0!==this.options.locationOccludedOpacity&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new t.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=o.create("div","maplibregl-popup",this._map.getContainer()),this._tip=o.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const e of this.options.className.split(" "))this._container.classList.add(e);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=qa(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const t=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let r=this.options.anchor;const n=as(this.options.offset);if(!r){const e=this._container.offsetWidth,i=this._container.offsetHeight;let a;a=t.y+n.bottom.y<i?["top"]:t.y>this._map.transform.height-i?["bottom"]:[],t.x<e/2?a.push("left"):t.x>this._map.transform.width-e/2&&a.push("right"),r=0===a.length?"bottom":a.join("-")}let i=t.add(n[r]);this.options.subpixelPositioning||(i=i.round()),o.setTransform(this._container,`${Ka[r]} translate(${i.x}px,${i.y}px)`),Za(this._container,r,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=t.e(Object.create(ns),e)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.S.convert(e),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),r=document.createElement("body");let n;for(r.innerHTML=e;n=r.firstChild,n;)t.appendChild(n);return this.setDOMContent(t)}getMaxWidth(){var e;return null===(e=this._container)||void 0===e?void 0:e.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){return this._container&&this._container.classList.add(e),this}removeClassName(e){return this._container&&this._container.classList.remove(e),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}setSubpixelPositioning(e){this.options.subpixelPositioning=e}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(is);e&&e.focus()}},e.RasterDEMTileSource=q,e.RasterTileSource=W,e.ScaleControl=class{constructor(e){this._onMove=()=>{ts(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,ts(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},es),e)}getDefaultPosition(){return"bottom-left"}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},e.ScrollZoomHandler=xa,e.Style=_r,e.TerrainControl=class{constructor(e){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=e}onAdd(e){return this._map=e,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=o.create("button","maplibregl-ctrl-terrain",this._container),o.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){o.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},e.TwoFingersTouchPitchHandler=ha,e.TwoFingersTouchRotateHandler=ua,e.TwoFingersTouchZoomHandler=la,e.TwoFingersTouchZoomRotateHandler=Sa,e.VectorTileSource=G,e.VideoSource=Y,e.addSourceType=(e,r)=>t._(void 0,void 0,void 0,(function*(){if(J(e))throw new Error(`A source type called "${e}" already exists.`);((e,t)=>{Q[e]=t})(e,r)})),e.clearPrewarmedResources=function(){const e=I;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(P),I=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.createTileMesh=Zt,e.getMaxParallelImageRequests=function(){return t.a.MAX_PARALLEL_IMAGE_REQUESTS},e.getRTLTextPluginStatus=function(){return ne().getRTLTextPluginStatus()},e.getVersion=function(){return ss},e.getWorkerCount=function(){return A.workerCount},e.getWorkerUrl=function(){return t.a.WORKER_URL},e.importScriptInWorkers=function(e){return L().broadcast("IS",e)},e.prewarm=function(){D().acquire(P)},e.setMaxParallelImageRequests=function(e){t.a.MAX_PARALLEL_IMAGE_REQUESTS=e},e.setRTLTextPlugin=function(e,t){return ne().setRTLTextPlugin(e,t)},e.setWorkerCount=function(e){A.workerCount=e},e.setWorkerUrl=function(e){t.a.WORKER_URL=e}})),e}()},4079:(e,t,r)=>{var n=r(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,r,n,i){t.push(n?i.replace(a,"$1"):r||e)})),t}));e.exports=s},4160:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},4190:(e,t,r)=>{var n=r(1340);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},4258:(e,t,r)=>{var n=r(5906)();e.exports=n},4262:(e,t,r)=>{var n=r(8895),i=r(4052);e.exports=function(e,t,r){var a=t(e);return i(e)?a:n(a,r(e))}},4288:(e,t)=>{"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function x(){}function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var b=y.prototype=new x;b.constructor=y,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function S(e,t,n,i,a,s){return n=s.ref,{$$typeof:r,type:e,key:t,ref:void 0!==n?n:null,props:s}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(){}function T(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case n:u=!0;break;case h:return T((u=e._init)(e._payload),t,i,a,s)}}if(u)return s=s(e),u=""===a?"."+C(e,0):a,w(s)?(i="",null!=u&&(i=u.replace(E,"$&/")+"/"),T(s,t,i,"",(function(e){return e}))):null!=s&&(j(s)&&(l=s,c=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+u,s=S(l.type,c,void 0,0,0,l.props)),t.push(s)),1;u=0;var d,f=""===a?".":a+":";if(w(e))for(var m=0;m<e.length;m++)u+=T(a=e[m],t,i,o=f+C(a,m),s);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(a=e.next()).done;)u+=T(a=a.value,t,i,o=f+C(a,m++),s);else if("object"===o){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,r){if(null==e)return e;var n=[],i=0;return T(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function I(){}t.Children={map:P,forEach:function(e,t,r){P(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=y,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=m({},e.props),i=e.key;if(null!=t)for(a in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!k.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(n[a]=t[a]);var a=arguments.length-2;if(1===a)n.children=r;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];n.children=s}return S(e.type,i,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,r){var n,i={},a=null;if(null!=t)for(n in void 0!==t.key&&(a=""+t.key),t)k.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(i[n]=t[n]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===i[n]&&(i[n]=s[n]);return S(e,a,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,r={};_.T=r;try{var n=e(),i=_.S;null!==i&&i(r,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(I,M)}catch(a){M(a)}finally{_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,r){return _.H.useActionState(e,t,r)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return _.H.useEffect(e,t)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,r){return _.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return _.H.useReducer(e,t,r)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return _.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return _.H.useTransition()},t.version="19.0.0"},4391:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(7004)},4416:(e,t,r)=>{var n=r(8902),i=r(5866),a=r(1558),s=r(8114),o=r(8182),l=r(2074);e.exports=function(e,t,r){var c=-1,u=i,d=e.length,h=!0,p=[],f=p;if(r)h=!1,u=a;else if(d>=200){var m=t?null:o(e);if(m)return l(m);h=!1,u=s,f=new n}else f=t?[]:p;e:for(;++c<d;){var g=e[c],v=t?t(g):g;if(g=r||0!==g?g:0,h&&v===v){for(var x=f.length;x--;)if(f[x]===v)continue e;t&&f.push(v),p.push(g)}else u(f,v,r)||(f!==p&&f.push(v),p.push(g))}return p}},4543:(e,t,r)=>{e=r.nmd(e);var n=r(6552),i=r(14),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,o=s&&s.exports===a?n.Buffer:void 0,l=(o?o.isBuffer:void 0)||i;e.exports=l},4545:(e,t,r)=>{var n=r(7160);e.exports=function(){this.__data__=new n,this.size=0}},4552:(e,t,r)=>{var n=r(9812),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(l){}var i=s.call(e);return n&&(t?e[o]=r:delete e[o]),i}},4597:(e,t,r)=>{var n=r(2587),i=r(9096),a=r(2165),s=r(4052),o=r(929);e.exports=function(e,t,r){var l=s(e)?n:a;return r&&o(e,t,r)&&(t=void 0),l(e,i(t,3))}},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4664:(e,t,r)=>{var n=r(4258),i=r(8673);e.exports=function(e,t){return e&&n(e,t,i)}},4746:(e,t,r)=>{var n=r(5652);e.exports=function(e,t){var r=!0;return n(e,(function(e,n,i){return r=!!t(e,n,i)})),r}},4757:(e,t,r)=>{var n=r(6552);e.exports=function(){return n.Date.now()}},4816:(e,t,r)=>{var n=r(7251),i=r(7159),a=r(438),s=r(9394),o=r(6874);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},5029:(e,t,r)=>{var n=r(6989),i=r(3097),a=r(3366),s=r(2597),o=r(9417),l=r(1310),c=r(914);e.exports=function(e,t){return s(e)&&o(t)?l(c(e),t):function(r){var s=i(r,e);return void 0===s&&s===t?a(r,e):n(t,s,3)}}},5043:(e,t,r)=>{"use strict";e.exports=r(4288)},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5173:(e,t,r)=>{e.exports=r(1497)()},5193:(e,t,r)=>{var n=r(6913),i=r(2761);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},5204:(e,t,r)=>{var n=r(7937)(r(6552),"Map");e.exports=n},5268:(e,t,r)=>{var n=r(9160);e.exports=function(e){return n(e)&&e!=+e}},5295:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},5324:(e,t,r)=>{var n=r(4052),i=r(2597),a=r(4079),s=r(1069);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:a(s(e))}},5387:(e,t,r)=>{var n=r(7937)(r(6552),"Promise");e.exports=n},5428:(e,t,r)=>{var n=r(6913),i=r(6173),a=r(2761),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!s[n(e)]}},5538:(e,t,r)=>{var n=r(7160),i=r(4545),a=r(793),s=r(7760),o=r(3892),l=r(6788);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=s,c.prototype.has=o,c.prototype.set=l,e.exports=c},5575:(e,t,r)=>{var n=r(7937)(Object,"create");e.exports=n},5636:(e,t,r)=>{var n=r(1170),i=Math.max;e.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,s=-1,o=i(a.length-t,0),l=Array(o);++s<o;)l[s]=a[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=a[s];return c[t]=r(l),n(e,this,c)}}},5647:(e,t,r)=>{var n=r(3279),i=r(5636),a=r(6350);e.exports=function(e,t){return a(i(e,t,n),e+"")}},5652:(e,t,r)=>{var n=r(4664),i=r(6516)(n);e.exports=i},5654:(e,t,r)=>{var n=r(7937),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},5713:e=>{e.exports=function(){}},5752:(e,t,r)=>{var n=r(9395),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,s,o){var l=1&r,c=n(e),u=c.length;if(u!=n(t).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in t:i.call(t,h)))return!1}var p=o.get(e),f=o.get(t);if(p&&f)return p==t&&f==e;var m=!0;o.set(e,t),o.set(t,e);for(var g=l;++d<u;){var v=e[h=c[d]],x=t[h];if(a)var y=l?a(x,v,h,t,e,o):a(v,x,h,e,t,o);if(!(void 0===y?v===x||s(v,x,r,a,o):y)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(m=!1)}return o.delete(e),o.delete(t),m}},5797:(e,t,r)=>{var n=r(4816);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(i.Cache||n),r}i.Cache=n,e.exports=i},5816:e=>{e.exports=function(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}},5866:(e,t,r)=>{var n=r(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},5893:(e,t,r)=>{var n=r(6599);e.exports=function(e,t,r){for(var i=-1,a=e.criteria,s=t.criteria,o=a.length,l=r.length;++i<o;){var c=n(a[i],s[i]);if(c)return i>=l?c:c*("desc"==r[i]?-1:1)}return e.index-t.index}},5896:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<a(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,s=i>>>1;n<s;){var o=2*(n+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,r))c<i&&0>a(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<i&&0>a(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function w(e){if(g=!1,b(e),!m)if(null!==n(c))m=!0,A();else{var t=n(u);null!==t&&M(w,t.startTime-e)}}var _,k=!1,S=-1,j=5,E=-1;function C(){return!(t.unstable_now()-E<j)}function N(){if(k){var e=t.unstable_now();E=e;var r=!0;try{e:{m=!1,g&&(g=!1,x(S),S=-1),f=!0;var a=p;try{t:{for(b(e),h=n(c);null!==h&&!(h.expirationTime>e&&C());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,b(e),r=!0;break t}h===n(c)&&i(c),b(e)}else i(c);h=n(c)}if(null!==h)r=!0;else{var l=n(u);null!==l&&M(w,l.startTime-e),r=!1}}break e}finally{h=null,p=a,f=!1}r=void 0}}finally{r?_():k=!1}}}if("function"===typeof y)_=function(){y(N)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,P=T.port2;T.port1.onmessage=N,_=function(){P.postMessage(null)}}else _=function(){v(N,0)};function A(){k||(k=!0,_())}function M(e,r){S=v((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,A())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,r(u,e),null===n(c)&&e===n(u)&&(g?(x(S),S=-1):g=!0,M(w,a-s))):(e.sortIndex=o,r(c,e),m||f||(m=!0,A())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},5906:e=>{e.exports=function(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),o=s.length;o--;){var l=s[e?o:++i];if(!1===r(a[l],l,a))break}return t}}},5967:e=>{e.exports=function(e){return e.split("")}},5990:(e,t,r)=>{var n=r(3028)(Object.getPrototypeOf,Object);e.exports=n},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6350:(e,t,r)=>{var n=r(8325),i=r(6578)(n);e.exports=i},6361:(e,t,r)=>{var n=r(6913),i=r(2761);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==n(e)}},6378:(e,t)=>{"use strict";var r,n=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case o:case s:case h:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case f:case l:return e;default:return t}}case i:return t}}}r=Symbol.for("react.module.reference"),t.isFragment=function(e){return v(e)===a}},6399:(e,t,r)=>{var n=r(5538),i=r(3668),a=r(9987),s=r(5752),o=r(6924),l=r(4052),c=r(4543),u=r(1268),d="[object Arguments]",h="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,m,g,v){var x=l(e),y=l(t),b=x?h:o(e),w=y?h:o(t),_=(b=b==d?p:b)==p,k=(w=w==d?p:w)==p,S=b==w;if(S&&c(e)){if(!c(t))return!1;x=!0,_=!1}if(S&&!_)return v||(v=new n),x||u(e)?i(e,t,r,m,g,v):a(e,t,b,r,m,g,v);if(!(1&r)){var j=_&&f.call(e,"__wrapped__"),E=k&&f.call(t,"__wrapped__");if(j||E){var C=j?e.value():e,N=E?t.value():t;return v||(v=new n),g(C,N,r,m,v)}}return!!S&&(v||(v=new n),s(e,t,r,m,g,v))}},6516:(e,t,r)=>{var n=r(6571);e.exports=function(e,t){return function(r,i){if(null==r)return r;if(!n(r))return e(r,i);for(var a=r.length,s=t?a:-1,o=Object(r);(t?s--:++s<a)&&!1!==i(o[s],s,o););return r}}},6532:(e,t,r)=>{var n=r(5538),i=r(6989);e.exports=function(e,t,r,a){var s=r.length,o=s,l=!a;if(null==e)return!o;for(e=Object(e);s--;){var c=r[s];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<o;){var u=(c=r[s])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var p=new n;if(a)var f=a(d,h,u,e,t,p);if(!(void 0===f?i(h,d,3,a,p):f))return!1}}return!0}},6552:(e,t,r)=>{var n=r(7105),i="object"==typeof self&&self&&self.Object===Object&&self,a=n||i||Function("return this")();e.exports=a},6571:(e,t,r)=>{var n=r(1629),i=r(6173);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},6578:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var i=t(),a=16-(i-n);if(n=i,a>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},6599:(e,t,r)=>{var n=r(9841);e.exports=function(e,t){if(e!==t){var r=void 0!==e,i=null===e,a=e===e,s=n(e),o=void 0!==t,l=null===t,c=t===t,u=n(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||i&&o&&c||!r&&c||!a)return 1;if(!i&&!s&&!u&&e<t||u&&r&&a&&!i&&!s||l&&r&&a||!o&&a||!c)return-1}return 0}},6600:(e,t,r)=>{var n=r(7937)(r(6552),"WeakMap");e.exports=n},6604:(e,t,r)=>{var n=r(3331)();e.exports=n},6672:(e,t,r)=>{"use strict";var n=r(5043);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=l.T,r=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=r,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:i,fetchPriority:a}):"script"===r&&s.d.X(e,{crossOrigin:n,integrity:i,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin);s.d.L(e,r,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var r=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6745:(e,t,r)=>{var n=r(9742),i=r(61),a=r(3279);e.exports=function(e){return e&&e.length?n(e,a,i):void 0}},6788:(e,t,r)=>{var n=r(7160),i=r(5204),a=r(4816);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(s)}return r.set(e,t),this.size=r.size,this}},6832:(e,t,r)=>{e=r.nmd(e);var n=r(7105),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,s=a&&a.exports===i&&n.process,o=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=o},6874:(e,t,r)=>{var n=r(2622);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},6913:(e,t,r)=>{var n=r(9812),i=r(4552),a=r(6095),s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):a(e)}},6924:(e,t,r)=>{var n=r(7685),i=r(5204),a=r(5387),s=r(2070),o=r(6600),l=r(6913),c=r(6996),u="[object Map]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",f="[object DataView]",m=c(n),g=c(i),v=c(a),x=c(s),y=c(o),b=l;(n&&b(new n(new ArrayBuffer(1)))!=f||i&&b(new i)!=u||a&&b(a.resolve())!=d||s&&b(new s)!=h||o&&b(new o)!=p)&&(b=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case m:return f;case g:return u;case v:return d;case x:return h;case y:return p}return t}),e.exports=b},6954:(e,t,r)=>{var n=r(1629),i=r(7857),a=r(6686),s=r(6996),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(n(e)?h:o).test(s(e))}},6989:(e,t,r)=>{var n=r(6399),i=r(2761);e.exports=function e(t,r,a,s,o){return t===r||(null==t||null==r||!i(t)&&!i(r)?t!==t&&r!==r:n(t,r,a,s,e,o))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(r){}try{return e+""}catch(r){}}return""}},7002:(e,t,r)=>{var n=r(5295),i=r(4746),a=r(9096),s=r(4052),o=r(929);e.exports=function(e,t,r){var l=s(e)?n:i;return r&&o(e,t,r)&&(t=void 0),l(e,a(t,3))}},7004:(e,t,r)=>{"use strict";var n=r(8853),i=r(5043),a=r(7950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var k=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=S&&e[S]||e["@@iterator"])?e:null}var E=Symbol.for("react.client.reference");function C(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===E?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case d:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case y:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case g:return(e.displayName||"Context")+".Provider";case m:return(e._context.displayName||"Context")+".Consumer";case v:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case b:return null!==(t=e.displayName||null)?t:C(e.type)||"Memo";case w:t=e._payload,e=e._init;try{return C(e(t))}catch(r){}}return null}var N,T,P=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=Object.assign;function M(e){if(void 0===N)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||"",T=-1<r.stack.indexOf("\n    at")?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+N+e+T}var I=!1;function O(e,t){if(!e||I)return"";I=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(i){var n=i}Reflect.construct(e,[],r)}else{try{r.call()}catch(a){n=a}e.call(r.prototype)}}else{try{throw Error()}catch(s){n=s}(r=e())&&"function"===typeof r.catch&&r.catch((function(){}))}}catch(o){if(o&&n&&"string"===typeof o.stack)return[o.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=n.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split("\n"),c=o.split("\n");for(i=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(n===l.length||i===c.length)for(n=l.length-1,i=c.length-1;1<=n&&0<=i&&l[n]!==c[i];)i--;for(;1<=n&&0<=i;n--,i--)if(l[n]!==c[i]){if(1!==n||1!==i)do{if(n--,0>--i||l[n]!==c[i]){var u="\n"+l[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=n&&0<=i);break}}}finally{I=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?M(r):""}function D(e){switch(e.tag){case 26:case 27:case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return e=O(e.type,!1);case 11:return e=O(e.type.render,!1);case 1:return e=O(e.type,!0);default:return""}}function R(e){try{var t="";do{t+=D(e),e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}function L(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function F(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $(e){if(L(e)!==e)throw Error(s(188))}function B(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=B(e)))return t;e=e.sibling}return null}var z=Array.isArray,U=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},H=[],G=-1;function W(e){return{current:e}}function q(e){0>G||(e.current=H[G],H[G]=null,G--)}function K(e,t){G++,H[G]=e.current,e.current=t}var Z=W(null),Y=W(null),X=W(null),Q=W(null);function J(e,t){switch(K(X,t),K(Y,e),K(Z,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Yu(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Xu(e=Yu(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}q(Z),K(Z,t)}function ee(){q(Z),q(Y),q(X)}function te(e){null!==e.memoizedState&&K(Q,e);var t=Z.current,r=Xu(t,e.type);t!==r&&(K(Y,e),K(Z,r))}function re(e){Y.current===e&&(q(Z),q(Y)),Q.current===e&&(q(Q),Rd._currentValue=V)}var ne=Object.prototype.hasOwnProperty,ie=n.unstable_scheduleCallback,ae=n.unstable_cancelCallback,se=n.unstable_shouldYield,oe=n.unstable_requestPaint,le=n.unstable_now,ce=n.unstable_getCurrentPriorityLevel,ue=n.unstable_ImmediatePriority,de=n.unstable_UserBlockingPriority,he=n.unstable_NormalPriority,pe=n.unstable_LowPriority,fe=n.unstable_IdlePriority,me=n.log,ge=n.unstable_setDisableYieldValue,ve=null,xe=null;function ye(e){if("function"===typeof me&&ge(e),xe&&"function"===typeof xe.setStrictMode)try{xe.setStrictMode(ve,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/_e|0)|0},we=Math.log,_e=Math.LN2;var ke=128,Se=4194304;function je(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ee(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=e.warmLanes;e=0!==e.finishedLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?n=je(r):0!==(a&=o)?n=je(a):e||0!==(s=o&~s)&&(n=je(s)):0!==(o=r&~i)?n=je(o):0!==a?n=je(a):e||0!==(s=r&~s)&&(n=je(s)),0===n?0:0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(s=t&-t)||32===i&&0!==(4194176&s))?t:n}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ne(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=ke;return 0===(4194176&(ke<<=1))&&(ke=128),e}function Pe(){var e=Se;return 0===(62914560&(Se<<=1))&&(Se=4194304),e}function Ae(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Me(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-be(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194218&r}function Oe(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-be(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}function De(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=U.p;return 0!==e?e:void 0===(e=window.event)?32:Xd(e.type)}var Le=Math.random().toString(36).slice(2),Fe="__reactFiber$"+Le,$e="__reactProps$"+Le,Be="__reactContainer$"+Le,ze="__reactEvents$"+Le,Ue="__reactListeners$"+Le,Ve="__reactHandles$"+Le,He="__reactResources$"+Le,Ge="__reactMarker$"+Le;function We(e){delete e[Fe],delete e[$e],delete e[ze],delete e[Ue],delete e[Ve]}function qe(e){var t=e[Fe];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Be]||r[Fe]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ld(e);null!==e;){if(r=e[Fe])return r;e=ld(e)}return t}r=(e=r).parentNode}return null}function Ke(e){if(e=e[Fe]||e[Be]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ye(e){var t=e[He];return t||(t=e[He]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Xe(e){e[Ge]=!0}var Qe=new Set,Je={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Je[e]=t,e=0;e<t.length;e++)Qe.add(t[e])}var rt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},at={};function st(e,t,r){if(i=t,ne.call(at,i)||!ne.call(it,i)&&(nt.test(i)?at[i]=!0:(it[i]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var i}function ot(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function lt(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ut(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,r,n,i,a,s,o){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?xt(e,s,ct(t)):null!=r?xt(e,s,ct(r)):null!=n&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,r,n,i,a,s,o){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=r){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return;r=null!=r?""+ct(r):"",t=null!=t?""+ct(t):r,o||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:i)&&"symbol"!==typeof n&&!!n,e.checked=o?e.checked:!!n,e.defaultChecked=!!n,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function xt(e,t,r){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function yt(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ct(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,r){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+ct(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(s(92));if(z(n)){if(1<n.length)throw Error(s(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=ct(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function _t(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"===typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!==typeof r||0===r||kt.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function jt(e,t,r){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&r[i]!==n&&St(e,i,n)}else for(var a in t)t.hasOwnProperty(a)&&St(e,a,t[a])}function Et(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return Nt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,It=null;function Ot(e){var t=Ke(e);if(t&&(e=t.stateNode)){var r=e[$e]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=n[$e]||null;if(!i)throw Error(s(90));gt(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&ht(n)}break e;case"textarea":bt(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&yt(e,!!r.multiple,t,!1)}}}var Dt=!1;function Rt(e,t,r){if(Dt)return e(t,r);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==Mt||null!==It)&&(Fc(),Mt&&(t=Mt,e=It,It=Mt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Lt(e,t){var r=e.stateNode;if(null===r)return null;var n=r[$e]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Ft=!1;if(rt)try{var $t={};Object.defineProperty($t,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch(wh){Ft=!1}var Bt=null,zt=null,Ut=null;function Vt(){if(Ut)return Ut;var e,t,r=zt,n=r.length,i="value"in Bt?Bt.value:Bt.textContent,a=i.length;for(e=0;e<n&&r[e]===i[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===i[a-t];t++);return Ut=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Wt(){return!1}function qt(e){function t(t,r,n,i,a){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Wt,this.isPropagationStopped=Wt,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Kt,Zt,Yt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=qt(Xt),Jt=A({},Xt,{view:0,detail:0}),er=qt(Jt),tr=A({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Kt=e.screenX-Yt.screenX,Zt=e.screenY-Yt.screenY):Zt=Kt=0,Yt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),rr=qt(tr),nr=qt(A({},tr,{dataTransfer:0})),ir=qt(A({},Jt,{relatedTarget:0})),ar=qt(A({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),sr=qt(A({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),or=qt(A({},Xt,{data:0})),lr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ur={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ur[e])&&!!t[e]}function hr(){return dr}var pr=qt(A({},Jt,{key:function(e){if(e.key){var t=lr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hr,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),fr=qt(A({},tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),mr=qt(A({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hr})),gr=qt(A({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vr=qt(A({},tr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xr=qt(A({},Xt,{newState:0,oldState:0})),yr=[9,13,27,32],br=rt&&"CompositionEvent"in window,wr=null;rt&&"documentMode"in document&&(wr=document.documentMode);var _r=rt&&"TextEvent"in window&&!wr,kr=rt&&(!br||wr&&8<wr&&11>=wr),Sr=String.fromCharCode(32),jr=!1;function Er(e,t){switch(e){case"keyup":return-1!==yr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Nr=!1;var Tr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Tr[e.type]:"textarea"===t}function Ar(e,t,r,n){Mt?It?It.push(n):It=[n]:Mt=n,0<(t=Ru(t,"onChange")).length&&(r=new Qt("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Mr=null,Ir=null;function Or(e){Nu(e,0)}function Dr(e){if(ht(Ze(e)))return e}function Rr(e,t){if("change"===e)return t}var Lr=!1;if(rt){var Fr;if(rt){var $r="oninput"in document;if(!$r){var Br=document.createElement("div");Br.setAttribute("oninput","return;"),$r="function"===typeof Br.oninput}Fr=$r}else Fr=!1;Lr=Fr&&(!document.documentMode||9<document.documentMode)}function zr(){Mr&&(Mr.detachEvent("onpropertychange",Ur),Ir=Mr=null)}function Ur(e){if("value"===e.propertyName&&Dr(Ir)){var t=[];Ar(t,Ir,e,At(e)),Rt(Or,t)}}function Vr(e,t,r){"focusin"===e?(zr(),Ir=r,(Mr=t).attachEvent("onpropertychange",Ur)):"focusout"===e&&zr()}function Hr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dr(Ir)}function Gr(e,t){if("click"===e)return Dr(t)}function Wr(e,t){if("input"===e||"change"===e)return Dr(t)}var qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Kr(e,t){if(qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!ne.call(t,i)||!qr(e[i],t[i]))return!1}return!0}function Zr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yr(e,t){var r,n=Zr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zr(n)}}function Xr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Qr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=pt((e=t.contentWindow).document)}return t}function Jr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function en(e,t){var r=Qr(t);t=e.focusedElem;var n=e.selectionRange;if(r!==t&&t&&t.ownerDocument&&Xr(t.ownerDocument.documentElement,t)){if(null!==n&&Jr(t))if(e=n.start,void 0===(r=n.end)&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if((r=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){r=r.getSelection();var i=t.textContent.length,a=Math.min(n.start,i);n=void 0===n.end?a:Math.min(n.end,i),!r.extend&&a>n&&(i=n,n=a,a=i),i=Yr(t,a);var s=Yr(t,n);i&&s&&(1!==r.rangeCount||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==s.node||r.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),r.removeAllRanges(),a>n?(r.addRange(e),r.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),r.addRange(e)))}for(e=[],r=t;r=r.parentNode;)1===r.nodeType&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(r=e[t]).element.scrollLeft=r.left,r.element.scrollTop=r.top}}var tn=rt&&"documentMode"in document&&11>=document.documentMode,rn=null,nn=null,an=null,sn=!1;function on(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;sn||null==rn||rn!==pt(n)||("selectionStart"in(n=rn)&&Jr(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},an&&Kr(an,n)||(an=n,0<(n=Ru(nn,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=rn)))}function ln(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var cn={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},un={},dn={};function hn(e){if(un[e])return un[e];if(!cn[e])return e;var t,r=cn[e];for(t in r)if(r.hasOwnProperty(t)&&t in dn)return un[e]=r[t];return e}rt&&(dn=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);var pn=hn("animationend"),fn=hn("animationiteration"),mn=hn("animationstart"),gn=hn("transitionrun"),vn=hn("transitionstart"),xn=hn("transitioncancel"),yn=hn("transitionend"),bn=new Map,wn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function _n(e,t){bn.set(e,t),et(t,[e])}var kn=[],Sn=0,jn=0;function En(){for(var e=Sn,t=jn=Sn=0;t<e;){var r=kn[t];kn[t++]=null;var n=kn[t];kn[t++]=null;var i=kn[t];kn[t++]=null;var a=kn[t];if(kn[t++]=null,null!==n&&null!==i){var s=n.pending;null===s?i.next=i:(i.next=s.next,s.next=i),n.pending=i}0!==a&&Pn(r,i,a)}}function Cn(e,t,r,n){kn[Sn++]=e,kn[Sn++]=t,kn[Sn++]=r,kn[Sn++]=n,jn|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Nn(e,t,r,n){return Cn(e,t,r,n),An(e)}function Tn(e,t){return Cn(e,null,null,t),An(e)}function Pn(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var i=!1,a=e.return;null!==a;)a.childLanes|=r,null!==(n=a.alternate)&&(n.childLanes|=r),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;i&&null!==t&&3===e.tag&&(a=e.stateNode,i=31-be(r),null===(e=(a=a.hiddenUpdates)[i])?a[i]=[t]:e.push(t),t.lane=536870912|r)}function An(e){if(50<Nc)throw Nc=0,Tc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mn={},In=new WeakMap;function On(e,t){if("object"===typeof e&&null!==e){var r=In.get(e);return void 0!==r?r:(t={value:e,source:t,stack:R(t)},In.set(e,t),t)}return{value:e,source:t,stack:R(t)}}var Dn=[],Rn=0,Ln=null,Fn=0,$n=[],Bn=0,zn=null,Un=1,Vn="";function Hn(e,t){Dn[Rn++]=Fn,Dn[Rn++]=Ln,Ln=e,Fn=t}function Gn(e,t,r){$n[Bn++]=Un,$n[Bn++]=Vn,$n[Bn++]=zn,zn=e;var n=Un;e=Vn;var i=32-be(n)-1;n&=~(1<<i),r+=1;var a=32-be(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Un=1<<32-be(t)+i|r<<i|n,Vn=a+e}else Un=1<<a|r<<i|n,Vn=e}function Wn(e){null!==e.return&&(Hn(e,1),Gn(e,1,0))}function qn(e){for(;e===Ln;)Ln=Dn[--Rn],Dn[Rn]=null,Fn=Dn[--Rn],Dn[Rn]=null;for(;e===zn;)zn=$n[--Bn],$n[Bn]=null,Vn=$n[--Bn],$n[Bn]=null,Un=$n[--Bn],$n[Bn]=null}var Kn=null,Zn=null,Yn=!1,Xn=null,Qn=!1,Jn=Error(s(519));function ei(e){throw ai(On(Error(s(418,"")),e)),Jn}function ti(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Fe]=e,t[$e]=n,r){case"dialog":Tu("cancel",t),Tu("close",t);break;case"iframe":case"object":case"embed":Tu("load",t);break;case"video":case"audio":for(r=0;r<Eu.length;r++)Tu(Eu[r],t);break;case"source":Tu("error",t);break;case"img":case"image":case"link":Tu("error",t),Tu("load",t);break;case"details":Tu("toggle",t);break;case"input":Tu("invalid",t),vt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),dt(t);break;case"select":Tu("invalid",t);break;case"textarea":Tu("invalid",t),wt(t,n.value,n.defaultValue,n.children),dt(t)}"string"!==typeof(r=n.children)&&"number"!==typeof r&&"bigint"!==typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||Uu(t.textContent,r)?(null!=n.popover&&(Tu("beforetoggle",t),Tu("toggle",t)),null!=n.onScroll&&Tu("scroll",t),null!=n.onScrollEnd&&Tu("scrollend",t),null!=n.onClick&&(t.onclick=Vu),t=!0):t=!1,t||ei(e)}function ri(e){for(Kn=e.return;Kn;)switch(Kn.tag){case 3:case 27:return void(Qn=!0);case 5:case 13:return void(Qn=!1);default:Kn=Kn.return}}function ni(e){if(e!==Kn)return!1;if(!Yn)return ri(e),Yn=!0,!1;var t,r=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Qu(e.type,e.memoizedProps)),t=!t),t&&(r=!0),r&&Zn&&ei(e),ri(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){Zn=od(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}Zn=null}}else Zn=Kn?od(e.stateNode.nextSibling):null;return!0}function ii(){Zn=Kn=null,Yn=!1}function ai(e){null===Xn?Xn=[e]:Xn.push(e)}var si=Error(s(460)),oi=Error(s(474)),li={then:function(){}};function ci(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ui(){}function di(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(ui,ui),t=r),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===si)throw Error(s(483));throw e;default:if("string"===typeof t.status)t.then(ui,ui);else{if(null!==(e=tc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}}),(function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===si)throw Error(s(483));throw e}throw hi=t,si}}var hi=null;function pi(){if(null===hi)throw Error(s(459));var e=hi;return hi=null,e}var fi=null,mi=0;function gi(e){var t=mi;return mi+=1,null===fi&&(fi=[]),di(fi,e,t)}function vi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function xi(e,t){if(t.$$typeof===l)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ll(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=33554434,r):n:(t.flags|=33554434,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Ul(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function h(e,t,r,n){var a=r.type;return a===d?f(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===w&&yi(a)===t.type)?(vi(t=i(t,r.props),r),t.return=e,t):(vi(t=$l(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function p(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Vl(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function f(e,t,r,n,a){return null===t||7!==t.tag?((t=Bl(r,e.mode,n,a)).return=e,t):((t=i(t,r)).return=e,t)}function m(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ul(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case c:return vi(r=$l(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case u:return(t=Vl(t,e.mode,r)).return=e,t;case w:return m(e,t=(0,t._init)(t._payload),r)}if(z(t)||j(t))return(t=Bl(t,e.mode,r,null)).return=e,t;if("function"===typeof t.then)return m(e,gi(t),r);if(t.$$typeof===g)return m(e,Eo(e,t),r);xi(e,t)}return null}function v(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return null!==i?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case c:return r.key===i?h(e,t,r,n):null;case u:return r.key===i?p(e,t,r,n):null;case w:return v(e,t,r=(i=r._init)(r._payload),n)}if(z(r)||j(r))return null!==i?null:f(e,t,r,n,null);if("function"===typeof r.then)return v(e,t,gi(r),n);if(r.$$typeof===g)return v(e,t,Eo(e,r),n);xi(e,r)}return null}function x(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return h(t,e=e.get(null===n.key?r:n.key)||null,n,i);case u:return p(t,e=e.get(null===n.key?r:n.key)||null,n,i);case w:return x(e,t,r,n=(0,n._init)(n._payload),i)}if(z(n)||j(n))return f(t,e=e.get(r)||null,n,i,null);if("function"===typeof n.then)return x(e,t,r,gi(n),i);if(n.$$typeof===g)return x(e,t,r,Eo(t,n),i);xi(t,n)}return null}function y(l,h,p,f){if("object"===typeof p&&null!==p&&p.type===d&&null===p.key&&(p=p.props.children),"object"===typeof p&&null!==p){switch(p.$$typeof){case c:e:{for(var b=p.key;null!==h;){if(h.key===b){if((b=p.type)===d){if(7===h.tag){r(l,h.sibling),(f=i(h,p.props.children)).return=l,l=f;break e}}else if(h.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===w&&yi(b)===h.type){r(l,h.sibling),vi(f=i(h,p.props),p),f.return=l,l=f;break e}r(l,h);break}t(l,h),h=h.sibling}p.type===d?((f=Bl(p.props.children,l.mode,f,p.key)).return=l,l=f):(vi(f=$l(p.type,p.key,p.props,null,l.mode,f),p),f.return=l,l=f)}return o(l);case u:e:{for(b=p.key;null!==h;){if(h.key===b){if(4===h.tag&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){r(l,h.sibling),(f=i(h,p.children||[])).return=l,l=f;break e}r(l,h);break}t(l,h),h=h.sibling}(f=Vl(p,l.mode,f)).return=l,l=f}return o(l);case w:return y(l,h,p=(b=p._init)(p._payload),f)}if(z(p))return function(i,s,o,l){for(var c=null,u=null,d=s,h=s=0,p=null;null!==d&&h<o.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var f=v(i,d,o[h],l);if(null===f){null===d&&(d=p);break}e&&d&&null===f.alternate&&t(i,d),s=a(f,s,h),null===u?c=f:u.sibling=f,u=f,d=p}if(h===o.length)return r(i,d),Yn&&Hn(i,h),c;if(null===d){for(;h<o.length;h++)null!==(d=m(i,o[h],l))&&(s=a(d,s,h),null===u?c=d:u.sibling=d,u=d);return Yn&&Hn(i,h),c}for(d=n(d);h<o.length;h++)null!==(p=x(d,i,h,o[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),s=a(p,s,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach((function(e){return t(i,e)})),Yn&&Hn(i,h),c}(l,h,p,f);if(j(p)){if("function"!==typeof(b=j(p)))throw Error(s(150));return function(i,o,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,h=o,p=o=0,f=null,g=l.next();null!==h&&!g.done;p++,g=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var y=v(i,h,g.value,c);if(null===y){null===h&&(h=f);break}e&&h&&null===y.alternate&&t(i,h),o=a(y,o,p),null===d?u=y:d.sibling=y,d=y,h=f}if(g.done)return r(i,h),Yn&&Hn(i,p),u;if(null===h){for(;!g.done;p++,g=l.next())null!==(g=m(i,g.value,c))&&(o=a(g,o,p),null===d?u=g:d.sibling=g,d=g);return Yn&&Hn(i,p),u}for(h=n(h);!g.done;p++,g=l.next())null!==(g=x(h,i,p,g.value,c))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),o=a(g,o,p),null===d?u=g:d.sibling=g,d=g);return e&&h.forEach((function(e){return t(i,e)})),Yn&&Hn(i,p),u}(l,h,p=b.call(p),f)}if("function"===typeof p.then)return y(l,h,gi(p),f);if(p.$$typeof===g)return y(l,h,Eo(l,p),f);xi(l,p)}return"string"===typeof p&&""!==p||"number"===typeof p||"bigint"===typeof p?(p=""+p,null!==h&&6===h.tag?(r(l,h.sibling),(f=i(h,p)).return=l,l=f):(r(l,h),(f=Ul(p,l.mode,f)).return=l,l=f),o(l)):r(l,h)}return function(e,t,r,n){try{mi=0;var i=y(e,t,r,n);return fi=null,i}catch(s){if(s===si)throw s;var a=Dl(29,s,null,e.mode);return a.lanes=n,a.return=e,a}}}var wi=bi(!0),_i=bi(!1),ki=W(null),Si=W(0);function ji(e,t){K(Si,e=cc),K(ki,t),cc=e|t.baseLanes}function Ei(){K(Si,cc),K(ki,ki.current)}function Ci(){cc=Si.current,q(ki),q(Si)}var Ni=W(null),Ti=null;function Pi(e){var t=e.alternate;K(Oi,1&Oi.current),K(Ni,e),null===Ti&&(null===t||null!==ki.current||null!==t.memoizedState)&&(Ti=e)}function Ai(e){if(22===e.tag){if(K(Oi,Oi.current),K(Ni,e),null===Ti){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Ti=e)}}else Mi()}function Mi(){K(Oi,Oi.current),K(Ni,Ni.current)}function Ii(e){q(Ni),Ti===e&&(Ti=null),q(Oi)}var Oi=W(0);function Di(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ri="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Li=n.unstable_scheduleCallback,Fi=n.unstable_NormalPriority,$i={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bi(){return{controller:new Ri,data:new Map,refCount:0}}function zi(e){e.refCount--,0===e.refCount&&Li(Fi,(function(){e.controller.abort()}))}var Ui=null,Vi=0,Hi=0,Gi=null;function Wi(){if(0===--Vi&&null!==Ui){null!==Gi&&(Gi.status="fulfilled");var e=Ui;Ui=null,Hi=0,Gi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var qi=P.S;P.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ui){var r=Ui=[];Vi=0,Hi=wu(),Gi={status:"pending",value:void 0,then:function(e){r.push(e)}}}Vi++,t.then(Wi,Wi)}(0,t),null!==qi&&qi(e,t)};var Ki=W(null);function Zi(){var e=Ki.current;return null!==e?e:tc.pooledCache}function Yi(e,t){K(Ki,null===t?Ki.current:t.pool)}function Xi(){var e=Zi();return null===e?null:{parent:$i._currentValue,pool:e}}var Qi=0,Ji=null,ea=null,ta=null,ra=!1,na=!1,ia=!1,aa=0,sa=0,oa=null,la=0;function ca(){throw Error(s(321))}function ua(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qr(e[r],t[r]))return!1;return!0}function da(e,t,r,n,i,a){return Qi=a,Ji=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?js:Es,ia=!1,a=r(n,i),ia=!1,na&&(a=pa(t,r,n,i)),ha(e),a}function ha(e){P.H=Ss;var t=null!==ea&&null!==ea.next;if(Qi=0,ta=ea=Ji=null,ra=!1,sa=0,oa=null,t)throw Error(s(300));null===e||Vs||null!==(e=e.dependencies)&&ko(e)&&(Vs=!0)}function pa(e,t,r,n){Ji=e;var i=0;do{if(na&&(oa=null),sa=0,na=!1,25<=i)throw Error(s(301));if(i+=1,ta=ea=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}P.H=Cs,a=t(r,n)}while(na);return a}function fa(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?ba(t):t,e=e.useState()[0],(null!==ea?ea.memoizedState:null)!==e&&(Ji.flags|=1024),t}function ma(){var e=0!==aa;return aa=0,e}function ga(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function va(e){if(ra){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ra=!1}Qi=0,ta=ea=Ji=null,na=!1,sa=aa=0,oa=null}function xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ta?Ji.memoizedState=ta=e:ta=ta.next=e,ta}function ya(){if(null===ea){var e=Ji.alternate;e=null!==e?e.memoizedState:null}else e=ea.next;var t=null===ta?Ji.memoizedState:ta.next;if(null!==t)ta=t,ea=e;else{if(null===e){if(null===Ji.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(ea=e).memoizedState,baseState:ea.baseState,baseQueue:ea.baseQueue,queue:ea.queue,next:null},null===ta?Ji.memoizedState=ta=e:ta=ta.next=e}return ta}function ba(e){var t=sa;return sa+=1,null===oa&&(oa=[]),e=di(oa,e,t),t=Ji,null===(null===ta?t.memoizedState:ta.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?js:Es),e}function wa(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ba(e);if(e.$$typeof===g)return jo(e)}throw Error(s(438,String(e)))}function _a(e){var t=null,r=Ji.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=Ji.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=k;return t.index++,r}function ka(e,t){return"function"===typeof t?t(e):t}function Sa(e){return ja(ya(),ea,e)}function ja(e,t,r){var n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=r;var i=e.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,n.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(nc&h)===h:(Qi&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hi&&(d=!0);else{if((Qi&p)===p){u=u.next,p===Hi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=a):c=c.next=h,Ji.lanes|=p,dc|=p}h=u.action,ia&&r(a,h),a=u.hasEagerState?u.eagerState:r(a,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,o=a):c=c.next=p,Ji.lanes|=h,dc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!qr(a,e.memoizedState)&&(Vs=!0,d&&null!==(r=Gi)))throw r;e.memoizedState=a,e.baseState=o,e.baseQueue=c,n.lastRenderedState=a}return null===i&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Ea(e){var t=ya(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);qr(a,t.memoizedState)||(Vs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Ca(e,t,r){var n=Ji,i=ya(),a=Yn;if(a){if(void 0===r)throw Error(s(407));r=r()}else r=t();var o=!qr((ea||i).memoizedState,r);if(o&&(i.memoizedState=r,Vs=!0),i=i.queue,Qa(Pa.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==ta&&1&ta.memoizedState.tag){if(n.flags|=2048,qa(9,Ta.bind(null,n,i,r,t),{destroy:void 0},null),null===tc)throw Error(s(349));a||0!==(60&Qi)||Na(n,t,r)}return r}function Na(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=Ji.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ta(e,t,r,n){t.value=r,t.getSnapshot=n,Aa(t)&&Ma(e)}function Pa(e,t,r){return r((function(){Aa(t)&&Ma(e)}))}function Aa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qr(e,r)}catch(n){return!0}}function Ma(e){var t=Tn(e,2);null!==t&&Mc(t,e,2)}function Ia(e){var t=xa();if("function"===typeof e){var r=e;if(e=r(),ia){ye(!0);try{r()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:e},t}function Oa(e,t,r,n){return e.baseState=r,ja(e,ea,"function"===typeof n?n:ka)}function Da(e,t,r,n,i){if(ws(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==P.T?r(!0):a.isTransition=!1,n(a),null===(r=t.pending)?(a.next=t.pending=a,Ra(t,a)):(a.next=r.next,t.pending=r.next=a)}}function Ra(e,t){var r=t.action,n=t.payload,i=e.state;if(t.isTransition){var a=P.T,s={};P.T=s;try{var o=r(i,n),l=P.S;null!==l&&l(s,o),La(e,t,o)}catch(c){$a(e,t,c)}finally{P.T=a}}else try{La(e,t,a=r(i,n))}catch(u){$a(e,t,u)}}function La(e,t,r){null!==r&&"object"===typeof r&&"function"===typeof r.then?r.then((function(r){Fa(e,t,r)}),(function(r){return $a(e,t,r)})):Fa(e,t,r)}function Fa(e,t,r){t.status="fulfilled",t.value=r,Ba(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,Ra(e,r)))}function $a(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,Ba(t),t=t.next}while(t!==n)}e.action=null}function Ba(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function za(e,t){return t}function Ua(e,t){if(Yn){var r=tc.formState;if(null!==r){e:{var n=Ji;if(Yn){if(Zn){t:{for(var i=Zn,a=Qn;8!==i.nodeType;){if(!a){i=null;break t}if(null===(i=od(i.nextSibling))){i=null;break t}}i="F!"===(a=i.data)||"F"===a?i:null}if(i){Zn=od(i.nextSibling),n="F!"===i.data;break e}}ei(n)}n=!1}n&&(t=r[0])}}return(r=xa()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:t},r.queue=n,r=xs.bind(null,Ji,n),n.dispatch=r,n=Ia(!1),a=bs.bind(null,Ji,!1,n.queue),i={state:t,dispatch:null,action:e,pending:null},(n=xa()).queue=i,r=Da.bind(null,Ji,i,a,r),i.dispatch=r,n.memoizedState=e,[t,r,!1]}function Va(e){return Ha(ya(),ea,e)}function Ha(e,t,r){t=ja(e,t,za)[0],e=Sa(ka)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?ba(t):t;var n=ya(),i=n.queue,a=i.dispatch;return r!==n.memoizedState&&(Ji.flags|=2048,qa(9,Ga.bind(null,i,r),{destroy:void 0},null)),[t,a,e]}function Ga(e,t){e.action=t}function Wa(e){var t=ya(),r=ea;if(null!==r)return Ha(t,r,e);ya(),t=t.memoizedState;var n=(r=ya()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function qa(e,t,r,n){return e={tag:e,create:t,inst:r,deps:n,next:null},null===(t=Ji.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ka(){return ya().memoizedState}function Za(e,t,r,n){var i=xa();Ji.flags|=e,i.memoizedState=qa(1|t,r,{destroy:void 0},void 0===n?null:n)}function Ya(e,t,r,n){var i=ya();n=void 0===n?null:n;var a=i.memoizedState.inst;null!==ea&&null!==n&&ua(n,ea.memoizedState.deps)?i.memoizedState=qa(t,r,a,n):(Ji.flags|=e,i.memoizedState=qa(1|t,r,a,n))}function Xa(e,t){Za(8390656,8,e,t)}function Qa(e,t){Ya(2048,8,e,t)}function Ja(e,t){return Ya(4,2,e,t)}function es(e,t){return Ya(4,4,e,t)}function ts(e,t){if("function"===typeof t){e=e();var r=t(e);return function(){"function"===typeof r?r():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function rs(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,Ya(4,4,ts.bind(null,t,e),r)}function ns(){}function is(e,t){var r=ya();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&ua(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function as(e,t){var r=ya();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&ua(t,n[1]))return n[0];if(n=e(),ia){ye(!0);try{e()}finally{ye(!1)}}return r.memoizedState=[n,t],n}function ss(e,t,r){return void 0===r||0!==(1073741824&Qi)?e.memoizedState=t:(e.memoizedState=r,e=Ac(),Ji.lanes|=e,dc|=e,r)}function os(e,t,r,n){return qr(r,t)?r:null!==ki.current?(e=ss(e,r,n),qr(e,t)||(Vs=!0),e):0===(42&Qi)?(Vs=!0,e.memoizedState=r):(e=Ac(),Ji.lanes|=e,dc|=e,t)}function ls(e,t,r,n,i){var a=U.p;U.p=0!==a&&8>a?a:8;var s=P.T,o={};P.T=o,bs(e,!1,t,r);try{var l=i(),c=P.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ys(e,t,function(e,t){var r=[],n={status:"pending",value:null,reason:null,then:function(e){r.push(e)}};return e.then((function(){n.status="fulfilled",n.value=t;for(var e=0;e<r.length;e++)(0,r[e])(t)}),(function(e){for(n.status="rejected",n.reason=e,e=0;e<r.length;e++)(0,r[e])(void 0)})),n}(l,n),Pc());else ys(e,t,n,Pc())}catch(u){ys(e,t,{then:function(){},status:"rejected",reason:u},Pc())}finally{U.p=a,P.T=s}}function cs(){}function us(e,t,r,n){if(5!==e.tag)throw Error(s(476));var i=ds(e).queue;ls(e,i,t,V,null===r?cs:function(){return hs(e),r(n)})}function ds(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:V},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function hs(e){ys(e,ds(e).next.queue,{},Pc())}function ps(){return jo(Rd)}function fs(){return ya().memoizedState}function ms(){return ya().memoizedState}function gs(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Pc(),n=Mo(t,e=Ao(r),r);return null!==n&&(Mc(n,t,r),Io(n,t,r)),t={cache:Bi()},void(e.payload=t)}t=t.return}}function vs(e,t,r){var n=Pc();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},ws(e)?_s(t,r):null!==(r=Nn(e,t,r,n))&&(Mc(r,e,n),ks(r,t,n))}function xs(e,t,r){ys(e,t,r,Pc())}function ys(e,t,r,n){var i={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(ws(e))_s(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,qr(o,s))return Cn(e,t,i,0),null===tc&&En(),!1}catch(l){}if(null!==(r=Nn(e,t,i,n)))return Mc(r,e,n),ks(r,t,n),!0}return!1}function bs(e,t,r,n){if(n={lane:2,revertLane:wu(),action:n,hasEagerState:!1,eagerState:null,next:null},ws(e)){if(t)throw Error(s(479))}else null!==(t=Nn(e,r,n,2))&&Mc(t,e,2)}function ws(e){var t=e.alternate;return e===Ji||null!==t&&t===Ji}function _s(e,t){na=ra=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ks(e,t,r){if(0!==(4194176&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Oe(e,r)}}var Ss={readContext:jo,use:wa,useCallback:ca,useContext:ca,useEffect:ca,useImperativeHandle:ca,useLayoutEffect:ca,useInsertionEffect:ca,useMemo:ca,useReducer:ca,useRef:ca,useState:ca,useDebugValue:ca,useDeferredValue:ca,useTransition:ca,useSyncExternalStore:ca,useId:ca};Ss.useCacheRefresh=ca,Ss.useMemoCache=ca,Ss.useHostTransitionStatus=ca,Ss.useFormState=ca,Ss.useActionState=ca,Ss.useOptimistic=ca;var js={readContext:jo,use:wa,useCallback:function(e,t){return xa().memoizedState=[e,void 0===t?null:t],e},useContext:jo,useEffect:Xa,useImperativeHandle:function(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,Za(4194308,4,ts.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Za(4194308,4,e,t)},useInsertionEffect:function(e,t){Za(4,2,e,t)},useMemo:function(e,t){var r=xa();t=void 0===t?null:t;var n=e();if(ia){ye(!0);try{e()}finally{ye(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=xa();if(void 0!==r){var i=r(t);if(ia){ye(!0);try{r(t)}finally{ye(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=vs.bind(null,Ji,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xa().memoizedState=e},useState:function(e){var t=(e=Ia(e)).queue,r=xs.bind(null,Ji,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:ns,useDeferredValue:function(e,t){return ss(xa(),e,t)},useTransition:function(){var e=Ia(!1);return e=ls.bind(null,Ji,e.queue,!0,!1),xa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=Ji,i=xa();if(Yn){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===tc)throw Error(s(349));0!==(60&nc)||Na(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Xa(Pa.bind(null,n,a,e),[e]),n.flags|=2048,qa(9,Ta.bind(null,n,a,r,t),{destroy:void 0},null),r},useId:function(){var e=xa(),t=tc.identifierPrefix;if(Yn){var r=Vn;t=":"+t+"R"+(r=(Un&~(1<<32-be(Un)-1)).toString(32)+r),0<(r=aa++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=la++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return xa().memoizedState=gs.bind(null,Ji)}};js.useMemoCache=_a,js.useHostTransitionStatus=ps,js.useFormState=Ua,js.useActionState=Ua,js.useOptimistic=function(e){var t=xa();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=bs.bind(null,Ji,!0,r),r.dispatch=t,[e,t]};var Es={readContext:jo,use:wa,useCallback:is,useContext:jo,useEffect:Qa,useImperativeHandle:rs,useInsertionEffect:Ja,useLayoutEffect:es,useMemo:as,useReducer:Sa,useRef:Ka,useState:function(){return Sa(ka)},useDebugValue:ns,useDeferredValue:function(e,t){return os(ya(),ea.memoizedState,e,t)},useTransition:function(){var e=Sa(ka)[0],t=ya().memoizedState;return["boolean"===typeof e?e:ba(e),t]},useSyncExternalStore:Ca,useId:fs};Es.useCacheRefresh=ms,Es.useMemoCache=_a,Es.useHostTransitionStatus=ps,Es.useFormState=Va,Es.useActionState=Va,Es.useOptimistic=function(e,t){return Oa(ya(),0,e,t)};var Cs={readContext:jo,use:wa,useCallback:is,useContext:jo,useEffect:Qa,useImperativeHandle:rs,useInsertionEffect:Ja,useLayoutEffect:es,useMemo:as,useReducer:Ea,useRef:Ka,useState:function(){return Ea(ka)},useDebugValue:ns,useDeferredValue:function(e,t){var r=ya();return null===ea?ss(r,e,t):os(r,ea.memoizedState,e,t)},useTransition:function(){var e=Ea(ka)[0],t=ya().memoizedState;return["boolean"===typeof e?e:ba(e),t]},useSyncExternalStore:Ca,useId:fs};function Ns(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:A({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}Cs.useCacheRefresh=ms,Cs.useMemoCache=_a,Cs.useHostTransitionStatus=ps,Cs.useFormState=Wa,Cs.useActionState=Wa,Cs.useOptimistic=function(e,t){var r=ya();return null!==ea?Oa(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])};var Ts={isMounted:function(e){return!!(e=e._reactInternals)&&L(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Pc(),i=Ao(n);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Mo(e,i,n))&&(Mc(t,e,n),Io(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Pc(),i=Ao(n);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Mo(e,i,n))&&(Mc(t,e,n),Io(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Pc(),n=Ao(r);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Mo(e,n,r))&&(Mc(t,e,r),Io(t,e,r))}};function Ps(e,t,r,n,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!Kr(r,n)||!Kr(i,a))}function As(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ts.enqueueReplaceState(t,t.state,null)}function Ms(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var i in r===t&&(r=A({},r)),e)void 0===r[i]&&(r[i]=e[i]);return r}var Is="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Os(e){Is(e)}function Ds(e){console.error(e)}function Rs(e){Is(e)}function Ls(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout((function(){throw r}))}}function Fs(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout((function(){throw n}))}}function $s(e,t,r){return(r=Ao(r)).tag=3,r.payload={element:null},r.callback=function(){Ls(e,t)},r}function Bs(e){return(e=Ao(e)).tag=3,e}function zs(e,t,r,n){var i=r.type.getDerivedStateFromError;if("function"===typeof i){var a=n.value;e.payload=function(){return i(a)},e.callback=function(){Fs(t,r,n)}}var s=r.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Fs(t,r,n),"function"!==typeof i&&(null===_c?_c=new Set([this]):_c.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Us=Error(s(461)),Vs=!1;function Hs(e,t,r,n){t.child=null===e?_i(t,null,r,n):wi(t,e.child,r,n)}function Gs(e,t,r,n,i){r=r.render;var a=t.ref;if("ref"in n){var s={};for(var o in n)"ref"!==o&&(s[o]=n[o])}else s=n;return So(t),n=da(e,t,r,s,a,i),o=ma(),null===e||Vs?(Yn&&o&&Wn(t),t.flags|=1,Hs(e,t,n,i),t.child):(ga(e,t,i),ho(e,t,i))}function Ws(e,t,r,n,i){if(null===e){var a=r.type;return"function"!==typeof a||Rl(a)||void 0!==a.defaultProps||null!==r.compare?((e=$l(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,qs(e,t,a,n,i))}if(a=e.child,!po(e,i)){var s=a.memoizedProps;if((r=null!==(r=r.compare)?r:Kr)(s,n)&&e.ref===t.ref)return ho(e,t,i)}return t.flags|=1,(e=Ll(a,n)).ref=t.ref,e.return=t,t.child=e}function qs(e,t,r,n,i){if(null!==e){var a=e.memoizedProps;if(Kr(a,n)&&e.ref===t.ref){if(Vs=!1,t.pendingProps=n=a,!po(e,i))return t.lanes=e.lanes,ho(e,t,i);0!==(131072&e.flags)&&(Vs=!0)}}return Xs(e,t,r,n,i)}function Ks(e,t,r){var n=t.pendingProps,i=n.children,a=0!==(2&t.stateNode._pendingVisibility),s=null!==e?e.memoizedState:null;if(Ys(e,t),"hidden"===n.mode||a){if(0!==(128&t.flags)){if(n=null!==s?s.baseLanes|r:r,null!==e){for(i=t.child=e.child,a=0;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~n}else t.childLanes=0,t.child=null;return Zs(e,t,n,r)}if(0===(536870912&r))return t.lanes=t.childLanes=536870912,Zs(e,t,null!==s?s.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==s?s.cachePool:null),null!==s?ji(t,s):Ei(),Ai(t)}else null!==s?(Yi(0,s.cachePool),ji(t,s),Mi(),t.memoizedState=null):(null!==e&&Yi(0,null),Ei(),Mi());return Hs(e,t,i,r),t.child}function Zs(e,t,r,n){var i=Zi();return i=null===i?null:{parent:$i._currentValue,pool:i},t.memoizedState={baseLanes:r,cachePool:i},null!==e&&Yi(0,null),Ei(),Ai(t),null!==e&&_o(e,t,n,!0),null}function Ys(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof r&&"object"!==typeof r)throw Error(s(284));null!==e&&e.ref===r||(t.flags|=2097664)}}function Xs(e,t,r,n,i){return So(t),r=da(e,t,r,n,void 0,i),n=ma(),null===e||Vs?(Yn&&n&&Wn(t),t.flags|=1,Hs(e,t,r,i),t.child):(ga(e,t,i),ho(e,t,i))}function Qs(e,t,r,n,i,a){return So(t),t.updateQueue=null,r=pa(t,n,r,i),ha(e),n=ma(),null===e||Vs?(Yn&&n&&Wn(t),t.flags|=1,Hs(e,t,r,a),t.child):(ga(e,t,a),ho(e,t,a))}function Js(e,t,r,n,i){if(So(t),null===t.stateNode){var a=Mn,s=r.contextType;"object"===typeof s&&null!==s&&(a=jo(s)),a=new r(n,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=Ts,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=n,a.state=t.memoizedState,a.refs={},To(t),s=r.contextType,a.context="object"===typeof s&&null!==s?jo(s):Mn,a.state=t.memoizedState,"function"===typeof(s=r.getDerivedStateFromProps)&&(Ns(t,r,s,n),a.state=t.memoizedState),"function"===typeof r.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(s=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&Ts.enqueueReplaceState(a,a.state,null),Lo(t,n,a,i),Ro(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=Ms(r,o);a.props=l;var c=a.context,u=r.contextType;s=Mn,"object"===typeof u&&null!==u&&(s=jo(u));var d=r.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o||c!==s)&&As(t,a,n,s),No=!1;var h=t.memoizedState;a.state=h,Lo(t,n,a,i),Ro(),c=t.memoizedState,o||h!==c||No?("function"===typeof d&&(Ns(t,r,d,n),c=t.memoizedState),(l=No||Ps(t,r,l,n,h,c,s))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=s,n=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Po(e,t),u=Ms(r,s=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=r.contextType,l=Mn,"object"===typeof c&&null!==c&&(l=jo(c)),(c="function"===typeof(o=r.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&As(t,a,n,l),No=!1,h=t.memoizedState,a.state=h,Lo(t,n,a,i),Ro();var p=t.memoizedState;s!==d||h!==p||No||null!==e&&null!==e.dependencies&&ko(e.dependencies)?("function"===typeof o&&(Ns(t,r,o,n),p=t.memoizedState),(u=No||Ps(t,r,u,n,h,p,l)||null!==e&&null!==e.dependencies&&ko(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=l,n=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return a=n,Ys(e,t),n=0!==(128&t.flags),a||n?(a=t.stateNode,r=n&&"function"!==typeof r.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&n?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,r,i)):Hs(e,t,r,i),t.memoizedState=a.state,e=t.child):e=ho(e,t,i),e}function eo(e,t,r,n){return ii(),t.flags|=256,Hs(e,t,r,n),t.child}var to={dehydrated:null,treeContext:null,retryLane:0};function ro(e){return{baseLanes:e,cachePool:Xi()}}function no(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=fc),e}function io(e,t,r){var n,i=t.pendingProps,a=!1,o=0!==(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!==(2&Oi.current)),n&&(a=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(Yn){if(a?Pi(t):Mi(),Yn){var l,c=Zn;if(l=c){e:{for(l=c,c=Qn;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=od(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==zn?{id:Un,overflow:Vn}:null,retryLane:536870912},(l=Dl(18,null,null,0)).stateNode=c,l.return=t,t.child=l,Kn=t,Zn=null,l=!0):l=!1}l||ei(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=536870912,null;Ii(t)}return c=i.children,i=i.fallback,a?(Mi(),c=so({mode:"hidden",children:c},a=t.mode),i=Bl(i,a,r,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(a=t.child).memoizedState=ro(r),a.childLanes=no(e,n,r),t.memoizedState=to,i):(Pi(t),ao(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(Pi(t),t.flags&=-257,t=oo(e,t,r)):null!==t.memoizedState?(Mi(),t.child=e.child,t.flags|=128,t=null):(Mi(),a=i.fallback,c=t.mode,i=so({mode:"visible",children:i.children},c),(a=Bl(a,c,r,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,wi(t,e.child,null,r),(i=t.child).memoizedState=ro(r),i.childLanes=no(e,n,r),t.memoizedState=to,t=a);else if(Pi(t),"$!"===c.data){if(n=c.nextSibling&&c.nextSibling.dataset)var u=n.dgst;n=u,(i=Error(s(419))).stack="",i.digest=n,ai({value:i,source:null,stack:null}),t=oo(e,t,r)}else if(Vs||_o(e,t,r,!1),n=0!==(r&e.childLanes),Vs||n){if(null!==(n=tc)){if(0!==(42&(i=r&-r)))i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(0!==(i=0!==(i&(n.suspendedLanes|r))?0:i)&&i!==l.retryLane)throw l.retryLane=i,Tn(e,i),Mc(n,e,i),Us}"$?"===c.data||Hc(),t=oo(e,t,r)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=ou.bind(null,e),c._reactRetry=t,t=null):(e=l.treeContext,Zn=od(c.nextSibling),Kn=t,Yn=!0,Xn=null,Qn=!1,null!==e&&($n[Bn++]=Un,$n[Bn++]=Vn,$n[Bn++]=zn,Un=e.id,Vn=e.overflow,zn=t),(t=ao(t,i.children)).flags|=4096);return t}return a?(Mi(),a=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Ll(l,{mode:"hidden",children:i.children})).subtreeFlags=31457280&l.subtreeFlags,null!==u?a=Ll(u,a):(a=Bl(a,c,r,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,null===(c=e.child.memoizedState)?c=ro(r):(null!==(l=c.cachePool)?(u=$i._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Xi(),c={baseLanes:c.baseLanes|r,cachePool:l}),a.memoizedState=c,a.childLanes=no(e,n,r),t.memoizedState=to,i):(Pi(t),e=(r=e.child).sibling,(r=Ll(r,{mode:"visible",children:i.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function ao(e,t){return(t=so({mode:"visible",children:t},e.mode)).return=e,e.child=t}function so(e,t){return zl(e,t,0,null)}function oo(e,t,r){return wi(t,e.child,null,r),(e=ao(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function lo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),bo(e.return,t,r)}function co(e,t,r,n,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function uo(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Hs(e,t,n.children,r),0!==(2&(n=Oi.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&lo(e,r,t);else if(19===e.tag)lo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(K(Oi,n),i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===Di(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),co(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Di(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}co(t,!0,r,null,a);break;case"together":co(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ho(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),dc|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(_o(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Ll(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ll(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function po(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ko(e))}function fo(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Vs=!0;else{if(!po(e,r)&&0===(128&t.flags))return Vs=!1,function(e,t,r){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),xo(t,$i,e.memoizedState.cache),ii();break;case 27:case 5:te(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:xo(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(Pi(t),t.flags|=128,null):0!==(r&t.child.childLanes)?io(e,t,r):(Pi(t),null!==(e=ho(e,t,r))?e.sibling:null);Pi(t);break;case 19:var i=0!==(128&e.flags);if((n=0!==(r&t.childLanes))||(_o(e,t,r,!1),n=0!==(r&t.childLanes)),i){if(n)return uo(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),K(Oi,Oi.current),n)break;return null;case 22:case 23:return t.lanes=0,Ks(e,t,r);case 24:xo(t,$i,e.memoizedState.cache)}return ho(e,t,r)}(e,t,r);Vs=0!==(131072&e.flags)}else Vs=!1,Yn&&0!==(1048576&t.flags)&&Gn(t,Fn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,i=n._init;if(n=i(n._payload),t.type=n,"function"!==typeof n){if(void 0!==n&&null!==n){if((i=n.$$typeof)===v){t.tag=11,t=Gs(null,t,n,e,r);break e}if(i===b){t.tag=14,t=Ws(null,t,n,e,r);break e}}throw t=C(n)||n,Error(s(306,t,""))}Rl(n)?(e=Ms(n,e),t.tag=1,t=Js(null,t,n,e,r)):(t.tag=0,t=Xs(null,t,n,e,r))}return t;case 0:return Xs(e,t,t.type,t.pendingProps,r);case 1:return Js(e,t,n=t.type,i=Ms(n,t.pendingProps),r);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(s(387));var a=t.pendingProps;n=(i=t.memoizedState).element,Po(e,t),Lo(t,a,null,r);var o=t.memoizedState;if(a=o.cache,xo(t,$i,a),a!==i.cache&&wo(t,[$i],r,!0),Ro(),a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=eo(e,t,a,r);break e}if(a!==n){ai(n=On(Error(s(424)),t)),t=eo(e,t,a,r);break e}for(Zn=od(t.stateNode.containerInfo.firstChild),Kn=t,Yn=!0,Xn=null,Qn=!0,r=_i(t,null,a,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ii(),a===n){t=ho(e,t,r);break e}Hs(e,t,a,r)}t=t.child}return t;case 26:return Ys(e,t),null===e?(r=gd(t.type,null,t.pendingProps,null))?t.memoizedState=r:Yn||(r=t.type,e=t.pendingProps,(n=Zu(X.current).createElement(r))[Fe]=t,n[$e]=e,Wu(n,r,e),Xe(n),t.stateNode=n):t.memoizedState=gd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Yn&&(n=t.stateNode=cd(t.type,t.pendingProps,X.current),Kn=t,Qn=!0,Zn=od(n.firstChild)),n=t.pendingProps.children,null!==e||Yn?Hs(e,t,n,r):t.child=wi(t,null,n,r),Ys(e,t),t.child;case 5:return null===e&&Yn&&((i=n=Zn)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var i=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Ge])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==i.rel||e.getAttribute("href")!==(null==i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===a)return e}if(null===(e=od(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,Qn))?(t.stateNode=n,Kn=t,Zn=od(n.firstChild),Qn=!1,i=!0):i=!1),i||ei(t)),te(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,n=a.children,Qu(i,a)?n=null:null!==o&&Qu(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=da(e,t,fa,null,null,r),Rd._currentValue=i),Ys(e,t),Hs(e,t,n,r),t.child;case 6:return null===e&&Yn&&((e=r=Zn)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=od(e.nextSibling)))return null}return e}(r,t.pendingProps,Qn))?(t.stateNode=r,Kn=t,Zn=null,e=!0):e=!1),e||ei(t)),null;case 13:return io(e,t,r);case 4:return J(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=wi(t,null,n,r):Hs(e,t,n,r),t.child;case 11:return Gs(e,t,t.type,t.pendingProps,r);case 7:return Hs(e,t,t.pendingProps,r),t.child;case 8:case 12:return Hs(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,xo(t,t.type,n.value),Hs(e,t,n.children,r),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,So(t),n=n(i=jo(i)),t.flags|=1,Hs(e,t,n,r),t.child;case 14:return Ws(e,t,t.type,t.pendingProps,r);case 15:return qs(e,t,t.type,t.pendingProps,r);case 19:return uo(e,t,r);case 22:return Ks(e,t,r);case 24:return So(t),n=jo($i),null===e?(null===(i=Zi())&&(i=tc,a=Bi(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=r),i=a),t.memoizedState={parent:n,cache:i},To(t),xo(t,$i,i)):(0!==(e.lanes&r)&&(Po(e,t),Lo(t,null,null,r),Ro()),i=e.memoizedState,a=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),xo(t,$i,n)):(n=a.cache,xo(t,$i,n),n!==i.cache&&wo(t,[$i],r,!0))),Hs(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}var mo=W(null),go=null,vo=null;function xo(e,t,r){K(mo,t._currentValue),t._currentValue=r}function yo(e){e._currentValue=mo.current,q(mo)}function bo(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wo(e,t,r,n){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),bo(a.return,r,e),n||(o=null);break e}a=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(a=o.alternate)&&(a.lanes|=r),bo(o,r,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function _o(e,t,r,n){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(0!==(524288&i.flags))a=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=i.type;qr(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===Q.current){if(null===(o=i.alternate))throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Rd):e=[Rd])}i=i.return}null!==e&&wo(t,e,r,n),t.flags|=262144}function ko(e){for(e=e.firstContext;null!==e;){if(!qr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function So(e){go=e,vo=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function jo(e){return Co(go,e)}function Eo(e,t){return null===go&&So(e),Co(e,t)}function Co(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===vo){if(null===e)throw Error(s(308));vo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vo=vo.next=t;return r}var No=!1;function To(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Po(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ao(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Mo(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&ec)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=An(e),Pn(e,null,r),t}return Cn(e,n,t,r),An(e)}function Io(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Oe(e,r)}}function Oo(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var s={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===a?i=a=s:a=a.next=s,r=r.next}while(null!==r);null===a?i=a=t:a=a.next=t}else i=a=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var Do=!1;function Ro(){if(Do){if(null!==Gi)throw Gi}}function Lo(e,t,r,n){Do=!1;var i=e.updateQueue;No=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,u=c=l=null,o=a;;){var h=-536870913&o.lane,p=h!==o.lane;if(p?(nc&h)===h:(n&h)===h){0!==h&&h===Hi&&(Do=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var f=e,m=o;h=t;var g=r;switch(m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(g,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(g,d,h):f)||void 0===h)break e;d=A({},d,h);break e;case 2:No=!0}}null!==(h=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===a&&(i.shared.lanes=0),dc|=s,e.lanes=s,e.memoizedState=d}}function Fo(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function $o(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)Fo(r[e],t)}function Bo(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var i=n.next;r=i;do{if((r.tag&e)===e){n=void 0;var a=r.create,s=r.inst;n=a(),s.destroy=n}r=r.next}while(r!==i)}}catch(o){nu(t,t.return,o)}}function zo(e,t,r){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var a=i.next;n=a;do{if((n.tag&e)===e){var s=n.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,i=t;var l=r;try{o()}catch(c){nu(i,l,c)}}}n=n.next}while(n!==a)}}catch(c){nu(t,t.return,c)}}function Uo(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{$o(t,r)}catch(n){nu(e,e.return,n)}}}function Vo(e,t,r){r.props=Ms(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){nu(e,t,n)}}function Ho(e,t){try{var r=e.ref;if(null!==r){var n=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=n;break;default:i=n}"function"===typeof r?e.refCleanup=r(i):r.current=i}}catch(a){nu(e,t,a)}}function Go(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"===typeof n)try{n()}catch(i){nu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof r)try{r(null)}catch(a){nu(e,t,a)}else r.current=null}function Wo(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(i){nu(e,e.return,i)}}function qo(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,o=null,l=null,c=null,u=null,d=null;for(f in r){var h=r[f];if(r.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(f)||Hu(e,t,f,null,n,h)}}for(var p in n){var f=n[p];if(h=r[p],n.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":a=f;break;case"name":i=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:f!==h&&Hu(e,t,p,f,n,h)}}return void gt(e,o,l,c,u,d,a,i);case"select":for(a in f=o=l=p=null,r)if(c=r[a],r.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":f=c;default:n.hasOwnProperty(a)||Hu(e,t,a,null,n,c)}for(i in n)if(a=n[i],c=r[i],n.hasOwnProperty(i)&&(null!=a||null!=c))switch(i){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&Hu(e,t,i,a,n,c)}return t=l,r=o,n=f,void(null!=p?yt(e,!!r,p,!1):!!n!==!!r&&(null!=t?yt(e,!!r,t,!0):yt(e,!!r,r?[]:"",!1)));case"textarea":for(l in f=p=null,r)if(i=r[l],r.hasOwnProperty(l)&&null!=i&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Hu(e,t,l,null,n,i)}for(o in n)if(i=n[o],a=r[o],n.hasOwnProperty(o)&&(null!=i||null!=a))switch(o){case"value":p=i;break;case"defaultValue":f=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==a&&Hu(e,t,o,i,n,a)}return void bt(e,p,f);case"option":for(var m in r)if(p=r[m],r.hasOwnProperty(m)&&null!=p&&!n.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Hu(e,t,m,null,n,p);for(c in n)if(p=n[c],f=r[c],n.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Hu(e,t,c,p,n,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)p=r[g],r.hasOwnProperty(g)&&null!=p&&!n.hasOwnProperty(g)&&Hu(e,t,g,null,n,p);for(u in n)if(p=n[u],f=r[u],n.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:Hu(e,t,u,p,n,f)}return;default:if(Et(t)){for(var v in r)p=r[v],r.hasOwnProperty(v)&&void 0!==p&&!n.hasOwnProperty(v)&&Gu(e,t,v,void 0,n,p);for(d in n)p=n[d],f=r[d],!n.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||Gu(e,t,d,p,n,f);return}}for(var x in r)p=r[x],r.hasOwnProperty(x)&&null!=p&&!n.hasOwnProperty(x)&&Hu(e,t,x,null,n,p);for(h in n)p=n[h],f=r[h],!n.hasOwnProperty(h)||p===f||null==p&&null==f||Hu(e,t,h,p,n,f)}(n,e.type,r,t),n[$e]=t}catch(i){nu(e,e.return,i)}}function Ko(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Zo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ko(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Yo(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Vu));else if(4!==n&&27!==n&&null!==(e=e.child))for(Yo(e,t,r),e=e.sibling;null!==e;)Yo(e,t,r),e=e.sibling}function Xo(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&27!==n&&null!==(e=e.child))for(Xo(e,t,r),e=e.sibling;null!==e;)Xo(e,t,r),e=e.sibling}var Qo=!1,Jo=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,rl=null,nl=!1;function il(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:vl(e,r),4&n&&Bo(5,r);break;case 1:if(vl(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(o){nu(r,r.return,o)}else{var i=Ms(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){nu(r,r.return,l)}}64&n&&Uo(r),512&n&&Ho(r,r.return);break;case 3:if(vl(e,r),64&n&&null!==(n=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:e=r.child.stateNode}try{$o(n,e)}catch(o){nu(r,r.return,o)}}break;case 26:vl(e,r),512&n&&Ho(r,r.return);break;case 27:case 5:vl(e,r),null===t&&4&n&&Wo(r),512&n&&Ho(r,r.return);break;case 12:default:vl(e,r);break;case 13:vl(e,r),4&n&&ul(e,r);break;case 22:if(!(i=null!==r.memoizedState||Qo)){t=null!==t&&null!==t.memoizedState||Jo;var a=Qo,s=Jo;Qo=i,(Jo=t)&&!s?yl(e,r,0!==(8772&r.subtreeFlags)):vl(e,r),Qo=a,Jo=s}512&n&&("manual"===r.memoizedProps.mode?Ho(r,r.return):Go(r,r.return))}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sl=null,ol=!1;function ll(e,t,r){for(r=r.child;null!==r;)cl(e,t,r),r=r.sibling}function cl(e,t,r){if(xe&&"function"===typeof xe.onCommitFiberUnmount)try{xe.onCommitFiberUnmount(ve,r)}catch(s){}switch(r.tag){case 26:Jo||Go(r,t),ll(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:Jo||Go(r,t);var n=sl,i=ol;for(sl=r.stateNode,ll(e,t,r),t=(r=r.stateNode).attributes;t.length;)r.removeAttributeNode(t[0]);We(r),sl=n,ol=i;break;case 5:Jo||Go(r,t);case 6:i=sl;var a=ol;if(sl=null,ll(e,t,r),ol=a,null!==(sl=i))if(ol)try{e=sl,n=r.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)}catch(o){nu(r,t,o)}else try{sl.removeChild(r.stateNode)}catch(o){nu(r,t,o)}break;case 18:null!==sl&&(ol?(t=sl,r=r.stateNode,8===t.nodeType?ad(t.parentNode,r):1===t.nodeType&&ad(t,r),mh(t)):ad(sl,r.stateNode));break;case 4:n=sl,i=ol,sl=r.stateNode.containerInfo,ol=!0,ll(e,t,r),sl=n,ol=i;break;case 0:case 11:case 14:case 15:Jo||zo(2,r,t),Jo||zo(4,r,t),ll(e,t,r);break;case 1:Jo||(Go(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount&&Vo(r,t,n)),ll(e,t,r);break;case 21:ll(e,t,r);break;case 22:Jo||Go(r,t),Jo=(n=Jo)||null!==r.memoizedState,ll(e,t,r),Jo=n;break;default:ll(e,t,r)}}function ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{mh(e)}catch(r){nu(t,t.return,r)}}function dl(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var n=lu.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}function hl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:case 5:sl=l.stateNode,ol=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ol=!0;break e}l=l.return}if(null===sl)throw Error(s(160));cl(a,o,i),sl=null,ol=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}var pl=null;function fl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),ml(e),4&n&&(zo(3,e,e.return),Bo(3,e),zo(5,e,e.return));break;case 1:hl(t,e),ml(e),512&n&&(Jo||null===r||Go(r,r.return)),64&n&&Qo&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n))));break;case 26:var i=pl;if(hl(t,e),ml(e),512&n&&(Jo||null===r||Go(r,r.return)),4&n){var a=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":(!(a=i.getElementsByTagName("title")[0])||a[Ge]||a[Fe]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(n),i.head.insertBefore(a,i.querySelector("head > title"))),Wu(a,n,r),a[Fe]=e,Xe(a),n=a;break e;case"link":var o=Cd("link","href",i).get(n+(r.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==r.href?null:r.href)&&a.getAttribute("rel")===(null==r.rel?null:r.rel)&&a.getAttribute("title")===(null==r.title?null:r.title)&&a.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){o.splice(l,1);break t}Wu(a=i.createElement(n),n,r),i.head.appendChild(a);break;case"meta":if(o=Cd("meta","content",i).get(n+(r.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&a.getAttribute("name")===(null==r.name?null:r.name)&&a.getAttribute("property")===(null==r.property?null:r.property)&&a.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&a.getAttribute("charset")===(null==r.charSet?null:r.charSet)){o.splice(l,1);break t}Wu(a=i.createElement(n),n,r),i.head.appendChild(a);break;default:throw Error(s(468,n))}a[Fe]=e,Xe(a),n=a}e.stateNode=n}else Nd(i,e.type,e.stateNode);else e.stateNode=_d(i,n,e.memoizedProps);else a!==n?(null===a?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):a.count--,null===n?Nd(i,e.type,e.stateNode):_d(i,n,e.memoizedProps)):null===n&&null!==e.stateNode&&qo(e,e.memoizedProps,r.memoizedProps)}break;case 27:if(4&n&&null===e.alternate){i=e.stateNode,a=e.memoizedProps;try{for(var c=i.firstChild;c;){var u=c.nextSibling,d=c.nodeName;c[Ge]||"HEAD"===d||"BODY"===d||"SCRIPT"===d||"STYLE"===d||"LINK"===d&&"stylesheet"===c.rel.toLowerCase()||i.removeChild(c),c=u}for(var h=e.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Wu(i,h,a),i[Fe]=e,i[$e]=a}catch(m){nu(e,e.return,m)}}case 5:if(hl(t,e),ml(e),512&n&&(Jo||null===r||Go(r,r.return)),32&e.flags){i=e.stateNode;try{_t(i,"")}catch(m){nu(e,e.return,m)}}4&n&&null!=e.stateNode&&qo(e,i=e.memoizedProps,null!==r?r.memoizedProps:i),1024&n&&(el=!0);break;case 6:if(hl(t,e),ml(e),4&n){if(null===e.stateNode)throw Error(s(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(m){nu(e,e.return,m)}}break;case 3:if(Ed=null,i=pl,pl=hd(t.containerInfo),hl(t,e),pl=i,ml(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{mh(t.containerInfo)}catch(m){nu(e,e.return,m)}el&&(el=!1,gl(e));break;case 4:n=pl,pl=hd(e.stateNode.containerInfo),hl(t,e),ml(e),pl=n;break;case 12:hl(t,e),ml(e);break;case 13:hl(t,e),ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==r&&null!==r.memoizedState)&&(yc=le()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,dl(e,n)));break;case 22:if(512&n&&(Jo||null===r||Go(r,r.return)),c=null!==e.memoizedState,u=null!==r&&null!==r.memoizedState,Qo=(d=Qo)||c,Jo=(h=Jo)||u,hl(t,e),Jo=h,Qo=d,ml(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&n&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=Qo||Jo,null===r||u||t||xl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(r=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===r){u=r=t;try{if(i=u.stateNode,c)"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{o=u.stateNode;var f=void 0!==(l=u.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;o.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){nu(u,u.return,m)}}}else if(6===t.tag){if(null===r){u=t;try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){nu(u,u.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(r=n.retryQueue)&&(n.retryQueue=null,dl(e,r))));break;case 19:hl(t,e),ml(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,dl(e,n)));break;case 21:break;default:hl(t,e),ml(e)}}function ml(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var r=e.return;null!==r;){if(Ko(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 27:var i=n.stateNode;Xo(e,Zo(e),i);break;case 5:var a=n.stateNode;32&n.flags&&(_t(a,""),n.flags&=-33),Xo(e,Zo(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Yo(e,Zo(e),o);break;default:throw Error(s(161))}}}catch(l){nu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function vl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)il(e,t.alternate,t),t=t.sibling}function xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:zo(4,t,t.return),xl(t);break;case 1:Go(t,t.return);var r=t.stateNode;"function"===typeof r.componentWillUnmount&&Vo(t,t.return,r),xl(t);break;case 26:case 27:case 5:Go(t,t.return),xl(t);break;case 22:Go(t,t.return),null===t.memoizedState&&xl(t);break;default:xl(t)}e=e.sibling}}function yl(e,t,r){for(r=r&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,i=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:yl(i,a,r),Bo(4,a);break;case 1:if(yl(i,a,r),"function"===typeof(i=(n=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){nu(n,n.return,c)}if(null!==(i=(n=a).updateQueue)){var o=n.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Fo(l[i],o)}catch(c){nu(n,n.return,c)}}r&&64&s&&Uo(a),Ho(a,a.return);break;case 26:case 27:case 5:yl(i,a,r),r&&null===n&&4&s&&Wo(a),Ho(a,a.return);break;case 12:default:yl(i,a,r);break;case 13:yl(i,a,r),r&&4&s&&ul(i,a);break;case 22:null===a.memoizedState&&yl(i,a,r),Ho(a,a.return)}t=t.sibling}}function bl(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&zi(r))}function wl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zi(e))}function _l(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t,r,n),t=t.sibling}function kl(e,t,r,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:_l(e,t,r,n),2048&i&&Bo(9,t);break;case 3:_l(e,t,r,n),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&zi(e)));break;case 12:if(2048&i){_l(e,t,r,n),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){nu(t,t.return,l)}}else _l(e,t,r,n);break;case 23:break;case 22:a=t.stateNode,null!==t.memoizedState?4&a._visibility?_l(e,t,r,n):jl(e,t):4&a._visibility?_l(e,t,r,n):(a._visibility|=4,Sl(e,t,r,n,0!==(10256&t.subtreeFlags))),2048&i&&bl(t.alternate,t);break;case 24:_l(e,t,r,n),2048&i&&wl(t.alternate,t);break;default:_l(e,t,r,n)}}function Sl(e,t,r,n,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,s=t,o=r,l=n,c=s.flags;switch(s.tag){case 0:case 11:case 15:Sl(a,s,o,l,i),Bo(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?4&u._visibility?Sl(a,s,o,l,i):jl(a,s):(u._visibility|=4,Sl(a,s,o,l,i)),i&&2048&c&&bl(s.alternate,s);break;case 24:Sl(a,s,o,l,i),i&&2048&c&&wl(s.alternate,s);break;default:Sl(a,s,o,l,i)}t=t.sibling}}function jl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,i=n.flags;switch(n.tag){case 22:jl(r,n),2048&i&&bl(n.alternate,n);break;case 24:jl(r,n),2048&i&&wl(n.alternate,n);break;default:jl(r,n)}t=t.sibling}}var El=8192;function Cl(e){if(e.subtreeFlags&El)for(e=e.child;null!==e;)Nl(e),e=e.sibling}function Nl(e){switch(e.tag){case 26:Cl(e),e.flags&El&&null!==e.memoizedState&&function(e,t,r){if(null===Pd)throw Error(s(475));var n=Pd;if("stylesheet"===t.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=vd(r.href),a=e.querySelector(xd(i));if(a)return null!==(e=a._p)&&"object"===typeof e&&"function"===typeof e.then&&(n.count++,n=Md.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=a,void Xe(a);a=e.ownerDocument||e,r=yd(r),(i=ud.get(i))&&Sd(r,i),Xe(a=a.createElement("link"));var o=a;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),Wu(a,"link",r),t.instance=a}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(n.count++,t=Md.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(pl,e.memoizedState,e.memoizedProps);break;case 5:default:Cl(e);break;case 3:case 4:var t=pl;pl=hd(e.stateNode.containerInfo),Cl(e),pl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=El,El=16777216,Cl(e),El=t):Cl(e))}}function Tl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Pl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];rl=n,Il(n,e)}Tl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Al(e),e=e.sibling}function Al(e){switch(e.tag){case 0:case 11:case 15:Pl(e),2048&e.flags&&zo(9,e,e.return);break;case 3:case 12:default:Pl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Ml(e)):Pl(e)}}function Ml(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];rl=n,Il(n,e)}Tl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:zo(8,t,t.return),Ml(t);break;case 22:4&(r=t.stateNode)._visibility&&(r._visibility&=-5,Ml(t));break;default:Ml(t)}e=e.sibling}}function Il(e,t){for(;null!==rl;){var r=rl;switch(r.tag){case 0:case 11:case 15:zo(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:zi(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,rl=n;else e:for(r=e;null!==rl;){var i=(n=rl).sibling,a=n.return;if(al(n),n===r){rl=null;break e}if(null!==i){i.return=a,rl=i;break e}rl=a}}}function Ol(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dl(e,t,r,n){return new Ol(e,t,r,n)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ll(e,t){var r=e.alternate;return null===r?((r=Dl(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=31457280&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Fl(e,t){e.flags&=31457282;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $l(e,t,r,n,i,a){var o=0;if(n=e,"function"===typeof e)Rl(e)&&(o=1);else if("string"===typeof e)o=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,r,Z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case d:return Bl(r.children,i,a,t);case h:o=8,i|=24;break;case p:return(e=Dl(12,r,t,2|i)).elementType=p,e.lanes=a,e;case x:return(e=Dl(13,r,t,i)).elementType=x,e.lanes=a,e;case y:return(e=Dl(19,r,t,i)).elementType=y,e.lanes=a,e;case _:return zl(r,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case f:case g:o=10;break e;case m:o=9;break e;case v:o=11;break e;case b:o=14;break e;case w:o=16,n=null;break e}o=29,r=Error(s(130,null===e?"null":typeof e,"")),n=null}return(t=Dl(o,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function Bl(e,t,r,n){return(e=Dl(7,e,n,t)).lanes=r,e}function zl(e,t,r,n){(e=Dl(22,e,n,t)).elementType=_,e.lanes=r;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=i._current;if(null===e)throw Error(s(456));if(0===(2&i._pendingVisibility)){var t=Tn(e,2);null!==t&&(i._pendingVisibility|=2,Mc(t,e,2))}},attach:function(){var e=i._current;if(null===e)throw Error(s(456));if(0!==(2&i._pendingVisibility)){var t=Tn(e,2);null!==t&&(i._pendingVisibility&=-3,Mc(t,e,2))}}};return e.stateNode=i,e}function Ul(e,t,r){return(e=Dl(6,e,null,t)).lanes=r,e}function Vl(e,t,r){return(t=Dl(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hl(e){e.flags|=4}function Gl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Td(t)){if(null!==(t=Ni.current)&&((4194176&nc)===nc?null!==Ti:(62914560&nc)!==nc&&0===(536870912&nc)||t!==Ti))throw hi=li,oi;e.flags|=8192}}function Wl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,mc|=t)}function ql(e,t){if(!Yn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Kl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=31457280&i.subtreeFlags,n|=31457280&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Zl(e,t,r){var n=t.pendingProps;switch(qn(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Kl(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),yo($i),ee(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ni(t)?Hl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Xn&&(Oc(Xn),Xn=null))),Kl(t),null;case 26:return r=t.memoizedState,null===e?(Hl(t),null!==r?(Kl(t),Gl(t,r)):(Kl(t),t.flags&=-16777217)):r?r!==e.memoizedState?(Hl(t),Kl(t),Gl(t,r)):(Kl(t),t.flags&=-16777217):(e.memoizedProps!==n&&Hl(t),Kl(t),t.flags&=-16777217),null;case 27:re(t),r=X.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Hl(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Kl(t),null}e=Z.current,ni(t)?ti(t):(e=cd(i,n,r),t.stateNode=e,Hl(t))}return Kl(t),null;case 5:if(re(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Hl(t);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Kl(t),null}if(e=Z.current,ni(t))ti(t);else{switch(i=Zu(X.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof n.is?i.createElement("select",{is:n.is}):i.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"===typeof n.is?i.createElement(r,{is:n.is}):i.createElement(r)}}e[Fe]=t,e[$e]=n;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(Wu(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Hl(t)}}return Kl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&Hl(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(e=X.current,ni(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(i=Kn))switch(i.tag){case 27:case 5:n=i.memoizedProps}e[Fe]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||Uu(e.nodeValue,r)))||ei(t)}else(e=Zu(e).createTextNode(n))[Fe]=t,t.stateNode=e}return Kl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=ni(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[Fe]=t}else ii(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Kl(t),i=!1}else null!==Xn&&(Oc(Xn),Xn=null),i=!0;if(!i)return 256&t.flags?(Ii(t),t):(Ii(t),null)}if(Ii(t),0!==(128&t.flags))return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){i=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(i=n.alternate.memoizedState.cachePool.pool);var a=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(a=n.memoizedState.cachePool.pool),a!==i&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),Wl(t,t.updateQueue),Kl(t),null;case 4:return ee(),null===e&&Mu(t.stateNode.containerInfo),Kl(t),null;case 10:return yo(t.type),Kl(t),null;case 19:if(q(Oi),null===(i=t.memoizedState))return Kl(t),null;if(n=0!==(128&t.flags),null===(a=i.rendering))if(n)ql(i,!1);else{if(0!==uc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Di(e))){for(t.flags|=128,ql(i,!1),e=a.updateQueue,t.updateQueue=e,Wl(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Fl(r,e),r=r.sibling;return K(Oi,1&Oi.current|2),t.child}e=e.sibling}null!==i.tail&&le()>bc&&(t.flags|=128,n=!0,ql(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Di(a))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Wl(t,e),ql(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Yn)return Kl(t),null}else 2*le()-i.renderingStartTime>bc&&536870912!==r&&(t.flags|=128,n=!0,ql(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=le(),t.sibling=null,e=Oi.current,K(Oi,n?1&e|2:1&e),t):(Kl(t),null);case 22:case 23:return Ii(t),Ci(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&r)&&0===(128&t.flags)&&(Kl(t),6&t.subtreeFlags&&(t.flags|=8192)):Kl(t),null!==(r=t.updateQueue)&&Wl(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&q(Ki),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),yo($i),Kl(t),null;case 25:return null}throw Error(s(156,t.tag))}function Yl(e,t){switch(qn(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return yo($i),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return re(t),null;case 13:if(Ii(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ii()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return q(Oi),null;case 4:return ee(),null;case 10:return yo(t.type),null;case 22:case 23:return Ii(t),Ci(),null!==e&&q(Ki),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return yo($i),null;default:return null}}function Xl(e,t){switch(qn(t),t.tag){case 3:yo($i),ee();break;case 26:case 27:case 5:re(t);break;case 4:ee();break;case 13:Ii(t);break;case 19:q(Oi);break;case 10:yo(t.type);break;case 22:case 23:Ii(t),Ci(),null!==e&&q(Ki);break;case 24:yo($i)}}var Ql={getCacheForType:function(e){var t=jo($i),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},Jl="function"===typeof WeakMap?WeakMap:Map,ec=0,tc=null,rc=null,nc=0,ic=0,ac=null,sc=!1,oc=!1,lc=!1,cc=0,uc=0,dc=0,hc=0,pc=0,fc=0,mc=0,gc=null,vc=null,xc=!1,yc=0,bc=1/0,wc=null,_c=null,kc=!1,Sc=null,jc=0,Ec=0,Cc=null,Nc=0,Tc=null;function Pc(){if(0!==(2&ec)&&0!==nc)return nc&-nc;if(null!==P.T){return 0!==Hi?Hi:wu()}return Re()}function Ac(){0===fc&&(fc=0===(536870912&nc)||Yn?Te():536870912);var e=Ni.current;return null!==e&&(e.flags|=32),fc}function Mc(e,t,r){(e===tc&&2===ic||null!==e.cancelPendingCommit)&&(Bc(e,0),Lc(e,nc,fc,!1)),Me(e,r),0!==(2&ec)&&e===tc||(e===tc&&(0===(2&ec)&&(hc|=r),4===uc&&Lc(e,nc,fc,!1)),mu(e))}function Ic(e,t,r){if(0!==(6&ec))throw Error(s(327));for(var n=!r&&0===(60&t)&&0===(t&e.expiredLanes)||Ce(e,t),i=n?function(e,t){var r=ec;ec|=2;var n=Uc(),i=Vc();tc!==e||nc!==t?(wc=null,bc=le()+500,Bc(e,t)):oc=Ce(e,t);e:for(;;)try{if(0!==ic&&null!==rc){t=rc;var a=ac;t:switch(ic){case 1:ic=0,ac=null,Yc(e,t,a,1);break;case 2:if(ci(a)){ic=0,ac=null,Zc(t);break}t=function(){2===ic&&tc===e&&(ic=7),mu(e)},a.then(t,t);break e;case 3:ic=7;break e;case 4:ic=5;break e;case 7:ci(a)?(ic=0,ac=null,Zc(t)):(ic=0,ac=null,Yc(e,t,a,7));break;case 5:var o=null;switch(rc.tag){case 26:o=rc.memoizedState;case 5:case 27:var l=rc;if(!o||Td(o)){ic=0,ac=null;var c=l.sibling;if(null!==c)rc=c;else{var u=l.return;null!==u?(rc=u,Xc(u)):rc=null}break t}}ic=0,ac=null,Yc(e,t,a,5);break;case 6:ic=0,ac=null,Yc(e,t,a,6);break;case 8:$c(),uc=6;break e;default:throw Error(s(462))}}qc();break}catch(d){zc(e,d)}return vo=go=null,P.H=n,P.A=i,ec=r,null!==rc?0:(tc=null,nc=0,En(),uc)}(e,t):Gc(e,t,!0),a=n;;){if(0===i){oc&&!n&&Lc(e,t,0,!1);break}if(6===i)Lc(e,t,0,!sc);else{if(r=e.current.alternate,a&&!Rc(r)){i=Gc(e,t,!1),a=!1;continue}if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=gc;var c=l.current.memoizedState.isDehydrated;if(c&&(Bc(l,o).flags|=256),2!==(o=Gc(l,o,!1))){if(lc&&!c){l.errorRecoveryDisabledLanes|=a,hc|=a,i=4;break e}a=vc,vc=i,null!==a&&Oc(a)}i=o}if(a=!1,2!==i)continue}}if(1===i){Bc(e,0),Lc(e,t,0,!0);break}e:{switch(n=e,i){case 0:case 1:throw Error(s(345));case 4:if((4194176&t)===t){Lc(n,t,fc,!sc);break e}break;case 2:vc=null;break;case 3:case 5:break;default:throw Error(s(329))}if(n.finishedWork=r,n.finishedLanes=t,(62914560&t)===t&&10<(a=yc+300-le())){if(Lc(n,t,fc,!sc),0!==Ee(n,0))break e;n.timeoutHandle=ed(Dc.bind(null,n,r,vc,wc,xc,t,fc,hc,mc,sc,2,-0,0),a)}else Dc(n,r,vc,wc,xc,t,fc,hc,mc,sc,0,-0,0)}}break}mu(e)}function Oc(e){null===vc?vc=e:vc.push.apply(vc,e)}function Dc(e,t,r,n,i,a,o,l,c,u,d,h,p){var f=t.subtreeFlags;if((8192&f||16785408===(16785408&f))&&(Pd={stylesheets:null,count:0,unsuspend:Ad},Nl(t),null!==(t=function(){if(null===Pd)throw Error(s(475));var e=Pd;return e.stylesheets&&0===e.count&&Od(e,e.stylesheets),0<e.count?function(t){var r=setTimeout((function(){if(e.stylesheets&&Od(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=t(Jc.bind(null,e,r,n,i,o,l,c,1,h,p)),void Lc(e,a,o,!u);Jc(e,r,n,i,o,l,c,d,h,p)}function Rc(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&(null!==(r=t.updateQueue)&&null!==(r=r.stores)))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!qr(a(),i))return!1}catch(s){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lc(e,t,r,n){t&=~pc,t&=~hc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var a=31-be(i),s=1<<a;n[a]=-1,i&=~s}0!==r&&Ie(e,r,t)}function Fc(){return 0!==(6&ec)||(gu(0,!1),!1)}function $c(){if(null!==rc){if(0===ic)var e=rc.return;else vo=go=null,va(e=rc),fi=null,mi=0,e=rc;for(;null!==e;)Xl(e.alternate,e),e=e.return;rc=null}}function Bc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,td(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),$c(),tc=e,rc=r=Ll(e.current,null),nc=t,ic=0,ac=null,sc=!1,oc=Ce(e,t),lc=!1,mc=fc=pc=hc=dc=uc=0,vc=gc=null,xc=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var i=31-be(n),a=1<<i;t|=e[i],n&=~a}return cc=t,En(),r}function zc(e,t){Ji=null,P.H=Ss,t===si?(t=pi(),ic=3):t===oi?(t=pi(),ic=4):ic=t===Us?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===rc&&(uc=1,Ls(e,On(t,e.current)))}function Uc(){var e=P.H;return P.H=Ss,null===e?Ss:e}function Vc(){var e=P.A;return P.A=Ql,e}function Hc(){uc=4,sc||(4194176&nc)!==nc&&null!==Ni.current||(oc=!0),0===(134217727&dc)&&0===(134217727&hc)||null===tc||Lc(tc,nc,fc,!1)}function Gc(e,t,r){var n=ec;ec|=2;var i=Uc(),a=Vc();tc===e&&nc===t||(wc=null,Bc(e,t)),t=!1;var s=uc;e:for(;;)try{if(0!==ic&&null!==rc){var o=rc,l=ac;switch(ic){case 8:$c(),s=6;break e;case 3:case 2:case 6:null===Ni.current&&(t=!0);var c=ic;if(ic=0,ac=null,Yc(e,o,l,c),r&&oc){s=0;break e}break;default:c=ic,ic=0,ac=null,Yc(e,o,l,c)}}Wc(),s=uc;break}catch(u){zc(e,u)}return t&&e.shellSuspendCounter++,vo=go=null,ec=n,P.H=i,P.A=a,null===rc&&(tc=null,nc=0,En()),s}function Wc(){for(;null!==rc;)Kc(rc)}function qc(){for(;null!==rc&&!se();)Kc(rc)}function Kc(e){var t=fo(e.alternate,e,cc);e.memoizedProps=e.pendingProps,null===t?Xc(e):rc=t}function Zc(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Qs(r,t,t.pendingProps,t.type,void 0,nc);break;case 11:t=Qs(r,t,t.pendingProps,t.type.render,t.ref,nc);break;case 5:va(t);default:Xl(r,t),t=fo(r,t=rc=Fl(t,cc),cc)}e.memoizedProps=e.pendingProps,null===t?Xc(e):rc=t}function Yc(e,t,r,n){vo=go=null,va(t),fi=null,mi=0;var i=t.return;try{if(function(e,t,r,n,i){if(r.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=r.alternate)&&_o(t,r,i,!0),null!==(r=Ni.current)){switch(r.tag){case 13:return null===Ti?Hc():null===r.alternate&&0===uc&&(uc=3),r.flags&=-257,r.flags|=65536,r.lanes=i,n===li?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),iu(e,n,i)),!1;case 22:return r.flags|=65536,n===li?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),iu(e,n,i)),!1}throw Error(s(435,r.tag))}return iu(e,n,i),Hc(),!1}if(Yn)return null!==(t=Ni.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==Jn&&ai(On(e=Error(s(422),{cause:n}),r))):(n!==Jn&&ai(On(t=Error(s(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,n=On(n,r),Oo(e,i=$s(e.stateNode,n,i)),4!==uc&&(uc=2)),!1;var a=Error(s(520),{cause:n});if(a=On(a,r),null===gc?gc=[a]:gc.push(a),4!==uc&&(uc=2),null===t)return!0;n=On(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=i&-i,r.lanes|=e,Oo(r,e=$s(r.stateNode,n,e)),!1;case 1:if(t=r.type,a=r.stateNode,0===(128&r.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===_c||!_c.has(a))))return r.flags|=65536,i&=-i,r.lanes|=i,zs(i=Bs(i),e,r,n),Oo(r,i),!1}r=r.return}while(null!==r);return!1}(e,i,t,r,nc))return uc=1,Ls(e,On(r,e.current)),void(rc=null)}catch(a){if(null!==i)throw rc=i,a;return uc=1,Ls(e,On(r,e.current)),void(rc=null)}32768&t.flags?(Yn||1===n?e=!0:oc||0!==(536870912&nc)?e=!1:(sc=e=!0,(2===n||3===n||6===n)&&(null!==(n=Ni.current)&&13===n.tag&&(n.flags|=16384))),Qc(t,e)):Xc(t)}function Xc(e){var t=e;do{if(0!==(32768&t.flags))return void Qc(t,sc);e=t.return;var r=Zl(t.alternate,t,cc);if(null!==r)return void(rc=r);if(null!==(t=t.sibling))return void(rc=t);rc=t=e}while(null!==t);0===uc&&(uc=5)}function Qc(e,t){do{var r=Yl(e.alternate,e);if(null!==r)return r.flags&=32767,void(rc=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(rc=e);rc=e=r}while(null!==e);uc=6,rc=null}function Jc(e,t,r,n,i,a,o,l,c,u){var d=P.T,h=U.p;try{U.p=2,P.T=null,function(e,t,r,n,i,a,o,l){do{tu()}while(null!==Sc);if(0!==(6&ec))throw Error(s(327));var c=e.finishedWork;if(n=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,r,n,i,a){var s=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(r=s&~r;0<r;){var u=31-be(r),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}r&=~d}0!==n&&Ie(e,n,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,n,u|=jn,a,o,l),e===tc&&(rc=tc=null,nc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||kc||(kc=!0,Ec=u,Cc=r,function(e,t){ie(e,t)}(he,(function(){return tu(),null}))),r=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||r?(r=P.T,P.T=null,a=U.p,U.p=2,o=ec,ec|=4,function(e,t){if(e=e.containerInfo,qu=Hd,Jr(e=Qr(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(g){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==r||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++u===i&&(l=o),p===a&&++d===n&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ku={focusedElem:e,selectionRange:r},Hd=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){switch(a=(t=rl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,r=t,i=a.memoizedProps,a=a.memoizedState,n=r.stateNode;try{var m=Ms(r.type,i,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(m,a),n.__reactInternalSnapshotBeforeUpdate=e}catch(v){nu(r,r.return,v)}}break;case 3:if(0!==(1024&e))if(9===(r=(e=t.stateNode.containerInfo).nodeType))sd(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}m=nl,nl=!1}(e,c),fl(c,e),en(Ku,e.containerInfo),Hd=!!qu,Ku=qu=null,e.current=c,il(e,c.alternate,c),oe(),ec=o,U.p=a,P.T=r):e.current=c,kc?(kc=!1,Sc=e,jc=n):eu(e,u),u=e.pendingLanes,0===u&&(_c=null),function(e){if(xe&&"function"===typeof xe.onCommitFiberRoot)try{xe.onCommitFiberRoot(ve,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),mu(e),null!==t)for(i=e.onRecoverableError,c=0;c<t.length;c++)u=t[c],i(u.value,{componentStack:u.stack});0!==(3&jc)&&tu(),u=e.pendingLanes,0!==(4194218&n)&&0!==(42&u)?e===Tc?Nc++:(Nc=0,Tc=e):Nc=0,gu(0,!1)}(e,t,r,n,h,i,a,o)}finally{P.T=d,U.p=h}}function eu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,zi(t)))}function tu(){if(null!==Sc){var e=Sc,t=Ec;Ec=0;var r=De(jc),n=P.T,i=U.p;try{if(U.p=32>r?32:r,P.T=null,null===Sc)var a=!1;else{r=Cc,Cc=null;var o=Sc,l=jc;if(Sc=null,jc=0,0!==(6&ec))throw Error(s(331));var c=ec;if(ec|=4,Al(o.current),kl(o,o.current,l,r),ec=c,gu(0,!1),xe&&"function"===typeof xe.onPostCommitFiberRoot)try{xe.onPostCommitFiberRoot(ve,o)}catch(u){}a=!0}return a}finally{U.p=i,P.T=n,eu(e,t)}}return!1}function ru(e,t,r){t=On(r,t),null!==(e=Mo(e,t=$s(e.stateNode,t,2),2))&&(Me(e,2),mu(e))}function nu(e,t,r){if(3===e.tag)ru(e,e,r);else for(;null!==t;){if(3===t.tag){ru(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===_c||!_c.has(n))){e=On(r,e),null!==(n=Mo(t,r=Bs(2),2))&&(zs(r,n,t,e),Me(n,2),mu(n));break}}t=t.return}}function iu(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new Jl;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(lc=!0,i.add(r),e=au.bind(null,e,t,r),t.then(e,e))}function au(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,tc===e&&(nc&r)===r&&(4===uc||3===uc&&(62914560&nc)===nc&&300>le()-yc?0===(2&ec)&&Bc(e,0):pc|=r,mc===nc&&(mc=0)),mu(e)}function su(e,t){0===t&&(t=Pe()),null!==(e=Tn(e,t))&&(Me(e,t),mu(e))}function ou(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),su(e,r)}function lu(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==n&&n.delete(t),su(e,r)}var cu=null,uu=null,du=!1,hu=!1,pu=!1,fu=0;function mu(e){var t;e!==uu&&null===e.next&&(null===uu?cu=uu=e:uu=uu.next=e),hu=!0,du||(du=!0,t=vu,nd((function(){0!==(6&ec)?ie(ue,t):t()})))}function gu(e,t){if(!pu&&hu){pu=!0;do{for(var r=!1,n=cu;null!==n;){if(!t)if(0!==e){var i=n.pendingLanes;if(0===i)var a=0;else{var s=n.suspendedLanes,o=n.pingedLanes;a=(1<<31-be(42|e)+1)-1,a=201326677&(a&=i&~(s&~o))?201326677&a|1:a?2|a:0}0!==a&&(r=!0,bu(n,a))}else a=nc,0===(3&(a=Ee(n,n===tc?a:0)))||Ce(n,a)||(r=!0,bu(n,a));n=n.next}}while(r);pu=!1}}function vu(){hu=du=!1;var e=0;0!==fu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Ju&&(Ju=e,!0);return Ju=null,!1}()&&(e=fu),fu=0);for(var t=le(),r=null,n=cu;null!==n;){var i=n.next,a=xu(n,t);0===a?(n.next=null,null===r?cu=i:r.next=i,null===i&&(uu=r)):(r=n,(0!==e||0!==(3&a))&&(hu=!0)),n=i}gu(e,!1)}function xu(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-be(a),o=1<<s,l=i[s];-1===l?0!==(o&r)&&0===(o&n)||(i[s]=Ne(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(r=nc,r=Ee(e,e===(t=tc)?r:0),n=e.callbackNode,0===r||e===t&&2===ic||null!==e.cancelPendingCommit)return null!==n&&null!==n&&ae(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&r)||Ce(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&ae(n),De(r)){case 2:case 8:r=de;break;case 32:default:r=he;break;case 268435456:r=fe}return n=yu.bind(null,e),r=ie(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&ae(n),e.callbackPriority=2,e.callbackNode=null,2}function yu(e,t){var r=e.callbackNode;if(tu()&&e.callbackNode!==r)return null;var n=nc;return 0===(n=Ee(e,e===tc?n:0))?null:(Ic(e,n,t),xu(e,le()),null!=e.callbackNode&&e.callbackNode===r?yu.bind(null,e):null)}function bu(e,t){if(tu())return null;Ic(e,t,!0)}function wu(){return 0===fu&&(fu=Te()),fu}function _u(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function ku(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Su=0;Su<wn.length;Su++){var ju=wn[Su];_n(ju.toLowerCase(),"on"+(ju[0].toUpperCase()+ju.slice(1)))}_n(pn,"onAnimationEnd"),_n(fn,"onAnimationIteration"),_n(mn,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(gn,"onTransitionRun"),_n(vn,"onTransitionStart"),_n(xn,"onTransitionCancel"),_n(yn,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eu));function Nu(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Is(u)}i.currentTarget=null,a=l}else for(s=0;s<n.length;s++){if(l=(o=n[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Is(u)}i.currentTarget=null,a=l}}}}function Tu(e,t){var r=t[ze];void 0===r&&(r=t[ze]=new Set);var n=e+"__bubble";r.has(n)||(Iu(t,e,2,!1),r.add(n))}function Pu(e,t,r){var n=0;t&&(n|=4),Iu(r,e,n,t)}var Au="_reactListening"+Math.random().toString(36).slice(2);function Mu(e){if(!e[Au]){e[Au]=!0,Qe.forEach((function(t){"selectionchange"!==t&&(Cu.has(t)||Pu(t,!1,e),Pu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Au]||(t[Au]=!0,Pu("selectionchange",!1,t))}}function Iu(e,t,r,n){switch(Xd(t)){case 2:var i=Gd;break;case 8:i=Wd;break;default:i=qd}r=i.bind(null,t,r,e),i=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Ou(e,t,r,n,i){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=qe(o)))return;if(5===(l=s.tag)||6===l||26===l||27===l){n=a=s;continue e}o=o.parentNode}}n=n.return}Rt((function(){var n=a,i=At(r),s=[];e:{var o=bn.get(e);if(void 0!==o){var l=Qt,c=e;switch(e){case"keypress":if(0===Ht(r))break e;case"keydown":case"keyup":l=pr;break;case"focusin":c="focus",l=ir;break;case"focusout":c="blur",l=ir;break;case"beforeblur":case"afterblur":l=ir;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=nr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=mr;break;case pn:case fn:case mn:l=ar;break;case yn:l=gr;break;case"scroll":case"scrollend":l=er;break;case"wheel":l=vr;break;case"copy":case"cut":case"paste":l=sr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=fr;break;case"toggle":case"beforetoggle":l=xr}var u=0!==(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=n;null!==f;){var m=f;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===h||null!=(m=Lt(f,h))&&u.push(Du(f,m,p)),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,r,i),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===Pt||!(c=r.relatedTarget||r.fromElement)||!qe(c)&&!c[Be])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?qe(c):null)&&(d=L(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=n),l!==c)){if(u=rr,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=fr,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:Ze(l),p=null==c?o:Ze(c),(o=new u(m,f+"leave",l,r,i)).target=d,o.relatedTarget=p,m=null,qe(i)===n&&((u=new u(h,f+"enter",c,r,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Lu(p))f++;for(p=0,m=h;m;m=Lu(m))p++;for(;0<f-p;)u=Lu(u),f--;for(;0<p-f;)h=Lu(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Lu(u),h=Lu(h)}u=null}else u=null;null!==l&&Fu(s,o,l,u,!1),null!==c&&null!==d&&Fu(s,d,c,u,!0)}if("select"===(l=(o=n?Ze(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Rr;else if(Pr(o))if(Lr)g=Wr;else{g=Hr;var v=Vr}else!(l=o.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?n&&Et(n.elementType)&&(g=Rr):g=Gr;switch(g&&(g=g(e,n))?Ar(s,g,r,i):(v&&v(e,o,n),"focusout"===e&&n&&"number"===o.type&&null!=n.memoizedProps.value&&xt(o,"number",o.value)),v=n?Ze(n):window,e){case"focusin":(Pr(v)||"true"===v.contentEditable)&&(rn=v,nn=n,an=null);break;case"focusout":an=nn=rn=null;break;case"mousedown":sn=!0;break;case"contextmenu":case"mouseup":case"dragend":sn=!1,on(s,r,i);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":on(s,r,i)}var x;if(br)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Nr?Er(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(kr&&"ko"!==r.locale&&(Nr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Nr&&(x=Vt()):(zt="value"in(Bt=i)?Bt.value:Bt.textContent,Nr=!0)),0<(v=Ru(n,y)).length&&(y=new or(y,e,null,r,i),s.push({event:y,listeners:v}),x?y.data=x:null!==(x=Cr(r))&&(y.data=x))),(x=_r?function(e,t){switch(e){case"compositionend":return Cr(t);case"keypress":return 32!==t.which?null:(jr=!0,Sr);case"textInput":return(e=t.data)===Sr&&jr?null:e;default:return null}}(e,r):function(e,t){if(Nr)return"compositionend"===e||!br&&Er(e,t)?(e=Vt(),Ut=zt=Bt=null,Nr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(y=Ru(n,"onBeforeInput")).length&&(v=new or("onBeforeInput","beforeinput",null,r,i),s.push({event:v,listeners:y}),v.data=x)),function(e,t,r,n,i){if("submit"===t&&r&&r.stateNode===i){var a=_u((i[$e]||null).action),s=n.submitter;s&&null!==(t=(t=s[$e]||null)?_u(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var o=new Qt("action","action",null,n,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==fu){var e=s?ku(i,s):new FormData(i);us(r,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"===typeof a&&(o.preventDefault(),e=s?ku(i,s):new FormData(i),us(r,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}(s,e,n,r,i)}Nu(s,t)}))}function Du(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ru(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=Lt(e,r))&&n.unshift(Du(e,i,a)),null!=(i=Lt(e,t))&&n.push(Du(e,i,a))),e=e.return}return n}function Lu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Fu(e,t,r,n,i){for(var a=t._reactName,s=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===n)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Lt(r,a))&&s.unshift(Du(r,c,l)):i||null!=(c=Lt(r,a))&&s.push(Du(r,c,l))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var $u=/\r\n?/g,Bu=/\u0000|\uFFFD/g;function zu(e){return("string"===typeof e?e:""+e).replace($u,"\n").replace(Bu,"")}function Uu(e,t){return t=zu(t),zu(e)===t}function Vu(){}function Hu(e,t,r,n,i,a){switch(r){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||_t(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&_t(e,""+n);break;case"className":ot(e,"class",n);break;case"tabIndex":ot(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":ot(e,r,n);break;case"style":jt(e,n,a);break;case"data":if("object"!==t){ot(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Tt(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===r?("input"!==t&&Hu(e,t,"name",i.name,i,null),Hu(e,t,"formEncType",i.formEncType,i,null),Hu(e,t,"formMethod",i.formMethod,i,null),Hu(e,t,"formTarget",i.formTarget,i,null)):(Hu(e,t,"encType",i.encType,i,null),Hu(e,t,"method",i.method,i,null),Hu(e,t,"target",i.target,i,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Tt(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Vu);break;case"onScroll":null!=n&&Tu("scroll",e);break;case"onScrollEnd":null!=n&&Tu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(s(61));if(null!=(r=n.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}r=Tt(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":Tu("beforetoggle",e),Tu("toggle",e),st(e,"popover",n);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":st(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&st(e,r=Ct.get(r)||r,n)}}function Gu(e,t,r,n,i,a){switch(r){case"style":jt(e,n,a);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(s(61));if(null!=(r=n.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=r}}break;case"children":"string"===typeof n?_t(e,n):("number"===typeof n||"bigint"===typeof n)&&_t(e,""+n);break;case"onScroll":null!=n&&Tu("scroll",e);break;case"onScrollEnd":null!=n&&Tu("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Vu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Je.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(i=r.endsWith("Capture"),t=r.slice(2,i?r.length-7:void 0),"function"===typeof(a=null!=(a=e[$e]||null)?a[r]:null)&&e.removeEventListener(t,a,i),"function"!==typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):st(e,r,n):("function"!==typeof a&&null!==a&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,i)))}}function Wu(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tu("error",e),Tu("load",e);var n,i=!1,a=!1;for(n in r)if(r.hasOwnProperty(n)){var o=r[n];if(null!=o)switch(n){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Hu(e,t,n,o,r,null)}}return a&&Hu(e,t,"srcSet",r.srcSet,r,null),void(i&&Hu(e,t,"src",r.src,r,null));case"input":Tu("invalid",e);var l=n=o=a=null,c=null,u=null;for(i in r)if(r.hasOwnProperty(i)){var d=r[i];if(null!=d)switch(i){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":n=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:Hu(e,t,i,d,r,null)}}return vt(e,n,l,c,u,o,a,!1),void dt(e);case"select":for(a in Tu("invalid",e),i=o=n=null,r)if(r.hasOwnProperty(a)&&null!=(l=r[a]))switch(a){case"value":n=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:Hu(e,t,a,l,r,null)}return t=n,r=o,e.multiple=!!i,void(null!=t?yt(e,!!i,t,!1):null!=r&&yt(e,!!i,r,!0));case"textarea":for(o in Tu("invalid",e),n=a=i=null,r)if(r.hasOwnProperty(o)&&null!=(l=r[o]))switch(o){case"value":i=l;break;case"defaultValue":a=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Hu(e,t,o,l,r,null)}return wt(e,i,a,n),void dt(e);case"option":for(c in r)if(r.hasOwnProperty(c)&&null!=(i=r[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Hu(e,t,c,i,r,null);return;case"dialog":Tu("cancel",e),Tu("close",e);break;case"iframe":case"object":Tu("load",e);break;case"video":case"audio":for(i=0;i<Eu.length;i++)Tu(Eu[i],e);break;case"image":Tu("error",e),Tu("load",e);break;case"details":Tu("toggle",e);break;case"embed":case"source":case"link":Tu("error",e),Tu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&null!=(i=r[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Hu(e,t,u,i,r,null)}return;default:if(Et(t)){for(d in r)r.hasOwnProperty(d)&&(void 0!==(i=r[d])&&Gu(e,t,d,i,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(null!=(i=r[l])&&Hu(e,t,l,i,r,null))}var qu=null,Ku=null;function Zu(e){return 9===e.nodeType?e:e.ownerDocument}function Yu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Qu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ju=null;var ed="function"===typeof setTimeout?setTimeout:void 0,td="function"===typeof clearTimeout?clearTimeout:void 0,rd="function"===typeof Promise?Promise:void 0,nd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rd?function(e){return rd.resolve(null).then(e).catch(id)}:ed;function id(e){setTimeout((function(){throw e}))}function ad(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void mh(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);mh(t)}function sd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":sd(r),We(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function od(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function cd(e,t,r){switch(t=Zu(r),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}var ud=new Map,dd=new Set;function hd(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var pd=U.d;U.d={f:function(){var e=pd.f(),t=Fc();return e||t},r:function(e){var t=Ke(e);null!==t&&5===t.tag&&"form"===t.type?hs(t):pd.r(e)},D:function(e){pd.D(e),md("dns-prefetch",e,null)},C:function(e,t){pd.C(e,t),md("preconnect",e,t)},L:function(e,t,r){pd.L(e,t,r);var n=fd;if(n&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&r&&r.imageSrcSet?(i+='[imagesrcset="'+mt(r.imageSrcSet)+'"]',"string"===typeof r.imageSizes&&(i+='[imagesizes="'+mt(r.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var a=i;switch(t){case"style":a=vd(e);break;case"script":a=bd(e)}ud.has(a)||(e=A({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),ud.set(a,e),null!==n.querySelector(i)||"style"===t&&n.querySelector(xd(a))||"script"===t&&n.querySelector(wd(a))||(Wu(t=n.createElement("link"),"link",e),Xe(t),n.head.appendChild(t)))}},m:function(e,t){pd.m(e,t);var r=fd;if(r&&e){var n=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(n)+'"][href="'+mt(e)+'"]',a=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=bd(e)}if(!ud.has(a)&&(e=A({rel:"modulepreload",href:e},t),ud.set(a,e),null===r.querySelector(i))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(wd(a)))return}Wu(n=r.createElement("link"),"link",e),Xe(n),r.head.appendChild(n)}}},X:function(e,t){pd.X(e,t);var r=fd;if(r&&e){var n=Ye(r).hoistableScripts,i=bd(e),a=n.get(i);a||((a=r.querySelector(wd(i)))||(e=A({src:e,async:!0},t),(t=ud.get(i))&&jd(e,t),Xe(a=r.createElement("script")),Wu(a,"link",e),r.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(i,a))}},S:function(e,t,r){pd.S(e,t,r);var n=fd;if(n&&e){var i=Ye(n).hoistableStyles,a=vd(e);t=t||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=n.querySelector(xd(a)))o.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":t},r),(r=ud.get(a))&&Sd(e,r);var l=s=n.createElement("link");Xe(l),Wu(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,kd(s,t,n)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}},M:function(e,t){pd.M(e,t);var r=fd;if(r&&e){var n=Ye(r).hoistableScripts,i=bd(e),a=n.get(i);a||((a=r.querySelector(wd(i)))||(e=A({src:e,async:!0,type:"module"},t),(t=ud.get(i))&&jd(e,t),Xe(a=r.createElement("script")),Wu(a,"link",e),r.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(i,a))}}};var fd="undefined"===typeof document?null:document;function md(e,t,r){var n=fd;if(n&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof r&&(i+='[crossorigin="'+r+'"]'),dd.has(i)||(dd.add(i),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(i)&&(Wu(t=n.createElement("link"),"link",e),Xe(t),n.head.appendChild(t)))}}function gd(e,t,r,n){var i,a,o,l,c=(c=X.current)?hd(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof r.precedence&&"string"===typeof r.href?(t=vd(r.href),(n=(r=Ye(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"===typeof r.href&&"string"===typeof r.precedence){e=vd(r.href);var u=Ye(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(xd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),ud.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ud.set(e,r),u||(i=c,a=e,o=r,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=i.createElement("link"),l.preload=a,a.addEventListener("load",(function(){return l.loading|=1})),a.addEventListener("error",(function(){return l.loading|=2})),Wu(a,"link",o),Xe(a),i.head.appendChild(a))))),t&&null===n)throw Error(s(528,""));return d}if(t&&null!==n)throw Error(s(529,""));return null;case"script":return t=r.async,"string"===typeof(r=r.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=bd(r),(n=(r=Ye(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function vd(e){return'href="'+mt(e)+'"'}function xd(e){return'link[rel="stylesheet"]['+e+"]"}function yd(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function bd(e){return'[src="'+mt(e)+'"]'}function wd(e){return"script[async]"+e}function _d(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+mt(r.href)+'"]');if(n)return t.instance=n,Xe(n),n;var i=A({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return Xe(n=(e.ownerDocument||e).createElement("style")),Wu(n,"style",i),kd(n,r.precedence,e),t.instance=n;case"stylesheet":i=vd(r.href);var a=e.querySelector(xd(i));if(a)return t.state.loading|=4,t.instance=a,Xe(a),a;n=yd(r),(i=ud.get(i))&&Sd(n,i),Xe(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),Wu(a,"link",n),t.state.loading|=4,kd(a,r.precedence,e),t.instance=a;case"script":return a=bd(r.src),(i=e.querySelector(wd(a)))?(t.instance=i,Xe(i),i):(n=r,(i=ud.get(a))&&jd(n=A({},r),i),Xe(i=(e=e.ownerDocument||e).createElement("script")),Wu(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,kd(n,r.precedence,e));return t.instance}function kd(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,a=i,s=0;s<n.length;s++){var o=n[s];if(o.dataset.precedence===t)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Sd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ed=null;function Cd(e,t,r){if(null===Ed){var n=new Map,i=Ed=new Map;i.set(r,n)}else(n=(i=Ed).get(r))||(n=new Map,i.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),i=0;i<r.length;i++){var a=r[i];if(!(a[Ge]||a[Fe]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var o=n.get(s);o?o.push(a):n.set(s,[a])}}return n}function Nd(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function Td(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Pd=null;function Ad(){}function Md(){if(this.count--,0===this.count)if(this.stylesheets)Od(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Id=null;function Od(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Id=new Map,t.forEach(Dd,e),Id=null,Md.call(e))}function Dd(e,t){if(!(4&t.state.loading)){var r=Id.get(e);if(r)var n=r.get(null);else{r=new Map,Id.set(e,r);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(r.set(s.dataset.precedence,s),n=s)}n&&r.set(null,n)}s=(i=t.instance).getAttribute("data-precedence"),(a=r.get(s)||n)===n&&r.set(null,i),r.set(s,i),this.count++,n=Md.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Rd={$$typeof:g,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Ld(e,t,r,n,i,a,s,o){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Fd(e,t,r,n,i,a,s,o,l,c,u,d){return e=new Ld(e,t,r,s,o,l,c,d),t=1,!0===a&&(t|=24),a=Dl(3,null,null,t),e.current=a,a.stateNode=e,(t=Bi()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:n,isDehydrated:r,cache:t},To(a),e}function $d(e){return e?e=Mn:Mn}function Bd(e,t,r,n,i,a){i=$d(i),null===n.context?n.context=i:n.pendingContext=i,(n=Ao(t)).payload={element:r},null!==(a=void 0===a?null:a)&&(n.callback=a),null!==(r=Mo(e,n,t))&&(Mc(r,0,t),Io(r,e,t))}function zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Ud(e,t){zd(e,t),(e=e.alternate)&&zd(e,t)}function Vd(e){if(13===e.tag){var t=Tn(e,67108864);null!==t&&Mc(t,0,67108864),Ud(e,67108864)}}var Hd=!0;function Gd(e,t,r,n){var i=P.T;P.T=null;var a=U.p;try{U.p=2,qd(e,t,r,n)}finally{U.p=a,P.T=i}}function Wd(e,t,r,n){var i=P.T;P.T=null;var a=U.p;try{U.p=8,qd(e,t,r,n)}finally{U.p=a,P.T=i}}function qd(e,t,r,n){if(Hd){var i=Kd(n);if(null===i)Ou(e,t,n,Zd,r),sh(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Jd=oh(Jd,e,t,r,n,i),!0;case"dragenter":return eh=oh(eh,e,t,r,n,i),!0;case"mouseover":return th=oh(th,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return rh.set(a,oh(rh.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,nh.set(a,oh(nh.get(a)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(sh(e,n),4&t&&-1<ah.indexOf(e)){for(;null!==i;){var a=Ke(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=je(a.pendingLanes);if(0!==s){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-be(s);o.entanglements[1]|=l,s&=~l}mu(a),0===(6&ec)&&(bc=le()+500,gu(0,!1))}}break;case 13:null!==(o=Tn(a,2))&&Mc(o,0,2),Fc(),Ud(a,2)}if(null===(a=Kd(n))&&Ou(e,t,n,Zd,r),a===i)break;i=a}null!==i&&n.stopPropagation()}else Ou(e,t,n,null,r)}}function Kd(e){return Yd(e=At(e))}var Zd=null;function Yd(e){if(Zd=null,null!==(e=qe(e))){var t=L(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=F(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Zd=e,null}function Xd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Qd=!1,Jd=null,eh=null,th=null,rh=new Map,nh=new Map,ih=[],ah="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sh(e,t){switch(e){case"focusin":case"focusout":Jd=null;break;case"dragenter":case"dragleave":eh=null;break;case"mouseover":case"mouseout":th=null;break;case"pointerover":case"pointerout":rh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nh.delete(t.pointerId)}}function oh(e,t,r,n,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=Ke(t))&&Vd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function lh(e){var t=qe(e.target);if(null!==t){var r=L(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=F(r)))return e.blockedOn=t,void function(e,t){var r=U.p;try{return U.p=e,t()}finally{U.p=r}}(e.priority,(function(){if(13===r.tag){var e=Pc(),t=Tn(r,e);null!==t&&Mc(t,0,e),Ud(r,e)}}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function ch(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kd(e.nativeEvent);if(null!==r)return null!==(t=Ke(r))&&Vd(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Pt=n,r.target.dispatchEvent(n),Pt=null,t.shift()}return!0}function uh(e,t,r){ch(e)&&r.delete(t)}function dh(){Qd=!1,null!==Jd&&ch(Jd)&&(Jd=null),null!==eh&&ch(eh)&&(eh=null),null!==th&&ch(th)&&(th=null),rh.forEach(uh),nh.forEach(uh)}function hh(e,t){e.blockedOn===t&&(e.blockedOn=null,Qd||(Qd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,dh)))}var ph=null;function fh(e){ph!==e&&(ph=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,(function(){ph===e&&(ph=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],i=e[t+2];if("function"!==typeof n){if(null===Yd(n||r))continue;break}var a=Ke(r);null!==a&&(e.splice(t,3),t-=3,us(a,{pending:!0,data:i,method:r.method,action:n},n,i))}})))}function mh(e){function t(t){return hh(t,e)}null!==Jd&&hh(Jd,e),null!==eh&&hh(eh,e),null!==th&&hh(th,e),rh.forEach(t),nh.forEach(t);for(var r=0;r<ih.length;r++){var n=ih[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ih.length&&null===(r=ih[0]).blockedOn;)lh(r),null===r.blockedOn&&ih.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var i=r[n],a=r[n+1],s=i[$e]||null;if("function"===typeof a)s||fh(r);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[$e]||null)o=s.formAction;else if(null!==Yd(i))continue}else o=s.action;"function"===typeof o?r[n+1]=o:(r.splice(n,3),n-=3),fh(r)}}}function gh(e){this._internalRoot=e}function vh(e){this._internalRoot=e}vh.prototype.render=gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bd(t.current,Pc(),e,t,null,null)},vh.prototype.unmount=gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&tu(),Bd(e.current,2,null,e,null,null),Fc(),t[Be]=null}},vh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ih.length&&0!==t&&t<ih[r].priority;r++);ih.splice(r,0,e),0===r&&lh(e)}};var xh=i.version;if("19.0.0"!==xh)throw Error(s(527,xh,"19.0.0"));U.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=L(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return $(i),e;if(a===n)return $(i),t;a=a.sibling}throw Error(s(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?B(e):null)?null:e.stateNode};var yh={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:P,findFiberByHostInstance:qe,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bh.isDisabled&&bh.supportsFiber)try{ve=bh.inject(yh),xe=bh}catch(_h){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var r=!1,n="",i=Os,a=Ds,l=Rs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Fd(e,1,!1,null,0,r,n,i,a,l,0,null),e[Be]=t.current,Mu(8===e.nodeType?e.parentNode:e),new gh(t)},t.hydrateRoot=function(e,t,r){if(!o(e))throw Error(s(299));var n=!1,i="",a=Os,l=Ds,c=Rs,u=null;return null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onUncaughtError&&(a=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(u=r.formState)),(t=Fd(e,1,!0,t,0,n,i,a,l,c,0,u)).context=$d(null),r=t.current,(i=Ao(n=Pc())).callback=null,Mo(r,i,n),t.current.lanes=n,Me(t,n),mu(t),e[Be]=t.current,Mu(e),new vh(t)},t.version="19.0.0"},7105:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7116:(e,t,r)=>{var n=r(9812),i=r(2777),a=r(4052),s=n?n.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(s&&e&&e[s])}},7159:(e,t,r)=>{var n=r(2622);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,r)=>{var n=r(7563),i=r(9935),a=r(4190),s=r(1946),o=r(1714);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},7251:(e,t,r)=>{var n=r(8724),i=r(7160),a=r(5204);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||i),string:new n}}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new i(n,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,a),!0;case 6:return u.fn.call(u.context,t,n,i,a,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},7303:(e,t,r)=>{var n=r(801),i=1/0;e.exports=function(e){return e?(e=n(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},7424:(e,t,r)=>{var n=r(755),i=r(2536),a=r(5647),s=r(929),o=a((function(e,t){if(null==e)return[];var r=t.length;return r>1&&s(e,t[0],t[1])?t=[]:r>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),i(e,n(t,1),[])}));e.exports=o},7498:e=>{e.exports=function(e,t){return e>t}},7529:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,r)=>{var n=r(5575);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},7676:(e,t,r)=>{var n=r(8189),i=r(6311),a=r(9115),s=r(1069);e.exports=function(e){return function(t){t=s(t);var r=i(t)?a(t):void 0,o=r?r[0]:t.charAt(0),l=r?n(r,1).join(""):t.slice(1);return o[e]()+l}}},7685:(e,t,r)=>{var n=r(7937)(r(6552),"DataView");e.exports=n},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7828:e=>{e.exports=function(){return[]}},7857:(e,t,r)=>{var n=r(3440),i=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},7937:(e,t,r)=>{var n=r(6954),i=r(4657);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(6672)},8114:e=>{e.exports=function(e,t){return e.has(t)}},8139:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=s(e,a(r)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=s(t,r));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},8182:(e,t,r)=>{var n=r(2070),i=r(5713),a=r(2074),s=n&&1/a(new n([,-0]))[1]==1/0?function(e){return new n(e)}:i;e.exports=s},8189:(e,t,r)=>{var n=r(3871);e.exports=function(e,t,r){var i=e.length;return r=void 0===r?i:r,!t&&r>=i?e:n(e,t,r)}},8210:function(e,t,r){var n;!function(){"use strict";var i,a=1e9,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,m=9007199254740991,g=d(1286742750677284.5),v={};function x(e,t){var r,n,i,a,s,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),o?N(t,h):t;if(c=e.d,u=t.d,s=e.e,i=t.e,c=c.slice(),a=s-i){for(a<0?(n=c,a=-a,l=u.length):(n=u,i=s,l=c.length),a>(l=(s=Math.ceil(h/7))>l?s+1:l+1)&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for((l=c.length)-(a=u.length)<0&&(a=l,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/f|0,c[a]%=f;for(r&&(c.unshift(r),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,o?N(t,h):t}function y(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function b(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)(r=7-(n=e[t]+"").length)&&(a+=j(r)),a+=n;(r=7-(n=(s=e[t])+"").length)&&(a+=j(r))}else if(0===s)return"0";for(;s%10===0;)s/=10;return a+s}v.absoluteValue=v.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},v.comparedTo=v.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(t=0,r=(n=a.d.length)<(i=e.d.length)?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1},v.decimalPlaces=v.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},v.dividedBy=v.div=function(e){return w(this,new this.constructor(e))},v.dividedToIntegerBy=v.idiv=function(e){var t=this.constructor;return N(w(this,new t(e),0,1),t.precision)},v.equals=v.eq=function(e){return!this.cmp(e)},v.exponent=function(){return k(this)},v.greaterThan=v.gt=function(e){return this.cmp(e)>0},v.greaterThanOrEqualTo=v.gte=function(e){return this.cmp(e)>=0},v.isInteger=v.isint=function(){return this.e>this.d.length-2},v.isNegative=v.isneg=function(){return this.s<0},v.isPositive=v.ispos=function(){return this.s>0},v.isZero=function(){return 0===this.s},v.lessThan=v.lt=function(e){return this.cmp(e)<0},v.lessThanOrEqualTo=v.lte=function(e){return this.cmp(e)<1},v.logarithm=v.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(i))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(i)?new n(0):(o=!1,t=w(E(r,s),E(e,s),s),o=!0,N(t,a))},v.minus=v.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?T(t,e):x(t,(e.s=-e.s,e))},v.modulo=v.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(o=!1,t=w(r,e,0,1).times(e),o=!0,r.minus(t)):N(new n(r),i)},v.naturalExponential=v.exp=function(){return _(this)},v.naturalLogarithm=v.ln=function(){return E(this)},v.negated=v.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},v.plus=v.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x(t,e):T(t,(e.s=-e.s,e))},v.precision=v.sd=function(e){var t,r,n,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=k(i)+1,r=7*(n=i.d.length-1)+1,n=i.d[n]){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},v.squareRoot=v.sqrt=function(){var e,t,r,n,i,a,s,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=k(c),o=!1,0==(i=Math.sqrt(+c))||i==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),n=new u(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new u(i.toString()),i=s=(r=u.precision)+3;;)if(n=(a=n).plus(w(c,a,s+2)).times(.5),b(a.d).slice(0,s)===(t=b(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&"4999"==t){if(N(a,r+1,0),a.times(a).eq(c)){n=a;break}}else if("9999"!=t)break;s+=4}return o=!0,N(n,r)},v.times=v.mul=function(e){var t,r,n,i,a,s,l,c,u,d=this,h=d.constructor,p=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,r=d.e+e.e,(c=p.length)<(u=m.length)&&(a=p,p=m,m=a,s=c,c=u,u=s),a=[],n=s=c+u;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,i=c+n;i>n;)l=a[i]+m[n]*p[i-n-1]+t,a[i--]=l%f|0,t=l/f|0;a[i]=(a[i]+t)%f|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,o?N(e,h.precision):e},v.toDecimalPlaces=v.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(y(e,0,a),void 0===t?t=n.rounding:y(t,0,8),N(r,e+k(r)+1,t))},v.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=P(n,!0):(y(e,0,a),void 0===t?t=i.rounding:y(t,0,8),r=P(n=N(new i(n),e+1,t),!0,e+1)),r},v.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?P(i):(y(e,0,a),void 0===t?t=s.rounding:y(t,0,8),r=P((n=N(new s(i),e+k(i)+1,t)).abs(),!1,e+k(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)},v.toInteger=v.toint=function(){var e=this,t=e.constructor;return N(new t(e),k(e)+1,t.rounding)},v.toNumber=function(){return+this},v.toPower=v.pow=function(e){var t,r,n,a,s,c,u=this,h=u.constructor,p=+(e=new h(e));if(!e.s)return new h(i);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(i))return u;if(n=h.precision,e.eq(i))return N(u,n);if(c=(t=e.e)>=(r=e.d.length-1),s=u.s,c){if((r=p<0?-p:p)<=m){for(a=new h(i),t=Math.ceil(n/7+4),o=!1;r%2&&A((a=a.times(u)).d,t),0!==(r=d(r/2));)A((u=u.times(u)).d,t);return o=!0,e.s<0?new h(i).div(a):N(a,n)}}else if(s<0)throw Error(l+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,u.s=1,o=!1,a=e.times(E(u,n+12)),o=!0,(a=_(a)).s=s,a},v.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?n=P(i,(r=k(i))<=s.toExpNeg||r>=s.toExpPos):(y(e,1,a),void 0===t?t=s.rounding:y(t,0,8),n=P(i=N(new s(i),e,t),e<=(r=k(i))||r<=s.toExpNeg,e)),n},v.toSignificantDigits=v.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(y(e,1,a),void 0===t?t=r.rounding:y(t,0,8)),N(new r(this),e,t)},v.toString=v.valueOf=v.val=v.toJSON=function(){var e=this,t=k(e),r=e.constructor;return P(e,t<=r.toExpNeg||t>=r.toExpPos)};var w=function(){function e(e,t){var r,n=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+n,e[i]=r%f|0,n=r/f|0;return n&&e.unshift(n),e}function t(e,t,r,n){var i,a;if(r!=n)a=r>n?1:-1;else for(i=a=0;i<r;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*f+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,a,s){var o,c,u,d,h,p,m,g,v,x,y,b,w,_,S,j,E,C,T=n.constructor,P=n.s==i.s?1:-1,A=n.d,M=i.d;if(!n.s)return new T(n);if(!i.s)throw Error(l+"Division by zero");for(c=n.e-i.e,E=M.length,S=A.length,g=(m=new T(P)).d=[],u=0;M[u]==(A[u]||0);)++u;if(M[u]>(A[u]||0)&&--c,(b=null==a?a=T.precision:s?a+(k(n)-k(i))+1:a)<0)return new T(0);if(b=b/7+2|0,u=0,1==E)for(d=0,M=M[0],b++;(u<S||d)&&b--;u++)w=d*f+(A[u]||0),g[u]=w/M|0,d=w%M|0;else{for((d=f/(M[0]+1)|0)>1&&(M=e(M,d),A=e(A,d),E=M.length,S=A.length),_=E,x=(v=A.slice(0,E)).length;x<E;)v[x++]=0;(C=M.slice()).unshift(0),j=M[0],M[1]>=f/2&&++j;do{d=0,(o=t(M,v,E,x))<0?(y=v[0],E!=x&&(y=y*f+(v[1]||0)),(d=y/j|0)>1?(d>=f&&(d=f-1),1==(o=t(h=e(M,d),v,p=h.length,x=v.length))&&(d--,r(h,E<p?C:M,p))):(0==d&&(o=d=1),h=M.slice()),(p=h.length)<x&&h.unshift(0),r(v,h,x),-1==o&&(o=t(M,v,E,x=v.length))<1&&(d++,r(v,E<x?C:M,x)),x=v.length):0===o&&(d++,v=[0]),g[u++]=d,o&&v[0]?v[x++]=A[_]||0:(v=[A[_]],x=1)}while((_++<S||void 0!==v[0])&&b--)}return g[0]||g.shift(),m.e=c,N(m,s?a+k(m)+1:a)}}();function _(e,t){var r,n,a,s,l,c=0,d=0,p=e.constructor,f=p.precision;if(k(e)>16)throw Error(u+k(e));if(!e.s)return new p(i);for(null==t?(o=!1,l=f):l=t,s=new p(.03125);e.abs().gte(.1);)e=e.times(s),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,r=n=a=new p(i),p.precision=l;;){if(n=N(n.times(e),l),r=r.times(++c),b((s=a.plus(w(n,r,l))).d).slice(0,l)===b(a.d).slice(0,l)){for(;d--;)a=N(a.times(a),l);return p.precision=f,null==t?(o=!0,N(a,f)):a}a=s}}function k(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function S(e,t,r){if(t>e.LN10.sd())throw o=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return N(new e(e.LN10),t)}function j(e){for(var t="";e--;)t+="0";return t}function E(e,t){var r,n,a,s,c,u,d,h,p,f=1,m=e,g=m.d,v=m.constructor,x=v.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(i))return new v(0);if(null==t?(o=!1,h=x):h=t,m.eq(10))return null==t&&(o=!0),S(v,h);if(h+=10,v.precision=h,n=(r=b(g)).charAt(0),s=k(m),!(Math.abs(s)<15e14))return d=S(v,h+2,x).times(s+""),m=E(new v(n+"."+r.slice(1)),h-10).plus(d),v.precision=x,null==t?(o=!0,N(m,x)):m;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=b((m=m.times(e)).d)).charAt(0),f++;for(s=k(m),n>1?(m=new v("0."+r),s++):m=new v(n+"."+r.slice(1)),u=c=m=w(m.minus(i),m.plus(i),h),p=N(m.times(m),h),a=3;;){if(c=N(c.times(p),h),b((d=u.plus(w(c,new v(a),h))).d).slice(0,h)===b(u.d).slice(0,h))return u=u.times(2),0!==s&&(u=u.plus(S(v,h+2,x).times(s+""))),u=w(u,new v(f),h),v.precision=x,null==t?(o=!0,N(u,x)):u;u=d,a+=2}}function C(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(n,i)){if(i-=n,r=r-n-1,e.e=d(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=7;n<i;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(u+r)}else e.s=0,e.e=0,e.d=[0];return e}function N(e,t,r){var n,i,a,s,l,c,p,m,v=e.d;for(s=1,a=v[0];a>=10;a/=10)s++;if((n=t-s)<0)n+=7,i=t,p=v[m=0];else{if((m=Math.ceil((n+1)/7))>=(a=v.length))return e;for(p=a=v[m],s=1;a>=10;a/=10)s++;i=(n%=7)-7+s}if(void 0!==r&&(l=p/(a=h(10,s-i-1))%10|0,c=t<0||void 0!==v[m+1]||p%a,c=r<4?(l||c)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||c||6==r&&(n>0?i>0?p/h(10,s-i):0:v[m-1])%10&1||r==(e.s<0?8:7))),t<1||!v[0])return c?(a=k(e),v.length=1,t=t-a-1,v[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(0==n?(v.length=m,a=1,m--):(v.length=m+1,a=h(10,7-n),v[m]=i>0?(p/h(10,s-i)%h(10,i)|0)*a:0),c)for(;;){if(0==m){(v[0]+=a)==f&&(v[0]=1,++e.e);break}if(v[m]+=a,v[m]!=f)break;v[m--]=0,a=1}for(n=v.length;0===v[--n];)v.pop();if(o&&(e.e>g||e.e<-g))throw Error(u+k(e));return e}function T(e,t){var r,n,i,a,s,l,c,u,d,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),o?N(t,m):t;if(c=e.d,h=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n){for((d=s<0)?(r=c,s=-s,l=h.length):(r=h,n=u,l=c.length),s>(i=Math.max(Math.ceil(m/7),l)+2)&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for((d=(i=c.length)<(l=h.length))&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}s=0}for(d&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&0===c[--a];)c[a]=f-1;--c[a],c[i]+=f}c[i]-=h[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,o?N(t,m):t):new p(0)}function P(e,t,r){var n,i=k(e),a=b(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+j(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+j(-i-1)+a,r&&(n=r-s)>0&&(a+=j(n))):i>=s?(a+=j(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+j(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=j(n))),e.s<0?"-"+a:a}function A(e,t){if(e.length>t)return e.length=t,!0}function M(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,r,n,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(n=e[r=i[t]])){if(!(d(n)===n&&n>=i[t+1]&&n<=i[t+2]))throw Error(c+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(c+r+": "+n);this[r]=new this(n)}return this}s=function e(t){var r,n,i;function a(e){var t=this;if(!(t instanceof a))return new a(e);if(t.constructor=a,e instanceof a)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);C(t,e)}if(a.prototype=v,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e,a.config=a.set=M,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return a.config(t),a}(s),s.default=s.Decimal=s,i=new s(1),void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},8259:(e,t,r)=>{var n=r(5797);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},8325:(e,t,r)=>{var n=r(2541),i=r(5654),a=r(3279),s=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a;e.exports=s},8468:(e,t,r)=>{var n=r(5816),i=r(644),a=r(4020);e.exports=function(e,t,r){return t===t?a(e,t,r):n(e,i,r)}},8541:(e,t,r)=>{var n=r(9812),i=r(149),a=r(4052),s=r(9841),o=n?n.prototype:void 0,l=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(s(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},8673:(e,t,r)=>{var n=r(3204),i=r(3713),a=r(6571);e.exports=function(e){return a(e)?n(e):i(e)}},8724:(e,t,r)=>{var n=r(7615),i=r(5051),a=r(2154),s=r(8734),o=r(2662);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=s,l.prototype.set=o,e.exports=l},8734:(e,t,r)=>{var n=r(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},8853:(e,t,r)=>{"use strict";e.exports=r(5896)},8883:(e,t,r)=>{var n=r(5652),i=r(6571);e.exports=function(e,t){var r=-1,a=i(e)?Array(e.length):[];return n(e,(function(e,n,i){a[++r]=t(e,n,i)})),a}},8895:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},8902:(e,t,r)=>{var n=r(4816),i=r(6179),a=r(6704);function s(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=a,e.exports=s},8990:(e,t,r)=>{var n=r(9995)(r(2520));e.exports=n},9057:(e,t,r)=>{var n=r(5324),i=r(2777),a=r(4052),s=r(9194),o=r(6173),l=r(914);e.exports=function(e,t,r){for(var c=-1,u=(t=n(t,e)).length,d=!1;++c<u;){var h=l(t[c]);if(!(d=null!=e&&r(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&o(u)&&s(h,u)&&(a(e)||i(e))}},9062:(e,t,r)=>{"use strict";e.exports=r(6378)},9096:(e,t,r)=>{var n=r(9256),i=r(5029),a=r(3279),s=r(4052),o=r(3932);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?i(e[0],e[1]):n(e):o(e)}},9115:(e,t,r)=>{var n=r(5967),i=r(6311),a=r(715);e.exports=function(e){return i(e)?a(e):n(e)}},9140:(e,t,r)=>{var n=r(7303);e.exports=function(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}},9160:(e,t,r)=>{var n=r(6913),i=r(2761);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==n(e)}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},9256:(e,t,r)=>{var n=r(6532),i=r(3781),a=r(1310);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},9364:(e,t,r)=>{var n=r(9742),i=r(9096),a=r(61);e.exports=function(e,t){return e&&e.length?n(e,i(t,2),a):void 0}},9394:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).has(e)}},9395:(e,t,r)=>{var n=r(4262),i=r(9621),a=r(8673);e.exports=function(e){return n(e,a,i)}},9417:(e,t,r)=>{var n=r(6686);e.exports=function(e){return e===e&&!n(e)}},9621:(e,t,r)=>{var n=r(7529),i=r(7828),a=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(e){return null==e?[]:(e=Object(e),n(s(e),(function(t){return a.call(e,t)})))}:i;e.exports=o},9676:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,i,a){for(var s=-1,o=r(t((n-e)/(i||1)),0),l=Array(o);o--;)l[a?o:++s]=e,e+=i;return l}},9686:e=>{e.exports=function(e){return null==e}},9742:(e,t,r)=>{var n=r(9841);e.exports=function(e,t,r){for(var i=-1,a=e.length;++i<a;){var s=e[i],o=t(s);if(null!=o&&(void 0===l?o===o&&!n(o):r(o,l)))var l=o,c=s}return c}},9812:(e,t,r)=>{var n=r(6552).Symbol;e.exports=n},9825:()=>{},9841:(e,t,r)=>{var n=r(6913),i=r(2761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},9853:(e,t,r)=>{var n=r(6989);e.exports=function(e,t){return n(e,t)}},9889:(e,t,r)=>{var n=r(3950),i=r(6686);e.exports=function(e,t,r){var a=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(r)&&(a="leading"in r?!!r.leading:a,s="trailing"in r?!!r.trailing:s),n(e,t,{leading:a,maxWait:t,trailing:s})}},9935:(e,t,r)=>{var n=r(1340),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},9987:(e,t,r)=>{var n=r(9812),i=r(2929),a=r(3211),s=r(3668),o=r(4160),l=r(2074),c=n?n.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,d,h){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=o;case"[object Set]":var f=1&n;if(p||(p=l),e.size!=t.size&&!f)return!1;var m=h.get(e);if(m)return m==t;n|=2,h.set(e,t);var g=s(p(e),p(t),n,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},9995:(e,t,r)=>{var n=r(9096),i=r(6571),a=r(8673);e.exports=function(e){return function(t,r,s){var o=Object(t);if(!i(t)){var l=n(r,3);t=a(t),r=function(e){return l(o[e],e,o)}}var c=e(t,r,s);return c>-1?o[l?t[c]:c]:void 0}}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,r.d(a,s),a}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"static/js/"+e+".2a83c92c.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="i-plot-admin:";r.l=(n,i,a,s)=>{if(e[n])e[n].push(i);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+a),o.src=n),e[n]=[i];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var i=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(r))),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var a=new Promise(((r,n)=>i=e[t]=[r,n]));n.push(i[2]=a);var s=r.p+r.u(t),o=new Error;r.l(s,(n=>{if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,a,s=n[0],o=n[1],l=n[2],c=0;if(s.some((t=>0!==e[t]))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(l)l(r)}for(t&&t(n);c<s.length;c++)a=s[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunki_plot_admin=self.webpackChunki_plot_admin||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0,(()=>{"use strict";var e={};r.r(e),r.d(e,{scaleBand:()=>X7,scaleDiverging:()=>Nae,scaleDivergingLog:()=>Tae,scaleDivergingPow:()=>Aae,scaleDivergingSqrt:()=>Mae,scaleDivergingSymlog:()=>Pae,scaleIdentity:()=>_re,scaleImplicit:()=>Z7,scaleLinear:()=>wre,scaleLog:()=>Are,scaleOrdinal:()=>Y7,scalePoint:()=>J7,scalePow:()=>Bre,scaleQuantile:()=>Qre,scaleQuantize:()=>Jre,scaleRadial:()=>Vre,scaleSequential:()=>wae,scaleSequentialLog:()=>_ae,scaleSequentialPow:()=>Sae,scaleSequentialQuantile:()=>Eae,scaleSequentialSqrt:()=>jae,scaleSequentialSymlog:()=>kae,scaleSqrt:()=>zre,scaleSymlog:()=>Dre,scaleThreshold:()=>ene,scaleTime:()=>vae,scaleUtc:()=>xae,tickFormat:()=>yre});var t=r(5043),n=r.t(t,2),i=r(4391);const a=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,6453)).then((t=>{let{getCLS:r,getFID:n,getFCP:i,getLCP:a,getTTFB:s}=t;r(e),n(e),i(e),a(e),s(e)}))};var s="undefined"===typeof window||"Deno"in globalThis;function o(){}function l(e,t){return"function"===typeof e?e(t):e}function c(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:s,stale:o}=e;if(s)if(n){if(t.queryHash!==d(s,t.options))return!1}else if(!p(t.queryKey,s))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!==typeof o||t.isStale()===o)&&((!i||i===t.state.fetchStatus)&&!(a&&!a(t)))}function u(e,t){const{exact:r,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(h(t.options.mutationKey)!==h(a))return!1}else if(!p(t.options.mutationKey,a))return!1}return(!n||t.state.status===n)&&!(i&&!i(t))}function d(e,t){return(t?.queryKeyHashFn||h)(e)}function h(e){return JSON.stringify(e,((e,t)=>g(t)?Object.keys(t).sort().reduce(((e,r)=>(e[r]=t[r],e)),{}):t))}function p(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some((r=>!p(e[r],t[r]))))}function f(e,t){if(e===t)return e;const r=m(e)&&m(t);if(r||g(e)&&g(t)){const n=r?e:Object.keys(e),i=n.length,a=r?t:Object.keys(t),s=a.length,o=r?[]:{};let l=0;for(let c=0;c<s;c++){const i=r?c:a[c];(!r&&n.includes(i)||r)&&void 0===e[i]&&void 0===t[i]?(o[i]=void 0,l++):(o[i]=f(e[i],t[i]),o[i]===e[i]&&void 0!==e[i]&&l++)}return i===s&&l===i?e:o}return t}function m(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function g(e){if(!v(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!v(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function v(e){return"[object Object]"===Object.prototype.toString.call(e)}function x(e,t,r){return"function"===typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?f(e,t):t}function y(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=[...e,t];return r&&n.length>r?n.slice(1):n}function b(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var w=Symbol();function _(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==w?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var k=function(){let e=[],t=0,r=e=>{e()},n=e=>{e()},i=e=>setTimeout(e,0);const a=n=>{t?e.push(n):i((()=>{r(n)}))};return{batch:a=>{let s;t++;try{s=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i((()=>{n((()=>{t.forEach((e=>{r(e)}))}))}))})()}return s},batchCalls:e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];a((()=>{e(...r)}))},schedule:a,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{i=e}}}(),S=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},j=new class extends S{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!s&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e((e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){return"boolean"===typeof this.#e?this.#e:"hidden"!==globalThis.document?.visibilityState}},E=new class extends S{#n=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!s&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#n!==e&&(this.#n=e,this.listeners.forEach((t=>{t(e)})))}isOnline(){return this.#n}};function C(e){return Math.min(1e3*2**e,3e4)}function N(e){return"online"!==(e??"online")||E.isOnline()}var T=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function P(e){return e instanceof T}function A(e){let t,r=!1,n=0,i=!1;const a=function(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch((()=>{})),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}(),o=()=>j.isFocused()&&("always"===e.networkMode||E.isOnline())&&e.canRun(),l=()=>N(e.networkMode)&&e.canRun(),c=r=>{i||(i=!0,e.onSuccess?.(r),t?.(),a.resolve(r))},u=r=>{i||(i=!0,e.onError?.(r),t?.(),a.reject(r))},d=()=>new Promise((r=>{t=e=>{(i||o())&&r(e)},e.onPause?.()})).then((()=>{t=void 0,i||e.onContinue?.()})),h=()=>{if(i)return;let t;const a=0===n?e.initialPromise:void 0;try{t=a??e.fn()}catch(l){t=Promise.reject(l)}Promise.resolve(t).then(c).catch((t=>{if(i)return;const a=e.retry??(s?0:3),l=e.retryDelay??C,c="function"===typeof l?l(n,t):l,p=!0===a||"number"===typeof a&&n<a||"function"===typeof a&&a(n,t);var f;!r&&p?(n++,e.onFail?.(n,t),(f=c,new Promise((e=>{setTimeout(e,f)}))).then((()=>o()?void 0:d())).then((()=>{r?u(t):h()}))):u(t)}))};return{promise:a,cancel:t=>{i||(u(new T(t)),e.abort?.())},continue:()=>(t?.(),a),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:l,start:()=>(l()?h():d().then(h),a)}}var M=class{#i;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),function(e){return"number"===typeof e&&e>=0&&e!==1/0}(this.gcTime)&&(this.#i=setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(s?1/0:3e5))}clearGcTimeout(){this.#i&&(clearTimeout(this.#i),this.#i=void 0)}},I=class extends M{#a;#s;#o;#l;#c;#u;#d;constructor(e){super(),this.#d=!1,this.#u=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#l=e.client,this.#o=this.#l.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#a=function(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=e.state??this.#a,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#c?.promise}setOptions(e){this.options={...this.#u,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#o.remove(this)}setData(e,t){const r=x(this.state.data,e,this.options);return this.#h({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#h({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#c?.promise;return this.#c?.cancel(e),t?t.then(o).catch(o):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#a)}isActive(){return this.observers.some((e=>!1!==function(e,t){return"function"===typeof e?e(t):e}(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===w||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data)}isStaleByTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.state.isInvalidated||void 0===this.state.data||!function(e,t){return Math.max(e+(t||0)-Date.now(),0)}(this.state.dataUpdatedAt,e)}onFocus(){const e=this.observers.find((e=>e.shouldFetchOnWindowFocus()));e?.refetch({cancelRefetch:!1}),this.#c?.continue()}onOnline(){const e=this.observers.find((e=>e.shouldFetchOnReconnect()));e?.refetch({cancelRefetch:!1}),this.#c?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#o.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.#c&&(this.#d?this.#c.cancel({revert:!0}):this.#c.cancelRetry()),this.scheduleGc()),this.#o.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#h({type:"invalidate"})}fetch(e,t){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#c)return this.#c.continueRetry(),this.#c.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const r=new AbortController,n=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#d=!0,r.signal)})},i={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#l,state:this.state,fetchFn:()=>{const e=_(this.options,t),r={client:this.#l,queryKey:this.queryKey,meta:this.meta};return n(r),this.#d=!1,this.options.persister?this.options.persister(e,r,this):e(r)}};n(i),this.options.behavior?.onFetch(i,this),this.#s=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===i.fetchOptions?.meta||this.#h({type:"fetch",meta:i.fetchOptions?.meta});const a=e=>{P(e)&&e.silent||this.#h({type:"error",error:e}),P(e)||(this.#o.config.onError?.(e,this),this.#o.config.onSettled?.(this.state.data,e,this)),this.scheduleGc()};return this.#c=A({initialPromise:t?.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:e=>{if(void 0!==e){try{this.setData(e)}catch(t){return void a(t)}this.#o.config.onSuccess?.(e,this),this.#o.config.onSettled?.(e,this.state.error,this),this.scheduleGc()}else a(new Error(`${this.queryHash} data is undefined`))},onError:a,onFail:(e,t)=>{this.#h({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#h({type:"pause"})},onContinue:()=>{this.#h({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0}),this.#c.start()}#h(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...O(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return P(r)&&r.revert&&this.#s?{...this.#s,fetchStatus:"idle"}:{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),k.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),this.#o.notify({query:this,type:"updated",action:e})}))}};function O(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:N(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}var D=class extends S{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.config=e,this.#p=new Map}#p;build(e,t,r){const n=t.queryKey,i=t.queryHash??d(n,t);let a=this.get(i);return a||(a=new I({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){this.#p.has(e.queryHash)||(this.#p.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#p.get(e.queryHash);t&&(e.destroy(),t===e&&this.#p.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){k.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#p.get(e)}getAll(){return[...this.#p.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>c(t,e)))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>c(e,t))):t}notify(e){k.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){k.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){k.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},R=class extends M{#f;#m;#c;constructor(e){super(),this.mutationId=e.mutationId,this.#m=e.mutationCache,this.#f=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#f.includes(e)||(this.#f.push(e),this.clearGcTimeout(),this.#m.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#f=this.#f.filter((t=>t!==e)),this.scheduleGc(),this.#m.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#f.length||("pending"===this.state.status?this.scheduleGc():this.#m.remove(this))}continue(){return this.#c?.continue()??this.execute(this.state.variables)}async execute(e){this.#c=A({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#h({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#h({type:"pause"})},onContinue:()=>{this.#h({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#m.canRun(this)});const t="pending"===this.state.status,r=!this.#c.canStart();try{if(!t){this.#h({type:"pending",variables:e,isPaused:r}),await(this.#m.config.onMutate?.(e,this));const t=await(this.options.onMutate?.(e));t!==this.state.context&&this.#h({type:"pending",context:t,variables:e,isPaused:r})}const n=await this.#c.start();return await(this.#m.config.onSuccess?.(n,e,this.state.context,this)),await(this.options.onSuccess?.(n,e,this.state.context)),await(this.#m.config.onSettled?.(n,null,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(n,null,e,this.state.context)),this.#h({type:"success",data:n}),n}catch(n){try{throw await(this.#m.config.onError?.(n,e,this.state.context,this)),await(this.options.onError?.(n,e,this.state.context)),await(this.#m.config.onSettled?.(void 0,n,this.state.variables,this.state.context,this)),await(this.options.onSettled?.(void 0,n,e,this.state.context)),n}finally{this.#h({type:"error",error:n})}}finally{this.#m.runNext(this)}}#h(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),k.batch((()=>{this.#f.forEach((t=>{t.onMutationUpdate(e)})),this.#m.notify({mutation:this,type:"updated",action:e})}))}};var L=class extends S{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.config=e,this.#g=new Set,this.#v=new Map,this.#x=0}#g;#v;#x;build(e,t,r){const n=new R({mutationCache:this,mutationId:++this.#x,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#g.add(e);const t=F(e);if("string"===typeof t){const r=this.#v.get(t);r?r.push(e):this.#v.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#g.delete(e)){const t=F(e);if("string"===typeof t){const r=this.#v.get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#v.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=F(e);if("string"===typeof t){const r=this.#v.get(t),n=r?.find((e=>"pending"===e.state.status));return!n||n===e}return!0}runNext(e){const t=F(e);if("string"===typeof t){const r=this.#v.get(t)?.find((t=>t!==e&&t.state.isPaused));return r?.continue()??Promise.resolve()}return Promise.resolve()}clear(){k.batch((()=>{this.#g.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#g.clear(),this.#v.clear()}))}getAll(){return Array.from(this.#g)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>u(t,e)))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAll().filter((t=>u(e,t)))}notify(e){k.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return k.batch((()=>Promise.all(e.map((e=>e.continue().catch(o))))))}};function F(e){return e.options.scope?.id}function B(e){return{onFetch:(t,r)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],s=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let r=!1;const c=_(t.options,t.fetchOptions),u=async(e,n,i)=>{if(r)return Promise.reject();if(null==n&&e.pages.length)return Promise.resolve(e);const a={client:t.client,queryKey:t.queryKey,pageParam:n,direction:i?"backward":"forward",meta:t.options.meta};(e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",(()=>{r=!0})),t.signal)})})(a);const s=await c(a),{maxPages:o}=t.options,l=i?b:y;return{pages:l(e.pages,s,o),pageParams:l(e.pageParams,n,o)}};if(i&&a.length){const e="backward"===i,t={pages:a,pageParams:s},r=(e?U:z)(n,t);o=await u(t,r,e)}else{const t=e??a.length;do{const e=0===l?s[0]??n.initialPageParam:z(n,o);if(l>0&&null==e)break;o=await u(o,e),l++}while(l<t)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=c}}}function z(e,t){let{pages:r,pageParams:n}=t;const i=r.length-1;return r.length>0?e.getNextPageParam(r[i],r,n[i],n):void 0}function U(e,t){let{pages:r,pageParams:n}=t;return r.length>0?e.getPreviousPageParam?.(r[0],r,n[0],n):void 0}var V=r(579),H=t.createContext(void 0),G=e=>{let{client:r,children:n}=e;return t.useEffect((()=>(r.mount(),()=>{r.unmount()})),[r]),(0,V.jsx)(H.Provider,{value:r,children:n})};let W={data:""},q=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||W,K=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Z=/\/\*[^]*?\*\/|  +/g,Y=/\n+/g,X=(e,t)=>{let r="",n="",i="";for(let a in e){let s=e[a];"@"==a[0]?"i"==a[1]?r=a+" "+s+";":n+="f"==a[1]?X(s,a):a+"{"+X(s,"k"==a[1]?"":t)+"}":"object"==typeof s?n+=X(s,t?t.replace(/([^,])+/g,(e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):a):null!=s&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=X.p?X.p(a,s):a+":"+s+";")}return r+(t&&i?t+"{"+i+"}":i)+n},Q={},J=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+J(e[r]);return t}return e},ee=(e,t,r,n,i)=>{let a=J(e),s=Q[a]||(Q[a]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(a));if(!Q[s]){let t=a!==e?e:(e=>{let t,r,n=[{}];for(;t=K.exec(e.replace(Z,""));)t[4]?n.shift():t[3]?(r=t[3].replace(Y," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(Y," ").trim();return n[0]})(e);Q[s]=X(i?{["@keyframes "+s]:t}:t,r?"":"."+s)}let o=r&&Q.g?Q.g:null;return r&&(Q.g=Q[s]),((e,t,r,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(Q[s],t,n,o),s};function te(e){let t=this||{},r=e.call?e(t.p):e;return ee(r.unshift?r.raw?((e,t,r)=>e.reduce(((e,n,i)=>{let a=t[i];if(a&&a.call){let e=a(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":X(e,""):!1===e?"":e}return e+n+(null==a?"":a)}),""))(r,[].slice.call(arguments,1),t.p):r.reduce(((e,r)=>Object.assign(e,r&&r.call?r(t.p):r)),{}):r,q(t.target),t.g,t.o,t.k)}te.bind({g:1});let re,ne,ie,ae=te.bind({k:1});function se(e,t){let r=this||{};return function(){let n=arguments;function i(a,s){let o=Object.assign({},a),l=o.className||i.className;r.p=Object.assign({theme:ne&&ne()},o),r.o=/ *go\d+/.test(l),o.className=te.apply(r,n)+(l?" "+l:""),t&&(o.ref=s);let c=e;return e[0]&&(c=o.as||e,delete o.as),ie&&c[0]&&ie(o),re(c,o)}return t?t(i):i}}var oe=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,le=(()=>{let e=0;return()=>(++e).toString()})(),ce=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ue=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:r}=t;return ue(e,{type:e.toasts.find((e=>e.id===r.id))?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map((e=>e.id===n||void 0===n?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},de=[],he={toasts:[],pausedAt:void 0},pe=e=>{he=ue(he,e),de.forEach((e=>{e(he)}))},fe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},me=e=>(t,r)=>{let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",r=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||le()}}(t,e,r);return pe({type:2,toast:n}),n.id},ge=(e,t)=>me("blank")(e,t);ge.error=me("error"),ge.success=me("success"),ge.loading=me("loading"),ge.custom=me("custom"),ge.dismiss=e=>{pe({type:3,toastId:e})},ge.remove=e=>pe({type:4,toastId:e}),ge.promise=(e,t,r)=>{let n=ge.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?oe(t.success,e):void 0;return i?ge.success(i,{id:n,...r,...null==r?void 0:r.success}):ge.dismiss(n),e})).catch((e=>{let i=t.error?oe(t.error,e):void 0;i?ge.error(i,{id:n,...r,...null==r?void 0:r.error}):ge.dismiss(n)})),e};var ve=(e,t)=>{pe({type:1,toast:{id:e,height:t}})},xe=()=>{pe({type:5,time:Date.now()})},ye=new Map,be=e=>{let{toasts:r,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[r,n]=(0,t.useState)(he),i=(0,t.useRef)(he);(0,t.useEffect)((()=>(i.current!==he&&n(he),de.push(n),()=>{let e=de.indexOf(n);e>-1&&de.splice(e,1)})),[]);let a=r.toasts.map((t=>{var r,n,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||fe[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}}));return{...r,toasts:a}}(e);(0,t.useEffect)((()=>{if(n)return;let e=Date.now(),t=r.map((t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout((()=>ge.dismiss(t.id)),r);t.visible&&ge.dismiss(t.id)}));return()=>{t.forEach((e=>e&&clearTimeout(e)))}}),[r,n]);let i=(0,t.useCallback)((()=>{n&&pe({type:6,time:Date.now()})}),[n]),a=(0,t.useCallback)(((e,t)=>{let{reverseOrder:n=!1,gutter:i=8,defaultPosition:a}=t||{},s=r.filter((t=>(t.position||a)===(e.position||a)&&t.height)),o=s.findIndex((t=>t.id===e.id)),l=s.filter(((e,t)=>t<o&&e.visible)).length;return s.filter((e=>e.visible)).slice(...n?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+i),0)}),[r]);return(0,t.useEffect)((()=>{r.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(ye.has(e))return;let r=setTimeout((()=>{ye.delete(e),pe({type:4,toastId:e})}),t);ye.set(e,r)}(e.id,e.removeDelay);else{let t=ye.get(e.id);t&&(clearTimeout(t),ye.delete(e.id))}}))}),[r]),{toasts:r,handlers:{updateHeight:ve,startPause:xe,endPause:i,calculateOffset:a}}},we=ae`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,_e=ae`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ke=ae`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Se=se("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${we} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${_e} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ke} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,je=ae`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ee=se("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${je} 1s linear infinite;
`,Ce=ae`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ne=ae`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Te=se("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ce} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ne} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Pe=se("div")`
  position: absolute;
`,Ae=se("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Me=ae`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ie=se("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Me} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Oe=e=>{let{toast:r}=e,{icon:n,type:i,iconTheme:a}=r;return void 0!==n?"string"==typeof n?t.createElement(Ie,null,n):n:"blank"===i?null:t.createElement(Ae,null,t.createElement(Ee,{...a}),"loading"!==i&&t.createElement(Pe,null,"error"===i?t.createElement(Se,{...a}):t.createElement(Te,{...a})))},De=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,Re=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,Le=se("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Fe=se("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$e=t.memo((e=>{let{toast:r,position:n,style:i,children:a}=e,s=r.height?((e,t)=>{let r=e.includes("top")?1:-1,[n,i]=ce()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[De(r),Re(r)];return{animation:t?`${ae(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ae(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(r.position||n||"top-center",r.visible):{opacity:0},o=t.createElement(Oe,{toast:r}),l=t.createElement(Fe,{...r.ariaProps},oe(r.message,r));return t.createElement(Le,{className:r.className,style:{...s,...i,...r.style}},"function"==typeof a?a({icon:o,message:l}):t.createElement(t.Fragment,null,o,l))}));!function(e,t,r,n){X.p=t,re=e,ne=r,ie=n}(t.createElement);var Be,ze=e=>{let{id:r,className:n,style:i,onHeightUpdate:a,children:s}=e,o=t.useCallback((e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;a(r,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[r,a]);return t.createElement("div",{ref:o,className:n,style:i},s)},Ue=te`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ve=e=>{let{reverseOrder:r,position:n="top-center",toastOptions:i,gutter:a,children:s,containerStyle:o,containerClassName:l}=e,{toasts:c,handlers:u}=be(i);return t.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map((e=>{let i=e.position||n,o=((e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ce()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...i}})(i,u.calculateOffset(e,{reverseOrder:r,gutter:a,defaultPosition:n}));return t.createElement(ze,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Ue:"",style:o},"custom"===e.type?oe(e.message,e):s?s(e):t.createElement($e,{toast:e,position:i}))})))},He=ge,Ge=(r(3175),e=>{throw TypeError(e)}),We=(e,t,r)=>(((e,t,r)=>{t.has(e)||Ge("Cannot "+r)})(e,t,"read from private field"),r?r.call(e):t.get(e)),qe="popstate";function Ke(){return tt((function(e,t){let{pathname:r,search:n,hash:i}=e.location;return Qe("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Je(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function Ze(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Ye(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(W){}}}function Xe(e,t){return{usr:e.state,key:e.key,idx:t}}function Qe(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?et(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function Je(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function et(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function tt(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o="POP",l=null,c=u();function u(){return(s.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function h(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"===typeof e?e:Je(e);return r=r.replace(/ $/,"%20"),Ze(t,`No window.location.(origin|href) available to create URL for href: ${r}`),new URL(r,t)}null==c&&(c=0,s.replaceState({...s.state,idx:c},""));let p={get action(){return o},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(qe,d),l=e,()=>{i.removeEventListener(qe,d),l=null}},createHref:e=>t(i,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let n=Qe(p.location,e,t);r&&r(n,e),c=u()+1;let d=Xe(n,c),h=p.createHref(n);try{s.pushState(d,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}a&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let n=Qe(p.location,e,t);r&&r(n,e),c=u();let i=Xe(n,c),d=p.createHref(n);s.replaceState(i,"",d),a&&l&&l({action:o,location:p.location,delta:0})},go:e=>s.go(e)};return p}var rt=class{constructor(e){if(((e,t,r)=>{t.has(e)?Ge("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r)})(this,Be,new Map),e)for(let[t,r]of e)this.set(t,r)}get(e){if(We(this,Be).has(e))return We(this,Be).get(e);if(void 0!==e.defaultValue)return e.defaultValue;throw new Error("No value found for context")}set(e,t){We(this,Be).set(e,t)}};Be=new WeakMap;var nt=new Set(["lazy","caseSensitive","path","id","index","children"]);function it(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e.map(((e,i)=>{let a=[...r,String(i)],s="string"===typeof e.id?e.id:a.join("-");if(Ze(!0!==e.index||!e.children,"Cannot specify children on an index route"),Ze(!n[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),function(e){return!0===e.index}(e)){let r={...e,...t(e),id:s};return n[s]=r,r}{let r={...e,...t(e),id:s,children:void 0};return n[s]=r,e.children&&(r.children=it(e.children,t,a,n)),r}}))}function at(e,t){return st(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function st(e,t,r,n){let i=wt(("string"===typeof t?et(t):t).pathname||"/",r);if(null==i)return null;let a=lt(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=bt(i);s=xt(a[o],e,n)}return s}function ot(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function lt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(Ze(s.relativePath.startsWith(n),`Absolute route path "${s.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),s.relativePath=s.relativePath.slice(n.length));let o=Et([n,s.relativePath]),l=r.concat(s);e.children&&e.children.length>0&&(Ze(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),lt(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:vt(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of ct(e.path))i(e,t,r);else i(e,t)})),t}function ct(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return i?[a,""]:[a];let s=ct(n.join("/")),o=[];return o.push(...s.map((e=>""===e?a:[a,e].join("/")))),i&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var ut=/^:[\w-]+$/,dt=3,ht=2,pt=1,ft=10,mt=-2,gt=e=>"*"===e;function vt(e,t){let r=e.split("/"),n=r.length;return r.some(gt)&&(n+=mt),t&&(n+=ht),r.filter((e=>!gt(e))).reduce(((e,t)=>e+(ut.test(t)?dt:""===t?pt:ft)),n)}function xt(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,i={},a="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",u=yt({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=yt({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:Et([a,u.pathname]),pathnameBase:Ct(Et([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=Et([a,u.pathnameBase]))}return s}function yt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ye("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=n.reduce(((e,t,r)=>{let{paramName:n,isOptional:i}=t;if("*"===n){let e=o[r]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:a,pathnameBase:s,pattern:e}}function bt(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return Ye(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function wt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function _t(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kt(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function St(e){let t=kt(e);return t.map(((e,r)=>r===t.length-1?e.pathname:e.pathnameBase))}function jt(e,t,r){let n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=et(e):(n={...e},Ze(!n.pathname||!n.pathname.includes("?"),_t("?","pathname","search",n)),Ze(!n.pathname||!n.pathname.includes("#"),_t("#","pathname","hash",n)),Ze(!n.search||!n.search.includes("#"),_t("#","search","hash",n)));let a,s=""===e||""===n.pathname,o=s?"/":n.pathname;if(null==o)a=r;else{let e=t.length-1;if(!i&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:n="",hash:i=""}="string"===typeof e?et(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:Nt(n),hash:Tt(i)}}(n,a),c=o&&"/"!==o&&o.endsWith("/"),u=(s||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Et=e=>e.join("/").replace(/\/\/+/g,"/"),Ct=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Nt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Tt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var Pt=class{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function At(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Mt=["POST","PUT","PATCH","DELETE"],It=new Set(Mt),Ot=["GET",...Mt],Dt=new Set(Ot),Rt=new Set([301,302,303,307,308]),Lt=new Set([307,308]),Ft={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$t={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Bt={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},zt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ut=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),Vt="remix-router-transitions",Ht=Symbol("ResetLoaderData");function Gt(e){const t=e.window?e.window:"undefined"!==typeof window?window:void 0,r="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement;Ze(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n,i,a,s=e.mapRouteProperties||Ut,o={},l=it(e.routes,s,void 0,o),c=e.basename||"/",u=e.dataStrategy||rr,d={unstable_middleware:!1,...e.future},h=null,p=new Set,f=null,m=null,g=null,v=null!=e.hydrationData,x=at(l,e.history.location,c),y=!1,b=null;if(null==x&&!e.patchRoutesOnNavigation){let t=yr(404,{pathname:e.history.location.pathname}),{matches:r,route:n}=xr(l);x=r,b={[n.id]:t}}if(x&&!e.hydrationData){de(x,l,e.history.location.pathname).active&&(x=null)}if(x)if(x.some((e=>e.route.lazy)))i=!1;else if(x.some((e=>e.route.loader))){let t=e.hydrationData?e.hydrationData.loaderData:null,r=e.hydrationData?e.hydrationData.errors:null;if(r){let e=x.findIndex((e=>void 0!==r[e.route.id]));i=x.slice(0,e+1).every((e=>!Yt(e.route,t,r)))}else i=x.every((e=>!Yt(e.route,t,r)))}else i=!0;else{i=!1,x=[];let t=de(null,l,e.history.location.pathname);t.active&&t.matches&&(y=!0,x=t.matches)}let w,_,k={historyAction:e.history.action,location:e.history.location,matches:x,initialized:i,navigation:Ft,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||b,fetchers:new Map,blockers:new Map},S="POP",j=!1,E=!1,C=new Map,N=null,T=!1,P=!1,A=new Set,M=new Map,I=0,O=-1,D=new Map,R=new Set,L=new Map,F=new Map,$=new Set,B=new Map,z=null;function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k={...k,...e};let r=[],n=[];k.fetchers.forEach(((e,t)=>{"idle"===e.state&&($.has(t)?r.push(t):n.push(t))})),$.forEach((e=>{k.fetchers.has(e)||M.has(e)||r.push(e)})),[...p].forEach((e=>e(k,{deletedFetchers:r,viewTransitionOpts:t.viewTransitionOpts,flushSync:!0===t.flushSync}))),r.forEach((e=>ee(e))),n.forEach((e=>k.fetchers.delete(e)))}function V(t,r){let i,{flushSync:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null!=k.actionData&&null!=k.navigation.formMethod&&Nr(k.navigation.formMethod)&&"loading"===k.navigation.state&&!0!==t.state?._isRedirect;i=r.actionData?Object.keys(r.actionData).length>0?r.actionData:null:s?k.actionData:null;let o=r.loaderData?mr(k.loaderData,r.loaderData,r.matches||[],r.errors):k.loaderData,c=k.blockers;c.size>0&&(c=new Map(c),c.forEach(((e,t)=>c.set(t,Bt))));let u,d=!0===j||null!=k.navigation.formMethod&&Nr(k.navigation.formMethod)&&!0!==t.state?._isRedirect;if(n&&(l=n,n=void 0),T||"POP"===S||("PUSH"===S?e.history.push(t,t.state):"REPLACE"===S&&e.history.replace(t,t.state)),"POP"===S){let e=C.get(k.location.pathname);e&&e.has(t.pathname)?u={currentLocation:k.location,nextLocation:t}:C.has(t.pathname)&&(u={currentLocation:t,nextLocation:k.location})}else if(E){let e=C.get(k.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),C.set(k.location.pathname,e)),u={currentLocation:k.location,nextLocation:t}}U({...r,actionData:i,loaderData:o,historyAction:S,location:t,initialized:!0,navigation:Ft,revalidation:"idle",restoreScrollPosition:ue(t,r.matches||k.matches),preventScrollReset:d,blockers:c},{viewTransitionOpts:u,flushSync:!0===a}),S="POP",j=!1,E=!1,T=!1,P=!1,z?.resolve(),z=null}async function H(t,r,i){w&&w.abort(),w=null,S=t,T=!0===(i&&i.startUninterruptedRevalidation),function(e,t){if(f&&g){let r=ce(e,t);f[r]=g()}}(k.location,k.matches),j=!0===(i&&i.preventScrollReset),E=!0===(i&&i.enableViewTransition);let a=n||l,s=i&&i.overrideNavigation,o=i?.initialHydration&&k.matches&&k.matches.length>0&&!y?k.matches:at(a,r,c),u=!0===(i&&i.flushSync);if(o&&k.initialized&&!P&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(k.location,r)&&!(i&&i.submission&&Nr(i.submission.formMethod)))return void V(r,{matches:o},{flushSync:u});let d=de(o,a,r.pathname);if(d.active&&d.matches&&(o=d.matches),!o){let{error:e,notFoundMatches:t,route:n}=le(r.pathname);return void V(r,{matches:t,loaderData:{},errors:{[n.id]:e}},{flushSync:u})}w=new AbortController;let h,p=ur(e.history,r,w.signal,i&&i.submission),m=new rt(e.unstable_getContext?await e.unstable_getContext():void 0);if(i&&i.pendingError)h=[vr(o).route.id,{type:"error",error:i.pendingError}];else if(i&&i.submission&&Nr(i.submission.formMethod)){let t=await async function(e,t,r,n,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};Y();let o,l=function(e,t){let r={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return r}(t,r);if(U({navigation:l},{flushSync:!0===s.flushSync}),a){let r=await he(n,t.pathname,e.signal);if("aborted"===r.type)return{shortCircuited:!0};if("error"===r.type){let e=vr(r.partialMatches).route.id;return{matches:r.partialMatches,pendingActionResult:[e,{type:"error",error:r.error}]}}if(!r.matches){let{notFoundMatches:e,error:r,route:n}=le(t.pathname);return{matches:e,pendingActionResult:[n.id,{type:"error",error:r}]}}n=r.matches}let u=Pr(n,t);if(u.route.action||u.route.lazy){let t=await K("action",e,[u],n,i,null);if(o=t[u.route.id],!o)for(let e of n)if(t[e.route.id]){o=t[e.route.id];break}if(e.signal.aborted)return{shortCircuited:!0}}else o={type:"error",error:yr(405,{method:e.method,pathname:t.pathname,routeId:u.route.id})};if(Sr(o)){let t;if(s&&null!=s.replace)t=s.replace;else{t=cr(o.response.headers.get("Location"),new URL(e.url),c)===k.location.pathname+k.location.search}return await q(e,o,!0,{submission:r,replace:t}),{shortCircuited:!0}}if(kr(o)){let e=vr(n,u.route.id);return!0!==(s&&s.replace)&&(S="PUSH"),{matches:n,pendingActionResult:[e.route.id,o]}}return{matches:n,pendingActionResult:[u.route.id,o]}}(p,r,i.submission,o,m,d.active,{replace:i.replace,flushSync:u});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,n]=t.pendingActionResult;if(kr(n)&&At(n.error)&&404===n.error.status)return w=null,void V(r,{matches:t.matches,loaderData:{},errors:{[e]:n.error}})}o=t.matches||o,h=t.pendingActionResult,s=Mr(r,i.submission),u=!1,d.active=!1,p=ur(e.history,p.url,p.signal)}let{shortCircuited:v,matches:x,loaderData:b,errors:_}=await async function(t,r,i,a,s,o,u,d,h,p,f,m){let g=o||Mr(r,u),v=u||d||Ar(g),x=!T&&!p;if(s){if(x){let e=G(m);U({navigation:g,...void 0!==e?{actionData:e}:{}},{flushSync:f})}let e=await he(i,r.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let t=vr(e.partialMatches).route.id;return{matches:e.partialMatches,loaderData:{},errors:{[t]:e.error}}}if(!e.matches){let{error:e,notFoundMatches:t,route:n}=le(r.pathname);return{matches:t,loaderData:{},errors:{[n.id]:e}}}i=e.matches}let y=n||l,[b,_]=Zt(e.history,k,i,v,r,!0===p,P,A,$,L,R,y,c,m);if(O=++I,0===b.length&&0===_.length){let e=ne();return V(r,{matches:i,loaderData:{},errors:m&&kr(m[1])?{[m[0]]:m[1].error}:null,...gr(m),...e?{fetchers:new Map(k.fetchers)}:{}},{flushSync:f}),{shortCircuited:!0}}if(x){let e={};if(!s){e.navigation=g;let t=G(m);void 0!==t&&(e.actionData=t)}_.length>0&&(e.fetchers=function(e){return e.forEach((e=>{let t=k.fetchers.get(e.key),r=Ir(void 0,t?t.data:void 0);k.fetchers.set(e.key,r)})),new Map(k.fetchers)}(_)),U(e,{flushSync:f})}_.forEach((e=>{te(e.key),e.controller&&M.set(e.key,e.controller)}));let S=()=>_.forEach((e=>te(e.key)));w&&w.signal.addEventListener("abort",S);let{loaderResults:j,fetcherResults:E}=await Z(i,b,_,t,a);if(t.signal.aborted)return{shortCircuited:!0};w&&w.signal.removeEventListener("abort",S);_.forEach((e=>M.delete(e.key)));let C=br(j);if(C)return await q(t,C.result,!0,{replace:h}),{shortCircuited:!0};if(C=br(E),C)return R.add(C.key),await q(t,C.result,!0,{replace:h}),{shortCircuited:!0};let{loaderData:N,errors:D}=fr(k,i,j,m,_,E);p&&k.errors&&(D={...k.errors,...D});let F=ne(),B=ie(O),z=F||B||_.length>0;return{matches:i,loaderData:N,errors:D,...z?{fetchers:new Map(k.fetchers)}:{}}}(p,r,o,m,d.active,s,i&&i.submission,i&&i.fetcherSubmission,i&&i.replace,i&&!0===i.initialHydration,u,h);v||(w=null,V(r,{matches:x||o,...gr(h),loaderData:b,errors:_}))}function G(e){return e&&!kr(e[1])?{[e[0]]:e[1].data}:k.actionData?0===Object.keys(k.actionData).length?null:k.actionData:void 0}async function q(n,i,a){let{submission:s,fetcherSubmission:o,preventScrollReset:l,replace:u}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i.response.headers.has("X-Remix-Revalidate")&&(P=!0);let d=i.response.headers.get("Location");Ze(d,"Expected a Location header on the redirect Response"),d=cr(d,new URL(n.url),c);let h=Qe(k.location,d,{_isRedirect:!0});if(r){let r=!1;if(i.response.headers.has("X-Remix-Reload-Document"))r=!0;else if(zt.test(d)){const n=e.history.createURL(d);r=n.origin!==t.location.origin||null==wt(n.pathname,c)}if(r)return void(u?t.location.replace(d):t.location.assign(d))}w=null;let p=!0===u||i.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:f,formAction:m,formEncType:g}=k.navigation;!s&&!o&&f&&m&&g&&(s=Ar(k.navigation));let v=s||o;if(Lt.has(i.response.status)&&v&&Nr(v.formMethod))await H(p,h,{submission:{...v,formAction:d},preventScrollReset:l||j,enableViewTransition:a?E:void 0});else{let e=Mr(h,s);await H(p,h,{overrideNavigation:e,fetcherSubmission:o,preventScrollReset:l||j,enableViewTransition:a?E:void 0})}}async function K(e,t,r,n,i,a){let l,h={};try{l=await sr(u,e,t,r,n,a,o,s,i,d.unstable_middleware)}catch(W){return r.forEach((t=>{h[t.route.id]={type:"error",error:W}})),h}for(let[s,o]of Object.entries(l))if(_r(o)){let e=o.result;h[s]={type:"redirect",response:lr(e,t,s,n,c)}}else h[s]=await or(o);return h}async function Z(t,r,n,i,a){let s=K("loader",i,r,t,a,null),o=Promise.all(n.map((async t=>{if(t.matches&&t.match&&t.controller){let r=(await K("loader",ur(e.history,t.path,t.controller.signal),[t.match],t.matches,a,t.key))[t.match.route.id];return{[t.key]:r}}return Promise.resolve({[t.key]:{type:"error",error:yr(404,{pathname:t.path})}})}))),l=await s,c=(await o).reduce(((e,t)=>Object.assign(e,t)),{});return{loaderResults:l,fetcherResults:c}}function Y(){P=!0,L.forEach(((e,t)=>{M.has(t)&&A.add(t),te(t)}))}function X(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};k.fetchers.set(e,t),U({fetchers:new Map(k.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Q(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=vr(k.matches,t);ee(e),U({errors:{[i.route.id]:r},fetchers:new Map(k.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function J(e){return F.set(e,(F.get(e)||0)+1),$.has(e)&&$.delete(e),k.fetchers.get(e)||$t}function ee(e){let t=k.fetchers.get(e);!M.has(e)||t&&"loading"===t.state&&D.has(e)||te(e),L.delete(e),D.delete(e),R.delete(e),$.delete(e),A.delete(e),k.fetchers.delete(e)}function te(e){let t=M.get(e);t&&(t.abort(),M.delete(e))}function re(e){for(let t of e){let e=Or(J(t).data);k.fetchers.set(t,e)}}function ne(){let e=[],t=!1;for(let r of R){let n=k.fetchers.get(r);Ze(n,`Expected fetcher: ${r}`),"loading"===n.state&&(R.delete(r),e.push(r),t=!0)}return re(e),t}function ie(e){let t=[];for(let[r,n]of D)if(n<e){let e=k.fetchers.get(r);Ze(e,`Expected fetcher: ${r}`),"loading"===e.state&&(te(r),D.delete(r),t.push(r))}return re(t),t.length>0}function ae(e){k.blockers.delete(e),B.delete(e)}function se(e,t){let r=k.blockers.get(e)||Bt;Ze("unblocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"proceeding"===t.state||"blocked"===r.state&&"unblocked"===t.state||"proceeding"===r.state&&"unblocked"===t.state,`Invalid blocker state transition: ${r.state} -> ${t.state}`);let n=new Map(k.blockers);n.set(e,t),U({blockers:n})}function oe(e){let{currentLocation:t,nextLocation:r,historyAction:n}=e;if(0===B.size)return;B.size>1&&Ye(!1,"A router only supports one blocker at a time");let i=Array.from(B.entries()),[a,s]=i[i.length-1],o=k.blockers.get(a);return o&&"proceeding"===o.state?void 0:s({currentLocation:t,nextLocation:r,historyAction:n})?a:void 0}function le(e){let t=yr(404,{pathname:e}),r=n||l,{matches:i,route:a}=xr(r);return{notFoundMatches:i,route:a,error:t}}function ce(e,t){if(m){let r=m(e,t.map((e=>ot(e,k.loaderData))));return r||e.key}return e.key}function ue(e,t){if(f){let r=ce(e,t),n=f[r];if("number"===typeof n)return n}return null}function de(t,r,n){if(e.patchRoutesOnNavigation){if(!t){return{active:!0,matches:st(r,n,c,!0)||[]}}if(Object.keys(t[0].params).length>0){return{active:!0,matches:st(r,n,c,!0)}}}return{active:!1,matches:null}}async function he(t,r,i,a){if(!e.patchRoutesOnNavigation)return{type:"success",matches:t};let u=t;for(;;){let t=null==n,d=n||l,h=o;try{await e.patchRoutesOnNavigation({signal:i,path:r,matches:u,fetcherKey:a,patch:(e,t)=>{i.aborted||Jt(e,t,d,h,s)}})}catch(W){return{type:"error",error:W,partialMatches:u}}finally{t&&!i.aborted&&(l=[...l])}if(i.aborted)return{type:"aborted"};let p=at(d,r,c);if(p)return{type:"success",matches:p};let f=st(d,r,c,!0);if(!f||u.length===f.length&&u.every(((e,t)=>e.route.id===f[t].route.id)))return{type:"success",matches:null};u=f}}return a={get basename(){return c},get future(){return d},get state(){return k},get routes(){return l},get window(){return t},initialize:function(){if(h=e.history.listen((t=>{let{action:r,location:n,delta:i}=t;if(_)return _(),void(_=void 0);Ye(0===B.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let a=oe({currentLocation:k.location,nextLocation:n,historyAction:r});if(a&&null!=i){let t=new Promise((e=>{_=e}));return e.history.go(-1*i),void se(a,{state:"blocked",location:n,proceed(){se(a,{state:"proceeding",proceed:void 0,reset:void 0,location:n}),t.then((()=>e.history.go(i)))},reset(){let e=new Map(k.blockers);e.set(a,Bt),U({blockers:e})}})}return H(r,n)})),r){!function(e,t){try{let r=e.sessionStorage.getItem(Vt);if(r){let e=JSON.parse(r);for(let[r,n]of Object.entries(e||{}))n&&Array.isArray(n)&&t.set(r,new Set(n||[]))}}catch(W){}}(t,C);let e=()=>function(e,t){if(t.size>0){let n={};for(let[e,r]of t)n[e]=[...r];try{e.sessionStorage.setItem(Vt,JSON.stringify(n))}catch(r){Ye(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}(t,C);t.addEventListener("pagehide",e),N=()=>t.removeEventListener("pagehide",e)}return k.initialized||H("POP",k.location,{initialHydration:!0}),a},subscribe:function(e){return p.add(e),()=>p.delete(e)},enableScrollRestoration:function(e,t,r){if(f=e,g=t,m=r||null,!v&&k.navigation===Ft){v=!0;let e=ue(k.location,k.matches);null!=e&&U({restoreScrollPosition:e})}return()=>{f=null,g=null,m=null}},navigate:async function t(r,n){if("number"===typeof r)return void e.history.go(r);let i=Wt(k.location,k.matches,c,r,n?.fromRouteId,n?.relative),{path:a,submission:s,error:o}=qt(!1,i,n),l=k.location,u=Qe(k.location,a,n&&n.state);u={...u,...e.history.encodeLocation(u)};let d=n&&null!=n.replace?n.replace:void 0,h="PUSH";!0===d?h="REPLACE":!1===d||null!=s&&Nr(s.formMethod)&&s.formAction===k.location.pathname+k.location.search&&(h="REPLACE");let p=n&&"preventScrollReset"in n?!0===n.preventScrollReset:void 0,f=!0===(n&&n.flushSync),m=oe({currentLocation:l,nextLocation:u,historyAction:h});m?se(m,{state:"blocked",location:u,proceed(){se(m,{state:"proceeding",proceed:void 0,reset:void 0,location:u}),t(r,n)},reset(){let e=new Map(k.blockers);e.set(m,Bt),U({blockers:e})}}):await H(h,u,{submission:s,pendingError:o,preventScrollReset:p,replace:n&&n.replace,enableViewTransition:n&&n.viewTransition,flushSync:f})},fetch:async function(t,r,i,a){te(t);let s=!0===(a&&a.flushSync),o=n||l,u=Wt(k.location,k.matches,c,i,r,a?.relative),d=at(o,u,c),h=de(d,o,u);if(h.active&&h.matches&&(d=h.matches),!d)return void Q(t,r,yr(404,{pathname:u}),{flushSync:s});let{path:p,submission:f,error:m}=qt(!0,u,a);if(m)return void Q(t,r,m,{flushSync:s});let g=Pr(d,p),v=new rt(e.unstable_getContext?await e.unstable_getContext():void 0),x=!0===(a&&a.preventScrollReset);f&&Nr(f.formMethod)?await async function(t,r,i,a,s,o,u,d,h,p){function f(e){if(!e.route.action&&!e.route.lazy){let e=yr(405,{method:p.formMethod,pathname:i,routeId:r});return Q(t,r,e,{flushSync:d}),!0}return!1}if(Y(),L.delete(t),!u&&f(a))return;let m=k.fetchers.get(t);X(t,function(e,t){let r={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return r}(p,m),{flushSync:d});let g=new AbortController,v=ur(e.history,i,g.signal,p);if(u){let e=await he(s,i,v.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void Q(t,r,e.error,{flushSync:d});if(!e.matches)return void Q(t,r,yr(404,{pathname:i}),{flushSync:d});if(f(a=Pr(s=e.matches,i)))return}M.set(t,g);let x=I,y=await K("action",v,[a],s,o,t),b=y[a.route.id];if(v.signal.aborted)return void(M.get(t)===g&&M.delete(t));if($.has(t)){if(Sr(b)||kr(b))return void X(t,Or(void 0))}else{if(Sr(b))return M.delete(t),O>x?void X(t,Or(void 0)):(R.add(t),X(t,Ir(p)),q(v,b,!1,{fetcherSubmission:p,preventScrollReset:h}));if(kr(b))return void Q(t,r,b.error)}let _=k.navigation.location||k.location,j=ur(e.history,_,g.signal),E=n||l,C="idle"!==k.navigation.state?at(E,k.navigation.location,c):k.matches;Ze(C,"Didn't find any matches after fetcher action");let N=++I;D.set(t,N);let T=Ir(p,b.data);k.fetchers.set(t,T);let[F,B]=Zt(e.history,k,C,p,_,!1,P,A,$,L,R,E,c,[a.route.id,b]);B.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,r=k.fetchers.get(t),n=Ir(void 0,r?r.data:void 0);k.fetchers.set(t,n),te(t),e.controller&&M.set(t,e.controller)})),U({fetchers:new Map(k.fetchers)});let z=()=>B.forEach((e=>te(e.key)));g.signal.addEventListener("abort",z);let{loaderResults:H,fetcherResults:G}=await Z(C,F,B,j,o);if(g.signal.aborted)return;g.signal.removeEventListener("abort",z),D.delete(t),M.delete(t),B.forEach((e=>M.delete(e.key)));let W=br(H);if(W)return q(j,W.result,!1,{preventScrollReset:h});if(W=br(G),W)return R.add(W.key),q(j,W.result,!1,{preventScrollReset:h});let{loaderData:J,errors:ee}=fr(k,C,H,void 0,B,G);if(k.fetchers.has(t)){let e=Or(b.data);k.fetchers.set(t,e)}ie(N),"loading"===k.navigation.state&&N>O?(Ze(S,"Expected pending action"),w&&w.abort(),V(k.navigation.location,{matches:C,loaderData:J,errors:ee,fetchers:new Map(k.fetchers)})):(U({errors:ee,loaderData:mr(k.loaderData,J,C,ee),fetchers:new Map(k.fetchers)}),P=!1)}(t,r,p,g,d,v,h.active,s,x,f):(L.set(t,{routeId:r,path:p}),await async function(t,r,n,i,a,s,o,l,c,u){let d=k.fetchers.get(t);X(t,Ir(u,d?d.data:void 0),{flushSync:l});let h=new AbortController,p=ur(e.history,n,h.signal);if(o){let e=await he(a,n,p.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void Q(t,r,e.error,{flushSync:l});if(!e.matches)return void Q(t,r,yr(404,{pathname:n}),{flushSync:l});i=Pr(a=e.matches,n)}M.set(t,h);let f=I,m=await K("loader",p,[i],a,s,t),g=m[i.route.id];M.get(t)===h&&M.delete(t);if(p.signal.aborted)return;if($.has(t))return void X(t,Or(void 0));if(Sr(g))return O>f?void X(t,Or(void 0)):(R.add(t),void await q(p,g,!1,{preventScrollReset:c}));if(kr(g))return void Q(t,r,g.error);X(t,Or(g.data))}(t,r,p,g,d,v,h.active,s,x,f))},revalidate:function(){z||(z=function(){let e,t,r=new Promise(((n,i)=>{e=async e=>{n(e);try{await r}catch(W){}},t=async e=>{i(e);try{await r}catch(W){}}}));return{promise:r,resolve:e,reject:t}}()),Y(),U({revalidation:"loading"});let e=z.promise;return"submitting"===k.navigation.state?e:"idle"===k.navigation.state?(H(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),e):(H(S||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:!0===E}),e)},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:J,deleteFetcher:function(e){let t=(F.get(e)||0)-1;t<=0?(F.delete(e),$.add(e)):F.set(e,t),U({fetchers:new Map(k.fetchers)})},dispose:function(){h&&h(),N&&N(),p.clear(),w&&w.abort(),k.fetchers.forEach(((e,t)=>ee(t))),k.blockers.forEach(((e,t)=>ae(t)))},getBlocker:function(e,t){let r=k.blockers.get(e)||Bt;return B.get(e)!==t&&B.set(e,t),r},deleteBlocker:ae,patchRoutes:function(e,t){let r=null==n;Jt(e,t,n||l,o,s),r&&(l=[...l],U({}))},_internalFetchControllers:M,_internalSetRoutes:function(e){o={},n=it(e,s,void 0,o)}},a}function Wt(e,t,r,n,i,a){let s,o;if(i){s=[];for(let e of t)if(s.push(e),e.route.id===i){o=e;break}}else s=t,o=t[t.length-1];let l=jt(n||".",St(s),wt(e.pathname,r)||e.pathname,"path"===a);if(null==n&&(l.search=e.search,l.hash=e.hash),(null==n||""===n||"."===n)&&o){let e=Tr(l.search);if(o.route.index&&!e)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&e){let e=new URLSearchParams(l.search),t=e.getAll("index");e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let r=e.toString();l.search=r?`?${r}`:""}}return"/"!==r&&(l.pathname="/"===l.pathname?r:Et([r,l.pathname])),Je(l)}function qt(e,t,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:t};if(r.formMethod&&!Cr(r.formMethod))return{path:t,error:yr(405,{method:r.formMethod})};let n,i,a=()=>({path:t,error:yr(400,{type:"invalid-body"})}),s=(r.formMethod||"get").toUpperCase(),o=wr(t);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!Nr(s))return a();let e="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[r,n]=t;return`${e}${r}=${n}\n`}),""):String(r.body);return{path:t,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!Nr(s))return a();try{let e="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:s,formAction:o,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(W){return a()}}}if(Ze("function"===typeof FormData,"FormData is not available in this environment"),r.formData)n=dr(r.formData),i=r.formData;else if(r.body instanceof FormData)n=dr(r.body),i=r.body;else if(r.body instanceof URLSearchParams)n=r.body,i=hr(n);else if(null==r.body)n=new URLSearchParams,i=new FormData;else try{n=new URLSearchParams(r.body),i=hr(n)}catch(W){return a()}let l={formMethod:s,formAction:o,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:i,json:void 0,text:void 0};if(Nr(l.formMethod))return{path:t,submission:l};let c=et(t);return e&&c.search&&Tr(c.search)&&n.append("index",""),c.search=`?${n}`,{path:Je(c),submission:l}}function Kt(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.findIndex((e=>e.route.id===t));return n>=0?e.slice(0,r?n+1:n):e}function Zt(e,t,r,n,i,a,s,o,l,c,u,d,h,p){let f=p?kr(p[1])?p[1].error:p[1].data:void 0,m=e.createURL(t.location),g=e.createURL(i),v=r;a&&t.errors?v=Kt(r,Object.keys(t.errors)[0],!0):p&&kr(p[1])&&(v=Kt(r,p[0]));let x=p?p[1].statusCode:void 0,y=x&&x>=400,b=v.filter(((e,r)=>{let{route:i}=e;if(i.lazy)return!0;if(null==i.loader)return!1;if(a)return Yt(i,t.loaderData,t.errors);if(function(e,t,r){let n=!t||r.route.id!==t.route.id,i=!e.hasOwnProperty(r.route.id);return n||i}(t.loaderData,t.matches[r],e))return!0;let o=t.matches[r],l=e;return Qt(e,{currentUrl:m,currentParams:o.params,nextUrl:g,nextParams:l.params,...n,actionResult:f,actionStatus:x,defaultShouldRevalidate:!y&&(s||m.pathname+m.search===g.pathname+g.search||m.search!==g.search||Xt(o,l))})})),w=[];return c.forEach(((e,i)=>{if(a||!r.some((t=>t.route.id===e.routeId))||l.has(i))return;let c=at(d,e.path,h);if(!c)return void w.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let p=t.fetchers.get(i),v=Pr(c,e.path),b=!1;u.has(i)?b=!1:o.has(i)?(o.delete(i),b=!0):b=p&&"idle"!==p.state&&void 0===p.data?s:Qt(v,{currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:g,nextParams:r[r.length-1].params,...n,actionResult:f,actionStatus:x,defaultShouldRevalidate:!y&&s}),b&&w.push({key:i,routeId:e.routeId,path:e.path,matches:c,match:v,controller:new AbortController})})),[b,w]}function Yt(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=null!=t&&void 0!==t[e.id],i=null!=r&&void 0!==r[e.id];return!(!n&&i)&&("function"===typeof e.loader&&!0===e.loader.hydrate||!n&&!i)}function Xt(e,t){let r=e.route.path;return e.pathname!==t.pathname||null!=r&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Qt(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if("boolean"===typeof r)return r}return t.defaultShouldRevalidate}function Jt(e,t,r,n,i){let a;if(e){let t=n[e];Ze(t,`No route found to patch children into: routeId = ${e}`),t.children||(t.children=[]),a=t.children}else a=r;let s=it(t.filter((e=>!a.some((t=>er(e,t))))),i,[e||"_","patch",String(a?.length||"0")],n);a.push(...s)}function er(e,t){return"id"in e&&"id"in t&&e.id===t.id||e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive&&(!(e.children&&0!==e.children.length||t.children&&0!==t.children.length)||e.children.every(((e,r)=>t.children?.some((t=>er(e,t))))))}async function tr(e){let t=e.matches.filter((e=>e.shouldLoad)),r={},n=await Promise.all(t.map((e=>e.resolve())));return n.forEach(((e,n)=>{r[t[n].route.id]=e})),r}async function rr(e){return e.matches.some((e=>e.route.unstable_middleware))?nr(e,!1,(()=>tr(e)),(e=>({[e.routeId]:{type:"error",result:e.error}}))):tr(e)}async function nr(e,t,r,n){let{matches:i,request:a,params:s,context:o}=e,l={handlerResult:void 0,propagateResult:t};try{let e=i.flatMap((e=>e.route.unstable_middleware?e.route.unstable_middleware.map((t=>[e.route.id,t])):[])),t=await ar({request:a,params:s,context:o},e,l,r);return l.propagateResult?t:l.handlerResult}catch(W){if(!(W instanceof ir))throw W;let r=await n(W);return t||!l.handlerResult?r:Object.assign(l.handlerResult,r)}}var ir=class{constructor(e,t){this.routeId=e,this.error=t}};async function ar(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,{request:a}=e;if(a.signal.aborted){if(a.signal.reason)throw a.signal.reason;throw new Error(`Request aborted without an \`AbortSignal.reason\`: ${a.method} ${a.url}`)}let s=t[i];if(!s)return r.handlerResult=await n(),r.handlerResult;let o,[l,c]=s,u=!1,d=async()=>{if(u)throw new Error("You may only call `next()` once per middleware");u=!0;let a=await ar(e,t,r,n,i+1);if(r.propagateResult)return o=a,o};try{let t=await c({request:e.request,params:e.params,context:e.context},d);return u?void 0===t?o:t:d()}catch(W){if(W instanceof ir)throw W;throw new ir(l,W)}}async function sr(e,t,r,n,i,a,s,o,l,c){let u=i.map((e=>e.route.lazy?async function(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Ze(i,"No route found in manifest");let a={};for(let s in n){let e=void 0!==i[s]&&"hasErrorBoundary"!==s;Ye(!e,`Route "${i.id}" has a static property "${s}" defined but its lazy function is also returning a value for this property. The lazy route property "${s}" will be ignored.`),e||nt.has(s)||(a[s]=n[s])}Object.assign(i,a),Object.assign(i,{...t(i),lazy:void 0})}(e.route,o,s):void 0));c&&await Promise.all(u);let d=i.map(((e,i)=>{let a=u[i],s=n.some((t=>t.route.id===e.route.id));return{...e,shouldLoad:s,resolve:async n=>(n&&"GET"===r.method&&(e.route.lazy||e.route.loader)&&(s=!0),s?async function(e,t,r,n,i,a){let s,o,l=n=>{let s,l=new Promise(((e,t)=>s=t));o=()=>s(),t.signal.addEventListener("abort",o);let c=i=>"function"!==typeof n?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${r.route.id}]`)):n({request:t,params:r.params,context:a},...void 0!==i?[i]:[]),u=(async()=>{try{return{type:"data",result:await(i?i((e=>c(e))):c())}}catch(W){return{type:"error",result:W}}})();return Promise.race([u,l])};try{let i=r.route[e];if(n)if(i){let e,[t]=await Promise.all([l(i).catch((t=>{e=t})),n]);if(void 0!==e)throw e;s=t}else{if(await n,i=r.route[e],!i){if("action"===e){let e=new URL(t.url),n=e.pathname+e.search;throw yr(405,{method:t.method,pathname:n,routeId:r.route.id})}return{type:"data",result:void 0}}s=await l(i)}else{if(!i){let e=new URL(t.url);throw yr(404,{pathname:e.pathname+e.search})}s=await l(i)}}catch(W){return{type:"error",result:W}}finally{o&&t.signal.removeEventListener("abort",o)}return s}(t,r,e,a,n,l):Promise.resolve({type:"data",result:void 0}))}})),h=await e({matches:d,request:r,params:i[0].params,fetcherKey:a,context:l});try{await Promise.all(u)}catch(W){}return h}async function or(e){let{result:t,type:r}=e;if(Er(t)){let e;try{let r=t.headers.get("Content-Type");e=r&&/\bapplication\/json\b/.test(r)?null==t.body?null:await t.json():await t.text()}catch(W){return{type:"error",error:W}}return"error"===r?{type:"error",error:new Pt(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:"data",data:e,statusCode:t.status,headers:t.headers}}return"error"===r?jr(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new Pt(t.init?.status||500,void 0,t.data),statusCode:At(t)?t.status:void 0,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:At(t)?t.status:void 0}:jr(t)?{type:"data",data:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function lr(e,t,r,n,i){let a=e.headers.get("Location");if(Ze(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!zt.test(a)){let s=n.slice(0,n.findIndex((e=>e.route.id===r))+1);a=Wt(new URL(t.url),s,i,a),e.headers.set("Location",a)}return e}function cr(e,t,r){if(zt.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),a=null!=wt(i.pathname,r);if(i.origin===t.origin&&a)return i.pathname+i.search+i.hash}return e}function ur(e,t,r,n){let i=e.createURL(wr(t)).toString(),a={signal:r};if(n&&Nr(n.formMethod)){let{formMethod:e,formEncType:t}=n;a.method=e.toUpperCase(),"application/json"===t?(a.headers=new Headers({"Content-Type":t}),a.body=JSON.stringify(n.json)):"text/plain"===t?a.body=n.text:"application/x-www-form-urlencoded"===t&&n.formData?a.body=dr(n.formData):a.body=n.formData}return new Request(i,a)}function dr(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,"string"===typeof n?n:n.name);return t}function hr(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function pr(e,t,r){let n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s={},o=null,l=!1,c={},u=r&&kr(r[1])?r[1].error:void 0;return e.forEach((r=>{if(!(r.route.id in t))return;let d=r.route.id,h=t[d];if(Ze(!Sr(h),"Cannot handle redirect results in processLoaderData"),kr(h)){let t=h.error;if(void 0!==u&&(t=u,u=void 0),o=o||{},a)o[d]=t;else{let r=vr(e,d);null==o[r.route.id]&&(o[r.route.id]=t)}i||(s[d]=Ht),l||(l=!0,n=At(h.error)?h.error.status:500),h.headers&&(c[d]=h.headers)}else s[d]=h.data,h.statusCode&&200!==h.statusCode&&!l&&(n=h.statusCode),h.headers&&(c[d]=h.headers)})),void 0!==u&&r&&(o={[r[0]]:u},s[r[0]]=void 0),{loaderData:s,errors:o,statusCode:n||200,loaderHeaders:c}}function fr(e,t,r,n,i,a){let{loaderData:s,errors:o}=pr(t,r,n);return i.forEach((t=>{let{key:r,match:n,controller:i}=t,s=a[r];if(Ze(s,"Did not find corresponding fetcher result"),!i||!i.signal.aborted)if(kr(s)){let t=vr(e.matches,n?.route.id);o&&o[t.route.id]||(o={...o,[t.route.id]:s.error}),e.fetchers.delete(r)}else if(Sr(s))Ze(!1,"Unhandled fetcher revalidation redirect");else{let t=Or(s.data);e.fetchers.set(r,t)}})),{loaderData:s,errors:o}}function mr(e,t,r,n){let i=Object.entries(t).filter((e=>{let[,t]=e;return t!==Ht})).reduce(((e,t)=>{let[r,n]=t;return e[r]=n,e}),{});for(let a of r){let r=a.route.id;if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&a.route.loader&&(i[r]=e[r]),n&&n.hasOwnProperty(r))break}return i}function gr(e){return e?kr(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function vr(e,t){let r=t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e];return r.reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function xr(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function yr(e){let{pathname:t,routeId:r,method:n,type:i,message:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="Unknown Server Error",o="Unknown @remix-run/router error";return 400===e?(s="Bad Request",n&&t&&r?o=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:"invalid-body"===i&&(o="Unable to encode submission body")):403===e?(s="Forbidden",o=`Route "${r}" does not match URL "${t}"`):404===e?(s="Not Found",o=`No route matches URL "${t}"`):405===e&&(s="Method Not Allowed",n&&t&&r?o=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(o=`Invalid request method "${n.toUpperCase()}"`)),new Pt(e||500,s,new Error(o),!0)}function br(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[e,n]=t[r];if(Sr(n))return{key:e,result:n}}}function wr(e){return Je({..."string"===typeof e?et(e):e,hash:""})}function _r(e){return Er(e.result)&&Rt.has(e.result.status)}function kr(e){return"error"===e.type}function Sr(e){return"redirect"===(e&&e.type)}function jr(e){return"object"===typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function Er(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Cr(e){return Dt.has(e.toUpperCase())}function Nr(e){return It.has(e.toUpperCase())}function Tr(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function Pr(e,t){let r="string"===typeof t?et(t).search:t.search;if(e[e.length-1].route.index&&Tr(r||""))return e[e.length-1];let n=kt(e);return n[n.length-1]}function Ar(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:a,json:s}=e;if(t&&r&&n)return null!=i?{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i}:null!=a?{formMethod:t,formAction:r,formEncType:n,formData:a,json:void 0,text:void 0}:void 0!==s?{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:s,text:void 0}:void 0}function Mr(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ir(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Or(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}var Dr=t.createContext(null);Dr.displayName="DataRouter";var Rr=t.createContext(null);Rr.displayName="DataRouterState";var Lr=t.createContext({isTransitioning:!1});Lr.displayName="ViewTransition";var Fr=t.createContext(new Map);Fr.displayName="Fetchers";var $r=t.createContext(null);$r.displayName="Await";var Br=t.createContext(null);Br.displayName="Navigation";var zr=t.createContext(null);zr.displayName="Location";var Ur=t.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var Vr=t.createContext(null);Vr.displayName="RouteError";function Hr(){return null!=t.useContext(zr)}function Gr(){return Ze(Hr(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(zr).location}var Wr="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qr(e){t.useContext(Br).static||t.useLayoutEffect(e)}function Kr(){let{isDataRoute:e}=t.useContext(Ur);return e?function(){let{router:e}=an("useNavigate"),r=on("useNavigate"),n=t.useRef(!1);qr((()=>{n.current=!0}));let i=t.useCallback((async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ye(n.current,Wr),n.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,{fromRouteId:r,...i}))}),[e,r]);return i}():function(){Ze(Hr(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(Dr),{basename:r,navigator:n}=t.useContext(Br),{matches:i}=t.useContext(Ur),{pathname:a}=Gr(),s=JSON.stringify(St(i)),o=t.useRef(!1);qr((()=>{o.current=!0}));let l=t.useCallback((function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ye(o.current,Wr),!o.current)return;if("number"===typeof t)return void n.go(t);let l=jt(t,JSON.parse(s),a,"path"===i.relative);null==e&&"/"!==r&&(l.pathname="/"===l.pathname?r:Et([r,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)}),[r,n,s,a,e]);return l}()}var Zr=t.createContext(null);function Yr(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=t.useContext(Ur),{pathname:i}=Gr(),a=JSON.stringify(St(n));return t.useMemo((()=>jt(e,JSON.parse(a),i,"path"===r)),[e,a,i,r])}function Xr(e,r,n,i){Ze(Hr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:s}=t.useContext(Br),{matches:o}=t.useContext(Ur),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let e=h&&h.path||"";un(u,!h||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,f=Gr();if(r){let e="string"===typeof r?et(r):r;Ze("/"===d||e.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||"/",g=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=!s&&n&&n.matches&&n.matches.length>0?n.matches:at(e,{pathname:g});Ye(h||null!=v,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Ye(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=rn(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Et([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Et([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,i);return r&&x?t.createElement(zr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function Qr(){let e=ln(),r=At(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:s},"ErrorBoundary")," or"," ",t.createElement("code",{style:s},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:a},n):null,o)}var Jr=t.createElement(Qr,null),en=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Ur.Provider,{value:this.props.routeContext},t.createElement(Vr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tn(e){let{routeContext:r,match:n,children:i}=e,a=t.useContext(Dr);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(Ur.Provider,{value:r},i)}function rn(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==r.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,a=n?.errors;if(null!=a){let e=i.findIndex((e=>e.route.id&&void 0!==a?.[e.route.id]));Ze(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,e+1))}let s=!1,o=-1;if(n)for(let t=0;t<i.length;t++){let e=i[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=t),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){s=!0,i=o>=0?i.slice(0,o+1):[i[0]];break}}}return i.reduceRight(((e,l,c)=>{let u,d=!1,h=null,p=null;n&&(u=a&&l.route.id?a[l.route.id]:void 0,h=l.route.errorElement||Jr,s&&(o<0&&0===c?(un("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):o===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let f=r.concat(i.slice(0,c+1)),m=()=>{let r;return r=u?h:d?p:l.route.Component?t.createElement(l.route.Component,null):l.route.element?l.route.element:e,t.createElement(tn,{match:l,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:r})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?t.createElement(en,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()}),null)}function nn(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function an(e){let r=t.useContext(Dr);return Ze(r,nn(e)),r}function sn(e){let r=t.useContext(Rr);return Ze(r,nn(e)),r}function on(e){let r=function(e){let r=t.useContext(Ur);return Ze(r,nn(e)),r}(e),n=r.matches[r.matches.length-1];return Ze(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ln(){let e=t.useContext(Vr),r=sn("useRouteError"),n=on("useRouteError");return void 0!==e?e:r.errors?.[n]}var cn={};function un(e,t,r){t||cn[e]||(cn[e]=!0,Ye(!1,r))}var dn={};function hn(e,t){e||dn[t]||(dn[t]=!0,console.warn(t))}function pn(e){let r={hasErrorBoundary:e.hasErrorBoundary||null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&(e.element&&Ye(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:t.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Ye(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:t.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Ye(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:t.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),r}var fn=class{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}};function mn(e){let{router:r,flushSync:n}=e,[i,a]=t.useState(r.state),[s,o]=t.useState(),[l,c]=t.useState({isTransitioning:!1}),[u,d]=t.useState(),[h,p]=t.useState(),[f,m]=t.useState(),g=t.useRef(new Map),v=t.useCallback(((e,i)=>{let{deletedFetchers:s,flushSync:l,viewTransitionOpts:f}=i;e.fetchers.forEach(((e,t)=>{void 0!==e.data&&g.current.set(t,e.data)})),s.forEach((e=>g.current.delete(e))),hn(!1===l||null!=n,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let v=null!=r.window&&null!=r.window.document&&"function"===typeof r.window.document.startViewTransition;if(hn(null==f||v,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),f&&v){if(n&&l){n((()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:f.currentLocation,nextLocation:f.nextLocation})}));let t=r.window.document.startViewTransition((()=>{n((()=>a(e)))}));return t.finished.finally((()=>{n((()=>{d(void 0),p(void 0),o(void 0),c({isTransitioning:!1})}))})),void n((()=>p(t)))}h?(u&&u.resolve(),h.skipTransition(),m({state:e,currentLocation:f.currentLocation,nextLocation:f.nextLocation})):(o(e),c({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}))}else n&&l?n((()=>a(e))):t.startTransition((()=>a(e)))}),[r.window,n,h,u]);t.useLayoutEffect((()=>r.subscribe(v)),[r,v]),t.useEffect((()=>{l.isTransitioning&&!l.flushSync&&d(new fn)}),[l]),t.useEffect((()=>{if(u&&s&&r.window){let e=s,n=u.promise,i=r.window.document.startViewTransition((async()=>{t.startTransition((()=>a(e))),await n}));i.finished.finally((()=>{d(void 0),p(void 0),o(void 0),c({isTransitioning:!1})})),p(i)}}),[s,u,r.window]),t.useEffect((()=>{u&&s&&i.location.key===s.location.key&&u.resolve()}),[u,h,i.location,s]),t.useEffect((()=>{!l.isTransitioning&&f&&(o(f.state),c({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),m(void 0))}),[l.isTransitioning,f]);let x=t.useMemo((()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:e=>r.navigate(e),push:(e,t,n)=>r.navigate(e,{state:t,preventScrollReset:n?.preventScrollReset}),replace:(e,t,n)=>r.navigate(e,{replace:!0,state:t,preventScrollReset:n?.preventScrollReset})})),[r]),y=r.basename||"/",b=t.useMemo((()=>({router:r,navigator:x,static:!1,basename:y})),[r,x,y]);return t.createElement(t.Fragment,null,t.createElement(Dr.Provider,{value:b},t.createElement(Rr.Provider,{value:i},t.createElement(Fr.Provider,{value:g.current},t.createElement(Lr.Provider,{value:l},t.createElement(yn,{basename:y,location:i.location,navigationType:i.historyAction,navigator:x},t.createElement(gn,{routes:r.routes,future:r.future,state:i})))))),null)}var gn=t.memo((function(e){let{routes:t,future:r,state:n}=e;return Xr(t,void 0,n,r)}));function vn(e){let{to:r,replace:n,state:i,relative:a}=e;Ze(Hr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=t.useContext(Br);Ye(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=t.useContext(Ur),{pathname:l}=Gr(),c=Kr(),u=jt(r,St(o),l,"path"===a),d=JSON.stringify(u);return t.useEffect((()=>{c(JSON.parse(d),{replace:n,state:i,relative:a})}),[c,d,a,n,i]),null}function xn(e){return function(e){let r=t.useContext(Ur).outlet;return r?t.createElement(Zr.Provider,{value:e},r):r}(e.context)}function yn(e){let{basename:r="/",children:n=null,location:i,navigationType:a="POP",navigator:s,static:o=!1}=e;Ze(!Hr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),c=t.useMemo((()=>({basename:l,navigator:s,static:o,future:{}})),[l,s,o]);"string"===typeof i&&(i=et(i));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:f="default"}=i,m=t.useMemo((()=>{let e=wt(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:f},navigationType:a}}),[l,u,d,h,p,f,a]);return Ye(null!=m,`<Router basename="${l}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),null==m?null:t.createElement(Br.Provider,{value:c},t.createElement(zr.Provider,{children:n,value:m}))}t.Component;var bn="get",wn="application/x-www-form-urlencoded";function _n(e){return null!=e&&"string"===typeof e.tagName}var kn=null;var Sn=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jn(e){return null==e||Sn.has(e)?e:(Ye(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wn}"`),null)}function En(e,t){let r,n,i,a,s;if(function(e){return _n(e)&&"form"===e.tagName.toLowerCase()}(e)){let s=e.getAttribute("action");n=s?wt(s,t):null,r=e.getAttribute("method")||bn,i=jn(e.getAttribute("enctype"))||wn,a=new FormData(e)}else if(function(e){return _n(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return _n(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||s.getAttribute("action");if(n=o?wt(o,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||bn,i=jn(e.getAttribute("formenctype"))||jn(s.getAttribute("enctype"))||wn,a=new FormData(s,e),!function(){if(null===kn)try{new FormData(document.createElement("form"),0),kn=!1}catch(W){kn=!0}return kn}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,n)}}else{if(_n(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=bn,n=null,i=wn,s=e}return a&&"text/plain"===i&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:s}}function Cn(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Nn(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Tn(e){return null!=e&&"string"===typeof e.page}function Pn(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function An(e,t,r,n,i,a){let s=(e,t)=>!r[t]||e.route.id!==r[t].route.id,o=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===a?t.filter(((e,t)=>s(e,t)||o(e,t))):"data"===a?t.filter(((t,a)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0})):[]}function Mn(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map((e=>{let n=t.routes[e.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i})).flat(1),[...new Set(n)];var n}function In(e,t){let r=new Set,n=new Set(t);return e.reduce(((e,i)=>{if(t&&!Tn(i)&&"script"===i.as&&i.href&&n.has(i.href))return e;let a=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(i));return r.has(a)||(r.add(a),e.push({key:a,link:i})),e}),[])}function On(e){return{__html:e}}Symbol("SingleFetchRedirect");function Dn(e,t){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.data":t&&"/"===wt(r.pathname,t)?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}t.Component;function Rn(e){let{error:r,isOutsideRemixApp:n}=e;console.error(r);let i,a=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(At(r))return t.createElement(Ln,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},r.status," ",r.statusText),a);if(r instanceof Error)0;else{let e=null==r?"Unknown Error":"object"===typeof r&&"toString"in r?r.toString():JSON.stringify(r);new Error(e)}return t.createElement(Ln,{title:"Application Error!",isOutsideRemixApp:n},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),a)}function Ln(e){let{title:r,renderScripts:n,isOutsideRemixApp:i,children:a}=e,{routeModules:s}=Un();return s.root?.Layout&&!i?a:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,r)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,n?t.createElement(Zn,null):null)))}function Fn(e){return!0===e}function $n(){let e=t.useContext(Dr);return Cn(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Bn(){let e=t.useContext(Rr);return Cn(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var zn=t.createContext(void 0);function Un(){let e=t.useContext(zn);return Cn(e,"You must render this element inside a <HydratedRouter> element"),e}function Vn(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Hn(e,t,r){if(r&&!Kn)return[e[0]];if(t){let r=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,r+1)}return e}function Gn(e){let{page:r,...n}=e,{router:i}=$n(),a=t.useMemo((()=>at(i.routes,r,i.basename)),[i.routes,r,i.basename]);return a?t.createElement(qn,{page:r,matches:a,...n}):null}function Wn(e){let{manifest:r,routeModules:n}=Un(),[i,a]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(e,t,r){let n=await Promise.all(e.map((async e=>{let n=t.routes[e.route.id];if(n){let e=await Nn(n,r);return e.links?e.links():[]}return[]})));return In(n.flat(1).filter(Pn).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,r,n).then((e=>{t||a(e)})),()=>{t=!0}}),[e,r,n]),i}function qn(e){let{page:r,matches:n,...i}=e,a=Gr(),{manifest:s,routeModules:o}=Un(),{basename:l}=$n(),{loaderData:c,matches:u}=Bn(),d=t.useMemo((()=>An(r,n,u,s,a,"data")),[r,n,u,s,a]),h=t.useMemo((()=>An(r,n,u,s,a,"assets")),[r,n,u,s,a]),p=t.useMemo((()=>{if(r===a.pathname+a.search+a.hash)return[];let e=new Set,t=!1;if(n.forEach((r=>{let n=s.routes[r.route.id];n&&n.hasLoader&&(!d.some((e=>e.route.id===r.route.id))&&r.route.id in c&&o[r.route.id]?.shouldRevalidate||n.hasClientLoader?t=!0:e.add(r.route.id))})),0===e.size)return[];let i=Dn(r,l);return t&&e.size>0&&i.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[i.pathname+i.search]}),[l,c,a,s,d,n,r,o]),f=t.useMemo((()=>Mn(h,s)),[h,s]),m=Wn(h);return t.createElement(t.Fragment,null,p.map((e=>t.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...i}))),f.map((e=>t.createElement("link",{key:e,rel:"modulepreload",href:e,...i}))),m.map((e=>{let{key:r,link:n}=e;return t.createElement("link",{key:r,...n})})))}zn.displayName="FrameworkContext";var Kn=!1;function Zn(e){let{manifest:r,serverHandoffString:n,isSpaMode:i,ssr:a,renderMeta:s}=Un(),{router:o,static:l,staticContext:c}=$n(),{matches:u}=Bn(),d=Fn(a);s&&(s.didRenderScripts=!0);let h=Hn(u,null,i);t.useEffect((()=>{0}),[]);let p=t.useMemo((()=>{let i=c?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",a=l?`${r.hmr?.runtime?`import ${JSON.stringify(r.hmr.runtime)};`:""}${d?"":`import ${JSON.stringify(r.url)}`};\n${h.map(((e,t)=>{let n=`route${t}`,i=r.routes[e.route.id];Cn(i,`Route ${e.route.id} not found in manifest`);let{clientActionModule:a,clientLoaderModule:s,hydrateFallbackModule:o,module:l}=i,c=[...a?[{module:a,varName:`${n}_clientAction`}]:[],...s?[{module:s,varName:`${n}_clientLoader`}]:[],...o?[{module:o,varName:`${n}_HydrateFallback`}]:[],{module:l,varName:`${n}_main`}];return 1===c.length?`import * as ${n} from ${JSON.stringify(l)};`:[c.map((e=>`import * as ${e.varName} from "${e.module}";`)).join("\n"),`const ${n} = {${c.map((e=>`...${e.varName}`)).join(",")}};`].join("\n")})).join("\n")}\n  ${d?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let r=new Set(t.state.matches.map((e=>e.route.id))),n=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(n.pop();n.length>0;)i.push(`/${n.join("/")}`),n.pop();i.forEach((e=>{let n=at(t.routes,e,t.basename);n&&n.forEach((e=>r.add(e.route.id)))}));let a=[...r].reduce(((t,r)=>Object.assign(t,{[r]:e.routes[r]})),{});return{...e,routes:a}}(r,o),null,2)};`:""}\n  window.__reactRouterRouteModules = {${h.map(((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`)).join(",")}};\n\nimport(${JSON.stringify(r.entry.module)});`:" ";return t.createElement(t.Fragment,null,t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:On(i),type:void 0}),t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:On(a),type:"module",async:!0}))}),[]),f=Kn?[]:r.entry.imports.concat(Mn(h,r,{includeHydrateFallback:!0}));return Kn?null:t.createElement(t.Fragment,null,d?null:t.createElement("link",{rel:"modulepreload",href:r.url,crossOrigin:e.crossOrigin}),t.createElement("link",{rel:"modulepreload",href:r.entry.module,crossOrigin:e.crossOrigin}),function(e){return[...new Set(e)]}(f).map((r=>t.createElement("link",{key:r,rel:"modulepreload",href:r,crossOrigin:e.crossOrigin}))),p)}function Yn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var Xn="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Xn&&(window.__reactRouterVersion="7.3.0")}catch(W){}function Qn(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:Jn(e.errors)}),e}function Jn(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&"RouteErrorResponse"===i.__type)r[n]=new Pt(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let e=window[i.__subType];if("function"===typeof e)try{let t=new e(i.message);t.stack="",r[n]=t}catch(W){}}if(null==r[n]){let e=new Error(i.message);e.stack="",r[n]=e}}else r[n]=i;return r}var ei=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ti=t.forwardRef((function(e,r){let n,{onClick:i,discover:a="render",prefetch:s="none",relative:o,reloadDocument:l,replace:c,state:u,target:d,to:h,preventScrollReset:p,viewTransition:f,...m}=e,{basename:g}=t.useContext(Br),v="string"===typeof h&&ei.test(h),x=!1;if("string"===typeof h&&v&&(n=h,Xn))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),r=wt(t.pathname,g);t.origin===e.origin&&null!=r?h=r+t.search+t.hash:x=!0}catch(W){Ye(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ze(Hr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=t.useContext(Br),{hash:a,pathname:s,search:o}=Yr(e,{relative:r}),l=s;return"/"!==n&&(l="/"===s?n:Et([n,s])),i.createHref({pathname:l,search:o,hash:a})}(h,{relative:o}),[b,w,_]=function(e,r){let n=t.useContext(zn),[i,a]=t.useState(!1),[s,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=r,p=t.useRef(null);t.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}}),[e]),t.useEffect((()=>{if(i){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[i]);let f=()=>{a(!0)},m=()=>{a(!1),o(!1)};return n?"intent"!==e?[s,p,{}]:[s,p,{onFocus:Vn(l,f),onBlur:Vn(c,m),onMouseEnter:Vn(u,f),onMouseLeave:Vn(d,m),onTouchStart:Vn(h,f)}]:[!1,p,{}]}(s,m),k=function(e){let{target:r,replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=Kr(),c=Gr(),u=Yr(e,{relative:s});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:Je(c)===Je(u);l(e,{replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o})}}),[c,l,u,n,i,r,e,a,s,o])}(h,{replace:c,state:u,target:d,preventScrollReset:p,relative:o,viewTransition:f});let S=t.createElement("a",{...m,..._,href:n||y,onClick:x||l?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:Yn(r,w),target:d,"data-discover":v||"render"!==a?void 0:"true"});return b&&!v?t.createElement(t.Fragment,null,S,t.createElement(Gn,{page:y})):S}));ti.displayName="Link";var ri=t.forwardRef((function(e,r){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:l,viewTransition:c,children:u,...d}=e,h=Yr(l,{relative:d.relative}),p=Gr(),f=t.useContext(Rr),{navigator:m,basename:g}=t.useContext(Br),v=null!=f&&function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useContext(Lr);Ze(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ai("useViewTransitionState"),a=Yr(e,{relative:r.relative});if(!n.isTransitioning)return!1;let s=wt(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=wt(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=yt(a.pathname,o)||null!=yt(a.pathname,s)}(h)&&!0===c,x=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,y=p.pathname,b=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;i||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&g&&(b=wt(b,g)||b);const w="/"!==x&&x.endsWith("/")?x.length-1:x.length;let _,k=y===x||!s&&y.startsWith(x)&&"/"===y.charAt(w),S=null!=b&&(b===x||!s&&b.startsWith(x)&&"/"===b.charAt(x.length)),j={isActive:k,isPending:S,isTransitioning:v},E=k?n:void 0;_="function"===typeof a?a(j):[a,k?"active":null,S?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let C="function"===typeof o?o(j):o;return t.createElement(ti,{...d,"aria-current":E,className:_,ref:r,style:C,to:l,viewTransition:c},"function"===typeof u?u(j):u)}));ri.displayName="NavLink";var ni=t.forwardRef(((e,r)=>{let{discover:n="render",fetcherKey:i,navigate:a,reloadDocument:s,replace:o,state:l,method:c=bn,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:f,...m}=e,g=li(),v=function(e){let{relative:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=t.useContext(Br),i=t.useContext(Ur);Ze(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),s={...Yr(e||".",{relative:r})},o=Gr();if(null==e){s.search=o.search;let e=new URLSearchParams(s.search),t=e.getAll("index"),r=t.some((e=>""===e));if(r){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let r=e.toString();s.search=r?`?${r}`:""}}e&&"."!==e||!a.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:Et([n,s.pathname]));return Je(s)}(u,{relative:h}),x="get"===c.toLowerCase()?"get":"post",y="string"===typeof u&&ei.test(u);return t.createElement("form",{ref:r,method:x,action:v,onSubmit:s?d:e=>{if(d&&d(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=t?.getAttribute("formmethod")||c;g(t||e.currentTarget,{fetcherKey:i,method:r,navigate:a,replace:o,state:l,relative:h,preventScrollReset:p,viewTransition:f})},...m,"data-discover":y||"render"!==n?void 0:"true"})}));function ii(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ai(e){let r=t.useContext(Dr);return Ze(r,ii(e)),r}ni.displayName="Form";var si=0,oi=()=>`__${String(++si)}__`;function li(){let{router:e}=ai("useSubmit"),{basename:r}=t.useContext(Br),n=on("useRouteId");return t.useCallback((async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:s,encType:o,formData:l,body:c}=En(t,r);if(!1===i.navigate){let t=i.fetcherKey||oi();await e.fetch(t,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[e,r,n])}new TextEncoder;var ci=r(7950);function ui(e){return t.createElement(mn,{flushSync:ci.flushSync,...e})}const di=r.p+"static/media/Ic_logo.f93094d3ad1c627dec4331dcfdf84527.svg";const hi=r.p+"static/media/Ic_bell.9055458cea22ce602e3a8ee2d011912e.svg";const pi=r.p+"static/media/Ic_search.d0212c92f08c853ef9e4c155ff66b447.svg";const fi=r.p+"static/media/Ic_settings.102d11fd04defbee4f11c68a22703903.svg";const mi=r.p+"static/media/Ic_chevron_up.70a7dde1eded3ff447c7485f89ecdbc4.svg";function gi(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=gi(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function vi(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=gi(e))&&(n&&(n+=" "),n+=t);return n}const xi=vi,yi=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296===(64512&i)&&n+1<e.length&&56320===(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t},bi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,s=a?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),n.push(r[c],r[u],r[d],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yi(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let r=0,n=0;for(;r<e.length;){const i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else{const a=e[r++],s=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<e.length;){const t=r[e.charAt(i++)],a=i<e.length?r[e.charAt(i)]:0;++i;const s=i<e.length?r[e.charAt(i)]:64;++i;const o=i<e.length?r[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==o)throw new wi;const l=t<<2|a>>4;if(n.push(l),64!==s){const e=a<<4&240|s>>2;if(n.push(e),64!==o){const e=s<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class wi extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _i=function(e){return function(e){const t=yi(e);return bi.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ki=function(e){try{return bi.decodeString(e,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};const Si=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ji=()=>{try{return Si()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(W){return}const t=e&&ki(e[1]);return t&&JSON.parse(t)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},Ei=e=>{var t,r;return null===(r=null===(t=ji())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},Ci=e=>{const t=Ei(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},Ni=()=>{var e;return null===(e=ji())||void 0===e?void 0:e.config},Ti=e=>{var t;return null===(t=ji())||void 0===t?void 0:t[`_${e}`]};class Pi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,r))}}}function Ai(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_i(JSON.stringify({alg:"none",type:"JWT"})),_i(JSON.stringify(a)),""].join(".")}function Mi(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ii(){return!function(){var e;const t=null===(e=ji())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(r.g.process)}catch(W){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oi(){try{return"object"===typeof indexedDB}catch(W){return!1}}class Di extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ri.prototype.create)}}class Ri{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},r=`${this.service}/${e}`,n=this.errors[e],i=n?function(e,t){return e.replace(Li,((e,r)=>{const n=t[r];return null!=n?String(n):`<${r}?>`}))}(n,t):"Error",a=`${this.serviceName}: ${i} (${r}).`;return new Di(r,a,t)}}const Li=/\{\$([^}]+)}/g;function Fi(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const i of r){if(!n.includes(i))return!1;const r=e[i],a=t[i];if($i(r)&&$i(a)){if(!Fi(r,a))return!1}else if(r!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function $i(e){return null!==e&&"object"===typeof e}function Bi(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach((e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function zi(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}})),t}function Ui(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}class Vi{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");n=function(e,t){if("object"!==typeof e||null===e)return!1;for(const r of t)if(r in e&&"function"===typeof e[r])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===n.next&&(n.next=Hi),void 0===n.error&&(n.error=Hi),void 0===n.complete&&(n.complete=Hi);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(W){}})),this.observers.push(n),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(W){"undefined"!==typeof console&&console.error&&console.error(W)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Hi(){}function Gi(e){return e&&e._delegate?e._delegate:e}class Wi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qi="[DEFAULT]";class Ki{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Pi;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(W){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),n=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(W){if(n)return null;throw W}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch(W){}for(const[e,t]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(W){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,a]of this.instancesDeferred.entries()){r===this.normalizeInstanceIdentifier(i)&&a.resolve(n)}return n}onInit(e,t){var r;const n=this.normalizeInstanceIdentifier(t),i=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const n of r)try{n(e,t)}catch(oT){}}getOrInitializeService(e){let{instanceIdentifier:t,options:r={}}=e,n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===qi?void 0:i),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(oT){}var i;return n||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi;return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Zi{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ki(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Yi=[];var Xi;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Xi||(Xi={}));const Qi={debug:Xi.DEBUG,verbose:Xi.VERBOSE,info:Xi.INFO,warn:Xi.WARN,error:Xi.ERROR,silent:Xi.SILENT},Ji=Xi.INFO,ea={[Xi.DEBUG]:"log",[Xi.VERBOSE]:"log",[Xi.INFO]:"info",[Xi.WARN]:"warn",[Xi.ERROR]:"error"},ta=function(e,t){if(t<e.logLevel)return;const r=(new Date).toISOString(),n=ea[t];if(!n)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];console[n](`[${r}]  ${e.name}:`,...a)};class ra{constructor(e){this.name=e,this._logLevel=Ji,this._logHandler=ta,this._userLogHandler=null,Yi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xi))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Qi[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,Xi.DEBUG,...t),this._logHandler(this,Xi.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,Xi.VERBOSE,...t),this._logHandler(this,Xi.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,Xi.INFO,...t),this._logHandler(this,Xi.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,Xi.WARN,...t),this._logHandler(this,Xi.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,Xi.ERROR,...t),this._logHandler(this,Xi.ERROR,...t)}}let na,ia;const aa=new WeakMap,sa=new WeakMap,oa=new WeakMap,la=new WeakMap,ca=new WeakMap;let ua={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return sa.get(e);if("objectStoreNames"===t)return e.objectStoreNames||oa.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return pa(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function da(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ia||(ia=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(fa(this),r),pa(aa.get(this))}:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pa(e.apply(fa(this),r))}:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];const a=e.call(fa(this),t,...n);return oa.set(a,t.sort?t.sort():[t]),pa(a)}}function ha(e){return"function"===typeof e?da(e):(e instanceof IDBTransaction&&function(e){if(sa.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),n()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));sa.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,na||(na=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ua):e)}function pa(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(pa(e.result)),n()},a=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&aa.set(t,e)})).catch((()=>{})),ca.set(t,e),t}(e);if(la.has(e))return la.get(e);const t=ha(e);return t!==e&&(la.set(e,t),ca.set(t,e)),t}const fa=e=>ca.get(e);const ma=["get","getKey","getAll","getAllKeys","count"],ga=["put","add","delete","clear"],va=new Map;function xa(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(va.get(t))return va.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=ga.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!ma.includes(r))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return n&&(a=a.index(o.shift())),(await Promise.all([a[r](...o),i&&t.done]))[0]};return va.set(t,a),a}ua=(e=>({...e,get:(t,r,n)=>xa(t,r)||e.get(t,r,n),has:(t,r)=>!!xa(t,r)||e.has(t,r)}))(ua);class ya{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ba="@firebase/app",wa="0.11.2",_a=new ra("@firebase/app"),ka="@firebase/app-compat",Sa="@firebase/analytics-compat",ja="@firebase/analytics",Ea="@firebase/app-check-compat",Ca="@firebase/app-check",Na="@firebase/auth",Ta="@firebase/auth-compat",Pa="@firebase/database",Aa="@firebase/data-connect",Ma="@firebase/database-compat",Ia="@firebase/functions",Oa="@firebase/functions-compat",Da="@firebase/installations",Ra="@firebase/installations-compat",La="@firebase/messaging",Fa="@firebase/messaging-compat",$a="@firebase/performance",Ba="@firebase/performance-compat",za="@firebase/remote-config",Ua="@firebase/remote-config-compat",Va="@firebase/storage",Ha="@firebase/storage-compat",Ga="@firebase/firestore",Wa="@firebase/vertexai",qa="@firebase/firestore-compat",Ka="firebase",Za="[DEFAULT]",Ya={[ba]:"fire-core",[ka]:"fire-core-compat",[ja]:"fire-analytics",[Sa]:"fire-analytics-compat",[Ca]:"fire-app-check",[Ea]:"fire-app-check-compat",[Na]:"fire-auth",[Ta]:"fire-auth-compat",[Pa]:"fire-rtdb",[Aa]:"fire-data-connect",[Ma]:"fire-rtdb-compat",[Ia]:"fire-fn",[Oa]:"fire-fn-compat",[Da]:"fire-iid",[Ra]:"fire-iid-compat",[La]:"fire-fcm",[Fa]:"fire-fcm-compat",[$a]:"fire-perf",[Ba]:"fire-perf-compat",[za]:"fire-rc",[Ua]:"fire-rc-compat",[Va]:"fire-gcs",[Ha]:"fire-gcs-compat",[Ga]:"fire-fst",[qa]:"fire-fst-compat",[Wa]:"fire-vertex","fire-js":"fire-js",[Ka]:"fire-js-all"},Xa=new Map,Qa=new Map,Ja=new Map;function es(e,t){try{e.container.addComponent(t)}catch(W){_a.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,W)}}function ts(e){const t=e.name;if(Ja.has(t))return _a.debug(`There were multiple attempts to register component ${t}.`),!1;Ja.set(t,e);for(const r of Xa.values())es(r,e);for(const r of Qa.values())es(r,e);return!0}function rs(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function ns(e){return null!==e&&void 0!==e&&void 0!==e.settings}const is=new Ri("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class as{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wi("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}const ss="11.4.0";function os(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;if("object"!==typeof t){t={name:t}}const n=Object.assign({name:Za,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!==typeof i||!i)throw is.create("bad-app-name",{appName:String(i)});if(r||(r=Ni()),!r)throw is.create("no-options");const a=Xa.get(i);if(a){if(Fi(r,a.options)&&Fi(n,a.config))return a;throw is.create("duplicate-app",{appName:i})}const s=new Zi(i);for(const l of Ja.values())s.addComponent(l);const o=new as(r,n,s);return Xa.set(i,o),o}function ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Za;const t=Xa.get(e);if(!t&&e===Za&&Ni())return os();if(!t)throw is.create("no-app",{appName:e});return t}function cs(e,t,r){var n;let i=null!==(n=Ya[e])&&void 0!==n?n:e;r&&(i+=`-${r}`);const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=[`Unable to register library "${i}" with version "${t}":`];return a&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void _a.warn(e.join(" "))}ts(new Wi(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const us="firebase-heartbeat-store";let ds=null;function hs(){return ds||(ds=function(e,t){let{blocked:r,upgrade:n,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),o=pa(s);return n&&s.addEventListener("upgradeneeded",(e=>{n(pa(s.result),e.oldVersion,e.newVersion,pa(s.transaction),e)})),r&&s.addEventListener("blocked",(e=>r(e.oldVersion,e.newVersion,e))),o.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(us)}catch(W){console.warn(W)}}}).catch((e=>{throw is.create("idb-open",{originalErrorMessage:e.message})}))),ds}async function ps(e,t){try{const r=(await hs()).transaction(us,"readwrite"),n=r.objectStore(us);await n.put(t,fs(e)),await r.done}catch(W){if(W instanceof Di)_a.warn(W.message);else{const t=is.create("idb-set",{originalErrorMessage:null===W||void 0===W?void 0:W.message});_a.warn(t.message)}}}function fs(e){return`${e.name}!${e.options.appId}`}class ms{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vs(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=gs();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(W){_a.warn(W)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=gs(),{heartbeatsToSend:r,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const r=[];let n=e.slice();for(const i of e){const e=r.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),xs(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),xs(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),i=_i(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(W){return _a.warn(W),""}}}function gs(){return(new Date).toISOString().substring(0,10)}class vs{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Oi()&&new Promise(((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(r){t(r)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await hs()).transaction(us),r=await t.objectStore(us).get(fs(e));return await t.done,r}catch(W){if(W instanceof Di)_a.warn(W.message);else{const t=is.create("idb-get",{originalErrorMessage:null===W||void 0===W?void 0:W.message});_a.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return ps(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return ps(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function xs(e){return _i(JSON.stringify({version:2,heartbeats:e})).length}var ys;ys="",ts(new Wi("platform-logger",(e=>new ya(e)),"PRIVATE")),ts(new Wi("heartbeat",(e=>new ms(e)),"PRIVATE")),cs(ba,wa,ys),cs(ba,wa,"esm2017"),cs("fire-js","");var bs,ws,_s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ks={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function r(e,t,r){r||(r=0);var n=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var a=e.g[3],s=t+(a^r&(i^a))+n[0]+3614090360&4294967295;s=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=(r=(i=(a=(t=r+(s<<7&4294967295|s>>>25))+((s=a+(i^t&(r^i))+n[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(r^a&(t^r))+n[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=r+(t^i&(a^t))+n[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^r&(i^a))+n[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(r^i))+n[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(r^a&(t^r))+n[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=r+(t^i&(a^t))+n[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^r&(i^a))+n[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(r^i))+n[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(r^a&(t^r))+n[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=r+(t^i&(a^t))+n[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^r&(i^a))+n[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=a+(i^t&(r^i))+n[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(r^a&(t^r))+n[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=r+(t^i&(a^t))+n[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^a&(r^i))+n[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=a+(r^i&(t^r))+n[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^r&(a^t))+n[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=r+(a^t&(i^a))+n[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(r^i))+n[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=a+(r^i&(t^r))+n[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^r&(a^t))+n[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=r+(a^t&(i^a))+n[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(r^i))+n[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=a+(r^i&(t^r))+n[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^r&(a^t))+n[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=r+(a^t&(i^a))+n[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^a&(r^i))+n[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=a+(r^i&(t^r))+n[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^r&(a^t))+n[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=r+(a^t&(i^a))+n[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(r^i^a)+n[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^r^i)+n[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^r)+n[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=r+(i^a^t)+n[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(r^i^a)+n[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^r^i)+n[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^r)+n[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=r+(i^a^t)+n[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(r^i^a)+n[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^r^i)+n[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^r)+n[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=r+(i^a^t)+n[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(r^i^a)+n[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=a+(t^r^i)+n[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(a^t^r)+n[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=r+(i^a^t)+n[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(r|~a))+n[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=a+(r^(t|~i))+n[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~r))+n[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=r+(a^(i|~t))+n[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(r|~a))+n[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=a+(r^(t|~i))+n[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~r))+n[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=r+(a^(i|~t))+n[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(r|~a))+n[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=a+(r^(t|~i))+n[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(a|~r))+n[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=r+(a^(i|~t))+n[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((a=(t=r+((s=t+(i^(r|~a))+n[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=a+(r^(t|~i))+n[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=a+((s=i+(t^(a|~r))+n[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function n(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var a=0|e[i];n&&a==t||(r[i]=a,n=!1)}this.g=r}!function(e,t){function r(){}r.prototype=t.prototype,e.D=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.C=function(e,r,n){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[r].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.B,a=this.h,s=0;s<t;){if(0==a)for(;s<=n;)r(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[a++]=e.charCodeAt(s++),a==this.blockSize){r(this,i),a=0;break}}else for(;s<t;)if(i[a++]=e[s++],a==this.blockSize){r(this,i),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.u(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var i={};function a(e){return-128<=e&&128>e?function(e,t){var r=i;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}(e,(function(e){return new n([0|e],0>e?-1:0)})):new n([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(s(-e));for(var t=[],r=1,i=0;e>=r;i++)t[i]=e/r|0,r*=4294967296;return new n(t,0)}var o=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,r=[],i=0;i<t;i++)r[i]=~e.g[i];return new n(r,~e.h).add(l)}function p(e,t){return e.add(h(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var r=l,n=t;0>=n.l(e);)r=v(r),n=v(n);var i=x(r,1),a=x(n,1);for(n=x(n,2),r=x(r,2);!u(n);){var c=a.add(n);0>=c.l(e)&&(i=i.add(r),a=c),n=x(n,1),r=x(r,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(r=Math.max(1,Math.floor(e.m()/t.m())),n=48>=(n=Math.ceil(Math.log(r)/Math.LN2))?1:Math.pow(2,n-48),c=(a=s(r)).j(t);d(c)||0<c.l(e);)c=(a=s(r-=n)).j(t);u(a)&&(a=l),i=i.add(a),e=p(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,r=[],i=0;i<t;i++)r[i]=e.i(i)<<1|e.i(i-1)>>>31;return new n(r,e.h)}function x(e,t){var r=t>>5;t%=32;for(var i=e.g.length-r,a=[],s=0;s<i;s++)a[s]=0<t?e.i(s+r)>>>t|e.i(s+r+1)<<32-t:e.i(s+r);return new n(a,e.h)}(e=n.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.i(r);e+=(0<=n?n:4294967296+n)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=s(Math.pow(e,6)),r=this,n="";;){var i=g(r,t).g,a=((0<(r=p(r,i.j(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(u(r=i))return a+n;for(;6>a.length;)a="0"+a;n=a+n}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0,a=0;a<=t;a++){var s=i+(65535&this.i(a))+(65535&e.i(a)),o=(s>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);i=o>>>16,s&=65535,o&=65535,r[a]=o<<16|s}return new n(r,-2147483648&r[r.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,r=[],i=0;i<2*t;i++)r[i]=0;for(i=0;i<this.g.length;i++)for(var a=0;a<e.g.length;a++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(a)>>>16,g=65535&e.i(a);r[2*i+2*a]+=p*g,f(r,2*i+2*a),r[2*i+2*a+1]+=l*g,f(r,2*i+2*a+1),r[2*i+2*a+1]+=p*m,f(r,2*i+2*a+1),r[2*i+2*a+2]+=l*m,f(r,2*i+2*a+2)}for(i=0;i<t;i++)r[i]=r[2*i+1]<<16|r[2*i];for(i=t;i<2*t;i++)r[i]=0;return new n(r,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)&e.i(i);return new n(r,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)|e.i(i);return new n(r,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)^e.i(i);return new n(r,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ws=ks.Md5=t,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=s,n.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return h(e(t.substring(1),r));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=s(Math.pow(r,8)),i=o,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),r);8>l?(l=s(Math.pow(r,l)),i=i.j(l).add(s(c))):i=(i=i.j(n)).add(s(c))}return i},bs=ks.Integer=n}).apply("undefined"!==typeof _s?_s:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ss,js,Es,Cs,Ns,Ts,Ps,As,Ms="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Is={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e};var r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ms&&Ms];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);!function(e,n){if(n)e:{var i=r;e=e.split(".");for(var a=0;a<e.length-1;a++){var s=e[a];if(!(s in i))break e;i=i[s]}(n=n(a=i[e=e[e.length-1]]))!=a&&null!=n&&t(i,e,{configurable:!0,writable:!0,value:n})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var r=0,n=!1,i={next:function(){if(!n&&r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}return n=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var n=n||{},i=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,r){return e.call.apply(e.bind,arguments)}function l(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function c(e,t,r){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function r(){}r.prototype=t.prototype,e.aa=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.Qb=function(e,r,n){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[r].apply(e,i)}}function h(e){const t=e.length;if(0<t){const r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function p(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];if(a(t)){const r=e.length||0,n=t.length||0;e.length=r+n;for(let i=0;i<n;i++)e[r+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function x(e,t,r){for(const n in e)t.call(r,e[n],n,e)}function y(e){const t={};for(const r in e)t[r]=e[r];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let r,n;for(let i=1;i<arguments.length;i++){for(r in n=arguments[i],n)e[r]=n[r];for(let t=0;t<b.length;t++)r=b[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function _(e){var t=1;e=e.split(":");const r=[];for(;0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}function k(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var j=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new E),(e=>e.reset()));class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,N=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const r=j.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},P=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(A)}};var A=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(Q){k(Q)}var t=j;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}N=!1};function M(){this.s=this.s,this.C=this.C}function I(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},I.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(Q){}return e}();function D(e,t){if(I.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(ne){}i=!1}i||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:R[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,I);var R={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function $(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.ha=i,this.key=++F,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function U(e,t){var r=t.type;if(r in e.g){var n,i=e.g[r],a=Array.prototype.indexOf.call(i,t,void 0);(n=0<=a)&&Array.prototype.splice.call(i,a,1),n&&(B(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function V(e,t,r,n){for(var i=0;i<e.length;++i){var a=e[i];if(!a.da&&a.listener==t&&a.capture==!!r&&a.ha==n)return i}return-1}z.prototype.add=function(e,t,r,n,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var s=V(e,t,n,i);return-1<s?(t=e[s],r||(t.fa=!1)):((t=new $(t,this.src,a,!!n,i)).fa=r,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),G={};function q(e,t,r,n,i){if(n&&n.once)return X(e,t,r,n,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)q(e,t[a],r,n,i);return null}return r=oe(r),e&&e[L]?e.K(t,r,s(n)?!!n.capture:!!n,i):Y(e,t,r,!1,n,i)}function Y(e,t,r,n,i,a){if(!t)throw Error("Invalid event type");var o=s(i)?!!i.capture:!!i,l=ae(e);if(l||(e[H]=l=new z(e)),(r=l.add(t,r,n,o,a)).proxy)return r;if(n=function(){function e(r){return t.call(e.src,e.listener,r)}const t=ie;return e}(),r.proxy=n,n.src=e,n.listener=r,e.addEventListener)O||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(te(t.toString()),n);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(n)}return r}function X(e,t,r,n,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)X(e,t[a],r,n,i);return null}return r=oe(r),e&&e[L]?e.L(t,r,s(n)?!!n.capture:!!n,i):Y(e,t,r,!0,n,i)}function J(e,t,r,n,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)J(e,t[a],r,n,i);else n=s(n)?!!n.capture:!!n,r=oe(r),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(r=V(a=e.g[t],r,n,i))&&(B(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ae(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,r,n,i)),(r=-1<e?t[e]:null)&&ee(r))}function ee(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])U(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(te(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=ae(t))?(U(r,e),0==r.h&&(r.src=null,t[H]=null)):B(e)}}}function te(e){return e in G?G[e]:G[e]="on"+e}function ie(e,t){if(e.da)e=!0;else{t=new D(t,this);var r=e.listener,n=e.ha||e.src;e.fa&&ee(e),e=r.call(n,t)}return e}function ae(e){return(e=e[H])instanceof z?e:null}var se="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(e){return"function"===typeof e?e:(e[se]||(e[se]=function(t){return e.handleEvent(t)}),e[se])}function le(){M.call(this),this.i=new z(this),this.M=this,this.F=null}function ce(e,t){var r,n=e.F;if(n)for(r=[];n;n=n.F)r.push(n);if(e=e.M,n=t.type||t,"string"===typeof t)t=new I(t,e);else if(t instanceof I)t.target=t.target||e;else{var i=t;w(t=new I(n,e),i)}if(i=!0,r)for(var a=r.length-1;0<=a;a--){var s=t.g=r[a];i=ue(s,n,!0,t)&&i}if(i=ue(s=t.g=e,n,!0,t)&&i,i=ue(s,n,!1,t)&&i,r)for(a=0;a<r.length;a++)i=ue(s=t.g=r[a],n,!1,t)&&i}function ue(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var s=t[a];if(s&&!s.da&&s.capture==r){var o=s.listener,l=s.ha||s.src;s.fa&&U(e.i,s),i=!1!==o.call(l,n)&&i}}return i&&!n.defaultPrevented}function de(e,t,r){if("function"===typeof e)r&&(e=c(e,r));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function he(e){e.g=de((()=>{e.g=null,e.i&&(e.i=!1,he(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(le,M),le.prototype[L]=!0,le.prototype.removeEventListener=function(e,t,r,n){J(this,e,t,r,n)},le.prototype.N=function(){if(le.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)B(r[n]);delete t.g[e],t.h--}}this.F=null},le.prototype.K=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},le.prototype.L=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};class pe extends M{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(e){M.call(this),this.h=e,this.g={}}d(fe,M);var me=[];function ge(e){x(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ee(e)}),e),e.g={}}fe.prototype.N=function(){fe.aa.N.call(this),ge(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ve=i.JSON.stringify,xe=i.JSON.parse,ye=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function be(){}function we(e){return e.h||(e.h=e.i())}function _e(){}be.prototype.h=null;var ke={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Se(){I.call(this,"d")}function je(){I.call(this,"c")}d(Se,I),d(je,I);var Ee={},Ce=null;function Ne(){return Ce=Ce||new le}function Te(e){I.call(this,Ee.La,e)}function Pe(e){const t=Ne();ce(t,new Te(t))}function Ae(e,t){I.call(this,Ee.STAT_EVENT,e),this.stat=t}function Me(e){const t=Ne();ce(t,new Ae(t,e))}function Ie(e,t){I.call(this,Ee.Ma,e),this.size=t}function Oe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function De(){this.g=!0}function Re(e,t,r,n){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r)for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var s=1;s<i.length;s++)i[s]=""}}}return ve(r)}catch(o){return t}}(e,r)+(n?" "+n:"")}))}Ee.La="serverreachability",d(Te,I),Ee.STAT_EVENT="statevent",d(Ae,I),Ee.Ma="timingevent",d(Ie,I),De.prototype.xa=function(){this.g=!1},De.prototype.info=function(){};var Le,Fe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Be(){}function ze(e,t,r,n){this.j=e,this.i=t,this.l=r,this.R=n||1,this.U=new fe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ue}function Ue(){this.i=null,this.g="",this.h=!1}d(Be,be),Be.prototype.g=function(){return new XMLHttpRequest},Be.prototype.i=function(){return{}},Le=new Be;var Ve={},He={};function Ge(e,t,r){e.L=1,e.v=vt(ht(t)),e.m=r,e.P=!0,We(e,null)}function We(e,t){e.F=Date.now(),Ze(e),e.A=ht(e.v);var r=e.A,n=e.R;Array.isArray(n)||(n=[String(n)]),Pt(r.i,"t",n),e.C=0,r=e.j.J,e.h=new Ue,e.g=vr(e.j,r?t:null,!e.m),0<e.O&&(e.M=new pe(c(e.Y,e,e.g),e.O)),t=e.U,r=e.g,n=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(me[0]=i.toString()),i=me);for(var a=0;a<i.length;a++){var s=q(r,i[a],n||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?y(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Pe(),function(e,t,r,n,i,a){e.info((function(){if(e.g)if(a)for(var s="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=a;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+t+"\n"+r+"\n"+s}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function qe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ke(e,t){var r=e.C,n=t.indexOf("\n",r);return-1==n?He:(r=Number(t.substring(r,n)),isNaN(r)?Ve:(n+=1)+r>t.length?He:(t=t.slice(n,n+r),e.C=n+r,t))}function Ze(e){e.S=Date.now()+e.I,Ye(e,e.I)}function Ye(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Oe(c(e.ba,e),t)}function Xe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Qe(e){0==e.j.G||e.J||hr(e.j,e)}function Je(e){Xe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ge(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function et(e,t){try{var r=e.j;if(0!=r.G&&(r.g==e||at(r.h,e)))if(!e.K&&at(r.h,e)&&3==r.G){try{var n=r.Da.g.parse(t)}catch(K){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){e:if(!r.u){if(r.g){if(!(r.g.F+3e3<e.F))break e;dr(r),tr(r)}lr(r),Me(18)}}else r.za=i[1],0<r.za-r.T&&37500>i[2]&&r.F&&0==r.v&&!r.C&&(r.C=Oe(c(r.Za,r),6e3));if(1>=it(r.h)&&r.ca){try{r.ca()}catch(K){}r.ca=void 0}}else fr(r,11)}else if((e.K||r.g==e)&&dr(r),!f(t))for(i=r.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(r.T=c[0],c=c[1],2==r.G)if("c"==c[0]){r.K=c[1],r.ia=c[2];const t=c[3];null!=t&&(r.la=t,r.j.info("VER="+r.la));const i=c[4];null!=i&&(r.Aa=i,r.j.info("SVER="+r.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(n=1.5*u,r.L=n,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=n.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(st(a,a.h),a.h=null))}if(n.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.ya=e,gt(n.I,n.D,e))}}r.G=3,r.l&&r.l.ua(),r.ba&&(r.R=Date.now()-e.F,r.j.info("Handshake RTT: "+r.R+"ms"));var s=e;if((n=r).qa=gr(n,n.J?n.ia:null,n.W),s.K){ot(n.h,s);var o=s,l=n.L;l&&(o.I=l),o.B&&(Xe(o),Ze(o)),n.g=s}else or(n);0<r.i.length&&nr(r)}else"stop"!=c[0]&&"close"!=c[0]||fr(r,7);else 3==r.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?fr(r,7):er(r):"noop"!=c[0]&&r.l&&r.l.ta(c),r.v=0)}Pe()}catch(K){}}ze.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Yt(e)?t.j():this.Y(e)},ze.prototype.Y=function(e){try{if(e==this.g)e:{const h=Yt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Xt(this.g)))){this.J||4!=h||7==t||Pe(),Xe(this);var r=this.g.Z();this.X=r;t:if(qe(this)){var n=Xt(this.g);e="";var a=n.length,s=4==Yt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Je(this),Qe(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:!(s&&t==a-1)});n.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==r,function(e,t,r,n,i,a,s){e.info((function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+t+"\n"+r+"\n"+a+" "+s}))}(this.i,this.u,this.A,this.l,this.R,h,r),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(r=u)){this.o=!1,this.s=3,Me(12),Je(this),Qe(this);break e}Re(this.i,this.l,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,et(this,r)}if(this.P){let e;for(r=!0;!this.J&&this.C<o.length;){if(e=Ke(this,o),e==He){4==h&&(this.s=4,Me(14),r=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ve){this.s=4,Me(15),Re(this.i,this.l,o,"[Invalid Chunk]"),r=!1;break}Re(this.i,this.l,e,null),et(this,e)}if(qe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Me(16),r=!1),this.o=this.o&&r,r){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),cr(d),d.M=!0,Me(11))}}else Re(this.i,this.l,o,"[Invalid Chunked Response]"),Je(this),Qe(this)}else Re(this.i,this.l,o,null),et(this,o);4==h&&Je(this),this.o&&!this.J&&(4==h?hr(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=Yt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(f(e[n]))continue;var r=_(e[n]);const i=r[0];if("string"!==typeof(r=r[1]))continue;r=r.trim();const a=t[i]||[];t[i]=a,a.push(r)}!function(e,t){for(const r in e)t.call(void 0,e[r],r,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<o.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),Je(this),Qe(this)}}}catch(h){}},ze.prototype.cancel=function(){this.J=!0,Je(this)},ze.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Pe(),Me(17)),Je(this),this.s=2,Qe(this)):Ye(this,this.S-e)};var tt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function it(e){return e.h?1:e.g?e.g.size:0}function at(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function st(e,t){e.g?e.g.add(t):e.h=t}function ot(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const r of e.g.values())t=t.concat(r.D);return t}return h(e.i)}function ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var r=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(a(e)||"string"===typeof e){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}t=[],r=0;for(const n in e)t[r++]=n;return t}}}(e),n=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(a(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}for(n in t=[],r=0,e)t[r++]=e[n];return t}(e),i=n.length,s=0;s<i;s++)t.call(void 0,n[s],r&&r[s],e)}rt.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof dt){this.h=e.h,pt(this,e.j),this.o=e.o,this.g=e.g,ft(this,e.s),this.l=e.l;var t=e.i,r=new Et;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),mt(this,r),this.m=e.m}else e&&(t=String(e).match(ut))?(this.h=!1,pt(this,t[1]||"",!0),this.o=xt(t[2]||""),this.g=xt(t[3]||"",!0),ft(this,t[4]),this.l=xt(t[5]||"",!0),mt(this,t[6]||"",!0),this.m=xt(t[7]||"")):(this.h=!1,this.i=new Et(null,this.h))}function ht(e){return new dt(e)}function pt(e,t,r){e.j=r?xt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ft(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function mt(e,t,r){t instanceof Et?(e.i=t,function(e,t){t&&!e.j&&(Ct(e),e.i=null,e.g.forEach((function(e,t){var r=t.toLowerCase();t!=r&&(Nt(this,t),Pt(this,r,e))}),e)),e.j=t}(e.i,e.h)):(r||(t=yt(t,St)),e.i=new Et(t,e.h))}function gt(e,t,r){e.i.set(t,r)}function vt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function yt(e,t,r){return"string"===typeof e?(e=encodeURI(e).replace(t,bt),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(yt(t,wt,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(yt(t,wt,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.s)&&e.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(yt(r,"/"==r.charAt(0)?kt:_t,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.m)&&e.push("#",yt(r,jt)),e.join("")};var wt=/[#\/\?@]/g,_t=/[#\?:]/g,kt=/[#\?]/g,St=/[#\?@]/g,jt=/#/g;function Et(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ct(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),i=null;if(0<=n){var a=e[r].substring(0,n);i=e[r].substring(n+1)}else a=e[r];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)})))}function Nt(e,t){Ct(e),t=At(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Ct(e),t=At(e,t),e.g.has(t)}function Pt(e,t,r){Nt(e,t),0<r.length&&(e.i=null,e.g.set(At(e,t),h(r)),e.h+=r.length)}function At(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,r,n,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),n(r)}catch(ne){}}function It(){this.g=new ye}function Ot(e,t,r){const n=r||"";try{ct(e,(function(e,r){let i=e;s(e)&&(i=ve(e)),t.push(n+r+"="+encodeURIComponent(i))}))}catch(W){throw t.push(n+"type="+encodeURIComponent("_badmap")),W}}function Dt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){le.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Lt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ft(e){e.readyState=4,e.l=null,e.j=null,e.v=null,$t(e)}function $t(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Bt(e){let t="";return x(e,(function(e,r){t+=r,t+=":",t+=e,t+="\r\n"})),t}function zt(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=Bt(r),"string"===typeof e?null!=r&&encodeURIComponent(String(r)):gt(e,t,r))}function Ut(e){le.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Et.prototype).add=function(e,t){Ct(this),this.i=null,e=At(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},e.forEach=function(e,t){Ct(this),this.g.forEach((function(r,n){r.forEach((function(r){e.call(t,r,n,this)}),this)}),this)},e.na=function(){Ct(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){const i=e[n];for(let e=0;e<i.length;e++)r.push(t[n])}return r},e.V=function(e){Ct(this);let t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(At(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t},e.set=function(e,t){return Ct(this),this.i=null,Tt(this,e=At(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];const a=encodeURIComponent(String(n)),s=this.V(n);for(n=0;n<s.length;n++){var i=a;""!==s[n]&&(i+="="+encodeURIComponent(String(s[n]))),e.push(i)}}return this.i=e.join("&")},d(Dt,be),Dt.prototype.g=function(){return new Rt(this.l,this.j)},Dt.prototype.i=function(e){return function(){return e}}({}),d(Rt,le),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,$t(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ft(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$t(this)),this.g&&(this.readyState=3,$t(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ft(this):$t(this),3==this.readyState&&Lt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ft(this))},e.Qa=function(e){this.g&&(this.response=e,Ft(this))},e.ga=function(){this.g&&Ft(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var r=t.next();!r.done;)r=r.value,e.push(r[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Ut,le);var Vt=/^https?$/i,Ht=["POST","PUT"];function Gt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Wt(e),Kt(e)}function Wt(e){e.A||(e.A=!0,ce(e,"complete"),ce(e,"error"))}function qt(e){if(e.h&&"undefined"!=typeof n&&(!e.v[1]||4!=Yt(e)||2!=e.Z()))if(e.u&&4==Yt(e))de(e.Ea,0,e);else if(ce(e,"readystatechange"),4==Yt(e)){e.h=!1;try{const n=e.Z();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var r;if(!(r=t)){var a;if(a=0===n){var s=String(e.D).match(ut)[1]||null;!s&&i.self&&i.self.location&&(s=i.self.location.protocol.slice(0,-1)),a=!Vt.test(s?s.toLowerCase():"")}r=a}if(r)ce(e,"complete"),ce(e,"success");else{e.m=6;try{var o=2<Yt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Wt(e)}}finally{Kt(e)}}}function Kt(e,t){if(e.g){Zt(e);const r=e.g,n=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ce(e,"ready");try{r.onreadystatechange=n}catch(W){}}}function Zt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Yt(e){return e.g?e.g.readyState:0}function Xt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Qt(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function Jt(e){this.Aa=0,this.i=[],this.j=new De,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qt("baseRetryDelayMs",5e3,e),this.cb=Qt("retryDelaySeedMs",1e4,e),this.Wa=Qt("forwardChannelMaxRetries",2,e),this.wa=Qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new rt(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function er(e){if(rr(e),3==e.G){var t=e.U++,r=ht(e.I);if(gt(r,"SID",e.K),gt(r,"RID",t),gt(r,"TYPE","terminate"),ar(e,r),(t=new ze(e,e.j,t)).L=2,t.v=vt(ht(r)),r=!1,i.navigator&&i.navigator.sendBeacon)try{r=i.navigator.sendBeacon(t.v.toString(),"")}catch(re){}!r&&i.Image&&((new Image).src=t.v,r=!0),r||(t.g=vr(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}mr(e)}function tr(e){e.g&&(cr(e),e.g.cancel(),e.g=null)}function rr(e){tr(e),e.u&&(i.clearTimeout(e.u),e.u=null),dr(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function nr(e){if(!nt(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||P(),N||(C(),N=!0),T.add(t,e),e.B=0}}function ir(e,t){var r;r=t?t.l:e.U++;const n=ht(e.I);gt(n,"SID",e.K),gt(n,"RID",r),gt(n,"AID",e.T),ar(e,n),e.m&&e.o&&zt(n,e.m,e.o),r=new ze(e,e.j,r,e.B+1),null===e.m&&(r.H=e.o),t&&(e.i=t.D.concat(e.i)),t=sr(e,r,1e3),r.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),st(e.h,r),Ge(r,n,t)}function ar(e,t){e.H&&x(e.H,(function(e,r){gt(t,r,e)})),e.l&&ct({},(function(e,r){gt(t,r,e)}))}function sr(e,t,r){r=Math.min(e.i.length,r);var n=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+r];-1==t?0<r?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<r;o++){let r=i[o].g;const l=i[o].map;if(r-=t,0>r)t=Math.max(0,i[o].g-100),s=!1;else try{Ot(l,e,"req"+r+"_")}catch(a){n&&n(l)}}if(s){n=e.join("&");break e}}}return e=e.i.splice(0,r),t.D=e,n}function or(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||P(),N||(C(),N=!0),T.add(t,e),e.v=0}}function lr(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Oe(c(e.Fa,e),pr(e,e.v)),e.v++,!0)}function cr(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function ur(e){e.g=new ze(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ht(e.qa);gt(t,"RID","rpc"),gt(t,"SID",e.K),gt(t,"AID",e.T),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&gt(t,"TO",e.ja),gt(t,"TYPE","xmlhttp"),ar(e,t),e.m&&e.o&&zt(t,e.m,e.o),e.L&&(e.g.I=e.L);var r=e.g;e=e.ia,r.L=1,r.v=vt(ht(t)),r.m=null,r.P=!0,We(r,e)}function dr(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function hr(e,t){var r=null;if(e.g==t){dr(e),cr(e),e.g=null;var n=2}else{if(!at(e.h,t))return;r=t.D,ot(e.h,t),n=1}if(0!=e.G)if(t.o)if(1==n){r=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;ce(n=Ne(),new Ie(n,r)),nr(e)}else or(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==n&&function(e,t){return!(it(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Oe(c(e.Ga,e,t),pr(e,e.B)),e.B++,!0))}(e,t)||2==n&&lr(e)))switch(r&&0<r.length&&(t=e.h,t.i=t.i.concat(r)),i){case 1:fr(e,5);break;case 4:fr(e,10);break;case 3:fr(e,6);break;default:fr(e,2)}}function pr(e,t){let r=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(r*=2),r*t}function fr(e,t){if(e.j.info("Error code "+t),2==t){var r=c(e.fb,e),n=e.Xa;const t=!n;n=new dt(n||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||pt(n,"https"),vt(n),t?function(e,t){const r=new De;if(i.Image){const n=new Image;n.onload=u(Mt,r,"TestLoadImage: loaded",!0,t,n),n.onerror=u(Mt,r,"TestLoadImage: error",!1,t,n),n.onabort=u(Mt,r,"TestLoadImage: abort",!1,t,n),n.ontimeout=u(Mt,r,"TestLoadImage: timeout",!1,t,n),i.setTimeout((function(){n.ontimeout&&n.ontimeout()}),1e4),n.src=e}else t(!1)}(n.toString(),r):function(e,t){new De;const r=new AbortController,n=setTimeout((()=>{r.abort(),Mt(0,0,!1,t)}),1e4);fetch(e,{signal:r.signal}).then((e=>{clearTimeout(n),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)})).catch((()=>{clearTimeout(n),Mt(0,0,!1,t)}))}(n.toString(),r)}else Me(2);e.G=0,e.l&&e.l.sa(t),mr(e),rr(e)}function mr(e){if(e.G=0,e.ka=[],e.l){const t=lt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function gr(e,t,r){var n=r instanceof dt?ht(r):new dt(r);if(""!=n.g)t&&(n.g=t+"."+n.g),ft(n,n.s);else{var a=i.location;n=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var s=new dt(null);n&&pt(s,n),t&&(s.g=t),a&&ft(s,a),r&&(s.l=r),n=s}return r=e.D,t=e.ya,r&&t&&gt(n,r,t),gt(n,"VER",e.la),ar(e,n),n}function vr(e,t,r){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ut(new Dt({eb:r})):new Ut(e.pa)).Ha(e.J),t}function xr(){}function yr(){}function br(e,t){le.call(this),this.g=new Jt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new kr(this)}function wr(e){Se.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _r(){je.call(this),this.status=1}function kr(e){this.g=e}(e=Ut.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Le.g(),this.v=this.o?we(this.o):we(Le),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(ne){return void Gt(this,ne)}if(e=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var a in n)r.set(a,n[a]);else{if("function"!==typeof n.keys||"function"!==typeof n.get)throw Error("Unknown input type for opt_headers: "+String(n));for(const e of n.keys())r.set(e,n.get(e))}n=Array.from(r.keys()).find((e=>"content-type"==e.toLowerCase())),a=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ht,t,void 0))||n||a||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of r)this.g.setRequestHeader(i,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zt(this),this.u=!0,this.g.send(e),this.u=!1}catch(ne){Gt(this,ne)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ce(this,"complete"),ce(this,"abort"),Kt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kt(this,!0)),Ut.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch(Z){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Z){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xe(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Jt.prototype).la=8,e.G=1,e.connect=function(e,t,r,n){Me(0),this.W=e,this.H=t||{},r&&void 0!==n&&(this.H.OSID=r,this.H.OAID=n),this.F=this.X,this.I=gr(this,null,this.W),nr(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new ze(this,this.j,e);let a=this.o;if(this.S&&(a?(a=y(a),w(a,this.S)):a=this.S),null!==this.m||this.O||(i.H=a,a=null),this.P)e:{for(var t=0,r=0;r<this.i.length;r++){var n=this.i[r];if(void 0===(n="__data__"in n.map&&"string"===typeof(n=n.map.__data__)?n.length:void 0))break;if(4096<(t+=n)){t=r;break e}if(4096===t||r===this.i.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=sr(this,i,t),gt(r=ht(this.I),"RID",e),gt(r,"CVER",22),this.D&&gt(r,"X-HTTP-Session-Id",this.D),ar(this,r),a&&(this.O?t="headers="+encodeURIComponent(String(Bt(a)))+"&"+t:this.m&&zt(r,this.m,a)),st(this.h,i),this.Ua&&gt(r,"TYPE","init"),this.P?(gt(r,"$req",t),gt(r,"SID","null"),i.T=!0,Ge(i,r,null)):Ge(i,r,t),this.G=2}}else 3==this.G&&(e?ir(this,e):0==this.i.length||nt(this.h)||ir(this))},e.Fa=function(){if(this.u=null,ur(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Oe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),tr(this),ur(this))},e.Za=function(){null!=this.C&&(this.C=null,tr(this),lr(this),Me(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=xr.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},yr.prototype.g=function(e,t){return new br(e,t)},d(br,le),br.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},br.prototype.close=function(){er(this.g)},br.prototype.o=function(e){var t=this.g;if("string"===typeof e){var r={};r.__data__=e,e=r}else this.u&&((r={}).__data__=ve(e),e=r);t.i.push(new tt(t.Ya++,e)),3==t.G&&nr(t)},br.prototype.N=function(){this.g.l=null,delete this.j,er(this.g),delete this.g,br.aa.N.call(this)},d(wr,Se),d(_r,je),d(kr,xr),kr.prototype.ua=function(){ce(this.g,"a")},kr.prototype.ta=function(e){ce(this.g,new wr(e))},kr.prototype.sa=function(e){ce(this.g,new _r)},kr.prototype.ra=function(){ce(this.g,"b")},yr.prototype.createWebChannel=yr.prototype.g,br.prototype.send=br.prototype.o,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,As=Is.createWebChannelTransport=function(){return new yr},Ps=Is.getStatEventTarget=function(){return Ne()},Ts=Is.Event=Ee,Ns=Is.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,Cs=Is.ErrorCode=Fe,$e.COMPLETE="complete",Es=Is.EventType=$e,_e.EventType=ke,ke.OPEN="a",ke.CLOSE="b",ke.ERROR="c",ke.MESSAGE="d",le.prototype.listen=le.prototype.K,js=Is.WebChannel=_e,Is.FetchXmlHttpFactory=Dt,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,Ss=Is.XhrIo=Ut}).apply("undefined"!==typeof Ms?Ms:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Os="@firebase/firestore",Ds="4.7.9";class Rs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rs.UNAUTHENTICATED=new Rs(null),Rs.GOOGLE_CREDENTIALS=new Rs("google-credentials-uid"),Rs.FIRST_PARTY=new Rs("first-party-uid"),Rs.MOCK_USER=new Rs("mock-user");let Ls="11.4.0";const Fs=new ra("@firebase/firestore");function $s(){return Fs.logLevel}function Bs(e){if(Fs.logLevel<=Xi.DEBUG){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=r.map(Vs);Fs.debug(`Firestore (${Ls}): ${e}`,...i)}}function zs(e){if(Fs.logLevel<=Xi.ERROR){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=r.map(Vs);Fs.error(`Firestore (${Ls}): ${e}`,...i)}}function Us(e){if(Fs.logLevel<=Xi.WARN){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=r.map(Vs);Fs.warn(`Firestore (${Ls}): ${e}`,...i)}}function Vs(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(q){return e}}function Hs(){const e=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw zs(e),new Error(e)}function Gs(e,t){e||Hs()}function Ws(e,t){return e}const qs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ks extends Di{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ys{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rs.UNAUTHENTICATED)))}shutdown(){}}class Qs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Js{constructor(e){this.t=e,this.currentUser=Rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Gs(void 0===this.o);let r=this.i;const n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let i=new Zs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zs,e.enqueueRetryable((()=>n(this.currentUser)))};const a=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await n(this.currentUser)}))},s=e=>{Bs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Bs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zs)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Bs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Gs("string"==typeof t.accessToken),new Ys(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Gs(null===e||"string"==typeof e),new Rs(e)}}class eo{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Rs.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class to{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new eo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Rs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ro{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class no{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ns(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Gs(void 0===this.o);const r=e=>{null!=e.error&&Bs("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const r=e.token!==this.R;return this.R=e.token,Bs("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>r(t)))};const n=e=>{Bs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>n(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?n(e):Bs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new ro(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Gs("string"==typeof e.token),this.R=e.token,new ro(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function io(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}class ao{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const r=io(40);for(let n=0;n<r.length;++n)t.length<20&&r[n]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[n]%62))}return t}}function so(e,t){return e<t?-1:e>t?1:0}function oo(e,t,r){return e.length===t.length&&e.every(((e,n)=>r(e,t[n])))}const lo=-62135596800,co=1e6;class uo{static now(){return uo.fromMillis(Date.now())}static fromDate(e){return uo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*co);return new uo(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ks(qs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ks(qs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lo)throw new Ks(qs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ks(qs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/co}_compareTo(e){return this.seconds===e.seconds?so(this.nanoseconds,e.nanoseconds):so(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lo;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ho{static fromTimestamp(e){return new ho(e)}static min(){return new ho(new uo(0,0))}static max(){return new ho(new uo(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const po="__name__";class fo{constructor(e,t,r){void 0===t?t=0:t>e.length&&Hs(),void 0===r?r=e.length-t:r>e.length-t&&Hs(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===fo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fo?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const r=fo.compareSegments(e.get(n),t.get(n));if(0!==r)return r}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=fo.isNumericId(e),n=fo.isNumericId(t);return r&&!n?-1:!r&&n?1:r&&n?fo.extractNumericId(e).compare(fo.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bs.fromString(e.substring(4,e.length-2))}}class mo extends fo{construct(e,t,r){return new mo(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(const i of r){if(i.indexOf("//")>=0)throw new Ks(qs.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new mo(e)}static emptyPath(){return new mo([])}}const go=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vo extends fo{construct(e,t,r){return new vo(e,t,r)}static isValidIdentifier(e){return go.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vo.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===po}static keyField(){return new vo([po])}static fromServerFormat(e){const t=[];let r="",n=0;const i=()=>{if(0===r.length)throw new Ks(qs.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;n<e.length;){const t=e[n];if("\\"===t){if(n+1===e.length)throw new Ks(qs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ks(qs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?(a=!a,n++):"."!==t||a?(r+=t,n++):(i(),n++)}if(i(),a)throw new Ks(qs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vo(t)}static emptyPath(){return new vo([])}}class xo{constructor(e){this.path=e}static fromPath(e){return new xo(mo.fromString(e))}static fromName(e){return new xo(mo.fromString(e).popFirst(5))}static empty(){return new xo(mo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xo(new mo(e.slice()))}}const yo=-1;class bo{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}bo.UNKNOWN_ID=-1;function wo(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,i=ho.fromTimestamp(1e9===n?new uo(r+1,0):new uo(r,n));return new ko(i,xo.empty(),t)}function _o(e){return new ko(e.readTime,e.key,yo)}class ko{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ko(ho.min(),xo.empty(),yo)}static max(){return new ko(ho.max(),xo.empty(),yo)}}function So(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r?r:(r=xo.comparator(e.documentKey,t.documentKey),0!==r?r:so(e.largestBatchId,t.largestBatchId))}const jo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Eo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Co(e){if(e.code!==qs.FAILED_PRECONDITION||e.message!==jo)throw e;Bs("LocalStore","Unexpectedly lost primary lease")}class No{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Hs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new No(((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof No?t:No.resolve(t)}catch(e){return No.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):No.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):No.reject(t)}static resolve(e){return new No(((t,r)=>{t(e)}))}static reject(e){return new No(((t,r)=>{r(e)}))}static waitFor(e){return new No(((t,r)=>{let n=0,i=0,a=!1;e.forEach((e=>{++n,e.next((()=>{++i,a&&i===n&&t()}),(e=>r(e)))})),a=!0,i===n&&t()}))}static or(e){let t=No.resolve(!1);for(const r of e)t=t.next((e=>e?No.resolve(e):r()));return t}static forEach(e,t){const r=[];return e.forEach(((e,n)=>{r.push(t.call(this,e,n))})),this.waitFor(r)}static mapArray(e,t){return new No(((r,n)=>{const i=e.length,a=new Array(i);let s=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{a[l]=e,++s,s===i&&r(a)}),(e=>n(e)))}}))}static doWhile(e,t){return new No(((r,n)=>{const i=()=>{!0===e()?t().next((()=>{i()}),n):r()};i()}))}}function To(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Po(e){return"IndexedDbTransactionError"===e.name}class Ao{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ao.ae=-1;const Mo=-1;function Io(e){return null==e}function Oo(e){return 0===e&&1/e==-1/0}function Do(e){return"number"==typeof e&&Number.isInteger(e)&&!Oo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ro="\x01";function Lo(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=$o(t)),t=Fo(e.get(r),t);return $o(t)}function Fo(e,t){let r=t;const n=e.length;for(let i=0;i<n;i++){const t=e.charAt(i);switch(t){case"\0":r+="\x01\x10";break;case Ro:r+="\x01\x11";break;default:r+=t}}return r}function $o(e){return e+Ro+"\x01"}const Bo="remoteDocuments",zo="owner",Uo="mutationQueues",Vo="mutations";const Ho="documentMutations",Go="remoteDocumentsV14",Wo="remoteDocumentGlobal",qo="targets",Ko="targetDocuments",Zo="targetGlobal",Yo="collectionParents",Xo="clientMetadata",Qo="bundles",Jo="namedQueries",el="indexConfiguration",tl="indexState",rl="indexEntries",nl="documentOverlays",il="globals",al=[Uo,Vo,Ho,Bo,qo,zo,Zo,Ko,Xo,Wo,Yo,Qo,Jo],sl=[Uo,Vo,Ho,Go,qo,zo,Zo,Ko,Xo,Wo,Yo,Qo,Jo,nl],ol=sl,ll=[...ol,el,tl,rl];function cl(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function ul(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function dl(e,t){const r=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(t(e[n],n,e));return r}function hl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class pl{constructor(e,t){this.comparator=e,this.root=t||ml.EMPTY}insert(e,t){return new pl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ml.BLACK,null,null))}remove(e){return new pl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ml.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fl(this.root,e,this.comparator,!0)}}class fl{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ml{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:ml.RED,this.left=null!=n?n:ml.EMPTY,this.right=null!=i?i:ml.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new ml(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this;const i=r(e,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r)),n.fixUp()}removeMin(){if(this.left.isEmpty())return ml.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,n=this;if(t(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return ml.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ml.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ml.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Hs();if(this.right.isRed())throw Hs();const e=this.left.check();if(e!==this.right.check())throw Hs();return e+(this.isRed()?0:1)}}ml.EMPTY=null,ml.RED=!0,ml.BLACK=!1,ml.EMPTY=new class{constructor(){this.size=0}get key(){throw Hs()}get value(){throw Hs()}get color(){throw Hs()}get left(){throw Hs()}get right(){throw Hs()}copy(e,t,r,n,i){return this}insert(e,t,r){return new ml(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gl{constructor(e){this.comparator=e,this.data=new pl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vl(this.data.getIterator())}getIteratorFrom(e){return new vl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof gl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gl(this.comparator);return t.data=e,t}}class vl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class xl{constructor(e){this.fields=e,e.sort(vo.comparator)}static empty(){return new xl([])}unionWith(e){let t=new gl(vo.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new xl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class yl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yl("Invalid base64 string: "+e):e}}(e);return new bl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e);return new bl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return so(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bl.EMPTY_BYTE_STRING=new bl("");const wl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(e){if(Gs(!!e),"string"==typeof e){let t=0;const r=wl.exec(e);if(Gs(!!r),r[1]){let e=r[1];e=(e+"000000000").substr(0,9),t=Number(e)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:kl(e.seconds),nanos:kl(e.nanos)}}function kl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Sl(e){return"string"==typeof e?bl.fromBase64String(e):bl.fromUint8Array(e)}const jl="server_timestamp",El="__type__",Cl="__previous_value__",Nl="__local_write_time__";function Tl(e){var t,r;return(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[El])||void 0===r?void 0:r.stringValue)===jl}function Pl(e){const t=e.mapValue.fields[Cl];return Tl(t)?Pl(t):t}function Al(e){const t=_l(e.mapValue.fields[Nl].timestampValue);return new uo(t.seconds,t.nanos)}class Ml{constructor(e,t,r,n,i,a,s,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l}}const Il="(default)";class Ol{constructor(e,t){this.projectId=e,this.database=t||Il}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database===Il}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}const Dl="__type__",Rl="__max__",Ll={mapValue:{fields:{__type__:{stringValue:Rl}}}},Fl="__vector__",$l="value";function Bl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tl(e)?4:nc(e)?9007199254740991:tc(e)?10:11:Hs()}function zl(e,t){if(e===t)return!0;const r=Bl(e);if(r!==Bl(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Al(e).isEqual(Al(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const r=_l(e.timestampValue),n=_l(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Sl(e.bytesValue).isEqual(Sl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return kl(e.geoPointValue.latitude)===kl(t.geoPointValue.latitude)&&kl(e.geoPointValue.longitude)===kl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return kl(e.integerValue)===kl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const r=kl(e.doubleValue),n=kl(t.doubleValue);return r===n?Oo(r)===Oo(n):isNaN(r)&&isNaN(n)}return!1}(e,t);case 9:return oo(e.arrayValue.values||[],t.arrayValue.values||[],zl);case 10:case 11:return function(e,t){const r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(cl(r)!==cl(n))return!1;for(const i in r)if(r.hasOwnProperty(i)&&(void 0===n[i]||!zl(r[i],n[i])))return!1;return!0}(e,t);default:return Hs()}}function Ul(e,t){return void 0!==(e.values||[]).find((e=>zl(e,t)))}function Vl(e,t){if(e===t)return 0;const r=Bl(e),n=Bl(t);if(r!==n)return so(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return so(e.booleanValue,t.booleanValue);case 2:return function(e,t){const r=kl(e.integerValue||e.doubleValue),n=kl(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}(e,t);case 3:return Hl(e.timestampValue,t.timestampValue);case 4:return Hl(Al(e),Al(t));case 5:return so(e.stringValue,t.stringValue);case 6:return function(e,t){const r=Sl(e),n=Sl(t);return r.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const r=e.split("/"),n=t.split("/");for(let i=0;i<r.length&&i<n.length;i++){const e=so(r[i],n[i]);if(0!==e)return e}return so(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const r=so(kl(e.latitude),kl(t.latitude));return 0!==r?r:so(kl(e.longitude),kl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Gl(e.arrayValue,t.arrayValue);case 10:return function(e,t){var r,n,i,a;const s=e.fields||{},o=t.fields||{},l=null===(r=s[$l])||void 0===r?void 0:r.arrayValue,c=null===(n=o[$l])||void 0===n?void 0:n.arrayValue,u=so((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:Gl(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ll.mapValue&&t===Ll.mapValue)return 0;if(e===Ll.mapValue)return 1;if(t===Ll.mapValue)return-1;const r=e.fields||{},n=Object.keys(r),i=t.fields||{},a=Object.keys(i);n.sort(),a.sort();for(let s=0;s<n.length&&s<a.length;++s){const e=so(n[s],a[s]);if(0!==e)return e;const t=Vl(r[n[s]],i[a[s]]);if(0!==t)return t}return so(n.length,a.length)}(e.mapValue,t.mapValue);default:throw Hs()}}function Hl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return so(e,t);const r=_l(e),n=_l(t),i=so(r.seconds,n.seconds);return 0!==i?i:so(r.nanos,n.nanos)}function Gl(e,t){const r=e.values||[],n=t.values||[];for(let i=0;i<r.length&&i<n.length;++i){const e=Vl(r[i],n[i]);if(e)return e}return so(r.length,n.length)}function Wl(e){return ql(e)}function ql(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=_l(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Sl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return xo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",r=!0;for(const n of e.values||[])r?r=!1:t+=",",t+=ql(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let r="{",n=!0;for(const i of t)n?n=!1:r+=",",r+=`${i}:${ql(e.fields[i])}`;return r+"}"}(e.mapValue):Hs()}function Kl(e){switch(Bl(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Pl(e);return t?16+Kl(t):16;case 5:return 2*e.stringValue.length;case 6:return Sl(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Kl(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ul(e.fields,((e,r)=>{t+=e.length+Kl(r)})),t}(e.mapValue);default:throw Hs()}}function Zl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Yl(e){return!!e&&"integerValue"in e}function Xl(e){return!!e&&"arrayValue"in e}function Ql(e){return!!e&&"nullValue"in e}function Jl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ec(e){return!!e&&"mapValue"in e}function tc(e){var t,r;return(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Dl])||void 0===r?void 0:r.stringValue)===Fl}function rc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ul(e.mapValue.fields,((e,r)=>t.mapValue.fields[e]=rc(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=rc(e.arrayValue.values[r]);return t}return Object.assign({},e)}function nc(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Rl}class ic{constructor(e){this.value=e}static empty(){return new ic({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(t)}setAll(e){let t=vo.emptyPath(),r={},n=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=rc(e):n.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];ec(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){ul(t,((t,r)=>e[t]=r));for(const n of r)delete e[n]}clone(){return new ic(rc(this.value))}}function ac(e){const t=[];return ul(e.fields,((e,r)=>{const n=new vo([e]);if(ec(r)){const e=ac(r.mapValue).fields;if(0===e.length)t.push(n);else for(const r of e)t.push(n.child(r))}else t.push(n)})),new xl(t)}class sc{constructor(e,t,r,n,i,a,s){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=a,this.documentState=s}static newInvalidDocument(e){return new sc(e,0,ho.min(),ho.min(),ho.min(),ic.empty(),0)}static newFoundDocument(e,t,r,n){return new sc(e,1,t,ho.min(),r,n,0)}static newNoDocument(e,t){return new sc(e,2,t,ho.min(),ho.min(),ic.empty(),0)}static newUnknownDocument(e,t){return new sc(e,3,t,ho.min(),ho.min(),ic.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ho.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ic.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ic.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ho.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oc{constructor(e,t){this.position=e,this.inclusive=t}}function lc(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){const a=t[i],s=e.position[i];if(n=a.field.isKeyField()?xo.comparator(xo.fromName(s.referenceValue),r.key):Vl(s,r.data.field(a.field)),"desc"===a.dir&&(n*=-1),0!==n)break}return n}function cc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!zl(e.position[r],t.position[r]))return!1;return!0}class uc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hc{}class pc extends hc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new wc(e,t,r):"array-contains"===t?new jc(e,r):"in"===t?new Ec(e,r):"not-in"===t?new Cc(e,r):"array-contains-any"===t?new Nc(e,r):new pc(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new _c(e,r):new kc(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Vl(t,this.value)):null!==t&&Bl(this.value)===Bl(t)&&this.matchesComparison(Vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Hs()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fc extends hc{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new fc(e,t)}matches(e){return mc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function mc(e){return"and"===e.op}function gc(e){return vc(e)&&mc(e)}function vc(e){for(const t of e.filters)if(t instanceof fc)return!1;return!0}function xc(e){if(e instanceof pc)return e.field.canonicalString()+e.op.toString()+Wl(e.value);if(gc(e))return e.filters.map((e=>xc(e))).join(",");{const t=e.filters.map((e=>xc(e))).join(",");return`${e.op}(${t})`}}function yc(e,t){return e instanceof pc?function(e,t){return t instanceof pc&&e.op===t.op&&e.field.isEqual(t.field)&&zl(e.value,t.value)}(e,t):e instanceof fc?function(e,t){return t instanceof fc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,r,n)=>e&&yc(r,t.filters[n])),!0)}(e,t):void Hs()}function bc(e){return e instanceof pc?function(e){return`${e.field.canonicalString()} ${e.op} ${Wl(e.value)}`}(e):e instanceof fc?function(e){return e.op.toString()+" {"+e.getFilters().map(bc).join(" ,")+"}"}(e):"Filter"}class wc extends pc{constructor(e,t,r){super(e,t,r),this.key=xo.fromName(r.referenceValue)}matches(e){const t=xo.comparator(e.key,this.key);return this.matchesComparison(t)}}class _c extends pc{constructor(e,t){super(e,"in",t),this.keys=Sc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class kc extends pc{constructor(e,t){super(e,"not-in",t),this.keys=Sc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Sc(e,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map((e=>xo.fromName(e.referenceValue)))}class jc extends pc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xl(t)&&Ul(t.arrayValue,this.value)}}class Ec extends pc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ul(this.value.arrayValue,t)}}class Cc extends pc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ul(this.value.arrayValue,t)}}class Nc extends pc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ul(this.value.arrayValue,e)))}}class Tc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=a,this.endAt=s,this.le=null}}function Pc(e){return new Tc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ac(e){const t=Ws(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>xc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Io(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Wl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Wl(e))).join(",")),t.le=e}return t.le}function Mc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!dc(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!yc(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cc(e.startAt,t.startAt)&&cc(e.endAt,t.endAt)}function Ic(e){return xo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Oc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=a,this.startAt=s,this.endAt=o,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Dc(e,t,r,n,i,a,s,o){return new Oc(e,t,r,n,i,a,s,o)}function Rc(e){return new Oc(e)}function Lc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fc(e){return null!==e.collectionGroup}function $c(e){const t=Ws(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",n=function(e){let t=new gl(vo.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);n.forEach((n=>{e.has(n.canonicalString())||n.isKeyField()||t.he.push(new uc(n,r))})),e.has(vo.keyField().canonicalString())||t.he.push(new uc(vo.keyField(),r))}return t.he}function Bc(e){const t=Ws(e);return t.Pe||(t.Pe=Uc(t,$c(e))),t.Pe}function zc(e){const t=Ws(e);return t.Te||(t.Te=Uc(t,e.explicitOrderBy)),t.Te}function Uc(e,t){if("F"===e.limitType)return Pc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new uc(e.field,t)}));const r=e.endAt?new oc(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new oc(e.startAt.position,e.startAt.inclusive):null;return Pc(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function Vc(e,t){const r=e.filters.concat([t]);return new Oc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function Hc(e,t,r){return new Oc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function Gc(e,t){return Mc(Bc(e),Bc(t))&&e.limitType===t.limitType}function Wc(e){return`${Ac(Bc(e))}|lt:${e.limitType}`}function qc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>bc(e))).join(", ")}]`),Io(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Wl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Wl(e))).join(",")),`Target(${t})`}(Bc(e))}; limitType=${e.limitType})`}function Kc(e,t){return t.isFoundDocument()&&function(e,t){const r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):xo.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(e,t)&&function(e,t){for(const r of $c(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(const r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,r){const n=lc(e,t,r);return e.inclusive?n<=0:n<0}(e.startAt,$c(e),t))&&!(e.endAt&&!function(e,t,r){const n=lc(e,t,r);return e.inclusive?n>=0:n>0}(e.endAt,$c(e),t))}(e,t)}function Zc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yc(e){return(t,r)=>{let n=!1;for(const i of $c(e)){const e=Xc(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}function Xc(e,t,r){const n=e.field.isKeyField()?xo.comparator(t.key,r.key):function(e,t,r){const n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?Vl(n,i):Hs()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Hs()}}class Qc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[n,i]of r)if(this.equalsFn(n,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return void(n[i]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){ul(this.inner,((t,r)=>{for(const[n,i]of r)e(n,i)}))}isEmpty(){return hl(this.inner)}size(){return this.innerSize}}const Jc=new pl(xo.comparator);function eu(){return Jc}const tu=new pl(xo.comparator);function ru(){let e=tu;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(const i of r)e=e.insert(i.key,i);return e}function nu(e){let t=tu;return e.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function iu(){return su()}function au(){return su()}function su(){return new Qc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ou=new pl(xo.comparator),lu=new gl(xo.comparator);function cu(){let e=lu;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(const i of r)e=e.add(i);return e}const uu=new gl(so);function du(){return uu}function hu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oo(t)?"-0":t}}function pu(e){return{integerValue:""+e}}function fu(e,t){return Do(t)?pu(t):hu(e,t)}class mu{constructor(){this._=void 0}}function gu(e,t,r){return e instanceof yu?function(e,t){const r={fields:{[El]:{stringValue:jl},[Nl]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Tl(t)&&(t=Pl(t)),t&&(r.fields[Cl]=t),{mapValue:r}}(r,t):e instanceof bu?wu(e,t):e instanceof _u?ku(e,t):function(e,t){const r=xu(e,t),n=ju(r)+ju(e.Ie);return Yl(r)&&Yl(e.Ie)?pu(n):hu(e.serializer,n)}(e,t)}function vu(e,t,r){return e instanceof bu?wu(e,t):e instanceof _u?ku(e,t):r}function xu(e,t){return e instanceof Su?function(e){return Yl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yu extends mu{}class bu extends mu{constructor(e){super(),this.elements=e}}function wu(e,t){const r=Eu(t);for(const n of e.elements)r.some((e=>zl(e,n)))||r.push(n);return{arrayValue:{values:r}}}class _u extends mu{constructor(e){super(),this.elements=e}}function ku(e,t){let r=Eu(t);for(const n of e.elements)r=r.filter((e=>!zl(e,n)));return{arrayValue:{values:r}}}class Su extends mu{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ju(e){return kl(e.integerValue||e.doubleValue)}function Eu(e){return Xl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cu{constructor(e,t){this.version=e,this.transformResults=t}}class Nu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nu}static exists(e){return new Nu(void 0,e)}static updateTime(e){return new Nu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Pu{}function Au(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new zu(e.key,Nu.none()):new Ru(e.key,e.data,Nu.none());{const r=e.data,n=ic.empty();let i=new gl(vo.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new Lu(e.key,n,new xl(i.toArray()),Nu.none())}}function Mu(e,t,r){e instanceof Ru?function(e,t,r){const n=e.value.clone(),i=$u(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}(e,t,r):e instanceof Lu?function(e,t,r){if(!Tu(e.precondition,t))return void t.convertToUnknownDocument(r.version);const n=$u(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(Fu(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}(e,t,r):function(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}(0,t,r)}function Iu(e,t,r,n){return e instanceof Ru?function(e,t,r,n){if(!Tu(e.precondition,t))return r;const i=e.value.clone(),a=Bu(e.fieldTransforms,n,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,r,n):e instanceof Lu?function(e,t,r,n){if(!Tu(e.precondition,t))return r;const i=Bu(e.fieldTransforms,n,t),a=t.data;return a.setAll(Fu(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===r?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,r,n):function(e,t,r){return Tu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}(e,t,r)}function Ou(e,t){let r=null;for(const n of e.fieldTransforms){const e=t.data.field(n.field),i=xu(n.transform,e||null);null!=i&&(null===r&&(r=ic.empty()),r.set(n.field,i))}return r||null}function Du(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&oo(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof bu&&t instanceof bu||e instanceof _u&&t instanceof _u?oo(e.elements,t.elements,zl):e instanceof Su&&t instanceof Su?zl(e.Ie,t.Ie):e instanceof yu&&t instanceof yu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ru extends Pu{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class Lu extends Pu{constructor(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fu(e){const t=new Map;return e.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}})),t}function $u(e,t,r){const n=new Map;Gs(e.length===r.length);for(let i=0;i<r.length;i++){const a=e[i],s=a.transform,o=t.data.field(a.field);n.set(a.field,vu(s,o,r[i]))}return n}function Bu(e,t,r){const n=new Map;for(const i of e){const e=i.transform,a=r.data.field(i.field);n.set(i.field,gu(e,a,t))}return n}class zu extends Pu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uu extends Pu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vu{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let n=0;n<this.mutations.length;n++){const t=this.mutations[n];t.key.isEqual(e.key)&&Mu(t,e,r[n])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Iu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Iu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=au();return this.mutations.forEach((n=>{const i=e.get(n.key),a=i.overlayedDocument;let s=this.applyToLocalView(a,i.mutatedFields);s=t.has(n.key)?null:s;const o=Au(a,s);null!==o&&r.set(n.key,o),a.isValidDocument()||a.convertToNoDocument(ho.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),cu())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,((e,t)=>Du(e,t)))&&oo(this.baseMutations,e.baseMutations,((e,t)=>Du(e,t)))}}class Hu{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){Gs(e.mutations.length===r.length);let n=ou;const i=e.mutations;for(let a=0;a<i.length;a++)n=n.insert(i[a].key,r[a].version);return new Hu(e,t,r,n)}}class Gu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wu{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class qu{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ku,Zu;function Yu(e){switch(e){case qs.OK:return Hs();case qs.CANCELLED:case qs.UNKNOWN:case qs.DEADLINE_EXCEEDED:case qs.RESOURCE_EXHAUSTED:case qs.INTERNAL:case qs.UNAVAILABLE:case qs.UNAUTHENTICATED:return!1;case qs.INVALID_ARGUMENT:case qs.NOT_FOUND:case qs.ALREADY_EXISTS:case qs.PERMISSION_DENIED:case qs.FAILED_PRECONDITION:case qs.ABORTED:case qs.OUT_OF_RANGE:case qs.UNIMPLEMENTED:case qs.DATA_LOSS:return!0;default:return Hs()}}function Xu(e){if(void 0===e)return zs("GRPC error has no .code"),qs.UNKNOWN;switch(e){case Ku.OK:return qs.OK;case Ku.CANCELLED:return qs.CANCELLED;case Ku.UNKNOWN:return qs.UNKNOWN;case Ku.DEADLINE_EXCEEDED:return qs.DEADLINE_EXCEEDED;case Ku.RESOURCE_EXHAUSTED:return qs.RESOURCE_EXHAUSTED;case Ku.INTERNAL:return qs.INTERNAL;case Ku.UNAVAILABLE:return qs.UNAVAILABLE;case Ku.UNAUTHENTICATED:return qs.UNAUTHENTICATED;case Ku.INVALID_ARGUMENT:return qs.INVALID_ARGUMENT;case Ku.NOT_FOUND:return qs.NOT_FOUND;case Ku.ALREADY_EXISTS:return qs.ALREADY_EXISTS;case Ku.PERMISSION_DENIED:return qs.PERMISSION_DENIED;case Ku.FAILED_PRECONDITION:return qs.FAILED_PRECONDITION;case Ku.ABORTED:return qs.ABORTED;case Ku.OUT_OF_RANGE:return qs.OUT_OF_RANGE;case Ku.UNIMPLEMENTED:return qs.UNIMPLEMENTED;case Ku.DATA_LOSS:return qs.DATA_LOSS;default:return Hs()}}(Zu=Ku||(Ku={}))[Zu.OK=0]="OK",Zu[Zu.CANCELLED=1]="CANCELLED",Zu[Zu.UNKNOWN=2]="UNKNOWN",Zu[Zu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zu[Zu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zu[Zu.NOT_FOUND=5]="NOT_FOUND",Zu[Zu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zu[Zu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zu[Zu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zu[Zu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zu[Zu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zu[Zu.ABORTED=10]="ABORTED",Zu[Zu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zu[Zu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zu[Zu.INTERNAL=13]="INTERNAL",Zu[Zu.UNAVAILABLE=14]="UNAVAILABLE",Zu[Zu.DATA_LOSS=15]="DATA_LOSS";let Qu=null;function Ju(){return new TextEncoder}const ed=new bs([4294967295,4294967295],0);function td(e){const t=Ju().encode(e),r=new ws;return r.update(t),new Uint8Array(r.digest())}function rd(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new bs([r,n],0),new bs([i,a],0)]}class nd{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new id(`Invalid padding: ${t}`);if(r<0)throw new id(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new id(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new id(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=bs.fromNumber(this.Ee)}Ae(e,t,r){let n=e.add(t.multiply(bs.fromNumber(r)));return 1===n.compare(ed)&&(n=new bs([n.getBits(0),n.getBits(1)],0)),n.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=td(e),[r,n]=rd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(r,n,i);if(!this.Re(e))return!1}return!0}static create(e,t,r){const n=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new nd(i,n,t);return r.forEach((e=>a.insert(e))),a}insert(e){if(0===this.Ee)return;const t=td(e),[r,n]=rd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(r,n,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class id extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ad{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const n=new Map;return n.set(e,sd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ad(ho.min(),n,new pl(so),eu(),cu())}}class sd{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sd(r,t,cu(),cu(),cu())}}class od{constructor(e,t,r,n){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=n}}class ld{constructor(e,t){this.targetId=e,this.ge=t}}class cd{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bl.EMPTY_BYTE_STRING,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class ud{constructor(){this.pe=0,this.ye=pd(),this.we=bl.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=cu(),t=cu(),r=cu();return this.ye.forEach(((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:Hs()}})),new sd(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=pd()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Gs(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class dd{constructor(e){this.ke=e,this.qe=new Map,this.Qe=eu(),this.$e=hd(),this.Ke=hd(),this.Ue=new pl(so)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Hs()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,r)=>{this.Je(r)&&t(r)}))}Ze(e){const t=e.targetId,r=e.ge.count,n=this.Xe(t);if(n){const i=n.target;if(Ic(i))if(0===r){const e=new xo(i.path);this.ze(t,e,sc.newNoDocument(e,ho.min()))}else Gs(1===r);else{const n=this.et(t);if(n!==r){const r=this.tt(e),i=r?this.nt(r,e,n):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,e)}null==Qu||Qu.rt(function(e,t,r,n,i){var a,s,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:r.database,projectId:r.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(l=null===(o=null===(s=null==h?void 0:h.bits)||void 0===s?void 0:s.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==n?void 0:n.mightContain(e))&&void 0!==t&&t}}),d}(n,e.ge,this.ke.it(),r,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:n=0},hashCount:i=0}=t;let a,s;try{a=Sl(r).toUint8Array()}catch(e){if(e instanceof yl)return Us("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new nd(a,n,i)}catch(e){return Us(e instanceof id?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Ee?null:s}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let n=0;return r.forEach((r=>{const i=this.ke.it(),a=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,r,null),n++)})),n}ot(e){const t=new Map;this.qe.forEach(((r,n)=>{const i=this.Xe(n);if(i){if(r.current&&Ic(i.target)){const t=new xo(i.target.path);this._t(t).has(n)||this.ut(n,t)||this.ze(n,t,sc.newNoDocument(t,e))}r.ve&&(t.set(n,r.Fe()),r.Me())}}));let r=cu();this.Ke.forEach(((e,t)=>{let n=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)})),n&&(r=r.add(e))})),this.Qe.forEach(((t,r)=>r.setReadTime(e)));const n=new ad(e,t,this.Ue,this.Qe,r);return this.Qe=eu(),this.$e=hd(),this.Ke=hd(),this.Ue=new pl(so),n}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const n=this.He(e);this.ut(e,t)?n.xe(t,1):n.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new ud,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new gl(so),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new gl(so),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||Bs("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new ud),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function hd(){return new pl(xo.comparator)}function pd(){return new pl(xo.comparator)}const fd={asc:"ASCENDING",desc:"DESCENDING"},md={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gd={and:"AND",or:"OR"};class vd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xd(e,t){return e.useProto3Json||Io(t)?t:{value:t}}function yd(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function bd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wd(e,t){return yd(e,t.toTimestamp())}function _d(e){return Gs(!!e),ho.fromTimestamp(function(e){const t=_l(e);return new uo(t.seconds,t.nanos)}(e))}function kd(e,t){return Sd(e,t).canonicalString()}function Sd(e,t){const r=function(e){return new mo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?r:r.child(t)}function jd(e){const t=mo.fromString(e);return Gs(Wd(t)),t}function Ed(e,t){return kd(e.databaseId,t.path)}function Cd(e,t){const r=jd(t);if(r.get(1)!==e.databaseId.projectId)throw new Ks(qs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Ks(qs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new xo(Ad(r))}function Nd(e,t){return kd(e.databaseId,t)}function Td(e){const t=jd(e);return 4===t.length?mo.emptyPath():Ad(t)}function Pd(e){return new mo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ad(e){return Gs(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Md(e,t,r){return{name:Ed(e,t),fields:r.value.mapValue.fields}}function Id(e,t){let r;if(t instanceof Ru)r={update:Md(e,t.key,t.value)};else if(t instanceof zu)r={delete:Ed(e,t.key)};else if(t instanceof Lu)r={update:Md(e,t.key,t.data),updateMask:Gd(t.fieldMask)};else{if(!(t instanceof Uu))return Hs();r={verify:Ed(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const r=t.transform;if(r instanceof yu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof bu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof _u)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof Su)return{fieldPath:t.field.canonicalString(),increment:r.Ie};throw Hs()}(0,e)))),t.precondition.isNone||(r.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Hs()}(e,t.precondition)),r}function Od(e,t){return{documents:[Nd(e,t.path)]}}function Dd(e,t){const r={structuredQuery:{}},n=t.path;let i;null!==t.collectionGroup?(i=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Nd(e,i);const a=function(e){if(0!==e.length)return Hd(fc.create(e,"and"))}(t.filters);a&&(r.structuredQuery.where=a);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ud(e.field),direction:$d(e.dir)}}(e)))}(t.orderBy);s&&(r.structuredQuery.orderBy=s);const o=xd(e,t.limit);return null!==o&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:r,parent:i}}function Rd(e,t,r,n){const{ht:i,parent:a}=Dd(e,t),s={},o=[];let l=0;return r.forEach((e=>{const t=n?e.alias:"aggregate_"+l++;s[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:Ud(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:Ud(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},Pt:s,parent:a}}function Ld(e){let t=Td(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Gs(1===n);const e=r.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];r.where&&(a=function(e){const t=Fd(e);return t instanceof fc&&gc(t)?t.getFilters():[t]}(r.where));let s=[];r.orderBy&&(s=function(e){return e.map((e=>function(e){return new uc(Vd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(r.orderBy));let o=null;r.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Io(t)?null:t}(r.limit));let l=null;r.startAt&&(l=function(e){const t=!!e.before,r=e.values||[];return new oc(r,t)}(r.startAt));let c=null;return r.endAt&&(c=function(e){const t=!e.before,r=e.values||[];return new oc(r,t)}(r.endAt)),Dc(t,i,s,a,o,"F",l,c)}function Fd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vd(e.unaryFilter.field);return pc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Vd(e.unaryFilter.field);return pc.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=Vd(e.unaryFilter.field);return pc.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Vd(e.unaryFilter.field);return pc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Hs()}}(e):void 0!==e.fieldFilter?function(e){return pc.create(Vd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Hs()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fc.create(e.compositeFilter.filters.map((e=>Fd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Hs()}}(e.compositeFilter.op))}(e):Hs()}function $d(e){return fd[e]}function Bd(e){return md[e]}function zd(e){return gd[e]}function Ud(e){return{fieldPath:e.canonicalString()}}function Vd(e){return vo.fromServerFormat(e.fieldPath)}function Hd(e){return e instanceof pc?function(e){if("=="===e.op){if(Jl(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NAN"}};if(Ql(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jl(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NOT_NAN"}};if(Ql(e.value))return{unaryFilter:{field:Ud(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ud(e.field),op:Bd(e.op),value:e.value}}}(e):e instanceof fc?function(e){const t=e.getFilters().map((e=>Hd(e)));return 1===t.length?t[0]:{compositeFilter:{op:zd(e.op),filters:t}}}(e):Hs()}function Gd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Wd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qd{constructor(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ho.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ho.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bl.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new qd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Kd{constructor(e){this.Tt=e}}function Zd(e){const t=Ld({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hc(t,t.limit,"L"):t}class Yd{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(kl(e.integerValue));else if("doubleValue"in e){const r=kl(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),Oo(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),"string"==typeof r&&(r=_l(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(Sl(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?nc(e)?this.ft(t,Number.MAX_SAFE_INTEGER):tc(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):Hs()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const n of Object.keys(r))this.wt(n,t),this.Rt(r[n],t)}vt(e,t){var r,n;const i=e.fields||{};this.ft(t,53);const a=$l,s=(null===(n=null===(r=i[a].arrayValue)||void 0===r?void 0:r.values)||void 0===n?void 0:n.length)||0;this.ft(t,15),t.gt(kl(s)),this.wt(a,t),this.Rt(i[a],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const n of r)this.Rt(n,t)}Dt(e,t){this.ft(t,37),xo.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}Yd.xt=new Yd;class Xd{constructor(){this.Tn=new Qd}addToCollectionParentIndex(e,t){return this.Tn.add(t),No.resolve()}getCollectionParents(e,t){return No.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return No.resolve()}deleteFieldIndex(e,t){return No.resolve()}deleteAllFieldIndexes(e){return No.resolve()}createTargetIndexes(e,t){return No.resolve()}getDocumentsMatchingTarget(e,t){return No.resolve(null)}getIndexType(e,t){return No.resolve(0)}getFieldIndexes(e,t){return No.resolve([])}getNextCollectionGroupToUpdate(e){return No.resolve(null)}getMinOffset(e,t){return No.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,t){return No.resolve(ko.min())}updateCollectionGroup(e,t,r){return No.resolve()}updateIndexEntries(e,t){return No.resolve()}}class Qd{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new gl(mo.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new gl(mo.comparator)).toArray()}}new Uint8Array(0);const Jd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eh=41943040;class th{static withCacheSize(e){return new th(e,th.DEFAULT_COLLECTION_PERCENTILE,th.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}th.DEFAULT_COLLECTION_PERCENTILE=10,th.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,th.DEFAULT=new th(eh,th.DEFAULT_COLLECTION_PERCENTILE,th.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),th.DISABLED=new th(-1,0,0);class rh{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new rh(0)}static Un(){return new rh(-1)}}const nh="LruGarbageCollector",ih=1048576;function ah(e,t){let[r,n]=e,[i,a]=t;const s=so(r,i);return 0===s?so(n,a):s}class sh{constructor(e){this.Hn=e,this.buffer=new gl(ah),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ah(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oh{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){Bs(nh,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Po(e)?Bs(nh,"Ignoring IndexedDB error during garbage collection: ",e):await Co(e)}await this.er(3e5)}))}}class lh{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return No.resolve(Ao.ae);const r=new sh(t);return this.tr.forEachTarget(e,(e=>r.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>r.Zn(e))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Bs("LruGarbageCollector","Garbage collection skipped; disabled"),No.resolve(Jd)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Bs("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jd):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,n,i,a,s,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Bs("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,a=Date.now(),this.nthSequenceNumber(e,n)))).next((n=>(r=n,s=Date.now(),this.removeTargets(e,r,t)))).next((t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,r)))).next((e=>(l=Date.now(),$s()<=Xi.DEBUG&&Bs("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-c}ms\n\tDetermined least recently used ${n} in `+(s-a)+"ms\n"+`\tRemoved ${i} targets in `+(o-s)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),No.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e}))))}}function ch(e,t){return new lh(e,t)}class uh{constructor(){this.changes=new Qc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?No.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hh{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((n=>(r=n,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==r&&Iu(r.mutation,e,xl.empty(),uo.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,cu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cu();const n=iu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,r).next((e=>{let t=ru();return e.forEach(((e,r)=>{t=t.insert(e,r.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const r=iu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,cu())))}populateOverlays(e,t,r){const n=[];return r.forEach((e=>{t.has(e)||n.push(e)})),this.documentOverlayCache.getOverlays(e,n).next((e=>{e.forEach(((e,r)=>{t.set(e,r)}))}))}computeViews(e,t,r,n){let i=eu();const a=su(),s=su();return t.forEach(((e,t)=>{const s=r.get(t.key);n.has(t.key)&&(void 0===s||s.mutation instanceof Lu)?i=i.insert(t.key,t):void 0!==s?(a.set(t.key,s.mutation.getFieldMask()),Iu(s.mutation,t,s.mutation.getFieldMask(),uo.now())):a.set(t.key,xl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>{var r;return s.set(e,new dh(t,null!==(r=a.get(e))&&void 0!==r?r:null))})),s)))}recalculateAndSaveOverlays(e,t){const r=su();let n=new pl(((e,t)=>e-t)),i=cu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const a=t.get(e);if(null===a)return;let s=r.get(e)||xl.empty();s=i.applyToLocalView(a,s),r.set(e,s);const o=(n.get(i.batchId)||cu()).add(e);n=n.insert(i.batchId,o)}))})).next((()=>{const a=[],s=n.getReverseIterator();for(;s.hasNext();){const n=s.getNext(),o=n.key,l=n.value,c=au();l.forEach((e=>{if(!i.has(e)){const n=Au(t.get(e),r.get(e));null!==n&&c.set(e,n),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return No.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,r,n){return function(e){return xo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next((i=>{const a=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):No.resolve(iu());let s=yo,o=i;return a.next((t=>No.forEach(t,((t,r)=>(s<r.largestBatchId&&(s=r.largestBatchId),i.get(t)?No.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,cu()))).next((e=>({batchId:s,changes:nu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xo(t)).next((e=>{let t=ru();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){const i=t.collectionGroup;let a=ru();return this.indexManager.getCollectionParents(e,i).next((s=>No.forEach(s,(s=>{const o=function(e,t){return new Oc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,r,n).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,n)))).next((e=>{i.forEach(((t,r)=>{const n=r.getKey();null===e.get(n)&&(e=e.insert(n,sc.newInvalidDocument(n)))}));let r=ru();return e.forEach(((e,n)=>{const a=i.get(e);void 0!==a&&Iu(a.mutation,n,xl.empty(),uo.now()),Kc(t,n)&&(r=r.insert(e,n))})),r}))}}class ph{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return No.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:_d(e.createTime)}}(t)),No.resolve()}getNamedQuery(e,t){return No.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:Zd(e.bundledQuery),readTime:_d(e.readTime)}}(t)),No.resolve()}}class fh{constructor(){this.overlays=new pl(xo.comparator),this.Rr=new Map}getOverlay(e,t){return No.resolve(this.overlays.get(t))}getOverlays(e,t){const r=iu();return No.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&r.set(t,e)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((r,n)=>{this.Et(e,t,n)})),No.resolve()}removeOverlaysForBatchId(e,t,r){const n=this.Rr.get(r);return void 0!==n&&(n.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(r)),No.resolve()}getOverlaysForCollection(e,t,r){const n=iu(),i=t.length+1,a=new xo(t.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const e=s.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return No.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new pl(((e,t)=>e-t));const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=iu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=iu(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=n)););return No.resolve(s)}Et(e,t,r){const n=this.overlays.get(r.key);if(null!==n){const e=this.Rr.get(n.largestBatchId).delete(r.key);this.Rr.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new Gu(t,r));let i=this.Rr.get(t);void 0===i&&(i=cu(),this.Rr.set(t,i)),this.Rr.set(t,i.add(r.key))}}class mh{constructor(){this.sessionToken=bl.EMPTY_BYTE_STRING}getSessionToken(e){return No.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,No.resolve()}}class gh{constructor(){this.Vr=new gl(vh.mr),this.gr=new gl(vh.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new vh(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new vh(e,t))}br(e,t){e.forEach((e=>this.removeReference(e,t)))}Sr(e){const t=new xo(new mo([])),r=new vh(t,e),n=new vh(t,e+1),i=[];return this.gr.forEachInRange([r,n],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new xo(new mo([])),r=new vh(t,e),n=new vh(t,e+1);let i=cu();return this.gr.forEachInRange([r,n],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new vh(e,0),r=this.Vr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vh{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return xo.comparator(e.key,t.key)||so(e.Cr,t.Cr)}static pr(e,t){return so(e.Cr,t.Cr)||xo.comparator(e.key,t.key)}}class xh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new gl(vh.mr)}checkEmpty(e){return No.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Vu(i,t,r,n);this.mutationQueue.push(a);for(const s of n)this.Mr=this.Mr.add(new vh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return No.resolve(a)}lookupMutationBatch(e,t){return No.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,n=this.Nr(r),i=n<0?0:n;return No.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return No.resolve(0===this.mutationQueue.length?Mo:this.Fr-1)}getAllMutationBatches(e){return No.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vh(t,0),n=new vh(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([r,n],(e=>{const t=this.Or(e.Cr);i.push(t)})),No.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gl(so);return t.forEach((e=>{const t=new vh(e,0),n=new vh(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,n],(e=>{r=r.add(e.Cr)}))})),No.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,n=r.length+1;let i=r;xo.isDocumentKey(i)||(i=i.child(""));const a=new vh(new xo(i),0);let s=new gl(so);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(s=s.add(e.Cr)),!0)}),a),No.resolve(this.Br(s))}Br(e){const t=[];return e.forEach((e=>{const r=this.Or(e);null!==r&&t.push(r)})),t}removeMutationBatch(e,t){Gs(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Mr;return No.forEach(t.mutations,(n=>{const i=new vh(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)})).next((()=>{this.Mr=r}))}qn(e){}containsKey(e,t){const r=new vh(t,0),n=this.Mr.firstAfterOrEqual(r);return No.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,No.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yh{constructor(e){this.kr=e,this.docs=new pl(xo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,n=this.docs.get(r),i=n?n.size:0,a=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return No.resolve(r?r.document.mutableCopy():sc.newInvalidDocument(t))}getEntries(e,t){let r=eu();return t.forEach((e=>{const t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():sc.newInvalidDocument(e))})),No.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=eu();const a=t.path,s=new xo(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:e,value:{document:s}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||So(_o(s),r)<=0||(n.has(s.key)||Kc(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return No.resolve(i)}getAllFromCollectionGroup(e,t,r,n){Hs()}qr(e,t){return No.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new bh(this)}getSize(e){return No.resolve(this.size)}}class bh extends uh{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((r,n)=>{n.isValidDocument()?t.push(this.Ir.addEntry(e,n)):this.Ir.removeEntry(r)})),No.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class wh{constructor(e){this.persistence=e,this.Qr=new Qc((e=>Ac(e)),Mc),this.lastRemoteSnapshotVersion=ho.min(),this.highestTargetId=0,this.$r=0,this.Kr=new gh,this.targetCount=0,this.Ur=rh.Kn()}forEachTarget(e,t){return this.Qr.forEach(((e,r)=>t(r))),No.resolve()}getLastRemoteSnapshotVersion(e){return No.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return No.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),No.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),No.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new rh(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,No.resolve()}updateTargetData(e,t){return this.zn(t),No.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,No.resolve()}removeTargets(e,t,r){let n=0;const i=[];return this.Qr.forEach(((a,s)=>{s.sequenceNumber<=t&&null===r.get(s.targetId)&&(this.Qr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),n++)})),No.waitFor(i).next((()=>n))}getTargetCount(e){return No.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return No.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),No.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const n=this.persistence.referenceDelegate,i=[];return n&&t.forEach((t=>{i.push(n.markPotentiallyOrphaned(e,t))})),No.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),No.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return No.resolve(r)}containsKey(e,t){return No.resolve(this.Kr.containsKey(t))}}class _h{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Ao(0),this.zr=!1,this.zr=!0,this.jr=new mh,this.referenceDelegate=e(this),this.Hr=new wh(this),this.indexManager=new Xd,this.remoteDocumentCache=function(e){return new yh(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Kd(t),this.Yr=new ph(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new xh(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){Bs("MemoryPersistence","Starting transaction:",e);const n=new kh(this.Gr.next());return this.referenceDelegate.Zr(),r(n).next((e=>this.referenceDelegate.Xr(n).next((()=>e)))).toPromise().then((e=>(n.raiseOnCommittedEvent(),e)))}ei(e,t){return No.or(Object.values(this.Wr).map((r=>()=>r.containsKey(e,t))))}}class kh extends Eo{constructor(e){super(),this.currentSequenceNumber=e}}class Sh{constructor(e){this.persistence=e,this.ti=new gh,this.ni=null}static ri(e){return new Sh(e)}get ii(){if(this.ni)return this.ni;throw Hs()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),No.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),No.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),No.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach((e=>this.ii.add(e.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>r.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return No.forEach(this.ii,(r=>{const n=xo.fromPath(r);return this.si(e,n).next((e=>{e||t.removeEntry(n,ho.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return No.or([()=>No.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class jh{constructor(e,t){this.persistence=e,this.oi=new Qc((e=>Lo(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=ch(this,t)}static ri(e,t){return new jh(e,t)}Zr(){}Xr(e){return No.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return No.forEach(this.oi,((r,n)=>this.ar(e,r,n).next((e=>e?No.resolve():t(n)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.qr(e,(n=>this.ar(e,n,t).next((e=>{e||(r++,i.removeEntry(n,ho.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),No.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),No.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),No.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),No.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kl(e.data.value)),t}ar(e,t,r){return No.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return No.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Eh{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=n}static Yi(e,t){let r=cu(),n=cu();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:n=n.add(i.doc.key)}return new Eh(e,t.fromCache,r,n)}}class Ch{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Nh{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=Ii()?8:To(Mi())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,n){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,n,r).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const r=new Ch;return this._s(e,t,r).next((n=>{if(i.result=n,this.Xi)return this.us(e,t,r,n.size)}))})).next((()=>i.result))}us(e,t,r,n){return r.documentReadCount<this.es?($s()<=Xi.DEBUG&&Bs("QueryEngine","SDK will not create cache indexes for query:",qc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),No.resolve()):($s()<=Xi.DEBUG&&Bs("QueryEngine","Query:",qc(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.ts*n?($s()<=Xi.DEBUG&&Bs("QueryEngine","The SDK decides to create cache indexes for query:",qc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bc(t))):No.resolve())}rs(e,t){if(Lc(t))return No.resolve(null);let r=Bc(t);return this.indexManager.getIndexType(e,r).next((n=>0===n?null:(null!==t.limit&&1===n&&(t=Hc(t,null,"F"),r=Bc(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((n=>{const i=cu(...n);return this.ns.getDocuments(e,i).next((n=>this.indexManager.getMinOffset(e,r).next((r=>{const a=this.cs(t,n);return this.ls(t,a,i,r.readTime)?this.rs(e,Hc(t,null,"F")):this.hs(e,a,t,r)}))))})))))}ss(e,t,r,n){return Lc(t)||n.isEqual(ho.min())?No.resolve(null):this.ns.getDocuments(e,r).next((i=>{const a=this.cs(t,i);return this.ls(t,a,r,n)?No.resolve(null):($s()<=Xi.DEBUG&&Bs("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),qc(t)),this.hs(e,a,t,wo(n,yo)).next((e=>e)))}))}cs(e,t){let r=new gl(Yc(e));return t.forEach(((t,n)=>{Kc(e,n)&&(r=r.add(n))})),r}ls(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}_s(e,t,r){return $s()<=Xi.DEBUG&&Bs("QueryEngine","Using full collection scan to execute query:",qc(t)),this.ns.getDocumentsMatchingQuery(e,t,ko.min(),r)}hs(e,t,r,n){return this.ns.getDocumentsMatchingQuery(e,r,n).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Th="LocalStore";class Ph{constructor(e,t,r,n){this.persistence=e,this.Ps=t,this.serializer=n,this.Ts=new pl(so),this.Is=new Qc((e=>Ac(e)),Mc),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hh(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function Ah(e,t,r,n){return new Ph(e,t,r,n)}async function Mh(e,t){const r=Ws(e);return await r.persistence.runTransaction("Handle user change","readonly",(e=>{let n;return r.mutationQueue.getAllMutationBatches(e).next((i=>(n=i,r.As(t),r.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],a=[];let s=cu();for(const e of n){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return r.localDocuments.getDocuments(e,s).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function Ih(e){const t=Ws(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function Oh(e,t,r){let n=cu(),i=cu();return r.forEach((e=>n=n.add(e))),t.getEntries(e,n).next((e=>{let n=eu();return r.forEach(((r,a)=>{const s=e.get(r);a.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(r)),a.isNoDocument()&&a.version.isEqual(ho.min())?(t.removeEntry(r,a.readTime),n=n.insert(r,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a),n=n.insert(r,a)):Bs(Th,"Ignoring outdated watch update for ",r,". Current version:",s.version," Watch version:",a.version)})),{Vs:n,fs:i}}))}function Dh(e,t){const r=Ws(e);return r.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Mo),r.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Rh(e,t){const r=Ws(e);return r.persistence.runTransaction("Allocate target","readwrite",(e=>{let n;return r.Hr.getTargetData(e,t).next((i=>i?(n=i,No.resolve(n)):r.Hr.allocateTargetId(e).next((i=>(n=new qd(t,i,"TargetPurposeListen",e.currentSequenceNumber),r.Hr.addTargetData(e,n).next((()=>n)))))))})).then((e=>{const n=r.Ts.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(e.targetId,e),r.Is.set(t,e.targetId)),e}))}async function Lh(e,t,r){const n=Ws(e),i=n.Ts.get(t),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,(e=>n.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Po(e))throw e;Bs(Th,`Failed to update sequence numbers for target ${t}: ${e}`)}n.Ts=n.Ts.remove(t),n.Is.delete(i.target)}function Fh(e,t,r){const n=Ws(e);let i=ho.min(),a=cu();return n.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,r){const n=Ws(e),i=n.Is.get(r);return void 0!==i?No.resolve(n.Ts.get(i)):n.Hr.getTargetData(t,r)}(n,e,Bc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>n.Ps.getDocumentsMatchingQuery(e,t,r?i:ho.min(),r?a:cu()))).next((e=>($h(n,Zc(t),e),{documents:e,gs:a})))))}function $h(e,t,r){let n=e.Es.get(t)||ho.min();r.forEach(((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)})),e.Es.set(t,n)}class Bh{constructor(){this.activeTargetIds=du()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zh{constructor(){this.ho=new Bh,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Bh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uh{To(e){}shutdown(){}}const Vh="ConnectivityMonitor";class Hh{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Bs(Vh,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Bs(Vh,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gh=null;function Wh(){return null===Gh?Gh=268435456+Math.round(2147483648*Math.random()):Gh++,"0x"+Gh.toString(16)}const qh="RestConnection",Kh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zh{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${n}`,this.wo=this.databaseId.database===Il?`project_id=${r}`:`project_id=${r}&database_id=${n}`}bo(e,t,r,n,i){const a=Wh(),s=this.So(e,t.toUriEncodedString());Bs(qh,`Sending RPC '${e}' ${a}:`,s,r);const o={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(o,n,i),this.vo(e,s,o,r).then((t=>(Bs(qh,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Us(qh,`RPC '${e}' ${a} failed with error: `,t,"url: ",s,"request:",r),t}))}Co(e,t,r,n,i,a){return this.bo(e,t,r,n,i)}Do(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ls,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,r)=>e[r]=t)),r&&r.headers.forEach(((t,r)=>e[r]=t))}So(e,t){const r=Kh[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}class Yh{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}const Xh="WebChannelConnection";class Qh extends Zh{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,n){const i=Wh();return new Promise(((a,s)=>{const o=new Ss;o.setWithCredentials(!0),o.listenOnce(Es.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Cs.NO_ERROR:const t=o.getResponseJson();Bs(Xh,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),a(t);break;case Cs.TIMEOUT:Bs(Xh,`RPC '${e}' ${i} timed out`),s(new Ks(qs.DEADLINE_EXCEEDED,"Request time out"));break;case Cs.HTTP_ERROR:const r=o.getStatus();if(Bs(Xh,`RPC '${e}' ${i} failed with status:`,r,"response text:",o.getResponseText()),r>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(qs).indexOf(t)>=0?t:qs.UNKNOWN}(t.status);s(new Ks(e,t.message))}else s(new Ks(qs.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Ks(qs.UNAVAILABLE,"Connection failed."));break;default:Hs()}}finally{Bs(Xh,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(n);Bs(Xh,`RPC '${e}' ${i} sending request:`,n),o.send(t,"POST",l,r,15)}))}Wo(e,t,r){const n=Wh(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=As(),s=Ps(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Do(o.initMessageHeaders,t,r),o.encodeInitMessageHeaders=!0;const c=i.join("");Bs(Xh,`Creating RPC '${e}' stream ${n}: ${c}`,o);const u=a.createWebChannel(c,o);let d=!1,h=!1;const p=new Yh({Fo:t=>{h?Bs(Xh,`Not sending because RPC '${e}' stream ${n} is closed:`,t):(d||(Bs(Xh,`Opening RPC '${e}' stream ${n} transport.`),u.open(),d=!0),Bs(Xh,`RPC '${e}' stream ${n} sending:`,t),u.send(t))},Mo:()=>u.close()}),f=(e,t,r)=>{e.listen(t,(e=>{try{r(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,js.EventType.OPEN,(()=>{h||(Bs(Xh,`RPC '${e}' stream ${n} transport opened.`),p.Qo())})),f(u,js.EventType.CLOSE,(()=>{h||(h=!0,Bs(Xh,`RPC '${e}' stream ${n} transport closed`),p.Ko())})),f(u,js.EventType.ERROR,(t=>{h||(h=!0,Us(Xh,`RPC '${e}' stream ${n} transport errored:`,t),p.Ko(new Ks(qs.UNAVAILABLE,"The operation could not be completed")))})),f(u,js.EventType.MESSAGE,(t=>{var r;if(!h){const i=t.data[0];Gs(!!i);const a=i,s=(null==a?void 0:a.error)||(null===(r=a[0])||void 0===r?void 0:r.error);if(s){Bs(Xh,`RPC '${e}' stream ${n} received error:`,s);const t=s.status;let r=function(e){const t=Ku[e];if(void 0!==t)return Xu(t)}(t),i=s.message;void 0===r&&(r=qs.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,p.Ko(new Ks(r,i)),u.close()}else Bs(Xh,`RPC '${e}' stream ${n} received:`,i),p.Uo(i)}})),f(s,Ts.STAT_EVENT,(t=>{t.stat===Ns.PROXY?Bs(Xh,`RPC '${e}' stream ${n} detected buffering proxy`):t.stat===Ns.NOPROXY&&Bs(Xh,`RPC '${e}' stream ${n} detected no buffering proxy`)})),setTimeout((()=>{p.$o()}),0),p}}function Jh(){return"undefined"!=typeof document?document:null}function ep(e){return new vd(e,!0)}class tp{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=r,this.zo=n,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),n=Math.max(0,t-r);n>0&&Bs("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,n,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const rp="PersistentStream";class np{constructor(e,t,r,n,i,a,s,o){this.Ti=e,this.n_=r,this.r_=n,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new tp(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===qs.RESOURCE_EXHAUSTED?(zs(t.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===qs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[r,n]=e;this.i_===t&&this.V_(r,n)}),(t=>{e((()=>{const e=new Ks(qs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{r((()=>this.listener.xo()))})),this.stream.No((()=>{r((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{r((()=>this.m_(e)))})),this.stream.onMessage((e=>{r((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return Bs(rp,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(Bs(rp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ip extends np{constructor(e,t,r,n,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,a),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Hs()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Gs(void 0===t||"string"==typeof t),bl.fromBase64String(t||"")):(Gs(void 0===t||t instanceof Buffer||t instanceof Uint8Array),bl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&function(e){const t=void 0===e.code?qs.UNKNOWN:Xu(e.code);return new Ks(t,e.message||"")}(s);r=new cd(n,i,a,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const i=Cd(e,n.document.name),a=_d(n.document.updateTime),s=n.document.createTime?_d(n.document.createTime):ho.min(),o=new ic({mapValue:{fields:n.document.fields}}),l=sc.newFoundDocument(i,a,s,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new od(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const i=Cd(e,n.document),a=n.readTime?_d(n.readTime):ho.min(),s=sc.newNoDocument(i,a),o=n.removedTargetIds||[];r=new od([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const i=Cd(e,n.document),a=n.removedTargetIds||[];r=new od([],a,i,null)}else{if(!("filter"in t))return Hs();{t.filter;const e=t.filter;e.targetId;const{count:n=0,unchangedNames:i}=e,a=new qu(n,i),s=e.targetId;r=new ld(s,a)}}return r}(this.serializer,e),r=function(e){if(!("targetChange"in e))return ho.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ho.min():t.readTime?_d(t.readTime):ho.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Pd(this.serializer),t.addTarget=function(e,t){let r;const n=t.target;if(r=Ic(n)?{documents:Od(e,n)}:{query:Dd(e,n).ht},r.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=bd(e,t.resumeToken);const n=xd(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(ho.min())>0){r.readTime=yd(e,t.snapshotVersion.toTimestamp());const n=xd(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}(this.serializer,e);const r=function(e,t){const r=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hs()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Pd(this.serializer),t.removeTarget=e,this.I_(t)}}class ap extends np{constructor(e,t,r,n,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,a),this.serializer=i}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Gs(!!e.streamToken),this.lastStreamToken=e.streamToken,Gs(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){Gs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(Gs(void 0!==t),e.map((e=>function(e,t){let r=e.updateTime?_d(e.updateTime):_d(t);return r.isEqual(ho.min())&&(r=_d(t)),new Cu(r,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),r=_d(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Pd(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Id(this.serializer,e)))};this.I_(t)}}class sp{}class op extends sp{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.F_=!1}M_(){if(this.F_)throw new Ks(qs.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,n){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[a,s]=i;return this.connection.bo(e,Sd(t,r),n,a,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===qs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ks(qs.UNKNOWN,e.toString())}))}Co(e,t,r,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((a=>{let[s,o]=a;return this.connection.Co(e,Sd(t,r),n,s,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===qs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ks(qs.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class lp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(zs(t),this.N_=!1):Bs("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const cp="RemoteStore";class up{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{r.enqueueAndForget((async()=>{yp(this)&&(Bs(cp,"Restarting streams for network reachability change."),await async function(e){const t=Ws(e);t.W_.add(4),await hp(t),t.j_.set("Unknown"),t.W_.delete(4),await dp(t)}(this))}))})),this.j_=new lp(r,n)}}async function dp(e){if(yp(e))for(const t of e.G_)await t(!0)}async function hp(e){for(const t of e.G_)await t(!1)}function pp(e,t){const r=Ws(e);r.U_.has(t.targetId)||(r.U_.set(t.targetId,t),xp(r)?vp(r):Fp(r).c_()&&mp(r,t))}function fp(e,t){const r=Ws(e),n=Fp(r);r.U_.delete(t),n.c_()&&gp(r,t),0===r.U_.size&&(n.c_()?n.P_():yp(r)&&r.j_.set("Unknown"))}function mp(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ho.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Fp(e).y_(t)}function gp(e,t){e.H_.Ne(t),Fp(e).w_(t)}function vp(e){e.H_=new dd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Fp(e).start(),e.j_.B_()}function xp(e){return yp(e)&&!Fp(e).u_()&&e.U_.size>0}function yp(e){return 0===Ws(e).W_.size}function bp(e){e.H_=void 0}async function wp(e){e.j_.set("Online")}async function _p(e){e.U_.forEach(((t,r)=>{mp(e,t)}))}async function kp(e,t){bp(e),xp(e)?(e.j_.q_(t),vp(e)):e.j_.set("Unknown")}async function Sp(e,t,r){if(e.j_.set("Online"),t instanceof cd&&2===t.state&&t.cause)try{await async function(e,t){const r=t.cause;for(const n of t.targetIds)e.U_.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.U_.delete(n),e.H_.removeTarget(n))}(e,t)}catch(r){Bs(cp,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await jp(e,r)}else if(t instanceof od?e.H_.We(t):t instanceof ld?e.H_.Ze(t):e.H_.je(t),!r.isEqual(ho.min()))try{const t=await Ih(e.localStore);r.compareTo(t)>=0&&await function(e,t){const r=e.H_.ot(t);return r.targetChanges.forEach(((r,n)=>{if(r.resumeToken.approximateByteSize()>0){const i=e.U_.get(n);i&&e.U_.set(n,i.withResumeToken(r.resumeToken,t))}})),r.targetMismatches.forEach(((t,r)=>{const n=e.U_.get(t);if(!n)return;e.U_.set(t,n.withResumeToken(bl.EMPTY_BYTE_STRING,n.snapshotVersion)),gp(e,t);const i=new qd(n.target,t,r,n.sequenceNumber);mp(e,i)})),e.remoteSyncer.applyRemoteEvent(r)}(e,r)}catch(t){Bs(cp,"Failed to raise snapshot:",t),await jp(e,t)}}async function jp(e,t,r){if(!Po(t))throw t;e.W_.add(1),await hp(e),e.j_.set("Offline"),r||(r=()=>Ih(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Bs(cp,"Retrying IndexedDB access"),await r(),e.W_.delete(1),await dp(e)}))}function Ep(e,t){return t().catch((r=>jp(e,r,t)))}async function Cp(e){const t=Ws(e),r=$p(t);let n=t.K_.length>0?t.K_[t.K_.length-1].batchId:Mo;for(;Np(t);)try{const e=await Dh(t.localStore,n);if(null===e){0===t.K_.length&&r.P_();break}n=e.batchId,Tp(t,e)}catch(e){await jp(t,e)}Pp(t)&&Ap(t)}function Np(e){return yp(e)&&e.K_.length<10}function Tp(e,t){e.K_.push(t);const r=$p(e);r.c_()&&r.b_&&r.S_(t.mutations)}function Pp(e){return yp(e)&&!$p(e).u_()&&e.K_.length>0}function Ap(e){$p(e).start()}async function Mp(e){$p(e).C_()}async function Ip(e){const t=$p(e);for(const r of e.K_)t.S_(r.mutations)}async function Op(e,t,r){const n=e.K_.shift(),i=Hu.from(n,t,r);await Ep(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Cp(e)}async function Dp(e,t){t&&$p(e).b_&&await async function(e,t){if(function(e){return Yu(e)&&e!==qs.ABORTED}(t.code)){const r=e.K_.shift();$p(e).h_(),await Ep(e,(()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t))),await Cp(e)}}(e,t),Pp(e)&&Ap(e)}async function Rp(e,t){const r=Ws(e);r.asyncQueue.verifyOperationInProgress(),Bs(cp,"RemoteStore received new credentials");const n=yp(r);r.W_.add(3),await hp(r),n&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.W_.delete(3),await dp(r)}async function Lp(e,t){const r=Ws(e);t?(r.W_.delete(2),await dp(r)):t||(r.W_.add(2),await hp(r),r.j_.set("Unknown"))}function Fp(e){return e.J_||(e.J_=function(e,t,r){const n=Ws(e);return n.M_(),new ip(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}(e.datastore,e.asyncQueue,{xo:wp.bind(null,e),No:_p.bind(null,e),Lo:kp.bind(null,e),p_:Sp.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),xp(e)?vp(e):e.j_.set("Unknown")):(await e.J_.stop(),bp(e))}))),e.J_}function $p(e){return e.Y_||(e.Y_=function(e,t,r){const n=Ws(e);return n.M_(),new ap(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:Mp.bind(null,e),Lo:Dp.bind(null,e),D_:Ip.bind(null,e),v_:Op.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await Cp(e)):(await e.Y_.stop(),e.K_.length>0&&(Bs(cp,`Stopping write stream with ${e.K_.length} pending writes`),e.K_=[]))}))),e.Y_}class Bp{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,i){const a=Date.now()+r,s=new Bp(e,t,a,n,i);return s.start(r),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ks(qs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(e,t){if(zs("AsyncQueue",`${t}: ${e}`),Po(e))return new Ks(qs.UNAVAILABLE,`${t}: ${e}`);throw e}class Up{static emptySet(e){return new Up(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xo.comparator(t.key,r.key):(e,t)=>xo.comparator(e.key,t.key),this.keyedMap=ru(),this.sortedSet=new pl(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Up))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Up;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Vp{constructor(){this.Z_=new pl(xo.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?0!==e.type&&3===r.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==r.type?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Z_=this.Z_.remove(t):1===e.type&&2===r.type?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Hs():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Hp{constructor(e,t,r,n,i,a,s,o,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){const a=[];return t.forEach((e=>{a.push({type:0,doc:e})})),new Hp(e,t,Up.emptySet(t),a,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(t[n].type!==r[n].type||!t[n].doc.isEqual(r[n].doc))return!1;return!0}}class Gp{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class Wp{constructor(){this.queries=qp(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const r=Ws(e),n=r.queries;r.queries=qp(),n.forEach(((e,r)=>{for(const n of r.ta)n.onError(t)}))}(this,new Ks(qs.ABORTED,"Firestore shutting down"))}}function qp(){return new Qc((e=>Wc(e)),Gc)}async function Kp(e,t){const r=Ws(e);let n=3;const i=t.query;let a=r.queries.get(i);a?!a.na()&&t.ra()&&(n=2):(a=new Gp,n=t.ra()?0:1);try{switch(n){case 0:a.ea=await r.onListen(i,!0);break;case 1:a.ea=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(e){const r=zp(e,`Initialization of query '${qc(t.query)}' failed`);return void t.onError(r)}r.queries.set(i,a),a.ta.push(t),t.sa(r.onlineState),a.ea&&t.oa(a.ea)&&Qp(r)}async function Zp(e,t){const r=Ws(e),n=t.query;let i=3;const a=r.queries.get(n);if(a){const e=a.ta.indexOf(t);e>=0&&(a.ta.splice(e,1),0===a.ta.length?i=t.ra()?0:1:!a.na()&&t.ra()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Yp(e,t){const r=Ws(e);let n=!1;for(const i of t){const e=i.query,t=r.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(n=!0);t.ea=i}}n&&Qp(r)}function Xp(e,t,r){const n=Ws(e),i=n.queries.get(t);if(i)for(const a of i.ta)a.onError(r);n.queries.delete(t)}function Qp(e){e.ia.forEach((e=>{e.next()}))}var Jp,ef;(ef=Jp||(Jp={}))._a="default",ef.Cache="cache";class tf{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const r of e.docChanges)3!==r.type&&t.push(r);e=new Hp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const r="Offline"!==t;return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=Hp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Jp.Cache}}class rf{constructor(e){this.key=e}}class nf{constructor(e){this.key=e}}class af{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=cu(),this.mutatedKeys=cu(),this.ya=Yc(e),this.wa=new Up(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new Vp,n=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,a=n,s=!1;const o="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal(((e,t)=>{const c=n.get(e),u=Kc(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(r.track({type:3,doc:u}),p=!0):this.va(c,u)||(r.track({type:2,doc:u}),p=!0,(o&&this.ya(u,o)>0||l&&this.ya(u,l)<0)&&(s=!0)):!c&&u?(r.track({type:0,doc:u}),p=!0):c&&!u&&(r.track({type:1,doc:c}),p=!0,(o||l)&&(s=!0)),p&&(u?(a=a.add(u),i=h?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{wa:a,Da:r,ls:s,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort(((e,t)=>function(e,t){const r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hs()}};return r(e)-r(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(r),n=null!=n&&n;const s=t&&!n?this.Fa():[],o=0===this.pa.size&&this.current&&!n?1:0,l=o!==this.ga;return this.ga=o,0!==a.length||l?{snapshot:new Hp(this.query,e.wa,i,a,e.mutatedKeys,0===o,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:s}:{Ma:s}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Vp,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=cu(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new nf(e))})),this.pa.forEach((r=>{e.has(r)||t.push(new rf(r))})),t}Oa(e){this.fa=e.gs,this.pa=cu();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Hp.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const sf="SyncEngine";class of{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lf{constructor(e){this.key=e,this.Ba=!1}}class cf{constructor(e,t,r,n,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Qc((e=>Wc(e)),Gc),this.qa=new Map,this.Qa=new Set,this.$a=new pl(xo.comparator),this.Ka=new Map,this.Ua=new gh,this.Wa={},this.Ga=new Map,this.za=rh.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function uf(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=Af(e);let i;const a=n.ka.get(t);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Na()):i=await hf(n,t,r,!0),i}async function df(e,t){const r=Af(e);await hf(r,t,!0,!1)}async function hf(e,t,r,n){const i=await Rh(e.localStore,Bc(t)),a=i.targetId,s=e.sharedClientState.addLocalQueryTarget(a,r);let o;return n&&(o=await pf(e,t,a,"current"===s,i.resumeToken)),e.isPrimaryClient&&r&&pp(e.remoteStore,i),o}async function pf(e,t,r,n,i){e.Ha=(t,r,n)=>async function(e,t,r,n){let i=t.view.Sa(r);i.ls&&(i=await Fh(e.localStore,t.query,!1).then((e=>{let{documents:r}=e;return t.view.Sa(r,i)})));const a=n&&n.targetChanges.get(t.targetId),s=n&&null!=n.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,a,s);return jf(e,t.targetId,o.Ma),o.snapshot}(e,t,r,n);const a=await Fh(e.localStore,t,!0),s=new af(t,a.gs),o=s.Sa(a.documents),l=sd.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),c=s.applyChanges(o,e.isPrimaryClient,l);jf(e,r,c.Ma);const u=new of(t,r,s);return e.ka.set(t,u),e.qa.has(r)?e.qa.get(r).push(t):e.qa.set(r,[t]),c.snapshot}async function ff(e,t,r){const n=Ws(e),i=n.ka.get(t),a=n.qa.get(i.targetId);if(a.length>1)return n.qa.set(i.targetId,a.filter((e=>!Gc(e,t)))),void n.ka.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Lh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&fp(n.remoteStore,i.targetId),kf(n,i.targetId)})).catch(Co)):(kf(n,i.targetId),await Lh(n.localStore,i.targetId,!0))}async function mf(e,t){const r=Ws(e),n=r.ka.get(t),i=r.qa.get(n.targetId);r.isPrimaryClient&&1===i.length&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),fp(r.remoteStore,n.targetId))}async function gf(e,t){const r=Ws(e);try{const e=await function(e,t){const r=Ws(e),n=t.snapshotVersion;let i=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const a=r.ds.newChangeBuffer({trackRemovals:!0});i=r.Ts;const s=[];t.targetChanges.forEach(((a,o)=>{const l=i.get(o);if(!l)return;s.push(r.Hr.removeMatchingKeys(e,a.removedDocuments,o).next((()=>r.Hr.addMatchingKeys(e,a.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(bl.EMPTY_BYTE_STRING,ho.min()).withLastLimboFreeSnapshotVersion(ho.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,n)),i=i.insert(o,c),function(e,t,r){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0)}(l,c,a)&&s.push(r.Hr.updateTargetData(e,c))}));let o=eu(),l=cu();if(t.documentUpdates.forEach((n=>{t.resolvedLimboDocuments.has(n)&&s.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))})),s.push(Oh(e,a,t.documentUpdates).next((e=>{o=e.Vs,l=e.fs}))),!n.isEqual(ho.min())){const t=r.Hr.getLastRemoteSnapshotVersion(e).next((t=>r.Hr.setTargetsMetadata(e,e.currentSequenceNumber,n)));s.push(t)}return No.waitFor(s).next((()=>a.apply(e))).next((()=>r.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(r.Ts=i,e)))}(r.localStore,t);t.targetChanges.forEach(((e,t)=>{const n=r.Ka.get(t);n&&(Gs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ba=!0:e.modifiedDocuments.size>0?Gs(n.Ba):e.removedDocuments.size>0&&(Gs(n.Ba),n.Ba=!1))})),await Nf(r,e,t)}catch(e){await Co(e)}}function vf(e,t,r){const n=Ws(e);if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){const e=[];n.ka.forEach(((r,n)=>{const i=n.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const r=Ws(e);r.onlineState=t;let n=!1;r.queries.forEach(((e,r)=>{for(const i of r.ta)i.sa(t)&&(n=!0)})),n&&Qp(r)}(n.eventManager,t),e.length&&n.La.p_(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function xf(e,t,r){const n=Ws(e);n.sharedClientState.updateQueryState(t,"rejected",r);const i=n.Ka.get(t),a=i&&i.key;if(a){let e=new pl(xo.comparator);e=e.insert(a,sc.newNoDocument(a,ho.min()));const r=cu().add(a),i=new ad(ho.min(),new Map,new pl(so),e,r);await gf(n,i),n.$a=n.$a.remove(a),n.Ka.delete(t),Cf(n)}else await Lh(n.localStore,t,!1).then((()=>kf(n,t,r))).catch(Co)}async function yf(e,t){const r=Ws(e),n=t.batch.batchId;try{const e=await function(e,t){const r=Ws(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const n=t.batch.keys(),i=r.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,r,n){const i=r.batch,a=i.keys();let s=No.resolve();return a.forEach((e=>{s=s.next((()=>n.getEntry(t,e))).next((t=>{const a=r.docVersions.get(e);Gs(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(r,e,t,i).next((()=>i.apply(e))).next((()=>r.mutationQueue.performConsistencyCheck(e))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cu();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}(t)))).next((()=>r.localDocuments.getDocuments(e,n)))}))}(r.localStore,t);_f(r,n,null),wf(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Nf(r,e)}catch(e){await Co(e)}}async function bf(e,t,r){const n=Ws(e);try{const e=await function(e,t){const r=Ws(e);return r.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next((t=>(Gs(null!==t),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t)))).next((()=>r.mutationQueue.performConsistencyCheck(e))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n))).next((()=>r.localDocuments.getDocuments(e,n)))}))}(n.localStore,t);_f(n,t,r),wf(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Nf(n,e)}catch(r){await Co(r)}}function wf(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function _f(e,t,r){const n=Ws(e);let i=n.Wa[n.currentUser.toKey()];if(i){const e=i.get(t);e&&(r?e.reject(r):e.resolve(),i=i.remove(t)),n.Wa[n.currentUser.toKey()]=i}}function kf(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.qa.get(t))e.ka.delete(n),r&&e.La.Ja(n,r);e.qa.delete(t),e.isPrimaryClient&&e.Ua.Sr(t).forEach((t=>{e.Ua.containsKey(t)||Sf(e,t)}))}function Sf(e,t){e.Qa.delete(t.path.canonicalString());const r=e.$a.get(t);null!==r&&(fp(e.remoteStore,r),e.$a=e.$a.remove(t),e.Ka.delete(r),Cf(e))}function jf(e,t,r){for(const n of r)n instanceof rf?(e.Ua.addReference(n.key,t),Ef(e,n)):n instanceof nf?(Bs(sf,"Document no longer in limbo: "+n.key),e.Ua.removeReference(n.key,t),e.Ua.containsKey(n.key)||Sf(e,n.key)):Hs()}function Ef(e,t){const r=t.key,n=r.path.canonicalString();e.$a.get(r)||e.Qa.has(n)||(Bs(sf,"New document in limbo: "+r),e.Qa.add(n),Cf(e))}function Cf(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const r=new xo(mo.fromString(t)),n=e.za.next();e.Ka.set(n,new lf(r)),e.$a=e.$a.insert(r,n),pp(e.remoteStore,new qd(Bc(Rc(r.path)),n,"TargetPurposeLimboResolution",Ao.ae))}}async function Nf(e,t,r){const n=Ws(e),i=[],a=[],s=[];n.ka.isEmpty()||(n.ka.forEach(((e,o)=>{s.push(n.Ha(o,t,r).then((e=>{var t;if((e||r)&&n.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==r?void 0:r.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;n.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Eh.Yi(o.targetId,e);a.push(t)}})))})),await Promise.all(s),n.La.p_(i),await async function(e,t){const r=Ws(e);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>No.forEach(t,(t=>No.forEach(t.Hi,(n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n))).next((()=>No.forEach(t.Ji,(n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))))))}catch(e){if(!Po(e))throw e;Bs(Th,"Failed to update sequence numbers: "+e)}for(const n of t){const e=n.targetId;if(!n.fromCache){const t=r.Ts.get(e),n=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(n);r.Ts=r.Ts.insert(e,i)}}}(n.localStore,a))}async function Tf(e,t){const r=Ws(e);if(!r.currentUser.isEqual(t)){Bs(sf,"User change. New user:",t.toKey());const e=await Mh(r.localStore,t);r.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new Ks(qs.CANCELLED,t))}))})),e.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Nf(r,e.Rs)}}function Pf(e,t){const r=Ws(e),n=r.Ka.get(t);if(n&&n.Ba)return cu().add(n.key);{let e=cu();const n=r.qa.get(t);if(!n)return e;for(const t of n){const n=r.ka.get(t);e=e.unionWith(n.view.ba)}return e}}function Af(e){const t=Ws(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xf.bind(null,t),t.La.p_=Yp.bind(null,t.eventManager),t.La.Ja=Xp.bind(null,t.eventManager),t}function Mf(e){const t=Ws(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bf.bind(null,t),t}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ep(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Ah(this.persistence,new Nh,e.initialUser,this.serializer)}Xa(e){return new _h(Sh.ri,this.serializer)}Za(e){return new zh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class Of extends If{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Gs(this.persistence.referenceDelegate instanceof jh);const r=this.persistence.referenceDelegate.garbageCollector;return new oh(r,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?th.withCacheSize(this.cacheSizeBytes):th.DEFAULT;return new _h((e=>jh.ri(e,t)),this.serializer)}}class Df{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>vf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tf.bind(null,this.syncEngine),await Lp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Wp}createDatastore(e){const t=ep(e.databaseInfo.databaseId),r=function(e){return new Qh(e)}(e.databaseInfo);return function(e,t,r,n){return new op(e,t,r,n)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(e,t,r,n,i){return new up(e,t,r,n,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>vf(this.syncEngine,e,0)),Hh.D()?new Hh:new Uh)}createSyncEngine(e,t){return function(e,t,r,n,i,a,s){const o=new cf(e,t,r,n,i,a);return s&&(o.ja=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ws(e);Bs(cp,"RemoteStore shutting down."),t.W_.add(5),await hp(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Df.provider={build:()=>new Df};class Rf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Lf="FirestoreClient";class Ff{constructor(e,t,r,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=Rs.UNAUTHENTICATED,this.clientId=ao.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async e=>{Bs(Lf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(r,(e=>(Bs(Lf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(q){const r=zp(q,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function $f(e,t){e.asyncQueue.verifyOperationInProgress(),Bs(Lf,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener((async e=>{n.isEqual(e)||(await Mh(t.localStore,e),n=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Bf(e,t){e.asyncQueue.verifyOperationInProgress();const r=await zf(e);Bs(Lf,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener((e=>Rp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,r)=>Rp(t.remoteStore,r))),e._onlineComponents=t}async function zf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Bs(Lf,"Using user provided OfflineComponentProvider");try{await $f(e,e._uninitializedComponentsProvider._offline)}catch(q){const r=q;if(!function(e){return"FirebaseError"===e.name?e.code===qs.FAILED_PRECONDITION||e.code===qs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r))throw r;Us("Error using user provided cache. Falling back to memory cache: "+r),await $f(e,new If)}}else Bs(Lf,"Using default OfflineComponentProvider"),await $f(e,new Of(void 0));return e._offlineComponents}async function Uf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Bs(Lf,"Using user provided OnlineComponentProvider"),await Bf(e,e._uninitializedComponentsProvider._online)):(Bs(Lf,"Using default OnlineComponentProvider"),await Bf(e,new Df))),e._onlineComponents}function Vf(e){return Uf(e).then((e=>e.syncEngine))}function Hf(e){return Uf(e).then((e=>e.datastore))}async function Gf(e){const t=await Uf(e),r=t.eventManager;return r.onListen=uf.bind(null,t.syncEngine),r.onUnlisten=ff.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=df.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=mf.bind(null,t.syncEngine),r}function Wf(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new Zs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,r,n,i){const a=new Rf({next:o=>{a.su(),t.enqueueAndForget((()=>Zp(e,s)));const l=o.docs.has(r);!l&&o.fromCache?i.reject(new Ks(qs.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&n&&"server"===n.source?i.reject(new Ks(qs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new tf(Rc(r.path),a,{includeMetadataChanges:!0,Ta:!0});return Kp(e,s)}(await Gf(e),e.asyncQueue,t,r,n))),n.promise}function qf(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new Zs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,r,n,i){const a=new Rf({next:r=>{a.su(),t.enqueueAndForget((()=>Zp(e,s))),r.fromCache&&"server"===n.source?i.reject(new Ks(qs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(r)},error:e=>i.reject(e)}),s=new tf(r,a,{includeMetadataChanges:!0,Ta:!0});return Kp(e,s)}(await Gf(e),e.asyncQueue,t,r,n))),n.promise}function Kf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Zf=new Map;function Yf(e,t,r){if(!r)throw new Ks(qs.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Xf(e){if(!xo.isDocumentKey(e))throw new Ks(qs.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Qf(e){if(xo.isDocumentKey(e))throw new Ks(qs.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Jf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Hs()}function em(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ks(qs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Jf(e);throw new Ks(qs.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}const tm="firestore.googleapis.com",rm=!0;class nm{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ks(qs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tm,this.ssl=rm}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:rm;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=eh;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ih)throw new Ks(qs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new Ks(qs.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kf(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ks(qs.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ks(qs.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ks(qs.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class im{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ks(qs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ks(qs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nm(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Xs;switch(e.type){case"firstParty":return new to(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ks(qs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zf.get(e);t&&(Bs("ComponentProvider","Removing Datastore"),Zf.delete(e),t.terminate())}(this),Promise.resolve()}}class am{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new am(this.firestore,e,this._query)}}class sm{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new om(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sm(this.firestore,e,this._key)}}class om extends am{constructor(e,t,r){super(e,t,Rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sm(this.firestore,null,new xo(e))}withConverter(e){return new om(this.firestore,e,this._path)}}function lm(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(e=Gi(e),Yf("collection","path",t),e instanceof im){const r=mo.fromString(t,...n);return Qf(r),new om(e,null,r)}{if(!(e instanceof sm||e instanceof om))throw new Ks(qs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(mo.fromString(t,...n));return Qf(r),new om(e.firestore,null,r)}}function cm(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(e=Gi(e),1===arguments.length&&(t=ao.newId()),Yf("doc","path",t),e instanceof im){const r=mo.fromString(t,...n);return Xf(r),new sm(e,null,new xo(r))}{if(!(e instanceof sm||e instanceof om))throw new Ks(qs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(mo.fromString(t,...n));return Xf(r),new sm(e.firestore,e instanceof om?e.converter:null,new xo(r))}}const um="AsyncQueue";class dm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new tp(this,"async_queue_retry"),this.bu=()=>{const e=Jh();e&&Bs(um,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.Su=e;const t=Jh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Jh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Zs;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(W){if(!Po(W))throw W;Bs(um,"Operation failed with retryable error: "+W)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.Su.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw zs("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const n=Bp.createAndSchedule(this,e,t,r,(e=>this.Fu(e)));return this.fu.push(n),n}Du(){this.gu&&Hs()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.Su,await e}while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class hm extends im{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new dm,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dm(e),this._firestoreClient=void 0,await e}}}function pm(e){if(e._terminated)throw new Ks(qs.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||fm(e),e._firestoreClient}function fm(e){var t,r,n;const i=e._freezeSettings(),a=function(e,t,r,n){return new Ml(e,t,r,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,Kf(n.experimentalLongPollingOptions),n.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(r=i.localCache)||void 0===r?void 0:r._offlineComponentProvider)&&(null===(n=i.localCache)||void 0===n?void 0:n._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Ff(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class mm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class gm{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class vm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vm(bl.fromBase64String(e))}catch(e){throw new Ks(qs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vm(bl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xm{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(let n=0;n<t.length;++n)if(0===t[n].length)throw new Ks(qs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ym{constructor(e){this._methodName=e}}class bm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ks(qs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ks(qs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return so(this._lat,e._lat)||so(this._long,e._long)}}class wm{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}(this._values,e._values)}}const _m=/^__.*__$/;class km{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Lu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ru(e,this.data,t,this.fieldTransforms)}}class Sm{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Lu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hs()}}class Em{constructor(e,t,r,n,i,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Em(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.ku({path:r,Qu:!1});return n.$u(e),n}Ku(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.ku({path:r,Qu:!1});return n.Bu(),n}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return zm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(jm(this.Lu)&&_m.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Cm{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ep(e)}ju(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Em({Lu:e,methodName:t,zu:r,path:vo.emptyPath(),Qu:!1,Gu:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nm(e){const t=e._freezeSettings(),r=ep(e._databaseId);return new Cm(e._databaseId,!!t.ignoreUndefinedProperties,r)}function Tm(e,t,r,n,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.ju(a.merge||a.mergeFields?2:0,t,r,i);Lm("Data must be an object, but it was:",s,n);const o=Dm(n,s);let l,c;if(a.merge)l=new xl(s.fieldMask),c=s.fieldTransforms;else if(a.mergeFields){const e=[];for(const n of a.mergeFields){const i=Fm(t,n,r);if(!s.contains(i))throw new Ks(qs.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Um(e,i)||e.push(i)}l=new xl(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new km(new ic(o),l,c)}class Pm extends ym{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pm}}function Am(e,t,r,n){const i=e.ju(1,t,r);Lm("Data must be an object, but it was:",i,n);const a=[],s=ic.empty();ul(n,((e,n)=>{const o=Bm(t,e,r);n=Gi(n);const l=i.Ku(o);if(n instanceof Pm)a.push(o);else{const e=Om(n,l);null!=e&&(a.push(o),s.set(o,e))}}));const o=new xl(a);return new Sm(s,o,i.fieldTransforms)}function Mm(e,t,r,n,i,a){const s=e.ju(1,t,r),o=[Fm(t,n,r)],l=[i];if(a.length%2!=0)throw new Ks(qs.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(Fm(t,a[h])),l.push(a[h+1]);const c=[],u=ic.empty();for(let h=o.length-1;h>=0;--h)if(!Um(c,o[h])){const e=o[h];let t=l[h];t=Gi(t);const r=s.Ku(e);if(t instanceof Pm)c.push(e);else{const n=Om(t,r);null!=n&&(c.push(e),u.set(e,n))}}const d=new xl(c);return new Sm(u,d,s.fieldTransforms)}function Im(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Om(r,e.ju(n?4:3,t))}function Om(e,t){if(Rm(e=Gi(e)))return Lm("Unsupported field value:",t,e),Dm(e,t);if(e instanceof ym)return function(e,t){if(!jm(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const r=[];let n=0;for(const i of e){let e=Om(i,t.Uu(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Gi(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=uo.fromDate(e);return{timestampValue:yd(t.serializer,r)}}if(e instanceof uo){const r=new uo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:yd(t.serializer,r)}}if(e instanceof bm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vm)return{bytesValue:bd(t.serializer,e._byteString)};if(e instanceof sm){const r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.Wu(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:kd(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof wm)return function(e,t){return{mapValue:{fields:{[Dl]:{stringValue:Fl},[$l]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return hu(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${Jf(e)}`)}(e,t)}function Dm(e,t){const r={};return hl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ul(e,((e,n)=>{const i=Om(n,t.qu(e));null!=i&&(r[e]=i)})),{mapValue:{fields:r}}}function Rm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof uo||e instanceof bm||e instanceof vm||e instanceof sm||e instanceof ym||e instanceof wm)}function Lm(e,t,r){if(!Rm(r)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(r)){const n=Jf(r);throw"an object"===n?t.Wu(e+" a custom object"):t.Wu(e+" "+n)}}function Fm(e,t,r){if((t=Gi(t))instanceof xm)return t._internalPath;if("string"==typeof t)return Bm(e,t);throw zm("Field path arguments must be of type string or ",e,!1,void 0,r)}const $m=new RegExp("[~\\*/\\[\\]]");function Bm(e,t,r){if(t.search($m)>=0)throw zm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new xm(...t.split("."))._internalPath}catch(n){throw zm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function zm(e,t,r,n,i){const a=n&&!n.isEmpty(),s=void 0!==i;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new Ks(qs.INVALID_ARGUMENT,o+e+l)}function Um(e,t){return e.some((e=>e.isEqual(t)))}class Vm{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new sm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Gm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Hm extends Vm{data(){return super.data()}}function Gm(e,t){return"string"==typeof t?Bm(e,t):t instanceof xm?t._internalPath:t._delegate._internalPath}function Wm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ks(qs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qm{}class Km extends qm{}function Zm(e,t){let r=[];for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];t instanceof qm&&r.push(t),r=r.concat(i),function(e){const t=e.filter((e=>e instanceof Qm)).length,r=e.filter((e=>e instanceof Ym)).length;if(t>1||t>0&&r>0)throw new Ks(qs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class Ym extends Km{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ym(e,t,r)}_apply(e){const t=this._parse(e);return ng(e._query,t),new am(e.firestore,e.converter,Vc(e._query,t))}_parse(e){const t=Nm(e.firestore),r=function(e,t,r,n,i,a,s){let o;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ks(qs.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if("in"===a||"not-in"===a){rg(s,a);const t=[];for(const r of s)t.push(tg(n,e,r));o={arrayValue:{values:t}}}else o=tg(n,e,s)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||rg(s,a),o=Im(r,t,s,"in"===a||"not-in"===a);return pc.create(i,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return r}}function Xm(e,t,r){const n=t,i=Gm("where",e);return Ym._create(i,n,r)}class Qm extends qm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qm(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:fc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let r=e;const n=t.getFlattenedFilters();for(const i of n)ng(r,i),r=Vc(r,i)}(e._query,t),new am(e.firestore,e.converter,Vc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Jm extends Km{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Jm(e,t)}_apply(e){const t=function(e,t,r){if(null!==e.startAt)throw new Ks(qs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ks(qs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uc(t,r)}(e._query,this._field,this._direction);return new am(e.firestore,e.converter,function(e,t){const r=e.explicitOrderBy.concat([t]);return new Oc(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function eg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",r=Gm("orderBy",e);return Jm._create(r,t)}function tg(e,t,r){if("string"==typeof(r=Gi(r))){if(""===r)throw new Ks(qs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fc(t)&&-1!==r.indexOf("/"))throw new Ks(qs.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(mo.fromString(r));if(!xo.isDocumentKey(n))throw new Ks(qs.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Zl(e,new xo(n))}if(r instanceof sm)return Zl(e,r._key);throw new Ks(qs.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(r)}.`)}function rg(e,t){if(!Array.isArray(e)||0===e.length)throw new Ks(qs.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ng(e,t){const r=function(e,t){for(const r of e)for(const e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw r===t.op?new Ks(qs.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ks(qs.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class ig{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Hs()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const r={};return ul(e,((e,n)=>{r[e]=this.convertValue(n,t)})),r}convertVectorValue(e){var t,r,n;const i=null===(n=null===(r=null===(t=e.fields)||void 0===t?void 0:t[$l].arrayValue)||void 0===r?void 0:r.values)||void 0===n?void 0:n.map((e=>kl(e.doubleValue)));return new wm(i)}convertGeoPoint(e){return new bm(kl(e.latitude),kl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Pl(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Al(e));default:return null}}convertTimestamp(e){const t=_l(e);return new uo(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mo.fromString(e);Gs(Wd(r));const n=new Ol(r.get(1),r.get(3)),i=new xo(r.popFirst(5));return n.isEqual(t)||zs(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ag(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class sg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class og extends Vm{constructor(e,t,r,n,i,a){super(e,t,r,n,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new lg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const r=this._document.data.field(Gm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lg extends og{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class cg{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new sg(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new lg(this._firestore,this._userDataWriter,r.key,r,new sg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ks(qs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((r=>{const n=new lg(e._firestore,e._userDataWriter,r.doc.key,r.doc,new sg(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}}))}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const n=new lg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new sg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(r=r.add(t.doc),a=r.indexOf(t.doc.key)),{type:ug(t.type),doc:n,oldIndex:i,newIndex:a}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ug(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hs()}}function dg(e){e=em(e,sm);const t=em(e.firestore,hm);return Wf(pm(t),e._key).then((r=>yg(t,e,r)))}class hg extends ig{constructor(e){super(),this.firestore=e}convertBytes(e){return new vm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sm(this.firestore,null,t)}}function pg(e){e=em(e,am);const t=em(e.firestore,hm),r=pm(t),n=new hg(t);return Wm(e._query),qf(r,e._query).then((r=>new cg(t,n,e,r)))}function fg(e,t,r){e=em(e,sm);const n=em(e.firestore,hm),i=ag(e.converter,t,r);return xg(n,[Tm(Nm(n),"setDoc",e._key,i,null!==e.converter,r).toMutation(e._key,Nu.none())])}function mg(e,t,r){e=em(e,sm);const n=em(e.firestore,hm),i=Nm(n);let a;for(var s=arguments.length,o=new Array(s>3?s-3:0),l=3;l<s;l++)o[l-3]=arguments[l];return a="string"==typeof(t=Gi(t))||t instanceof xm?Mm(i,"updateDoc",e._key,t,r,o):Am(i,"updateDoc",e._key,t),xg(n,[a.toMutation(e._key,Nu.exists(!0))])}function gg(e){return xg(em(e.firestore,hm),[new zu(e._key,Nu.none())])}function vg(e,t){const r=em(e.firestore,hm),n=cm(e),i=ag(e.converter,t);return xg(r,[Tm(Nm(e.firestore),"addDoc",n._key,i,null!==e.converter,{}).toMutation(n._key,Nu.exists(!1))]).then((()=>n))}function xg(e,t){return function(e,t){const r=new Zs;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,r){const n=Mf(e);try{const e=await function(e,t){const r=Ws(e),n=uo.now(),i=t.reduce(((e,t)=>e.add(t.key)),cu());let a,s;return r.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=eu(),l=cu();return r.ds.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>r.localDocuments.getOverlayedDocuments(e,o))).next((i=>{a=i;const s=[];for(const e of t){const t=Ou(e,a.get(e.key).overlayedDocument);null!=t&&s.push(new Lu(e.key,t,ac(t.value.mapValue),Nu.exists(!0)))}return r.mutationQueue.addMutationBatch(e,n,s,t)})).next((t=>{s=t;const n=t.applyToLocalDocumentSet(a,l);return r.documentOverlayCache.saveOverlays(e,t.batchId,n)}))})).then((()=>({batchId:s.batchId,changes:nu(a)})))}(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),function(e,t,r){let n=e.Wa[e.currentUser.toKey()];n||(n=new pl(so)),n=n.insert(t,r),e.Wa[e.currentUser.toKey()]=n}(n,e.batchId,r),await Nf(n,e.changes),await Cp(n.remoteStore)}catch(e){const t=zp(e,"Failed to persist write");r.reject(t)}}(await Vf(e),t,r))),r.promise}(pm(e),t)}function yg(e,t,r){const n=r.docs.get(t._key),i=new hg(e);return new og(e,i,t._key,n,new sg(r.hasPendingWrites,r.fromCache),t.converter)}function bg(e){return function(e,t){const r=em(e.firestore,hm),n=pm(r),i=dl(t,((e,t)=>new Wu(t,e.aggregateType,e._internalFieldPath)));return function(e,t,r){const n=new Zs;return e.asyncQueue.enqueueAndForget((async()=>{try{const i=await Hf(e);n.resolve(async function(e,t,r){var n;const i=Ws(e),{request:a,Pt:s,parent:o}=Rd(i.serializer,zc(t),r);i.connection.fo||delete a.parent;const l=(await i.Co("RunAggregationQuery",i.serializer.databaseId,o,a,1)).filter((e=>!!e.result));Gs(1===l.length);const c=null===(n=l[0].result)||void 0===n?void 0:n.aggregateFields;return Object.keys(c).reduce(((e,t)=>(e[s[t]]=c[t],e)),{})}(i,t,r))}catch(e){n.reject(e)}})),n.promise}(n,e._query,i).then((t=>function(e,t,r){const n=new hg(e);return new gm(t,n,r)}(r,e,t)))}(e,{count:new mm("count")})}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ls=e}(ss),ts(new Wi("firestore",((e,r)=>{let{instanceIdentifier:n,options:i}=r;const a=e.getProvider("app").getImmediate(),s=new hm(new Js(e.getProvider("auth-internal")),new no(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ks(qs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(e.options.projectId,t)}(a,n),a);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),cs(Os,Ds,e),cs(Os,Ds,"esm2017")}();const wg=e=>{const t=jg(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),_g(r,t)||Sg(e)},getConflictingClassGroupIds:(e,t)=>{const i=r[e]||[];return t&&n[e]?[...i,...n[e]]:i}}},_g=(e,t)=>{if(0===e.length)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?_g(e.slice(1),n):void 0;if(i)return i;if(0===t.validators.length)return;const a=e.join("-");return t.validators.find((e=>{let{validator:t}=e;return t(a)}))?.classGroupId},kg=/^\[(.+)\]$/,Sg=e=>{if(kg.test(e)){const t=kg.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},jg=e=>{const{theme:t,classGroups:r}=e,n={nextPart:new Map,validators:[]};for(const i in r)Eg(r[i],n,i,t);return n},Eg=(e,t,r,n)=>{e.forEach((e=>{if("string"!==typeof e){if("function"===typeof e)return Ng(e)?void Eg(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach((e=>{let[i,a]=e;Eg(a,Cg(t,i),r,n)}))}else{(""===e?t:Cg(t,e)).classGroupId=r}}))},Cg=(e,t)=>{let r=e;return t.split("-").forEach((e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)})),r},Ng=e=>e.isThemeGetter,Tg=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(i,a)=>{r.set(i,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(i(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):i(e,t)}}},Pg=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=e=>{const t=[];let r,n=0,i=0,a=0;for(let l=0;l<e.length;l++){let s=e[l];if(0===n&&0===i){if(":"===s){t.push(e.slice(a,l)),a=l+1;continue}if("/"===s){r=l;continue}}"["===s?n++:"]"===s?n--:"("===s?i++:")"===s&&i--}const s=0===t.length?e:e.substring(a),o=Ag(s);return{modifiers:t,hasImportantModifier:o!==s,baseClassName:o,maybePostfixModifierPosition:r&&r>a?r-a:void 0}};if(t){const e=t+":",r=n;n=t=>t.startsWith(e)?r(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(r){const e=n;n=t=>r({className:t,parseClassName:e})}return n},Ag=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,Mg=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map((e=>[e,!0])));return e=>{if(e.length<=1)return e;const r=[];let n=[];return e.forEach((e=>{"["===e[0]||t[e]?(r.push(...n.sort(),e),n=[]):n.push(e)})),r.push(...n.sort()),r}},Ig=/\s+/;function Og(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Dg(e))&&(n&&(n+=" "),n+=t);return n}const Dg=e=>{if("string"===typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Dg(e[n]))&&(r&&(r+=" "),r+=t);return r};function Rg(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i,a,s,o=function(t){const n=r.reduce(((e,t)=>t(e)),e());return i=(e=>({cache:Tg(e.cacheSize),parseClassName:Pg(e),sortModifiers:Mg(e),...wg(e)}))(n),a=i.cache.get,s=i.cache.set,o=l,l(t)};function l(e){const t=a(e);if(t)return t;const r=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:a}=t,s=[],o=e.trim().split(Ig);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=r(e);if(t){l=e+(l.length>0?" "+l:l);continue}let f=!!p,m=n(f?h.substring(0,p):h);if(!m){if(!f){l=e+(l.length>0?" "+l:l);continue}if(m=n(h),!m){l=e+(l.length>0?" "+l:l);continue}f=!1}const g=a(u).join(":"),v=d?g+"!":g,x=v+m;if(s.includes(x))continue;s.push(x);const y=i(m,f);for(let r=0;r<y.length;++r){const e=y[r];s.push(v+e)}l=e+(l.length>0?" "+l:l)}return l})(e,i);return s(e,r),r}return function(){return o(Og.apply(null,arguments))}}const Lg=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Fg=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,$g=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Bg=/^\d+\/\d+$/,zg=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ug=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vg=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Hg=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Gg=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wg=e=>Bg.test(e),qg=e=>!!e&&!Number.isNaN(Number(e)),Kg=e=>!!e&&Number.isInteger(Number(e)),Zg=e=>e.endsWith("%")&&qg(e.slice(0,-1)),Yg=e=>zg.test(e),Xg=()=>!0,Qg=e=>Ug.test(e)&&!Vg.test(e),Jg=()=>!1,ev=e=>Hg.test(e),tv=e=>Gg.test(e),rv=e=>!iv(e)&&!uv(e),nv=e=>vv(e,wv,Jg),iv=e=>Fg.test(e),av=e=>vv(e,_v,Qg),sv=e=>vv(e,kv,qg),ov=e=>vv(e,yv,Jg),lv=e=>vv(e,bv,tv),cv=e=>vv(e,jv,ev),uv=e=>$g.test(e),dv=e=>xv(e,_v),hv=e=>xv(e,Sv),pv=e=>xv(e,yv),fv=e=>xv(e,wv),mv=e=>xv(e,bv),gv=e=>xv(e,jv,!0),vv=(e,t,r)=>{const n=Fg.exec(e);return!!n&&(n[1]?t(n[1]):r(n[2]))},xv=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=$g.exec(e);return!!n&&(n[1]?t(n[1]):r)},yv=e=>"position"===e||"percentage"===e,bv=e=>"image"===e||"url"===e,wv=e=>"length"===e||"size"===e||"bg-size"===e,_v=e=>"length"===e,kv=e=>"number"===e,Sv=e=>"family-name"===e,jv=e=>"shadow"===e,Ev=(Symbol.toStringTag,()=>{const e=Lg("color"),t=Lg("font"),r=Lg("text"),n=Lg("font-weight"),i=Lg("tracking"),a=Lg("leading"),s=Lg("breakpoint"),o=Lg("container"),l=Lg("spacing"),c=Lg("radius"),u=Lg("shadow"),d=Lg("inset-shadow"),h=Lg("text-shadow"),p=Lg("drop-shadow"),f=Lg("blur"),m=Lg("perspective"),g=Lg("aspect"),v=Lg("ease"),x=Lg("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",uv,iv],b=()=>[uv,iv,l],w=()=>[Wg,"full","auto",...b()],_=()=>[Kg,"none","subgrid",uv,iv],k=()=>["auto",{span:["full",Kg,uv,iv]},Kg,uv,iv],S=()=>[Kg,"auto",uv,iv],j=()=>["auto","min","max","fr",uv,iv],E=()=>["auto",...b()],C=()=>[Wg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],N=()=>[e,uv,iv],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",pv,ov,{position:[uv,iv]}],P=()=>["auto","cover","contain",fv,nv,{size:[uv,iv]}],A=()=>[Zg,dv,av],M=()=>["","none","full",c,uv,iv],I=()=>["",qg,dv,av],O=()=>[qg,Zg,pv,ov],D=()=>["","none",f,uv,iv],R=()=>["none",qg,uv,iv],L=()=>["none",qg,uv,iv],F=()=>[qg,uv,iv],$=()=>[Wg,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yg],breakpoint:[Yg],color:[Xg],container:[Yg],"drop-shadow":[Yg],ease:["in","out","in-out"],font:[rv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yg],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yg],shadow:[Yg],spacing:["px",qg],text:[Yg],"text-shadow":[Yg],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Wg,iv,uv,g]}],container:["container"],columns:[{columns:[qg,iv,uv,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[Kg,"auto",uv,iv]}],basis:[{basis:[Wg,"full","auto",o,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qg,Wg,"auto","initial","none",iv]}],grow:[{grow:["",qg,uv,iv]}],shrink:[{shrink:["",qg,uv,iv]}],order:[{order:[Kg,"first","last","none",uv,iv]}],"grid-cols":[{"grid-cols":_()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":_()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:E()}],mx:[{mx:E()}],my:[{my:E()}],ms:[{ms:E()}],me:[{me:E()}],mt:[{mt:E()}],mr:[{mr:E()}],mb:[{mb:E()}],ml:[{ml:E()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:C()}],w:[{w:[o,"screen",...C()]}],"min-w":[{"min-w":[o,"screen","none",...C()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...C()]}],h:[{h:["screen",...C()]}],"min-h":[{"min-h":["screen","none",...C()]}],"max-h":[{"max-h":["screen",...C()]}],"font-size":[{text:["base",r,dv,av]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,uv,sv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Zg,iv]}],"font-family":[{font:[hv,iv,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,uv,iv]}],"line-clamp":[{"line-clamp":[qg,"none",uv,sv]}],leading:[{leading:[a,...b()]}],"list-image":[{"list-image":["none",uv,iv]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",uv,iv]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:N()}],"text-color":[{text:N()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[qg,"from-font","auto",uv,av]}],"text-decoration-color":[{decoration:N()}],"underline-offset":[{"underline-offset":[qg,"auto",uv,iv]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",uv,iv]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",uv,iv]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Kg,uv,iv],radial:["",uv,iv],conic:[Kg,uv,iv]},mv,lv]}],"bg-color":[{bg:N()}],"gradient-from-pos":[{from:A()}],"gradient-via-pos":[{via:A()}],"gradient-to-pos":[{to:A()}],"gradient-from":[{from:N()}],"gradient-via":[{via:N()}],"gradient-to":[{to:N()}],rounded:[{rounded:M()}],"rounded-s":[{"rounded-s":M()}],"rounded-e":[{"rounded-e":M()}],"rounded-t":[{"rounded-t":M()}],"rounded-r":[{"rounded-r":M()}],"rounded-b":[{"rounded-b":M()}],"rounded-l":[{"rounded-l":M()}],"rounded-ss":[{"rounded-ss":M()}],"rounded-se":[{"rounded-se":M()}],"rounded-ee":[{"rounded-ee":M()}],"rounded-es":[{"rounded-es":M()}],"rounded-tl":[{"rounded-tl":M()}],"rounded-tr":[{"rounded-tr":M()}],"rounded-br":[{"rounded-br":M()}],"rounded-bl":[{"rounded-bl":M()}],"border-w":[{border:I()}],"border-w-x":[{"border-x":I()}],"border-w-y":[{"border-y":I()}],"border-w-s":[{"border-s":I()}],"border-w-e":[{"border-e":I()}],"border-w-t":[{"border-t":I()}],"border-w-r":[{"border-r":I()}],"border-w-b":[{"border-b":I()}],"border-w-l":[{"border-l":I()}],"divide-x":[{"divide-x":I()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":I()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:N()}],"border-color-x":[{"border-x":N()}],"border-color-y":[{"border-y":N()}],"border-color-s":[{"border-s":N()}],"border-color-e":[{"border-e":N()}],"border-color-t":[{"border-t":N()}],"border-color-r":[{"border-r":N()}],"border-color-b":[{"border-b":N()}],"border-color-l":[{"border-l":N()}],"divide-color":[{divide:N()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[qg,uv,iv]}],"outline-w":[{outline:["",qg,dv,av]}],"outline-color":[{outline:N()}],shadow:[{shadow:["","none",u,gv,cv]}],"shadow-color":[{shadow:N()}],"inset-shadow":[{"inset-shadow":["none",d,gv,cv]}],"inset-shadow-color":[{"inset-shadow":N()}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:N()}],"ring-offset-w":[{"ring-offset":[qg,av]}],"ring-offset-color":[{"ring-offset":N()}],"inset-ring-w":[{"inset-ring":I()}],"inset-ring-color":[{"inset-ring":N()}],"text-shadow":[{"text-shadow":["none",h,gv,cv]}],"text-shadow-color":[{"text-shadow":N()}],opacity:[{opacity:[qg,uv,iv]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qg]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":N()}],"mask-image-linear-to-color":[{"mask-linear-to":N()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":N()}],"mask-image-t-to-color":[{"mask-t-to":N()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":N()}],"mask-image-r-to-color":[{"mask-r-to":N()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":N()}],"mask-image-b-to-color":[{"mask-b-to":N()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":N()}],"mask-image-l-to-color":[{"mask-l-to":N()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":N()}],"mask-image-x-to-color":[{"mask-x-to":N()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":N()}],"mask-image-y-to-color":[{"mask-y-to":N()}],"mask-image-radial":[{"mask-radial":[uv,iv]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":N()}],"mask-image-radial-to-color":[{"mask-radial-to":N()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[qg]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":N()}],"mask-image-conic-to-color":[{"mask-conic-to":N()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",uv,iv]}],filter:[{filter:["","none",uv,iv]}],blur:[{blur:D()}],brightness:[{brightness:[qg,uv,iv]}],contrast:[{contrast:[qg,uv,iv]}],"drop-shadow":[{"drop-shadow":["","none",p,gv,cv]}],"drop-shadow-color":[{"drop-shadow":N()}],grayscale:[{grayscale:["",qg,uv,iv]}],"hue-rotate":[{"hue-rotate":[qg,uv,iv]}],invert:[{invert:["",qg,uv,iv]}],saturate:[{saturate:[qg,uv,iv]}],sepia:[{sepia:["",qg,uv,iv]}],"backdrop-filter":[{"backdrop-filter":["","none",uv,iv]}],"backdrop-blur":[{"backdrop-blur":D()}],"backdrop-brightness":[{"backdrop-brightness":[qg,uv,iv]}],"backdrop-contrast":[{"backdrop-contrast":[qg,uv,iv]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qg,uv,iv]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qg,uv,iv]}],"backdrop-invert":[{"backdrop-invert":["",qg,uv,iv]}],"backdrop-opacity":[{"backdrop-opacity":[qg,uv,iv]}],"backdrop-saturate":[{"backdrop-saturate":[qg,uv,iv]}],"backdrop-sepia":[{"backdrop-sepia":["",qg,uv,iv]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",uv,iv]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qg,"initial",uv,iv]}],ease:[{ease:["linear","initial",v,uv,iv]}],delay:[{delay:[qg,uv,iv]}],animate:[{animate:["none",x,uv,iv]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,uv,iv]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:R()}],"rotate-x":[{"rotate-x":R()}],"rotate-y":[{"rotate-y":R()}],"rotate-z":[{"rotate-z":R()}],scale:[{scale:L()}],"scale-x":[{"scale-x":L()}],"scale-y":[{"scale-y":L()}],"scale-z":[{"scale-z":L()}],"scale-3d":["scale-3d"],skew:[{skew:F()}],"skew-x":[{"skew-x":F()}],"skew-y":[{"skew-y":F()}],transform:[{transform:[uv,iv,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$()}],"translate-x":[{"translate-x":$()}],"translate-y":[{"translate-y":$()}],"translate-z":[{"translate-z":$()}],"translate-none":["translate-none"],accent:[{accent:N()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:N()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",uv,iv]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",uv,iv]}],fill:[{fill:["none",...N()]}],"stroke-w":[{stroke:[qg,dv,av,sv]}],stroke:[{stroke:["none",...N()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),Cv=Rg(Ev);cs("firebase","11.4.0","app");var Nv=function(){return Nv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Nv.apply(this,arguments)};function Tv(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}Object.create;function Pv(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function Av(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mv=Av,Iv=new Ri("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ov=new ra("@firebase/auth");function Dv(e){if(Ov.logLevel<=Xi.ERROR){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Ov.error(`Auth (${ss}): ${e}`,...r)}}function Rv(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Bv(e,...r)}function Lv(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Bv(e,...r)}function Fv(e,t,r){const n=Object.assign(Object.assign({},Mv()),{[t]:r});return new Ri("auth","Firebase",n).create(t,{appName:e.name})}function $v(e){return Fv(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bv(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("string"!==typeof e){const t=r[0],n=[...r.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(t,...n)}return Iv.create(e,...r)}function zv(e,t){if(!e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];throw Bv(t,...n)}}function Uv(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Dv(t),new Error(t)}function Vv(e,t){e||Uv(t)}function Hv(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Gv(){return"http:"===Wv()||"https:"===Wv()}function Wv(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function qv(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Gv()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Kv{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vv(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mi())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return qv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zv(e,t){Vv(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}class Yv{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Uv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Uv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Uv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Qv=new Kv(3e4,6e4);function Jv(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ex(e,t,r,n){return tx(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},a={};n&&("GET"===t?a=n:i={body:JSON.stringify(n)});const s=Bi(Object.assign({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Yv.fetch()(nx(e,e.config.apiHost,r,s),l)}))}async function tx(e,t,r){e._canInitEmulator=!1;const n=Object.assign(Object.assign({},Xv),t);try{const t=new ax(e),i=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw sx(e,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const t=i.ok?a.errorMessage:a.error.message,[r,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw sx(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===r)throw sx(e,"email-already-in-use",a);if("USER_DISABLED"===r)throw sx(e,"user-disabled",a);const o=n[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Fv(e,o,s);Rv(e,o)}}catch(W){if(W instanceof Di)throw W;Rv(e,"network-request-failed",{message:String(W)})}}async function rx(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await ex(e,t,r,n,i);return"mfaPendingCredential"in a&&Rv(e,"multi-factor-auth-required",{_serverResponse:a}),a}function nx(e,t,r,n){const i=`${t}${r}?${n}`;return e.config.emulator?Zv(e.config,i):`${e.config.apiScheme}://${i}`}function ix(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ax{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Lv(this.auth,"network-request-failed"))),Qv.get())}))}}function sx(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Lv(e,t,n);return i.customData._tokenResponse=r,i}function ox(e){return void 0!==e&&void 0!==e.enterprise}class lx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ix(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cx(e,t){return ex(e,"GET","/v2/recaptchaConfig",Jv(e,t))}async function ux(e,t){return ex(e,"POST","/v1/accounts:lookup",t)}function dx(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(W){}}function hx(e){return 1e3*Number(e)}function px(e){const[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return Dv("JWT malformed, contained fewer than 3 sections"),null;try{const e=ki(r);return e?JSON.parse(e):(Dv("Failed to decode base64 JWT payload"),null)}catch(W){return Dv("Caught error parsing JWT payload as JSON",null===W||void 0===W?void 0:W.toString()),null}}function fx(e){const t=px(e);return zv(t,"internal-error"),zv("undefined"!==typeof t.exp,"internal-error"),zv("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function mx(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(W){throw W instanceof Di&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(W)&&e.auth.currentUser===e&&await e.auth.signOut(),W}}class gx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(W){return void("auth/network-request-failed"===(null===W||void 0===W?void 0:W.code)&&this.schedule(!0))}this.schedule()}}class vx{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dx(this.lastLoginAt),this.creationTime=dx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xx(e){var t;const r=e.auth,n=await e.getIdToken(),i=await mx(e,ux(r,{idToken:n}));zv(null===i||void 0===i?void 0:i.users.length,r,"internal-error");const a=i.users[0];e._notifyReloadListener(a);const s=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?yx(a.providerUserInfo):[],o=function(e,t){const r=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...r,...t]}(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new vx(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function yx(e){return e.map((e=>{var{providerId:t}=e,r=Tv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}}))}class bx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){zv(e.idToken,"internal-error"),zv("undefined"!==typeof e.idToken,"internal-error"),zv("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):fx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){zv(0!==e.length,"internal-error");const t=fx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(zv(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:n,expiresIn:i}=await async function(e,t){const r=await tx(e,{},(async()=>{const r=Bi({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:i}=e.config,a=nx(e,n,"/v1/token",`key=${i}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Yv.fetch()(a,{method:"POST",headers:s,body:r})}));return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}(e,t);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:n,expirationTime:i}=t,a=new bx;return r&&(zv("string"===typeof r,"internal-error",{appName:e}),a.refreshToken=r),n&&(zv("string"===typeof n,"internal-error",{appName:e}),a.accessToken=n),i&&(zv("number"===typeof i,"internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bx,this.toJSON())}_performRefresh(){return Uv("not implemented")}}function wx(e,t){zv("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class _x{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,i=Tv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await mx(this,this.stsTokenManager.getToken(this.auth,e));return zv(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=Gi(e),n=await r.getIdToken(t),i=px(n);zv(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:dx(hx(i.auth_time)),issuedAtTime:dx(hx(i.iat)),expirationTime:dx(hx(i.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Gi(e);await xx(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(zv(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _x(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){zv(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xx(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ns(this.auth.app))return Promise.reject($v(this.auth));const e=await this.getIdToken();return await mx(this,async function(e,t){return ex(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,i,a,s,o,l,c;const u=null!==(r=t.displayName)&&void 0!==r?r:void 0,d=null!==(n=t.email)&&void 0!==n?n:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:x,emailVerified:y,isAnonymous:b,providerData:w,stsTokenManager:_}=t;zv(x&&_,e,"internal-error");const k=bx.fromJSON(this.name,_);zv("string"===typeof x,e,"internal-error"),wx(u,e.name),wx(d,e.name),zv("boolean"===typeof y,e,"internal-error"),zv("boolean"===typeof b,e,"internal-error"),wx(h,e.name),wx(p,e.name),wx(f,e.name),wx(m,e.name),wx(g,e.name),wx(v,e.name);const S=new _x({uid:x,auth:e,email:d,emailVerified:y,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:k,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(S.providerData=w.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=new bx;n.updateFromServerResponse(t);const i=new _x({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await xx(i),i}static async _fromGetAccountInfoResponse(e,t,r){const n=t.users[0];zv(void 0!==n.localId,"internal-error");const i=void 0!==n.providerUserInfo?yx(n.providerUserInfo):[],a=!(n.email&&n.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new bx;s.updateFromIdToken(r);const o=new _x({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:a}),l={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new vx(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const kx=new Map;function Sx(e){Vv(e instanceof Function,"Expected a class definition");let t=kx.get(e);return t?(Vv(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,kx.set(e,t),t)}class jx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jx.type="NONE";const Ex=jx;function Cx(e,t,r){return`firebase:${e}:${t}:${r}`}class Nx{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:n,name:i}=this.auth;this.fullUserKey=Cx(this.userKey,n.apiKey,i),this.fullPersistenceKey=Cx("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_x._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Nx(Sx(Ex),e,r);const n=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=n[0]||Sx(Ex);const a=Cx(r,e.config.apiKey,e.name);let s=null;for(const l of t)try{const t=await l._get(a);if(t){const r=_x._fromJSON(e,t);l!==i&&(s=r),i=l;break}}catch(oT){}const o=n.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],s&&await i._set(a,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(a)}catch(oT){}}))),new Nx(i,e,r)):new Nx(i,e,r)}}function Tx(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ix(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Px(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Dx(t))return"Blackberry";if(Rx(t))return"Webos";if(Ax(t))return"Safari";if((t.includes("chrome/")||Mx(t))&&!t.includes("edge/"))return"Chrome";if(Ox(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(t);if(2===(null===r||void 0===r?void 0:r.length))return r[1]}return"Other"}function Px(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi();return/firefox\//i.test(e)}function Ax(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi();return/crios\//i.test(e)}function Ix(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi();return/iemobile/i.test(e)}function Ox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi();return/android/i.test(e)}function Dx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi();return/blackberry/i.test(e)}function Rx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi();return/webos/i.test(e)}function Lx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fx(){return function(){const e=Mi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function $x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi();return Lx(e)||Ox(e)||Rx(e)||Dx(e)||/windows phone/i.test(e)||Ix(e)}function Bx(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Tx(Mi());break;case"Worker":t=`${Tx(Mi())}-${e}`;break;default:t=e}const n=r.length?r.join(","):"FirebaseCore-web";return`${t}/JsCore/${ss}/${n}`}class zx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=t=>new Promise(((r,n)=>{try{r(e(t))}catch(W){n(W)}}));r.onAbort=t,this.queue.push(r);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(W){t.reverse();for(const r of t)try{r()}catch(Te){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===W||void 0===W?void 0:W.message})}}}class Ux{constructor(e){var t,r,n,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,n,i,a,s;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(r=o.meetsMaxPasswordLength)||void 0===r||r),o.isValid&&(o.isValid=null===(n=o.containsLowercaseLetter)||void 0===n||n),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(s=o.containsNonAlphanumericCharacter)||void 0===s||s),o}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Vx{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gx(this),this.idTokenSubscription=new Gx(this),this.beforeStateQueue=new zx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Iv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sx(t)),this._initializationPromise=this.queue((async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Nx.create(this,e),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(W){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(n=this.currentUser)||void 0===n?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ux(this,{idToken:e}),r=await _x._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ns(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null===n||void 0===n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==a||!(null===s||void 0===s?void 0:s.user)||(n=s.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(W){n=r,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(W)))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return zv(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(W){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xx(e)}catch(W){if("auth/network-request-failed"!==(null===W||void 0===W?void 0:W.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ns(this.app))return Promise.reject($v(this));const t=e?Gi(e):null;return t&&zv(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&zv(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ns(this.app)?Promise.reject($v(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ns(this.app)?Promise.reject($v(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Sx(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ex(e,"GET","/v2/passwordPolicy",Jv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ux(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ri("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged((()=>{r(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ex(e,"POST","/v2/accounts:revokeToken",Jv(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sx(e)||this._popupRedirectResolver;zv(t,this,"argument-error"),this.redirectPersistenceManager=await Nx.create(this,[Sx(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(zv(s,this,"internal-error"),s.then((()=>{a||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,r,n);return()=>{a=!0,i()}}{const r=e.addObserver(t);return()=>{a=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return zv(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ov.logLevel<=Xi.WARN){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Ov.warn(`Auth (${ss}): ${e}`,...r)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Hx(e){return Gi(e)}class Gx{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const r=new Vi(e,t);return r.subscribe.bind(r)}((e=>this.observer=e))}get next(){return zv(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Wx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qx(e){return Wx.loadJS(e)}function Kx(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Zx{constructor(){this.enterprise=new Yx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Yx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Xx="NO_RECAPTCHA";class Qx{constructor(e){this.type="recaptcha-enterprise",this.auth=Hx(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(t,r,n){const i=window.grecaptcha;ox(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{r(e)})).catch((()=>{r(Xx)}))})):n(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Zx).execute("siteKey",{action:"verify"})}return new Promise(((e,n)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,r)=>{cx(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((n=>{if(void 0!==n.recaptchaKey){const r=new lx(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{r(e)}))}))})(this.auth).then((i=>{if(!t&&ox(window.grecaptcha))r(i,e,n);else{if("undefined"===typeof window)return void n(new Error("RecaptchaVerifier is only supported in browser"));let t=Wx.recaptchaEnterpriseScript;0!==t.length&&(t+=i),qx(t).then((()=>{r(i,e,n)})).catch((e=>{n(e)}))}})).catch((e=>{n(e)}))}))}}async function Jx(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Qx(e);let s;if(i)s=Xx;else try{s=await a.verify(r)}catch(l){s=await a.verify(r,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===r||"mfaSmsSignIn"===r){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ey(e,t,r,n,i){var a,s;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Jx(e,t,r,"getOobCode"===r);return n(e,i)}return n(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Jx(e,t,r,"getOobCode"===r);return n(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("PHONE_PROVIDER")){const i=await Jx(e,t,r);return n(e,i).catch((async i=>{var a;if("AUDIT"===(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const i=await Jx(e,t,r,!1,!0);return n(e,i)}return Promise.reject(i)}))}{const i=await Jx(e,t,r,!1,!0);return n(e,i)}}return Promise.reject(i+" provider is not supported.")}async function ty(e){const t=Hx(e),r=await cx(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new lx(r);if(null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()){new Qx(t).verify()}}function ry(e,t,r){const n=Hx(e);zv(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const i=!!(null===r||void 0===r?void 0:r.disableWarnings),a=ny(t),{host:s,port:o}=function(e){const t=ny(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const e=i[1];return{host:e,port:iy(n.substr(e.length+1))}}{const[e,t]=n.split(":");return{host:e,port:iy(t)}}}(t),l={url:`${a}//${s}${null===o?"":`:${o}`}/`},c=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator)return zv(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),void zv(Fi(l,n.config.emulator)&&Fi(c,n.emulatorConfig),n,"emulator-config-failed");n.config.emulator=l,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ny(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function iy(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ay{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Uv("not implemented")}_getIdTokenResponse(e){return Uv("not implemented")}_linkToIdToken(e,t){return Uv("not implemented")}_getReauthenticationResolver(e){return Uv("not implemented")}}async function sy(e,t){return ex(e,"POST","/v1/accounts:signUp",t)}async function oy(e,t){return rx(e,"POST","/v1/accounts:signInWithPassword",Jv(e,t))}class ly extends ay{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new ly(e,t,"password")}static _fromEmailAndCode(e,t){return new ly(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ey(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",oy,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return rx(e,"POST","/v1/accounts:signInWithEmailLink",Jv(e,t))}(e,{email:this._email,oobCode:this._password});default:Rv(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ey(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sy,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return rx(e,"POST","/v1/accounts:signInWithEmailLink",Jv(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Rv(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function cy(e,t){return rx(e,"POST","/v1/accounts:signInWithIdp",Jv(e,t))}class uy extends ay{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uy(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rv("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,i=Tv(t,["providerId","signInMethod"]);if(!r||!n)return null;const a=new uy(r,n);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return cy(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,cy(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cy(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bi(t)}return e}}async function dy(e,t){return ex(e,"POST","/v1/accounts:sendVerificationCode",Jv(e,t))}const hy={USER_NOT_FOUND:"user-not-found"};class py extends ay{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new py({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new py({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return rx(e,"POST","/v1/accounts:signInWithPhoneNumber",Jv(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const r=await rx(e,"POST","/v1/accounts:signInWithPhoneNumber",Jv(e,t));if(r.temporaryProof)throw sx(e,"account-exists-with-different-credential",r);return r}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return rx(e,"POST","/v1/accounts:signInWithPhoneNumber",Jv(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),hy)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}=e;return r||t||n||i?new py({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}):null}}class fy{constructor(e){var t,r,n,i,a,s;const o=zi(Ui(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(r=o.oobCode)&&void 0!==r?r:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(n=o.mode)&&void 0!==n?n:null);zv(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=o.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(s=o.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=zi(Ui(e)).link,r=t?zi(Ui(t)).deep_link_id:null,n=zi(Ui(e)).deep_link_id;return(n?zi(Ui(n)).link:null)||n||r||t||e}(e);try{return new fy(t)}catch(oT){return null}}}class my{constructor(){this.providerId=my.PROVIDER_ID}static credential(e,t){return ly._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=fy.parseLink(t);return zv(r,"argument-error"),ly._fromEmailAndCode(e,r.code,r.tenantId)}}my.PROVIDER_ID="password",my.EMAIL_PASSWORD_SIGN_IN_METHOD="password",my.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class gy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vy extends gy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xy extends vy{constructor(){super("facebook.com")}static credential(e){return uy._fromParams({providerId:xy.PROVIDER_ID,signInMethod:xy.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xy.credentialFromTaggedObject(e)}static credentialFromError(e){return xy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return xy.credential(t.oauthAccessToken)}catch(oT){return null}}}xy.FACEBOOK_SIGN_IN_METHOD="facebook.com",xy.PROVIDER_ID="facebook.com";class yy extends vy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uy._fromParams({providerId:yy.PROVIDER_ID,signInMethod:yy.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return yy.credentialFromTaggedObject(e)}static credentialFromError(e){return yy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return yy.credential(r,n)}catch(oT){return null}}}yy.GOOGLE_SIGN_IN_METHOD="google.com",yy.PROVIDER_ID="google.com";class by extends vy{constructor(){super("github.com")}static credential(e){return uy._fromParams({providerId:by.PROVIDER_ID,signInMethod:by.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return by.credentialFromTaggedObject(e)}static credentialFromError(e){return by.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return by.credential(t.oauthAccessToken)}catch(oT){return null}}}by.GITHUB_SIGN_IN_METHOD="github.com",by.PROVIDER_ID="github.com";class wy extends vy{constructor(){super("twitter.com")}static credential(e,t){return uy._fromParams({providerId:wy.PROVIDER_ID,signInMethod:wy.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wy.credentialFromTaggedObject(e)}static credentialFromError(e){return wy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return wy.credential(r,n)}catch(oT){return null}}}wy.TWITTER_SIGN_IN_METHOD="twitter.com",wy.PROVIDER_ID="twitter.com";class _y{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await _x._fromIdTokenResponse(e,r,n),a=ky(r);return new _y({user:i,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const n=ky(r);return new _y({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function ky(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Sy extends Di{constructor(e,t,r,n){var i;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,Sy.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new Sy(e,t,r,n)}}function jy(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch((r=>{if("auth/multi-factor-auth-required"===r.code)throw Sy._fromErrorAndOperation(e,r,t,n);throw r}))}async function Ey(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await mx(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return _y._forOperation(e,"link",n)}async function Cy(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:n}=e;if(ns(n.app))return Promise.reject($v(n));const i="reauthenticate";try{const a=await mx(e,jy(n,i,t,e),r);zv(a.idToken,n,"internal-error");const s=px(a.idToken);zv(s,n,"internal-error");const{sub:o}=s;return zv(e.uid===o,n,"user-mismatch"),_y._forOperation(e,i,a)}catch(W){throw"auth/user-not-found"===(null===W||void 0===W?void 0:W.code)&&Rv(n,"user-mismatch"),W}}async function Ny(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ns(e.app))return Promise.reject($v(e));const n="signIn",i=await jy(e,n,t),a=await _y._fromIdTokenResponse(e,n,i);return r||await e._updateCurrentUser(a.user),a}function Ty(e,t){return ex(e,"POST","/v2/accounts/mfaEnrollment:start",Jv(e,t))}new WeakMap;const Py="__sak";class Ay{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Py,"1"),this.storage.removeItem(Py),Promise.resolve(!0)):Promise.resolve(!1)}catch(oT){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class My extends Ay{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$x(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,r)=>{this.notifyListeners(e,r)}));const r=e.key;t?this.detachListener():this.stopPolling();const n=()=>{const e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},i=this.storage.getItem(r);Fx()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}My.type="LOCAL";const Iy=My;class Oy extends Ay{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Oy.type="SESSION";const Dy=Oy;class Ry{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const r=new Ry(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:n,data:i}=t.data,a=this.handlersMap[n];if(!(null===a||void 0===a?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:n});const s=Array.from(a).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ly(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="";for(let n=0;n<t;n++)r+=Math.floor(10*Math.random());return e+r}Ry.receivers=[];class Fy{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const n="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,a;return new Promise(((s,o)=>{const l=Ly("",20);n.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),r);a={messageChannel:n,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(a),n.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[n.port2])})).finally((()=>{a&&this.removeMessageHandler(a)}))}}function $y(){return window}function By(){return"undefined"!==typeof $y().WorkerGlobalScope&&"function"===typeof $y().importScripts}const zy="firebaseLocalStorageDb",Uy="firebaseLocalStorage",Vy="fbase_key";class Hy{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Gy(e,t){return e.transaction([Uy],t?"readwrite":"readonly").objectStore(Uy)}function Wy(){const e=indexedDB.open(zy,1);return new Promise(((t,r)=>{e.addEventListener("error",(()=>{r(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Uy,{keyPath:Vy})}catch(W){r(W)}})),e.addEventListener("success",(async()=>{const r=e.result;r.objectStoreNames.contains(Uy)?t(r):(r.close(),await function(){const e=indexedDB.deleteDatabase(zy);return new Hy(e).toPromise()}(),t(await Wy()))}))}))}async function qy(e,t,r){const n=Gy(e,!0).put({[Vy]:t,value:r});return new Hy(n).toPromise()}function Ky(e,t){const r=Gy(e,!0).delete(t);return new Hy(r).toPromise()}class Zy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Wy()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(W){if(t++>3)throw W;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return By()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ry._getInstance(By()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Fy(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=r[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(oT){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wy();return await qy(e,Py,"1"),await Ky(e,Py),!0}catch(oT){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((r=>qy(r,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const r=Gy(e,!1).get(t),n=await new Hy(r).toPromise();return void 0===n?null:n.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ky(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Gy(e,!1).getAll();return new Hy(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],r=new Set;if(0!==e.length)for(const{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!r.has(n)&&(this.notifyListeners(n,null),t.push(n));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const n of Array.from(r))n(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Zy.type="LOCAL";const Yy=Zy;function Xy(e,t){return ex(e,"POST","/v2/accounts/mfaSignIn:start",Jv(e,t))}Kx("rcb"),new Kv(3e4,6e4);const Qy="recaptcha";async function Jy(e,t,r){var n;if(!e._getRecaptchaConfig())try{await ty(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){zv("enroll"===t.type,e,"internal-error");const n={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},a=ey(e,n,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Xx){zv((null===r||void 0===r?void 0:r.type)===Qy,e,"argument-error");return Ty(e,await eb(e,t,r))}return Ty(e,t)}),"PHONE_PROVIDER"),s=await a.catch((e=>Promise.reject(e)));return s.phoneSessionInfo.sessionInfo}{zv("signin"===t.type,e,"internal-error");const a=(null===(n=i.multiFactorHint)||void 0===n?void 0:n.uid)||i.multiFactorUid;zv(a,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=ey(e,s,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Xx){zv((null===r||void 0===r?void 0:r.type)===Qy,e,"argument-error");return Xy(e,await eb(e,t,r))}return Xy(e,t)}),"PHONE_PROVIDER"),l=await o.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},n=ey(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Xx){zv((null===r||void 0===r?void 0:r.type)===Qy,e,"argument-error");return dy(e,await eb(e,t,r))}return dy(e,t)}),"PHONE_PROVIDER"),a=await n.catch((e=>Promise.reject(e)));return a.sessionInfo}}finally{null===r||void 0===r||r._reset()}}async function eb(e,t,r){zv(r.type===Qy,e,"argument-error");const n=await r.verify();zv("string"===typeof n,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,r=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n,captchaResponse:t,clientType:r,recaptchaVersion:a}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,r=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:e,clientType:t,recaptchaVersion:r}}),i}return Object.assign(i,{recaptchaToken:n}),i}class tb{constructor(e){this.providerId=tb.PROVIDER_ID,this.auth=Hx(e)}verifyPhoneNumber(e,t){return Jy(this.auth,e,Gi(t))}static credential(e,t){return py._fromVerification(e,t)}static credentialFromResult(e){const t=e;return tb.credentialFromTaggedObject(t)}static credentialFromError(e){return tb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:r,temporaryProof:n}=t;return r&&n?py._fromTokenResponse(r,n):null}}function rb(e,t){return t?Sx(t):(zv(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}tb.PROVIDER_ID="phone",tb.PHONE_SIGN_IN_METHOD="phone";class nb extends ay{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cy(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ib(e){return Ny(e.auth,new nb(e),e.bypassAuthState)}function ab(e){const{auth:t,user:r}=e;return zv(r,t,"internal-error"),Cy(r,new nb(e),e.bypassAuthState)}async function sb(e){const{auth:t,user:r}=e;return zv(r,t,"internal-error"),Ey(r,new nb(e),e.bypassAuthState)}class ob{constructor(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(W){this.reject(W)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:n,tenantId:i,error:a,type:s}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(W){this.reject(W)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ib;case"linkViaPopup":case"linkViaRedirect":return sb;case"reauthViaPopup":case"reauthViaRedirect":return ab;default:Rv(this.auth,"internal-error")}}resolve(e){Vv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vv(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lb=new Kv(2e3,1e4);class cb extends ob{constructor(e,t,r,n,i){super(e,t,n,i),this.provider=r,this.authWindow=null,this.pollId=null,cb.currentPopupAction&&cb.currentPopupAction.cancel(),cb.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return zv(e,this.auth,"internal-error"),e}async onExecution(){Vv(1===this.filter.length,"Popup operations only handle one event");const e=Ly();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Lv(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Lv(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cb.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;(null===(r=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===r?void 0:r.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Lv(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,lb.get())};e()}}cb.currentPopupAction=null;const ub=new Map;class db extends ob{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ub.get(this.auth._key());if(!e){try{const t=await async function(e,t){const r=fb(t),n=pb(e);if(!await n._isAvailable())return!1;const i="true"===await n._get(r);return await n._remove(r),i}(this.resolver,this.auth),r=t?await super.execute():null;e=()=>Promise.resolve(r)}catch(W){e=()=>Promise.reject(W)}ub.set(this.auth._key(),e)}return this.bypassAuthState||ub.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function hb(e,t){ub.set(e._key(),t)}function pb(e){return Sx(e._redirectPersistence)}function fb(e){return Cx("pendingRedirect",e.config.apiKey,e.name)}async function mb(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ns(e.app))return Promise.reject($v(e));const n=Hx(e),i=rb(n,t),a=new db(n,i,r),s=await a.execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,t)),s}class gb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xb(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!xb(e)){const n=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Lv(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vb(e))}saveEventToCache(e){this.cachedEventUids.add(vb(e)),this.lastProcessedEventTime=Date.now()}}function vb(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function xb(e){let{type:t,error:r}=e;return"unknown"===t&&"auth/no-auth-event"===(null===r||void 0===r?void 0:r.code)}const yb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bb=/^https?/;async function wb(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ex(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(_b(r))return}catch(oT){}Rv(e,"unauthorized-domain")}function _b(e){const t=Hv(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===n}if(!bb.test(r))return!1;if(yb.test(e))return n===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}const kb=new Kv(3e4,6e4);function Sb(){const e=$y().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}function jb(e){return new Promise(((t,r)=>{var n,i,a;function s(){Sb(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Sb(),r(Lv(e,"network-request-failed"))},timeout:kb.get()})}if(null===(i=null===(n=$y().gapi)||void 0===n?void 0:n.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=$y().gapi)||void 0===a?void 0:a.load)){const t=Kx("iframefcb");return $y()[t]=()=>{gapi.load?s():r(Lv(e,"network-request-failed"))},qx(`${Wx.gapiScript}?onload=${t}`).catch((e=>r(e)))}s()}})).catch((e=>{throw Eb=null,e}))}let Eb=null;const Cb=new Kv(5e3,15e3),Nb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pb(e){const t=e.config;zv(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?Zv(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,n={apiKey:t.apiKey,appName:e.name,v:ss},i=Tb.get(e.config.apiHost);i&&(n.eid=i);const a=e._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Bi(n).slice(1)}`}async function Ab(e){const t=await function(e){return Eb=Eb||jb(e),Eb}(e),r=$y().gapi;return zv(r,e,"internal-error"),t.open({where:document.body,url:Pb(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nb,dontclear:!0},(t=>new Promise((async(r,n)=>{await t.restyle({setHideOnLeave:!1});const i=Lv(e,"network-request-failed"),a=$y().setTimeout((()=>{n(i)}),Cb.get());function s(){$y().clearTimeout(a),r(t)}t.ping(s).then(s,(()=>{n(i)}))}))))}const Mb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ib{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(W){}}}function Ob(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Mb),{width:n.toString(),height:i.toString(),top:a,left:s}),c=Mi().toLowerCase();r&&(o=Mx(c)?"_blank":r),Px(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[r,n]=t;return`${e}${r}=${n},`}),"");if(function(){var e;return Lx(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}(t||"",o),new Ib(null);const d=window.open(t||"",o,u);zv(d,e,"popup-blocked");try{d.focus()}catch(W){}return new Ib(d)}const Db="__/auth/handler",Rb="emulator/auth/handler",Lb=encodeURIComponent("fac");async function Fb(e,t,r,n,i,a){zv(e.config.authDomain,e,"auth-domain-config-required"),zv(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:ss,eventId:i};if(t instanceof gy){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))s[e]=t}if(t instanceof vy){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Lb}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Db}`;return Zv(t,Rb)}(e)}?${Bi(o).slice(1)}${c}`}const $b="webStorageSupport";const Bb=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dy,this._completeRedirectFn=mb,this._overrideRedirectResult=hb}async _openPopup(e,t,r,n){var i;Vv(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ob(e,await Fb(e,t,r,Hv(),n),Ly())}async _openRedirect(e,t,r,n){await this._originValidation(e);return function(e){$y().location.href=e}(await Fb(e,t,r,Hv(),n)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(Vv(r,"If manager is not set, promise should be"),r)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch((()=>{delete this.eventManagers[t]})),r}async initAndGetManager(e){const t=await Ab(e),r=new gb(e);return t.register("authEvent",(t=>{zv(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($b,{type:$b},(r=>{var n;const i=null===(n=null===r||void 0===r?void 0:r[0])||void 0===n?void 0:n[$b];void 0!==i&&t(!!i),Rv(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $x()||Ax()||Lx()}};var zb="@firebase/auth",Ub="1.9.1";class Vb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){zv(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Hb=Ti("authIdTokenMaxAge")||300;let Gb=null;var Wb;!function(e){Wx=e}({loadJS:e=>new Promise(((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=e=>{const t=Lv("internal-error");t.customData=e,r(t)},n.type="text/javascript",n.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(n)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Wb="Browser",ts(new Wi("auth",((e,t)=>{let{options:r}=t;const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;zv(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:s,authDomain:o,clientPlatform:Wb,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bx(Wb)},c=new Vx(n,i,a,l);return function(e,t){const r=(null===t||void 0===t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Sx);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,r),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,r)=>{e.getProvider("auth-internal").initialize()}))),ts(new Wi("auth-internal",(e=>(e=>new Vb(e))(Hx(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),cs(zb,Ub,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Wb)),cs(zb,Ub,"esm2017");const qb="firebasestorage.googleapis.com",Kb="storageBucket";class Zb extends Di{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Qb(e),`Firebase Storage: ${t} (${Qb(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zb.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Yb,Xb;function Qb(e){return"storage/"+e}function Jb(){return new Zb(Yb.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ew(){return new Zb(Yb.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tw(){return new Zb(Yb.CANCELED,"User canceled the upload/download.")}function rw(){return new Zb(Yb.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nw(e){return new Zb(Yb.INVALID_ARGUMENT,e)}function iw(){return new Zb(Yb.APP_DELETED,"The Firebase app was deleted.")}function aw(e,t){return new Zb(Yb.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function sw(e){throw new Zb(Yb.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Yb||(Yb={}));class ow{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ow.makeFromUrl(e,t)}catch(W){return new ow(e,"")}if(""===r.path)return r;throw n=e,new Zb(Yb.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.");var n}static makeFromUrl(e,t){let r=null;const n="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+n+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${s}/v[A-Za-z0-9_]+/b/${n}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp(`^https?://${t===qb?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${n}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:a}];for(let l=0;l<o.length;l++){const t=o[l],n=t.regex.exec(e);if(n){const e=n[t.indices.bucket];let i=n[t.indices.path];i||(i=""),r=new ow(e,i),t.postModify(r);break}}if(null==r)throw function(e){return new Zb(Yb.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return r}}class lw{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function cw(e){return"string"===typeof e||e instanceof String}function uw(e){return dw()&&e instanceof Blob}function dw(){return"undefined"!==typeof Blob}function hw(e,t,r,n){if(n<t)throw nw(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw nw(`Invalid value for '${e}'. Expected ${r} or less.`)}function pw(e,t,r){let n=t;return null==r&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function fw(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){r=r+(t(n)+"="+t(e[n]))+"&"}return r=r.slice(0,-1),r}function mw(e,t){const r=e>=500&&e<600,n=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return r||n||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Xb||(Xb={}));class gw{constructor(e,t,r,n,i,a,s,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=r,this.body_=n,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=s,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new vw(!1,null,!0));const r=this.connectionFactory_();this.pendingConnection_=r;const n=e=>{const t=e.loaded,r=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,r)};null!==this.progressCallback_&&r.addUploadProgressListener(n),r.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&r.removeUploadProgressListener(n),this.pendingConnection_=null;const t=r.getErrorCode()===Xb.NO_ERROR,i=r.getStatus();if(!t||mw(i,this.additionalRetryCodes_)&&this.retry){const t=r.getErrorCode()===Xb.ABORT;return void e(!1,new vw(!1,null,t))}const a=-1!==this.successCodes_.indexOf(i);e(!0,new vw(a,r))}))},t=(e,t)=>{const r=this.resolve_,n=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?r():r(e)}catch(W){n(W)}else if(null!==i){const e=Jb();e.serverResponse=i.getErrorText(),this.errorCallback_?n(this.errorCallback_(i,e)):n(e)}else if(t.canceled){n(this.appDelete_?iw():tw())}else{n(ew())}};this.canceled_?t(0,new vw(!1,null,!0)):this.backoffId_=function(e,t,r){let n=1,i=null,a=null,s=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];t.apply(null,r)}}function d(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function h(){a&&clearTimeout(a)}function p(e){if(c)return void h();for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...r);if(l()||s)return h(),void u.call(null,e,...r);let a;n<64&&(n*=2),1===o?(o=2,a=0):a=1e3*(n+Math.random()),d(a)}let f=!1;function m(e){f||(f=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),a=setTimeout((()=>{s=!0,m(!0)}),r),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class vw{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function xw(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function yw(){const e=xw();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(void 0!==e){const t=new e;for(let e=0;e<r.length;e++)t.append(r[e]);return t.getBlob()}if(dw())return new Blob(r);throw new Zb(Yb.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function bw(e){if("undefined"===typeof atob)throw t="base-64",new Zb(Yb.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const ww="raw",_w="base64",kw="base64url",Sw="data_url";class jw{constructor(e,t){this.data=e,this.contentType=t||null}}function Ew(e,t){switch(e){case ww:return new jw(Cw(t));case _w:case kw:return new jw(Nw(e,t));case Sw:return new jw(function(e){const t=new Tw(e);return t.base64?Nw(_w,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(W){throw aw(Sw,"Malformed data URL.")}return Cw(t)}(t.rest)}(t),new Tw(t).contentType)}throw Jb()}function Cw(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|63&n);else if(55296===(64512&n)){if(r<e.length-1&&56320===(64512&e.charCodeAt(r+1))){n=65536|(1023&n)<<10|1023&e.charCodeAt(++r),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)}else t.push(239,191,189)}else 56320===(64512&n)?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(t)}function Nw(e,t){switch(e){case _w:{const r=-1!==t.indexOf("-"),n=-1!==t.indexOf("_");if(r||n){throw aw(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?")}break}case kw:{const r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n){throw aw(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=bw(t)}catch(W){if(W.message.includes("polyfill"))throw W;throw aw(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class Tw{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw aw(Sw,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(e,t){const r=e.length>=t.length;if(!r)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Pw{constructor(e,t){let r=0,n="";uw(e)?(this.data_=e,r=e.size,n=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=n}size(){return this.size_}type(){return this.type_}slice(e,t){if(uw(this.data_)){const r=function(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}(this.data_,e,t);return null===r?null:new Pw(r)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Pw(r,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(dw()){const e=t.map((e=>e instanceof Pw?e.data_:e));return new Pw(yw.apply(null,e))}{const e=t.map((e=>cw(e)?Ew(ww,e).data:e.data_));let r=0;e.forEach((e=>{r+=e.byteLength}));const n=new Uint8Array(r);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)n[i++]=e[t]})),new Pw(n,!0)}}uploadData(){return this.data_}}function Aw(e){let t;try{t=JSON.parse(e)}catch(W){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Mw(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Iw(e,t){return t}class Ow{constructor(e,t,r,n){this.server=e,this.local=t||e,this.writable=!!r,this.xform=n||Iw}}let Dw=null;function Rw(){if(Dw)return Dw;const e=[];e.push(new Ow("bucket")),e.push(new Ow("generation")),e.push(new Ow("metageneration")),e.push(new Ow("name","fullPath",!0));const t=new Ow("name");t.xform=function(e,t){return function(e){return!cw(e)||e.length<2?e:Mw(e)}(t)},e.push(t);const r=new Ow("size");return r.xform=function(e,t){return void 0!==t?Number(t):t},e.push(r),e.push(new Ow("timeCreated")),e.push(new Ow("updated")),e.push(new Ow("md5Hash",null,!0)),e.push(new Ow("cacheControl",null,!0)),e.push(new Ow("contentDisposition",null,!0)),e.push(new Ow("contentEncoding",null,!0)),e.push(new Ow("contentLanguage",null,!0)),e.push(new Ow("contentType",null,!0)),e.push(new Ow("metadata","customMetadata",!0)),Dw=e,Dw}function Lw(e,t,r){const n={type:"file"},i=r.length;for(let a=0;a<i;a++){const e=r[a];n[e.local]=e.xform(n,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const r=e.bucket,n=e.fullPath,i=new ow(r,n);return t._makeStorageReference(i)}})}(n,e),n}function Fw(e,t,r){const n=Aw(t);if(null===n)return null;return Lw(e,n,r)}function $w(e,t){const r={},n=t.length;for(let i=0;i<n;i++){const n=t[i];n.writable&&(r[n.server]=e[n.local])}return JSON.stringify(r)}class Bw{constructor(e,t,r,n){this.url=e,this.method=t,this.handler=r,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function zw(e){if(!e)throw Jb()}function Uw(e,t){return function(r,n){const i=Fw(e,n,t);return zw(null!==i),i}}function Vw(e,t){return function(r,n){const i=Fw(e,n,t);return zw(null!==i),function(e,t,r,n){const i=Aw(t);if(null===i)return null;if(!cw(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const s=encodeURIComponent,o=a.split(",").map((t=>{const i=e.bucket,a=e.fullPath;return pw("/b/"+s(i)+"/o/"+s(a),r,n)+fw({alt:"media",token:t})}));return o[0]}(i,n,e.host,e._protocol)}}function Hw(e){return function(t,r){let n;var i;return 401===t.getStatus()?n=t.getErrorText().includes("Firebase App Check token is invalid")?new Zb(Yb.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Zb(Yb.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,n=new Zb(Yb.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):n=403===t.getStatus()?function(e){return new Zb(Yb.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(e.path):r,n.status=t.getStatus(),n.serverResponse=r.serverResponse,n}}function Gw(e){const t=Hw(e);return function(r,n){let i=t(r,n);return 404===r.getStatus()&&(i=function(e){return new Zb(Yb.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(e.path)),i.serverResponse=n.serverResponse,i}}function Ww(e,t,r){const n=pw(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Bw(n,"GET",Uw(e,r),i);return a.errorHandler=Gw(t),a}function qw(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),n}function Kw(e,t,r,n,i){const a=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+o;const l=qw(t,n,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$w(l,r)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=Pw.getBlob(c,n,u);if(null===d)throw rw();const h={name:l.fullPath},p=pw(a,e.host,e._protocol),f=e.maxUploadRetryTime,m=new Bw(p,"POST",Uw(e,r),f);return m.urlParams=h,m.headers=s,m.body=d.uploadData(),m.errorHandler=Hw(t),m}class Zw{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xb.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Xb.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Xb.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,r,n){if(this.sent_)throw sw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==n)for(const i in n)n.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,n[i].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(W){return-1}}getResponse(){if(!this.sent_)throw sw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Yw extends Zw{initXhr(){this.xhr_.responseType="text"}}function Xw(){return new Yw}class Qw{constructor(e,t){this._service=e,this._location=t instanceof ow?t:ow.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qw(e,t)}get root(){const e=new ow(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Mw(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new ow(this._location.bucket,e);return new Qw(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Zb(Yb.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Jw(e,t,r){e._throwIfRoot("uploadBytes");const n=Kw(e.storage,e._location,Rw(),new Pw(t,!0),r);return e.storage.makeRequestWithTokens(n,Xw).then((t=>({metadata:t,ref:e})))}function e_(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,r){const n=pw(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Bw(n,"GET",Vw(e,r),i);return a.errorHandler=Gw(t),a}(e.storage,e._location,Rw());return e.storage.makeRequestWithTokens(t,Xw).then((e=>{if(null===e)throw new Zb(Yb.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function t_(e,t){const r=function(e,t){const r=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?r:e+"/"+r}(e._location.path,t),n=new ow(e._location.bucket,r);return new Qw(e.storage,n)}function r_(e,t){if(e instanceof a_){const r=e;if(null==r._bucket)throw new Zb(Yb.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Kb+"' property when initializing the app?");const n=new Qw(r,r._bucket);return null!=t?r_(n,t):n}return void 0!==t?t_(e,t):e}function n_(e,t){if(t&&function(e){return/^[A-Za-z]+:\/\//.test(e)}(t)){if(e instanceof a_)return new Qw(e,t);throw nw("To use ref(service, url), the first argument must be a Storage instance.")}return r_(e,t)}function i_(e,t){const r=null===t||void 0===t?void 0:t[Kb];return null==r?null:ow.makeFromBucketSpec(r,e)}class a_{constructor(e,t,r,n,i){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=n,this._firebaseVersion=i,this._bucket=null,this._host=qb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=n?ow.makeFromBucketSpec(n,this._host):i_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=ow.makeFromBucketSpec(this._url,e):this._bucket=i_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qw(this,e)}_makeRequest(e,t,r,n){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new lw(iw());{const a=function(e,t,r,n,i,a){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=fw(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,r),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,n),new gw(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,r,n,t,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then((()=>this._requests.delete(a)),(()=>this._requests.delete(a))),a}}async makeRequestWithTokens(e,t){const[r,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,n).getPromise()}}const s_="@firebase/storage",o_="0.13.7",l_="storage";function c_(e,t,r){return Jw(e=Gi(e),t,r)}function u_(e){return function(e){e._throwIfRoot("getMetadata");const t=Ww(e.storage,e._location,Rw());return e.storage.makeRequestWithTokens(t,Xw)}(e=Gi(e))}function d_(e){return e_(e=Gi(e))}function h_(e,t){return n_(e=Gi(e),t)}function p_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ls(),t=arguments.length>1?arguments[1]:void 0;e=Gi(e);const r=rs(e,l_).getImmediate({identifier:t}),n=Ci("storage");return n&&function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${r}`,e._protocol="http";const{mockUserToken:i}=n;i&&(e._overrideAuthToken="string"===typeof i?i:Ai(i,e.app.options.projectId))}(e,t,r,n)}(r,...n),r}function f_(e,t){let{instanceIdentifier:r}=t;const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new a_(n,i,a,r,ss)}ts(new Wi(l_,f_,"PUBLIC").setMultipleInstances(!0)),cs(s_,o_,""),cs(s_,o_,"esm2017");const m_=os({apiKey:"AIzaSyBYBlPd_oLkYrare86yTzsIqhUJO1ZlIrw",authDomain:"l-plot.firebaseapp.com",projectId:"l-plot",storageBucket:"l-plot.firebasestorage.app",messagingSenderId:"629346971068",appId:"1:629346971068:web:8d0b8033278bdb329b4fb9",measurementId:"G-17B0ZFTZZ4"}),g_=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ls();const t=rs(e,"auth");if(t.isInitialized())return t.getImmediate();const r=function(e,t){const r=rs(e,"auth");if(r.isInitialized()){const e=r.getImmediate();if(Fi(r.getOptions(),null!==t&&void 0!==t?t:{}))return e;Rv(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:Bb,persistence:[Yy,Iy,Dy]}),n=Ti("authTokenSyncURL");if(n&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(n,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),r=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Hb)return;const n=null===t||void 0===t?void 0:t.token;Gb!==n&&(Gb=n,await fetch(i,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))});!function(e,t,r){Gi(e).beforeAuthStateChanged(t,r)}(r,t,(()=>t(r.currentUser))),function(e,t,r,n){Gi(e).onIdTokenChanged(t,r,n)}(r,(e=>t(e)))}}var i;const a=Ei("auth");a&&ry(r,`http://${a}`)}(m_),function(e,t){const r="object"==typeof e?e:ls(),n="string"==typeof e?e:t||Il,i=rs(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const e=Ci("firestore");e&&function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const a=(e=em(e,im))._getSettings(),s=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),o=`${t}:${r}`;a.host!==tm&&a.host!==o&&Us("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},a),{host:o,ssl:!1,emulatorOptions:n});if(!Fi(l,s)&&(e._setSettings(l),n.mockUserToken)){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=Rs.MOCK_USER;else{t=Ai(n.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const a=n.mockUserToken.sub||n.mockUserToken.user_id;if(!a)throw new Ks(qs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new Rs(a)}e._authCredentials=new Qs(new Ys(t,r))}}(i,...e)}return i}(m_)),v_=p_();function x_(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Cv(vi(t))}const y_=async e=>{try{if(e){const t=cm(g_,"house_model",e),r=await dg(t);if(r.exists())return r.data()}}catch(t){console.error("Error fetching husmodell data:",t)}},b_=async e=>{try{if(e){const t=cm(g_,"bank_leads",e),r=await dg(t);if(r.exists())return r.data()}}catch(t){console.error("Error fetching bank lead data:",t)}},w_=async e=>{try{if(e){const t=cm(g_,"suppliers",e),r=await dg(t);if(r.exists())return r.data();console.error("No document found for ID:",e)}}catch(t){console.error("Error fetching supplier data:",t)}},__=async e=>{try{const t=Zm(lm(g_,"admin"),Xm("id","==",e)),r=await pg(t);if(r.empty)return console.error("No document found for ID:",e),null;return r.docs[0].data()}catch(t){console.error("Error fetching admin data:",t)}};function k_(e){const t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}.${String(t.getMonth()+1).padStart(2,"0")}.${t.getFullYear()} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`}function S_(e){const t="string"===typeof e?Number(e.replace(/\s/g,"").replace(/kr/i,"")):e;if(isNaN(Number(t)))return e;return`kr ${new Intl.NumberFormat("no-NO",{style:"decimal",useGrouping:!0,minimumFractionDigits:0}).format(t)}`}const j_={"+47":e=>8===e.length};function E_(e){const t=new Date(e);if(isNaN(t))return"Invalid Date";return`${String(t.getDate()).padStart(2,"0")}.${String(t.getMonth()+1).padStart(2,"0")}.${t.getFullYear()}`}function C_(e,t){return new Date(1e3*e+t/1e6).toLocaleDateString("no-NO",{day:"numeric",month:"long",year:"numeric"})}const N_=async()=>{const e=localStorage.getItem("Iplot_admin");if(e)try{const t=Zm(lm(g_,"admin"),Xm("email","==",e)),r=await pg(t);if(r.empty)return console.error("No document found for Email:",e),null;return r.docs[0].data()}catch(t){console.error("Error fetching admin data:",t)}};function T_(e){const t=new Date(1e3*(null===e||void 0===e?void 0:e.seconds));return`${t.getDate()}. ${t.toLocaleString("no-NO",{month:"long"})} ${t.getFullYear()} | ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}function P_(e){if(null===e||void 0===e||!e.seconds)return"";const t=new Date(1e3*(null===e||void 0===e?void 0:e.seconds));return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function A_(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function M_(e){const[t,r]=e&&(null===e||void 0===e?void 0:e.split("|").map((e=>e.trim()))),[n,i]=r.split(" ");let[a,s]=n.split(":").map(Number);"PM"===i&&12!==a?a+=12:"AM"===i&&12===a&&(a=0);return`${t} | ${`${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}`}function I_(e){if(!e)return"";return`+47 ${(e.startsWith("47")?e.slice(2):e).replace(/(\d{2})(?=\d)/g,"$1 ").trim()}`}const O_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D_=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t)).join(" ").trim()};var R_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const L_=(0,t.forwardRef)(((e,r)=>{let{color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...u}=e;return(0,t.createElement)("svg",{ref:r,...R_,width:i,height:i,stroke:n,strokeWidth:s?24*Number(a)/Number(i):a,className:D_("lucide",o),...u},[...c.map((e=>{let[r,n]=e;return(0,t.createElement)(r,n)})),...Array.isArray(l)?l:[l]])})),F_=(e,r)=>{const n=(0,t.forwardRef)(((n,i)=>{let{className:a,...s}=n;return(0,t.createElement)(L_,{ref:i,iconNode:r,className:D_(`lucide-${O_(e)}`,a),...s})}));return n.displayName=`${e}`,n},$_=F_("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),B_=F_("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),z_=()=>{const e=Gr().pathname,[r,n]=(0,t.useState)(!1),i=(0,t.useRef)(null),a=Kr(),[s,o]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=localStorage.getItem("Iplot_admin");o(e)}),[s]),(0,t.useEffect)((()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&n(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(null),x=localStorage.getItem("Iplot_admin");(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){var t;null!==e&&void 0!==e&&e.role&&p(null===e||void 0===e?void 0:e.role),c(null===e||void 0===e?void 0:e.photo),v((null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.f_name)),null!==e&&void 0!==e&&e.supplier&&m(null===e||void 0===e?void 0:e.supplier);const r=null===e||void 0===e||null===(t=e.modulePermissions)||void 0===t?void 0:t.find((e=>"Husmodell"===e.name));d(null===r||void 0===r?void 0:r.permissions)}})()}),[]);const[y,b]=(0,t.useState)(!1),w=()=>{b(!y)};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"px-4 md:px-6 py-4 flex items-center border-b border-gray2 justify-between sticky top-0 bg-white",style:{zIndex:999},children:[(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)($_,{onClick:w,className:"desktop:hidden text-primary"}),!h||h&&"Bankansvarlig"!==h?(0,V.jsx)(ti,{to:"/",children:(0,V.jsx)("img",{src:di,alt:"logo",className:"w-[90px] md:w-[120px] big:w-auto"})}):(0,V.jsx)("img",{src:di,alt:"logo",className:"w-[90px] md:w-[120px] desktop:w-auto"})]}),(0,V.jsxs)("div",{className:"hidden desktop:flex items-center gap-0.5",children:[(!h||h&&"Bankansvarlig"!==h)&&(0,V.jsx)(ti,{to:"/dashboard",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/dashboard"===e?"bg-lightPurple text-primary":"text-black"),children:"Dashboard"}),(!h||h&&"Bankansvarlig"!==h)&&(0,V.jsx)(ti,{to:"/Leverandorer",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/Leverandorer"===e||e.startsWith("/edit-til-leverandor/")||"/legg-til-leverandor"===e?"bg-lightPurple text-primary":"text-black"),children:"Leverand\xf8rer"}),("andre.finger@gmail.com"===x||!0===(null===u||void 0===u?void 0:u.add)||!0===(null===u||void 0===u?void 0:u.delete)||!0===(null===u||void 0===u?void 0:u.edit))&&(!h||h&&"Bankansvarlig"!==h)&&(0,V.jsx)(ti,{to:"/Husmodeller",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/Husmodeller"===e||e.startsWith("/se-husmodell/")||"/add-husmodell"===e||e.startsWith("/edit-husmodell/")?"bg-lightPurple text-primary":"text-black"),children:"Husmodeller"}),(s&&"andre.finger@gmail.com"===s||h&&"Agent"===h)&&(0,V.jsx)(ti,{to:"/Brukeradministrasjon",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/Brukeradministrasjon"===e||e.startsWith("/edit-user")||e.startsWith("/edit-bank-user")||e.startsWith("/edit-agent-user")||e.startsWith("/legg-user")||e.startsWith("/add-agent-user")||e.startsWith("/add-bank-user")?"bg-lightPurple text-primary":"text-black"),children:"Brukeradministrasjon"}),("andre.finger@gmail.com"===s||"andre.finger@gmail.com"!==s&&"065f9498-6cdb-469b-8601-bb31114d7c95"===f)&&(!h||h&&"Bankansvarlig"!==h)&&(0,V.jsx)(ti,{to:"/my-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/my-leads"===e||"/add-lead"===e||e.startsWith("/my-leads-details/")?"bg-lightPurple text-primary":"text-black"),children:"Mine leads"}),h&&"Bankansvarlig"!==h&&(0,V.jsx)(ti,{to:"/agent-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/agent-leads"===e||e.startsWith("/add-agent-leads")||e.startsWith("/edit-agent-leads/")||e.startsWith("/agent-leads-detail/")?"bg-lightPurple text-primary":"text-black"),children:"S\xf8knad finansiering"}),h&&"Bankansvarlig"===h&&(0,V.jsx)(ti,{to:"/bank-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/bank-leads"===e||e.startsWith("/bank-leads-detail")?"bg-lightPurple text-primary":"text-black"),children:"Leads"}),h&&"Bankansvarlig"===h?(0,V.jsx)(ti,{to:"/active-bank-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/active-bank-leads"===e?"bg-lightPurple text-primary":"text-black"),children:"Aktive kunder"}):(0,V.jsx)(ti,{to:"/active-agent-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/active-agent-leads"===e?"bg-lightPurple text-primary":"text-black"),children:"Aktive kunder"})]}),(0,V.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 relative",children:[(0,V.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,V.jsx)("div",{className:"w-8 h-8 md:h-[40px] md:w-[40px] flex items-center justify-center",children:(0,V.jsx)("img",{src:pi,alt:"search"})}),(0,V.jsx)("div",{className:"w-8 h-8 md:h-[40px] md:w-[40px] flex items-center justify-center",children:(0,V.jsx)("img",{src:fi,alt:"setting"})}),(0,V.jsx)("div",{className:"w-8 h-8 md:h-[40px] md:w-[40px] flex items-center justify-center",children:(0,V.jsx)("img",{src:hi,alt:"bell"})})]}),(0,V.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{n((e=>!e))},children:[l?(0,V.jsx)("div",{className:"w-8 h-8 md:h-[40px] md:w-[40px]",children:(0,V.jsx)("img",{src:l,alt:"profile",className:"rounded-full"})}):(0,V.jsx)("div",{className:"w-8 h-8 md:h-[40px] md:w-[40px] flex items-center justify-center border border-primary bg-lightPurple rounded-full",children:null===g||void 0===g?void 0:g[0]}),(0,V.jsx)("img",{src:mi,alt:"arrow",className:"rotate-180"})]}),r&&(0,V.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white shadow-shadow1 rounded-md shadow-lg p-2 top-10 border border-gray2",ref:i,children:(0,V.jsx)(ti,{to:"/login",className:"block px-4 py-2 text-sm hover:bg-lightPurple text-black w-full text-left cursor-pointer",onClick:async()=>{try{localStorage.removeItem("Iplot_admin"),n(!1),a("/login"),He.success("Logout successfully",{position:"top-right"})}catch(e){console.error("Error logging out:",e)}},children:"Logout"})})]})]}),(0,V.jsx)("div",{style:{transition:"transform 1s, box-shadow 1s",transform:y?"translateX(0)":"translateX(-100%)",background:y?"rgba(0, 0, 0, 0.6)":"",zIndex:999999},className:"fixed top-0 left-0 w-full h-screen z-50",children:(0,V.jsxs)("div",{className:"bg-white h-full px-4 sm:px-5 md:px-8 lg:px-10 big:px-[120px] w-[85%]",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between py-4 mb-4",children:[(0,V.jsx)("div",{className:"gap-[12px] flex items-center",children:(0,V.jsx)("img",{src:di,alt:"logo",className:"w-[90px] md:w-[120px] big:w-auto"})}),(0,V.jsx)("button",{onClick:w,className:"text-3xl",children:(0,V.jsx)(B_,{className:"text-primary"})})]}),(0,V.jsxs)("div",{className:"flex flex-col items-start font-medium gap-3",children:[(!h||h&&"Bankansvarlig"!==h)&&(0,V.jsx)(ti,{to:"/dashboard",className:"text-base font-medium py-2 px-3 rounded-[6px] "+("/dashboard"===e?"bg-lightPurple text-primary":"text-black"),onClick:w,children:"Dashboard"}),(!h||h&&"Bankansvarlig"!==h)&&(0,V.jsx)(ti,{to:"/Leverandorer",className:"text-base font-medium py-2 px-3 rounded-[6px] "+("/Leverandorer"===e||e.startsWith("/edit-til-leverandor/")||"/legg-til-leverandor"===e?"bg-lightPurple text-primary":"text-black"),onClick:w,children:"Leverand\xf8rer"}),("andre.finger@gmail.com"===x||!0===(null===u||void 0===u?void 0:u.add)||!0===(null===u||void 0===u?void 0:u.delete)||!0===(null===u||void 0===u?void 0:u.edit))&&(!h||h&&"Bankansvarlig"!==h)&&(0,V.jsx)(ti,{to:"/Husmodeller",className:"text-base font-medium py-2 px-3 rounded-[6px] "+("/Husmodeller"===e||e.startsWith("/se-husmodell/")||"/add-husmodell"===e||e.startsWith("/edit-husmodell/")?"bg-lightPurple text-primary":"text-black"),onClick:w,children:"Husmodeller"}),(s&&"andre.finger@gmail.com"===s||h&&"Agent"===h)&&(0,V.jsx)(ti,{to:"/Brukeradministrasjon",className:"text-base font-medium py-2 px-3 rounded-[6px] "+("/Brukeradministrasjon"===e||e.startsWith("/edit-user")||e.startsWith("/legg-user")?"bg-lightPurple text-primary":"text-black"),onClick:w,children:"Brukeradministrasjon"}),("andre.finger@gmail.com"===s||"andre.finger@gmail.com"!==s&&"065f9498-6cdb-469b-8601-bb31114d7c95"===f)&&(!h||h&&"Bankansvarlig"!==h)&&(0,V.jsx)(ti,{to:"/my-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/my-leads"===e||"/add-lead"===e||e.startsWith("/my-leads-details/")?"bg-lightPurple text-primary":"text-black"),children:"Mine leads"}),h&&"Bankansvarlig"!==h&&(0,V.jsx)(ti,{to:"/agent-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/agent-leads"===e||e.startsWith("/add-agent-leads")||e.startsWith("/edit-agent-leads/")||e.startsWith("/agent-leads-detail/")?"bg-lightPurple text-primary":"text-black"),children:"S\xf8knad finansiering"}),h&&"Bankansvarlig"===h&&(0,V.jsx)(ti,{to:"/bank-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/bank-leads"===e||e.startsWith("/bank-leads-detail")?"bg-lightPurple text-primary":"text-black"),children:"Leads"}),h&&"Bankansvarlig"===h?(0,V.jsx)(ti,{to:"/active-bank-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/active-bank-leads"===e?"bg-lightPurple text-primary":"text-black"),children:"Aktive kunder"}):(0,V.jsx)(ti,{to:"/active-agent-leads",className:"text-base font-medium py-2 px-2 big:px-3 rounded-[6px] "+("/active-agent-leads"===e?"bg-lightPurple text-primary":"text-black"),children:"Aktive kunder"})]})]})})]})},U_=()=>{const{pathname:e}=Gr();return(0,t.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null},V_=()=>!!localStorage.getItem("Iplot_admin"),H_=()=>V_()?(0,V.jsxs)("div",{className:"flex flex-col flex-grow",children:[(0,V.jsx)(U_,{}),(0,V.jsx)(z_,{}),(0,V.jsx)("main",{className:"",children:(0,V.jsx)(t.Suspense,{fallback:(0,V.jsx)("div",{className:"w-full h-full rounded-md custom-shimmer",style:{borderRadius:"8px"}}),children:(0,V.jsx)(xn,{})})})]}):(0,V.jsx)(vn,{to:"/login",replace:!0}),G_=(Math.pow(10,8),6048e5),W_=6e4,q_=36e5,K_=Symbol.for("constructDateFrom");function Z_(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&K_ in e?e[K_](t):e instanceof Date?new e.constructor(t):new Date(t)}function Y_(e,t){return Z_(t||e,e)}function X_(e,t){const r=()=>Z_(t?.in,NaN),n=t?.additionalDigits??2,i=function(e){const t={},r=e.split(Q_.dateTimeDelimiter);let n;if(r.length>2)return t;/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Q_.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Q_.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length)));if(n){const e=Q_.timezone.exec(n);e?(t.time=n.replace(e[1],""),t.timezone=e[1]):t.time=n}return t}(e);let a;if(i.date){const e=function(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:null===a?i:100*a,restDateString:e.slice((n[1]||n[2]).length)}}(i.date,n);a=function(e,t){if(null===t)return new Date(NaN);const r=e.match(J_);if(!r)return new Date(NaN);const n=!!r[4],i=rk(r[1]),a=rk(r[2])-1,s=rk(r[3]),o=rk(r[4]),l=rk(r[5])-1;if(n)return function(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}(0,o,l)?function(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const i=n.getUTCDay()||7,a=7*(t-1)+r+1-i;return n.setUTCDate(n.getUTCDate()+a),n}(t,o,l):new Date(NaN);{const e=new Date(0);return function(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(ik[t]||(ak(e)?29:28))}(t,a,s)&&function(e,t){return t>=1&&t<=(ak(e)?366:365)}(t,i)?(e.setUTCFullYear(t,a,Math.max(i,s)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!a||isNaN(+a))return r();const s=+a;let o,l=0;if(i.time&&(l=function(e){const t=e.match(ek);if(!t)return NaN;const r=nk(t[1]),n=nk(t[2]),i=nk(t[3]);if(!function(e,t,r){if(24===e)return 0===t&&0===r;return r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}(r,n,i))return NaN;return r*q_+n*W_+1e3*i}(i.time),isNaN(l)))return r();if(!i.timezone){const e=new Date(s+l),r=Y_(0,t?.in);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}return o=function(e){if("Z"===e)return 0;const t=e.match(tk);if(!t)return 0;const r="+"===t[1]?-1:1,n=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return r*(n*q_+i*W_)}(i.timezone),isNaN(o)?r():Y_(s+l+o,t?.in)}const Q_={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},J_=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ek=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,tk=/^([+-])(\d{2})(?::?(\d{2}))?$/;function rk(e){return e?parseInt(e):1}function nk(e){return e&&parseFloat(e.replace(",","."))||0}const ik=[31,null,31,30,31,30,31,31,30,31,30,31];function ak(e){return e%400===0||e%4===0&&e%100!==0}const sk={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ok(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const lk={date:ok({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ok({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ok({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ck={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function uk(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=r?.width?String(r.width):t;n=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=r?.width?String(r.width):e.defaultWidth;n=e.values[i]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}const dk={ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:uk({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:uk({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:uk({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:uk({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:uk({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function hk(e){return function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const s=a[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(o,(e=>e.test(s))):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(o,(e=>e.test(s)));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(s.length)}}}const pk={ordinalNumber:(fk={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.match(fk.matchPattern);if(!r)return null;const n=r[0],i=e.match(fk.parsePattern);if(!i)return null;let a=fk.valueCallback?fk.valueCallback(i[0]):i[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(n.length)}}),era:hk({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:hk({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:hk({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:hk({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:hk({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var fk;const mk={code:"en-US",formatDistance:(e,t,r)=>{let n;const i=sk[e];return n="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:lk,formatRelative:(e,t,r,n)=>ck[e],localize:dk,match:pk,options:{weekStartsOn:0,firstWeekContainsDate:1}},gk=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},vk=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},xk={p:vk,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return gk(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",gk(n,t)).replace("{{time}}",vk(i,t))}},yk=/^D+$/,bk=/^Y+$/,wk=["D","DD","YY","YYYY"];function _k(e){return yk.test(e)}function kk(e){return bk.test(e)}function Sk(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(console.warn(n),wk.includes(e))throw new RangeError(n)}let jk={};function Ek(){return jk}function Ck(){return Object.assign({},Ek())}function Nk(e,t){const r=function(e){return"function"===typeof e&&e.prototype?.constructor===e}(t)?new t(0):Z_(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}class Tk{subPriority=0;validate(e,t){return!0}}class Pk extends Tk{constructor(e,t,r,n,i){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class Ak extends Tk{priority=10;subPriority=-1;constructor(e,t){super(),this.context=e||(e=>Z_(t,e))}set(e,t){return t.timestampIsSet?e:Z_(e,Nk(e,this.context))}}class Mk{run(e,t,r,n){const i=this.parse(e,t,r,n);return i?{setter:new Pk(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,r){return!0}}const Ik=/^(1[0-2]|0?\d)/,Ok=/^(3[0-1]|[0-2]?\d)/,Dk=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Rk=/^(5[0-3]|[0-4]?\d)/,Lk=/^(2[0-3]|[0-1]?\d)/,Fk=/^(2[0-4]|[0-1]?\d)/,$k=/^(1[0-1]|0?\d)/,Bk=/^(1[0-2]|0?\d)/,zk=/^[0-5]?\d/,Uk=/^[0-5]?\d/,Vk=/^\d/,Hk=/^\d{1,2}/,Gk=/^\d{1,3}/,Wk=/^\d{1,4}/,qk=/^-?\d+/,Kk=/^-?\d/,Zk=/^-?\d{1,2}/,Yk=/^-?\d{1,3}/,Xk=/^-?\d{1,4}/,Qk=/^([+-])(\d{2})(\d{2})?|Z/,Jk=/^([+-])(\d{2})(\d{2})|Z/,eS=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,tS=/^([+-])(\d{2}):(\d{2})|Z/,rS=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function nS(e,t){return e?{value:t(e.value),rest:e.rest}:e}function iS(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function aS(e,t){const r=t.match(e);if(!r)return null;if("Z"===r[0])return{value:0,rest:t.slice(1)};const n="+"===r[1]?1:-1,i=r[2]?parseInt(r[2],10):0,a=r[3]?parseInt(r[3],10):0,s=r[5]?parseInt(r[5],10):0;return{value:n*(i*q_+a*W_+1e3*s),rest:t.slice(r[0].length)}}function sS(e){return iS(qk,e)}function oS(e,t){switch(e){case 1:return iS(Vk,t);case 2:return iS(Hk,t);case 3:return iS(Gk,t);case 4:return iS(Wk,t);default:return iS(new RegExp("^\\d{1,"+e+"}"),t)}}function lS(e,t){switch(e){case 1:return iS(Kk,t);case 2:return iS(Zk,t);case 3:return iS(Yk,t);case 4:return iS(Xk,t);default:return iS(new RegExp("^-?\\d{1,"+e+"}"),t)}}function cS(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function uS(e,t){const r=t>0,n=r?t:1-t;let i;if(n<=50)i=e||100;else{const t=n+50;i=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return r?i:1-i}function dS(e){return e%400===0||e%4===0&&e%100!==0}function hS(e,t){const r=Ek(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Y_(e,t?.in),a=i.getDay(),s=(a<n?7:0)+a-n;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function pS(e,t){const r=Y_(e,t?.in),n=r.getFullYear(),i=Ek(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=Z_(t?.in||e,0);s.setFullYear(n+1,0,a),s.setHours(0,0,0,0);const o=hS(s,t),l=Z_(t?.in||e,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const c=hS(l,t);return+r>=+o?n+1:+r>=+c?n:n-1}function fS(e,t){return hS(e,{...t,weekStartsOn:1})}function mS(e,t){const r=Ek(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=pS(e,t),a=Z_(t?.in||e,0);a.setFullYear(i,0,n),a.setHours(0,0,0,0);return hS(a,t)}function gS(e,t){const r=Y_(e,t?.in),n=+hS(r,t)-+mS(r,t);return Math.round(n/G_)+1}function vS(e,t,r){const n=Y_(e,r?.in),i=gS(n,r)-t;return n.setDate(n.getDate()-7*i),Y_(n,r?.in)}function xS(e,t){const r=Y_(e,t?.in),n=r.getFullYear(),i=Z_(r,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const a=fS(i),s=Z_(r,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=fS(s);return r.getTime()>=a.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function yS(e,t){const r=xS(e,t),n=Z_(t?.in||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),fS(n)}function bS(e,t){const r=Y_(e,t?.in),n=+fS(r)-+yS(r);return Math.round(n/G_)+1}function wS(e,t,r){const n=Y_(e,r?.in),i=bS(n,r)-t;return n.setDate(n.getDate()-7*i),n}const _S=[31,28,31,30,31,30,31,31,30,31,30,31],kS=[31,29,31,30,31,30,31,31,30,31,30,31];function SS(e,t,r){const n=Y_(e,r?.in);return isNaN(t)?Z_(r?.in||e,NaN):t?(n.setDate(n.getDate()+t),n):n}function jS(e,t,r){const n=Ek(),i=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Y_(e,r?.in),s=a.getDay(),o=7-i;return SS(a,t<0||t>6?t-(s+o)%7:((t%7+7)%7+o)%7-(s+o)%7,r)}function ES(e,t){const r=Y_(e,t?.in).getDay();return 0===r?7:r}function CS(e,t,r){const n=Y_(e,r?.in);return SS(n,t-ES(n,r),r)}function NS(e){const t=Y_(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}const TS={G:new class extends Mk{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]},y:new class extends Mk{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return nS(oS(4,e),n);case"yo":return nS(r.ordinalNumber(e,{unit:"year"}),n);default:return nS(oS(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const n=e.getFullYear();if(r.isTwoDigitYear){const t=uS(r.year,n);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const i="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}},Y:new class extends Mk{priority=130;parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return nS(oS(4,e),n);case"Yo":return nS(r.ordinalNumber(e,{unit:"year"}),n);default:return nS(oS(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){const i=pS(e,n);if(r.isTwoDigitYear){const t=uS(r.year,i);return e.setFullYear(t,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),hS(e,n)}const a="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(a,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),hS(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class extends Mk{priority=130;parse(e,t){return lS("R"===t?4:t.length,e)}set(e,t,r){const n=Z_(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),fS(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class extends Mk{priority=130;parse(e,t){return lS("u"===t?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class extends Mk{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return oS(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class extends Mk{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return oS(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class extends Mk{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const n=e=>e-1;switch(t){case"M":return nS(iS(Ik,e),n);case"MM":return nS(oS(2,e),n);case"Mo":return nS(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}},L:new class extends Mk{priority=110;parse(e,t,r){const n=e=>e-1;switch(t){case"L":return nS(iS(Ik,e),n);case"LL":return nS(oS(2,e),n);case"Lo":return nS(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class extends Mk{priority=100;parse(e,t,r){switch(t){case"w":return iS(Rk,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return oS(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return hS(vS(e,r,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class extends Mk{priority=100;parse(e,t,r){switch(t){case"I":return iS(Rk,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return oS(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return fS(wS(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class extends Mk{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return iS(Ok,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return oS(t.length,e)}}validate(e,t){const r=dS(e.getFullYear()),n=e.getMonth();return r?t>=1&&t<=kS[n]:t>=1&&t<=_S[n]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class extends Mk{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return iS(Dk,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return oS(t.length,e)}}validate(e,t){return dS(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class extends Mk{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=jS(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]},e:new class extends Mk{priority=90;parse(e,t,r,n){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return nS(oS(t.length,e),i);case"eo":return nS(r.ordinalNumber(e,{unit:"day"}),i);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=jS(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class extends Mk{priority=90;parse(e,t,r,n){const i=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return nS(oS(t.length,e),i);case"co":return nS(r.ordinalNumber(e,{unit:"day"}),i);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=jS(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class extends Mk{priority=90;parse(e,t,r){const n=e=>0===e?7:e;switch(t){case"i":case"ii":return oS(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return nS(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return nS(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return nS(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return nS(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return(e=CS(e,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class extends Mk{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(cS(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]},b:new class extends Mk{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(cS(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]},B:new class extends Mk{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(cS(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]},h:new class extends Mk{priority=70;parse(e,t,r){switch(t){case"h":return iS(Bk,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return oS(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):n||12!==r?e.setHours(r,0,0,0):e.setHours(0,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]},H:new class extends Mk{priority=70;parse(e,t,r){switch(t){case"H":return iS(Lk,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return oS(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class extends Mk{priority=70;parse(e,t,r){switch(t){case"K":return iS($k,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return oS(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]},k:new class extends Mk{priority=70;parse(e,t,r){switch(t){case"k":return iS(Fk,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return oS(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class extends Mk{priority=60;parse(e,t,r){switch(t){case"m":return iS(zk,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return oS(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]},s:new class extends Mk{priority=50;parse(e,t,r){switch(t){case"s":return iS(Uk,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return oS(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]},S:new class extends Mk{priority=30;parse(e,t){return nS(oS(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]},X:new class extends Mk{priority=10;parse(e,t){switch(t){case"X":return aS(Qk,e);case"XX":return aS(Jk,e);case"XXXX":return aS(eS,e);case"XXXXX":return aS(rS,e);default:return aS(tS,e)}}set(e,t,r){return t.timestampIsSet?e:Z_(e,e.getTime()-NS(e)-r)}incompatibleTokens=["t","T","x"]},x:new class extends Mk{priority=10;parse(e,t){switch(t){case"x":return aS(Qk,e);case"xx":return aS(Jk,e);case"xxxx":return aS(eS,e);case"xxxxx":return aS(rS,e);default:return aS(tS,e)}}set(e,t,r){return t.timestampIsSet?e:Z_(e,e.getTime()-NS(e)-r)}incompatibleTokens=["t","T","X"]},t:new class extends Mk{priority=40;parse(e){return sS(e)}set(e,t,r){return[Z_(e,1e3*r),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class extends Mk{priority=20;parse(e){return sS(e)}set(e,t,r){return[Z_(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}},PS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MS=/^'([^]*?)'?$/,IS=/''/g,OS=/\S/,DS=/[a-zA-Z]/;function RS(e,t,r,n){const i=()=>Z_(n?.in||r,NaN),a=Ck(),s=n?.locale??a.locale??mk,o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(!t)return e?i():Y_(r,n?.in);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:s},u=[new Ak(n?.in,r)],d=t.match(AS).map((e=>{const t=e[0];if(t in xk){return(0,xk[t])(e,s.formatLong)}return e})).join("").match(PS),h=[];for(let g of d){!n?.useAdditionalWeekYearTokens&&kk(g)&&Sk(g,t,e),!n?.useAdditionalDayOfYearTokens&&_k(g)&&Sk(g,t,e);const r=g[0],a=TS[r];if(a){const{incompatibleTokens:t}=a;if(Array.isArray(t)){const e=h.find((e=>t.includes(e.token)||e.token===r));if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${g}\` at the same time`)}else if("*"===a.incompatibleTokens&&h.length>0)throw new RangeError(`The format string mustn't contain \`${g}\` and any other token at the same time`);h.push({token:r,fullToken:g});const n=a.run(e,g,s.match,c);if(!n)return i();u.push(n.setter),e=n.rest}else{if(r.match(DS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");if("''"===g?g="'":"'"===r&&(g=g.match(MS)[1].replace(IS,"'")),0!==e.indexOf(g))return i();e=e.slice(g.length)}}if(e.length>0&&OS.test(e))return i();const p=u.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,r)=>r.indexOf(e)===t)).map((e=>u.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let f=Y_(r,n?.in);if(isNaN(+f))return i();const m={};for(const g of p){if(!g.validate(f,c))return i();const e=g.set(f,m,c);Array.isArray(e)?(f=e[0],Object.assign(m,e[1])):f=e}return f}function LS(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function FS(e){return!(!LS(e)&&"number"!==typeof e||isNaN(+Y_(e)))}function $S(e,t){return+Y_(e)<+Y_(t)}function BS(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=Z_.bind(null,e||r.find((e=>"object"===typeof e)));return r.map(i)}function zS(e,t){const r=Y_(e,t?.in);return r.setHours(0,0,0,0),r}function US(e,t,r){const[n,i]=BS(r?.in,e,t),a=zS(n),s=zS(i),o=+a-NS(a),l=+s-NS(s);return Math.round((o-l)/864e5)}function VS(e,t){const r=Y_(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function HS(e,t){const r=Y_(e,t?.in);return US(r,VS(r))+1}function GS(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const WS={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return GS("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):GS(r+1,2)},d:(e,t)=>GS(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>GS(e.getHours()%12||12,t.length),H:(e,t)=>GS(e.getHours(),t.length),m:(e,t)=>GS(e.getMinutes(),t.length),s:(e,t)=>GS(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return GS(Math.trunc(n*Math.pow(10,r-3)),t.length)}},qS="midnight",KS="noon",ZS="morning",YS="afternoon",XS="evening",QS="night",JS={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return WS.y(e,t)},Y:function(e,t,r,n){const i=pS(e,n),a=i>0?i:1-i;if("YY"===t){return GS(a%100,2)}return"Yo"===t?r.ordinalNumber(a,{unit:"year"}):GS(a,t.length)},R:function(e,t){return GS(xS(e),t.length)},u:function(e,t){return GS(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return GS(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return GS(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return WS.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return GS(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=gS(e,n);return"wo"===t?r.ordinalNumber(i,{unit:"week"}):GS(i,t.length)},I:function(e,t,r){const n=bS(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):GS(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):WS.d(e,t)},D:function(e,t,r){const n=HS(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):GS(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return GS(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return GS(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=0===n?7:n;switch(t){case"i":return String(i);case"ii":return GS(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(i=12===n?KS:0===n?qS:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(i=n>=17?XS:n>=12?YS:n>=4?ZS:QS,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return WS.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):WS.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):GS(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):GS(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):WS.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):WS.s(e,t)},S:function(e,t){return WS.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return tj(n);case"XXXX":case"XX":return rj(n);default:return rj(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return tj(n);case"xxxx":case"xx":return rj(n);default:return rj(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ej(n,":");default:return"GMT"+rj(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ej(n,":");default:return"GMT"+rj(n,":")}},t:function(e,t,r){return GS(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return GS(+e,t.length)}};function ej(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),a=n%60;return 0===a?r+String(i):r+String(i)+t+GS(a,2)}function tj(e,t){if(e%60===0){return(e>0?"-":"+")+GS(Math.abs(e)/60,2)}return rj(e,t)}function rj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e);return r+GS(Math.trunc(n/60),2)+t+GS(n%60,2)}const nj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ij=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aj=/^'([^]*?)'?$/,sj=/''/g,oj=/[a-zA-Z]/;function lj(e,t,r){const n=Ek(),i=r?.locale??n.locale??mk,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=Y_(e,r?.in);if(!FS(o))throw new RangeError("Invalid time value");let l=t.match(ij).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,xk[t])(e,i.formatLong)}return e})).join("").match(nj).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:cj(e)};if(JS[t])return{isToken:!0,value:e};if(t.match(oj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map((n=>{if(!n.isToken)return n.value;const a=n.value;(!r?.useAdditionalWeekYearTokens&&kk(a)||!r?.useAdditionalDayOfYearTokens&&_k(a))&&Sk(a,t,String(e));return(0,JS[a[0]])(o,a,i.localize,c)})).join("")}function cj(e){const t=e.match(aj);return t?t[1].replace(sj,"'"):e}function uj(e,t,r){const n=Y_(e,r?.in);return n.setHours(t),n}function dj(e,t,r){const n=Y_(e,r?.in);return n.setMinutes(t),n}function hj(e,t,r){const n=Y_(e,r?.in);return n.setSeconds(t),n}function pj(e,t){const r=Y_(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function fj(e,t){const r=Y_(e,t?.in),n=r.getMonth(),i=n-n%3;return r.setMonth(i,1),r.setHours(0,0,0,0),r}function mj(e,t){const r=Y_(e,t?.in);return r.setHours(23,59,59,999),r}function gj(e,t){const r=Ek(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Y_(e,t?.in),a=i.getDay(),s=6+(a<n?-7:0)-(a-n);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function vj(e,t){const r=Y_(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function xj(e,t,r){const[n,i]=BS(r?.in,e,t);return n.getFullYear()===i.getFullYear()}function yj(e,t,r){const[n,i]=BS(r?.in,e,t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}function bj(e,t,r){const[n,i]=BS(r?.in,e,t);return+fj(n)===+fj(i)}function wj(e,t,r){const[n,i]=BS(r?.in,e,t);return+zS(n)===+zS(i)}function _j(e,t){return+Y_(e)===+Y_(t)}function kj(e,t,r){const n=+Y_(e,r?.in),[i,a]=[+Y_(t.start,r?.in),+Y_(t.end,r?.in)].sort(((e,t)=>e-t));return n>=i&&n<=a}function Sj(e,t){const r=Y_(e,t?.in),n=r.getFullYear(),i=r.getMonth(),a=Z_(r,0);return a.setFullYear(n,i+1,0),a.setHours(0,0,0,0),a.getDate()}function jj(e,t,r){const n=Y_(e,r?.in),i=n.getFullYear(),a=n.getDate(),s=Z_(r?.in||e,0);s.setFullYear(i,t,15),s.setHours(0,0,0,0);const o=Sj(s);return n.setMonth(t,Math.min(a,o)),n}function Ej(e,t,r){const n=Y_(e,r?.in),i=t-(Math.trunc(n.getMonth()/3)+1);return jj(n,n.getMonth()+3*i)}function Cj(e,t){return Y_(e,t?.in).getFullYear()}function Nj(e,t){return Y_(e,t?.in).getMonth()}function Tj(e,t){const r=Y_(e,t?.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function Pj(e,t){const r=Y_(e,t?.in);return Math.trunc(r.getMonth()/3)+1}function Aj(e,t){return Y_(e,t?.in).getHours()}function Mj(e,t){return Y_(e,t?.in).getMinutes()}function Ij(e){return Y_(e).getSeconds()}function Oj(e,t,r){const n=Y_(e,r?.in);if(isNaN(t))return Z_(r?.in||e,NaN);if(!t)return n;const i=n.getDate(),a=Z_(r?.in||e,n.getTime());a.setMonth(n.getMonth()+t+1,0);return i>=a.getDate()?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}function Dj(e,t,r){return Oj(e,-t,r)}function Rj(e,t,r){const[n,i]=BS(r?.in,e,t);return 12*(n.getFullYear()-i.getFullYear())+(n.getMonth()-i.getMonth())}function Lj(e,t,r){return Oj(e,3*t,r)}function Fj(e,t,r){return Lj(e,-t,r)}function $j(e,t,r){const[n,i]=BS(r?.in,e,t);return 4*(n.getFullYear()-i.getFullYear())+(Pj(n)-Pj(i))}function Bj(e,t,r){return Oj(e,12*t,r)}function zj(e,t,r){return Bj(e,-t,r)}function Uj(e,t,r){const[n,i]=BS(r?.in,e,t);return n.getFullYear()-i.getFullYear()}function Vj(e,t){let r,n=t?.in;return e.forEach((e=>{n||"object"!==typeof e||(n=Z_.bind(null,e));const t=Y_(e,n);(!r||r>t||isNaN(+t))&&(r=t)})),Z_(n,r||NaN)}function Hj(e,t){let r,n=t?.in;return e.forEach((e=>{n||"object"!==typeof e||(n=Z_.bind(null,e));const t=Y_(e,n);(!r||r<t||isNaN(+t))&&(r=t)})),Z_(n,r||NaN)}function Gj(e,t,r){return Z_(r?.in||e,+Y_(e)+t)}function Wj(e,t,r){return Gj(e,t*q_,r)}function qj(e,t,r){const n=Y_(e,r?.in);return n.setTime(n.getTime()+t*W_),n}function Kj(e,t,r){return Gj(e,1e3*t,r)}function Zj(e,t){return+Y_(e)>+Y_(t)}function Yj(e,t){return Y_(e,t?.in).getDay()}function Xj(e,t){return Y_(e,t?.in).getDate()}function Qj(e,t,r){return SS(e,7*t,r)}function Jj(e){return+Y_(e)}function eE(e,t,r){const n=Y_(e,r?.in);return isNaN(+n)?Z_(r?.in||e,NaN):(n.setFullYear(t),n)}function tE(e,t,r){const[n,i]=BS(r?.in,e,t),a=rE(n,i),s=Math.abs(US(n,i));n.setDate(n.getDate()-a*s);const o=a*(s-Number(rE(n,i)===-a));return 0===o?0:o}function rE(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function nE(e,t,r){return Qj(e,-t,r)}function iE(e,t,r){return SS(e,-t,r)}function aE(){return"undefined"!==typeof window}function sE(e){return cE(e)?(e.nodeName||"").toLowerCase():"#document"}function oE(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function lE(e){var t;return null==(t=(cE(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function cE(e){return!!aE()&&(e instanceof Node||e instanceof oE(e).Node)}function uE(e){return!!aE()&&(e instanceof Element||e instanceof oE(e).Element)}function dE(e){return!!aE()&&(e instanceof HTMLElement||e instanceof oE(e).HTMLElement)}function hE(e){return!(!aE()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof oE(e).ShadowRoot)}function pE(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=yE(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function fE(e){return["table","td","th"].includes(sE(e))}function mE(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(W){return!1}}))}function gE(e){const t=vE(),r=uE(e)?yE(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!r[e]&&"none"!==r[e]))||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(r.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(r.contain||"").includes(e)))}function vE(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function xE(e){return["html","body","#document"].includes(sE(e))}function yE(e){return oE(e).getComputedStyle(e)}function bE(e){return uE(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function wE(e){if("html"===sE(e))return e;const t=e.assignedSlot||e.parentNode||hE(e)&&e.host||lE(e);return hE(t)?t.host:t}function _E(e){const t=wE(e);return xE(t)?e.ownerDocument?e.ownerDocument.body:e.body:dE(t)&&pE(t)?t:_E(t)}function kE(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const i=_E(e),a=i===(null==(n=e.ownerDocument)?void 0:n.body),s=oE(i);if(a){const e=SE(s);return t.concat(s,s.visualViewport||[],pE(i)?i:[],e&&r?kE(e):[])}return t.concat(i,kE(i,[],r))}function SE(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const jE=["top","right","bottom","left"],EE=Math.min,CE=Math.max,NE=Math.round,TE=Math.floor,PE=e=>({x:e,y:e}),AE={left:"right",right:"left",bottom:"top",top:"bottom"},ME={start:"end",end:"start"};function IE(e,t,r){return CE(e,EE(t,r))}function OE(e,t){return"function"===typeof e?e(t):e}function DE(e){return e.split("-")[0]}function RE(e){return e.split("-")[1]}function LE(e){return"x"===e?"y":"x"}function FE(e){return"y"===e?"height":"width"}function $E(e){return["top","bottom"].includes(DE(e))?"y":"x"}function BE(e){return LE($E(e))}function zE(e){return e.replace(/start|end/g,(e=>ME[e]))}function UE(e){return e.replace(/left|right|bottom|top/g,(e=>AE[e]))}function VE(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function HE(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function GE(e,t,r){let{reference:n,floating:i}=e;const a=$E(t),s=BE(t),o=FE(s),l=DE(t),c="y"===a,u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[o]/2-i[o]/2;let p;switch(l){case"top":p={x:u,y:n.y-i.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-i.width,y:d};break;default:p={x:n.x,y:n.y}}switch(RE(t)){case"start":p[s]-=h*(r&&c?-1:1);break;case"end":p[s]+=h*(r&&c?-1:1)}return p}async function WE(e,t){var r;void 0===t&&(t={});const{x:n,y:i,platform:a,rects:s,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=OE(t,e),f=VE(p),m=o[h?"floating"===d?"reference":"floating":d],g=HE(await a.getClippingRect({element:null==(r=await(null==a.isElement?void 0:a.isElement(m)))||r?m:m.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:n,y:i,width:s.floating.width,height:s.floating.height}:s.reference,x=await(null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),y=await(null==a.isElement?void 0:a.isElement(x))&&await(null==a.getScale?void 0:a.getScale(x))||{x:1,y:1},b=HE(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:x,strategy:l}):v);return{top:(g.top-b.top+f.top)/y.y,bottom:(b.bottom-g.bottom+f.bottom)/y.y,left:(g.left-b.left+f.left)/y.x,right:(b.right-g.right+f.right)/y.x}}function qE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function KE(e){return jE.some((t=>e[t]>=0))}function ZE(e){const t=yE(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=dE(e),a=i?e.offsetWidth:r,s=i?e.offsetHeight:n,o=NE(r)!==a||NE(n)!==s;return o&&(r=a,n=s),{width:r,height:n,$:o}}function YE(e){return uE(e)?e:e.contextElement}function XE(e){const t=YE(e);if(!dE(t))return PE(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=ZE(t);let s=(a?NE(r.width):r.width)/n,o=(a?NE(r.height):r.height)/i;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}const QE=PE(0);function JE(e){const t=oE(e);return vE()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:QE}function eC(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const i=e.getBoundingClientRect(),a=YE(e);let s=PE(1);t&&(n?uE(n)&&(s=XE(n)):s=XE(e));const o=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==oE(e))&&t}(a,r,n)?JE(a):PE(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(a){const e=oE(a),t=n&&uE(n)?oE(n):n;let r=e,i=SE(r);for(;i&&n&&t!==r;){const e=XE(i),t=i.getBoundingClientRect(),n=yE(i),a=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=a,c+=s,r=oE(i),i=SE(r)}}return HE({width:u,height:d,x:l,y:c})}function tC(e,t){const r=bE(e).scrollLeft;return t?t.left+r:eC(lE(e)).left+r}function rC(e,t,r){void 0===r&&(r=!1);const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:tC(e,n)),y:n.top+t.scrollTop}}function nC(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=oE(e),n=lE(e),i=r.visualViewport;let a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const e=vE();(!e||e&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o,y:l}}(e,r);else if("document"===t)n=function(e){const t=lE(e),r=bE(e),n=e.ownerDocument.body,i=CE(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=CE(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-r.scrollLeft+tC(e);const o=-r.scrollTop;return"rtl"===yE(n).direction&&(s+=CE(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:s,y:o}}(lE(e));else if(uE(t))n=function(e,t){const r=eC(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,a=dE(e)?XE(e):PE(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:n*a.y}}(t,r);else{const r=JE(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return HE(n)}function iC(e,t){const r=wE(e);return!(r===t||!uE(r)||xE(r))&&("fixed"===yE(r).position||iC(r,t))}function aC(e,t,r){const n=dE(t),i=lE(t),a="fixed"===r,s=eC(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const l=PE(0);if(n||!n&&!a)if(("body"!==sE(t)||pE(i))&&(o=bE(t)),n){const e=eC(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=tC(i));const c=!i||n||a?PE(0):rC(i,o);return{x:s.left+o.scrollLeft-l.x-c.x,y:s.top+o.scrollTop-l.y-c.y,width:s.width,height:s.height}}function sC(e){return"static"===yE(e).position}function oC(e,t){if(!dE(e)||"fixed"===yE(e).position)return null;if(t)return t(e);let r=e.offsetParent;return lE(e)===r&&(r=r.ownerDocument.body),r}function lC(e,t){const r=oE(e);if(mE(e))return r;if(!dE(e)){let t=wE(e);for(;t&&!xE(t);){if(uE(t)&&!sC(t))return t;t=wE(t)}return r}let n=oC(e,t);for(;n&&fE(n)&&sC(n);)n=oC(n,t);return n&&xE(n)&&sC(n)&&!gE(n)?r:n||function(e){let t=wE(e);for(;dE(t)&&!xE(t);){if(gE(t))return t;if(mE(t))return null;t=wE(t)}return null}(e)||r}const cC={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const a="fixed"===i,s=lE(n),o=!!t&&mE(t.floating);if(n===s||o&&a)return r;let l={scrollLeft:0,scrollTop:0},c=PE(1);const u=PE(0),d=dE(n);if((d||!d&&!a)&&(("body"!==sE(n)||pE(s))&&(l=bE(n)),dE(n))){const e=eC(n);c=XE(n),u.x=e.x+n.clientLeft,u.y=e.y+n.clientTop}const h=!s||d||a?PE(0):rC(s,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:r.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:lE,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a="clippingAncestors"===r?mE(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=kE(e,[],!1).filter((e=>uE(e)&&"body"!==sE(e))),i=null;const a="fixed"===yE(e).position;let s=a?wE(e):e;for(;uE(s)&&!xE(s);){const t=yE(s),r=gE(s);r||"fixed"!==t.position||(i=null),(a?!r&&!i:!r&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||pE(s)&&!r&&iC(e,s))?n=n.filter((e=>e!==s)):i=t,s=wE(s)}return t.set(e,n),n}(t,this._c):[].concat(r),s=[...a,n],o=s[0],l=s.reduce(((e,r)=>{const n=nC(t,r,i);return e.top=CE(n.top,e.top),e.right=EE(n.right,e.right),e.bottom=EE(n.bottom,e.bottom),e.left=CE(n.left,e.left),e}),nC(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:lC,getElementRects:async function(e){const t=this.getOffsetParent||lC,r=this.getDimensions,n=await r(e.floating);return{reference:aC(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=ZE(e);return{width:t,height:r}},getScale:XE,isElement:uE,isRTL:function(e){return"rtl"===yE(e).direction}};function uC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function dC(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:o="function"===typeof IntersectionObserver,animationFrame:l=!1}=n,c=YE(e),u=i||a?[...c?kE(c):[],...kE(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",r,{passive:!0}),a&&e.addEventListener("resize",r)}));const d=c&&o?function(e,t){let r,n=null;const i=lE(e);function a(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function s(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(o||t(),!h||!p)return;const f={rootMargin:-TE(d)+"px "+-TE(i.clientWidth-(u+h))+"px "+-TE(i.clientHeight-(d+p))+"px "+-TE(u)+"px",threshold:CE(0,EE(1,l))||1};let m=!0;function g(t){const n=t[0].intersectionRatio;if(n!==l){if(!m)return s();n?s(!1,n):r=setTimeout((()=>{s(!1,1e-7)}),1e3)}1!==n||uC(c,e.getBoundingClientRect())||s(),m=!1}try{n=new IntersectionObserver(g,{...f,root:i.ownerDocument})}catch(W){n=new IntersectionObserver(g,f)}n.observe(e)}(!0),a}(c,r):null;let h,p=-1,f=null;s&&(f=new ResizeObserver((e=>{let[n]=e;n&&n.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),r()})),c&&!l&&f.observe(c),f.observe(t));let m=l?eC(e):null;return l&&function t(){const n=eC(e);m&&!uC(m,n)&&r();m=n,h=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",r),a&&e.removeEventListener("resize",r)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const hC=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:a,placement:s,middlewareData:o}=t,l=await async function(e,t){const{placement:r,platform:n,elements:i}=e,a=await(null==n.isRTL?void 0:n.isRTL(i.floating)),s=DE(r),o=RE(r),l="y"===$E(r),c=["left","top"].includes(s)?-1:1,u=a&&l?-1:1,d=OE(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&"number"===typeof f&&(p="end"===o?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return s===(null==(r=o.offset)?void 0:r.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}},pC=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=OE(e,t),c={x:r,y:n},u=await WE(t,l),d=$E(DE(i)),h=LE(d);let p=c[h],f=c[d];if(a){const e="y"===h?"bottom":"right";p=IE(p+u["y"===h?"top":"left"],p,p-u[e])}if(s){const e="y"===d?"bottom":"right";f=IE(f+u["y"===d?"top":"left"],f,f-u[e])}const m=o.fn({...t,[h]:p,[d]:f});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[h]:a,[d]:s}}}}}},fC=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=OE(e,t);if(null!=(r=a.arrow)&&r.alignmentOffset)return{};const v=DE(i),x=$E(o),y=DE(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!m?[UE(o)]:function(e){const t=UE(e);return[zE(e),t,zE(t)]}(o)),_="none"!==f;!h&&_&&w.push(...function(e,t,r,n){const i=RE(e);let a=function(e,t,r){const n=["left","right"],i=["right","left"],a=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?a:s;default:return[]}}(DE(e),"start"===r,n);return i&&(a=a.map((e=>e+"-"+i)),t&&(a=a.concat(a.map(zE)))),a}(o,m,f,b));const k=[o,...w],S=await WE(t,g),j=[];let E=(null==(n=a.flip)?void 0:n.overflows)||[];if(u&&j.push(S[v]),d){const e=function(e,t,r){void 0===r&&(r=!1);const n=RE(e),i=BE(e),a=FE(i);let s="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=UE(s)),[s,UE(s)]}(i,s,b);j.push(S[e[0]],S[e[1]])}if(E=[...E,{placement:i,overflows:j}],!j.every((e=>e<=0))){var C,N;const e=((null==(C=a.flip)?void 0:C.index)||0)+1,t=k[e];if(t)return{data:{index:e,overflows:E},reset:{placement:t}};let r=null==(N=E.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:N.placement;if(!r)switch(p){case"bestFit":{var T;const e=null==(T=E.filter((e=>{if(_){const t=$E(e.placement);return t===x||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:T[0];e&&(r=e);break}case"initialPlacement":r=o}if(i!==r)return{reset:{placement:r}}}return{}}}},mC=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:a,platform:s,elements:o}=t,{apply:l=()=>{},...c}=OE(e,t),u=await WE(t,c),d=DE(i),h=RE(i),p="y"===$E(i),{width:f,height:m}=a.floating;let g,v;"top"===d||"bottom"===d?(g=d,v=h===(await(null==s.isRTL?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(v=d,g="end"===h?"top":"bottom");const x=m-u.top-u.bottom,y=f-u.left-u.right,b=EE(m-u[g],x),w=EE(f-u[v],y),_=!t.middlewareData.shift;let k=b,S=w;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(S=y),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(k=x),_&&!h){const e=CE(u.left,0),t=CE(u.right,0),r=CE(u.top,0),n=CE(u.bottom,0);p?S=f-2*(0!==e||0!==t?e+t:CE(u.left,u.right)):k=m-2*(0!==r||0!==n?r+n:CE(u.top,u.bottom))}await l({...t,availableWidth:S,availableHeight:k});const j=await s.getDimensions(o.floating);return f!==j.width||m!==j.height?{reset:{rects:!0}}:{}}}},gC=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=OE(e,t);switch(n){case"referenceHidden":{const e=qE(await WE(t,{...i,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:KE(e)}}}case"escaped":{const e=qE(await WE(t,{...i,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:KE(e)}}}default:return{}}}}},vC=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=OE(e,t)||{};if(null==c)return{};const d=VE(u),h={x:r,y:n},p=BE(i),f=FE(p),m=await s.getDimensions(c),g="y"===p,v=g?"top":"left",x=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=a.reference[f]+a.reference[p]-h[p]-a.floating[f],w=h[p]-a.reference[p],_=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let k=_?_[y]:0;k&&await(null==s.isElement?void 0:s.isElement(_))||(k=o.floating[y]||a.floating[f]);const S=b/2-w/2,j=k/2-m[f]/2-1,E=EE(d[v],j),C=EE(d[x],j),N=E,T=k-m[f]-C,P=k/2-m[f]/2+S,A=IE(N,P,T),M=!l.arrow&&null!=RE(i)&&P!==A&&a.reference[f]/2-(P<N?E:C)-m[f]/2<0,I=M?P<N?P-N:P-T:0;return{[p]:h[p]+I,data:{[p]:A,centerOffset:P-A-I,...M&&{alignmentOffset:I}},reset:M}}}),xC=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:a,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=OE(e,t),u={x:r,y:n},d=$E(i),h=LE(d);let p=u[h],f=u[d];const m=OE(o,t),g="number"===typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===h?"height":"width",t=a.reference[h]-a.floating[e]+g.mainAxis,r=a.reference[h]+a.reference[e]-g.mainAxis;p<t?p=t:p>r&&(p=r)}if(c){var v,x;const e="y"===h?"width":"height",t=["top","left"].includes(DE(i)),r=a.reference[d]-a.floating[e]+(t&&(null==(v=s.offset)?void 0:v[d])||0)+(t?0:g.crossAxis),n=a.reference[d]+a.reference[e]+(t?0:(null==(x=s.offset)?void 0:x[d])||0)-(t?g.crossAxis:0);f<r?f=r:f>n&&(f=n)}return{[h]:p,[d]:f}}}},yC=(e,t,r)=>{const n=new Map,i={platform:cC,...r},a={...i.platform,_c:n};return(async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:s}=r,o=a.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=GE(c,n,l),h=n,p={},f=0;for(let m=0;m<o.length;m++){const{name:r,fn:a}=o[m],{x:g,y:v,data:x,reset:y}=await a({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=v?v:d,p={...p,[r]:{...p[r],...x}},y&&f<=50&&(f++,"object"===typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):y.rects),({x:u,y:d}=GE(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}})(e,t,{...i,platform:a})};var bC="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function wC(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!wC(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!==n--;){const r=i[n];if(("_owner"!==r||!e.$$typeof)&&!wC(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function _C(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function kC(e,t){const r=_C(e);return Math.round(t*r)/r}function SC(e){const r=t.useRef(e);return bC((()=>{r.current=e})),r}function jC(e){void 0===e&&(e={});const{placement:r="bottom",strategy:n="absolute",middleware:i=[],platform:a,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=t.useState({x:0,y:0,strategy:n,placement:r,middlewareData:{},isPositioned:!1}),[p,f]=t.useState(i);wC(p,i)||f(i);const[m,g]=t.useState(null),[v,x]=t.useState(null),y=t.useCallback((e=>{e!==k.current&&(k.current=e,g(e))}),[]),b=t.useCallback((e=>{e!==S.current&&(S.current=e,x(e))}),[]),w=s||m,_=o||v,k=t.useRef(null),S=t.useRef(null),j=t.useRef(d),E=null!=c,C=SC(c),N=SC(a),T=SC(u),P=t.useCallback((()=>{if(!k.current||!S.current)return;const e={placement:r,strategy:n,middleware:p};N.current&&(e.platform=N.current),yC(k.current,S.current,e).then((e=>{const t={...e,isPositioned:!1!==T.current};A.current&&!wC(j.current,t)&&(j.current=t,ci.flushSync((()=>{h(t)})))}))}),[p,r,n,N,T]);bC((()=>{!1===u&&j.current.isPositioned&&(j.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[u]);const A=t.useRef(!1);bC((()=>(A.current=!0,()=>{A.current=!1})),[]),bC((()=>{if(w&&(k.current=w),_&&(S.current=_),w&&_){if(C.current)return C.current(w,_,P);P()}}),[w,_,P,C,E]);const M=t.useMemo((()=>({reference:k,floating:S,setReference:y,setFloating:b})),[y,b]),I=t.useMemo((()=>({reference:w,floating:_})),[w,_]),O=t.useMemo((()=>{const e={position:n,left:0,top:0};if(!I.floating)return e;const t=kC(I.floating,d.x),r=kC(I.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+r+"px)",..._C(I.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,l,I.floating,d.x,d.y]);return t.useMemo((()=>({...d,update:P,refs:M,elements:I,floatingStyles:O})),[d,P,M,I,O])}const EC=e=>({name:"arrow",options:e,fn(t){const{element:r,padding:n}="function"===typeof e?e(t):e;return r&&function(e){return{}.hasOwnProperty.call(e,"current")}(r)?null!=r.current?vC({element:r.current,padding:n}).fn(t):{}:r?vC({element:r,padding:n}).fn(t):{}}}),CC=(e,t)=>({...hC(e),options:[e,t]}),NC=(e,t)=>({...pC(e),options:[e,t]}),TC=(e,t)=>({...xC(e),options:[e,t]}),PC=(e,t)=>({...fC(e),options:[e,t]}),AC=(e,t)=>({...mC(e),options:[e,t]}),MC=(e,t)=>({...gC(e),options:[e,t]}),IC=(e,t)=>({...EC(e),options:[e,t]});const OC={...n},DC=OC.useInsertionEffect||(e=>e());function RC(e){const r=t.useRef((()=>{0}));return DC((()=>{r.current=e})),t.useCallback((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==r.current?void 0:r.current(...t)}),[])}const LC="ArrowUp",FC="ArrowDown",$C="ArrowLeft",BC="ArrowRight";var zC="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;const UC=[$C,BC],VC=[LC,FC];let HC=!1,GC=0;const WC=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+GC++;const qC=OC.useId||function(){const[e,r]=t.useState((()=>HC?WC():void 0));return zC((()=>{null==e&&r(WC())}),[]),t.useEffect((()=>{HC=!0}),[]),e};const KC=t.forwardRef((function(e,r){const{context:{placement:n,elements:{floating:i},middlewareData:{arrow:a,shift:s}},width:o=14,height:l=7,tipRadius:c=0,strokeWidth:u=0,staticOffset:d,stroke:h,d:p,style:{transform:f,...m}={},...g}=e;const v=qC(),[x,y]=t.useState(!1);if(zC((()=>{if(!i)return;"rtl"===yE(i).direction&&y(!0)}),[i]),!i)return null;const[b,w]=n.split("-"),_="top"===b||"bottom"===b;let k=d;(_&&null!=s&&s.x||!_&&null!=s&&s.y)&&(k=null);const S=2*u,j=S/2,E=o/2*(c/-8+1),C=l/2*c/4,N=!!p,T=k&&"end"===w?"bottom":"top";let P=k&&"end"===w?"right":"left";k&&x&&(P="end"===w?"left":"right");const A=null!=(null==a?void 0:a.x)?k||a.x:"",M=null!=(null==a?void 0:a.y)?k||a.y:"",I=p||"M0,0 H"+o+" L"+(o-E)+","+(l-C)+" Q"+o/2+","+l+" "+E+","+(l-C)+" Z",O={top:N?"rotate(180deg)":"",left:N?"rotate(90deg)":"rotate(-90deg)",bottom:N?"":"rotate(180deg)",right:N?"rotate(-90deg)":"rotate(90deg)"}[b];return(0,V.jsxs)("svg",{...g,"aria-hidden":!0,ref:r,width:N?o:o+S,height:o,viewBox:"0 0 "+o+" "+(l>o?l:o),style:{position:"absolute",pointerEvents:"none",[P]:A,[T]:M,[b]:_||N?"100%":"calc(100% - "+S/2+"px)",transform:[O,f].filter((e=>!!e)).join(" "),...m},children:[S>0&&(0,V.jsx)("path",{clipPath:"url(#"+v+")",fill:"none",stroke:h,strokeWidth:S+(p?0:1),d:I}),(0,V.jsx)("path",{stroke:S&&!p?g.fill:"none",d:I}),(0,V.jsx)("clipPath",{id:v,children:(0,V.jsx)("rect",{x:-j,y:j*(N?-1:1),width:o+S,height:o})})]})}));function ZC(){const e=new Map;return{emit(t,r){var n;null==(n=e.get(t))||n.forEach((e=>e(r)))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,(null==(n=e.get(t))?void 0:n.filter((e=>e!==r)))||[])}}}const YC=t.createContext(null),XC=t.createContext(null),QC=()=>{var e;return(null==(e=t.useContext(YC))?void 0:e.id)||null},JC=()=>t.useContext(XC);function eN(e){void 0===e&&(e={});const{nodeId:r}=e,n=function(e){const{open:r=!1,onOpenChange:n,elements:i}=e,a=qC(),s=t.useRef({}),[o]=t.useState((()=>ZC())),l=null!=QC(),[c,u]=t.useState(i.reference),d=RC(((e,t,r)=>{s.current.openEvent=e?t:void 0,o.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)})),h=t.useMemo((()=>({setPositionReference:u})),[]),p=t.useMemo((()=>({reference:c||i.reference||null,floating:i.floating||null,domReference:i.reference})),[c,i.reference,i.floating]);return t.useMemo((()=>({dataRef:s,open:r,onOpenChange:d,elements:p,events:o,floatingId:a,refs:h})),[r,d,p,o,a,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),i=e.rootContext||n,a=i.elements,[s,o]=t.useState(null),[l,c]=t.useState(null),u=(null==a?void 0:a.domReference)||s,d=t.useRef(null),h=JC();zC((()=>{u&&(d.current=u)}),[u]);const p=jC({...e,elements:{...a,...l&&{reference:l}}}),f=t.useCallback((e=>{const t=uE(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;c(t),p.refs.setReference(t)}),[p.refs]),m=t.useCallback((e=>{(uE(e)||null===e)&&(d.current=e,o(e)),(uE(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!uE(e))&&p.refs.setReference(e)}),[p.refs]),g=t.useMemo((()=>({...p.refs,setReference:m,setPositionReference:f,domReference:d})),[p.refs,m,f]),v=t.useMemo((()=>({...p.elements,domReference:u})),[p.elements,u]),x=t.useMemo((()=>({...p,...i,refs:g,elements:v,nodeId:r})),[p,g,v,r,i]);return zC((()=>{i.dataRef.current.floatingContext=x;const e=null==h?void 0:h.nodesRef.current.find((e=>e.id===r));e&&(e.context=x)})),t.useMemo((()=>({...p,context:x,refs:g,elements:v})),[p,g,v,x])}var tN=function(e,t){return tN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},tN(e,t)};function rN(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}tN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var nN=function(){return nN=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},nN.apply(this,arguments)};function iN(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}"function"===typeof SuppressedError&&SuppressedError;var aN,sN=function(e){var r=e.showTimeSelectOnly,n=void 0!==r&&r,i=e.showTime,a=void 0!==i&&i,s=e.className,o=e.children,l=n?"Choose Time":"Choose Date".concat(a?" and Time":"");return t.createElement("div",{className:s,role:"dialog","aria-label":l,"aria-modal":"true"},o)},oN=function(e){var r=e.children,n=e.onClickOutside,i=e.className,a=e.containerRef,s=e.style,o=function(e,r){var n=(0,t.useRef)(null),i=(0,t.useRef)(e);i.current=e;var a=(0,t.useCallback)((function(e){var t,a=e.composed&&e.composedPath&&e.composedPath().find((function(e){return e instanceof Node}))||e.target;n.current&&!n.current.contains(a)&&(r&&a instanceof HTMLElement&&a.classList.contains(r)||null===(t=i.current)||void 0===t||t.call(i,e))}),[r]);return(0,t.useEffect)((function(){return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}}),[a]),n}(n,e.ignoreClass);return t.createElement("div",{className:i,style:s,ref:function(e){o.current=e,a&&(a.current=e)}},r)};function lN(){return"undefined"!==typeof window?window:globalThis}!function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"}(aN||(aN={}));function cN(e){if(null==e)return new Date;var t="string"===typeof e?X_(e):Y_(e);return dN(t)?t:new Date}function uN(e,t,r,n,i){void 0===i&&(i=cN());for(var a=PN(r)||PN(TN()),s=0,o=Array.isArray(t)?t:[t];s<o.length;s++){var l=o[s],c=RS(e,l,i,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});if(dN(c)&&(!n||e===hN(c,l,r)))return c}return null}function dN(e,t){return FS(e)&&!$S(e,new Date("1/1/1800"))}function hN(e,t,r){if("en"===r)return lj(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=r?PN(r):void 0;return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),lj(e,t,{locale:n=n||PN(TN()),useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function pN(e,t){var r=t.dateFormat,n=t.locale,i=Array.isArray(r)&&r.length>0?r[0]:r;return e&&hN(e,i,n)||""}function fN(e,t){var r=t.hour,n=void 0===r?0:r,i=t.minute,a=void 0===i?0:i,s=t.second;return uj(dj(hj(e,void 0===s?0:s),a),n)}function mN(e){return zS(e)}function gN(e,t,r){return hS(e,{locale:PN(t||TN()),weekStartsOn:r})}function vN(e){return pj(e)}function xN(e){return VS(e)}function yN(e){return fj(e)}function bN(){return zS(cN())}function wN(e){return mj(e)}function _N(e){return vj(e)}function kN(e,t){return e&&t?xj(e,t):!e&&!t}function SN(e,t){return e&&t?yj(e,t):!e&&!t}function jN(e,t){return e&&t?bj(e,t):!e&&!t}function EN(e,t){return e&&t?wj(e,t):!e&&!t}function CN(e,t){return e&&t?_j(e,t):!e&&!t}function NN(e,t,r){var n,i=zS(t),a=mj(r);try{n=kj(e,{start:i,end:a})}catch(s){n=!1}return n}function TN(){return lN().__localeId__}function PN(e){if("string"===typeof e){var t=lN();return t.__localeData__?t.__localeData__[e]:void 0}return e}function AN(e,t){return hN(jj(cN(),e),"LLLL",t)}function MN(e,t){return hN(jj(cN(),e),"LLL",t)}function IN(e,t){var r=void 0===t?{}:t,n=r.minDate,i=r.maxDate,a=r.excludeDates,s=r.excludeDateIntervals,o=r.includeDates,l=r.includeDateIntervals,c=r.filterDate;return UN(e,{minDate:n,maxDate:i})||a&&a.some((function(t){return t instanceof Date?EN(e,t):EN(e,t.date)}))||s&&s.some((function(t){var r=t.start,n=t.end;return kj(e,{start:r,end:n})}))||o&&!o.some((function(t){return EN(e,t)}))||l&&!l.some((function(t){var r=t.start,n=t.end;return kj(e,{start:r,end:n})}))||c&&!c(cN(e))||!1}function ON(e,t){var r=void 0===t?{}:t,n=r.excludeDates,i=r.excludeDateIntervals;return i&&i.length>0?i.some((function(t){var r=t.start,n=t.end;return kj(e,{start:r,end:n})})):n&&n.some((function(t){var r;return t instanceof Date?EN(e,t):EN(e,null!==(r=t.date)&&void 0!==r?r:new Date)}))||!1}function DN(e,t){var r=void 0===t?{}:t,n=r.minDate,i=r.maxDate,a=r.excludeDates,s=r.includeDates,o=r.filterDate;return UN(e,{minDate:n?pj(n):void 0,maxDate:i?vj(i):void 0})||(null===a||void 0===a?void 0:a.some((function(t){return SN(e,t instanceof Date?t:t.date)})))||s&&!s.some((function(t){return SN(e,t)}))||o&&!o(cN(e))||!1}function RN(e,t,r,n){var i=Cj(e),a=Nj(e),s=Cj(t),o=Nj(t),l=Cj(n);return i===s&&i===l?a<=r&&r<=o:i<s&&(l===i&&a<=r||l===s&&o>=r||l<s&&l>i)}function LN(e,t){var r=void 0===t?{}:t,n=r.minDate,i=r.maxDate,a=r.excludeDates,s=r.includeDates;return UN(e,{minDate:n,maxDate:i})||a&&a.some((function(t){return SN(t instanceof Date?t:t.date,e)}))||s&&!s.some((function(t){return SN(t,e)}))||!1}function FN(e,t){var r=void 0===t?{}:t,n=r.minDate,i=r.maxDate,a=r.excludeDates,s=r.includeDates,o=r.filterDate;return UN(e,{minDate:n,maxDate:i})||(null===a||void 0===a?void 0:a.some((function(t){return jN(e,t instanceof Date?t:t.date)})))||s&&!s.some((function(t){return jN(e,t)}))||o&&!o(cN(e))||!1}function $N(e,t,r){if(!t||!r)return!1;if(!FS(t)||!FS(r))return!1;var n=Cj(t),i=Cj(r);return n<=e&&i>=e}function BN(e,t){var r=void 0===t?{}:t,n=r.minDate,i=r.maxDate,a=r.excludeDates,s=r.includeDates,o=r.filterDate,l=new Date(e,0,1);return UN(l,{minDate:n?VS(n):void 0,maxDate:i?Tj(i):void 0})||(null===a||void 0===a?void 0:a.some((function(e){return kN(l,e instanceof Date?e:e.date)})))||s&&!s.some((function(e){return kN(l,e)}))||o&&!o(cN(l))||!1}function zN(e,t,r,n){var i=Cj(e),a=Pj(e),s=Cj(t),o=Pj(t),l=Cj(n);return i===s&&i===l?a<=r&&r<=o:i<s&&(l===i&&a<=r||l===s&&o>=r||l<s&&l>i)}function UN(e,t){var r,n=void 0===t?{}:t,i=n.minDate,a=n.maxDate;return null!==(r=i&&US(e,i)<0||a&&US(e,a)>0)&&void 0!==r&&r}function VN(e,t){return t.some((function(t){return Aj(t)===Aj(e)&&Mj(t)===Mj(e)&&Ij(t)===Ij(e)}))}function HN(e,t){var r=void 0===t?{}:t,n=r.excludeTimes,i=r.includeTimes,a=r.filterTime;return n&&VN(e,n)||i&&!VN(e,i)||a&&!a(e)||!1}function GN(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var i=cN();i=hj(i=dj(i=uj(i,Aj(e)),Mj(e)),Ij(e));var a=cN();a=hj(a=dj(a=uj(a,Aj(r)),Mj(r)),Ij(r));var s,o=cN();o=hj(o=dj(o=uj(o,Aj(n)),Mj(n)),Ij(n));try{s=!kj(i,{start:a,end:o})}catch(l){s=!1}return s}function WN(e,t){var r=void 0===t?{}:t,n=r.minDate,i=r.includeDates,a=Dj(e,1);return n&&Rj(n,a)>0||i&&i.every((function(e){return Rj(e,a)>0}))||!1}function qN(e,t){var r=void 0===t?{}:t,n=r.maxDate,i=r.includeDates,a=Oj(e,1);return n&&Rj(a,n)>0||i&&i.every((function(e){return Rj(a,e)>0}))||!1}function KN(e,t){var r=void 0===t?{}:t,n=r.minDate,i=r.includeDates,a=zj(e,1);return n&&Uj(n,a)>0||i&&i.every((function(e){return Uj(e,a)>0}))||!1}function ZN(e,t){var r=void 0===t?{}:t,n=r.maxDate,i=r.includeDates,a=Bj(e,1);return n&&Uj(a,n)>0||i&&i.every((function(e){return Uj(a,e)>0}))||!1}function YN(e){var t=e.minDate,r=e.includeDates;return r&&t?Vj(r.filter((function(e){return US(e,t)>=0}))):r?Vj(r):t}function XN(e){var t=e.maxDate,r=e.includeDates;return r&&t?Hj(r.filter((function(e){return US(e,t)<=0}))):r?Hj(r):t}function QN(e,t){var r;void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--highlighted");for(var n=new Map,i=0,a=e.length;i<a;i++){var s=e[i];if(LS(s)){var o=hN(s,"MM.dd.yyyy");(p=n.get(o)||[]).includes(t)||(p.push(t),n.set(o,p))}else if("object"===typeof s){var l=null!==(r=Object.keys(s)[0])&&void 0!==r?r:"",c=s[l];if("string"===typeof l&&Array.isArray(c))for(var u=0,d=c.length;u<d;u++){var h=c[u];if(h){var p;o=hN(h,"MM.dd.yyyy");(p=n.get(o)||[]).includes(l)||(p.push(l),n.set(o,p))}}}}return n}function JN(e,t){void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach((function(e){var n=e.date,i=e.holidayName;if(LS(n)){var a=hN(n,"MM.dd.yyyy"),s=r.get(a)||{className:"",holidayNames:[]};if(!("className"in s)||s.className!==t||(o=s.holidayNames,l=[i],o.length!==l.length||!o.every((function(e,t){return e===l[t]})))){var o,l;s.className=t;var c=s.holidayNames;s.holidayNames=c?iN(iN([],c,!0),[i],!1):[i],r.set(a,s)}}})),r}function eT(e,t,r,n,i){for(var a=i.length,s=[],o=0;o<a;o++){var l=e,c=i[o];c&&(l=Kj(l=qj(l=Wj(l,Aj(c)),Mj(c)),Ij(c)));var u=qj(e,(r+1)*n);Zj(l,t)&&$S(l,u)&&void 0!=c&&s.push(c)}return s}function tT(e){return e<10?"0".concat(e):"".concat(e)}function rT(e,t){void 0===t&&(t=12);var r=Math.ceil(Cj(e)/t)*t;return{startPeriod:r-(t-1),endPeriod:r}}function nT(e){var t=e.getSeconds(),r=e.getMilliseconds();return Y_(e.getTime()-1e3*t-r)}function iT(e){if(!LS(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function aT(e,t){if(!LS(e)||!LS(t))throw new Error("Invalid date received");return $S(iT(e),iT(t))}function sT(e){return e.key===aN.Space}var oT,lT=function(e){function r(r){var n=e.call(this,r)||this;return n.inputRef=t.createRef(),n.onTimeChange=function(e){var t,r;n.setState({time:e});var i=n.props.date,a=i instanceof Date&&!isNaN(+i)?i:new Date;if(null===e||void 0===e?void 0:e.includes(":")){var s=e.split(":"),o=s[0],l=s[1];a.setHours(Number(o)),a.setMinutes(Number(l))}null===(r=(t=n.props).onChange)||void 0===r||r.call(t,a)},n.renderTimeInput=function(){var e=n.state.time,r=n.props,i=r.date,a=r.timeString,s=r.customTimeInput;return s?(0,t.cloneElement)(s,{date:i,value:e,onChange:n.onTimeChange}):t.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var e;null===(e=n.inputRef.current)||void 0===e||e.focus()},required:!0,value:e,onChange:function(e){n.onTimeChange(e.target.value||a)}})},n.state={time:n.props.timeString},n}return rN(r,e),r.getDerivedStateFromProps=function(e,t){return e.timeString!==t.time?{time:e.timeString}:null},r.prototype.render=function(){return t.createElement("div",{className:"react-datepicker__input-time-container"},t.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),t.createElement("div",{className:"react-datepicker-time__input-container"},t.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},r}(t.Component),cT=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.dayEl=(0,t.createRef)(),r.handleClick=function(e){!r.isDisabled()&&r.props.onClick&&r.props.onClick(e)},r.handleMouseEnter=function(e){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(e)},r.handleOnKeyDown=function(e){var t,n;e.key===aN.Space&&(e.preventDefault(),e.key=aN.Enter),null===(n=(t=r.props).handleOnKeyDown)||void 0===n||n.call(t,e)},r.isSameDay=function(e){return EN(r.props.day,e)},r.isKeyboardSelected=function(){var e;if(r.props.disabledKeyboardNavigation)return!1;var t=r.props.selectsMultiple?null===(e=r.props.selectedDates)||void 0===e?void 0:e.some((function(e){return r.isSameDayOrWeek(e)})):r.isSameDayOrWeek(r.props.selected),n=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!t&&r.isSameDayOrWeek(r.props.preSelection)&&!n},r.isDisabled=function(e){return void 0===e&&(e=r.props.day),IN(e,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return ON(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return EN(r.props.day,gN(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(e){return r.props.showWeekPicker&&EN(e,gN(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(e){return r.isSameDay(e)||r.isSameWeek(e)},r.getHighLightedClass=function(){var e=r.props,t=e.day,n=e.highlightDates;if(!n)return!1;var i=hN(t,"MM.dd.yyyy");return n.get(i)},r.getHolidaysClass=function(){var e,t=r.props,n=t.day,i=t.holidays;if(!i)return[void 0];var a=hN(n,"MM.dd.yyyy");return i.has(a)?[null===(e=i.get(a))||void 0===e?void 0:e.className]:[void 0]},r.isInRange=function(){var e=r.props,t=e.day,n=e.startDate,i=e.endDate;return!(!n||!i)&&NN(t,n,i)},r.isInSelectingRange=function(){var e,t=r.props,n=t.day,i=t.selectsStart,a=t.selectsEnd,s=t.selectsRange,o=t.selectsDisabledDaysInRange,l=t.startDate,c=t.endDate,u=null!==(e=r.props.selectingDate)&&void 0!==e?e:r.props.preSelection;return!(!(i||a||s)||!u||!o&&r.isDisabled())&&(i&&c&&($S(u,c)||CN(u,c))?NN(n,u,c):(a&&l&&(Zj(u,l)||CN(u,l))||!(!s||!l||c||!Zj(u,l)&&!CN(u,l)))&&NN(n,l,u))},r.isSelectingRangeStart=function(){var e;if(!r.isInSelectingRange())return!1;var t=r.props,n=t.day,i=t.startDate,a=t.selectsStart,s=null!==(e=r.props.selectingDate)&&void 0!==e?e:r.props.preSelection;return EN(n,a?s:i)},r.isSelectingRangeEnd=function(){var e;if(!r.isInSelectingRange())return!1;var t=r.props,n=t.day,i=t.endDate,a=t.selectsEnd,s=t.selectsRange,o=null!==(e=r.props.selectingDate)&&void 0!==e?e:r.props.preSelection;return EN(n,a||s?o:i)},r.isRangeStart=function(){var e=r.props,t=e.day,n=e.startDate,i=e.endDate;return!(!n||!i)&&EN(n,t)},r.isRangeEnd=function(){var e=r.props,t=e.day,n=e.startDate,i=e.endDate;return!(!n||!i)&&EN(i,t)},r.isWeekend=function(){var e=Yj(r.props.day);return 0===e||6===e},r.isAfterMonth=function(){return void 0!==r.props.month&&(r.props.month+1)%12===Nj(r.props.day)},r.isBeforeMonth=function(){return void 0!==r.props.month&&(Nj(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(cN())},r.isSelected=function(){var e;return r.props.selectsMultiple?null===(e=r.props.selectedDates)||void 0===e?void 0:e.some((function(e){return r.isSameDayOrWeek(e)})):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(e){return vi("react-datepicker__day",r.props.dayClassName?r.props.dayClassName(e):void 0,"react-datepicker__day--"+function(e,t){return hN(e,"ddd",t)}(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var e=r.props,t=e.day,n=e.ariaLabelPrefixWhenEnabled,i=void 0===n?"Choose":n,a=e.ariaLabelPrefixWhenDisabled,s=void 0===a?"Not available":a,o=r.isDisabled()||r.isExcluded()?s:i;return"".concat(o," ").concat(hN(t,"PPPP",r.props.locale))},r.getTitle=function(){var e=r.props,t=e.day,n=e.holidays,i=void 0===n?new Map:n,a=e.excludeDates,s=hN(t,"MM.dd.yyyy"),o=[];return i.has(s)&&o.push.apply(o,i.get(s).holidayNames),r.isExcluded()&&o.push(null===a||void 0===a?void 0:a.filter((function(e){return e instanceof Date?EN(e,t):EN(null===e||void 0===e?void 0:e.date,t)})).map((function(e){if(!(e instanceof Date))return null===e||void 0===e?void 0:e.message}))),o.join(", ")},r.getTabIndex=function(){var e=r.props.selected,t=r.props.preSelection;return(!r.props.showWeekPicker||!r.props.showWeekNumber&&r.isStartOfWeek())&&(r.isKeyboardSelected()||r.isSameDay(e)&&EN(t,e))?0:-1},r.handleFocusDay=function(){var e;r.shouldFocusDay()&&(null===(e=r.dayEl.current)||void 0===e||e.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(Xj(r.props.day),r.props.day):Xj(r.props.day)},r.render=function(){return t.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),""!==r.getTitle()&&t.createElement("span",{className:"overlay"},r.getTitle()))},r}return rN(r,e),r.prototype.componentDidMount=function(){this.handleFocusDay()},r.prototype.componentDidUpdate=function(){this.handleFocusDay()},r.prototype.shouldFocusDay=function(){var e=!1;return 0===this.getTabIndex()&&this.isSameDay(this.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},r.prototype.isDayActiveElement=function(){var e,t,r;return(null===(t=null===(e=this.props.containerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.contains(document.activeElement))&&(null===(r=document.activeElement)||void 0===r?void 0:r.classList.contains("react-datepicker__day"))},r.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},r}(t.Component),uT=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.weekNumberEl=(0,t.createRef)(),r.handleClick=function(e){r.props.onClick&&r.props.onClick(e)},r.handleOnKeyDown=function(e){var t,n;e.key===aN.Space&&(e.preventDefault(),e.key=aN.Enter),null===(n=(t=r.props).handleOnKeyDown)||void 0===n||n.call(t,e)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!EN(r.props.date,r.props.selected)&&EN(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||EN(r.props.date,r.props.selected)&&EN(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(e){var t=!1;0===r.getTabIndex()&&!(null===e||void 0===e?void 0:e.isInputFocused)&&EN(r.props.date,r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(t=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(t=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(t=!0)),t&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return rN(r,e),Object.defineProperty(r,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},r.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},r.prototype.render=function(){var e=this.props,n=e.weekNumber,i=e.isWeekDisabled,a=e.ariaLabelPrefix,s=void 0===a?r.defaultProps.ariaLabelPrefix:a,o=e.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o&&!i,"react-datepicker__week-number--selected":!!o&&EN(this.props.date,this.props.selected)};return t.createElement("div",{ref:this.weekNumberEl,className:vi(l),"aria-label":"".concat(s," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},r}(t.Component),dT=function(e){function r(){var n=null!==e&&e.apply(this,arguments)||this;return n.isDisabled=function(e){return IN(e,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)},n.handleDayMouseEnter=function(e){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(e)},n.handleWeekClick=function(e,t,i){for(var a,s,o,l=new Date(e),c=0;c<7;c++){var u=new Date(e);if(u.setDate(u.getDate()+c),!n.isDisabled(u)){l=u;break}}"function"===typeof n.props.onWeekSelect&&n.props.onWeekSelect(l,t,i),n.props.showWeekPicker&&n.handleDayClick(l,i),(null!==(a=n.props.shouldCloseOnSelect)&&void 0!==a?a:r.defaultProps.shouldCloseOnSelect)&&(null===(o=(s=n.props).setOpen)||void 0===o||o.call(s,!1))},n.formatWeekNumber=function(e){return n.props.formatWeekNumber?n.props.formatWeekNumber(e):function(e){return bS(e)}(e)},n.isWeekDisabled=function(){for(var e=n.startOfWeek(),t=SS(e,6),r=new Date(e);r<=t;){if(!n.isDisabled(r))return!1;r=SS(r,1)}return!0},n.renderDays=function(){var e=n.startOfWeek(),i=[],a=n.formatWeekNumber(e);if(n.props.showWeekNumber){var s=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,e,a):void 0;i.push(t.createElement(uT,nN({key:"W"},r.defaultProps,n.props,{weekNumber:a,isWeekDisabled:n.isWeekDisabled(),date:e,onClick:s})))}return i.concat([0,1,2,3,4,5,6].map((function(i){var a=SS(e,i);return t.createElement(cT,nN({},r.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:a.valueOf(),day:a,onClick:n.handleDayClick.bind(n,a),onMouseEnter:n.handleDayMouseEnter.bind(n,a)}))})))},n.startOfWeek=function(){return gN(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!EN(n.startOfWeek(),n.props.selected)&&EN(n.startOfWeek(),n.props.preSelection)},n}return rN(r,e),Object.defineProperty(r,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),r.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":EN(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return t.createElement("div",{className:vi(e)},this.renderDays())},r}(t.Component),hT="two_columns",pT="three_columns",fT="four_columns",mT=((oT={})[hT]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},oT[pT]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},oT[fT]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},oT);function gT(e,t){return e?fT:t?hT:pT}var vT=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.MONTH_REFS=iN([],Array(12),!0).map((function(){return(0,t.createRef)()})),r.QUARTER_REFS=iN([],Array(4),!0).map((function(){return(0,t.createRef)()})),r.isDisabled=function(e){return IN(e,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(e){return ON(e,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(e,t){var n,i;null===(i=(n=r.props).onDayClick)||void 0===i||i.call(n,e,t,r.props.orderInDisplay)},r.handleDayMouseEnter=function(e){var t,n;null===(n=(t=r.props).onDayMouseEnter)||void 0===n||n.call(t,e)},r.handleMouseLeave=function(){var e,t;null===(t=(e=r.props).onMouseLeave)||void 0===t||t.call(e)},r.isRangeStartMonth=function(e){var t=r.props,n=t.day,i=t.startDate,a=t.endDate;return!(!i||!a)&&SN(jj(n,e),i)},r.isRangeStartQuarter=function(e){var t=r.props,n=t.day,i=t.startDate,a=t.endDate;return!(!i||!a)&&jN(Ej(n,e),i)},r.isRangeEndMonth=function(e){var t=r.props,n=t.day,i=t.startDate,a=t.endDate;return!(!i||!a)&&SN(jj(n,e),a)},r.isRangeEndQuarter=function(e){var t=r.props,n=t.day,i=t.startDate,a=t.endDate;return!(!i||!a)&&jN(Ej(n,e),a)},r.isInSelectingRangeMonth=function(e){var t,n=r.props,i=n.day,a=n.selectsStart,s=n.selectsEnd,o=n.selectsRange,l=n.startDate,c=n.endDate,u=null!==(t=r.props.selectingDate)&&void 0!==t?t:r.props.preSelection;return!(!(a||s||o)||!u)&&(a&&c?RN(u,c,e,i):(s&&l||!(!o||!l||c))&&RN(l,u,e,i))},r.isSelectingMonthRangeStart=function(e){var t;if(!r.isInSelectingRangeMonth(e))return!1;var n=r.props,i=n.day,a=n.startDate,s=n.selectsStart,o=jj(i,e),l=null!==(t=r.props.selectingDate)&&void 0!==t?t:r.props.preSelection;return SN(o,s?l:a)},r.isSelectingMonthRangeEnd=function(e){var t;if(!r.isInSelectingRangeMonth(e))return!1;var n=r.props,i=n.day,a=n.endDate,s=n.selectsEnd,o=n.selectsRange,l=jj(i,e),c=null!==(t=r.props.selectingDate)&&void 0!==t?t:r.props.preSelection;return SN(l,s||o?c:a)},r.isInSelectingRangeQuarter=function(e){var t,n=r.props,i=n.day,a=n.selectsStart,s=n.selectsEnd,o=n.selectsRange,l=n.startDate,c=n.endDate,u=null!==(t=r.props.selectingDate)&&void 0!==t?t:r.props.preSelection;return!(!(a||s||o)||!u)&&(a&&c?zN(u,c,e,i):(s&&l||!(!o||!l||c))&&zN(l,u,e,i))},r.isWeekInMonth=function(e){var t=r.props.day,n=SS(e,6);return SN(e,t)||SN(n,t)},r.isCurrentMonth=function(e,t){return Cj(e)===Cj(cN())&&t===Nj(cN())},r.isCurrentQuarter=function(e,t){return Cj(e)===Cj(cN())&&t===Pj(cN())},r.isSelectedMonth=function(e,t,r){return Nj(r)===t&&Cj(e)===Cj(r)},r.isSelectMonthInList=function(e,t,n){return n.some((function(n){return r.isSelectedMonth(e,t,n)}))},r.isSelectedQuarter=function(e,t,r){return Pj(e)===t&&Cj(e)===Cj(r)},r.renderWeeks=function(){for(var e=[],n=r.props.fixedHeight,i=0,a=!1,s=gN(vN(r.props.day),r.props.locale,r.props.calendarStartDay),o=r.props.selected?function(e){return r.props.showWeekPicker?gN(e,r.props.locale,r.props.calendarStartDay):r.props.selected}(r.props.selected):void 0,l=r.props.preSelection?function(e){return r.props.showWeekPicker?gN(e,r.props.locale,r.props.calendarStartDay):r.props.preSelection}(r.props.preSelection):void 0;e.push(t.createElement(dT,nN({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:i,day:s,month:Nj(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:o,preSelection:l,showWeekNumber:r.props.showWeekNumbers}))),!a;){i++,s=Qj(s,1);var c=n&&i>=6,u=!n&&!r.isWeekInMonth(s);if(c||u){if(!r.props.peekNextMonth)break;a=!0}}return e},r.onMonthClick=function(e,t){var n=r.isMonthDisabledForLabelDate(t),i=n.isDisabled,a=n.labelDate;i||r.handleDayClick(vN(a),e)},r.onMonthMouseEnter=function(e){var t=r.isMonthDisabledForLabelDate(e),n=t.isDisabled,i=t.labelDate;n||r.handleDayMouseEnter(vN(i))},r.handleMonthNavigation=function(e,t){var n,i,a,s;null===(i=(n=r.props).setPreSelection)||void 0===i||i.call(n,t),null===(s=null===(a=r.MONTH_REFS[e])||void 0===a?void 0:a.current)||void 0===s||s.focus()},r.handleKeyboardNavigation=function(e,t,n){var i,a=r.props,s=a.selected,o=a.preSelection,l=a.setPreSelection,c=a.minDate,u=a.maxDate,d=a.showFourColumnMonthYearPicker,h=a.showTwoColumnMonthYearPicker;if(o){var p=gT(d,h),f=r.getVerticalOffset(p),m=null===(i=mT[p])||void 0===i?void 0:i.grid,g=function(e,t,r){var n,i,a=t,s=r;switch(e){case aN.ArrowRight:a=Oj(t,1),s=11===r?0:r+1;break;case aN.ArrowLeft:a=Dj(t,1),s=0===r?11:r-1;break;case aN.ArrowUp:a=Dj(t,f),s=(null===(n=null===m||void 0===m?void 0:m[0])||void 0===n?void 0:n.includes(r))?r+12-f:r-f;break;case aN.ArrowDown:a=Oj(t,f),s=(null===(i=null===m||void 0===m?void 0:m[m.length-1])||void 0===i?void 0:i.includes(r))?r-12+f:r+f}return{newCalculatedDate:a,newCalculatedMonth:s}};if(t!==aN.Enter){var v=function(e,t,n){for(var i=e,a=!1,s=0,o=g(i,t,n),l=o.newCalculatedDate,d=o.newCalculatedMonth;!a;){if(s>=40){l=t,d=n;break}var h;if(c&&l<c)i=aN.ArrowRight,l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;if(u&&l>u)i=aN.ArrowLeft,l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;if(LN(l,r.props))l=(h=g(i,l,d)).newCalculatedDate,d=h.newCalculatedMonth;else a=!0;s++}return{newCalculatedDate:l,newCalculatedMonth:d}}(t,o,n),x=v.newCalculatedDate,y=v.newCalculatedMonth;switch(t){case aN.ArrowRight:case aN.ArrowLeft:case aN.ArrowUp:case aN.ArrowDown:r.handleMonthNavigation(y,x)}}else r.isMonthDisabled(n)||(r.onMonthClick(e,n),null===l||void 0===l||l(s))}},r.getVerticalOffset=function(e){var t,r;return null!==(r=null===(t=mT[e])||void 0===t?void 0:t.verticalNavigationOffset)&&void 0!==r?r:0},r.onMonthKeyDown=function(e,t){var n=r.props,i=n.disabledKeyboardNavigation,a=n.handleOnMonthKeyDown,s=e.key;s!==aN.Tab&&e.preventDefault(),i||r.handleKeyboardNavigation(e,s,t),a&&a(e)},r.onQuarterClick=function(e,t){var n=Ej(r.props.day,t);FN(n,r.props)||r.handleDayClick(yN(n),e)},r.onQuarterMouseEnter=function(e){var t=Ej(r.props.day,e);FN(t,r.props)||r.handleDayMouseEnter(yN(t))},r.handleQuarterNavigation=function(e,t){var n,i,a,s;r.isDisabled(t)||r.isExcluded(t)||(null===(i=(n=r.props).setPreSelection)||void 0===i||i.call(n,t),null===(s=null===(a=r.QUARTER_REFS[e-1])||void 0===a?void 0:a.current)||void 0===s||s.focus())},r.onQuarterKeyDown=function(e,t){var n,i,a=e.key;if(!r.props.disabledKeyboardNavigation)switch(a){case aN.Enter:r.onQuarterClick(e,t),null===(i=(n=r.props).setPreSelection)||void 0===i||i.call(n,r.props.selected);break;case aN.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(4===t?1:t+1,Lj(r.props.preSelection,1));break;case aN.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(1===t?4:t-1,Fj(r.props.preSelection,1))}},r.isMonthDisabledForLabelDate=function(e){var t,n=r.props,i=n.day,a=n.minDate,s=n.maxDate,o=n.excludeDates,l=n.includeDates,c=jj(i,e);return{isDisabled:null!==(t=(a||s||o||l)&&DN(c,r.props))&&void 0!==t&&t,labelDate:c}},r.isMonthDisabled=function(e){return r.isMonthDisabledForLabelDate(e).isDisabled},r.getMonthClassNames=function(e){var t=r.props,n=t.day,i=t.startDate,a=t.endDate,s=t.preSelection,o=t.monthClassName,l=o?o(jj(n,e)):void 0,c=r.getSelection();return vi("react-datepicker__month-text","react-datepicker__month-".concat(e),l,{"react-datepicker__month-text--disabled":r.isMonthDisabled(e),"react-datepicker__month-text--selected":c?r.isSelectMonthInList(n,e,c):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&s&&r.isSelectedMonth(n,e,s)&&!r.isMonthDisabled(e),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(e),"react-datepicker__month-text--in-range":i&&a?RN(i,a,e,n):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(e),"react-datepicker__month-text--range-end":r.isRangeEndMonth(e),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(e),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(e),"react-datepicker__month-text--today":r.isCurrentMonth(n,e)})},r.getTabIndex=function(e){if(null==r.props.preSelection)return"-1";var t=Nj(r.props.preSelection),n=r.isMonthDisabledForLabelDate(t).isDisabled;return e!==t||n||r.props.disabledKeyboardNavigation?"-1":"0"},r.getQuarterTabIndex=function(e){if(null==r.props.preSelection)return"-1";var t=Pj(r.props.preSelection),n=FN(r.props.day,r.props);return e!==t||n||r.props.disabledKeyboardNavigation?"-1":"0"},r.getAriaLabel=function(e){var t=r.props,n=t.chooseDayAriaLabelPrefix,i=void 0===n?"Choose":n,a=t.disabledDayAriaLabelPrefix,s=void 0===a?"Not available":a,o=t.day,l=t.locale,c=jj(o,e),u=r.isDisabled(c)||r.isExcluded(c)?s:i;return"".concat(u," ").concat(hN(c,"MMMM yyyy",l))},r.getQuarterClassNames=function(e){var t=r.props,n=t.day,i=t.startDate,a=t.endDate,s=t.selected,o=t.minDate,l=t.maxDate,c=t.excludeDates,u=t.includeDates,d=t.filterDate,h=t.preSelection,p=t.disabledKeyboardNavigation,f=(o||l||c||u||d)&&FN(Ej(n,e),r.props);return vi("react-datepicker__quarter-text","react-datepicker__quarter-".concat(e),{"react-datepicker__quarter-text--disabled":f,"react-datepicker__quarter-text--selected":s?r.isSelectedQuarter(n,e,s):void 0,"react-datepicker__quarter-text--keyboard-selected":!p&&h&&r.isSelectedQuarter(n,e,h)&&!f,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(e),"react-datepicker__quarter-text--in-range":i&&a?zN(i,a,e,n):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(e),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(e),"react-datepicker__quarter-text--today":r.isCurrentQuarter(n,e)})},r.getMonthContent=function(e){var t=r.props,n=t.showFullMonthYearPicker,i=t.renderMonthContent,a=t.locale,s=t.day,o=MN(e,a),l=AN(e,a);return i?i(e,o,l,s):n?l:o},r.getQuarterContent=function(e){var t,n=r.props,i=n.renderQuarterContent,a=function(e,t){return hN(Ej(cN(),e),"QQQ",t)}(e,n.locale);return null!==(t=null===i||void 0===i?void 0:i(e,a))&&void 0!==t?t:a},r.renderMonths=function(){var e,n=r.props,i=n.showTwoColumnMonthYearPicker,a=n.showFourColumnMonthYearPicker,s=n.day,o=n.selected,l=null===(e=mT[gT(a,i)])||void 0===e?void 0:e.grid;return null===l||void 0===l?void 0:l.map((function(e,n){return t.createElement("div",{className:"react-datepicker__month-wrapper",key:n},e.map((function(e,n){return t.createElement("div",{ref:r.MONTH_REFS[e],key:n,onClick:function(t){r.onMonthClick(t,e)},onKeyDown:function(t){sT(t)&&(t.preventDefault(),t.key=aN.Enter),r.onMonthKeyDown(t,e)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(e)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(e)}:void 0,tabIndex:Number(r.getTabIndex(e)),className:r.getMonthClassNames(e),"aria-disabled":r.isMonthDisabled(e),role:"option","aria-label":r.getAriaLabel(e),"aria-current":r.isCurrentMonth(s,e)?"date":void 0,"aria-selected":o?r.isSelectedMonth(s,e,o):void 0},r.getMonthContent(e))})))}))},r.renderQuarters=function(){var e=r.props,n=e.day,i=e.selected;return t.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(e,a){return t.createElement("div",{key:a,ref:r.QUARTER_REFS[a],role:"option",onClick:function(t){r.onQuarterClick(t,e)},onKeyDown:function(t){r.onQuarterKeyDown(t,e)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(e)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(e)}:void 0,className:r.getQuarterClassNames(e),"aria-selected":i?r.isSelectedQuarter(n,e,i):void 0,tabIndex:Number(r.getQuarterTabIndex(e)),"aria-current":r.isCurrentQuarter(n,e)?"date":void 0},r.getQuarterContent(e))})))},r.getClassNames=function(){var e=r.props,t=e.selectingDate,n=e.selectsStart,i=e.selectsEnd;return vi("react-datepicker__month",{"react-datepicker__month--selecting-range":t&&(n||i)},{"react-datepicker__monthPicker":e.showMonthYearPicker},{"react-datepicker__quarterPicker":e.showQuarterYearPicker},{"react-datepicker__weekPicker":e.showWeekPicker})},r}return rN(r,e),r.prototype.getSelection=function(){var e=this.props,t=e.selected,r=e.selectedDates;return e.selectsMultiple?r:t?[t]:void 0},r.prototype.render=function(){var e=this.props,r=e.showMonthYearPicker,n=e.showQuarterYearPicker,i=e.day,a=e.ariaLabelPrefix,s=void 0===a?"Month ":a,o=s?s.trim()+" ":"";return t.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(o).concat(hN(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():n?this.renderQuarters():this.renderWeeks())},r}(t.Component),xT=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(e){return r.props.month===e},r.renderOptions=function(){return r.props.monthNames.map((function(e,n){return t.createElement("div",{className:r.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:e,onClick:r.onChange.bind(r,n),"aria-selected":r.isSelectedMonth(n)?"true":void 0},r.isSelectedMonth(n)?t.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",e)}))},r.onChange=function(e){return r.props.onChange(e)},r.handleClickOutside=function(){return r.props.onCancel()},r}return rN(r,e),r.prototype.render=function(){return t.createElement(oN,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},r}(t.Component),yT=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(e){return e.map((function(e,r){return t.createElement("option",{key:e,value:r},e)}))},r.renderSelectMode=function(e){return t.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(e){return r.onChange(parseInt(e.target.value))}},r.renderSelectOptions(e))},r.renderReadView=function(e,n){return t.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},t.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),t.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[r.props.month]))},r.renderDropdown=function(e){return t.createElement(xT,nN({key:"dropdown"},r.props,{monthNames:e,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(e){var t=r.state.dropdownVisible,n=[r.renderReadView(!t,e)];return t&&n.unshift(r.renderDropdown(e)),n},r.onChange=function(e){r.toggleDropdown(),e!==r.props.month&&r.props.onChange(e)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return rN(r,e),r.prototype.render=function(){var e,r=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return MN(e,r.props.locale)}:function(e){return AN(e,r.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return t.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)},r}(t.Component);function bT(e,t){for(var r=[],n=vN(e),i=vN(t);!Zj(n,i);)r.push(cN(n)),n=Oj(n,1);return r}var wT=function(e){function r(r){var n=e.call(this,r)||this;return n.renderOptions=function(){return n.state.monthYearsList.map((function(e){var r=Jj(e),i=kN(n.props.date,e)&&SN(n.props.date,e);return t.createElement("div",{className:i?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:r,onClick:n.onChange.bind(n,r),"aria-selected":i?"true":void 0},i?t.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",hN(e,n.props.dateFormat,n.props.locale))}))},n.onChange=function(e){return n.props.onChange(e)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:bT(n.props.minDate,n.props.maxDate)},n}return rN(r,e),r.prototype.render=function(){var e=vi({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return t.createElement(oN,{className:e,onClickOutside:this.handleClickOutside},this.renderOptions())},r}(t.Component),_T=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var e=vN(r.props.minDate),n=vN(r.props.maxDate),i=[];!Zj(e,n);){var a=Jj(e);i.push(t.createElement("option",{key:a,value:a},hN(e,r.props.dateFormat,r.props.locale))),e=Oj(e,1)}return i},r.onSelectChange=function(e){r.onChange(parseInt(e.target.value))},r.renderSelectMode=function(){return t.createElement("select",{value:Jj(vN(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(e){var n=hN(r.props.date,r.props.dateFormat,r.props.locale);return t.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},t.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),t.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))},r.renderDropdown=function(){return t.createElement(wT,nN({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var e=r.state.dropdownVisible,t=[r.renderReadView(!e)];return e&&t.unshift(r.renderDropdown()),t},r.onChange=function(e){r.toggleDropdown();var t=cN(e);kN(r.props.date,t)&&SN(r.props.date,t)||r.props.onChange(t)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return rN(r,e),r.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return t.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},r}(t.Component),kT=function(e){function r(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame((function(){var e,t,i;n.list&&(n.list.scrollTop=null!==(i=n.centerLi&&r.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-(null!==(t=null===(e=n.header)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0):n.list.clientHeight,n.centerLi))&&void 0!==i?i:0)}))},n.handleClick=function(e){var t,r;(n.props.minTime||n.props.maxTime)&&GN(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&HN(e,n.props)||null===(r=(t=n.props).onChange)||void 0===r||r.call(t,e)},n.isSelectedTime=function(e){return n.props.selected&&(t=n.props.selected,r=e,nT(t).getTime()===nT(r).getTime());var t,r},n.isDisabledTime=function(e){return(n.props.minTime||n.props.maxTime)&&GN(e,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&HN(e,n.props)},n.liClasses=function(e){var t,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(e):void 0];return n.isSelectedTime(e)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(e)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(3600*Aj(e)+60*Mj(e)+Ij(e))%(60*(null!==(t=n.props.intervals)&&void 0!==t?t:r.defaultProps.intervals))!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(e,t){var r,i;e.key===aN.Space&&(e.preventDefault(),e.key=aN.Enter),(e.key===aN.ArrowUp||e.key===aN.ArrowLeft)&&e.target instanceof HTMLElement&&e.target.previousSibling&&(e.preventDefault(),e.target.previousSibling instanceof HTMLElement&&e.target.previousSibling.focus()),(e.key===aN.ArrowDown||e.key===aN.ArrowRight)&&e.target instanceof HTMLElement&&e.target.nextSibling&&(e.preventDefault(),e.target.nextSibling instanceof HTMLElement&&e.target.nextSibling.focus()),e.key===aN.Enter&&n.handleClick(t),null===(i=(r=n.props).handleOnKeyDown)||void 0===i||i.call(r,e)},n.renderTimes=function(){for(var e,i=[],a="string"===typeof n.props.format?n.props.format:"p",s=null!==(e=n.props.intervals)&&void 0!==e?e:r.defaultProps.intervals,o=n.props.selected||n.props.openToDate||cN(),l=mN(o),c=n.props.injectTimes&&n.props.injectTimes.sort((function(e,t){return e.getTime()-t.getTime()})),u=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}(o),d=u/s,h=0;h<d;h++){var p=qj(l,h*s);if(i.push(p),c){var f=eT(l,p,h,s,c);i=i.concat(f)}}var m=i.reduce((function(e,t){return t.getTime()<=o.getTime()?t:e}),i[0]);return i.map((function(e){return t.createElement("li",{key:e.valueOf(),onClick:n.handleClick.bind(n,e),className:n.liClasses(e),ref:function(t){e===m&&(n.centerLi=t)},onKeyDown:function(t){n.handleOnKeyDown(t,e)},tabIndex:e===m?0:-1,role:"option","aria-selected":n.isSelectedTime(e)?"true":void 0,"aria-disabled":n.isDisabledTime(e)?"true":void 0},hN(e,a,n.props.locale))}))},n.renderTimeCaption=function(){return!1===n.props.showTimeCaption?t.createElement(t.Fragment,null):t.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(e){n.header=e}},t.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return rN(r,e),Object.defineProperty(r,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},r.prototype.render=function(){var e,n=this,i=this.state.height;return t.createElement("div",{className:"react-datepicker__time-container ".concat((null!==(e=this.props.todayButton)&&void 0!==e?e:r.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),t.createElement("div",{className:"react-datepicker__time"},t.createElement("div",{className:"react-datepicker__time-box"},t.createElement("ul",{className:"react-datepicker__time-list",ref:function(e){n.list=e},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},r.calcCenterPosition=function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)},r}(t.Component),ST=function(e){function r(r){var n=e.call(this,r)||this;return n.YEAR_REFS=iN([],Array(n.props.yearItemNumber),!0).map((function(){return(0,t.createRef)()})),n.isDisabled=function(e){return IN(e,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(e){return ON(e,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var e;return null!==(e=n.props.selectingDate)&&void 0!==e?e:n.props.preSelection},n.updateFocusOnPaginate=function(e){window.requestAnimationFrame((function(){var t,r;null===(r=null===(t=n.YEAR_REFS[e])||void 0===t?void 0:t.current)||void 0===r||r.focus()}))},n.handleYearClick=function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)},n.handleYearNavigation=function(e,t){var r,i,a,s,o=n.props,l=o.date,c=o.yearItemNumber;if(void 0!==l&&void 0!==c){var u=rT(l,c).startPeriod;n.isDisabled(t)||n.isExcluded(t)||(null===(i=(r=n.props).setPreSelection)||void 0===i||i.call(r,t),e-u<0?n.updateFocusOnPaginate(c-(u-e)):e-u>=c?n.updateFocusOnPaginate(Math.abs(c-(e-u))):null===(s=null===(a=n.YEAR_REFS[e-u])||void 0===a?void 0:a.current)||void 0===s||s.focus())}},n.isSameDay=function(e,t){return EN(e,t)},n.isCurrentYear=function(e){return e===Cj(cN())},n.isRangeStart=function(e){return n.props.startDate&&n.props.endDate&&kN(eE(cN(),e),n.props.startDate)},n.isRangeEnd=function(e){return n.props.startDate&&n.props.endDate&&kN(eE(cN(),e),n.props.endDate)},n.isInRange=function(e){return $N(e,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(e){var t=n.props,r=t.selectsStart,i=t.selectsEnd,a=t.selectsRange,s=t.startDate,o=t.endDate;return!(!(r||i||a)||!n.selectingDate())&&(r&&o?$N(e,n.selectingDate(),o):(i&&s||!(!a||!s||o))&&$N(e,s,n.selectingDate()))},n.isSelectingRangeStart=function(e){var t;if(!n.isInSelectingRange(e))return!1;var r=n.props,i=r.startDate,a=r.selectsStart,s=eE(cN(),e);return kN(s,a?null!==(t=n.selectingDate())&&void 0!==t?t:null:null!==i&&void 0!==i?i:null)},n.isSelectingRangeEnd=function(e){var t;if(!n.isInSelectingRange(e))return!1;var r=n.props,i=r.endDate,a=r.selectsEnd,s=r.selectsRange,o=eE(cN(),e);return kN(o,a||s?null!==(t=n.selectingDate())&&void 0!==t?t:null:null!==i&&void 0!==i?i:null)},n.isKeyboardSelected=function(e){if(void 0!==n.props.date&&null!=n.props.selected&&null!=n.props.preSelection){var t=n.props,r=t.minDate,i=t.maxDate,a=t.excludeDates,s=t.includeDates,o=t.filterDate,l=xN(eE(n.props.date,e)),c=(r||i||a||s||o)&&BN(e,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!EN(l,xN(n.props.selected))&&EN(l,xN(n.props.preSelection))&&!c}},n.onYearClick=function(e,t){var r=n.props.date;void 0!==r&&n.handleYearClick(xN(eE(r,t)),e)},n.onYearKeyDown=function(e,t){var r,i,a=e.key,s=n.props,o=s.date,l=s.yearItemNumber,c=s.handleOnKeyDown;if(a!==aN.Tab&&e.preventDefault(),!n.props.disabledKeyboardNavigation)switch(a){case aN.Enter:if(null==n.props.selected)break;n.onYearClick(e,t),null===(i=(r=n.props).setPreSelection)||void 0===i||i.call(r,n.props.selected);break;case aN.ArrowRight:if(null==n.props.preSelection)break;n.handleYearNavigation(t+1,Bj(n.props.preSelection,1));break;case aN.ArrowLeft:if(null==n.props.preSelection)break;n.handleYearNavigation(t-1,zj(n.props.preSelection,1));break;case aN.ArrowUp:if(void 0===o||void 0===l||null==n.props.preSelection)break;var u=rT(o,l).startPeriod;if((p=t-(h=3))<u){var d=l%h;t>=u&&t<u+d?h=d:h+=d,p=t-h}n.handleYearNavigation(p,zj(n.props.preSelection,h));break;case aN.ArrowDown:if(void 0===o||void 0===l||null==n.props.preSelection)break;var h,p,f=rT(o,l).endPeriod;if((p=t+(h=3))>f){d=l%h;t<=f&&t>f-d?h=d:h+=d,p=t+h}n.handleYearNavigation(p,Bj(n.props.preSelection,h))}c&&c(e)},n.getYearClassNames=function(e){var t=n.props,r=t.date,i=t.minDate,a=t.maxDate,s=t.selected,o=t.excludeDates,l=t.includeDates,c=t.filterDate,u=t.yearClassName;return vi("react-datepicker__year-text","react-datepicker__year-".concat(e),r?null===u||void 0===u?void 0:u(eE(r,e)):void 0,{"react-datepicker__year-text--selected":s?e===Cj(s):void 0,"react-datepicker__year-text--disabled":(i||a||o||l||c)&&BN(e,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(e),"react-datepicker__year-text--range-start":n.isRangeStart(e),"react-datepicker__year-text--range-end":n.isRangeEnd(e),"react-datepicker__year-text--in-range":n.isInRange(e),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(e),"react-datepicker__year-text--today":n.isCurrentYear(e)})},n.getYearTabIndex=function(e){if(n.props.disabledKeyboardNavigation||null==n.props.preSelection)return"-1";var t=Cj(n.props.preSelection),r=BN(e,n.props);return e!==t||r?"-1":"0"},n.getYearContent=function(e){return n.props.renderYearContent?n.props.renderYearContent(e):e},n}return rN(r,e),r.prototype.render=function(){var e=this,r=[],n=this.props,i=n.date,a=n.yearItemNumber,s=n.onYearMouseEnter,o=n.onYearMouseLeave;if(void 0===i)return null;for(var l=rT(i,a),c=l.startPeriod,u=l.endPeriod,d=function(n){r.push(t.createElement("div",{ref:h.YEAR_REFS[n-c],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){sT(t)&&(t.preventDefault(),t.key=aN.Enter),e.onYearKeyDown(t,n)},tabIndex:Number(h.getYearTabIndex(n)),className:h.getYearClassNames(n),onMouseEnter:h.props.usePointerEvent?void 0:function(e){return s(e,n)},onPointerEnter:h.props.usePointerEvent?function(e){return s(e,n)}:void 0,onMouseLeave:h.props.usePointerEvent?void 0:function(e){return o(e,n)},onPointerLeave:h.props.usePointerEvent?function(e){return o(e,n)}:void 0,key:n,"aria-current":h.isCurrentYear(n)?"date":void 0},h.getYearContent(n)))},h=this,p=c;p<=u;p++)d(p);return t.createElement("div",{className:"react-datepicker__year"},t.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},r}(t.Component);function jT(e,t,r,n){for(var i=[],a=0;a<2*t+1;a++){var s=e+t-a,o=!0;r&&(o=Cj(r)<=s),n&&o&&(o=Cj(n)>=s),o&&i.push(s)}return i}var ET=function(e){function r(r){var n=e.call(this,r)||this;n.renderOptions=function(){var e=n.props.year,r=n.state.yearsList.map((function(r){return t.createElement("div",{className:e===r?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:r,onClick:n.onChange.bind(n,r),"aria-selected":e===r?"true":void 0},e===r?t.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",r)})),i=n.props.minDate?Cj(n.props.minDate):null,a=n.props.maxDate?Cj(n.props.maxDate):null;return a&&n.state.yearsList.find((function(e){return e===a}))||r.unshift(t.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},t.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),i&&n.state.yearsList.find((function(e){return e===i}))||r.push(t.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},t.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),r},n.onChange=function(e){n.props.onChange(e)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(e){var t=n.state.yearsList.map((function(t){return t+e}));n.setState({yearsList:t})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var i=r.yearDropdownItemNumber,a=r.scrollableYearDropdown,s=i||(a?10:5);return n.state={yearsList:jT(n.props.year,s,n.props.minDate,n.props.maxDate)},n.dropdownRef=(0,t.createRef)(),n}return rN(r,e),r.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,r=t?t.find((function(e){return e.ariaSelected})):null;e.scrollTop=r&&r instanceof HTMLElement?r.offsetTop+(r.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},r.prototype.render=function(){var e=vi({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return t.createElement(oN,{className:e,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},r}(t.Component),CT=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var e=r.props.minDate?Cj(r.props.minDate):1900,n=r.props.maxDate?Cj(r.props.maxDate):2100,i=[],a=e;a<=n;a++)i.push(t.createElement("option",{key:a,value:a},a));return i},r.onSelectChange=function(e){r.onChange(parseInt(e.target.value))},r.renderSelectMode=function(){return t.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(e){return t.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(e){return r.toggleDropdown(e)}},t.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),t.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return t.createElement(ET,nN({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var e=r.state.dropdownVisible,t=[r.renderReadView(!e)];return e&&t.unshift(r.renderDropdown()),t},r.onChange=function(e){r.toggleDropdown(),e!==r.props.year&&r.props.onChange(e)},r.toggleDropdown=function(e){r.setState({dropdownVisible:!r.state.dropdownVisible},(function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,e)}))},r.handleYearChange=function(e,t){var n;null===(n=r.onSelect)||void 0===n||n.call(r,e,t),r.setOpen()},r.onSelect=function(e,t){var n,i;null===(i=(n=r.props).onSelect)||void 0===i||i.call(n,e,t)},r.setOpen=function(){var e,t;null===(t=(e=r.props).setOpen)||void 0===t||t.call(e,!0)},r}return rN(r,e),r.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return t.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},r}(t.Component),NT=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],TT=function(e){function r(n){var i=e.call(this,n)||this;return i.monthContainer=void 0,i.handleClickOutside=function(e){i.props.onClickOutside(e)},i.setClickOutsideRef=function(){return i.containerRef.current},i.handleDropdownFocus=function(e){var t,r;(function(e){var t=(e.className||"").split(/\s+/);return NT.some((function(e){return t.indexOf(e)>=0}))})(e.target)&&(null===(r=(t=i.props).onDropdownFocus)||void 0===r||r.call(t,e))},i.getDateInView=function(){var e=i.props,t=e.preSelection,r=e.selected,n=e.openToDate,a=YN(i.props),s=XN(i.props),o=cN(),l=n||r||t;return l||(a&&$S(o,a)?a:s&&Zj(o,s)?s:o)},i.increaseMonth=function(){i.setState((function(e){return{date:Oj(e.date,1)}}),(function(){return i.handleMonthChange(i.state.date)}))},i.decreaseMonth=function(){i.setState((function(e){return{date:Dj(e.date,1)}}),(function(){return i.handleMonthChange(i.state.date)}))},i.handleDayClick=function(e,t,r){i.props.onSelect(e,t,r),i.props.setPreSelection&&i.props.setPreSelection(e)},i.handleDayMouseEnter=function(e){i.setState({selectingDate:e}),i.props.onDayMouseEnter&&i.props.onDayMouseEnter(e)},i.handleMonthMouseLeave=function(){i.setState({selectingDate:void 0}),i.props.onMonthMouseLeave&&i.props.onMonthMouseLeave()},i.handleYearMouseEnter=function(e,t){i.setState({selectingDate:eE(cN(),t)}),i.props.onYearMouseEnter&&i.props.onYearMouseEnter(e,t)},i.handleYearMouseLeave=function(e,t){i.props.onYearMouseLeave&&i.props.onYearMouseLeave(e,t)},i.handleYearChange=function(e){var t,r,n,a;null===(r=(t=i.props).onYearChange)||void 0===r||r.call(t,e),i.setState({isRenderAriaLiveMessage:!0}),i.props.adjustDateOnChange&&(i.props.onSelect(e),null===(a=(n=i.props).setOpen)||void 0===a||a.call(n,!0)),i.props.setPreSelection&&i.props.setPreSelection(e)},i.getEnabledPreSelectionDateForMonth=function(e){if(!IN(e,i.props))return e;for(var t=vN(e),r=tE(_N(e),t),n=null,a=0;a<=r;a++){var s=SS(t,a);if(!IN(s,i.props)){n=s;break}}return n},i.handleMonthChange=function(e){var t,r,n,a=null!==(t=i.getEnabledPreSelectionDateForMonth(e))&&void 0!==t?t:e;i.handleCustomMonthChange(a),i.props.adjustDateOnChange&&(i.props.onSelect(a),null===(n=(r=i.props).setOpen)||void 0===n||n.call(r,!0)),i.props.setPreSelection&&i.props.setPreSelection(a)},i.handleCustomMonthChange=function(e){var t,r;null===(r=(t=i.props).onMonthChange)||void 0===r||r.call(t,e),i.setState({isRenderAriaLiveMessage:!0})},i.handleMonthYearChange=function(e){i.handleYearChange(e),i.handleMonthChange(e)},i.changeYear=function(e){i.setState((function(t){return{date:eE(t.date,Number(e))}}),(function(){return i.handleYearChange(i.state.date)}))},i.changeMonth=function(e){i.setState((function(t){return{date:jj(t.date,Number(e))}}),(function(){return i.handleMonthChange(i.state.date)}))},i.changeMonthYear=function(e){i.setState((function(t){return{date:eE(jj(t.date,Nj(e)),Cj(e))}}),(function(){return i.handleMonthYearChange(i.state.date)}))},i.header=function(e){void 0===e&&(e=i.state.date);var r=gN(e,i.props.locale,i.props.calendarStartDay),n=[];return i.props.showWeekNumbers&&n.push(t.createElement("div",{key:"W",className:"react-datepicker__day-name"},i.props.weekLabel||"#")),n.concat([0,1,2,3,4,5,6].map((function(e){var n=SS(r,e),a=i.formatWeekday(n,i.props.locale),s=i.props.weekDayClassName?i.props.weekDayClassName(n):void 0;return t.createElement("div",{key:e,"aria-label":hN(n,"EEEE",i.props.locale),className:vi("react-datepicker__day-name",s)},a)})))},i.formatWeekday=function(e,t){return i.props.formatWeekDay?function(e,t,r){return t(hN(e,"EEEE",r))}(e,i.props.formatWeekDay,t):i.props.useWeekdaysShort?function(e,t){return hN(e,"EEE",t)}(e,t):function(e,t){return hN(e,"EEEEEE",t)}(e,t)},i.decreaseYear=function(){i.setState((function(e){var t;return{date:zj(e.date,i.props.showYearPicker?null!==(t=i.props.yearItemNumber)&&void 0!==t?t:r.defaultProps.yearItemNumber:1)}}),(function(){return i.handleYearChange(i.state.date)}))},i.clearSelectingDate=function(){i.setState({selectingDate:void 0})},i.renderPreviousButton=function(){var e,n,a;if(!i.props.renderCustomHeader){var s,o=null!==(e=i.props.monthsShown)&&void 0!==e?e:r.defaultProps.monthsShown,l=i.props.showPreviousMonths?o-1:0,c=null!==(n=i.props.monthSelectedIn)&&void 0!==n?n:l,u=Dj(i.state.date,c);switch(!0){case i.props.showMonthYearPicker:s=KN(i.state.date,i.props);break;case i.props.showYearPicker:s=function(e,t){var r=void 0===t?{}:t,n=r.minDate,i=r.yearItemNumber,a=void 0===i?12:i,s=rT(xN(zj(e,a)),a).endPeriod,o=n&&Cj(n);return o&&o>s||!1}(i.state.date,i.props);break;case i.props.showQuarterYearPicker:s=function(e,t){var r=void 0===t?{}:t,n=r.minDate,i=r.includeDates,a=Fj(VS(e),1);return n&&$j(n,a)>0||i&&i.every((function(e){return $j(e,a)>0}))||!1}(i.state.date,i.props);break;default:s=WN(u,i.props)}if(((null!==(a=i.props.forceShowMonthNavigation)&&void 0!==a?a:r.defaultProps.forceShowMonthNavigation)||i.props.showDisabledMonthNavigation||!s)&&!i.props.showTimeSelectOnly){var d=["react-datepicker__navigation","react-datepicker__navigation--previous"],h=i.decreaseMonth;(i.props.showMonthYearPicker||i.props.showQuarterYearPicker||i.props.showYearPicker)&&(h=i.decreaseYear),s&&i.props.showDisabledMonthNavigation&&(d.push("react-datepicker__navigation--previous--disabled"),h=void 0);var p=i.props.showMonthYearPicker||i.props.showQuarterYearPicker||i.props.showYearPicker,f=i.props,m=f.previousMonthButtonLabel,g=void 0===m?r.defaultProps.previousMonthButtonLabel:m,v=f.previousYearButtonLabel,x=void 0===v?r.defaultProps.previousYearButtonLabel:v,y=i.props,b=y.previousMonthAriaLabel,w=void 0===b?"string"===typeof g?g:"Previous Month":b,_=y.previousYearAriaLabel,k=void 0===_?"string"===typeof x?x:"Previous Year":_;return t.createElement("button",{type:"button",className:d.join(" "),onClick:h,onKeyDown:i.props.handleOnKeyDown,"aria-label":p?k:w},t.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},p?x:g))}}},i.increaseYear=function(){i.setState((function(e){var t;return{date:Bj(e.date,i.props.showYearPicker?null!==(t=i.props.yearItemNumber)&&void 0!==t?t:r.defaultProps.yearItemNumber:1)}}),(function(){return i.handleYearChange(i.state.date)}))},i.renderNextButton=function(){var e;if(!i.props.renderCustomHeader){var n;switch(!0){case i.props.showMonthYearPicker:n=ZN(i.state.date,i.props);break;case i.props.showYearPicker:n=function(e,t){var r=void 0===t?{}:t,n=r.maxDate,i=r.yearItemNumber,a=void 0===i?12:i,s=rT(Bj(e,a),a).startPeriod,o=n&&Cj(n);return o&&o<s||!1}(i.state.date,i.props);break;case i.props.showQuarterYearPicker:n=function(e,t){var r=void 0===t?{}:t,n=r.maxDate,i=r.includeDates,a=Lj(Tj(e),1);return n&&$j(a,n)>0||i&&i.every((function(e){return $j(a,e)>0}))||!1}(i.state.date,i.props);break;default:n=qN(i.state.date,i.props)}if(((null!==(e=i.props.forceShowMonthNavigation)&&void 0!==e?e:r.defaultProps.forceShowMonthNavigation)||i.props.showDisabledMonthNavigation||!n)&&!i.props.showTimeSelectOnly){var a=["react-datepicker__navigation","react-datepicker__navigation--next"];i.props.showTimeSelect&&a.push("react-datepicker__navigation--next--with-time"),i.props.todayButton&&a.push("react-datepicker__navigation--next--with-today-button");var s=i.increaseMonth;(i.props.showMonthYearPicker||i.props.showQuarterYearPicker||i.props.showYearPicker)&&(s=i.increaseYear),n&&i.props.showDisabledMonthNavigation&&(a.push("react-datepicker__navigation--next--disabled"),s=void 0);var o=i.props.showMonthYearPicker||i.props.showQuarterYearPicker||i.props.showYearPicker,l=i.props,c=l.nextMonthButtonLabel,u=void 0===c?r.defaultProps.nextMonthButtonLabel:c,d=l.nextYearButtonLabel,h=void 0===d?r.defaultProps.nextYearButtonLabel:d,p=i.props,f=p.nextMonthAriaLabel,m=void 0===f?"string"===typeof u?u:"Next Month":f,g=p.nextYearAriaLabel,v=void 0===g?"string"===typeof h?h:"Next Year":g;return t.createElement("button",{type:"button",className:a.join(" "),onClick:s,onKeyDown:i.props.handleOnKeyDown,"aria-label":o?v:m},t.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},o?h:u))}}},i.renderCurrentMonth=function(e){void 0===e&&(e=i.state.date);var r=["react-datepicker__current-month"];return i.props.showYearDropdown&&r.push("react-datepicker__current-month--hasYearDropdown"),i.props.showMonthDropdown&&r.push("react-datepicker__current-month--hasMonthDropdown"),i.props.showMonthYearDropdown&&r.push("react-datepicker__current-month--hasMonthYearDropdown"),t.createElement("h2",{className:r.join(" ")},hN(e,i.props.dateFormat,i.props.locale))},i.renderYearDropdown=function(e){if(void 0===e&&(e=!1),i.props.showYearDropdown&&!e)return t.createElement(CT,nN({},r.defaultProps,i.props,{date:i.state.date,onChange:i.changeYear,year:Cj(i.state.date)}))},i.renderMonthDropdown=function(e){if(void 0===e&&(e=!1),i.props.showMonthDropdown&&!e)return t.createElement(yT,nN({},r.defaultProps,i.props,{month:Nj(i.state.date),onChange:i.changeMonth}))},i.renderMonthYearDropdown=function(e){if(void 0===e&&(e=!1),i.props.showMonthYearDropdown&&!e)return t.createElement(_T,nN({},r.defaultProps,i.props,{date:i.state.date,onChange:i.changeMonthYear}))},i.handleTodayButtonClick=function(e){i.props.onSelect(bN(),e),i.props.setPreSelection&&i.props.setPreSelection(bN())},i.renderTodayButton=function(){if(i.props.todayButton&&!i.props.showTimeSelectOnly)return t.createElement("div",{className:"react-datepicker__today-button",onClick:i.handleTodayButtonClick},i.props.todayButton)},i.renderDefaultHeader=function(e){var r=e.monthDate,n=e.i;return t.createElement("div",{className:"react-datepicker__header ".concat(i.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},i.renderCurrentMonth(r),t.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(i.props.dropdownMode),onFocus:i.handleDropdownFocus},i.renderMonthDropdown(0!==n),i.renderMonthYearDropdown(0!==n),i.renderYearDropdown(0!==n)),t.createElement("div",{className:"react-datepicker__day-names"},i.header(r)))},i.renderCustomHeader=function(e){var r,n,a=e.monthDate,s=e.i;if(i.props.showTimeSelect&&!i.state.monthContainer||i.props.showTimeSelectOnly)return null;var o=WN(i.state.date,i.props),l=qN(i.state.date,i.props),c=KN(i.state.date,i.props),u=ZN(i.state.date,i.props),d=!i.props.showMonthYearPicker&&!i.props.showQuarterYearPicker&&!i.props.showYearPicker;return t.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:i.props.onDropdownFocus},null===(n=(r=i.props).renderCustomHeader)||void 0===n?void 0:n.call(r,nN(nN({},i.state),{customHeaderCount:s,monthDate:a,changeMonth:i.changeMonth,changeYear:i.changeYear,decreaseMonth:i.decreaseMonth,increaseMonth:i.increaseMonth,decreaseYear:i.decreaseYear,increaseYear:i.increaseYear,prevMonthButtonDisabled:o,nextMonthButtonDisabled:l,prevYearButtonDisabled:c,nextYearButtonDisabled:u})),d&&t.createElement("div",{className:"react-datepicker__day-names"},i.header(a)))},i.renderYearHeader=function(e){var n=e.monthDate,a=i.props,s=a.showYearPicker,o=a.yearItemNumber,l=rT(n,void 0===o?r.defaultProps.yearItemNumber:o),c=l.startPeriod,u=l.endPeriod;return t.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},s?"".concat(c," - ").concat(u):Cj(n))},i.renderHeader=function(e){var t=e.monthDate,r=e.i,n={monthDate:t,i:void 0===r?0:r};switch(!0){case void 0!==i.props.renderCustomHeader:return i.renderCustomHeader(n);case i.props.showMonthYearPicker||i.props.showQuarterYearPicker||i.props.showYearPicker:return i.renderYearHeader(n);default:return i.renderDefaultHeader(n)}},i.renderMonths=function(){var e,n;if(!i.props.showTimeSelectOnly&&!i.props.showYearPicker){for(var a=[],s=null!==(e=i.props.monthsShown)&&void 0!==e?e:r.defaultProps.monthsShown,o=i.props.showPreviousMonths?s-1:0,l=i.props.showMonthYearPicker||i.props.showQuarterYearPicker?Bj(i.state.date,o):Dj(i.state.date,o),c=null!==(n=i.props.monthSelectedIn)&&void 0!==n?n:o,u=0;u<s;++u){var d=u-c+o,h=i.props.showMonthYearPicker||i.props.showQuarterYearPicker?Bj(l,d):Oj(l,d),p="month-".concat(u),f=u<s-1,m=u>0;a.push(t.createElement("div",{key:p,ref:function(e){i.monthContainer=null!==e&&void 0!==e?e:void 0},className:"react-datepicker__month-container"},i.renderHeader({monthDate:h,i:u}),t.createElement(vT,nN({},r.defaultProps,i.props,{containerRef:i.containerRef,ariaLabelPrefix:i.props.monthAriaLabelPrefix,day:h,onDayClick:i.handleDayClick,handleOnKeyDown:i.props.handleOnDayKeyDown,handleOnMonthKeyDown:i.props.handleOnKeyDown,onDayMouseEnter:i.handleDayMouseEnter,onMouseLeave:i.handleMonthMouseLeave,orderInDisplay:u,selectingDate:i.state.selectingDate,monthShowsDuplicateDaysEnd:f,monthShowsDuplicateDaysStart:m}))))}return a}},i.renderYears=function(){if(!i.props.showTimeSelectOnly)return i.props.showYearPicker?t.createElement("div",{className:"react-datepicker__year--container"},i.renderHeader({monthDate:i.state.date}),t.createElement(ST,nN({},r.defaultProps,i.props,{selectingDate:i.state.selectingDate,date:i.state.date,onDayClick:i.handleDayClick,clearSelectingDate:i.clearSelectingDate,onYearMouseEnter:i.handleYearMouseEnter,onYearMouseLeave:i.handleYearMouseLeave}))):void 0},i.renderTimeSection=function(){if(i.props.showTimeSelect&&(i.state.monthContainer||i.props.showTimeSelectOnly))return t.createElement(kT,nN({},r.defaultProps,i.props,{onChange:i.props.onTimeChange,format:i.props.timeFormat,intervals:i.props.timeIntervals,monthRef:i.state.monthContainer}))},i.renderInputTimeSection=function(){var e=i.props.selected?new Date(i.props.selected):void 0,n=e&&dN(e)&&Boolean(i.props.selected)?"".concat(tT(e.getHours()),":").concat(tT(e.getMinutes())):"";if(i.props.showTimeInput)return t.createElement(lT,nN({},r.defaultProps,i.props,{date:e,timeString:n,onChange:i.props.onTimeChange}))},i.renderAriaLiveRegion=function(){var e,n,a=rT(i.state.date,null!==(e=i.props.yearItemNumber)&&void 0!==e?e:r.defaultProps.yearItemNumber),s=a.startPeriod,o=a.endPeriod;return n=i.props.showYearPicker?"".concat(s," - ").concat(o):i.props.showMonthYearPicker||i.props.showQuarterYearPicker?Cj(i.state.date):"".concat(AN(Nj(i.state.date),i.props.locale)," ").concat(Cj(i.state.date)),t.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},i.state.isRenderAriaLiveMessage&&n)},i.renderChildren=function(){if(i.props.children)return t.createElement("div",{className:"react-datepicker__children-container"},i.props.children)},i.containerRef=(0,t.createRef)(),i.state={date:i.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},i}return rN(r,e),Object.defineProperty(r,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:12}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))},r.prototype.componentDidUpdate=function(e){var t=this;if(!this.props.preSelection||EN(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!EN(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var r=!SN(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return r&&t.handleCustomMonthChange(t.state.date)}))}},r.prototype.render=function(){var e=this.props.container||sN;return t.createElement(oN,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},t.createElement("div",{style:{display:"contents"},ref:this.containerRef},t.createElement(e,{className:vi("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},r}(t.Component),PT=function(e){var r=e.icon,n=e.className,i=void 0===n?"":n,a=e.onClick,s="react-datepicker__calendar-icon";if("string"===typeof r)return t.createElement("i",{className:"".concat(s," ").concat(r," ").concat(i),"aria-hidden":"true",onClick:a});if(t.isValidElement(r)){var o=r;return t.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(s," ").concat(i),onClick:function(e){"function"===typeof o.props.onClick&&o.props.onClick(e),"function"===typeof a&&a(e)}})}return t.createElement("svg",{className:"".concat(s," ").concat(i),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:a},t.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},AT=function(e){function t(t){var r=e.call(this,t)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return rN(t,e),t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return ci.createPortal(this.props.children,this.el)},t}(t.Component),MT=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&-1!==e.tabIndex},IT=function(e){function r(r){var n=e.call(this,r)||this;return n.getTabChildren=function(){var e;return Array.prototype.slice.call(null===(e=n.tabLoopRef.current)||void 0===e?void 0:e.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(MT)},n.handleFocusStart=function(){var e=n.getTabChildren();e&&e.length>1&&e[e.length-1].focus()},n.handleFocusEnd=function(){var e=n.getTabChildren();e&&e.length>1&&e[0].focus()},n.tabLoopRef=(0,t.createRef)(),n}return rN(r,e),r.prototype.render=function(){var e;return(null!==(e=this.props.enableTabLoop)&&void 0!==e?e:r.defaultProps.enableTabLoop)?t.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},t.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,t.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},r.defaultProps={enableTabLoop:!0},r}(t.Component);var OT=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return rN(r,e),Object.defineProperty(r,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),r.prototype.render=function(){var e=this.props,n=e.className,i=e.wrapperClassName,a=e.hidePopper,s=void 0===a?r.defaultProps.hidePopper:a,o=e.popperComponent,l=e.targetComponent,c=e.enableTabLoop,u=e.popperOnKeyDown,d=e.portalId,h=e.portalHost,p=e.popperProps,f=e.showArrow,m=void 0;if(!s){var g=vi("react-datepicker-popper",n);m=t.createElement(IT,{enableTabLoop:c},t.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:g,"data-placement":p.placement,onKeyDown:u},o,f&&t.createElement(KC,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(m=(0,t.createElement)(this.props.popperContainer,{},m)),d&&!s&&(m=t.createElement(AT,{portalId:d,portalHost:h},m));var v=vi("react-datepicker-wrapper",i);return t.createElement(t.Fragment,null,t.createElement("div",{ref:p.refs.setReference,className:v},l),m)},r}(t.Component),DT=function(e){return function(r){var n,i="boolean"!==typeof r.hidePopper||r.hidePopper,a=(0,t.useRef)(null),s=eN(nN({open:!i,whileElementsMounted:dC,placement:r.popperPlacement,middleware:iN([PC({padding:15}),CC(10),IC({element:a})],null!==(n=r.popperModifiers)&&void 0!==n?n:[],!0)},r.popperProps)),o=nN(nN({},r),{hidePopper:i,popperProps:nN(nN({},s),{arrowRef:a})});return t.createElement(e,nN({},o))}}(OT),RT="react-datepicker-ignore-onclickoutside";var LT="Date input not valid.",FT=function(e){function r(n){var i=e.call(this,n)||this;return i.calendar=null,i.input=null,i.getPreSelection=function(){return i.props.openToDate?i.props.openToDate:i.props.selectsEnd&&i.props.startDate?i.props.startDate:i.props.selectsStart&&i.props.endDate?i.props.endDate:cN()},i.modifyHolidays=function(){var e;return null===(e=i.props.holidays)||void 0===e?void 0:e.reduce((function(e,t){var r=new Date(t.date);return dN(r)?iN(iN([],e,!0),[nN(nN({},t),{date:r})],!1):e}),[])},i.calcInitialState=function(){var e,t=i.getPreSelection(),r=YN(i.props),n=XN(i.props),a=r&&$S(t,mN(r))?r:n&&Zj(t,wN(n))?n:t;return{open:i.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:null!==(e=i.props.selectsRange?i.props.startDate:i.props.selected)&&void 0!==e?e:a,highlightDates:QN(i.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},i.resetHiddenStatus=function(){i.setState(nN(nN({},i.state),{wasHidden:!1}))},i.setHiddenStatus=function(){i.setState(nN(nN({},i.state),{wasHidden:!0}))},i.setHiddenStateOnVisibilityHidden=function(){"hidden"===document.visibilityState&&i.setHiddenStatus()},i.clearPreventFocusTimeout=function(){i.preventFocusTimeout&&clearTimeout(i.preventFocusTimeout)},i.setFocus=function(){var e,t;null===(t=null===(e=i.input)||void 0===e?void 0:e.focus)||void 0===t||t.call(e,{preventScroll:!0})},i.setBlur=function(){var e,t;null===(t=null===(e=i.input)||void 0===e?void 0:e.blur)||void 0===t||t.call(e),i.cancelFocusInput()},i.deferBlur=function(){requestAnimationFrame((function(){i.setBlur()}))},i.setOpen=function(e,t){void 0===t&&(t=!1),i.setState({open:e,preSelection:e&&i.state.open?i.state.preSelection:i.calcInitialState().preSelection,lastPreSelectChange:BT},(function(){e||i.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&i.deferBlur(),i.setState({inputValue:null})}))}))},i.inputOk=function(){return LS(i.state.preSelection)},i.isCalendarOpen=function(){return void 0===i.props.open?i.state.open&&!i.props.disabled&&!i.props.readOnly:i.props.open},i.handleFocus=function(e){var t,r,n=i.state.wasHidden,a=!n||i.state.open;n&&i.resetHiddenStatus(),i.state.preventFocus||(null===(r=(t=i.props).onFocus)||void 0===r||r.call(t,e),!a||i.props.preventOpenOnFocus||i.props.readOnly||i.setOpen(!0)),i.setState({focused:!0})},i.sendFocusBackToInput=function(){i.preventFocusTimeout&&i.clearPreventFocusTimeout(),i.setState({preventFocus:!0},(function(){i.preventFocusTimeout=setTimeout((function(){i.setFocus(),i.setState({preventFocus:!1})}))}))},i.cancelFocusInput=function(){clearTimeout(i.inputFocusTimeout),i.inputFocusTimeout=void 0},i.deferFocusInput=function(){i.cancelFocusInput(),i.inputFocusTimeout=setTimeout((function(){return i.setFocus()}),1)},i.handleDropdownFocus=function(){i.cancelFocusInput()},i.handleBlur=function(e){var t,r;(!i.state.open||i.props.withPortal||i.props.showTimeInput)&&(null===(r=(t=i.props).onBlur)||void 0===r||r.call(t,e)),i.state.open&&!1===i.props.open&&i.setOpen(!1),i.setState({focused:!1})},i.handleCalendarClickOutside=function(e){var t,r;i.props.inline||i.setOpen(!1),null===(r=(t=i.props).onClickOutside)||void 0===r||r.call(t,e),i.props.withPortal&&e.preventDefault()},i.handleChange=function(){for(var e,t,n,a,s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=o[0];if(!i.props.onChangeRaw||(i.props.onChangeRaw.apply(i,o),c&&"function"===typeof c.isDefaultPrevented&&!c.isDefaultPrevented())){i.setState({inputValue:(null===c||void 0===c?void 0:c.target)instanceof HTMLInputElement?c.target.value:null,lastPreSelectChange:$T});var u=i.props,d=u.selectsRange,h=u.startDate,p=u.endDate,f=null!==(e=i.props.dateFormat)&&void 0!==e?e:r.defaultProps.dateFormat,m=null!==(t=i.props.strictParsing)&&void 0!==t?t:r.defaultProps.strictParsing,g=(null===c||void 0===c?void 0:c.target)instanceof HTMLInputElement?c.target.value:"";if(d){var v=g.split("-",2).map((function(e){return e.trim()})),x=v[0],y=v[1],b=uN(null!==x&&void 0!==x?x:"",f,i.props.locale,m),w=uN(null!==y&&void 0!==y?y:"",f,i.props.locale,m),_=(null===h||void 0===h?void 0:h.getTime())!==(null===b||void 0===b?void 0:b.getTime()),k=(null===p||void 0===p?void 0:p.getTime())!==(null===w||void 0===w?void 0:w.getTime());if(!_&&!k)return;if(b&&IN(b,i.props))return;if(w&&IN(w,i.props))return;null===(a=(n=i.props).onChange)||void 0===a||a.call(n,[b,w],c)}else{var S=uN(g,f,i.props.locale,m,null!==(s=i.props.selected)&&void 0!==s?s:void 0);!S&&g||i.setSelected(S,c,!0)}}},i.handleSelect=function(e,t,r){if(i.props.shouldCloseOnSelect&&!i.props.showTimeSelect&&i.sendFocusBackToInput(),i.props.onChangeRaw&&i.props.onChangeRaw(t),i.setSelected(e,t,!1,r),i.props.showDateSelect&&i.setState({isRenderAriaLiveMessage:!0}),!i.props.shouldCloseOnSelect||i.props.showTimeSelect)i.setPreSelection(e);else if(!i.props.inline){i.props.selectsRange||i.setOpen(!1);var n=i.props,a=n.startDate,s=n.endDate;!a||s||!i.props.swapRange&&aT(e,a)||i.setOpen(!1)}},i.setSelected=function(e,t,r,n){var a,s,o=e;if(i.props.showYearPicker){if(null!==o&&BN(Cj(o),i.props))return}else if(i.props.showMonthYearPicker){if(null!==o&&DN(o,i.props))return}else if(null!==o&&IN(o,i.props))return;var l=i.props,c=l.onChange,u=l.selectsRange,d=l.startDate,h=l.endDate,p=l.selectsMultiple,f=l.selectedDates,m=l.minTime,g=l.swapRange;if(!CN(i.props.selected,o)||i.props.allowSameDay||u||p)if(null!==o&&(!i.props.selected||r&&(i.props.showTimeSelect||i.props.showTimeSelectOnly||i.props.showTimeInput)||(o=fN(o,{hour:Aj(i.props.selected),minute:Mj(i.props.selected),second:Ij(i.props.selected)})),r||!i.props.showTimeSelect&&!i.props.showTimeSelectOnly||m&&(o=fN(o,{hour:m.getHours(),minute:m.getMinutes(),second:m.getSeconds()})),i.props.inline||i.setState({preSelection:o}),i.props.focusSelectedMonth||i.setState({monthSelectedIn:n})),u){var v=d&&!h,x=d&&h;!d&&!h?null===c||void 0===c||c([o,null],t):v&&(null===o?null===c||void 0===c||c([null,null],t):aT(o,d)?g?null===c||void 0===c||c([o,d],t):null===c||void 0===c||c([o,null],t):null===c||void 0===c||c([d,o],t)),x&&(null===c||void 0===c||c([o,null],t))}else if(p){if(null!==o)if(null===f||void 0===f?void 0:f.length)if(f.some((function(e){return EN(e,o)}))){var y=f.filter((function(e){return!EN(e,o)}));null===c||void 0===c||c(y,t)}else null===c||void 0===c||c(iN(iN([],f,!0),[o],!1),t);else null===c||void 0===c||c([o],t)}else null===c||void 0===c||c(o,t);r||(null===(s=(a=i.props).onSelect)||void 0===s||s.call(a,o,t),i.setState({inputValue:null}))},i.setPreSelection=function(e){var t=LS(i.props.minDate),r=LS(i.props.maxDate),n=!0;if(e){var a=mN(e);if(t&&r)n=NN(e,i.props.minDate,i.props.maxDate);else if(t){var s=mN(i.props.minDate);n=Zj(e,s)||CN(a,s)}else if(r){var o=wN(i.props.maxDate);n=$S(e,o)||CN(a,o)}}n&&i.setState({preSelection:e})},i.toggleCalendar=function(){i.setOpen(!i.state.open)},i.handleTimeChange=function(e){var t,r;if(!i.props.selectsRange&&!i.props.selectsMultiple){var n=i.props.selected?i.props.selected:i.getPreSelection(),a=i.props.selected?e:fN(n,{hour:Aj(e),minute:Mj(e)});i.setState({preSelection:a}),null===(r=(t=i.props).onChange)||void 0===r||r.call(t,a),i.props.shouldCloseOnSelect&&!i.props.showTimeInput&&(i.sendFocusBackToInput(),i.setOpen(!1)),i.props.showTimeInput&&i.setOpen(!0),(i.props.showTimeSelectOnly||i.props.showTimeSelect)&&i.setState({isRenderAriaLiveMessage:!0}),i.setState({inputValue:null})}},i.onInputClick=function(){var e,t;i.props.disabled||i.props.readOnly||i.setOpen(!0),null===(t=(e=i.props).onInputClick)||void 0===t||t.call(e)},i.onInputKeyDown=function(e){var t,r,n,a,s,o;null===(r=(t=i.props).onKeyDown)||void 0===r||r.call(t,e);var l=e.key;if(i.state.open||i.props.inline||i.props.preventOpenOnFocus){if(i.state.open){if(l===aN.ArrowDown||l===aN.ArrowUp){e.preventDefault();var c=i.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":i.props.showWeekPicker&&i.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':i.props.showFullMonthYearPicker||i.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',u=(null===(a=i.calendar)||void 0===a?void 0:a.containerRef.current)instanceof Element&&i.calendar.containerRef.current.querySelector(c);return void(u instanceof HTMLElement&&u.focus({preventScroll:!0}))}var d=cN(i.state.preSelection);l===aN.Enter?(e.preventDefault(),e.target.blur(),i.inputOk()&&i.state.lastPreSelectChange===BT?(i.handleSelect(d,e),!i.props.shouldCloseOnSelect&&i.setPreSelection(d)):i.setOpen(!1)):l===aN.Escape?(e.preventDefault(),e.target.blur(),i.sendFocusBackToInput(),i.setOpen(!1)):l===aN.Tab&&i.setOpen(!1),i.inputOk()||null===(o=(s=i.props).onInputError)||void 0===o||o.call(s,{code:1,msg:LT})}}else l!==aN.ArrowDown&&l!==aN.ArrowUp&&l!==aN.Enter||null===(n=i.onInputClick)||void 0===n||n.call(i)},i.onPortalKeyDown=function(e){e.key===aN.Escape&&(e.preventDefault(),i.setState({preventFocus:!0},(function(){i.setOpen(!1),setTimeout((function(){i.setFocus(),i.setState({preventFocus:!1})}))})))},i.onDayKeyDown=function(e){var t,r,n,a,s,o,l=i.props,c=l.minDate,u=l.maxDate,d=l.disabledKeyboardNavigation,h=l.showWeekPicker,p=l.shouldCloseOnSelect,f=l.locale,m=l.calendarStartDay,g=l.adjustDateOnChange,v=l.inline;if(null===(r=(t=i.props).onKeyDown)||void 0===r||r.call(t,e),!d){var x=e.key,y=e.shiftKey,b=cN(i.state.preSelection),w=function(e,t){var r=t;switch(e){case aN.ArrowRight:r=h?Qj(t,1):SS(t,1);break;case aN.ArrowLeft:r=h?nE(t,1):iE(t,1);break;case aN.ArrowUp:r=nE(t,1);break;case aN.ArrowDown:r=Qj(t,1);break;case aN.PageUp:r=y?zj(t,1):Dj(t,1);break;case aN.PageDown:r=y?Bj(t,1):Oj(t,1);break;case aN.Home:r=gN(t,f,m);break;case aN.End:r=function(e){return gj(e)}(t)}return r};if(x===aN.Enter)return e.preventDefault(),i.handleSelect(b,e),void(!p&&i.setPreSelection(b));if(x===aN.Escape)return e.preventDefault(),i.setOpen(!1),void(i.inputOk()||null===(a=(n=i.props).onInputError)||void 0===a||a.call(n,{code:1,msg:LT}));var _=null;switch(x){case aN.ArrowLeft:case aN.ArrowRight:case aN.ArrowUp:case aN.ArrowDown:case aN.PageUp:case aN.PageDown:case aN.Home:case aN.End:_=function(e,t){for(var r=e,n=!1,a=0,s=w(e,t);!n;){if(a>=40){s=t;break}c&&s<c&&(r=aN.ArrowRight,s=IN(c,i.props)?w(r,s):c),u&&s>u&&(r=aN.ArrowLeft,s=IN(u,i.props)?w(r,s):u),IN(s,i.props)?(r!==aN.PageUp&&r!==aN.Home||(r=aN.ArrowRight),r!==aN.PageDown&&r!==aN.End||(r=aN.ArrowLeft),s=w(r,s)):n=!0,a++}return s}(x,b)}if(_){if(e.preventDefault(),i.setState({lastPreSelectChange:BT}),g&&i.setSelected(_),i.setPreSelection(_),v){var k=Nj(b),S=Nj(_),j=Cj(b),E=Cj(_);k!==S||j!==E?i.setState({shouldFocusDayInline:!0}):i.setState({shouldFocusDayInline:!1})}}else null===(o=(s=i.props).onInputError)||void 0===o||o.call(s,{code:1,msg:LT})}},i.onPopperKeyDown=function(e){e.key===aN.Escape&&(e.preventDefault(),i.sendFocusBackToInput())},i.onClearClick=function(e){e&&e.preventDefault&&e.preventDefault(),i.sendFocusBackToInput();var t=i.props,r=t.selectsRange,n=t.onChange;r?null===n||void 0===n||n([null,null],e):null===n||void 0===n||n(null,e),i.setState({inputValue:null})},i.clear=function(){i.onClearClick()},i.onScroll=function(e){"boolean"===typeof i.props.closeOnScroll&&i.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||i.setOpen(!1):"function"===typeof i.props.closeOnScroll&&i.props.closeOnScroll(e)&&i.setOpen(!1)},i.renderCalendar=function(){var e,n;return i.props.inline||i.isCalendarOpen()?t.createElement(TT,nN({showMonthYearDropdown:void 0,ref:function(e){i.calendar=e}},i.props,i.state,{setOpen:i.setOpen,dateFormat:null!==(e=i.props.dateFormatCalendar)&&void 0!==e?e:r.defaultProps.dateFormatCalendar,onSelect:i.handleSelect,onClickOutside:i.handleCalendarClickOutside,holidays:JN(i.modifyHolidays()),outsideClickIgnoreClass:RT,onDropdownFocus:i.handleDropdownFocus,onTimeChange:i.handleTimeChange,className:i.props.calendarClassName,container:i.props.calendarContainer,handleOnKeyDown:i.props.onKeyDown,handleOnDayKeyDown:i.onDayKeyDown,setPreSelection:i.setPreSelection,dropdownMode:null!==(n=i.props.dropdownMode)&&void 0!==n?n:r.defaultProps.dropdownMode}),i.props.children):null},i.renderAriaLiveRegion=function(){var e,n=i.props,a=n.dateFormat,s=void 0===a?r.defaultProps.dateFormat:a,o=n.locale,l=i.props.showTimeInput||i.props.showTimeSelect?"PPPPp":"PPPP";return e=i.props.selectsRange?"Selected start date: ".concat(pN(i.props.startDate,{dateFormat:l,locale:o}),". ").concat(i.props.endDate?"End date: "+pN(i.props.endDate,{dateFormat:l,locale:o}):""):i.props.showTimeSelectOnly?"Selected time: ".concat(pN(i.props.selected,{dateFormat:s,locale:o})):i.props.showYearPicker?"Selected year: ".concat(pN(i.props.selected,{dateFormat:"yyyy",locale:o})):i.props.showMonthYearPicker?"Selected month: ".concat(pN(i.props.selected,{dateFormat:"MMMM yyyy",locale:o})):i.props.showQuarterYearPicker?"Selected quarter: ".concat(pN(i.props.selected,{dateFormat:"yyyy, QQQ",locale:o})):"Selected date: ".concat(pN(i.props.selected,{dateFormat:l,locale:o})),t.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},e)},i.renderDateInput=function(){var e,n,a,s=vi(i.props.className,((e={})[RT]=i.state.open,e)),o=i.props.customInput||t.createElement("input",{type:"text"}),l=i.props.customInputRef||"ref",c=i.props,u=c.dateFormat,d=void 0===u?r.defaultProps.dateFormat:u,h=c.locale,p="string"===typeof i.props.value?i.props.value:"string"===typeof i.state.inputValue?i.state.inputValue:i.props.selectsRange?function(e,t,r){if(!e)return"";var n=pN(e,r),i=t?pN(t,r):"";return"".concat(n," - ").concat(i)}(i.props.startDate,i.props.endDate,{dateFormat:d,locale:h}):i.props.selectsMultiple?function(e,t){if(!(null===e||void 0===e?void 0:e.length))return"";var r=e[0]?pN(e[0],t):"";if(1===e.length)return r;if(2===e.length&&e[1]){var n=pN(e[1],t);return"".concat(r,", ").concat(n)}var i=e.length-1;return"".concat(r," (+").concat(i,")")}(null!==(a=i.props.selectedDates)&&void 0!==a?a:[],{dateFormat:d,locale:h}):pN(i.props.selected,{dateFormat:d,locale:h});return(0,t.cloneElement)(o,((n={})[l]=function(e){i.input=e},n.value=p,n.onBlur=i.handleBlur,n.onChange=i.handleChange,n.onClick=i.onInputClick,n.onFocus=i.handleFocus,n.onKeyDown=i.onInputKeyDown,n.id=i.props.id,n.name=i.props.name,n.form=i.props.form,n.autoFocus=i.props.autoFocus,n.placeholder=i.props.placeholderText,n.disabled=i.props.disabled,n.autoComplete=i.props.autoComplete,n.className=vi(o.props.className,s),n.title=i.props.title,n.readOnly=i.props.readOnly,n.required=i.props.required,n.tabIndex=i.props.tabIndex,n["aria-describedby"]=i.props.ariaDescribedBy,n["aria-invalid"]=i.props.ariaInvalid,n["aria-labelledby"]=i.props.ariaLabelledBy,n["aria-required"]=i.props.ariaRequired,n))},i.renderClearButton=function(){var e=i.props,r=e.isClearable,n=e.disabled,a=e.selected,s=e.startDate,o=e.endDate,l=e.clearButtonTitle,c=e.clearButtonClassName,u=void 0===c?"":c,d=e.ariaLabelClose,h=void 0===d?"Close":d,p=e.selectedDates;return r&&(null!=a||null!=s||null!=o||(null===p||void 0===p?void 0:p.length))?t.createElement("button",{type:"button",className:vi("react-datepicker__close-icon",u,{"react-datepicker__close-icon--disabled":n}),disabled:n,"aria-label":h,onClick:i.onClearClick,title:l,tabIndex:-1}):null},i.state=i.calcInitialState(),i.preventFocusTimeout=void 0,i}return rN(r,e),Object.defineProperty(r,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:12,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),r.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},r.prototype.componentDidUpdate=function(e,t){var r,n,i,a,s,o;e.inline&&(s=e.selected,o=this.props.selected,s&&o?Nj(s)!==Nj(o)||Cj(s)!==Cj(o):s!==o)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:QN(this.props.highlightDates)}),t.focused||CN(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&(null===(n=(r=this.props).onCalendarOpen)||void 0===n||n.call(r)),!0===t.open&&!1===this.state.open&&(null===(a=(i=this.props).onCalendarClose)||void 0===a||a.call(i)))},r.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},r.prototype.renderInputContainer=function(){var e=this.props,r=e.showIcon,n=e.icon,i=e.calendarIconClassname,a=e.calendarIconClassName,s=e.toggleCalendarOnIconClick,o=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),t.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&t.createElement(PT,nN({icon:n,className:vi(a,!a&&i,o&&"react-datepicker-ignore-onclickoutside")},s?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},r.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var r=this.state.open?t.createElement(IT,{enableTabLoop:this.props.enableTabLoop},t.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(r=t.createElement(AT,nN({portalId:this.props.portalId},this.props),r)),t.createElement("div",null,this.renderInputContainer(),r)}return t.createElement(DT,nN({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},r}(t.Component),$T="input",BT="navigate";const zT=r.p+"static/media/Ic_calendar.f2a94b56fa7ac9c088f5c7e29f8c18ba.svg",UT=e=>{let{selectedDate:t,onDateChange:r,dateFormat:n="yyyy/MM/dd",placeholderText:i="Select a date",className:a}=e;const s=e=>{let{value:t,onClick:r}=e;return(0,V.jsxs)("div",{style:{position:"relative"},className:`${a}`,onClick:r,children:[(0,V.jsx)("img",{src:zT,alt:"Calendar icon"}),(0,V.jsx)("input",{type:"text",value:t,placeholder:i,readOnly:!0,className:"text-sm font-medium focus-within:outline-none w-full"})]})};return(0,V.jsx)("div",{className:"w-full",children:(0,V.jsx)(FT,{selected:t,onChange:r,dateFormat:n,customInput:(0,V.jsx)(s,{value:t?t.toLocaleDateString():"",onClick:()=>{}}),showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select"})})},VT=()=>{const[e,r]=(0,t.useState)(null),[n,i]=(0,t.useState)({users:0,husmodell:0,plot:0,householdLeads:0,kombinasjoner:0,constructedPlot:0,bankLeads:0,supplier:0}),[a,s]=(0,t.useState)(!1),o=Kr(),l=localStorage.getItem("Iplot_admin"),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){var t;null!==e&&void 0!==e&&e.role&&f(null===e||void 0===e?void 0:e.role),null!==e&&void 0!==e&&e.supplier&&h(null===e||void 0===e?void 0:e.supplier);const r=null===e||void 0===e||null===(t=e.modulePermissions)||void 0===t?void 0:t.find((e=>"Husmodell"===e.name));u(null===r||void 0===r?void 0:r.permissions)}})()}),[]),(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){const t=null===e||void 0===e?void 0:e.supplier;u(t)}})()}),[c]);(0,t.useEffect)((()=>{(async()=>{const e=["drashti.doubledotts@gmail.com","abc@gmail.com","keren@arnhoff.no","simen@askerhaandverk.no","ole@nestegg.no","fenger@iplot.no","drashtisavani22@gmail.com","rudraksh.shukla98@gmail.com","tanmaymundra01@gmail.com"];try{let t,r,n,a,o;s(!0),t="Agent"===p?Zm(lm(g_,"house_model"),Xm("Husdetaljer.Leverand\xf8rer","==",d)):Zm(lm(g_,"house_model")),"andre.finger@gmail.com"===l?(r=Zm(lm(g_,"leads"),Xm("Isopt","==",!0)),n=Zm(lm(g_,"leads"),Xm("Isopt","==",!1)),a=Zm(lm(g_,"leads"),Xm("IsoptForBank","==",!0)),o=Zm(lm(g_,"suppliers"))):(r=Zm(lm(g_,"leads"),Xm("Isopt","==",!0),Xm("finalData.husmodell.Husdetaljer.Leverand\xf8rer","==",String(c))),n=Zm(lm(g_,"leads"),Xm("Isopt","==",!1),Xm("finalData.husmodell.Husdetaljer.Leverand\xf8rer","==",String(c))),a=Zm(lm(g_,"leads"),Xm("IsoptForBank","==",!0),Xm("finalData.husmodell.Husdetaljer.Leverand\xf8rer","==",String(c))),o=Zm(lm(g_,"suppliers"),Xm("id","==",String(c))));const[u,h,f,m,g,v,x,y]=await Promise.all([bg(lm(g_,"users")),bg(t),bg(lm(g_,"empty_plot")),r,n,bg(lm(g_,"plot_building")),a,bg(o)]),b=(await pg(g)).docs.filter((t=>{var r,n;return!e.includes(null===(r=t.data())||void 0===r||null===(n=r.user)||void 0===n?void 0:n.email)})),w=(await pg(m)).docs.filter((t=>{var r,n;return!e.includes(null===(r=t.data())||void 0===r||null===(n=r.user)||void 0===n?void 0:n.email)})),_=(await pg(x)).docs.filter((t=>{var r,n;return!e.includes(null===(r=t.data())||void 0===r||null===(n=r.user)||void 0===n?void 0:n.email)}));i({users:u.data().count,husmodell:h.data().count,plot:f.data().count,householdLeads:w.length,kombinasjoner:b.length,constructedPlot:v.data().count,bankLeads:_.length,supplier:y.data().count}),s(!1)}catch(t){console.error("Error fetching data:",t)}})()}),[c]);const m=[{title:"Antall brukere",value:n.users,percentage:10,path:"/users"},{title:"Antall tomter",value:n.plot,percentage:10,path:"/plot"},{title:"Antall husmodeller",value:n.husmodell,percentage:12,path:"/Husmodeller"},{title:"Antall husleads",value:n.householdLeads,percentage:12,path:"/se-husleads"},{title:"Antall bankleads",value:n.bankLeads,percentage:10,path:"/se-bankleads"},{title:"Antall kombinasjoner",title2:"(tomt+hus)",value:n.kombinasjoner,percentage:10,path:"/se-kombinasjoner"},{title:"S\xf8kte adresser",value:n.constructedPlot,percentage:10,path:"/constructed-plot"},{title:"Leverandorer",value:n.supplier,percentage:10,path:"/Leverandorer"}];return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-6",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Velkommen tilbake, Andr\xe9"}),(0,V.jsxs)("div",{className:"flex lg:items-center flex-col lg:flex-row gap-2 justify-between",children:[(0,V.jsxs)("div",{className:"shadow-shadow1 border border-gray1 rounded-[8px] flex w-max",children:[(0,V.jsx)("div",{className:"p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm",children:"12 m\xe5neder"}),(0,V.jsx)("div",{className:"p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm border border-t-0 border-b-0 border-gray1",children:"30 dager"}),(0,V.jsx)("div",{className:"p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm border-r border-gray1",children:"7 dager"}),(0,V.jsx)("div",{className:"p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm",children:"24 timer"})]}),(0,V.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 sm:items-center",children:(0,V.jsx)(UT,{selectedDate:e,onDateChange:r,dateFormat:"MM/dd/yyyy",placeholderText:"Velg dato",className:"border border-gray1 rounded-[8px] flex gap-2 items-center py-[10px] px-4 cursor-pointer shadow-shadow1 h-[40px] w-full sm:w-max"})})]}),(0,V.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 lg:gap-5 desktop:gap-6",children:a?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"w-full h-[125px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[125px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[125px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[125px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[125px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[125px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[125px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[125px] rounded-md custom-shimmer",style:{borderRadius:"8px"}})]}):(0,V.jsx)(V.Fragment,{children:m.map(((e,t)=>(0,V.jsxs)("div",{className:`shadow-shadow2 border border-gray2 bg-lightPurple rounded-[8px] p-3.5 sm:p-4 lg:p-6 flex flex-col gap-2 ${(null===e||void 0===e?void 0:e.path)&&"cursor-pointer"}`,onClick:null!==e&&void 0!==e&&e.path?()=>o(e.path):void 0,children:[(0,V.jsx)("div",{className:"flex items-center gap-2 justify-between",children:(0,V.jsxs)("span",{className:"text-gray text-sm font-medium",children:[e.title," ",e.title2&&(0,V.jsx)("span",{className:"text-opacity-60 text-gray",children:e.title2})]})}),(0,V.jsx)("div",{className:"flex items-center gap-4 justify-between",children:(0,V.jsx)("h4",{className:"text-darkBlack font-semibold text-xl md:text-2xl desktop:text-[30px]",children:e.value})})]},t)))})})]})})},HT=e=>{let{text:t,className:r,type:n,onClick:i,path:a,icon:s}=e;const o=Kr();return(0,V.jsxs)("button",{className:`${r} text-base whitespace-nowrap px-3 md:px-4 py-[10px] h-[40px] flex items-center justify-center`,type:n||"button",onClick:()=>{a?o(a):null===i||void 0===i||i()},children:[s&&s,t]})},GT=F_("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),WT=F_("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),qT=F_("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),KT=F_("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ZT=F_("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),YT=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)("div",{className:"relative w-full overflow-auto",children:(0,V.jsx)("table",{ref:t,className:x_("w-full caption-bottom text-sm",r),...n})})}));YT.displayName="Table";const XT=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)("thead",{ref:t,className:x_("[&_tr]:border-b border-gray2",r),...n})}));XT.displayName="TableHeader";const QT=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)("tbody",{ref:t,className:x_("[&_tr:last-child]:border-0",r),...n})}));QT.displayName="TableBody";t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)("tfoot",{ref:t,className:x_("border-t border-gray2 bg-zinc-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-zinc-800/50",r),...n})})).displayName="TableFooter";const JT=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)("tr",{ref:t,className:x_("border-b border-gray2 transition-colors hover:bg-zinc-100/50 data-[state=selected]:bg-zinc-100 dark:hover:bg-zinc-800/50 dark:data-[state=selected]:bg-zinc-800",r),...n})}));JT.displayName="TableRow";const eP=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)("th",{ref:t,className:x_("h-10 px-3 md:px-6 py-3 text-left align-middle font-medium text-zinc-500 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] text-[#667085] dark:text-zinc-400 bg-[#F9FAFB] whitespace-nowrap",r),...n})}));eP.displayName="TableHead";const tP=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)("td",{ref:t,className:x_("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...n})}));tP.displayName="TableCell";function rP(e,t){return"function"===typeof e?e(t):e}function nP(e,t){return r=>{t.setState((t=>({...t,[e]:rP(r,t[e])})))}}function iP(e){return e instanceof Function}function aP(e,t){const r=[],n=e=>{e.forEach((e=>{r.push(e);const i=t(e);null!=i&&i.length&&n(i)}))};return n(e),r}function sP(e,t,r){let n,i=[];return a=>{let s;r.key&&r.debug&&(s=Date.now());const o=e(a),l=o.length!==i.length||o.some(((e,t)=>i[t]!==e));if(!l)return n;let c;if(i=o,r.key&&r.debug&&(c=Date.now()),n=t(...o),null==r||null==r.onChange||r.onChange(n),r.key&&r.debug&&null!=r&&r.debug()){const e=Math.round(100*(Date.now()-s))/100,t=Math.round(100*(Date.now()-c))/100,n=t/16,i=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c\u23f1 ${i(t,5)} /${i(e,5)} ms`,`\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(0,Math.min(120-120*n,120))}deg 100% 31%);`,null==r?void 0:r.key)}return n}}function oP(e,t,r,n){return{debug:()=>{var r;return null!=(r=null==e?void 0:e.debugAll)?r:e[t]},key:!1,onChange:n}}t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)("caption",{ref:t,className:x_("mt-4 text-sm text-zinc-500 dark:text-zinc-400",r),...n})})).displayName="TableCaption";const lP="debugHeaders";function cP(e,t,r){var n;let i={id:null!=(n=r.id)?n:t.id,column:t,index:r.index,isPlaceholder:!!r.isPlaceholder,placeholderId:r.placeholderId,depth:r.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const e=[],t=r=>{r.subHeaders&&r.subHeaders.length&&r.subHeaders.map(t),e.push(r)};return t(i),e},getContext:()=>({table:e,header:i,column:t})};return e._features.forEach((t=>{null==t.createHeader||t.createHeader(i,e)})),i}const uP={createTable:e=>{e.getHeaderGroups=sP((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right]),((t,r,n,i)=>{var a,s;const o=null!=(a=null==n?void 0:n.map((e=>r.find((t=>t.id===e)))).filter(Boolean))?a:[],l=null!=(s=null==i?void 0:i.map((e=>r.find((t=>t.id===e)))).filter(Boolean))?s:[];return dP(t,[...o,...r.filter((e=>!(null!=n&&n.includes(e.id))&&!(null!=i&&i.includes(e.id)))),...l],e)}),oP(e.options,lP)),e.getCenterHeaderGroups=sP((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right]),((t,r,n,i)=>dP(t,r=r.filter((e=>!(null!=n&&n.includes(e.id))&&!(null!=i&&i.includes(e.id)))),e,"center")),oP(e.options,lP)),e.getLeftHeaderGroups=sP((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left]),((t,r,n)=>{var i;const a=null!=(i=null==n?void 0:n.map((e=>r.find((t=>t.id===e)))).filter(Boolean))?i:[];return dP(t,a,e,"left")}),oP(e.options,lP)),e.getRightHeaderGroups=sP((()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right]),((t,r,n)=>{var i;const a=null!=(i=null==n?void 0:n.map((e=>r.find((t=>t.id===e)))).filter(Boolean))?i:[];return dP(t,a,e,"right")}),oP(e.options,lP)),e.getFooterGroups=sP((()=>[e.getHeaderGroups()]),(e=>[...e].reverse()),oP(e.options,lP)),e.getLeftFooterGroups=sP((()=>[e.getLeftHeaderGroups()]),(e=>[...e].reverse()),oP(e.options,lP)),e.getCenterFooterGroups=sP((()=>[e.getCenterHeaderGroups()]),(e=>[...e].reverse()),oP(e.options,lP)),e.getRightFooterGroups=sP((()=>[e.getRightHeaderGroups()]),(e=>[...e].reverse()),oP(e.options,lP)),e.getFlatHeaders=sP((()=>[e.getHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),oP(e.options,lP)),e.getLeftFlatHeaders=sP((()=>[e.getLeftHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),oP(e.options,lP)),e.getCenterFlatHeaders=sP((()=>[e.getCenterHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),oP(e.options,lP)),e.getRightFlatHeaders=sP((()=>[e.getRightHeaderGroups()]),(e=>e.map((e=>e.headers)).flat()),oP(e.options,lP)),e.getCenterLeafHeaders=sP((()=>[e.getCenterFlatHeaders()]),(e=>e.filter((e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}))),oP(e.options,lP)),e.getLeftLeafHeaders=sP((()=>[e.getLeftFlatHeaders()]),(e=>e.filter((e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}))),oP(e.options,lP)),e.getRightLeafHeaders=sP((()=>[e.getRightFlatHeaders()]),(e=>e.filter((e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}))),oP(e.options,lP)),e.getLeafHeaders=sP((()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()]),((e,t,r)=>{var n,i,a,s,o,l;return[...null!=(n=null==(i=e[0])?void 0:i.headers)?n:[],...null!=(a=null==(s=t[0])?void 0:s.headers)?a:[],...null!=(o=null==(l=r[0])?void 0:l.headers)?o:[]].map((e=>e.getLeafHeaders())).flat()}),oP(e.options,lP))}};function dP(e,t,r,n){var i,a;let s=0;const o=function(e,t){void 0===t&&(t=1),s=Math.max(s,t),e.filter((e=>e.getIsVisible())).forEach((e=>{var r;null!=(r=e.columns)&&r.length&&o(e.columns,t+1)}),0)};o(e);let l=[];const c=(e,t)=>{const i={depth:t,id:[n,`${t}`].filter(Boolean).join("_"),headers:[]},a=[];e.forEach((e=>{const s=[...a].reverse()[0];let o,l=!1;if(e.column.depth===i.depth&&e.column.parent?o=e.column.parent:(o=e.column,l=!0),s&&(null==s?void 0:s.column)===o)s.subHeaders.push(e);else{const i=cP(r,o,{id:[n,t,o.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:l,placeholderId:l?`${a.filter((e=>e.column===o)).length}`:void 0,depth:t,index:a.length});i.subHeaders.push(e),a.push(i)}i.headers.push(e),e.headerGroup=i})),l.push(i),t>0&&c(a,t-1)},u=t.map(((e,t)=>cP(r,e,{depth:s,index:t})));c(u,s-1),l.reverse();const d=e=>e.filter((e=>e.column.getIsVisible())).map((e=>{let t=0,r=0,n=[0];e.subHeaders&&e.subHeaders.length?(n=[],d(e.subHeaders).forEach((e=>{let{colSpan:r,rowSpan:i}=e;t+=r,n.push(i)}))):t=1;return r+=Math.min(...n),e.colSpan=t,e.rowSpan=r,{colSpan:t,rowSpan:r}}));return d(null!=(i=null==(a=l[0])?void 0:a.headers)?i:[]),l}const hP=(e,t,r,n,i,a,s)=>{let o={id:t,index:n,original:r,depth:i,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(o._valuesCache.hasOwnProperty(t))return o._valuesCache[t];const r=e.getColumn(t);return null!=r&&r.accessorFn?(o._valuesCache[t]=r.accessorFn(o.original,n),o._valuesCache[t]):void 0},getUniqueValues:t=>{if(o._uniqueValuesCache.hasOwnProperty(t))return o._uniqueValuesCache[t];const r=e.getColumn(t);return null!=r&&r.accessorFn?r.columnDef.getUniqueValues?(o._uniqueValuesCache[t]=r.columnDef.getUniqueValues(o.original,n),o._uniqueValuesCache[t]):(o._uniqueValuesCache[t]=[o.getValue(t)],o._uniqueValuesCache[t]):void 0},renderValue:t=>{var r;return null!=(r=o.getValue(t))?r:e.options.renderFallbackValue},subRows:null!=a?a:[],getLeafRows:()=>aP(o.subRows,(e=>e.subRows)),getParentRow:()=>o.parentId?e.getRow(o.parentId,!0):void 0,getParentRows:()=>{let e=[],t=o;for(;;){const r=t.getParentRow();if(!r)break;e.push(r),t=r}return e.reverse()},getAllCells:sP((()=>[e.getAllLeafColumns()]),(t=>t.map((t=>function(e,t,r,n){const i={id:`${t.id}_${r.id}`,row:t,column:r,getValue:()=>t.getValue(n),renderValue:()=>{var t;return null!=(t=i.getValue())?t:e.options.renderFallbackValue},getContext:sP((()=>[e,r,t,i]),((e,t,r,n)=>({table:e,column:t,row:r,cell:n,getValue:n.getValue,renderValue:n.renderValue})),oP(e.options,"debugCells"))};return e._features.forEach((n=>{null==n.createCell||n.createCell(i,r,t,e)}),{}),i}(e,o,t,t.id)))),oP(e.options,"debugRows")),_getAllCellsByColumnId:sP((()=>[o.getAllCells()]),(e=>e.reduce(((e,t)=>(e[t.column.id]=t,e)),{})),oP(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const t=e._features[l];null==t||null==t.createRow||t.createRow(o,e)}return o},pP={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},fP=(e,t,r)=>{var n,i;const a=null==r||null==(n=r.toString())?void 0:n.toLowerCase();return Boolean(null==(i=e.getValue(t))||null==(i=i.toString())||null==(i=i.toLowerCase())?void 0:i.includes(a))};fP.autoRemove=e=>SP(e);const mP=(e,t,r)=>{var n;return Boolean(null==(n=e.getValue(t))||null==(n=n.toString())?void 0:n.includes(r))};mP.autoRemove=e=>SP(e);const gP=(e,t,r)=>{var n;return(null==(n=e.getValue(t))||null==(n=n.toString())?void 0:n.toLowerCase())===(null==r?void 0:r.toLowerCase())};gP.autoRemove=e=>SP(e);const vP=(e,t,r)=>{var n;return null==(n=e.getValue(t))?void 0:n.includes(r)};vP.autoRemove=e=>SP(e);const xP=(e,t,r)=>!r.some((r=>{var n;return!(null!=(n=e.getValue(t))&&n.includes(r))}));xP.autoRemove=e=>SP(e)||!(null!=e&&e.length);const yP=(e,t,r)=>r.some((r=>{var n;return null==(n=e.getValue(t))?void 0:n.includes(r)}));yP.autoRemove=e=>SP(e)||!(null!=e&&e.length);const bP=(e,t,r)=>e.getValue(t)===r;bP.autoRemove=e=>SP(e);const wP=(e,t,r)=>e.getValue(t)==r;wP.autoRemove=e=>SP(e);const _P=(e,t,r)=>{let[n,i]=r;const a=e.getValue(t);return a>=n&&a<=i};_P.resolveFilterValue=e=>{let[t,r]=e,n="number"!==typeof t?parseFloat(t):t,i="number"!==typeof r?parseFloat(r):r,a=null===t||Number.isNaN(n)?-1/0:n,s=null===r||Number.isNaN(i)?1/0:i;if(a>s){const e=a;a=s,s=e}return[a,s]},_P.autoRemove=e=>SP(e)||SP(e[0])&&SP(e[1]);const kP={includesString:fP,includesStringSensitive:mP,equalsString:gP,arrIncludes:vP,arrIncludesAll:xP,arrIncludesSome:yP,equals:bP,weakEquals:wP,inNumberRange:_P};function SP(e){return void 0===e||null===e||""===e}const jP={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:nP("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const r=t.getCoreRowModel().flatRows[0],n=null==r?void 0:r.getValue(e.id);return"string"===typeof n?kP.includesString:"number"===typeof n?kP.inNumberRange:"boolean"===typeof n||null!==n&&"object"===typeof n?kP.equals:Array.isArray(n)?kP.arrIncludes:kP.weakEquals},e.getFilterFn=()=>{var r,n;return iP(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(r=null==(n=t.options.filterFns)?void 0:n[e.columnDef.filterFn])?r:kP[e.columnDef.filterFn]},e.getCanFilter=()=>{var r,n,i;return(null==(r=e.columnDef.enableColumnFilter)||r)&&(null==(n=t.options.enableColumnFilters)||n)&&(null==(i=t.options.enableFilters)||i)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var r;return null==(r=t.getState().columnFilters)||null==(r=r.find((t=>t.id===e.id)))?void 0:r.value},e.getFilterIndex=()=>{var r,n;return null!=(r=null==(n=t.getState().columnFilters)?void 0:n.findIndex((t=>t.id===e.id)))?r:-1},e.setFilterValue=r=>{t.setColumnFilters((t=>{const n=e.getFilterFn(),i=null==t?void 0:t.find((t=>t.id===e.id)),a=rP(r,i?i.value:void 0);var s;if(EP(n,a,e))return null!=(s=null==t?void 0:t.filter((t=>t.id!==e.id)))?s:[];const o={id:e.id,value:a};var l;return i?null!=(l=null==t?void 0:t.map((t=>t.id===e.id?o:t)))?l:[]:null!=t&&t.length?[...t,o]:[o]}))}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const r=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange((e=>{var n;return null==(n=rP(t,e))?void 0:n.filter((e=>{const t=r.find((t=>t.id===e.id));if(t){if(EP(t.getFilterFn(),e.value,t))return!1}return!0}))}))},e.resetColumnFilters=t=>{var r,n;e.setColumnFilters(t?[]:null!=(r=null==(n=e.initialState)?void 0:n.columnFilters)?r:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function EP(e,t,r){return!(!e||!e.autoRemove)&&e.autoRemove(t,r)||"undefined"===typeof t||"string"===typeof t&&!t}const CP={sum:(e,t,r)=>r.reduce(((t,r)=>{const n=r.getValue(e);return t+("number"===typeof n?n:0)}),0),min:(e,t,r)=>{let n;return r.forEach((t=>{const r=t.getValue(e);null!=r&&(n>r||void 0===n&&r>=r)&&(n=r)})),n},max:(e,t,r)=>{let n;return r.forEach((t=>{const r=t.getValue(e);null!=r&&(n<r||void 0===n&&r>=r)&&(n=r)})),n},extent:(e,t,r)=>{let n,i;return r.forEach((t=>{const r=t.getValue(e);null!=r&&(void 0===n?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)))})),[n,i]},mean:(e,t)=>{let r=0,n=0;if(t.forEach((t=>{let i=t.getValue(e);null!=i&&(i=+i)>=i&&(++r,n+=i)})),r)return n/r},median:(e,t)=>{if(!t.length)return;const r=t.map((t=>t.getValue(e)));if(!function(e){return Array.isArray(e)&&e.every((e=>"number"===typeof e))}(r))return;if(1===r.length)return r[0];const n=Math.floor(r.length/2),i=r.sort(((e,t)=>e-t));return r.length%2!==0?i[n]:(i[n-1]+i[n])/2},unique:(e,t)=>Array.from(new Set(t.map((t=>t.getValue(e)))).values()),uniqueCount:(e,t)=>new Set(t.map((t=>t.getValue(e)))).size,count:(e,t)=>t.length},NP={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,r;return null!=(t=null==(r=e.getValue())||null==r.toString?void 0:r.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:nP("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping((t=>null!=t&&t.includes(e.id)?t.filter((t=>t!==e.id)):[...null!=t?t:[],e.id]))},e.getCanGroup=()=>{var r,n;return(null==(r=e.columnDef.enableGrouping)||r)&&(null==(n=t.options.enableGrouping)||n)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var r;return null==(r=t.getState().grouping)?void 0:r.includes(e.id)},e.getGroupedIndex=()=>{var r;return null==(r=t.getState().grouping)?void 0:r.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const r=t.getCoreRowModel().flatRows[0],n=null==r?void 0:r.getValue(e.id);return"number"===typeof n?CP.sum:"[object Date]"===Object.prototype.toString.call(n)?CP.extent:void 0},e.getAggregationFn=()=>{var r,n;if(!e)throw new Error;return iP(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(r=null==(n=t.options.aggregationFns)?void 0:n[e.columnDef.aggregationFn])?r:CP[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var r,n;e.setGrouping(t?[]:null!=(r=null==(n=e.initialState)?void 0:n.grouping)?r:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=r=>{if(e._groupingValuesCache.hasOwnProperty(r))return e._groupingValuesCache[r];const n=t.getColumn(r);return null!=n&&n.columnDef.getGroupingValue?(e._groupingValuesCache[r]=n.columnDef.getGroupingValue(e.original),e._groupingValuesCache[r]):e.getValue(r)},e._groupingValuesCache={}},createCell:(e,t,r,n)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===r.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!(null==(t=r.subRows)||!t.length)}}};const TP={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:nP("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=sP((e=>[RP(t,e)]),(t=>t.findIndex((t=>t.id===e.id))),oP(t.options,"debugColumns")),e.getIsFirstColumn=r=>{var n;return(null==(n=RP(t,r)[0])?void 0:n.id)===e.id},e.getIsLastColumn=r=>{var n;const i=RP(t,r);return(null==(n=i[i.length-1])?void 0:n.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var r;e.setColumnOrder(t?[]:null!=(r=e.initialState.columnOrder)?r:[])},e._getOrderColumnsFn=sP((()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode]),((e,t,r)=>n=>{let i=[];if(null!=e&&e.length){const t=[...e],r=[...n];for(;r.length&&t.length;){const e=t.shift(),n=r.findIndex((t=>t.id===e));n>-1&&i.push(r.splice(n,1)[0])}i=[...i,...r]}else i=n;return function(e,t,r){if(null==t||!t.length||!r)return e;const n=e.filter((e=>!t.includes(e.id)));if("remove"===r)return n;const i=t.map((t=>e.find((e=>e.id===t)))).filter(Boolean);return[...i,...n]}(i,t,r)}),oP(e.options,"debugTable"))}},PP={getInitialState:e=>({columnPinning:{left:[],right:[]},...e}),getDefaultOptions:e=>({onColumnPinningChange:nP("columnPinning",e)}),createColumn:(e,t)=>{e.pin=r=>{const n=e.getLeafColumns().map((e=>e.id)).filter(Boolean);t.setColumnPinning((e=>{var t,i,a,s,o,l;return"right"===r?{left:(null!=(a=null==e?void 0:e.left)?a:[]).filter((e=>!(null!=n&&n.includes(e)))),right:[...(null!=(s=null==e?void 0:e.right)?s:[]).filter((e=>!(null!=n&&n.includes(e)))),...n]}:"left"===r?{left:[...(null!=(o=null==e?void 0:e.left)?o:[]).filter((e=>!(null!=n&&n.includes(e)))),...n],right:(null!=(l=null==e?void 0:e.right)?l:[]).filter((e=>!(null!=n&&n.includes(e))))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter((e=>!(null!=n&&n.includes(e)))),right:(null!=(i=null==e?void 0:e.right)?i:[]).filter((e=>!(null!=n&&n.includes(e))))}}))},e.getCanPin=()=>e.getLeafColumns().some((e=>{var r,n,i;return(null==(r=e.columnDef.enablePinning)||r)&&(null==(n=null!=(i=t.options.enableColumnPinning)?i:t.options.enablePinning)||n)})),e.getIsPinned=()=>{const r=e.getLeafColumns().map((e=>e.id)),{left:n,right:i}=t.getState().columnPinning,a=r.some((e=>null==n?void 0:n.includes(e))),s=r.some((e=>null==i?void 0:i.includes(e)));return a?"left":!!s&&"right"},e.getPinnedIndex=()=>{var r,n;const i=e.getIsPinned();return i?null!=(r=null==(n=t.getState().columnPinning)||null==(n=n[i])?void 0:n.indexOf(e.id))?r:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=sP((()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right]),((e,t,r)=>{const n=[...null!=t?t:[],...null!=r?r:[]];return e.filter((e=>!n.includes(e.column.id)))}),oP(t.options,"debugRows")),e.getLeftVisibleCells=sP((()=>[e._getAllVisibleCells(),t.getState().columnPinning.left]),((e,t)=>{const r=(null!=t?t:[]).map((t=>e.find((e=>e.column.id===t)))).filter(Boolean).map((e=>({...e,position:"left"})));return r}),oP(t.options,"debugRows")),e.getRightVisibleCells=sP((()=>[e._getAllVisibleCells(),t.getState().columnPinning.right]),((e,t)=>{const r=(null!=t?t:[]).map((t=>e.find((e=>e.column.id===t)))).filter(Boolean).map((e=>({...e,position:"right"})));return r}),oP(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var r,n;return e.setColumnPinning(t?{left:[],right:[]}:null!=(r=null==(n=e.initialState)?void 0:n.columnPinning)?r:{left:[],right:[]})},e.getIsSomeColumnsPinned=t=>{var r;const n=e.getState().columnPinning;var i,a;return t?Boolean(null==(r=n[t])?void 0:r.length):Boolean((null==(i=n.left)?void 0:i.length)||(null==(a=n.right)?void 0:a.length))},e.getLeftLeafColumns=sP((()=>[e.getAllLeafColumns(),e.getState().columnPinning.left]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.id===t)))).filter(Boolean)),oP(e.options,"debugColumns")),e.getRightLeafColumns=sP((()=>[e.getAllLeafColumns(),e.getState().columnPinning.right]),((e,t)=>(null!=t?t:[]).map((t=>e.find((e=>e.id===t)))).filter(Boolean)),oP(e.options,"debugColumns")),e.getCenterLeafColumns=sP((()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right]),((e,t,r)=>{const n=[...null!=t?t:[],...null!=r?r:[]];return e.filter((e=>!n.includes(e.id)))}),oP(e.options,"debugColumns"))}},AP={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},MP={getDefaultColumnDef:()=>AP,getInitialState:e=>({columnSizing:{},columnSizingInfo:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]},...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:nP("columnSizing",e),onColumnSizingInfoChange:nP("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var r,n,i;const a=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(r=e.columnDef.minSize)?r:AP.minSize,null!=(n=null!=a?a:e.columnDef.size)?n:AP.size),null!=(i=e.columnDef.maxSize)?i:AP.maxSize)},e.getStart=sP((e=>[e,RP(t,e),t.getState().columnSizing]),((t,r)=>r.slice(0,e.getIndex(t)).reduce(((e,t)=>e+t.getSize()),0)),oP(t.options,"debugColumns")),e.getAfter=sP((e=>[e,RP(t,e),t.getState().columnSizing]),((t,r)=>r.slice(e.getIndex(t)+1).reduce(((e,t)=>e+t.getSize()),0)),oP(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing((t=>{let{[e.id]:r,...n}=t;return n}))},e.getCanResize=()=>{var r,n;return(null==(r=e.columnDef.enableResizing)||r)&&(null==(n=t.options.enableColumnResizing)||n)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0;const r=e=>{var n;e.subHeaders.length?e.subHeaders.forEach(r):t+=null!=(n=e.column.getSize())?n:0};return r(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=r=>{const n=t.getColumn(e.column.id),i=null==n?void 0:n.getCanResize();return a=>{if(!n||!i)return;if(null==a.persist||a.persist(),OP(a)&&a.touches&&a.touches.length>1)return;const s=e.getSize(),o=e?e.getLeafHeaders().map((e=>[e.column.id,e.column.getSize()])):[[n.id,n.getSize()]],l=OP(a)?Math.round(a.touches[0].clientX):a.clientX,c={},u=(e,r)=>{"number"===typeof r&&(t.setColumnSizingInfo((e=>{var n,i;const a="rtl"===t.options.columnResizeDirection?-1:1,s=(r-(null!=(n=null==e?void 0:e.startOffset)?n:0))*a,o=Math.max(s/(null!=(i=null==e?void 0:e.startSize)?i:0),-.999999);return e.columnSizingStart.forEach((e=>{let[t,r]=e;c[t]=Math.round(100*Math.max(r+r*o,0))/100})),{...e,deltaOffset:s,deltaPercentage:o}})),"onChange"!==t.options.columnResizeMode&&"end"!==e||t.setColumnSizing((e=>({...e,...c}))))},d=e=>u("move",e),h=e=>{u("end",e),t.setColumnSizingInfo((e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]})))},p=r||"undefined"!==typeof document?document:null,f={moveHandler:e=>d(e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",f.moveHandler),null==p||p.removeEventListener("mouseup",f.upHandler),h(e.clientX)}},m={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),d(e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",m.moveHandler),null==p||p.removeEventListener("touchend",m.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),h(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"===typeof IP)return IP;let e=!1;try{const t={get passive(){return e=!0,!1}},r=()=>{};window.addEventListener("test",r,t),window.removeEventListener("test",r)}catch(t){e=!1}return IP=e,IP}()&&{passive:!1};OP(a)?(null==p||p.addEventListener("touchmove",m.moveHandler,g),null==p||p.addEventListener("touchend",m.upHandler,g)):(null==p||p.addEventListener("mousemove",f.moveHandler,g),null==p||p.addEventListener("mouseup",f.upHandler,g)),t.setColumnSizingInfo((e=>({...e,startOffset:l,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:n.id})))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var r;e.setColumnSizing(t?{}:null!=(r=e.initialState.columnSizing)?r:{})},e.resetHeaderSizeInfo=t=>{var r;e.setColumnSizingInfo(t?{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}:null!=(r=e.initialState.columnSizingInfo)?r:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]})},e.getTotalSize=()=>{var t,r;return null!=(t=null==(r=e.getHeaderGroups()[0])?void 0:r.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0},e.getLeftTotalSize=()=>{var t,r;return null!=(t=null==(r=e.getLeftHeaderGroups()[0])?void 0:r.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0},e.getCenterTotalSize=()=>{var t,r;return null!=(t=null==(r=e.getCenterHeaderGroups()[0])?void 0:r.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0},e.getRightTotalSize=()=>{var t,r;return null!=(t=null==(r=e.getRightHeaderGroups()[0])?void 0:r.headers.reduce(((e,t)=>e+t.getSize()),0))?t:0}}};let IP=null;function OP(e){return"touchstart"===e.type}const DP={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:nP("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=r=>{e.getCanHide()&&t.setColumnVisibility((t=>({...t,[e.id]:null!=r?r:!e.getIsVisible()})))},e.getIsVisible=()=>{var r,n;const i=e.columns;return null==(r=i.length?i.some((e=>e.getIsVisible())):null==(n=t.getState().columnVisibility)?void 0:n[e.id])||r},e.getCanHide=()=>{var r,n;return(null==(r=e.columnDef.enableHiding)||r)&&(null==(n=t.options.enableHiding)||n)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=sP((()=>[e.getAllCells(),t.getState().columnVisibility]),(e=>e.filter((e=>e.column.getIsVisible()))),oP(t.options,"debugRows")),e.getVisibleCells=sP((()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()]),((e,t,r)=>[...e,...t,...r]),oP(t.options,"debugRows"))},createTable:e=>{const t=(t,r)=>sP((()=>[r(),r().filter((e=>e.getIsVisible())).map((e=>e.id)).join("_")]),(e=>e.filter((e=>null==e.getIsVisible?void 0:e.getIsVisible()))),oP(e.options,"debugColumns"));e.getVisibleFlatColumns=t(0,(()=>e.getAllFlatColumns())),e.getVisibleLeafColumns=t(0,(()=>e.getAllLeafColumns())),e.getLeftVisibleLeafColumns=t(0,(()=>e.getLeftLeafColumns())),e.getRightVisibleLeafColumns=t(0,(()=>e.getRightLeafColumns())),e.getCenterVisibleLeafColumns=t(0,(()=>e.getCenterLeafColumns())),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var r;e.setColumnVisibility(t?{}:null!=(r=e.initialState.columnVisibility)?r:{})},e.toggleAllColumnsVisible=t=>{var r;t=null!=(r=t)?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce(((e,r)=>({...e,[r.id]:t||!(null!=r.getCanHide&&r.getCanHide())})),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some((e=>!(null!=e.getIsVisible&&e.getIsVisible()))),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some((e=>null==e.getIsVisible?void 0:e.getIsVisible())),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;e.toggleAllColumnsVisible(null==(r=t.target)?void 0:r.checked)}}};function RP(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const LP={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:nP("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var r;const n=null==(r=e.getCoreRowModel().flatRows[0])||null==(r=r._getAllCellsByColumnId()[t.id])?void 0:r.getValue();return"string"===typeof n||"number"===typeof n}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var r,n,i,a;return(null==(r=e.columnDef.enableGlobalFilter)||r)&&(null==(n=t.options.enableGlobalFilter)||n)&&(null==(i=t.options.enableFilters)||i)&&(null==(a=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||a)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>kP.includesString,e.getGlobalFilterFn=()=>{var t,r;const{globalFilterFn:n}=e.options;return iP(n)?n:"auto"===n?e.getGlobalAutoFilterFn():null!=(t=null==(r=e.options.filterFns)?void 0:r[n])?t:kP[n]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},FP={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:nP("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,r=!1;e._autoResetExpanded=()=>{var n,i;if(t){if(null!=(n=null!=(i=e.options.autoResetAll)?i:e.options.autoResetExpanded)?n:!e.options.manualExpanding){if(r)return;r=!0,e._queue((()=>{e.resetExpanded(),r=!1}))}}else e._queue((()=>{t=!0}))},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var r,n;e.setExpanded(t?{}:null!=(r=null==(n=e.initialState)?void 0:n.expanded)?r:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some((e=>e.getCanExpand())),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{const t=e.getState().expanded;return"boolean"===typeof t?!0===t:!!Object.keys(t).length&&!e.getRowModel().flatRows.some((e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach((e=>{const r=e.split(".");t=Math.max(t,r.length)})),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=r=>{t.setExpanded((n=>{var i;const a=!0===n||!(null==n||!n[e.id]);let s={};if(!0===n?Object.keys(t.getRowModel().rowsById).forEach((e=>{s[e]=!0})):s=n,r=null!=(i=r)?i:!a,!a&&r)return{...s,[e.id]:!0};if(a&&!r){const{[e.id]:t,...r}=s;return r}return n}))},e.getIsExpanded=()=>{var r;const n=t.getState().expanded;return!!(null!=(r=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?r:!0===n||(null==n?void 0:n[e.id]))},e.getCanExpand=()=>{var r,n,i;return null!=(r=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?r:(null==(n=t.options.enableExpanding)||n)&&!(null==(i=e.subRows)||!i.length)},e.getIsAllParentsExpanded=()=>{let r=!0,n=e;for(;r&&n.parentId;)n=t.getRow(n.parentId,!0),r=n.getIsExpanded();return r},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},$P={getInitialState:e=>({...e,pagination:{pageIndex:0,pageSize:10,...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:nP("pagination",e)}),createTable:e=>{let t=!1,r=!1;e._autoResetPageIndex=()=>{var n,i;if(t){if(null!=(n=null!=(i=e.options.autoResetAll)?i:e.options.autoResetPageIndex)?n:!e.options.manualPagination){if(r)return;r=!0,e._queue((()=>{e.resetPageIndex(),r=!1}))}}else e._queue((()=>{t=!0}))},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange((e=>rP(t,e))),e.resetPagination=t=>{var r;e.setPagination(t?{pageIndex:0,pageSize:10}:null!=(r=e.initialState.pagination)?r:{pageIndex:0,pageSize:10})},e.setPageIndex=t=>{e.setPagination((r=>{let n=rP(t,r.pageIndex);const i="undefined"===typeof e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return n=Math.max(0,Math.min(n,i)),{...r,pageIndex:n}}))},e.resetPageIndex=t=>{var r,n;e.setPageIndex(t?0:null!=(r=null==(n=e.initialState)||null==(n=n.pagination)?void 0:n.pageIndex)?r:0)},e.resetPageSize=t=>{var r,n;e.setPageSize(t?10:null!=(r=null==(n=e.initialState)||null==(n=n.pagination)?void 0:n.pageSize)?r:10)},e.setPageSize=t=>{e.setPagination((e=>{const r=Math.max(1,rP(t,e.pageSize)),n=e.pageSize*e.pageIndex,i=Math.floor(n/r);return{...e,pageIndex:i,pageSize:r}}))},e.setPageCount=t=>e.setPagination((r=>{var n;let i=rP(t,null!=(n=e.options.pageCount)?n:-1);return"number"===typeof i&&(i=Math.max(-1,i)),{...r,pageCount:i}})),e.getPageOptions=sP((()=>[e.getPageCount()]),(e=>{let t=[];return e&&e>0&&(t=[...new Array(e)].fill(null).map(((e,t)=>t))),t}),oP(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:t}=e.getState().pagination,r=e.getPageCount();return-1===r||0!==r&&t<r-1},e.previousPage=()=>e.setPageIndex((e=>e-1)),e.nextPage=()=>e.setPageIndex((e=>e+1)),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},BP={getInitialState:e=>({rowPinning:{top:[],bottom:[]},...e}),getDefaultOptions:e=>({onRowPinningChange:nP("rowPinning",e)}),createRow:(e,t)=>{e.pin=(r,n,i)=>{const a=n?e.getLeafRows().map((e=>{let{id:t}=e;return t})):[],s=i?e.getParentRows().map((e=>{let{id:t}=e;return t})):[],o=new Set([...s,e.id,...a]);t.setRowPinning((e=>{var t,n,i,a,s,l;return"bottom"===r?{top:(null!=(i=null==e?void 0:e.top)?i:[]).filter((e=>!(null!=o&&o.has(e)))),bottom:[...(null!=(a=null==e?void 0:e.bottom)?a:[]).filter((e=>!(null!=o&&o.has(e)))),...Array.from(o)]}:"top"===r?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter((e=>!(null!=o&&o.has(e)))),...Array.from(o)],bottom:(null!=(l=null==e?void 0:e.bottom)?l:[]).filter((e=>!(null!=o&&o.has(e))))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter((e=>!(null!=o&&o.has(e)))),bottom:(null!=(n=null==e?void 0:e.bottom)?n:[]).filter((e=>!(null!=o&&o.has(e))))}}))},e.getCanPin=()=>{var r;const{enableRowPinning:n,enablePinning:i}=t.options;return"function"===typeof n?n(e):null==(r=null!=n?n:i)||r},e.getIsPinned=()=>{const r=[e.id],{top:n,bottom:i}=t.getState().rowPinning,a=r.some((e=>null==n?void 0:n.includes(e))),s=r.some((e=>null==i?void 0:i.includes(e)));return a?"top":!!s&&"bottom"},e.getPinnedIndex=()=>{var r,n;const i=e.getIsPinned();if(!i)return-1;const a=null==(r="top"===i?t.getTopRows():t.getBottomRows())?void 0:r.map((e=>{let{id:t}=e;return t}));return null!=(n=null==a?void 0:a.indexOf(e.id))?n:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var r,n;return e.setRowPinning(t?{top:[],bottom:[]}:null!=(r=null==(n=e.initialState)?void 0:n.rowPinning)?r:{top:[],bottom:[]})},e.getIsSomeRowsPinned=t=>{var r;const n=e.getState().rowPinning;var i,a;return t?Boolean(null==(r=n[t])?void 0:r.length):Boolean((null==(i=n.top)?void 0:i.length)||(null==(a=n.bottom)?void 0:a.length))},e._getPinnedRows=(t,r,n)=>{var i;return(null==(i=e.options.keepPinnedRows)||i?(null!=r?r:[]).map((t=>{const r=e.getRow(t,!0);return r.getIsAllParentsExpanded()?r:null})):(null!=r?r:[]).map((e=>t.find((t=>t.id===e))))).filter(Boolean).map((e=>({...e,position:n})))},e.getTopRows=sP((()=>[e.getRowModel().rows,e.getState().rowPinning.top]),((t,r)=>e._getPinnedRows(t,r,"top")),oP(e.options,"debugRows")),e.getBottomRows=sP((()=>[e.getRowModel().rows,e.getState().rowPinning.bottom]),((t,r)=>e._getPinnedRows(t,r,"bottom")),oP(e.options,"debugRows")),e.getCenterRows=sP((()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom]),((e,t,r)=>{const n=new Set([...null!=t?t:[],...null!=r?r:[]]);return e.filter((e=>!n.has(e.id)))}),oP(e.options,"debugRows"))}},zP={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:nP("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var r;return e.setRowSelection(t?{}:null!=(r=e.initialState.rowSelection)?r:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection((r=>{t="undefined"!==typeof t?t:!e.getIsAllRowsSelected();const n={...r},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach((e=>{e.getCanSelect()&&(n[e.id]=!0)})):i.forEach((e=>{delete n[e.id]})),n}))},e.toggleAllPageRowsSelected=t=>e.setRowSelection((r=>{const n="undefined"!==typeof t?t:!e.getIsAllPageRowsSelected(),i={...r};return e.getRowModel().rows.forEach((t=>{UP(i,t.id,n,!0,e)})),i})),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=sP((()=>[e.getState().rowSelection,e.getCoreRowModel()]),((t,r)=>Object.keys(t).length?VP(e,r):{rows:[],flatRows:[],rowsById:{}}),oP(e.options,"debugTable")),e.getFilteredSelectedRowModel=sP((()=>[e.getState().rowSelection,e.getFilteredRowModel()]),((t,r)=>Object.keys(t).length?VP(e,r):{rows:[],flatRows:[],rowsById:{}}),oP(e.options,"debugTable")),e.getGroupedSelectedRowModel=sP((()=>[e.getState().rowSelection,e.getSortedRowModel()]),((t,r)=>Object.keys(t).length?VP(e,r):{rows:[],flatRows:[],rowsById:{}}),oP(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:r}=e.getState();let n=Boolean(t.length&&Object.keys(r).length);return n&&t.some((e=>e.getCanSelect()&&!r[e.id]))&&(n=!1),n},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter((e=>e.getCanSelect())),{rowSelection:r}=e.getState();let n=!!t.length;return n&&t.some((e=>!r[e.id]))&&(n=!1),n},e.getIsSomeRowsSelected=()=>{var t;const r=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return r>0&&r<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter((e=>e.getCanSelect())).some((e=>e.getIsSelected()||e.getIsSomeSelected()))},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(r,n)=>{const i=e.getIsSelected();t.setRowSelection((a=>{var s;if(r="undefined"!==typeof r?r:!i,e.getCanSelect()&&i===r)return a;const o={...a};return UP(o,e.id,r,null==(s=null==n?void 0:n.selectChildren)||s,t),o}))},e.getIsSelected=()=>{const{rowSelection:r}=t.getState();return HP(e,r)},e.getIsSomeSelected=()=>{const{rowSelection:r}=t.getState();return"some"===GP(e,r)},e.getIsAllSubRowsSelected=()=>{const{rowSelection:r}=t.getState();return"all"===GP(e,r)},e.getCanSelect=()=>{var r;return"function"===typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(r=t.options.enableRowSelection)||r},e.getCanSelectSubRows=()=>{var r;return"function"===typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(r=t.options.enableSubRowSelection)||r},e.getCanMultiSelect=()=>{var r;return"function"===typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(r=t.options.enableMultiRowSelection)||r},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return r=>{var n;t&&e.toggleSelected(null==(n=r.target)?void 0:n.checked)}}}},UP=(e,t,r,n,i)=>{var a;const s=i.getRow(t,!0);r?(s.getCanMultiSelect()||Object.keys(e).forEach((t=>delete e[t])),s.getCanSelect()&&(e[t]=!0)):delete e[t],n&&null!=(a=s.subRows)&&a.length&&s.getCanSelectSubRows()&&s.subRows.forEach((t=>UP(e,t.id,r,n,i)))};function VP(e,t){const r=e.getState().rowSelection,n=[],i={},a=function(e,t){return e.map((e=>{var t;const s=HP(e,r);if(s&&(n.push(e),i[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:a(e.subRows)}),s)return e})).filter(Boolean)};return{rows:a(t.rows),flatRows:n,rowsById:i}}function HP(e,t){var r;return null!=(r=t[e.id])&&r}function GP(e,t,r){var n;if(null==(n=e.subRows)||!n.length)return!1;let i=!0,a=!1;return e.subRows.forEach((e=>{if((!a||i)&&(e.getCanSelect()&&(HP(e,t)?a=!0:i=!1),e.subRows&&e.subRows.length)){const r=GP(e,t);"all"===r?a=!0:"some"===r?(a=!0,i=!1):i=!1}})),i?"all":!!a&&"some"}const WP=/([0-9]+)/gm;function qP(e,t){return e===t?0:e>t?1:-1}function KP(e){return"number"===typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"===typeof e?e:""}function ZP(e,t){const r=e.split(WP).filter(Boolean),n=t.split(WP).filter(Boolean);for(;r.length&&n.length;){const e=r.shift(),t=n.shift(),i=parseInt(e,10),a=parseInt(t,10),s=[i,a].sort();if(isNaN(s[0])){if(e>t)return 1;if(t>e)return-1}else{if(isNaN(s[1]))return isNaN(i)?-1:1;if(i>a)return 1;if(a>i)return-1}}return r.length-n.length}const YP={alphanumeric:(e,t,r)=>ZP(KP(e.getValue(r)).toLowerCase(),KP(t.getValue(r)).toLowerCase()),alphanumericCaseSensitive:(e,t,r)=>ZP(KP(e.getValue(r)),KP(t.getValue(r))),text:(e,t,r)=>qP(KP(e.getValue(r)).toLowerCase(),KP(t.getValue(r)).toLowerCase()),textCaseSensitive:(e,t,r)=>qP(KP(e.getValue(r)),KP(t.getValue(r))),datetime:(e,t,r)=>{const n=e.getValue(r),i=t.getValue(r);return n>i?1:n<i?-1:0},basic:(e,t,r)=>qP(e.getValue(r),t.getValue(r))},XP={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:nP("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const r=t.getFilteredRowModel().flatRows.slice(10);let n=!1;for(const t of r){const r=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(r))return YP.datetime;if("string"===typeof r&&(n=!0,r.split(WP).length>1))return YP.alphanumeric}return n?YP.text:YP.basic},e.getAutoSortDir=()=>{const r=t.getFilteredRowModel().flatRows[0];return"string"===typeof(null==r?void 0:r.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var r,n;if(!e)throw new Error;return iP(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(r=null==(n=t.options.sortingFns)?void 0:n[e.columnDef.sortingFn])?r:YP[e.columnDef.sortingFn]},e.toggleSorting=(r,n)=>{const i=e.getNextSortingOrder(),a="undefined"!==typeof r&&null!==r;t.setSorting((s=>{const o=null==s?void 0:s.find((t=>t.id===e.id)),l=null==s?void 0:s.findIndex((t=>t.id===e.id));let c,u=[],d=a?r:"desc"===i;var h;(c=null!=s&&s.length&&e.getCanMultiSort()&&n?o?"toggle":"add":null!=s&&s.length&&l!==s.length-1?"replace":o?"toggle":"replace","toggle"===c&&(a||i||(c="remove")),"add"===c)?(u=[...s,{id:e.id,desc:d}],u.splice(0,u.length-(null!=(h=t.options.maxMultiSortColCount)?h:Number.MAX_SAFE_INTEGER))):u="toggle"===c?s.map((t=>t.id===e.id?{...t,desc:d}:t)):"remove"===c?s.filter((t=>t.id!==e.id)):[{id:e.id,desc:d}];return u}))},e.getFirstSortDir=()=>{var r,n;return(null!=(r=null!=(n=e.columnDef.sortDescFirst)?n:t.options.sortDescFirst)?r:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=r=>{var n,i;const a=e.getFirstSortDir(),s=e.getIsSorted();return s?!!(s===a||null!=(n=t.options.enableSortingRemoval)&&!n||r&&null!=(i=t.options.enableMultiRemove)&&!i)&&("desc"===s?"asc":"desc"):a},e.getCanSort=()=>{var r,n;return(null==(r=e.columnDef.enableSorting)||r)&&(null==(n=t.options.enableSorting)||n)&&!!e.accessorFn},e.getCanMultiSort=()=>{var r,n;return null!=(r=null!=(n=e.columnDef.enableMultiSort)?n:t.options.enableMultiSort)?r:!!e.accessorFn},e.getIsSorted=()=>{var r;const n=null==(r=t.getState().sorting)?void 0:r.find((t=>t.id===e.id));return!!n&&(n.desc?"desc":"asc")},e.getSortIndex=()=>{var r,n;return null!=(r=null==(n=t.getState().sorting)?void 0:n.findIndex((t=>t.id===e.id)))?r:-1},e.clearSorting=()=>{t.setSorting((t=>null!=t&&t.length?t.filter((t=>t.id!==e.id)):[]))},e.getToggleSortingHandler=()=>{const r=e.getCanSort();return n=>{r&&(null==n.persist||n.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(n))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var r,n;e.setSorting(t?[]:null!=(r=null==(n=e.initialState)?void 0:n.sorting)?r:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},QP=[uP,DP,TP,PP,pP,jP,{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},LP,XP,NP,FP,$P,BP,zP,MP];function JP(e){var t,r;const n=[...QP,...null!=(t=e._features)?t:[]];let i={_features:n};const a=i._features.reduce(((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(i))),{});let s={...null!=(r=e.initialState)?r:{}};i._features.forEach((e=>{var t;s=null!=(t=null==e.getInitialState?void 0:e.getInitialState(s))?t:s}));const o=[];let l=!1;const c={_features:n,options:{...a,...e},initialState:s,_queue:e=>{o.push(e),l||(l=!0,Promise.resolve().then((()=>{for(;o.length;)o.shift()();l=!1})).catch((e=>setTimeout((()=>{throw e})))))},reset:()=>{i.setState(i.initialState)},setOptions:e=>{const t=rP(e,i.options);i.options=(e=>i.options.mergeOptions?i.options.mergeOptions(a,e):{...a,...e})(t)},getState:()=>i.options.state,setState:e=>{null==i.options.onStateChange||i.options.onStateChange(e)},_getRowId:(e,t,r)=>{var n;return null!=(n=null==i.options.getRowId?void 0:i.options.getRowId(e,t,r))?n:`${r?[r.id,t].join("."):t}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(e,t)=>{let r=(t?i.getPrePaginationRowModel():i.getRowModel()).rowsById[e];if(!r&&(r=i.getCoreRowModel().rowsById[e],!r))throw new Error;return r},_getDefaultColumnDef:sP((()=>[i.options.defaultColumn]),(e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{const t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,r;return null!=(t=null==(r=e.renderValue())||null==r.toString?void 0:r.toString())?t:null},...i._features.reduce(((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef())),{}),...e}}),oP(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:sP((()=>[i._getColumnDefs()]),(e=>{const t=function(e,r,n){return void 0===n&&(n=0),e.map((e=>{const a=function(e,t,r,n){var i,a;const s={...e._getDefaultColumnDef(),...t},o=s.accessorKey;let l,c=null!=(i=null!=(a=s.id)?a:o?"function"===typeof String.prototype.replaceAll?o.replaceAll(".","_"):o.replace(/\./g,"_"):void 0)?i:"string"===typeof s.header?s.header:void 0;if(s.accessorFn?l=s.accessorFn:o&&(l=o.includes(".")?e=>{let t=e;for(const n of o.split(".")){var r;t=null==(r=t)?void 0:r[n]}return t}:e=>e[s.accessorKey]),!c)throw new Error;let u={id:`${String(c)}`,accessorFn:l,parent:n,depth:r,columnDef:s,columns:[],getFlatColumns:sP((()=>[!0]),(()=>{var e;return[u,...null==(e=u.columns)?void 0:e.flatMap((e=>e.getFlatColumns()))]}),oP(e.options,"debugColumns")),getLeafColumns:sP((()=>[e._getOrderColumnsFn()]),(e=>{var t;if(null!=(t=u.columns)&&t.length){let t=u.columns.flatMap((e=>e.getLeafColumns()));return e(t)}return[u]}),oP(e.options,"debugColumns"))};for(const d of e._features)null==d.createColumn||d.createColumn(u,e);return u}(i,e,n,r),s=e;return a.columns=s.columns?t(s.columns,a,n+1):[],a}))};return t(e)}),oP(e,"debugColumns")),getAllFlatColumns:sP((()=>[i.getAllColumns()]),(e=>e.flatMap((e=>e.getFlatColumns()))),oP(e,"debugColumns")),_getAllFlatColumnsById:sP((()=>[i.getAllFlatColumns()]),(e=>e.reduce(((e,t)=>(e[t.id]=t,e)),{})),oP(e,"debugColumns")),getAllLeafColumns:sP((()=>[i.getAllColumns(),i._getOrderColumnsFn()]),((e,t)=>t(e.flatMap((e=>e.getLeafColumns())))),oP(e,"debugColumns")),getColumn:e=>i._getAllFlatColumnsById()[e]};Object.assign(i,c);for(let u=0;u<i._features.length;u++){const e=i._features[u];null==e||null==e.createTable||e.createTable(i)}return i}function eA(){return e=>sP((()=>[e.options.data]),(t=>{const r={rows:[],flatRows:[],rowsById:{}},n=function(t,i,a){void 0===i&&(i=0);const s=[];for(let l=0;l<t.length;l++){const c=hP(e,e._getRowId(t[l],l,a),t[l],l,i,void 0,null==a?void 0:a.id);var o;if(r.flatRows.push(c),r.rowsById[c.id]=c,s.push(c),e.options.getSubRows)c.originalSubRows=e.options.getSubRows(t[l],l),null!=(o=c.originalSubRows)&&o.length&&(c.subRows=n(c.originalSubRows,i+1,c))}return s};return r.rows=n(t),r}),oP(e.options,"debugTable",0,(()=>e._autoResetPageIndex())))}function tA(e){const t=[],r=e=>{var n;t.push(e),null!=(n=e.subRows)&&n.length&&e.getIsExpanded()&&e.subRows.forEach(r)};return e.rows.forEach(r),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function rA(e){return e=>sP((()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded]),((t,r)=>{if(!r.rows.length)return r;const{pageSize:n,pageIndex:i}=t;let{rows:a,flatRows:s,rowsById:o}=r;const l=n*i,c=l+n;let u;a=a.slice(l,c),u=e.options.paginateExpandedRows?{rows:a,flatRows:s,rowsById:o}:tA({rows:a,flatRows:s,rowsById:o}),u.flatRows=[];const d=e=>{u.flatRows.push(e),e.subRows.length&&e.subRows.forEach(d)};return u.rows.forEach(d),u}),oP(e.options,"debugTable"))}function nA(){return e=>sP((()=>[e.getState().sorting,e.getPreSortedRowModel()]),((t,r)=>{if(!r.rows.length||null==t||!t.length)return r;const n=e.getState().sorting,i=[],a=n.filter((t=>{var r;return null==(r=e.getColumn(t.id))?void 0:r.getCanSort()})),s={};a.forEach((t=>{const r=e.getColumn(t.id);r&&(s[t.id]={sortUndefined:r.columnDef.sortUndefined,invertSorting:r.columnDef.invertSorting,sortingFn:r.getSortingFn()})}));const o=e=>{const t=e.map((e=>({...e})));return t.sort(((e,t)=>{for(let n=0;n<a.length;n+=1){var r;const i=a[n],o=s[i.id],l=o.sortUndefined,c=null!=(r=null==i?void 0:i.desc)&&r;let u=0;if(l){const r=void 0===e.getValue(i.id),n=void 0===t.getValue(i.id);if(r||n){if("first"===l)return r?-1:1;if("last"===l)return r?1:-1;u=r&&n?0:r?l:-l}}if(0===u&&(u=o.sortingFn(e,t,i.id)),0!==u)return c&&(u*=-1),o.invertSorting&&(u*=-1),u}return e.index-t.index})),t.forEach((e=>{var t;i.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=o(e.subRows))})),t};return{rows:o(r.rows),flatRows:i,rowsById:r.rowsById}}),oP(e.options,"debugTable",0,(()=>e._autoResetPageIndex())))}function iA(e,r){return e?function(e){return"function"===typeof e&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}(n=e)||"function"===typeof n||function(e){return"object"===typeof e&&"symbol"===typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(n)?t.createElement(e,r):e:null;var n}function aA(e){const r={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=t.useState((()=>({current:JP(r)}))),[i,a]=t.useState((()=>n.current.initialState));return n.current.setOptions((t=>({...t,...e,state:{...i,...e.state},onStateChange:t=>{a(t),null==e.onStateChange||e.onStateChange(t)}}))),n.current}const sA=e=>{let{onClose:r,children:n,isOpen:i}=e;const a=(0,t.useRef)(null);return(0,t.useEffect)((()=>{var e,t;i?(null===(e=document.body)||void 0===e||e.classList.add("h-screen"),document.body.style.overflow="hidden"):(null===(t=document.body)||void 0===t||t.classList.remove("h-screen"),document.body.style.overflow="");return()=>{var e;null===(e=document.body)||void 0===e||e.classList.remove("h-screen"),document.body.style.overflow=""}}),[i]),(0,t.useEffect)((()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&r()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[r]),(0,V.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:99999},children:(0,V.jsx)("div",{className:"bg-white rounded-[12px] relative mx-[16px]",ref:a,children:(0,V.jsx)("div",{children:n})})})},oA=()=>{var e;const[r,n]=(0,t.useState)(1),[i,a]=(0,t.useState)([]),[s,o]=(0,t.useState)(""),l=Kr(),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,x]=(0,t.useState)(!0),[y,b]=(0,t.useState)(null),[w,_]=(0,t.useState)(null),[k,S]=(0,t.useState)(null),j=localStorage.getItem("Iplot_admin");(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){var t;null!==e&&void 0!==e&&e.role&&S(null===e||void 0===e?void 0:e.role),null!==e&&void 0!==e&&e.supplier&&_(null===e||void 0===e?void 0:e.supplier);const r=null===e||void 0===e||null===(t=e.modulePermissions)||void 0===t?void 0:t.find((e=>"Husmodell"===e.name));b(null===r||void 0===r?void 0:r.permissions)}})()}),[]);const E=async()=>{x(!0);try{let e;e="Agent"===k?Zm(lm(g_,"house_model"),Xm("Husdetaljer.Leverand\xf8rer","==",w)):Zm(lm(g_,"house_model"));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))).sort(((e,t)=>{var r,n;const i=null!==(r=e.updatedAt)&&void 0!==r&&r.toDate?e.updatedAt.toDate():new Date(e.updatedAt);return(null!==(n=t.updatedAt)&&void 0!==n&&n.toDate?t.updatedAt.toDate():new Date(t.updatedAt))-i}));a(t)}catch(e){console.error("Error fetching husmodell data:",e)}finally{x(!1)}};(0,t.useEffect)((()=>{E()}),[k,w]);const C=(0,t.useMemo)((()=>i.filter((e=>{var t,r;return null===(t=e.Husdetaljer)||void 0===t||null===(r=t.husmodell_name)||void 0===r?void 0:r.toLowerCase().includes(s.toLowerCase())}))),[i,s]),N=(0,t.useMemo)((()=>[{accessorKey:"husmodell",header:"Husmodell",cell:e=>{let{row:t}=e;return(0,V.jsxs)("div",{className:"flex items-center gap-3 w-max",children:[(0,V.jsx)("img",{src:t.original.Husdetaljer.photo,alt:"Husmodell",className:"w-8 h-8 rounded-full"}),(0,V.jsx)("p",{className:"font-medium text-sm text-purple",children:t.original.Husdetaljer.husmodell_name})]})}},{accessorKey:"leverandor",header:"Leverand\xf8r",cell:e=>{let{row:r}=e;const[n,i]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{const e=await(async e=>{const t=await w_(e);if(t)return t})(r.original.Husdetaljer.Leverand\u00f8rer);i(e)})()}),[r.original.Husdetaljer.Leverand\u00f8rer]),(0,V.jsx)("div",{className:"w-[140px]",children:(0,V.jsx)("img",{src:null===n||void 0===n?void 0:n.photo,alt:"leverandor",className:"w-full"})})}},{accessorKey:"kategori",header:"Kategori",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-sm text-gray w-max",children:"Herskapelig"})}},{accessorKey:"husdetaljer",header:"Husdetaljer",cell:e=>{let{row:t}=e;return(0,V.jsxs)("p",{className:"text-sm text-gray w-max",children:[(0,V.jsx)("span",{className:"font-bold",children:t.original.Husdetaljer.BRATotal})," ","m",(0,V.jsx)("sup",{children:"2"}),"."," ",(0,V.jsx)("span",{className:"font-bold",children:t.original.Husdetaljer.Soverom})," ","soverom,"," ",(0,V.jsx)("span",{className:"font-bold",children:t.original.Husdetaljer.Bad})," ","bad"]})}},{accessorKey:"sisteoppdatertav",header:"Siste oppdatert av",cell:e=>{var t,r,n,i;let{row:a}=e;return(0,V.jsxs)("div",{className:"flex items-start gap-3 w-max",children:[(0,V.jsx)("img",{src:null===(t=a.original)||void 0===t||null===(r=t.updateDataBy)||void 0===r?void 0:r.photo,alt:"avatar",className:"w-8 h-8 rounded-full"}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"font-medium text-black text-sm mb-[2px]",children:null===(n=a.original)||void 0===n||null===(i=n.updateDataBy)||void 0===i?void 0:i.name}),(0,V.jsx)("p",{className:"text-xs text-gray",children:k_(a.original.updatedAt)})]})]})}},{id:"action",header:"Action",cell:e=>{let{row:t}=e;return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(y&&(null===y||void 0===y?void 0:y.edit)||"andre.finger@gmail.com"===j)&&(0,V.jsx)(GT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>l(`/edit-husmodell/${t.original.id}`)}),(y&&(null===y||void 0===y?void 0:y.delete)||"andre.finger@gmail.com"===j)&&(0,V.jsx)(WT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>{return e=t.original.id,r=t.original.Husdetaljer.Leverand\u00f8rer,f(e),g(r),void u(!0);var e,r}}),(0,V.jsx)(qT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>l(`/se-husmodell/${t.original.id}`)}),(y&&(null===y||void 0===y?void 0:y.duplicate)||"andre.finger@gmail.com"===j)&&(0,V.jsx)(KT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>{return e=t.original.id,r=t.original.Husdetaljer.Leverand\u00f8rer,f(e),g(r),void h(!0);var e,r}})]})})}}]),[j,l,y]),T=(0,t.useMemo)((()=>{const e=10*(r-1);return C.slice(e,e+10)}),[C,r]),P=aA({data:T,columns:N,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:r-1,pageSize:10}},pageCount:Math.ceil(C.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:r-1,pageSize:10});n(t.pageIndex+1)}}});return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"flex sm:items-center justify-between bg-lightPurple rounded-[12px] py-3 px-3 md:px-4 flex-col sm:flex-row gap-2",children:(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px]",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k etter lead",className:"focus-within:outline-none",value:s,onChange:e=>o(e.target.value)})]})}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:P.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:v?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:N.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===C.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:N.length,className:"h-24 text-center",children:"No results."})}):(null===(e=P.getRowModel().rows)||void 0===e?void 0:e.length)&&P.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>P.previousPage(),disabled:!P.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:r})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:P.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>P.nextPage(),disabled:!P.getCanNextPage(),children:"Neste"})]})]}),c&&(0,V.jsx)(sA,{onClose:()=>{u(!c)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>u(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:()=>(async e=>{try{const t=cm(g_,"suppliers",m),r=await w_(m),n=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"});await mg(t,{...r,id:m,updatedAt:n.format(new Date),Produkter:Math.max(0===(null===r||void 0===r?void 0:r.Produkter)?0:(null===r||void 0===r?void 0:r.Produkter)-1)}),await gg(cm(g_,"house_model",e)),He.success("Slettet",{position:"top-right"}),E(),u(!1)}catch(t){console.error("Error deleting document:",t)}})(p),children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})}),d&&(0,V.jsx)(sA,{onClose:()=>{h(!d)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"Er du sikker p\xe5 at du vil kopiere?"}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>h(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:()=>(async e=>{try{const t=cm(g_,"suppliers",m),r=await w_(m),n=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"});await mg(t,{...r,id:m,updatedAt:n.format(new Date),Produkter:Math.max((null===r||void 0===r?void 0:r.Produkter)+1)});const i=cm(g_,"house_model",e),a=await dg(i);if(!a.exists())throw new Error("Document does not exist.");const s=a.data(),o=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",",""),l=lm(g_,"house_model");await vg(l,{...s,createdAt:o(new Date)}),He.success("Copied successfully",{position:"top-right"}),E(),h(!1)}catch(t){console.error("Error deleting document:",t)}})(p),children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})})]})},lA=()=>{const[e,r]=(0,t.useState)(!1),n=localStorage.getItem("Iplot_admin");return(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){var t,n;const i=null===e||void 0===e||null===(t=e.modulePermissions)||void 0===t?void 0:t.find((e=>"Husmodell"===e.name));r(null===i||void 0===i||null===(n=i.permissions)||void 0===n?void 0:n.add)}})()}),[]),(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Alle hus- og hyttemodeller"}),(e||"andre.finger@gmail.com"===n)&&(0,V.jsx)(HT,{text:"Legg til ny modell",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",path:"/add-husmodell"})]}),(0,V.jsx)(oA,{})]})})},cA=F_("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),uA=e=>{let{startDate:r,endDate:n,onDateChange:i,dateFormat:a="yyyy/MM/dd",className:s}=e;const[o,l]=(0,t.useState)(!1);return(0,V.jsxs)("div",{className:"relative",children:[(0,V.jsxs)("div",{onClick:()=>l(!o),className:`flex items-center gap-2 px-4 py-[9px] border border-gray1 bg-white rounded-md cursor-pointer ${s}`,children:[(0,V.jsx)("img",{src:zT,alt:"Calendar icon"}),(0,V.jsx)("input",{type:"text",value:r&&n?`${r.toLocaleDateString()} - ${n.toLocaleDateString()}`:"Velg periode",readOnly:!0,className:"text-sm font-medium w-[200px] focus:outline-none"})]}),o&&(0,V.jsx)("div",{className:"absolute top-auto",style:{zIndex:99999},children:(0,V.jsx)(FT,{selected:r,onChange:e=>{const[t,r]=e;i(t,r),t&&r&&l(!1)},startDate:r,endDate:n,selectsRange:!0,inline:!0,dateFormat:a,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select"})})]})},dA=()=>{var e;const[r,n]=(0,t.useState)(1),[i,a]=(0,t.useState)([]),[s,o]=(0,t.useState)(""),l=Kr(),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,x]=(0,t.useState)(!0),[y,b]=(0,t.useState)(null),w=localStorage.getItem("Iplot_admin");(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){const t=null===e||void 0===e?void 0:e.supplier;b(t)}})()}),[]);const _=async()=>{x(!0);try{let e=Zm(lm(g_,"suppliers"),eg("updatedAt","desc"));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=[],n=await w_(y);n&&r.push(n);const i={januar:"January",februar:"February",mars:"March",april:"April",mai:"May",juni:"June",juli:"July",august:"August",september:"September",oktober:"October",november:"November",desember:"December"},s=e=>{const t=e.toLowerCase().split(" ");if(3!==t.length)return new Date(e);const[r,n,a]=t,s=i[n]||n;return new Date(`${r} ${s} ${a}`)},o=t.sort(((e,t)=>{const r=s(e.updatedAt);return s(t.updatedAt).getTime()-r.getTime()})),l=r.sort(((e,t)=>{const r=s(e.updatedAt);return s(t.updatedAt).getTime()-r.getTime()}));a("andre.finger@gmail.com"===w?o:l)}catch(e){console.error("Error fetching husmodell data:",e)}finally{x(!1)}},k=(0,t.useMemo)((()=>i.filter((e=>{var t;let r=null===e||void 0===e||null===(t=e.company_name)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase());if(!r)return!1;const n=new Date(e.updatedAt);if(null!==p&&null!==m){r=r&&(n>=p&&n<=m)}return r}))),[i,s,p,m]);(0,t.useEffect)((()=>{_()}),[y]);const S=(0,t.useMemo)((()=>[{accessorKey:"logo",header:"Logo",cell:e=>{let{row:t}=e;return(0,V.jsx)("div",{className:"w-[140px]",children:(0,V.jsx)("img",{src:t.original.photo,alt:"logo",className:"w-full"})})}},{accessorKey:"selskapsnavn",header:"Selskapsnavn",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"font-semibold text-sm text-darkBlack w-max",children:t.original.company_name})}},{accessorKey:"type",header:"Type",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack w-max",children:t.original.type_partner})}},{accessorKey:"Produkter",header:"Produkter",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack w-max",children:t.original.Produkter})}},{accessorKey:"Sistendret",header:"Sist endret",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black w-max",children:t.original.updatedAt})}},{accessorKey:"adresse",header:"Adresse",cell:e=>{let{row:t}=e;return(0,V.jsx)("div",{children:(0,V.jsx)("p",{className:"text-black text-sm mb-[2px] w-max",children:t.original.Adresse})})}},"andre.finger@gmail.com"===w?{id:"action",header:"Action",cell:e=>{let{row:t}=e;return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,V.jsx)(GT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>l(`/edit-til-leverandor/${t.original.id}`)}),(0,V.jsx)(WT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>{return e=t.original.id,h(e),void u(!0);var e}})]})})}}:null].filter(Boolean)),[w,l,y]),j=(0,t.useMemo)((()=>{const e=10*(r-1);return k.slice(e,e+10)}),[k,r]),E=aA({data:j,columns:S,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:r-1,pageSize:10}},pageCount:Math.ceil(k.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:r-1,pageSize:10});n(t.pageIndex+1)}}});return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"flex md:items-center justify-between bg-lightPurple rounded-[12px] py-3 px-3 md:px-4 flex-col md:flex-row gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px]",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k",className:"focus-within:outline-none w-full",value:s,onChange:e=>o(e.target.value)})]}),(0,V.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 sm:items-center",children:(0,V.jsx)(uA,{startDate:p,endDate:m,onDateChange:(e,t)=>{f(e),g(t)}})})]}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:E.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:v?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:S.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===k.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:S.length,className:"h-24 text-center",children:"No results."})}):(null===(e=E.getRowModel().rows)||void 0===e?void 0:e.length)&&E.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>E.previousPage(),disabled:!E.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:r})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:E.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>E.nextPage(),disabled:!E.getCanNextPage(),children:"Neste"})]})]}),c&&(0,V.jsx)(sA,{onClose:()=>{u(!c)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>u(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:()=>(async e=>{try{await gg(cm(g_,"suppliers",e)),_(),u(!1),He.success("Slettet",{position:"top-right"})}catch(t){console.error("Error deleting document:",t)}})(d),children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})})]})};var hA={version:"0.18.5"},pA=1200,fA=1252,mA=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],gA={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},vA=function(e){-1!=mA.indexOf(e)&&(fA=gA[0]=e)};var xA=function(e){pA=e,vA(e)};function yA(){xA(1200),vA(1252)}function bA(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function wA(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var _A,kA=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return 255==t&&254==r?function(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}(e.slice(2)):254==t&&255==r?wA(e.slice(2)):65279==t?e.slice(1):e},SA=function(e){return String.fromCharCode(e)},jA=function(e){return String.fromCharCode(e)};var EA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function CA(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0,l=0,c=0;c<e.length;)a=(r=e.charCodeAt(c++))>>2,s=(3&r)<<4|(n=e.charCodeAt(c++))>>4,o=(15&n)<<2|(i=e.charCodeAt(c++))>>6,l=63&i,isNaN(n)?o=l=64:isNaN(i)&&(l=64),t+=EA.charAt(a)+EA.charAt(s)+EA.charAt(o)+EA.charAt(l);return t}function NA(e){var t="",r=0,n=0,i=0,a=0,s=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)r=EA.indexOf(e.charAt(l++))<<2|(a=EA.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(r),n=(15&a)<<4|(s=EA.indexOf(e.charAt(l++)))>>2,64!==s&&(t+=String.fromCharCode(n)),i=(3&s)<<6|(o=EA.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(i));return t}var TA=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),PA=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(W){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function AA(e){return TA?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function MA(e){return TA?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var IA=function(e){return TA?PA(e,"binary"):e.split("").map((function(e){return 255&e.charCodeAt(0)}))};function OA(e){if("undefined"===typeof ArrayBuffer)return IA(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}function DA(e){if(Array.isArray(e))return e.map((function(e){return String.fromCharCode(e)})).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function RA(e){if("undefined"==typeof ArrayBuffer)throw new Error("Unsupported");if(e instanceof ArrayBuffer)return RA(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var LA=TA?function(e){return Buffer.concat(e.map((function(e){return Buffer.isBuffer(e)?e:PA(e)})))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),i=0;for(t=0,r=0;t<e.length;r+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if("string"==typeof e[t])throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map((function(e){return Array.isArray(e)?e:[].slice.call(e)})))};var FA=/\u0000/g,$A=/[\u0001-\u0006]/g;function BA(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function zA(e,t){var r=""+e;return r.length>=t?r:tI("0",t-r.length)+r}function UA(e,t){var r=""+e;return r.length>=t?r:tI(" ",t-r.length)+r}function VA(e,t){var r=""+e;return r.length>=t?r:r+tI(" ",t-r.length)}var HA=Math.pow(2,32);function GA(e,t){return e>HA||e<-HA?function(e,t){var r=""+Math.round(e);return r.length>=t?r:tI("0",t-r.length)+r}(e,t):function(e,t){var r=""+e;return r.length>=t?r:tI("0",t-r.length)+r}(Math.round(e),t)}function WA(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var qA=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],KA=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var ZA={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},YA={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},XA={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function QA(e,t,r){for(var n=e<0?-1:1,i=e*n,a=0,s=1,o=0,l=1,c=0,u=0,d=Math.floor(i);c<t&&(o=(d=Math.floor(i))*s+a,u=d*c+l,!(i-d<5e-8));)i=1/(i-d),a=s,s=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=a):(u=c,o=s)),!r)return[0,n*o,u];var h=Math.floor(n*o/u);return[h,n*o-h*u,u]}function JA(e,t,r){if(e>2958465||e<0)return null;var n=0|e,i=Math.floor(86400*(e-n)),a=0,s=[],o={D:n,T:i,u:86400*(e-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,86400==++i&&(o.T=i=0,++n,++o.D)),60===n)s=r?[1317,10,29]:[1900,2,29],a=3;else if(0===n)s=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=function(e,t){t[0]-=581;var r=e.getDay();e<60&&(r=(r+6)%7);return r}(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=a,o}var eM=new Date(1899,11,31,0,0,0),tM=eM.getTime(),rM=new Date(1900,2,1,0,0,0);function nM(e,t){var r=e.getTime();return t?r-=1262304e5:e>=rM&&(r+=864e5),(r-(tM+6e4*(e.getTimezoneOffset()-eM.getTimezoneOffset())))/864e5}function iM(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function aM(e){var t,r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=r>=-4&&r<=-1?e.toPrecision(10+r):Math.abs(r)<=9?function(e){var t=e<0?12:11,r=iM(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10)).length<=t?r:e.toExponential(5)}(e):10===r?e.toFixed(10).substr(0,12):function(e){var t=iM(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),iM(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function sM(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):aM(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return CM(14,nM(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function oM(e,t,r,n){var i,a="",s=0,o=0,l=r.y,c=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:i=l%100,c=2;break;default:i=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:i=r.m,c=t.length;break;case 3:return KA[r.m-1][1];case 5:return KA[r.m-1][0];default:return KA[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=r.d,c=t.length;break;case 3:return qA[r.q][0];default:return qA[r.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==r.u||"s"!=t&&"ss"!=t?(o=n>=2?3===n?1e3:100:1===n?10:1,(s=Math.round(o*(r.S+r.u)))>=60*o&&(s=0),"s"===t?0===s?"0":""+s/o:(a=zA(s,2+n),"ss"===t?a.substr(0,2):"."+a.substr(2,t.length-1))):zA(r.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*r.D+r.H;break;case"[m]":case"[mm]":i=60*(24*r.D+r.H)+r.M;break;case"[s]":case"[ss]":i=60*(60*(24*r.D+r.H)+r.M)+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:i=l,c=1}return c>0?zA(i,c):""}function lM(e){if(e.length<=3)return e;for(var t=e.length%3,r=e.substr(0,t);t!=e.length;t+=3)r+=(r.length>0?",":"")+e.substr(t,3);return r}var cM=/%/g;function uM(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+uM(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),-1===(r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i)).indexOf("e")){var s=Math.floor(Math.log(t)*Math.LOG10E);for(-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a);"0."===r.substr(0,2);)r=(r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,r,n){return t+r+n.substr(0,(i+a)%i)+"."+n.substr(a)+"E"}))}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var dM=/# (\?+)( ?)\/( ?)(\d+)/;var hM=/^#*0*\.([0#]+)/,pM=/\).*[0#]/,fM=/\(###\) ###\\?-####/;function mM(e){for(var t,r="",n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}return r}function gM(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function vM(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function xM(e,t,r){if(40===e.charCodeAt(0)&&!t.match(pM)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?xM("n",n,r):"("+xM("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return wM(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(cM,""),i=t.length-n.length;return wM(e,n,r*Math.pow(10,2*i))+tI("%",i)}(e,t,r);if(-1!==t.indexOf("E"))return uM(t,r);if(36===t.charCodeAt(0))return"$"+xM(e,t.substr(" "==t.charAt(1)?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+GA(l,t.length);if(t.match(/^[#?]+$/))return"0"===(i=GA(r,0))&&(i=""),i.length>t.length?i:mM(t.substr(0,t.length-i.length))+i;if(a=t.match(dM))return function(e,t,r){var n=parseInt(e[4],10),i=Math.round(t*n),a=Math.floor(i/n),s=i-a*n,o=n;return r+(0===a?"":""+a)+" "+(0===s?tI(" ",e[1].length+1+e[4].length):UA(s,e[1].length)+e[2]+"/"+e[3]+zA(o,e[4].length))}(a,l,c);if(t.match(/^#+0+$/))return c+GA(l,t.length-t.indexOf("0"));if(a=t.match(hM))return i=gM(r,a[1].length).replace(/^([^\.]+)$/,"$1."+mM(a[1])).replace(/\.$/,"."+mM(a[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+tI("0",mM(a[1]).length-t.length)})),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+gM(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+lM(GA(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+xM(e,t,-r):lM(""+(Math.floor(r)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(r,a[1].length)))+"."+zA(vM(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return xM(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=BA(xM(e,t.replace(/[\\-]/g,""),r)),s=0,BA(BA(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return s<i.length?i.charAt(s++):"0"===e?"0":""})));if(t.match(fM))return"("+(i=xM(e,"##########",r)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=QA(l,Math.pow(10,s)-1,!1),i=""+c," "==(u=wM("n",a[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+a[2]+"/"+a[3],(u=VA(o[2],s)).length<a[4].length&&(u=mM(a[4].substr(a[4].length-u.length))+u),i+=u;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),c+((o=QA(l,Math.pow(10,s)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?UA(o[1],s)+a[2]+"/"+a[3]+VA(o[2],s):tI(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=GA(r,0),t.length<=i.length?i:mM(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var d=t.indexOf(".")-s,h=t.length-i.length-d;return mM(t.substr(0,d)+i+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return s=vM(r,a[1].length),r<0?"-"+xM(e,t,-r):lM(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?zA(0,3-e.length):"")+e}))+"."+zA(s,a[1].length);switch(t){case"###,##0.00":return xM(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=lM(GA(l,0));return"0"!==p?c+p:"";case"###,###.00":return xM(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return xM(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function yM(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+yM(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),!(r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i)).match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,r,n){return t+r+n.substr(0,(i+a)%i)+"."+n.substr(a)+"E"}))}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function bM(e,t,r){if(40===e.charCodeAt(0)&&!t.match(pM)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?bM("n",n,r):"("+bM("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return wM(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(cM,""),i=t.length-n.length;return wM(e,n,r*Math.pow(10,2*i))+tI("%",i)}(e,t,r);if(-1!==t.indexOf("E"))return yM(t,r);if(36===t.charCodeAt(0))return"$"+bM(e,t.substr(" "==t.charAt(1)?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+zA(l,t.length);if(t.match(/^[#?]+$/))return i=""+r,0===r&&(i=""),i.length>t.length?i:mM(t.substr(0,t.length-i.length))+i;if(a=t.match(dM))return function(e,t,r){return r+(0===t?"":""+t)+tI(" ",e[1].length+2+e[4].length)}(a,l,c);if(t.match(/^#+0+$/))return c+zA(l,t.length-t.indexOf("0"));if(a=t.match(hM))return i=(i=(""+r).replace(/^([^\.]+)$/,"$1."+mM(a[1])).replace(/\.$/,"."+mM(a[1]))).replace(/\.(\d*)$/,(function(e,t){return"."+t+tI("0",mM(a[1]).length-t.length)})),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+lM(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+bM(e,t,-r):lM(""+r)+"."+tI("0",a[1].length);if(a=t.match(/^#,#*,#0/))return bM(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=BA(bM(e,t.replace(/[\\-]/g,""),r)),s=0,BA(BA(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return s<i.length?i.charAt(s++):"0"===e?"0":""})));if(t.match(fM))return"("+(i=bM(e,"##########",r)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=QA(l,Math.pow(10,s)-1,!1),i=""+c," "==(u=wM("n",a[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+a[2]+"/"+a[3],(u=VA(o[2],s)).length<a[4].length&&(u=mM(a[4].substr(a[4].length-u.length))+u),i+=u;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),c+((o=QA(l,Math.pow(10,s)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?UA(o[1],s)+a[2]+"/"+a[3]+VA(o[2],s):tI(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=""+r,t.length<=i.length?i:mM(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var d=t.indexOf(".")-s,h=t.length-i.length-d;return mM(t.substr(0,d)+i+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+bM(e,t,-r):lM(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?zA(0,3-e.length):"")+e}))+"."+zA(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=lM(""+l);return"0"!==p?c+p:"";default:if(t.match(/\.[0#?]*$/))return bM(e,t.slice(0,t.lastIndexOf(".")),r)+mM(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function wM(e,t,r){return(0|r)===r?bM(e,t,r):xM(e,t,r)}var _M=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function kM(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":WA(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(n=r;"]"!==e.charAt(t++)&&t<e.length;)n+=e.charAt(t);if(n.match(_M))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||"\\"==r&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var SM=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function jM(e,t){if(null==t)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0}return!1}function EM(e,t){var r=function(e){for(var t=[],r=!1,n=0,i=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(i,n-i),i=n+1}if(t[t.length]=e.substr(i),!0===r)throw new Error("Format |"+e+"| unterminated string ");return t}(e),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if("number"!==typeof t)return[4,4===r.length||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"]}var a=t>0?r[0]:t<0?r[1]:r[2];if(-1===r[0].indexOf("[")&&-1===r[1].indexOf("["))return[n,a];if(null!=r[0].match(/\[[=<>]/)||null!=r[1].match(/\[[=<>]/)){var s=r[0].match(SM),o=r[1].match(SM);return jM(t,s)?[n,r[0]]:jM(t,o)?[n,r[1]]:[n,r[null!=s&&null!=o?2:1]]}return[n,a]}function CM(e,t,r){null==r&&(r={});var n="";switch(typeof e){case"string":n="m/d/yy"==e&&r.dateNF?r.dateNF:e;break;case"number":null==(n=14==e&&r.dateNF?r.dateNF:(null!=r.table?r.table:ZA)[e])&&(n=r.table&&r.table[YA[e]]||ZA[YA[e]]),null==n&&(n=XA[e]||"General")}if(WA(n,0))return sM(t,r);t instanceof Date&&(t=nM(t,r.date1904));var i=EM(n,t);if(WA(i[1]))return sM(t,r);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,r,n){for(var i,a,s,o=[],l="",c=0,u="",d="t",h="H";c<e.length;)switch(u=e.charAt(c)){case"G":if(!WA(e,c))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(s=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(s);o[o.length]={t:"t",v:l},++c;break;case"\\":var p=e.charAt(++c),f="("===p||")"===p?p:"t";o[o.length]={t:f,v:p},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==i&&null==(i=JA(t,r,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},d=u,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&null==(i=JA(t,r)))return"";for(l=u;++c<e.length&&e.charAt(c).toLowerCase()===u;)l+=u;"m"===u&&"h"===d.toLowerCase()&&(u="M"),"h"===u&&(u=h),o[o.length]={t:u,v:l},d=u;break;case"A":case"a":case"\u4e0a":var m={t:u,v:u};if(null==i&&(i=JA(t,r)),"A/P"===e.substr(c,3).toUpperCase()?(null!=i&&(m.v=i.H>=12?"P":"A"),m.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"PM":"AM"),m.t="T",c+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",c+=5,h="h"):(m.t="t",++c),null==i&&"T"===m.t)return"";o[o.length]=m,d=u;break;case"[":for(l=u;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(_M)){if(null==i&&null==(i=JA(t,r)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},d=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",kM(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=i){for(l=u;++c<e.length&&"0"===(u=e.charAt(c));)l+=u;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=u;++c<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(c))>-1;)l+=u;o[o.length]={t:"n",v:l};break;case"?":for(l=u;e.charAt(++c)===u;)l+=u;o[o.length]={t:u,v:l},d=u;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===n?"t":u,v:u},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=u;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:u,v:u},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"t",v:u},++c}var g,v=0,x=0;for(c=o.length-1,d="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=h,d="h",v<1&&(v=1);break;case"s":(g=o[c].v.match(/\.0+$/))&&(x=Math.max(x,g[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":d=o[c].t;break;case"m":"s"===d&&(o[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&o[c].v.match(/[Hh]/)&&(v=1),v<2&&o[c].v.match(/[Mm]/)&&(v=2),v<3&&o[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}var y,b="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=oM(o[c].t.charCodeAt(0),o[c].v,i,x),o[c].t="t";break;case"n":case"?":for(y=c+1;null!=o[y]&&("?"===(u=o[y].t)||"D"===u||(" "===u||"t"===u)&&null!=o[y+1]&&("?"===o[y+1].t||"t"===o[y+1].t&&"/"===o[y+1].v)||"("===o[c].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===o[y].v||" "===o[y].v&&null!=o[y+1]&&"?"==o[y+1].t));)o[c].v+=o[y].v,o[y]={v:"",t:";"},++y;b+=o[c].v,c=y-1;break;case"G":o[c].t="t",o[c].v=sM(t,r)}var w,_,k="";if(b.length>0){40==b.charCodeAt(0)?(w=t<0&&45===b.charCodeAt(0)?-t:t,_=wM("n",b,w)):(_=wM("n",b,w=t<0&&n>1?-t:t),w<0&&o[0]&&"t"==o[0].t&&(_=_.substr(1),o[0].v="-"+o[0].v)),y=_.length-1;var S=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){S=c;break}var j=o.length;if(S===o.length&&-1===_.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(y>=o[c].v.length-1?(y-=o[c].v.length,o[c].v=_.substr(y+1,o[c].v.length)):y<0?o[c].v="":(o[c].v=_.substr(0,y+1),y=-1),o[c].t="t",j=c);y>=0&&j<o.length&&(o[j].v=_.substr(0,y+1)+o[j].v)}else if(S!==o.length&&-1===_.indexOf("E")){for(y=_.indexOf(".")-1,c=S;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(a=o[c].v.indexOf(".")>-1&&c===S?o[c].v.indexOf(".")-1:o[c].v.length-1,k=o[c].v.substr(a+1);a>=0;--a)y>=0&&("0"===o[c].v.charAt(a)||"#"===o[c].v.charAt(a))&&(k=_.charAt(y--)+k);o[c].v=k,o[c].t="t",j=c}for(y>=0&&j<o.length&&(o[j].v=_.substr(0,y+1)+o[j].v),y=_.indexOf(".")+1,c=S;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===S)){for(a=o[c].v.indexOf(".")>-1&&c===S?o[c].v.indexOf(".")+1:0,k=o[c].v.substr(0,a);a<o[c].v.length;++a)y<_.length&&(k+=_.charAt(y++));o[c].v=k,o[c].t="t",j=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(w=n>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=wM(o[c].t,o[c].v,w),o[c].t="t");var E="";for(c=0;c!==o.length;++c)null!=o[c]&&(E+=o[c].v);return E}(i[1],t,r,i[0])}function NM(e,t){if("number"!=typeof t){t=+t||-1;for(var r=0;r<392;++r)if(void 0!=ZA[r]){if(ZA[r]==e){t=r;break}}else t<0&&(t=r);t<0&&(t=391)}return ZA[t]=e,t}function TM(e){for(var t=0;392!=t;++t)void 0!==e[t]&&NM(e[t],t)}function PM(){ZA=function(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',e}()}var AM={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},MM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var IM=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var r=function(e){var t=0,r=0,n=0,i="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)i[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=i[t]=r>>>8^e[255&r];var a=[];for(n=1;16!=n;++n)a[n-1]="undefined"!==typeof Int32Array?i.subarray(256*n,256*n+256):i.slice(256*n,256*n+256);return a}(t),n=r[0],i=r[1],a=r[2],s=r[3],o=r[4],l=r[5],c=r[6],u=r[7],d=r[8],h=r[9],p=r[10],f=r[11],m=r[12],g=r[13],v=r[14];return e.table=t,e.bstr=function(e,r){for(var n=~r,i=0,a=e.length;i<a;)n=n>>>8^t[255&(n^e.charCodeAt(i++))];return~n},e.buf=function(e,r){for(var x=~r,y=e.length-15,b=0;b<y;)x=v[e[b++]^255&x]^g[e[b++]^x>>8&255]^m[e[b++]^x>>16&255]^f[e[b++]^x>>>24]^p[e[b++]]^h[e[b++]]^d[e[b++]]^u[e[b++]]^c[e[b++]]^l[e[b++]]^o[e[b++]]^s[e[b++]]^a[e[b++]]^i[e[b++]]^n[e[b++]]^t[e[b++]];for(y+=15;b<y;)x=x>>>8^t[255&(x^e[b++])];return~x},e.str=function(e,r){for(var n=~r,i=0,a=e.length,s=0,o=0;i<a;)(s=e.charCodeAt(i++))<128?n=n>>>8^t[255&(n^s)]:s<2048?n=(n=n>>>8^t[255&(n^(192|s>>6&31))])>>>8^t[255&(n^(128|63&s))]:s>=55296&&s<57344?(s=64+(1023&s),o=1023&e.charCodeAt(i++),n=(n=(n=(n=n>>>8^t[255&(n^(240|s>>8&7))])>>>8^t[255&(n^(128|s>>2&63))])>>>8^t[255&(n^(128|o>>6&15|(3&s)<<4))])>>>8^t[255&(n^(128|63&o))]):n=(n=(n=n>>>8^t[255&(n^(224|s>>12&15))])>>>8^t[255&(n^(128|s>>6&63))])>>>8^t[255&(n^(128|63&s))];return~n},e}(),OM=function(){var e,t={};function r(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function n(e){if("/"==e.charAt(e.length-1))return n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function i(e,t){"string"===typeof t&&(t=new Date(t));var r=t.getHours();r=(r=r<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,r);var n=t.getFullYear()-1980;n=(n=n<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,n)}function a(e){nD(e,0);for(var t={},r=0;e.l<=e.length-4;){var n=e.read_shift(2),i=e.read_shift(2),a=e.l+i,s={};if(21589===n)1&(r=e.read_shift(1))&&(s.mtime=e.read_shift(4)),i>5&&(2&r&&(s.atime=e.read_shift(4)),4&r&&(s.ctime=e.read_shift(4))),s.mtime&&(s.mt=new Date(1e3*s.mtime));e.l=a,t[n]=s}return t}function s(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return ie(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=_(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var r=t&&t.root||"",n=(TA&&Buffer.isBuffer(e)?e.toString("binary"):_(e)).split("\r\n"),i=0,a="";for(i=0;i<n.length;++i)if(a=n[i],/^Content-Location:/i.test(a)&&(a=a.slice(a.indexOf("file")),r||(r=a.slice(0,a.lastIndexOf("/")+1)),a.slice(0,r.length)!=r))for(;r.length>0&&(r=(r=r.slice(0,r.length-1)).slice(0,r.lastIndexOf("/")+1),a.slice(0,r.length)!=r););var s=(n[1]||"").match(/boundary="(.*?)"/);if(!s)throw new Error("MAD cannot find boundary");var o="--"+(s[1]||""),l=[],c=[],u={FileIndex:l,FullPaths:c};h(u);var d,p=0;for(i=0;i<n.length;++i){var f=n[i];f!==o&&f!==o+"--"||(p++&&ue(u,n.slice(d,i),r),d=i)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var r,n,i,a,s,o,p=512,f=[],m=e.slice(0,512);nD(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(x,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(r=g[0]){case 3:p=512;break;case 4:p=4096;break;case 0:if(0==g[1])return ie(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+r)}512!==p&&nD(m=e.slice(0,p),28);var y=e.slice(0,p);!function(e,t){var r=9;switch(e.l+=2,r=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+r);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+r);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+r)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,r);var b=m.read_shift(4,"i");if(3===r&&0!==b)throw new Error("# Directory Sectors: Expected 0 saw "+b);m.l+=4,a=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),s=m.read_shift(4,"i"),n=m.read_shift(4,"i"),o=m.read_shift(4,"i"),i=m.read_shift(4,"i");for(var w=-1,k=0;k<109&&!((w=m.read_shift(4,"i"))<0);++k)f[k]=w;var S=function(e,t){for(var r=Math.ceil(e.length/t)-1,n=[],i=1;i<r;++i)n[i-1]=e.slice(i*t,(i+1)*t);return n[r-1]=e.slice(r*t),n}(e,p);c(o,i,S,p,f);var j=function(e,t,r,n){var i=e.length,a=[],s=[],o=[],l=[],c=n-1,u=0,d=0,h=0,p=0;for(u=0;u<i;++u)if(o=[],(h=u+t)>=i&&(h-=i),!s[h]){l=[];var f=[];for(d=h;d>=0;){f[d]=!0,s[d]=!0,o[o.length]=d,l.push(e[d]);var m=r[Math.floor(4*d/n)];if(n<4+(p=4*d&c))throw new Error("FAT boundary crossed: "+d+" 4 "+n);if(!e[m])break;if(f[d=ZO(e[m],p)])break}a[h]={nodes:o,data:SO([l])}}return a}(S,a,f,p);j[a].name="!Directory",n>0&&s!==v&&(j[s].name="!MiniFAT"),j[f[0]].name="!FAT",j.fat_addrs=f,j.ssz=p;var E=[],C=[],N=[];!function(e,t,r,n,i,a,s,o){for(var c,h=0,p=n.length?2:0,f=t[e].data,m=0,g=0;m<f.length;m+=128){var x=f.slice(m,m+128);nD(x,64),g=x.read_shift(2),c=EO(x,0,g-p),n.push(c);var y={name:c,type:x.read_shift(1),color:x.read_shift(1),L:x.read_shift(4,"i"),R:x.read_shift(4,"i"),C:x.read_shift(4,"i"),clsid:x.read_shift(16),state:x.read_shift(4,"i"),start:0,size:0};0!==x.read_shift(2)+x.read_shift(2)+x.read_shift(2)+x.read_shift(2)&&(y.ct=d(x,x.l-8)),0!==x.read_shift(2)+x.read_shift(2)+x.read_shift(2)+x.read_shift(2)&&(y.mt=d(x,x.l-8)),y.start=x.read_shift(4,"i"),y.size=x.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=v,y.name=""),5===y.type?(h=y.start,i>0&&h!==v&&(t[h].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===t[y.start]&&(t[y.start]=u(r,y.start,t.fat_addrs,t.ssz)),t[y.start].name=y.name,y.content=t[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:h!==v&&y.start!==v&&t[h]&&(y.content=l(y,t[h].data,(t[o]||{}).data))),y.content&&nD(y.content,0),a[c]=y,s.push(y)}}(a,j,S,E,n,{},C,s),function(e,t,r){for(var n=0,i=0,a=0,s=0,o=0,l=r.length,c=[],u=[];n<l;++n)c[n]=u[n]=n,t[n]=r[n];for(;o<u.length;++o)i=e[n=u[o]].L,a=e[n].R,s=e[n].C,c[n]===n&&(-1!==i&&c[i]!==i&&(c[n]=c[i]),-1!==a&&c[a]!==a&&(c[n]=c[a])),-1!==s&&(c[s]=n),-1!==i&&n!=c[n]&&(c[i]=c[n],u.lastIndexOf(i)<o&&u.push(i)),-1!==a&&n!=c[n]&&(c[a]=c[n],u.lastIndexOf(a)<o&&u.push(a));for(n=1;n<l;++n)c[n]===n&&(-1!==a&&c[a]!==a?c[n]=c[a]:-1!==i&&c[i]!==i&&(c[n]=c[i]));for(n=1;n<l;++n)if(0!==e[n].type){if((o=n)!=c[o])do{o=c[o],t[n]=t[o]+"/"+t[n]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[n]=-1}for(t[0]+="/",n=1;n<l;++n)2!==e[n].type&&(t[n]+="/")}(C,N,E),E.shift();var T={FileIndex:C,FullPaths:N};return t&&t.raw&&(T.raw={header:y,sectors:S}),T}function l(e,t,r){for(var n=e.start,i=e.size,a=[],s=n;r&&i>0&&s>=0;)a.push(t.slice(s*g,s*g+g)),i-=g,s=ZO(r,4*s);return 0===a.length?aD(0):LA(a).slice(0,e.size)}function c(e,t,r,n,i){var a=v;if(e===v){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var s=r[e],o=(n>>>2)-1;if(!s)return;for(var l=0;l<o&&(a=ZO(s,4*l))!==v;++l)i.push(a);c(ZO(s,n-4),t-1,r,n,i)}}function u(e,t,r,n,i){var a=[],s=[];i||(i=[]);var o=n-1,l=0,c=0;for(l=t;l>=0;){i[l]=!0,a[a.length]=l,s.push(e[l]);var u=r[Math.floor(4*l/n)];if(n<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+n);if(!e[u])break;l=ZO(e[u],c)}return{nodes:a,data:SO([s])}}function d(e,t){return new Date(1e3*(KO(e,t+4)/1e7*Math.pow(2,32)+KO(e,t)/1e7-11644473600))}function h(e,t){var r=t||{},n=r.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=n+"/",e.FileIndex[0]={name:n,type:5}),r.CLSID&&(e.FileIndex[0].clsid=r.CLSID),function(e){var t="\x01Sh33tJ5";if(OM.find(e,"/"+t))return;var r=aD(4);r[0]=55,r[1]=r[3]=50,r[2]=54,e.FileIndex.push({name:t,type:2,content:r,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),p(e)}(e)}function p(e,t){h(e);for(var i=!1,a=!1,s=e.FullPaths.length-1;s>=0;--s){var o=e.FileIndex[s];switch(o.type){case 0:a?i=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:a=!0,isNaN(o.R*o.L*o.C)&&(i=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(i=!0);break;default:i=!0}}if(i||t){var l=new Date(1987,1,19),c=0,u=Object.create?Object.create(null):{},d=[];for(s=0;s<e.FullPaths.length;++s)u[e.FullPaths[s]]=!0,0!==e.FileIndex[s].type&&d.push([e.FullPaths[s],e.FileIndex[s]]);for(s=0;s<d.length;++s){var p=r(d[s][0]);(a=u[p])||(d.push([p,{name:n(p).replace("/",""),type:1,clsid:b,ct:l,mt:l,content:null}]),u[p]=!0)}for(d.sort((function(e,t){return function(e,t){for(var r=e.split("/"),n=t.split("/"),i=0,a=0,s=Math.min(r.length,n.length);i<s;++i){if(a=r[i].length-n[i].length)return a;if(r[i]!=n[i])return r[i]<n[i]?-1:1}return r.length-n.length}(e[0],t[0])})),e.FullPaths=[],e.FileIndex=[],s=0;s<d.length;++s)e.FullPaths[s]=d[s][0],e.FileIndex[s]=d[s][1];for(s=0;s<d.length;++s){var f=e.FileIndex[s],m=e.FullPaths[s];if(f.name=n(m).replace("/",""),f.L=f.R=f.C=-(f.color=1),f.size=f.content?f.content.length:0,f.start=0,f.clsid=f.clsid||b,0===s)f.C=d.length>1?1:-1,f.size=0,f.type=5;else if("/"==m.slice(-1)){for(c=s+1;c<d.length&&r(e.FullPaths[c])!=m;++c);for(f.C=c>=d.length?-1:c,c=s+1;c<d.length&&r(e.FullPaths[c])!=r(m);++c);f.R=c>=d.length?-1:c,f.type=1}else r(e.FullPaths[s+1]||"")==r(m)&&(f.R=s+1),f.type=2}}}function f(e,t){var r=t||{};if("mad"==r.fileType)return function(e,t){for(var r=t||{},n=r.boundary||"SheetJS",i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(n="------="+n).slice(2)+'"',"","",""],a=e.FullPaths[0],s=a,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(s=e.FullPaths[l].slice(a.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=s){s=s.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"}));for(var c=o.content,u=TA&&Buffer.isBuffer(c)?c.toString("binary"):_(c),d=0,h=Math.min(1024,u.length),p=0,f=0;f<=h;++f)(p=u.charCodeAt(f))>=32&&p<128&&++d;var m=d>=4*h/5;i.push(n),i.push("Content-Location: "+(r.root||"file:///C:/SheetJS/")+s),i.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),i.push("Content-Type: "+oe(o,s)),i.push(""),i.push(m?ce(u):le(u))}return i.push(n+"--\r\n"),i.join("\r\n")}(e,r);if(p(e),"zip"===r.fileType)return function(e,t){var r=t||{},n=[],a=[],s=aD(1),o=r.compression?8:0,l=0;0;var c=0,u=0,d=0,h=0,p=e.FullPaths[0],f=p,m=e.FileIndex[0],g=[],v=0;for(c=1;c<e.FullPaths.length;++c)if(f=e.FullPaths[c].slice(p.length),(m=e.FileIndex[c]).size&&m.content&&"\x01Sh33tJ5"!=f){var x=d,y=aD(f.length);for(u=0;u<f.length;++u)y.write_shift(1,127&f.charCodeAt(u));y=y.slice(0,y.l),g[h]=IM.buf(m.content,0);var b=m.content;8==o&&(b=k(b)),(s=aD(30)).write_shift(4,67324752),s.write_shift(2,20),s.write_shift(2,l),s.write_shift(2,o),m.mt?i(s,m.mt):s.write_shift(4,0),s.write_shift(-4,8&l?0:g[h]),s.write_shift(4,8&l?0:b.length),s.write_shift(4,8&l?0:m.content.length),s.write_shift(2,y.length),s.write_shift(2,0),d+=s.length,n.push(s),d+=y.length,n.push(y),d+=b.length,n.push(b),8&l&&((s=aD(12)).write_shift(-4,g[h]),s.write_shift(4,b.length),s.write_shift(4,m.content.length),d+=s.l,n.push(s)),(s=aD(46)).write_shift(4,33639248),s.write_shift(2,0),s.write_shift(2,20),s.write_shift(2,l),s.write_shift(2,o),s.write_shift(4,0),s.write_shift(-4,g[h]),s.write_shift(4,b.length),s.write_shift(4,m.content.length),s.write_shift(2,y.length),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(4,0),s.write_shift(4,x),v+=s.l,a.push(s),v+=y.length,a.push(y),++h}return s=aD(22),s.write_shift(4,101010256),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,h),s.write_shift(2,h),s.write_shift(4,v),s.write_shift(4,d),s.write_shift(2,0),LA([LA(n),LA(a),s])}(e,r);var n=function(e){for(var t=0,r=0,n=0;n<e.FileIndex.length;++n){var i=e.FileIndex[n];if(i.content){var a=i.content.length;a>0&&(a<4096?t+=a+63>>6:r+=a+511>>9)}}for(var s=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+r+s+o,c=l+127>>7,u=c<=109?0:Math.ceil((c-109)/127);l+c+u+127>>7>c;)u=++c<=109?0:Math.ceil((c-109)/127);var d=[1,u,c,o,s,r,t,0];return e.FileIndex[0].size=t<<6,d[7]=(e.FileIndex[0].start=d[0]+d[1]+d[2]+d[3]+d[4]+d[5])+(d[6]+7>>3),d}(e),a=aD(n[7]<<9),s=0,o=0;for(s=0;s<8;++s)a.write_shift(1,y[s]);for(s=0;s<8;++s)a.write_shift(2,0);for(a.write_shift(2,62),a.write_shift(2,3),a.write_shift(2,65534),a.write_shift(2,9),a.write_shift(2,6),s=0;s<3;++s)a.write_shift(2,0);for(a.write_shift(4,0),a.write_shift(4,n[2]),a.write_shift(4,n[0]+n[1]+n[2]+n[3]-1),a.write_shift(4,0),a.write_shift(4,4096),a.write_shift(4,n[3]?n[0]+n[1]+n[2]-1:v),a.write_shift(4,n[3]),a.write_shift(-4,n[1]?n[0]-1:v),a.write_shift(4,n[1]),s=0;s<109;++s)a.write_shift(-4,s<n[2]?n[1]+s:-1);if(n[1])for(o=0;o<n[1];++o){for(;s<236+127*o;++s)a.write_shift(-4,s<n[2]?n[1]+s:-1);a.write_shift(-4,o===n[1]-1?v:o+1)}var l=function(e){for(o+=e;s<o-1;++s)a.write_shift(-4,s+1);e&&(++s,a.write_shift(-4,v))};for(o=s=0,o+=n[1];s<o;++s)a.write_shift(-4,w.DIFSECT);for(o+=n[2];s<o;++s)a.write_shift(-4,w.FATSECT);l(n[3]),l(n[4]);for(var c=0,u=0,d=e.FileIndex[0];c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&((u=d.content.length)<4096||(d.start=o,l(u+511>>9)));for(l(n[6]+7>>3);511&a.l;)a.write_shift(-4,w.ENDOFCHAIN);for(o=s=0,c=0;c<e.FileIndex.length;++c)(d=e.FileIndex[c]).content&&(!(u=d.content.length)||u>=4096||(d.start=o,l(u+63>>6)));for(;511&a.l;)a.write_shift(-4,w.ENDOFCHAIN);for(s=0;s<n[4]<<2;++s){var h=e.FullPaths[s];if(h&&0!==h.length){d=e.FileIndex[s],0===s&&(d.start=d.size?d.start-1:v);var f=0===s&&r.root||d.name;if(u=2*(f.length+1),a.write_shift(64,f,"utf16le"),a.write_shift(2,u),a.write_shift(1,d.type),a.write_shift(1,d.color),a.write_shift(-4,d.L),a.write_shift(-4,d.R),a.write_shift(-4,d.C),d.clsid)a.write_shift(16,d.clsid,"hex");else for(c=0;c<4;++c)a.write_shift(4,0);a.write_shift(4,d.state||0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,d.start),a.write_shift(4,d.size),a.write_shift(4,0)}else{for(c=0;c<17;++c)a.write_shift(4,0);for(c=0;c<3;++c)a.write_shift(4,-1);for(c=0;c<12;++c)a.write_shift(4,0)}}for(s=1;s<e.FileIndex.length;++s)if((d=e.FileIndex[s]).size>=4096)if(a.l=d.start+1<<9,TA&&Buffer.isBuffer(d.content))d.content.copy(a,a.l,0,d.size),a.l+=d.size+511&-512;else{for(c=0;c<d.size;++c)a.write_shift(1,d.content[c]);for(;511&c;++c)a.write_shift(1,0)}for(s=1;s<e.FileIndex.length;++s)if((d=e.FileIndex[s]).size>0&&d.size<4096)if(TA&&Buffer.isBuffer(d.content))d.content.copy(a,a.l,0,d.size),a.l+=d.size+63&-64;else{for(c=0;c<d.size;++c)a.write_shift(1,d.content[c]);for(;63&c;++c)a.write_shift(1,0)}if(TA)a.l=a.length;else for(;a.l<a.length;)a.write_shift(1,0);return a}t.version="1.2.1";var m,g=64,v=-2,x="d0cf11e0a1b11ae1",y=[208,207,17,224,161,177,26,225],b="00000000000000000000000000000000",w={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:v,FREESECT:-1,HEADER_SIGNATURE:x,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:b,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function _(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function k(e){return m?m.deflateRawSync(e):Z(e)}var S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function C(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var N="undefined"!==typeof Uint8Array,T=N?new Uint8Array(256):[],P=0;P<256;++P)T[P]=C(P);function A(e,t){var r=T[255&e];return t<=8?r>>>8-t:(r=r<<8|T[e>>8&255],t<=16?r>>>16-t:(r=r<<8|T[e>>16&255])>>>24-t)}function M(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=6?0:e[n+1]<<8))>>>r&3}function I(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=5?0:e[n+1]<<8))>>>r&7}function O(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=3?0:e[n+1]<<8))>>>r&31}function D(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=1?0:e[n+1]<<8))>>>r&127}function R(e,t,r){var n=7&t,i=t>>>3,a=(1<<r)-1,s=e[i]>>>n;return r<8-n?s&a:(s|=e[i+1]<<8-n,r<16-n?s&a:(s|=e[i+2]<<16-n,r<24-n?s&a:(s|=e[i+3]<<24-n)&a))}function L(e,t,r){var n=7&t,i=t>>>3;return n<=5?e[i]|=(7&r)<<n:(e[i]|=r<<n&255,e[i+1]=(7&r)>>8-n),t+3}function F(e,t,r){return r=(1&r)<<(7&t),e[t>>>3]|=r,t+1}function $(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=r,t+8}function B(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=255&r,e[n+2]=r>>>8,t+16}function z(e,t){var r=e.length,n=2*r>t?2*r:t+5,i=0;if(r>=t)return e;if(TA){var a=MA(n);if(e.copy)e.copy(a);else for(;i<e.length;++i)a[i]=e[i];return a}if(N){var s=new Uint8Array(n);if(s.set)s.set(e);else for(;i<r;++i)s[i]=e[i];return s}return e.length=n,e}function U(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}function V(e,t,r){var n=1,i=0,a=0,s=0,o=0,l=e.length,c=N?new Uint16Array(32):U(32);for(a=0;a<32;++a)c[a]=0;for(a=l;a<r;++a)e[a]=0;l=e.length;var u=N?new Uint16Array(l):U(l);for(a=0;a<l;++a)c[i=e[a]]++,n<i&&(n=i),u[a]=0;for(c[0]=0,a=1;a<=n;++a)c[a+16]=o=o+c[a-1]<<1;for(a=0;a<l;++a)0!=(o=e[a])&&(u[a]=c[o+16]++);var d=0;for(a=0;a<l;++a)if(0!=(d=e[a]))for(o=A(u[a],n)>>n-d,s=(1<<n+4-d)-1;s>=0;--s)t[o|s<<d]=15&d|a<<4;return n}var H=N?new Uint16Array(512):U(512),G=N?new Uint16Array(32):U(32);if(!N){for(var q=0;q<512;++q)H[q]=0;for(q=0;q<32;++q)G[q]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);V(e,G,32);var r=[];for(t=0;t<=143;t++)r.push(8);for(;t<=255;t++)r.push(9);for(;t<=279;t++)r.push(7);for(;t<=287;t++)r.push(8);V(r,H,288)}();var K=function(){for(var e=N?new Uint8Array(32768):[],t=0,r=0;t<E.length-1;++t)for(;r<E[t+1];++r)e[r]=t;for(;r<32768;++r)e[r]=29;var n=N?new Uint8Array(259):[];for(t=0,r=0;t<j.length-1;++t)for(;r<j[t+1];++r)n[r]=t;return function(t,r){return t.length<8?function(e,t){for(var r=0;r<e.length;){var n=Math.min(65535,e.length-r),i=r+n==e.length;for(t.write_shift(1,+i),t.write_shift(2,n),t.write_shift(2,65535&~n);n-- >0;)t[t.l++]=e[r++]}return t.l}(t,r):function(t,r){for(var i=0,a=0,s=N?new Uint16Array(32768):[];a<t.length;){var o=Math.min(65535,t.length-a);if(o<10){for(7&(i=L(r,i,+!(a+o!=t.length)))&&(i+=8-(7&i)),r.l=i/8|0,r.write_shift(2,o),r.write_shift(2,65535&~o);o-- >0;)r[r.l++]=t[a++];i=8*r.l}else{i=L(r,i,+!(a+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[a],u=-1,d=0;if((u=s[l=32767&(l<<5^c)])&&((u|=-32768&a)>a&&(u-=32768),u<a))for(;t[u+d]==t[a+d]&&d<250;)++d;if(d>2){(c=n[d])<=22?i=$(r,i,T[c+1]>>1)-1:($(r,i,3),$(r,i+=5,T[c-23]>>5),i+=3);var h=c<8?0:c-4>>2;h>0&&(B(r,i,d-j[c]),i+=h),c=e[a-u],i=$(r,i,T[c]>>3),i-=3;var p=c<4?0:c-2>>1;p>0&&(B(r,i,a-u-E[c]),i+=p);for(var f=0;f<d;++f)s[l]=32767&a,l=32767&(l<<5^t[a]),++a;o-=d-1}else c<=143?c+=48:i=F(r,i,1),i=$(r,i,T[c]),s[l]=32767&a,++a}i=$(r,i,0)-1}}return r.l=(i+7)/8|0,r.l}(t,r)}}();function Z(e){var t=aD(50+Math.floor(1.1*e.length)),r=K(e,t);return t.slice(0,r)}var Y=N?new Uint16Array(32768):U(32768),X=N?new Uint16Array(32768):U(32768),Q=N?new Uint16Array(128):U(128),J=1,ee=1;function te(e,t){var r=O(e,t)+257,n=O(e,t+=5)+1,i=function(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=4?0:e[n+1]<<8))>>>r&15}(e,t+=5)+4;t+=4;for(var a=0,s=N?new Uint8Array(19):U(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=N?new Uint8Array(8):U(8),u=N?new Uint8Array(8):U(8),d=s.length,h=0;h<i;++h)s[S[h]]=a=I(e,t),l<a&&(l=a),c[a]++,t+=3;var p=0;for(c[0]=0,h=1;h<=l;++h)u[h]=p=p+c[h-1]<<1;for(h=0;h<d;++h)0!=(p=s[h])&&(o[h]=u[p]++);var f=0;for(h=0;h<d;++h)if(0!=(f=s[h])){p=T[o[h]]>>8-f;for(var m=(1<<7-f)-1;m>=0;--m)Q[p|m<<f]=7&f|h<<3}var g=[];for(l=1;g.length<r+n;)switch(t+=7&(p=Q[D(e,t)]),p>>>=3){case 16:for(a=3+M(e,t),t+=2,p=g[g.length-1];a-- >0;)g.push(p);break;case 17:for(a=3+I(e,t),t+=3;a-- >0;)g.push(0);break;case 18:for(a=11+D(e,t),t+=7;a-- >0;)g.push(0);break;default:g.push(p),l<p&&(l=p)}var v=g.slice(0,r),x=g.slice(r);for(h=r;h<286;++h)v[h]=0;for(h=n;h<30;++h)x[h]=0;return J=V(v,Y,286),ee=V(x,X,30),t}function re(e,t){var r=function(e,t){if(3==e[0]&&!(3&e[1]))return[AA(t),2];for(var r=0,n=0,i=MA(t||1<<18),a=0,s=i.length>>>0,o=0,l=0;0==(1&n);)if(n=I(e,r),r+=3,n>>>1!=0)for(n>>1==1?(o=9,l=5):(r=te(e,r),o=J,l=ee);;){!t&&s<a+32767&&(s=(i=z(i,a+32767)).length);var c=R(e,r,o),u=n>>>1==1?H[c]:Y[c];if(r+=15&u,0===((u>>>=4)>>>8&255))i[a++]=u;else{if(256==u)break;var d=(u-=257)<8?0:u-4>>2;d>5&&(d=0);var h=a+j[u];d>0&&(h+=R(e,r,d),r+=d),c=R(e,r,l),r+=15&(u=n>>>1==1?G[c]:X[c]);var p=(u>>>=4)<4?0:u-2>>1,f=E[u];for(p>0&&(f+=R(e,r,p),r+=p),!t&&s<h&&(s=(i=z(i,h+100)).length);a<h;)i[a]=i[a-f],++a}}else{7&r&&(r+=8-(7&r));var m=e[r>>>3]|e[1+(r>>>3)]<<8;if(r+=32,m>0)for(!t&&s<a+m&&(s=(i=z(i,a+m)).length);m-- >0;)i[a++]=e[r>>>3],r+=8}return t?[i,r+7>>>3]:[i.slice(0,a),r+7>>>3]}(e.slice(e.l||0),t);return e.l+=r[1],r[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function ie(e,t){var r=e;nD(r,0);var n={FileIndex:[],FullPaths:[]};h(n,{root:t.root});for(var i=r.length-4;(80!=r[i]||75!=r[i+1]||5!=r[i+2]||6!=r[i+3])&&i>=0;)--i;r.l=i+4,r.l+=4;var s=r.read_shift(2);r.l+=6;var o=r.read_shift(4);for(r.l=o,i=0;i<s;++i){r.l+=20;var l=r.read_shift(4),c=r.read_shift(4),u=r.read_shift(2),d=r.read_shift(2),p=r.read_shift(2);r.l+=8;var f=r.read_shift(4),m=a(r.slice(r.l+u,r.l+u+d));r.l+=u+d+p;var g=r.l;r.l=f+4,ae(r,l,c,n,m),r.l=g}return n}function ae(e,t,r,n,i){e.l+=2;var s=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),r=65535&e.read_shift(2),n=new Date,i=31&r,a=15&(r>>>=5);r>>>=4,n.setMilliseconds(0),n.setFullYear(r+1980),n.setMonth(a-1),n.setDate(i);var s=31&t,o=63&(t>>>=5);return t>>>=6,n.setHours(t),n.setMinutes(o),n.setSeconds(s<<1),n}(e);if(8257&s)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),u=e.read_shift(4),d=e.read_shift(2),h=e.read_shift(2),p="",f=0;f<d;++f)p+=String.fromCharCode(e[e.l++]);if(h){var g=a(e.slice(e.l,e.l+h));(g[21589]||{}).mt&&(l=g[21589].mt),((i||{})[21589]||{}).mt&&(l=i[21589].mt)}e.l+=h;var v=e.slice(e.l,e.l+c);switch(o){case 8:v=function(e,t){if(!m)return re(e,t);var r=new(0,m.InflateRaw),n=r._processChunk(e.slice(e.l),r._finishFlushFlag);return e.l+=r.bytesRead,n}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var x=!1;8&s&&(134695760==e.read_shift(4)&&(e.read_shift(4),x=!0),c=e.read_shift(4),u=e.read_shift(4)),c!=t&&ne(x,"Bad compressed size: "+t+" != "+c),u!=r&&ne(x,"Bad uncompressed size: "+r+" != "+u),de(n,p,v,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function oe(e,t){if(e.ctype)return e.ctype;var r=e.name||"",n=r.match(/\.([^\.]+)$/);return n&&se[n[1]]||t&&(n=(r=t).match(/[\.\\]([^\.\\])+$/))&&se[n[1]]?se[n[1]]:"application/octet-stream"}function le(e){for(var t=CA(e),r=[],n=0;n<t.length;n+=76)r.push(t.slice(n,n+76));return r.join("\r\n")+"\r\n"}function ce(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)}));"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var r=[],n=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),i=0;i<n.length;++i){var a=n[i];if(0!=a.length)for(var s=0;s<a.length;){var o=76,l=a.slice(s,s+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=a.slice(s,s+o),(s+=o)<a.length&&(l+="="),r.push(l)}else r.push("")}return r.join("\r\n")}function ue(e,t,r){for(var n,i="",a="",s="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":i=c[2].trim();break;case"content-type":s=c[2].trim();break;case"content-transfer-encoding":a=c[2].trim()}}switch(++o,a.toLowerCase()){case"base64":n=IA(NA(t.slice(o).join("")));break;case"quoted-printable":n=function(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r];r<=e.length&&"="==n.charAt(n.length-1);)n=n.slice(0,n.length-1)+e[++r];t.push(n)}for(var i=0;i<t.length;++i)t[i]=t[i].replace(/[=][0-9A-Fa-f]{2}/g,(function(e){return String.fromCharCode(parseInt(e.slice(1),16))}));return IA(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+a)}var u=de(e,i.slice(r.length),n,{unsafe:!0});s&&(u.ctype=s)}function de(e,t,r,i){var a=i&&i.unsafe;a||h(e);var s=!a&&OM.find(e,t);if(!s){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),s={name:n(t),type:2},e.FileIndex.push(s),e.FullPaths.push(o),a||OM.utils.cfb_gc(e)}return s.content=r,s.size=r?r.length:0,i&&(i.CLSID&&(s.clsid=i.CLSID),i.mt&&(s.mt=i.mt),i.ct&&(s.ct=i.ct)),s}return t.find=function(e,t){var r=e.FullPaths.map((function(e){return e.toUpperCase()})),n=r.map((function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]})),i=!1;47===t.charCodeAt(0)?(i=!0,t=r[0].slice(0,-1)+t):i=-1!==t.indexOf("/");var a=t.toUpperCase(),s=!0===i?r.indexOf(a):n.indexOf(a);if(-1!==s)return e.FileIndex[s];var o=!a.match($A);for(a=a.replace(FA,""),o&&(a=a.replace($A,"!")),s=0;s<r.length;++s){if((o?r[s].replace($A,"!"):r[s]).replace(FA,"")==a)return e.FileIndex[s];if((o?n[s].replace($A,"!"):n[s]).replace(FA,"")==a)return e.FileIndex[s]}return null},t.read=function(t,r){var n=r&&r.type;switch(n||TA&&Buffer.isBuffer(t)&&(n="buffer"),n||"base64"){case"file":return function(t,r){return s(),o(e.readFileSync(t),r)}(t,r);case"base64":return o(IA(NA(t)),r);case"binary":return o(IA(t),r)}return o(t,r)},t.parse=o,t.write=function(t,r){var n=f(t,r);switch(r&&r.type||"buffer"){case"file":return s(),e.writeFileSync(r.filename,n),n;case"binary":return"string"==typeof n?n:_(n);case"base64":return CA("string"==typeof n?n:_(n));case"buffer":if(TA)return Buffer.isBuffer(n)?n:PA(n);case"array":return"string"==typeof n?IA(n):n}return n},t.writeFile=function(t,r,n){s();var i=f(t,n);e.writeFileSync(r,i)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:de,cfb_del:function(e,t){h(e);var r=OM.find(e,t);if(r)for(var n=0;n<e.FileIndex.length;++n)if(e.FileIndex[n]==r)return e.FileIndex.splice(n,1),e.FullPaths.splice(n,1),!0;return!1},cfb_mov:function(e,t,r){h(e);var i=OM.find(e,t);if(i)for(var a=0;a<e.FileIndex.length;++a)if(e.FileIndex[a]==i)return e.FileIndex[a].name=n(r),e.FullPaths[a]=r,!0;return!1},cfb_gc:function(e){p(e,!0)},ReadShift:XO,CheckField:rD,prep_blob:nD,bconcat:LA,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(W){console.error("cannot use native zlib: "+(W.message||W))}},_deflateRaw:Z,_inflateRaw:re,consts:w},t}();let DM;function RM(e){return"string"===typeof e?OA(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function LM(e,t,r){if("undefined"!==typeof DM&&DM.writeFileSync)return r?DM.writeFileSync(e,t,r):DM.writeFileSync(e,t);if("undefined"!==typeof Deno){if(r&&"string"==typeof t)switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=OA(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n="utf8"==r?UI(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(n,e);if("undefined"!==typeof Blob){var i=new Blob([RM(n)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if("undefined"!==typeof saveAs)return saveAs(i,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(i);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(a)}),6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var s=document.createElement("a");if(null!=s.download)return s.download=e,s.href=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(a)}),6e4),a}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=DA(t)),o.write(t),o.close(),t}catch(W){if(!W.message||!W.message.match(/onstruct/))throw W}throw new Error("cannot save file "+e)}function FM(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function $M(e,t){for(var r=[],n=FM(e),i=0;i!==n.length;++i)null==r[e[n[i]][t]]&&(r[e[n[i]][t]]=n[i]);return r}function BM(e){for(var t=[],r=FM(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function zM(e){for(var t=[],r=FM(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}var UM=new Date(1899,11,30,0,0,0);function VM(e,t){var r=e.getTime();return t&&(r-=1263168e5),(r-(UM.getTime()+6e4*(e.getTimezoneOffset()-UM.getTimezoneOffset())))/864e5}var HM=new Date,GM=UM.getTime()+6e4*(HM.getTimezoneOffset()-UM.getTimezoneOffset()),WM=HM.getTimezoneOffset();function qM(e){var t=new Date;return t.setTime(24*e*60*60*1e3+GM),t.getTimezoneOffset()!==WM&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-WM)),t}function KM(e){var t=0,r=0,n=!1,i=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=i.length;++a)if(i[a]){switch(r=1,a>3&&(n=!0),i[a].slice(i[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[a].slice(i[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(!n)throw new Error("Unsupported ISO Duration Field: M");r*=60}t+=r*parseInt(i[a],10)}return t}var ZM=new Date("2017-02-19T19:06:09.000Z"),YM=isNaN(ZM.getFullYear())?new Date("2/19/17"):ZM,XM=2017==YM.getFullYear();function QM(e,t){var r=new Date(e);if(XM)return t>0?r.setTime(r.getTime()+60*r.getTimezoneOffset()*1e3):t<0&&r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3),r;if(e instanceof Date)return e;if(1917==YM.getFullYear()&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-60*a.getTimezoneOffset()*1e3)),a}function JM(e,t){if(TA&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return UI(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return UI(wA(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return UI(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return UI(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,(function(e){return r[e]||e}))}catch(W){}for(var n=[],i=0;i!=e.length;++i)n.push(String.fromCharCode(e[i]));return n.join("")}function eI(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=eI(e[r]));return t}function tI(e,t){for(var r="";r.length<t;)r+=e;return r}function rI(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return r*=100,""}));return isNaN(t=Number(n))?(n=n.replace(/[(](.*)[)]/,(function(e,t){return r=-r,t})),isNaN(t=Number(n))?t:t/r):t/r}var nI=["january","february","march","april","may","june","july","august","september","october","november","december"];function iI(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),i=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==nI.indexOf(s))return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||a>1)&&101!=n?t:e.match(/[^-0-9:,\/\\]/)?r:t}var aI=function(){var e=5=="abacaba".split(/(:?b)/i).length;return function(t,r,n){if(e||"string"==typeof r)return t.split(r);for(var i=t.split(r),a=[i[0]],s=1;s<i.length;++s)a.push(n),a.push(i[s]);return a}}();function sI(e){return e?e.content&&e.type?JM(e.content,!0):e.data?kA(e.data):e.asNodeBuffer&&TA?kA(e.asNodeBuffer().toString("binary")):e.asBinary?kA(e.asBinary()):e._data&&e._data.getContent?kA(JM(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function oI(e){if(!e)return null;if(e.data)return bA(e.data);if(e.asNodeBuffer&&TA)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return"string"==typeof t?bA(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function lI(e,t){for(var r=e.FullPaths||FM(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var s=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==s||i==s)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function cI(e,t){var r=lI(e,t);if(null==r)throw new Error("Cannot find file "+t+" in zip");return r}function uI(e,t,r){if(!r)return function(e){return e&&".bin"===e.name.slice(-4)?oI(e):sI(e)}(cI(e,t));if(!t)return null;try{return uI(e,t)}catch(W){return null}}function dI(e,t,r){if(!r)return sI(cI(e,t));if(!t)return null;try{return dI(e,t)}catch(W){return null}}function hI(e,t,r){if(!r)return oI(cI(e,t));if(!t)return null;try{return hI(e,t)}catch(W){return null}}function pI(e){for(var t=e.FullPaths||FM(e.files),r=[],n=0;n<t.length;++n)"/"!=t[n].slice(-1)&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function fI(e,t,r){if(e.FullPaths){var n;if("string"==typeof r)return n=TA?PA(r):function(e){for(var t=[],r=0,n=e.length+250,i=AA(e.length+255),a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s<128)i[r++]=s;else if(s<2048)i[r++]=192|s>>6&31,i[r++]=128|63&s;else if(s>=55296&&s<57344){s=64+(1023&s);var o=1023&e.charCodeAt(++a);i[r++]=240|s>>8&7,i[r++]=128|s>>2&63,i[r++]=128|o>>6&15|(3&s)<<4,i[r++]=128|63&o}else i[r++]=224|s>>12&15,i[r++]=128|s>>6&63,i[r++]=128|63&s;r>n&&(t.push(i.slice(0,r)),r=0,i=AA(65535),n=65530)}return t.push(i.slice(0,r)),LA(t)}(r),OM.utils.cfb_add(e,t,n);OM.utils.cfb_add(e,t,r)}else e.file(t,r)}function mI(){return OM.utils.cfb_new()}function gI(e,t){switch(t.type){case"base64":return OM.read(e,{type:"base64"});case"binary":return OM.read(e,{type:"binary"});case"buffer":case"array":return OM.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function vI(e,t){if("/"==e.charAt(0))return e.slice(1);var r=t.split("/");"/"!=t.slice(-1)&&r.pop();for(var n=e.split("/");0!==n.length;){var i=n.shift();".."===i?r.pop():"."!==i&&r.push(i)}return r.join("/")}var xI='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',yI=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,bI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,wI=xI.match(bI)?bI:/<[^>]*>/g,_I=/<\w*:/,kI=/<(\/?)\w+:/;function SI(e,t,r){for(var n={},i=0,a=0;i!==e.length&&(32!==(a=e.charCodeAt(i))&&10!==a&&13!==a);++i);if(t||(n[0]=e.slice(0,i)),i===e.length)return n;var s=e.match(yI),o=0,l="",c=0,u="",d="",h=1;if(s)for(c=0;c!=s.length;++c){for(d=s[c],a=0;a!=d.length&&61!==d.charCodeAt(a);++a);for(u=d.slice(0,a).trim();32==d.charCodeAt(a+1);)++a;for(h=34==(i=d.charCodeAt(a+1))||39==i?1:0,l=d.slice(a+1+h,d.length-h),o=0;o!=u.length&&58!==u.charCodeAt(o);++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,r||(n[u.toLowerCase()]=l);else{var p=(5===o&&"xmlns"===u.slice(0,5)?"xmlns":"")+u.slice(o+1);if(n[p]&&"ext"==u.slice(o-3,o))continue;n[p]=l,r||(n[p.toLowerCase()]=l)}}return n}function jI(e){return e.replace(kI,"<$1")}var EI={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},CI=BM(EI),NI=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,t=/_x([\da-fA-F]{4})_/gi;return function r(n){var i=n+"",a=i.indexOf("<![CDATA[");if(-1==a)return i.replace(e,(function(e,t){return EI[e]||String.fromCharCode(parseInt(t,e.indexOf("x")>-1?16:10))||e})).replace(t,(function(e,t){return String.fromCharCode(parseInt(t,16))}));var s=i.indexOf("]]>");return r(i.slice(0,a))+i.slice(a+9,s)+r(i.slice(s+3))}}(),TI=/[&<>'"]/g,PI=/[\u0000-\u0008\u000b-\u001f]/g;function AI(e){return(e+"").replace(TI,(function(e){return CI[e]})).replace(PI,(function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"}))}function MI(e){return AI(e).replace(/ /g,"_x0020_")}var II=/[\u0000-\u001f]/g;function OI(e){return(e+"").replace(TI,(function(e){return CI[e]})).replace(/\n/g,"<br/>").replace(II,(function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"}))}var DI=function(){var e=/&#(\d+);/g;function t(e,t){return String.fromCharCode(parseInt(t,10))}return function(r){return r.replace(e,t)}}();function RI(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function LI(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0;r<e.length;)(n=e.charCodeAt(r++))<128?t+=String.fromCharCode(n):(i=e.charCodeAt(r++),n>191&&n<224?(s=(31&n)<<6,s|=63&i,t+=String.fromCharCode(s)):(a=e.charCodeAt(r++),n<240?t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&a):(o=((7&n)<<18|(63&i)<<12|(63&a)<<6|63&(s=e.charCodeAt(r++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function FI(e){var t,r,n,i=AA(2*e.length),a=1,s=0,o=0;for(r=0;r<e.length;r+=a)a=1,(n=e.charCodeAt(r))<128?t=n:n<224?(t=64*(31&n)+(63&e.charCodeAt(r+1)),a=2):n<240?(t=4096*(15&n)+64*(63&e.charCodeAt(r+1))+(63&e.charCodeAt(r+2)),a=3):(a=4,t=262144*(7&n)+4096*(63&e.charCodeAt(r+1))+64*(63&e.charCodeAt(r+2))+(63&e.charCodeAt(r+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(i[s++]=255&o,i[s++]=o>>>8,o=0),i[s++]=t%256,i[s++]=t>>>8;return i.slice(0,s).toString("ucs2")}function $I(e){return PA(e,"binary").toString("utf8")}var BI="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",zI=TA&&($I(BI)==LI(BI)&&$I||FI(BI)==LI(BI)&&FI)||LI,UI=TA?function(e){return PA(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,i=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(63&n)));break;case n>=55296&&n<57344:n-=55296,i=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(63&n)))}return t.join("")},VI=function(){var e={};return function(t,r){var n=t+"|"+(r||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",r||"")}}(),HI=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]}));return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),n=0;n<e.length;++n)r=r.replace(e[n][0],e[n][1]);return r}}(),GI=function(){var e={};return function(t){return void 0!==e[t]?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),WI=/<\/?(?:vt:)?variant>/g,qI=/<(?:vt:)([^>]*)>([\s\S]*)</;function KI(e,t){var r=SI(e),n=e.match(GI(r.baseType))||[],i=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach((function(e){var t=e.replace(WI,"").match(qI);t&&i.push({v:zI(t[2]),t:t[1]})})),i}var ZI=/(^\s|\s$|\n)/;function YI(e,t){return"<"+e+(t.match(ZI)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function XI(e){return FM(e).map((function(t){return" "+t+'="'+e[t]+'"'})).join("")}function QI(e,t,r){return"<"+e+(null!=r?XI(r):"")+(null!=t?(t.match(ZI)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function JI(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(W){if(t)throw W}return""}function eO(e){if(TA&&Buffer.isBuffer(e))return e.toString("utf8");if("string"===typeof e)return e;if("undefined"!==typeof Uint8Array&&e instanceof Uint8Array)return zI(DA(RA(e)));throw new Error("Bad input format: expected Buffer or string")}var tO=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,rO="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",nO="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",iO="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",aO="http://schemas.openxmlformats.org/package/2006/content-types",sO="http://schemas.openxmlformats.org/package/2006/relationships",oO="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",lO="http://purl.org/dc/elements/1.1/",cO="http://purl.org/dc/terms/",uO="http://purl.org/dc/dcmitype/",dO="http://schemas.openxmlformats.org/officeDocument/2006/relationships",hO="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",pO="http://www.w3.org/2001/XMLSchema-instance",fO="http://www.w3.org/2001/XMLSchema",mO=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],gO="urn:schemas-microsoft-com:office:office",vO="urn:schemas-microsoft-com:office:excel",xO="urn:schemas-microsoft-com:office:spreadsheet",yO="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",bO="http://macVmlSchemaUri",wO="urn:schemas-microsoft-com:vml",_O="http://www.w3.org/TR/REC-html40";var kO=function(e){for(var t=[],r=0;r<e[0].length;++r)if(e[0][r])for(var n=0,i=e[0][r].length;n<i;n+=10240)t.push.apply(t,e[0][r].slice(n,n+10240));return t},SO=TA?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map((function(e){return Buffer.isBuffer(e)?e:PA(e)}))):kO(e)}:kO,jO=function(e,t,r){for(var n=[],i=t;i<r;i+=2)n.push(String.fromCharCode(WO(e,i)));return n.join("").replace(FA,"")},EO=TA?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(FA,""):jO(e,t,r)}:jO,CO=function(e,t,r){for(var n=[],i=t;i<t+r;++i)n.push(("0"+e[i].toString(16)).slice(-2));return n.join("")},NO=TA?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):CO(e,t,r)}:CO,TO=function(e,t,r){for(var n=[],i=t;i<r;i++)n.push(String.fromCharCode(GO(e,i)));return n.join("")},PO=TA?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):TO(e,t,r)}:TO,AO=function(e,t){var r=KO(e,t);return r>0?PO(e,t+4,t+4+r-1):""},MO=AO,IO=function(e,t){var r=KO(e,t);return r>0?PO(e,t+4,t+4+r-1):""},OO=IO,DO=function(e,t){var r=2*KO(e,t);return r>0?PO(e,t+4,t+4+r-1):""},RO=DO,LO=function(e,t){var r=KO(e,t);return r>0?EO(e,t+4,t+4+r):""},FO=LO,$O=function(e,t){var r=KO(e,t);return r>0?PO(e,t+4,t+4+r):""},BO=$O,zO=function(e,t){return function(e,t){for(var r=1-2*(e[t+7]>>>7),n=((127&e[t+7])<<4)+(e[t+6]>>>4&15),i=15&e[t+6],a=5;a>=0;--a)i=256*i+e[t+a];return 2047==n?0==i?r*(1/0):NaN:(0==n?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}(e,t)},UO=zO,VO=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function HO(){EO=function(e,t,r){return _A.utils.decode(1200,e.slice(t,r)).replace(FA,"")},PO=function(e,t,r){return _A.utils.decode(65001,e.slice(t,r))},MO=function(e,t){var r=KO(e,t);return r>0?_A.utils.decode(fA,e.slice(t+4,t+4+r-1)):""},OO=function(e,t){var r=KO(e,t);return r>0?_A.utils.decode(pA,e.slice(t+4,t+4+r-1)):""},RO=function(e,t){var r=2*KO(e,t);return r>0?_A.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},FO=function(e,t){var r=KO(e,t);return r>0?_A.utils.decode(1200,e.slice(t+4,t+4+r)):""},BO=function(e,t){var r=KO(e,t);return r>0?_A.utils.decode(65001,e.slice(t+4,t+4+r)):""}}TA&&(MO=function(e,t){if(!Buffer.isBuffer(e))return AO(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},OO=function(e,t){if(!Buffer.isBuffer(e))return IO(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},RO=function(e,t){if(!Buffer.isBuffer(e))return DO(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},FO=function(e,t){if(!Buffer.isBuffer(e))return LO(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},BO=function(e,t){if(!Buffer.isBuffer(e))return $O(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},UO=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):zO(e,t)},VO=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof _A&&HO();var GO=function(e,t){return e[t]},WO=function(e,t){return 256*e[t+1]+e[t]},qO=function(e,t){var r=256*e[t+1]+e[t];return r<32768?r:-1*(65535-r+1)},KO=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},ZO=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},YO=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function XO(e,t){var r,n,i,a,s,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,TA&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(s=0;s<e;++s)l+=String.fromCharCode(WO(this,o)),o+=2;e*=2;break;case"utf8":l=PO(this,this.l,this.l+e);break;case"utf16le":e*=2,l=EO(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof _A)return XO.call(this,e,"dbcs");l=_A.utils.decode(pA,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=MO(this,this.l),e=4+KO(this,this.l);break;case"lpstr-cp":l=OO(this,this.l),e=4+KO(this,this.l);break;case"lpwstr":l=RO(this,this.l),e=4+2*KO(this,this.l);break;case"lpp4":e=4+KO(this,this.l),l=FO(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+KO(this,this.l),l=BO(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(i=GO(this,this.l+e++));)c.push(SA(i));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(i=WO(this,this.l+e));)c.push(SA(i)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,s=0;s<e;++s){if(this.lens&&-1!==this.lens.indexOf(o))return i=GO(this,o),this.l=o+1,a=XO.call(this,e-s,i?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(SA(WO(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof _A){l=_A.utils.decode(pA,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,s=0;s!=e;++s){if(this.lens&&-1!==this.lens.indexOf(o))return i=GO(this,o),this.l=o+1,a=XO.call(this,e-s,i?"dbcs-cont":"sbcs-cont"),c.join("")+a;c.push(SA(GO(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return r=GO(this,this.l),this.l++,r;case 2:return r=("i"===t?qO:WO)(this,this.l),this.l+=2,r;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(r=(e>0?ZO:YO)(this,this.l),this.l+=4,r):(n=KO(this,this.l),this.l+=4,n);case 8:case-8:if("f"===t)return n=8==e?UO(this,this.l):UO([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:l=NO(this,this.l,e)}}return this.l+=e,l}var QO=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},JO=function(e,t,r){e[r]=255&t,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},eD=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255};function tD(e,t,r){var n=0,i=0;if("dbcs"===r){for(i=0;i!=t.length;++i)eD(this,t.charCodeAt(i),this.l+2*i);n=2*t.length}else if("sbcs"===r){if("undefined"!==typeof _A&&874==fA)for(i=0;i!=t.length;++i){var a=_A.utils.encode(fA,t.charAt(i));this[this.l+i]=a[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=255&t.charCodeAt(i);n=t.length}else{if("hex"===r){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===r){var s=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var o=t.charCodeAt(i);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}switch(e){case 1:n=1,this[this.l]=255&t;break;case 2:n=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:n=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:n=4,QO(this,t,this.l);break;case 8:if(n=8,"f"===r){!function(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,i=0,a=0,s=n?-t:t;isFinite(s)?0==s?i=a=0:(i=Math.floor(Math.log(s)/Math.LN2),a=s*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=255&a;e[r+6]=(15&i)<<4|15&a,e[r+7]=i>>4|n}(this,t,this.l);break}case 16:break;case-4:n=4,JO(this,t,this.l)}}return this.l+=n,this}function rD(e,t){var r=NO(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function nD(e,t){e.l=t,e.read_shift=XO,e.chk=rD,e.write_shift=tD}function iD(e,t){e.l+=t}function aD(e){var t=AA(e);return nD(t,0),t}function sD(e,t,r){if(e){var n,i,a;nD(e,e.l||0);for(var s=e.length,o=0,l=0;e.l<s;){128&(o=e.read_shift(1))&&(o=(127&o)+((127&e.read_shift(1))<<7));var c=hU[o]||hU[65535];for(a=127&(n=e.read_shift(1)),i=1;i<4&&128&n;++i)a+=(127&(n=e.read_shift(1)))<<7*i;l=e.l+a;var u=c.f&&c.f(e,a,r);if(e.l=l,t(u,c,o))return}}}function oD(){var e=[],t=TA?256:2048,r=function(e){var t=aD(e);return nD(t,0),t},n=r(t),i=function(){n&&(n.length>n.l&&((n=n.slice(0,n.l)).l=n.length),n.length>0&&e.push(n),n=null)},a=function(e){return n&&e<n.length-n.l?n:(i(),n=r(Math.max(e+1,t)))};return{next:a,push:function(e){i(),null==(n=e).l&&(n.l=n.length),a(t)},end:function(){return i(),LA(e)},_bufs:e}}function lD(e,t,r,n){var i,a=+t;if(!isNaN(a)){n||(n=hU[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var s=e.next(i);a<=127?s.write_shift(1,a):(s.write_shift(1,128+(127&a)),s.write_shift(1,a>>7));for(var o=0;4!=o;++o){if(!(n>=128)){s.write_shift(1,n);break}s.write_shift(1,128+(127&n)),n>>=7}n>0&&VO(r)&&e.push(r)}}function cD(e,t,r){var n=eI(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function uD(e,t,r){var n=eI(e);return n.s=cD(n.s,t.s,r),n.e=cD(n.e,t.s,r),n}function dD(e,t){if(e.cRel&&e.c<0)for(e=eI(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=eI(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=xD(e);return e.cRel||null==e.cRel||(r=r.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(r=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(r)),r}function hD(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?dD(e.s,t.biff)+":"+dD(e.e,t.biff):(e.s.rRel?"":"$")+fD(e.s.r)+":"+(e.e.rRel?"":"$")+fD(e.e.r):(e.s.cRel?"":"$")+gD(e.s.c)+":"+(e.e.cRel?"":"$")+gD(e.e.c)}function pD(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function fD(e){return""+(e+1)}function mD(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function gD(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function vD(e){for(var t=0,r=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:t-1}}function xD(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function yD(e){var t=e.indexOf(":");return-1==t?{s:vD(e),e:vD(e)}:{s:vD(e.slice(0,t)),e:vD(e.slice(t+1))}}function bD(e,t){return"undefined"===typeof t||"number"===typeof t?bD(e.s,e.e):("string"!==typeof e&&(e=xD(e)),"string"!==typeof t&&(t=xD(t)),e==t?e:e+":"+t)}function wD(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,a=e.length;for(r=0;n<a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.s.c=--r,r=0;n<a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(t.s.r=--r,n===a||10!=i)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.e.c=--r,r=0;n!=a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return t.e.r=--r,t}function _D(e,t){var r="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=CM(e.z,r?VM(t):t)}catch(W){}try{return e.w=CM((e.XF||{}).numFmtId||(r?14:0),r?VM(t):t)}catch(W){return""+t}}function kD(e,t,r){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),"e"==e.t?lR[e.v]||e.v:_D(e,void 0==t?e.v:t))}function SD(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function jD(e,t,r){var n=r||{},i=e?Array.isArray(e):n.dense;var a=e||(i?[]:{}),s=0,o=0;if(a&&null!=n.origin){if("number"==typeof n.origin)s=n.origin;else{var l="string"==typeof n.origin?vD(n.origin):n.origin;s=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var u=wD(a["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),-1==s&&(c.e.r=s=u.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[d].length;++h)if("undefined"!==typeof t[d][h]){var p={v:t[d][h]},f=s+d,m=o+h;if(c.s.r>f&&(c.s.r=f),c.s.c>m&&(c.s.c=m),c.e.r<f&&(c.e.r=f),c.e.c<m&&(c.e.c=m),!t[d][h]||"object"!==typeof t[d][h]||Array.isArray(t[d][h])||t[d][h]instanceof Date)if(Array.isArray(p.v)&&(p.f=t[d][h][1],p.v=p.v[0]),null===p.v)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else{if(!n.sheetStubs)continue;p.t="z"}else"number"===typeof p.v?p.t="n":"boolean"===typeof p.v?p.t="b":p.v instanceof Date?(p.z=n.dateNF||ZA[14],n.cellDates?(p.t="d",p.w=CM(p.z,VM(p.v))):(p.t="n",p.v=VM(p.v),p.w=CM(p.z,p.v))):p.t="s";else p=t[d][h];if(i)a[f]||(a[f]=[]),a[f][m]&&a[f][m].z&&(p.z=a[f][m].z),a[f][m]=p;else{var g=xD({c:m,r:f});a[g]&&a[g].z&&(p.z=a[g].z),a[g]=p}}}return c.s.c<1e7&&(a["!ref"]=bD(c)),a}function ED(e,t){return jD(null,e,t)}function CD(e,t){return t||(t=aD(4)),t.write_shift(4,e),t}function ND(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function TD(e,t){var r=!1;return null==t&&(r=!0,t=aD(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function PD(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function AD(e,t){var r=e.l,n=e.read_shift(1),i=ND(e),a=[],s={t:i,h:i};if(0!==(1&n)){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(PD(e));s.r=a}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}var MD=AD;function ID(e,t){var r=!1;return null==t&&(r=!0,t=aD(23+4*e.t.length)),t.write_shift(1,1),TD(e.t,t),t.write_shift(4,1),function(e,t){t||(t=aD(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function OD(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function DD(e,t){return null==t&&(t=aD(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function RD(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function LD(e,t){return null==t&&(t=aD(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var FD=ND,$D=TD;function BD(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function zD(e,t){var r=!1;return null==t&&(r=!0,t=aD(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var UD=ND,VD=BD,HD=zD;function GD(e){var t=e.slice(e.l,e.l+4),r=1&t[0],n=2&t[0];e.l+=4;var i=0===n?UO([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):ZO(t,0)>>2;return r?i/100:i}function WD(e,t){null==t&&(t=aD(4));var r=0,n=0,i=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?n=1:i==(0|i)&&i>=-(1<<29)&&i<1<<29&&(n=1,r=1),!n)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((r?i:e)<<2)+(r+2))}function qD(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var KD=qD,ZD=function(e,t){return t||(t=aD(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function YD(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function XD(e,t){return(t||aD(8)).write_shift(8,e,"f")}function QD(e,t){if(t||(t=aD(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),e.rgb&&null==e.theme){var n=e.rgb||"FFFFFF";"number"==typeof n&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}function JD(e,t){var r=e.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[e.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return e.l-=4,e.read_shift(0,1==t?"lpstr":"lpwstr")}var eR=80,tR=[eR,81],rR={1:{n:"CodePage",t:2},2:{n:"Category",t:eR},3:{n:"PresentationFormat",t:eR},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:eR},15:{n:"Company",t:eR},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:eR},27:{n:"ContentStatus",t:eR},28:{n:"Language",t:eR},29:{n:"Version",t:eR},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},nR={1:{n:"CodePage",t:2},2:{n:"Title",t:eR},3:{n:"Subject",t:eR},4:{n:"Author",t:eR},5:{n:"Keywords",t:eR},6:{n:"Comments",t:eR},7:{n:"Template",t:eR},8:{n:"LastAuthor",t:eR},9:{n:"RevNumber",t:eR},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:eR},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},iR={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},aR=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function sR(e){return e.map((function(e){return[e>>16&255,e>>8&255,255&e]}))}var oR=eI(sR([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),lR={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},cR={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},uR={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},dR={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function hR(e,t){var r,n=function(e){for(var t=[],r=FM(e),n=0;n!==r.length;++n)null==t[e[r[n]]]&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}(uR),i=[];i[i.length]=xI,i[i.length]=QI("Types",null,{xmlns:aO,"xmlns:xsd":fO,"xmlns:xsi":pO}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map((function(e){return QI("Default",null,{Extension:e[0],ContentType:e[1]})})));var a=function(n){e[n]&&e[n].length>0&&(r=e[n][0],i[i.length]=QI("Override",null,{PartName:("/"==r[0]?"":"/")+r,ContentType:dR[n][t.bookType]||dR[n].xlsx}))},s=function(r){(e[r]||[]).forEach((function(e){i[i.length]=QI("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:dR[r][t.bookType]||dR[r].xlsx})}))},o=function(t){(e[t]||[]).forEach((function(e){i[i.length]=QI("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:n[t][0]})}))};return a("workbooks"),s("sheets"),s("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),s("metadata"),o("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var pR={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function fR(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function mR(e,t){var r={"!id":{}};if(!e)return r;"/"!==t.charAt(0)&&(t="/"+t);var n={};return(e.match(wI)||[]).forEach((function(e){var i=SI(e);if("<Relationship"===i[0]){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var s="External"===i.TargetMode?i.Target:vI(i.Target,t);r[s]=a,n[i.Id]=a}})),r["!id"]=n,r}function gR(e){var t=[xI,QI("Relationships",null,{xmlns:sO})];return FM(e["!id"]).forEach((function(r){t[t.length]=QI("Relationship",null,e["!id"][r])})),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function vR(e,t,r,n,i,a){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=n,i.Target=r,a?i.TargetMode=a:[pR.HLINK,pR.XPATH,pR.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function xR(e,t,r){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function yR(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+hA.version+"</meta:generator></office:meta></office:document-meta>"}var bR=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],wR=function(){for(var e=new Array(bR.length),t=0;t<bR.length;++t){var r=bR[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function _R(e){var t={};e=zI(e);for(var r=0;r<bR.length;++r){var n=bR[r],i=e.match(wR[r]);null!=i&&i.length>0&&(t[n[1]]=NI(i[1])),"date"===n[2]&&t[n[1]]&&(t[n[1]]=QM(t[n[1]]))}return t}function kR(e,t,r,n,i){null==i[e]&&null!=t&&""!==t&&(i[e]=t,t=AI(t),n[n.length]=r?QI(e,t,r):YI(e,t))}function SR(e,t){var r=t||{},n=[xI,QI("cp:coreProperties",null,{"xmlns:cp":rO,"xmlns:dc":lO,"xmlns:dcterms":cO,"xmlns:dcmitype":uO,"xmlns:xsi":pO})],i={};if(!e&&!r.Props)return n.join("");e&&(null!=e.CreatedDate&&kR("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:JI(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),null!=e.ModifiedDate&&kR("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:JI(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var a=0;a!=bR.length;++a){var s=bR[a],o=r.Props&&null!=r.Props[s[1]]?r.Props[s[1]]:e?e[s[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&kR(s[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var jR=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],ER=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function CR(e,t,r,n){var i=[];if("string"==typeof e)i=KI(e,n);else for(var a=0;a<e.length;++a)i=i.concat(e[a].map((function(e){return{v:e}})));var s="string"==typeof t?KI(t,n).map((function(e){return e.v})):t,o=0,l=0;if(s.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"\u5de5\u4f5c\u8868":case"\u041b\u0438\u0441\u0442\u044b":case"\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644":case"\u30ef\u30fc\u30af\u30b7\u30fc\u30c8":case"\u05d2\u05dc\u05d9\u05d5\u05e0\u05d5\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4":case"Arbeitsbl\xe4tter":case"\xc7al\u0131\u015fma Sayfalar\u0131":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de c\xe1lculo":case"Planilhas":case"Regneark":case"Hojas de c\xe1lculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=s.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"\u540d\u524d\u4ed8\u304d\u4e00\u89a7":case"Benannte Bereiche":case"Navngivne omr\xe5der":r.NamedRanges=l,r.DefinedNames=s.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=s.slice(o,o+l)}o+=l}}function NR(e){var t=[],r=QI;return e||(e={}),e.Application="SheetJS",t[t.length]=xI,t[t.length]=QI("Properties",null,{xmlns:iO,"xmlns:vt":hO}),jR.forEach((function(n){if(void 0!==e[n[1]]){var i;switch(n[2]){case"string":i=AI(String(e[n[1]]));break;case"bool":i=e[n[1]]?"true":"false"}void 0!==i&&(t[t.length]=r(n[0],i))}})),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map((function(e){return"<vt:lpstr>"+AI(e)+"</vt:lpstr>"})).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var TR=/<[^>]+>[^<]*/g;function PR(e){var t=[xI,QI("Properties",null,{xmlns:nO,"xmlns:vt":hO})];if(!e)return t.join("");var r=1;return FM(e).forEach((function(n){++r,t[t.length]=QI("property",function(e,t){switch(typeof e){case"string":var r=QI("vt:lpwstr",AI(e));return t&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return QI((0|e)==e?"vt:i4":"vt:r8",AI(String(e)));case"boolean":return QI("vt:bool",e?"true":"false")}if(e instanceof Date)return QI("vt:filetime",JI(e));throw new Error("Unable to serialize "+e)}(e[n],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:AI(n)})})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var AR,MR={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function IR(e,t,r){AR||(AR=BM(MR)),e[t=AR[t]||t]=r}function OR(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date(1e3*(r/1e7*Math.pow(2,32)+t/1e7-11644473600)).toISOString().replace(/\.000/,"")}function DR(e,t,r){var n=e.l,i=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return i}function RR(e,t,r){var n=e.read_shift(0,"lpwstr");return r&&(e.l+=4-(n.length+1&3)&3),n}function LR(e,t,r){return 31===t?RR(e):DR(e,0,r)}function FR(e,t,r){return LR(e,t,!1===r?0:4)}function $R(e){var t=e.l,r=UR(e,81);return 0==e[e.l]&&0==e[e.l+1]&&e.l-t&2&&(e.l+=2),[r,UR(e,3)]}function BR(e,t){for(var r=e.read_shift(4),n={},i=0;i!=r;++i){var a=e.read_shift(4),s=e.read_shift(4);n[a]=e.read_shift(s,1200===t?"utf16le":"utf8").replace(FA,"").replace($A,"!"),1200===t&&s%2&&(e.l+=2)}return 3&e.l&&(e.l=e.l>>3<<2),n}function zR(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(3&t)>0&&(e.l+=4-(3&t)&3),r}function UR(e,t,r){var n,i=e.read_shift(2),a=r||{};if(e.l+=2,12!==t&&i!==t&&-1===tR.indexOf(t)&&(4126!=(65534&t)||4126!=(65534&i)))throw new Error("Expected type "+t+" saw "+i);switch(12===t?i:t){case 2:return n=e.read_shift(2,"i"),a.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i");case 11:return 0!==e.read_shift(4);case 19:return n=e.read_shift(4);case 30:return DR(e,0,4).replace(FA,"");case 31:return RR(e);case 64:return OR(e);case 65:return zR(e);case 71:return function(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}(e);case 80:return FR(e,i,!a.raw).replace(FA,"");case 81:return function(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return LR(e,t,0)}(e,i).replace(FA,"");case 4108:return function(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push($R(e));return r}(e);case 4126:case 4127:return 4127==i?function(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var i=e.l;r[n]=e.read_shift(0,"lpwstr").replace(FA,""),e.l-i&2&&(e.l+=2)}return r}(e):function(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(FA,"");return r}(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+i)}}function VR(e,t){var r=aD(4),n=aD(4);switch(r.write_shift(4,80==e?31:e),e){case 3:n.write_shift(-4,t);break;case 5:(n=aD(8)).write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,r=t%Math.pow(2,32),n=(t-r)/Math.pow(2,32);n*=1e7;var i=(r*=1e7)/Math.pow(2,32)|0;i>0&&(r%=Math.pow(2,32),n+=i);var a=aD(8);return a.write_shift(4,r),a.write_shift(4,n),a}(t);break;case 31:case 80:for((n=aD(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return LA([r,n])}function HR(e,t){var r=e.l,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0,o=0,l=-1,c={};for(s=0;s!=i;++s){var u=e.read_shift(4),d=e.read_shift(4);a[s]=[u,d+r]}a.sort((function(e,t){return e[1]-t[1]}));var h={};for(s=0;s!=i;++s){if(e.l!==a[s][1]){var p=!0;if(s>0&&t)switch(t[a[s-1][0]].t){case 2:e.l+2===a[s][1]&&(e.l+=2,p=!1);break;case 80:case 4108:e.l<=a[s][1]&&(e.l=a[s][1],p=!1)}if((!t||0==s)&&e.l<=a[s][1]&&(p=!1,e.l=a[s][1]),p)throw new Error("Read Error: Expected address "+a[s][1]+" at "+e.l+" :"+s)}if(t){var f=t[a[s][0]];if(h[f.n]=UR(e,f.t,{raw:!0}),"version"===f.p&&(h[f.n]=String(h[f.n]>>16)+"."+("0000"+String(65535&h[f.n])).slice(-4)),"CodePage"==f.n)switch(h[f.n]){case 0:h[f.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:xA(o=h[f.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[f.n])}}else if(1===a[s][0]){if(o=h.CodePage=UR(e,2),xA(o),-1!==l){var m=e.l;e.l=a[l][1],c=BR(e,o),e.l=m}}else if(0===a[s][0]){if(0===o){l=s,e.l=a[s+1][1];continue}c=BR(e,o)}else{var g,v=c[a[s][0]];switch(e[e.l]){case 65:e.l+=4,g=zR(e);break;case 30:case 31:e.l+=4,g=FR(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,g=e.read_shift(4,"i");break;case 19:e.l+=4,g=e.read_shift(4);break;case 5:e.l+=4,g=e.read_shift(8,"f");break;case 11:e.l+=4,g=XR(e,4);break;case 64:e.l+=4,g=QM(OR(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=g}}return e.l=r+n,h}var GR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function WR(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function qR(e,t,r){var n=aD(8),i=[],a=[],s=8,o=0,l=aD(8),c=aD(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),i.push(c),s+=8+l.length,!t){(c=aD(8)).write_shift(4,0),i.unshift(c);var u=[aD(4)];for(u[0].write_shift(4,e.length),o=0;o<e.length;++o){var d=e[o][0];for((l=aD(8+2*(d.length+1)+(d.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=LA(u),a.unshift(l),s+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(GR.indexOf(e[o][0])>-1||ER.indexOf(e[o][0])>-1)&&null!=e[o][1]){var h=e[o][1],p=0;if(t){var f=r[p=+t[e[o][0]]];if("version"==f.p&&"string"==typeof h){var m=h.split(".");h=(+m[0]<<16)+(+m[1]||0)}l=VR(f.t,h)}else{var g=WR(h);-1==g&&(g=31,h=String(h)),l=VR(g,h)}a.push(l),(c=aD(8)).write_shift(4,t?p:2+o),i.push(c),s+=8+l.length}var v=8*(a.length+1);for(o=0;o<a.length;++o)i[o].write_shift(4,v),v+=a[o].length;return n.write_shift(4,s),n.write_shift(4,a.length),LA([n].concat(i).concat(a))}function KR(e,t,r){var n=e.content;if(!n)return{};nD(n,0);var i,a,s,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==OM.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(1!==(i=n.read_shift(4))&&2!==i)throw new Error("Unrecognized #Sets: "+i);if(a=n.read_shift(16),o=n.read_shift(4),1===i&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);2===i&&(s=n.read_shift(16),l=n.read_shift(4));var d,h=HR(n,t),p={SystemIdentifier:c};for(var f in h)p[f]=h[f];if(p.FMTID=a,1===i)return p;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);try{d=HR(n,null)}catch(W){}for(f in d)p[f]=d[f];return p.FMTID=[a,s],p}function ZR(e,t,r,n,i,a){var s=aD(i?68:48),o=[s];s.write_shift(2,65534),s.write_shift(2,0),s.write_shift(4,842412599),s.write_shift(16,OM.utils.consts.HEADER_CLSID,"hex"),s.write_shift(4,i?2:1),s.write_shift(16,t,"hex"),s.write_shift(4,i?68:48);var l=qR(e,r,n);if(o.push(l),i){var c=qR(i,null,null);s.write_shift(16,a,"hex"),s.write_shift(4,68+l.length),o.push(c)}return LA(o)}function YR(e,t){return e.read_shift(t),null}function XR(e,t){return 1===e.read_shift(t)}function QR(e,t){return t||(t=aD(2)),t.write_shift(2,+!!e),t}function JR(e){return e.read_shift(2,"u")}function eL(e,t){return t||(t=aD(2)),t.write_shift(2,e),t}function tL(e,t){return function(e,t,r){for(var n=[],i=e.l+t;e.l<i;)n.push(r(e,i-e.l));if(i!==e.l)throw new Error("Slurp error");return n}(e,t,JR)}function rL(e,t,r){return r||(r=aD(2)),r.write_shift(1,"e"==t?+e:+!!e),r.write_shift(1,"e"==t?1:0),r}function nL(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont",a=pA;(r&&r.biff>=8&&(pA=1200),r&&8!=r.biff)?12==r.biff&&(i="wstr"):e.read_shift(1)&&(i="dbcs-cont");r.biff>=2&&r.biff<=5&&(i="cpstr");var s=n?e.read_shift(n,i):"";return pA=a,s}function iL(e){var t=pA;pA=1200;var r,n=e.read_shift(2),i=e.read_shift(1),a=4&i,s=8&i,o=1+(1&i),l=0,c={};s&&(l=e.read_shift(2)),a&&(r=e.read_shift(4));var u=2==o?"dbcs-cont":"sbcs-cont",d=0===n?"":e.read_shift(n,u);return s&&(e.l+=4*l),a&&(e.l+=r),c.t=d,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),pA=t,c}function aL(e){var t=e.t||"",r=aD(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=aD(2*t.length);return n.write_shift(2*t.length,t,"utf16le"),LA([r,n])}function sL(e,t,r){if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function oL(e,t,r){var n=e.read_shift(r&&2==r.biff?1:2);return 0===n?(e.l++,""):sL(e,n,r)}function lL(e,t,r){if(r.biff>5)return oL(e,0,r);var n=e.read_shift(1);return 0===n?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function cL(e,t,r){return r||(r=aD(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function uL(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return function(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,"795881f43b1d7f48af2c825dc4852763"===e.read_shift(16)&&(n=!0),e.l=r);var i=e.read_shift((n?t-24:t)>>1,"utf16le").replace(FA,"");return n&&(e.l+=24),i}(e);case"0303000000000000c000000000000046":return function(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,57005!=e.read_shift(2))throw new Error("Bad FileMoniker");if(0===e.read_shift(4))return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(3!=e.read_shift(2))throw new Error("Bad FileMoniker");return r+e.read_shift(i>>1,"utf16le").replace(FA,"")}(e);default:throw new Error("Unsupported Moniker "+r)}}function dL(e){var t=e.read_shift(4);return t>0?e.read_shift(t,"utf16le").replace(FA,""):""}function hL(e,t){t||(t=aD(6+2*e.length)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function pL(e){var t=aD(512),r=0,n=e.Target;"file://"==n.slice(0,7)&&(n=n.slice(7));var i=n.indexOf("#"),a=i>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3}t.write_shift(4,2),t.write_shift(4,a);var s=[8,6815827,6619237,4849780,83];for(r=0;r<s.length;++r)t.write_shift(4,s[r]);if(28==a)hL(n=n.slice(1),t);else if(2&a){for(s="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));var o=i>-1?n.slice(0,i):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),8&a&&hL(i>-1?n.slice(i+1):"",t)}else{for(s="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<s.length;++r)t.write_shift(1,parseInt(s[r],16));for(var l=0;"../"==n.slice(3*l,3*l+3)||"..\\"==n.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,255&n.charCodeAt(r+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function fL(e){return[e.read_shift(1),e.read_shift(1),e.read_shift(1),e.read_shift(1)]}function mL(e,t){var r=fL(e);return r[3]=0,r}function gL(e){return{r:e.read_shift(2),c:e.read_shift(2),ixfe:e.read_shift(2)}}function vL(e,t,r,n){return n||(n=aD(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function xL(e,t,r){var n=r.biff>8?4:2;return[e.read_shift(n),e.read_shift(n,"i"),e.read_shift(n,"i")]}function yL(e){return[e.read_shift(2),GD(e)]}function bL(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:r}}}function wL(e,t){return t||(t=aD(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function _L(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(1),r:t},e:{c:e.read_shift(1),r:r}}}var kL=_L;function SL(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function jL(e){e.l+=2,e.l+=e.read_shift(2)}var EL={0:jL,4:jL,5:jL,6:jL,7:function(e){return e.l+=4,e.cf=e.read_shift(2),{}},8:jL,9:jL,10:jL,11:jL,12:jL,13:function(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t},14:jL,15:jL,16:jL,17:jL,18:jL,19:jL,20:jL,21:SL};function CL(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),(t-=2)>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function NL(e,t,r){var n=1536,i=16;switch(r.bookType){case"biff8":case"xla":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;default:throw new Error("unsupported BIFF version")}var a=aD(i);return a.write_shift(2,n),a.write_shift(2,t),i>4&&a.write_shift(2,29282),i>6&&a.write_shift(2,1997),i>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function TL(e,t){var r=!t||t.biff>=8?2:1,n=aD(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function PL(e,t,r){var n=0;r&&2==r.biff||(n=e.read_shift(2));var i=e.read_shift(2);return r&&2==r.biff&&(n=1-(i>>15),i&=32767),[{Unsynced:1&n,DyZero:(2&n)>>1,ExAsc:(4&n)>>2,ExDsc:(8&n)>>3},i]}function AL(e,t,r,n){var i=r&&5==r.biff;n||(n=aD(i?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(i?1:2,t.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return null==a.l&&(a.l=a.length),a}var ML=lL;function IL(e,t,r){var n=e.l+t,i=8!=r.biff&&r.biff?2:4,a=e.read_shift(i),s=e.read_shift(i),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:s,c:l}}}function OL(e,t,r,n){var i=r&&5==r.biff;n||(n=aD(i?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&i&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function DL(e,t,r){var n=gL(e);2!=r.biff&&9!=t||++e.l;var i=function(e){var t=e.read_shift(1);return 1===e.read_shift(1)?t:1===t}(e);return n.val=i,n.t=!0===i||!1===i?"b":"e",n}var RL=function(e,t,r){return 0===t?"":lL(e,0,r)};function LL(e,t,r){var n,i=e.read_shift(2),a={fBuiltIn:1&i,fWantAdvise:i>>>1&1,fWantPict:i>>>2&1,fOle:i>>>3&1,fOleLink:i>>>4&1,cf:i>>>5&1023,fIcon:i>>>15&1};return 14849===r.sbcch&&(n=function(e,t,r){e.l+=4,t-=4;var n=e.l+t,i=nL(e,0,r),a=e.read_shift(2);if(a!==(n-=e.l))throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,i}(e,t-2,r)),a.body=n||e.read_shift(t-2),"string"===typeof n&&(a.Name=n),a}var FL=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function $L(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1),o=e.read_shift(r&&2==r.biff?1:2),l=0;(!r||r.biff>=5)&&(5!=r.biff&&(e.l+=2),l=e.read_shift(2),5==r.biff&&(e.l+=2),e.l+=4);var c=sL(e,s,r);32&i&&(c=FL[c.charCodeAt(0)]);var u=n-e.l;r&&2==r.biff&&--u;var d=n!=e.l&&0!==o&&u>0?function(e,t,r,n){var i,a=e.l+t,s=J$(e,n,r);a!==e.l&&(i=Q$(e,a-e.l,s,r));return[s,i]}(e,u,r,o):[];return{chKey:a,Name:c,itab:l,rgce:d}}function BL(e,t,r){if(r.biff<8)return function(e,t,r){3==e[e.l+1]&&e[e.l]++;var n=nL(e,0,r);return 3==n.charCodeAt(0)?n.slice(1):n}(e,0,r);for(var n=[],i=e.l+t,a=e.read_shift(r.biff>8?4:2);0!==a--;)n.push(xL(e,r.biff,r));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return n}function zL(e,t,r){var n=kL(e,6);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,aB(e,t,r)]}var UL={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var i=e.read_shift(1);return e.l+=i,e.l=r,{fmt:n}}};function VL(e){var t=aD(24),r=vD(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(n[i],16));return LA([t,pL(e[1])])}function HL(e){var t=e[1].Tooltip,r=aD(10+2*(t.length+1));r.write_shift(2,2048);var n=vD(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var i=0;i<t.length;++i)r.write_shift(2,t.charCodeAt(i));return r.write_shift(2,0),r}function GL(e,t,r){if(!r.cellStyles)return iD(e,t);var n=r&&r.biff>=12?4:2,i=e.read_shift(n),a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);2==n&&(e.l+=2);var c={s:i,e:a,w:s,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}var WL=gL,qL=tL,KL=oL;var ZL=[2,3,48,49,131,139,140,245],YL=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=BM({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(t,r){var n=r||{};n.dateNF||(n.dateNF="yyyymmdd");var i=ED(function(t,r){var n=[],i=AA(1);switch(r.type){case"base64":i=IA(NA(t));break;case"binary":i=IA(t);break;case"buffer":case"array":i=t}nD(i,0);var a=i.read_shift(1),s=!!(136&a),o=!1,l=!1;switch(a){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,s=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+a.toString(16))}var c=0,u=521;2==a&&(c=i.read_shift(2)),i.l+=3,2!=a&&(c=i.read_shift(4)),c>1048576&&(c=1e6),2!=a&&(u=i.read_shift(2));var d=i.read_shift(2),h=r.codepage||1252;2!=a&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(h=e[i[i.l]]),i.l+=1,i.l+=2),l&&(i.l+=36);for(var p=[],f={},m=Math.min(i.length,2==a?521:u-10-(o?264:0)),g=l?32:11;i.l<m&&13!=i[i.l];)switch((f={}).name=_A.utils.decode(h,i.slice(i.l,i.l+g)).replace(/[\u0000\r\n].*$/g,""),i.l+=g,f.type=String.fromCharCode(i.read_shift(1)),2==a||l||(f.offset=i.read_shift(4)),f.len=i.read_shift(1),2==a&&(f.offset=i.read_shift(2)),f.dec=i.read_shift(1),f.name.length&&p.push(f),2!=a&&(i.l+=l?13:14),f.type){case"B":o&&8==f.len||!r.WTF||console.log("Skipping "+f.name+":"+f.type);break;case"G":case"P":r.WTF&&console.log("Skipping "+f.name+":"+f.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+f.type)}if(13!==i[i.l]&&(i.l=u-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=u;var v=0,x=0;for(n[0]=[],x=0;x!=p.length;++x)n[0][x]=p[x].name;for(;c-- >0;)if(42!==i[i.l])for(++i.l,n[++v]=[],x=0,x=0;x!=p.length;++x){var y=i.slice(i.l,i.l+p[x].len);i.l+=p[x].len,nD(y,0);var b=_A.utils.decode(h,y);switch(p[x].type){case"C":b.trim().length&&(n[v][x]=b.replace(/\s+$/,""));break;case"D":8===b.length?n[v][x]=new Date(+b.slice(0,4),+b.slice(4,6)-1,+b.slice(6,8)):n[v][x]=b;break;case"F":n[v][x]=parseFloat(b.trim());break;case"+":case"I":n[v][x]=l?2147483648^y.read_shift(-4,"i"):y.read_shift(4,"i");break;case"L":switch(b.trim().toUpperCase()){case"Y":case"T":n[v][x]=!0;break;case"N":case"F":n[v][x]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+b+"|")}break;case"M":if(!s)throw new Error("DBF Unexpected MEMO for type "+a.toString(16));n[v][x]="##MEMO##"+(l?parseInt(b.trim(),10):y.read_shift(4));break;case"N":(b=b.replace(/\u0000/g,"").trim())&&"."!=b&&(n[v][x]=+b||0);break;case"@":n[v][x]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":n[v][x]=new Date(864e5*(y.read_shift(4)-2440588)+y.read_shift(4));break;case"Y":n[v][x]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":n[v][x]=-y.read_shift(-8,"f");break;case"B":if(o&&8==p[x].len){n[v][x]=y.read_shift(8,"f");break}case"G":case"P":y.l+=p[x].len;break;case"0":if("_NullFlags"===p[x].name)break;default:throw new Error("DBF Unsupported data type "+p[x].type)}}else i.l+=d;if(2!=a&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return r&&r.sheetRows&&(n=n.slice(0,r.sheetRows)),r.DBF=p,n}(t,n),n);return i["!cols"]=n.DBF.map((function(e){return{wch:e.len,DBF:e}})),delete n.DBF,i}var n={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return SD(r(e,t),t)}catch(W){if(t&&t.WTF)throw W}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function(e,r){var i=r||{};if(+i.codepage>=0&&xA(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var a=oD(),s=RV(e,{header:1,raw:!0,cellDates:!0}),o=s[0],l=s.slice(1),c=e["!cols"]||[],u=0,d=0,h=0,p=1;for(u=0;u<o.length;++u)if(((c[u]||{}).DBF||{}).name)o[u]=c[u].DBF.name,++h;else if(null!=o[u]){if(++h,"number"===typeof o[u]&&(o[u]=o[u].toString(10)),"string"!==typeof o[u])throw new Error("DBF Invalid column name "+o[u]+" |"+typeof o[u]+"|");if(o.indexOf(o[u])!==u)for(d=0;d<1024;++d)if(-1==o.indexOf(o[u]+"_"+d)){o[u]+="_"+d;break}}var f=wD(e["!ref"]),m=[],g=[],v=[];for(u=0;u<=f.e.c-f.s.c;++u){var x="",y="",b=0,w=[];for(d=0;d<l.length;++d)null!=l[d][u]&&w.push(l[d][u]);if(0!=w.length&&null!=o[u]){for(d=0;d<w.length;++d){switch(typeof w[d]){case"number":y="B";break;case"string":default:y="C";break;case"boolean":y="L";break;case"object":y=w[d]instanceof Date?"D":"C"}b=Math.max(b,String(w[d]).length),x=x&&x!=y?"C":y}b>250&&(b=250),"C"==(y=((c[u]||{}).DBF||{}).type)&&c[u].DBF.len>b&&(b=c[u].DBF.len),"B"==x&&"N"==y&&(x="N",v[u]=c[u].DBF.dec,b=c[u].DBF.len),g[u]="C"==x||"N"==y?b:n[x]||0,p+=g[u],m[u]=x}else m[u]="?"}var _=a.next(32);for(_.write_shift(4,318902576),_.write_shift(4,l.length),_.write_shift(2,296+32*h),_.write_shift(2,p),u=0;u<4;++u)_.write_shift(4,0);for(_.write_shift(4,(+t[fA]||3)<<8),u=0,d=0;u<o.length;++u)if(null!=o[u]){var k=a.next(32),S=(o[u].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,S,"sbcs"),k.write_shift(1,"?"==m[u]?"C":m[u],"sbcs"),k.write_shift(4,d),k.write_shift(1,g[u]||n[m[u]]||0),k.write_shift(1,v[u]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),d+=g[u]||n[m[u]]||0}var j=a.next(264);for(j.write_shift(4,13),u=0;u<65;++u)j.write_shift(4,0);for(u=0;u<l.length;++u){var E=a.next(p);for(E.write_shift(1,0),d=0;d<o.length;++d)if(null!=o[d])switch(m[d]){case"L":E.write_shift(1,null==l[u][d]?63:l[u][d]?84:70);break;case"B":E.write_shift(8,l[u][d]||0,"f");break;case"N":var C="0";for("number"==typeof l[u][d]&&(C=l[u][d].toFixed(v[d]||0)),h=0;h<g[d]-C.length;++h)E.write_shift(1,32);E.write_shift(1,C,"sbcs");break;case"D":l[u][d]?(E.write_shift(4,("0000"+l[u][d].getFullYear()).slice(-4),"sbcs"),E.write_shift(2,("00"+(l[u][d].getMonth()+1)).slice(-2),"sbcs"),E.write_shift(2,("00"+l[u][d].getDate()).slice(-2),"sbcs")):E.write_shift(8,"00000000","sbcs");break;case"C":var N=String(null!=l[u][d]?l[u][d]:"").slice(0,g[d]);for(E.write_shift(1,N,"sbcs"),h=0;h<g[d]-N.length;++h)E.write_shift(1,32)}}return a.next(1).write_shift(1,26),a.end()}}}(),XL=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+FM(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(t,r){var n=e[r];return"number"==typeof n?jA(n):n},n=function(e,t,r){var n=t.charCodeAt(0)-32<<4|r.charCodeAt(0)-48;return 59==n?e:jA(n)};function i(e,i){var a,s=e.split(/[\n\r]+/),o=-1,l=-1,c=0,u=0,d=[],h=[],p=null,f={},m=[],g=[],v=[],x=0;for(+i.codepage>=0&&xA(+i.codepage);c!==s.length;++c){x=0;var y,b=s[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),w=b.replace(/;;/g,"\0").split(";").map((function(e){return e.replace(/\u0000/g,";")})),_=w[0];if(b.length>0)switch(_){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==w[1].charAt(0)&&h.push(b.slice(3).replace(/;;/g,";"));break;case"C":var k=!1,S=!1,j=!1,E=!1,C=-1,N=-1;for(u=1;u<w.length;++u)switch(w[u].charAt(0)){case"A":case"G":break;case"X":l=parseInt(w[u].slice(1))-1,S=!0;break;case"Y":for(o=parseInt(w[u].slice(1))-1,S||(l=0),a=d.length;a<=o;++a)d[a]=[];break;case"K":'"'===(y=w[u].slice(1)).charAt(0)?y=y.slice(1,y.length-1):"TRUE"===y?y=!0:"FALSE"===y?y=!1:isNaN(rI(y))?isNaN(iI(y).getDate())||(y=QM(y)):(y=rI(y),null!==p&&kM(p)&&(y=qM(y))),"undefined"!==typeof _A&&"string"==typeof y&&"string"!=(i||{}).type&&(i||{}).codepage&&(y=_A.utils.decode(i.codepage,y)),k=!0;break;case"E":E=!0;var T=C$(w[u].slice(1),{r:o,c:l});d[o][l]=[d[o][l],T];break;case"S":j=!0,d[o][l]=[d[o][l],"S5S"];break;case"R":C=parseInt(w[u].slice(1))-1;break;case"C":N=parseInt(w[u].slice(1))-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+b)}if(k&&(d[o][l]&&2==d[o][l].length?d[o][l][0]=y:d[o][l]=y,p=null),j){if(E)throw new Error("SYLK shared formula cannot have own formula");var P=C>-1&&d[C][N];if(!P||!P[1])throw new Error("SYLK shared formula cannot find base");d[o][l][1]=P$(P[1],{r:o-C,c:l-N})}break;case"F":var A=0;for(u=1;u<w.length;++u)switch(w[u].charAt(0)){case"X":l=parseInt(w[u].slice(1))-1,++A;break;case"Y":for(o=parseInt(w[u].slice(1))-1,a=d.length;a<=o;++a)d[a]=[];break;case"M":x=parseInt(w[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":p=h[parseInt(w[u].slice(1))];break;case"W":for(v=w[u].slice(1).split(" "),a=parseInt(v[0],10);a<=parseInt(v[1],10);++a)x=parseInt(v[2],10),g[a-1]=0===x?{hidden:!0}:{wch:x},LF(g[a-1]);break;case"C":g[l=parseInt(w[u].slice(1))-1]||(g[l]={});break;case"R":m[o=parseInt(w[u].slice(1))-1]||(m[o]={}),x>0?(m[o].hpt=x,m[o].hpx=BF(x)):0===x&&(m[o].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+b)}A<1&&(p=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+b)}}return m.length>0&&(f["!rows"]=m),g.length>0&&(f["!cols"]=g),i&&i.sheetRows&&(d=d.slice(0,i.sheetRows)),[d,f]}function a(e,t){var r=function(e,t){switch(t.type){case"base64":return i(NA(e),t);case"binary":return i(e,t);case"buffer":return i(TA&&Buffer.isBuffer(e)?e.toString("binary"):DA(e),t);case"array":return i(JM(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),n=r[0],a=r[1],s=ED(n,t);return FM(a).forEach((function(e){s[e]=a[e]})),s}function s(e,t,r,n){var i="C;Y"+(r+1)+";X"+(n+1)+";K";switch(e.t){case"n":i+=e.v||0,e.f&&!e.F&&(i+=";E"+T$(e.f,{r:r,c:n}));break;case"b":i+=e.v?"TRUE":"FALSE";break;case"e":i+=e.w||e.v;break;case"d":i+='"'+(e.w||e.v)+'"';break;case"s":i+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return i}return e["|"]=254,{to_workbook:function(e,t){return SD(a(e,t),t)},to_sheet:a,from_sheet:function(e,t){var r,n,i=["ID;PWXL;N;E"],a=[],o=wD(e["!ref"]),l=Array.isArray(e),c="\r\n";i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),e["!cols"]&&(n=i,e["!cols"].forEach((function(e,t){var r="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?r+="0":("number"!=typeof e.width||e.wpx||(e.wpx=MF(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=IF(e.wpx)),"number"==typeof e.wch&&(r+=Math.round(e.wch)))," "!=r.charAt(r.length-1)&&n.push(r)}))),e["!rows"]&&function(e,t){t.forEach((function(t,r){var n="F;";t.hidden?n+="M0;":t.hpt?n+="M"+20*t.hpt+";":t.hpx&&(n+="M"+20*$F(t.hpx)+";"),n.length>2&&e.push(n+"R"+(r+1))}))}(i,e["!rows"]),i.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var u=o.s.r;u<=o.e.r;++u)for(var d=o.s.c;d<=o.e.c;++d){var h=xD({r:u,c:d});(r=l?(e[u]||[])[d]:e[h])&&(null!=r.v||r.f&&!r.F)&&a.push(s(r,0,u,d))}return i.join(c)+c+a.join(c)+c+"E"+c}}}(),QL=function(){function e(e,t){for(var r=e.split("\n"),n=-1,i=-1,a=0,s=[];a!==r.length;++a)if("BOT"!==r[a].trim()){if(!(n<0)){for(var o=r[a].trim().split(","),l=o[0],c=o[1],u=r[++a]||"";1&(u.match(/["]/g)||[]).length&&a<r.length-1;)u+="\n"+r[++a];switch(u=u.trim(),+l){case-1:if("BOT"===u){s[++n]=[],i=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?s[n][i]=!0:"FALSE"===u?s[n][i]=!1:isNaN(rI(c))?isNaN(iI(c).getDate())?s[n][i]=c:s[n][i]=QM(c):s[n][i]=rI(c),++i;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),s[n][i++]=""!==u?u:null}if("EOD"===u)break}}else s[++n]=[],i=0;return t&&t.sheetRows&&(s=s.slice(0,t.sheetRows)),s}function t(t,r){return ED(function(t,r){switch(r.type){case"base64":return e(NA(t),r);case"binary":return e(t,r);case"buffer":return e(TA&&Buffer.isBuffer(t)?t.toString("binary"):DA(t),r);case"array":return e(JM(t),r)}throw new Error("Unrecognized type "+r.type)}(t,r),r)}var r=function(){var e=function(e,t,r,n,i){e.push(t),e.push(r+","+n),e.push('"'+i.replace(/"/g,'""')+'"')},t=function(e,t,r,n){e.push(t+","+r),e.push(1==t?'"'+n.replace(/"/g,'""')+'"':n)};return function(r){var n,i=[],a=wD(r["!ref"]),s=Array.isArray(r);e(i,"TABLE",0,1,"sheetjs"),e(i,"VECTORS",0,a.e.r-a.s.r+1,""),e(i,"TUPLES",0,a.e.c-a.s.c+1,""),e(i,"DATA",0,0,"");for(var o=a.s.r;o<=a.e.r;++o){t(i,-1,0,"BOT");for(var l=a.s.c;l<=a.e.c;++l){var c=xD({r:o,c:l});if(n=s?(r[o]||[])[l]:r[c])switch(n.t){case"n":var u=n.w;u||null==n.v||(u=n.v),null==u?n.f&&!n.F?t(i,1,0,"="+n.f):t(i,1,0,""):t(i,0,u,"V");break;case"b":t(i,0,n.v?1:0,n.v?"TRUE":"FALSE");break;case"s":t(i,1,0,isNaN(n.v)?n.v:'="'+n.v+'"');break;case"d":n.w||(n.w=CM(n.z||ZA[14],VM(QM(n.v)))),t(i,0,n.w,"V");break;default:t(i,1,0,"")}else t(i,1,0,"")}}t(i,-1,0,"EOD");return i.join("\r\n")}}();return{to_workbook:function(e,r){return SD(t(e,r),r)},to_sheet:t,from_sheet:r}}(),JL=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(t,r){return ED(function(t,r){for(var n=t.split("\n"),i=-1,a=-1,s=0,o=[];s!==n.length;++s){var l=n[s].trim().split(":");if("cell"===l[0]){var c=vD(l[1]);if(o.length<=c.r)for(i=o.length;i<=c.r;++i)o[i]||(o[i]=[]);switch(i=c.r,a=c.c,l[2]){case"t":o[i][a]=e(l[3]);break;case"v":o[i][a]=+l[3];break;case"vtf":var u=l[l.length-1];case"vtc":"nl"===l[3]?o[i][a]=!!+l[4]:o[i][a]=+l[4],"vtf"==l[2]&&(o[i][a]=[o[i][a],u])}}}return r&&r.sheetRows&&(o=o.slice(0,r.sheetRows)),o}(t,r),r)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),s="--SocialCalcSpreadsheetControlSave--";function o(e){if(!e||!e["!ref"])return"";for(var r,n=[],i=[],a="",s=yD(e["!ref"]),o=Array.isArray(e),l=s.s.r;l<=s.e.r;++l)for(var c=s.s.c;c<=s.e.c;++c)if(a=xD({r:l,c:c}),(r=o?(e[l]||[])[c]:e[a])&&null!=r.v&&"z"!==r.t){switch(i=["cell",a,"t"],r.t){case"s":case"str":i.push(t(r.v));break;case"n":r.f?(i[2]="vtf",i[3]="n",i[4]=r.v,i[5]=t(r.f)):(i[2]="v",i[3]=r.v);break;case"b":i[2]="vt"+(r.f?"f":"c"),i[3]="nl",i[4]=r.v?"1":"0",i[5]=t(r.f||(r.v?"TRUE":"FALSE"));break;case"d":var u=VM(QM(r.v));i[2]="vtc",i[3]="nd",i[4]=""+u,i[5]=r.w||CM(r.z||ZA[14],u);break;case"e":continue}n.push(i.join(":"))}return n.push("sheet:c:"+(s.e.c-s.s.c+1)+":r:"+(s.e.r-s.s.r+1)+":tvf:1"),n.push("valueformat:1:text-wiki"),n.join("\n")}return{to_workbook:function(e,t){return SD(r(e,t),t)},to_sheet:r,from_sheet:function(e){return[n,i,a,i,o(e),s].join("\n")}}}(),eF=function(){function e(e,t,r,n,i){i.raw?t[r][n]=e:""===e||("TRUE"===e?t[r][n]=!0:"FALSE"===e?t[r][n]=!1:isNaN(rI(e))?isNaN(iI(e).getDate())?t[r][n]=e:t[r][n]=QM(e):t[r][n]=rI(e))}var t={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(e){for(var n={},i=!1,a=0,s=0;a<e.length;++a)34==(s=e.charCodeAt(a))?i=!i:!i&&s in t&&(n[s]=(n[s]||0)+1);for(a in s=[],n)Object.prototype.hasOwnProperty.call(n,a)&&s.push([n[a],a]);if(!s.length)for(a in n=r)Object.prototype.hasOwnProperty.call(n,a)&&s.push([n[a],a]);return s.sort((function(e,t){return e[0]-t[0]||r[e[1]]-r[t[1]]})),t[s.pop()[1]]||44}function i(e,t){var r=t||{},i="";var a=r.dense?[]:{},s={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(i=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(i=e.charAt(4),e=e.slice(6)):i=n(e.slice(0,1024)):i=r&&r.FS?r.FS:n(e.slice(0,1024));var o=0,l=0,c=0,u=0,d=0,h=i.charCodeAt(0),p=!1,f=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=r.dateNF?function(e){var t="number"==typeof e?ZA[e]:e;return t=t.replace(MM,"(\\d+)"),new RegExp("^"+t+"$")}(r.dateNF):null;function v(){var t=e.slice(u,d),n={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)n.t="z";else if(r.raw)n.t="s",n.v=t;else if(0===t.trim().length)n.t="s",n.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(n.t="s",n.v=t.slice(2,-1).replace(/""/g,'"')):!function(e){return 1!=e.length}(t)?(n.t="s",n.v=t):(n.t="n",n.f=t.slice(1));else if("TRUE"==t)n.t="b",n.v=!0;else if("FALSE"==t)n.t="b",n.v=!1;else if(isNaN(c=rI(t)))if(!isNaN(iI(t).getDate())||g&&t.match(g)){n.z=r.dateNF||ZA[14];var i=0;g&&t.match(g)&&(t=function(e,t,r){var n=-1,i=-1,a=-1,s=-1,o=-1,l=-1;(t.match(MM)||[]).forEach((function(e,t){var c=parseInt(r[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":n=c;break;case"d":a=c;break;case"h":s=c;break;case"s":l=c;break;case"m":s>=0?o=c:i=c}})),l>=0&&-1==o&&i>=0&&(o=i,i=-1);var c=(""+(n>=0?n:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var u=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==s&&-1==o&&-1==l?c:-1==n&&-1==i&&-1==a?u:c+"T"+u}(0,r.dateNF,t.match(g)||[]),i=1),r.cellDates?(n.t="d",n.v=QM(t,i)):(n.t="n",n.v=VM(QM(t,i))),!1!==r.cellText&&(n.w=CM(n.z,n.v instanceof Date?VM(n.v):n.v)),r.cellNF||delete n.z}else n.t="s",n.v=t;else n.t="n",!1!==r.cellText&&(n.w=t),n.v=c;if("z"==n.t||(r.dense?(a[o]||(a[o]=[]),a[o][l]=n):a[xD({c:l,r:o})]=n),u=d+1,m=e.charCodeAt(u),s.e.c<l&&(s.e.c=l),s.e.r<o&&(s.e.r=o),f==h)++l;else if(l=0,++o,r.sheetRows&&r.sheetRows<=o)return!0}e:for(;d<e.length;++d)switch(f=e.charCodeAt(d)){case 34:34===m&&(p=!p);break;case h:case 10:case 13:if(!p&&v())break e}return d-u>0&&v(),a["!ref"]=bD(s),a}function a(t,r){return r&&r.PRN?r.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?i(t,r):ED(function(t,r){var n=r||{},i=[];if(!t||0===t.length)return i;for(var a=t.split(/[\r\n]/),s=a.length-1;s>=0&&0===a[s].length;)--s;for(var o=10,l=0,c=0;c<=s;++c)-1==(l=a[c].indexOf(" "))?l=a[c].length:l++,o=Math.max(o,l);for(c=0;c<=s;++c){i[c]=[];var u=0;for(e(a[c].slice(0,o).trim(),i,c,u,n),u=1;u<=(a[c].length-o)/10+1;++u)e(a[c].slice(o+10*(u-1),o+10*u).trim(),i,c,u,n)}return n.sheetRows&&(i=i.slice(0,n.sheetRows)),i}(t,r),r):i(t,r)}function s(e,t){var r="",n="string"==t.type?[0,0,0,0]:SV(e,t);switch(t.type){case"base64":r=NA(e);break;case"binary":case"string":r=e;break;case"buffer":r=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof _A?_A.utils.decode(t.codepage,e):TA&&Buffer.isBuffer(e)?e.toString("binary"):DA(e);break;case"array":r=JM(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]?r=zI(r.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?r=zI(r):"binary"==t.type&&"undefined"!==typeof _A&&t.codepage&&(r=_A.utils.decode(t.codepage,_A.utils.encode(28591,r))),"socialcalc:version:"==r.slice(0,19)?JL.to_sheet("string"==t.type?r:zI(r),t):a(r,t)}return{to_workbook:function(e,t){return SD(s(e,t),t)},to_sheet:s,from_sheet:function(e){for(var t,r=[],n=wD(e["!ref"]),i=Array.isArray(e),a=n.s.r;a<=n.e.r;++a){for(var s=[],o=n.s.c;o<=n.e.c;++o){var l=xD({r:a,c:o});if((t=i?(e[a]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(kD(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";s.push(c+(0===o?" ":""))}else s.push("          ")}r.push(s.join(""))}return r.join("\n")}}}();var tF=function(){function e(e,t,r){if(e){nD(e,e.l||0);for(var n=r.Enum||v;e.l<e.length;){var i=e.read_shift(2),a=n[i]||n[65535],s=e.read_shift(2),o=e.l+s,l=a.f&&a.f(e,s,r);if(e.l=o,t(l,a,i))return}}}function t(t,r){if(!t)return t;var n=r||{};var i=n.dense?[]:{},a="Sheet1",s="",o=0,l={},c=[],u=[],d={s:{r:0,c:0},e:{r:0,c:0}},h=n.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])n.Enum=v,e(t,(function(e,t,r){switch(r){case 0:n.vers=e,e>=4096&&(n.qpro=!0);break;case 6:d=e;break;case 204:e&&(s=e);break;case 222:s=e;break;case 15:case 51:n.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==r&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=n.dateNF||ZA[14],n.cellDates&&(e[1].t="d",e[1].v=qM(e[1].v))),n.qpro&&e[3]>o&&(i["!ref"]=bD(d),l[a]=i,c.push(a),i=n.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],a=s||"Sheet"+(o+1),s="");var u=n.dense?(i[e[0].r]||[])[e[0].c]:i[xD(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}n.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[xD(e[0])]=e[1]}}),n);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);n.Enum=x,14==t[2]&&(n.qpro=!0,t.l=0),e(t,(function(e,t,r){switch(r){case 204:a=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(i["!ref"]=bD(d),l[a]=i,c.push(a),i=n.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],a="Sheet"+(o+1)),h>0&&e[0].r>=h)break;n.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[xD(e[0])]=e[1],d.e.c<e[0].c&&(d.e.c=e[0].c),d.e.r<e[0].r&&(d.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==o&&(a=e[1])}}),n)}if(i["!ref"]=bD(d),l[s||a]=i,c.push(s||a),!u.length)return{SheetNames:c,Sheets:l};for(var p={},f=[],m=0;m<u.length;++m)l[c[m]]?(f.push(u[m]||c[m]),p[u[m]]=l[u[m]]||l[c[m]]):(f.push(u[m]),p[u[m]]={"!ref":"A1"});return{SheetNames:f,Sheets:p}}function r(e,t,r){var n=[{c:0,r:0},{t:"n",v:0},0,0];return r.qpro&&20768!=r.vers?(n[0].c=e.read_shift(1),n[3]=e.read_shift(1),n[0].r=e.read_shift(2),e.l+=2):(n[2]=e.read_shift(1),n[0].c=e.read_shift(2),n[0].r=e.read_shift(2)),n}function n(e,t,n){var i=e.l+t,a=r(e,0,n);if(a[1].t="s",20768==n.vers){e.l++;var s=e.read_shift(1);return a[1].v=e.read_shift(s,"utf8"),a}return n.qpro&&e.l++,a[1].v=e.read_shift(i-e.l,"cstr"),a}function i(e,t,r){var n=aD(7+r.length);n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(1,39);for(var i=0;i<n.length;++i){var a=r.charCodeAt(i);n.write_shift(1,a>=128?95:a)}return n.write_shift(1,0),n}function a(e,t,r){var n=aD(7);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r,"i"),n}function s(e,t,r){var n=aD(13);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(8,r,"f"),n}function o(e,t,r){var n=32768&t;return t=(n?e:0)+((t&=-32769)>=8192?t-16384:t),(n?"":"$")+(r?gD(t):fD(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function d(e,t,r,n){var i=aD(6+n.length);i.write_shift(2,e),i.write_shift(1,r),i.write_shift(1,t),i.write_shift(1,39);for(var a=0;a<n.length;++a){var s=n.charCodeAt(a);i.write_shift(1,s>=128?95:s)}return i.write_shift(1,0),i}function h(e,t){var r=u(e),n=e.read_shift(4),i=e.read_shift(4),a=e.read_shift(2);if(65535==a)return 0===n&&3221225472===i?(r[1].t="e",r[1].v=15):0===n&&3489660928===i?(r[1].t="e",r[1].v=42):r[1].v=0,r;var s=32768&a;return a=(32767&a)-16446,r[1].v=(1-2*s)*(i*Math.pow(2,a+32)+n*Math.pow(2,a)),r}function p(e,t,r,n){var i=aD(14);if(i.write_shift(2,e),i.write_shift(1,r),i.write_shift(1,t),0==n)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var a,s=0,o=0,l=0;return n<0&&(s=1,n=-n),o=0|Math.log2(n),0==(2147483648&(l=(n/=Math.pow(2,o-31))>>>0))&&(++o,l=(n/=2)>>>0),n-=l,l|=2147483648,l>>>=0,a=(n*=Math.pow(2,32))>>>0,i.write_shift(4,a),i.write_shift(4,l),o+=16383+(s?32768:0),i.write_shift(2,o),i}function f(e,t){var r=u(e),n=e.read_shift(8,"f");return r[1].v=n,r}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var r=aD(5+e.length);r.write_shift(2,14e3),r.write_shift(2,t);for(var n=0;n<e.length;++n){var i=e.charCodeAt(n);r[r.l++]=i>127?95:i}return r[r.l++]=0,r}var v={0:{n:"BOF",f:JR},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,r){var n={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&r.qpro?(n.s.c=e.read_shift(1),e.l++,n.s.r=e.read_shift(2),n.e.c=e.read_shift(1),e.l++,n.e.r=e.read_shift(2),n):(n.s.c=e.read_shift(2),n.s.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),n.e.c=e.read_shift(2),n.e.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),65535==n.s.c&&(n.s.c=n.e.c=n.s.r=n.e.r=0),n)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,n){var i=r(e,0,n);return i[1].v=e.read_shift(2,"i"),i}},14:{n:"NUMBER",f:function(e,t,n){var i=r(e,0,n);return i[1].v=e.read_shift(8,"f"),i}},15:{n:"LABEL",f:n},16:{n:"FORMULA",f:function(e,t,n){var i=e.l+t,a=r(e,0,n);if(a[1].v=e.read_shift(8,"f"),n.qpro)e.l=i;else{var s=e.read_shift(2);!function(e,t){nD(e,0);var r=[],n=0,i="",a="",s="",u="";for(;e.l<e.length;){var d=e[e.l++];switch(d){case 0:r.push(e.read_shift(8,"f"));break;case 1:a=o(t[0].c,e.read_shift(2),!0),i=o(t[0].r,e.read_shift(2),!1),r.push(a+i);break;case 2:var h=o(t[0].c,e.read_shift(2),!0),p=o(t[0].r,e.read_shift(2),!1);a=o(t[0].c,e.read_shift(2),!0),i=o(t[0].r,e.read_shift(2),!1),r.push(h+p+":"+a+i);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:r.push("("+r.pop()+")");break;case 5:r.push(e.read_shift(2));break;case 6:for(var f="";d=e[e.l++];)f+=String.fromCharCode(d);r.push('"'+f.replace(/"/g,'""')+'"');break;case 8:r.push("-"+r.pop());break;case 23:r.push("+"+r.pop());break;case 22:r.push("NOT("+r.pop()+")");break;case 20:case 21:u=r.pop(),s=r.pop(),r.push(["AND","OR"][d-20]+"("+s+","+u+")");break;default:if(d<32&&c[d])u=r.pop(),s=r.pop(),r.push(s+c[d]+u);else{if(!l[d])return d<=7?console.error("WK1 invalid opcode "+d.toString(16)):d<=24?console.error("WK1 unsupported op "+d.toString(16)):d<=30?console.error("WK1 invalid opcode "+d.toString(16)):d<=115?console.error("WK1 unsupported function opcode "+d.toString(16)):console.error("WK1 unrecognized opcode "+d.toString(16));if(69==(n=l[d][1])&&(n=e[e.l++]),n>r.length)return void console.error("WK1 bad formula parse 0x"+d.toString(16)+":|"+r.join("|")+"|");var m=r.slice(-n);r.length-=n,r.push(l[d][0]+"("+m.join(",")+")")}}}1==r.length?t[1].f=""+r[0]:console.error("WK1 bad formula parse |"+r.join("|")+"|")}(e.slice(e.l,e.l+s),a),e.l+=s}return a}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:n},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var r=e[e.l++];r>t-1&&(r=t-1);for(var n="";n.length<r;)n+=String.fromCharCode(e[e.l++]);return n}},65535:{n:""}},x={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var r=u(e);return r[1].t="s",r[1].v=e.read_shift(t-4,"cstr"),r}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var r=u(e);r[1].v=e.read_shift(2);var n=r[1].v>>1;if(1&r[1].v)switch(7&n){case 0:n=5e3*(n>>3);break;case 1:n=500*(n>>3);break;case 2:n=(n>>3)/20;break;case 3:n=(n>>3)/200;break;case 4:n=(n>>3)/2e3;break;case 5:n=(n>>3)/2e4;break;case 6:n=(n>>3)/16;break;case 7:n=(n>>3)/64}return r[1].v=n,r}},25:{n:"FORMULA19",f:function(e,t){var r=h(e);return e.l+=t-14,r}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var r={},n=e.l+t;e.l<n;){var i=e.read_shift(2);if(14e3==i){for(r[i]=[0,""],r[i][0]=e.read_shift(2);e[e.l];)r[i][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return r}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var r=u(e),n=e.read_shift(4);return r[1].v=n>>6,r}},38:{n:"??"},39:{n:"NUMBER27",f:f},40:{n:"FORMULA28",f:function(e,t){var r=f(e);return e.l+=t-10,r}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,r){if(r.qpro&&!(t<21)){var n=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[n,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var r=t||{};if(+r.codepage>=0&&xA(+r.codepage),"string"==r.type)throw new Error("Cannot write WK1 to JS string");var n=oD(),o=wD(e["!ref"]),l=Array.isArray(e),c=[];fU(n,0,function(e){var t=aD(2);return t.write_shift(2,e),t}(1030)),fU(n,6,function(e){var t=aD(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var u=Math.min(o.e.r,8191),d=o.s.r;d<=u;++d)for(var h=fD(d),p=o.s.c;p<=o.e.c;++p){d===o.s.r&&(c[p]=gD(p));var f=c[p]+h,m=l?(e[d]||[])[p]:e[f];if(m&&"z"!=m.t)if("n"==m.t)(0|m.v)==m.v&&m.v>=-32768&&m.v<=32767?fU(n,13,a(d,p,m.v)):fU(n,14,s(d,p,m.v));else fU(n,15,i(d,p,kD(m).slice(0,239)))}return fU(n,1),n.end()},book_to_wk3:function(e,t){var r=t||{};if(+r.codepage>=0&&xA(+r.codepage),"string"==r.type)throw new Error("Cannot write WK3 to JS string");var n=oD();fU(n,0,function(e){var t=aD(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var r=0,n=0,i=0,a=0;a<e.SheetNames.length;++a){var s=e.SheetNames[a],o=e.Sheets[s];if(o&&o["!ref"]){++i;var l=yD(o["!ref"]);r<l.e.r&&(r=l.e.r),n<l.e.c&&(n=l.e.c)}}r>8191&&(r=8191);return t.write_shift(2,r),t.write_shift(1,i),t.write_shift(1,n),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var i=0,a=0;i<e.SheetNames.length;++i)(e.Sheets[e.SheetNames[i]]||{})["!ref"]&&fU(n,27,g(e.SheetNames[i],a++));var s=0;for(i=0;i<e.SheetNames.length;++i){var o=e.Sheets[e.SheetNames[i]];if(o&&o["!ref"]){for(var l=wD(o["!ref"]),c=Array.isArray(o),u=[],h=Math.min(l.e.r,8191),f=l.s.r;f<=h;++f)for(var m=fD(f),v=l.s.c;v<=l.e.c;++v){f===l.s.r&&(u[v]=gD(v));var x=u[v]+m,y=c?(o[f]||[])[v]:o[x];if(y&&"z"!=y.t)if("n"==y.t)fU(n,23,p(f,v,s,y.v));else fU(n,22,d(f,v,s,kD(y).slice(0,239)))}++s}}return fU(n,1),n.end()},to_workbook:function(e,r){switch(r.type){case"base64":return t(IA(NA(e)),r);case"binary":return t(IA(e),r);case"buffer":case"array":return t(e,r)}throw"Unsupported type "+r.type}}}();var rF=function(){var e=VI("t"),t=VI("rPr");function r(r){var n=r.match(e);if(!n)return{t:"s",v:""};var i={t:"s",v:NI(n[1])},a=r.match(t);return a&&(i.s=function(e){var t={},r=e.match(wI),n=0,i=!1;if(r)for(;n!=r.length;++n){var a=SI(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==a.val)break;t.cp=gA[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting"}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if("0"==a.val)break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if("0"==a.val)break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(47!==a[0].charCodeAt(1)&&!i)throw new Error("Unrecognized rich format "+a[0])}}return t}(a[1])),i}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(e){return e.replace(n,"").split(i).map(r).filter((function(e){return e.v}))}}(),nF=function(){var e=/(\r\n|\n)/g;function t(t){var r=[[],t.v,[]];return t.v?(t.s&&function(e,t,r){var n=[];e.u&&n.push("text-decoration: underline;"),e.uval&&n.push("text-underline-style:"+e.uval+";"),e.sz&&n.push("font-size:"+e.sz+"pt;"),e.outline&&n.push("text-effect: outline;"),e.shadow&&n.push("text-shadow: auto;"),t.push('<span style="'+n.join("")+'">'),e.b&&(t.push("<b>"),r.push("</b>")),e.i&&(t.push("<i>"),r.push("</i>")),e.strike&&(t.push("<s>"),r.push("</s>"));var i=e.valign||"";"superscript"==i||"super"==i?i="sup":"subscript"==i&&(i="sub"),""!=i&&(t.push("<"+i+">"),r.push("</"+i+">")),r.push("</span>")}(t.s,r[0],r[2]),r[0].join("")+r[1].replace(e,"<br/>")+r[2].join("")):""}return function(e){return e.map(t).join("")}}(),iF=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,aF=/<(?:\w+:)?r>/,sF=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function oF(e,t){var r=!t||t.cellHTML,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=NI(zI(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=zI(e),r&&(n.h=OI(n.t))):e.match(aF)&&(n.r=zI(e),n.t=NI(zI((e.replace(sF,"").match(iF)||[]).join("").replace(wI,""))),r&&(n.h=nF(rF(n.r)))),n):{t:""}}var lF=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,cF=/<(?:\w+:)?(?:si|sstItem)>/g,uF=/<\/(?:\w+:)?(?:si|sstItem)>/;var dF=/^\s|\s$|[\t\n\r]/;function hF(e,t){if(!t.bookSST)return"";var r=[xI];r[r.length]=QI("sst",null,{xmlns:mO[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(null!=e[n]){var i=e[n],a="<si>";i.r?a+=i.r:(a+="<t",i.t||(i.t=""),i.t.match(dF)&&(a+=' xml:space="preserve"'),a+=">"+AI(i.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}var pF=function(e,t){var r=!1;return null==t&&(r=!0,t=aD(15+4*e.t.length)),t.write_shift(1,0),TD(e.t,t),r?t.slice(0,t.l):t};function fF(e){var t=oD();lD(t,159,function(e,t){return t||(t=aD(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var r=0;r<e.length;++r)lD(t,19,pF(e[r]));return lD(t,160),t.end()}function mF(e){if("undefined"!==typeof _A)return _A.utils.encode(fA,e);for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function gF(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function vF(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},i=e.read_shift(4),a=[];i-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function xF(e){var t=function(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=gF(e,4),t.U=gF(e,4),t.W=gF(e,4),t}(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),4!=e.read_shift(4))throw new Error("Bad !Primary record");return t}function yF(e,t){var r=e.l+t,n={};n.Flags=63&e.read_shift(4),e.l+=4,n.AlgID=e.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=36==n.Flags;break;case 26625:i=4==n.Flags;break;case 0:i=16==n.Flags||4==n.Flags||36==n.Flags;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function bF(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function wF(e){if(36!=(63&e.read_shift(4)))throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4);return{t:"Std",h:yF(e,t),v:bF(e,e.length-e.l)}}function _F(){throw new Error("File is password-protected: ECMA-376 Extensible")}function kF(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(wI,(function(e){var r=SI(e);switch(jI(r[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":t.forEach((function(e){n[e]=r[e]}));break;case"<dataIntegrity":n.encryptedHmacKey=r.encryptedHmacKey,n.encryptedHmacValue=r.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"<keyEncryptor":n.uri=r.uri;break;case"<encryptedKey":n.encs.push(r);break;default:throw r[0]}})),n}function SF(e){var t,r,n=0,i=mF(e),a=i.length+1;for((t=AA(a))[0]=i.length,r=1;r!=a;++r)t[r]=i[r-1];for(r=a-1;r>=0;--r)n=((0===(16384&n)?0:1)|n<<1&32767)^t[r];return 52811^n}var jF=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(e,t){return 255&((r=e^t)/2|128*r);var r};return function(i){for(var a,s,o,l=mF(i),c=function(e){for(var n=t[e.length-1],i=104,a=e.length-1;a>=0;--a)for(var s=e[a],o=0;7!=o;++o)64&s&&(n^=r[i]),s*=2,--i;return n}(l),u=l.length,d=AA(16),h=0;16!=h;++h)d[h]=0;for(1===(1&u)&&(a=c>>8,d[u]=n(e[0],a),--u,a=255&c,s=l[l.length-1],d[u]=n(s,a));u>0;)a=c>>8,d[--u]=n(l[u],a),a=255&c,d[--u]=n(l[u],a);for(u=15,o=15-l.length;o>0;)a=c>>8,d[u]=n(e[o],a),--o,a=255&c,d[--u]=n(l[u],a),--u,--o;return d}}(),EF=function(e){var t=0,r=jF(e);return function(e){var n=function(e,t,r,n,i){var a,s;for(i||(i=t),n||(n=jF(e)),a=0;a!=t.length;++a)s=t[a],s=255&((s^=n[r])>>5|s<<3),i[a]=s,++r;return[i,r,n]}("",e,t,r);return t=n[1],n[0]}};function CF(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,1===n.Info?n.Data=function(e){var t={},r=t.EncryptionVersionInfo=gF(e,4);if(1!=r.Major||1!=r.Minor)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}(e):n.Data=function(e,t){var r={},n=r.EncryptionVersionInfo=gF(e,4);if(t-=4,2!=n.Minor)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var i=e.read_shift(4);return t-=4,r.EncryptionHeader=yF(e,i),t-=i,r.EncryptionVerifier=bF(e,t),r}(e,t),n}var NF=function(){function e(e,r){switch(r.type){case"base64":return t(NA(e),r);case"binary":return t(e,r);case"buffer":return t(TA&&Buffer.isBuffer(e)?e.toString("binary"):DA(e),r);case"array":return t(JM(e),r)}throw new Error("Unrecognized type "+r.type)}function t(e,t){var r=(t||{}).dense?[]:{},n=e.match(/\\trowd.*?\\row\b/g);if(!n.length)throw new Error("RTF missing table");var i={s:{c:0,r:0},e:{c:0,r:n.length-1}};return n.forEach((function(e,t){Array.isArray(r)&&(r[t]=[]);for(var n,a=/\\\w+\b/g,s=0,o=-1;n=a.exec(e);){if("\\cell"===n[0]){var l=e.slice(s,a.lastIndex-n[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(r)?r[t][o]=c:r[xD({r:t,c:o})]=c}}s=a.lastIndex}o>i.e.c&&(i.e.c=o)})),r["!ref"]=bD(i),r}return{to_workbook:function(t,r){return SD(e(t,r),r)},to_sheet:e,from_sheet:function(e){for(var t,r=["{\\rtf1\\ansi"],n=wD(e["!ref"]),i=Array.isArray(e),a=n.s.r;a<=n.e.r;++a){r.push("\\trowd\\trautofit1");for(var s=n.s.c;s<=n.e.c;++s)r.push("\\cellx"+(s+1));for(r.push("\\pard\\intbl"),s=n.s.c;s<=n.e.c;++s){var o=xD({r:a,c:s});(t=i?(e[a]||[])[s]:e[o])&&(null!=t.v||t.f&&!t.F)&&(r.push(" "+(t.w||(kD(t),t.w))),r.push("\\cell"))}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}}}();function TF(e){for(var t=0,r=1;3!=t;++t)r=256*r+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function PF(e,t){if(0===t)return e;var r=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(t,r,n),a=Math.min(t,r,n),s=i-a;if(0===s)return[0,0,t];var o,l=0,c=i+a;switch(o=s/(c>1?2-c:c),i){case t:l=((r-n)/s+6)%6;break;case r:l=(n-t)/s+2;break;case n:l=(t-r)/s+4}return[l/6,o,c/2]}(function(e){var t=e.slice("#"===e[0]?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}(e));return r[2]=t<0?r[2]*(1+t):1-(1-r[2])*(1-t),TF(function(e){var t,r=e[0],n=e[1],i=e[2],a=2*n*(i<.5?i:1-i),s=i-a/2,o=[s,s,s],l=6*r;if(0!==n)switch(0|l){case 0:case 6:t=a*l,o[0]+=a,o[1]+=t;break;case 1:t=a*(2-l),o[0]+=t,o[1]+=a;break;case 2:t=a*(l-2),o[1]+=a,o[2]+=t;break;case 3:t=a*(4-l),o[1]+=t,o[2]+=a;break;case 4:t=a*(l-4),o[2]+=a,o[0]+=t;break;case 5:t=a*(6-l),o[2]+=t,o[0]+=a}for(var c=0;3!=c;++c)o[c]=Math.round(255*o[c]);return o}(r))}var AF=6;function MF(e){return Math.floor((e+Math.round(128/AF)/256)*AF)}function IF(e){return Math.floor((e-5)/AF*100+.5)/100}function OF(e){return Math.round((e*AF+5)/AF*256)/256}function DF(e){return OF(IF(MF(e)))}function RF(e){var t=Math.abs(e-DF(e)),r=AF;if(t>.005)for(AF=1;AF<15;++AF)Math.abs(e-DF(e))<=t&&(t=Math.abs(e-DF(e)),r=AF);AF=r}function LF(e){e.width?(e.wpx=MF(e.width),e.wch=IF(e.wpx),e.MDW=AF):e.wpx?(e.wch=IF(e.wpx),e.width=OF(e.wch),e.MDW=AF):"number"==typeof e.wch&&(e.width=OF(e.wch),e.wpx=MF(e.width),e.MDW=AF),e.customWidth&&delete e.customWidth}var FF=96;function $F(e){return 96*e/FF}function BF(e){return e*FF/96}var zF={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};var UF=["numFmtId","fillId","fontId","borderId","xfId"],VF=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];var HF=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(a,s,o){var l,c={};return a?((l=(a=a.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(e))&&function(e,t,r){t.NumberFmt=[];for(var n=FM(ZA),i=0;i<n.length;++i)t.NumberFmt[n[i]]=ZA[n[i]];var a=e[0].match(wI);if(a)for(i=0;i<a.length;++i){var s=SI(a[i]);switch(jI(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var o=NI(zI(s.formatCode)),l=parseInt(s.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&null!=t.NumberFmt[l];--l);t.NumberFmt[l]=o}NM(o,l)}break;default:if(r.WTF)throw new Error("unrecognized "+s[0]+" in numFmts")}}}(l,c,o),(l=a.match(n))&&function(e,t,r,n){t.Fonts=[];var i={},a=!1;(e[0].match(wI)||[]).forEach((function(e){var s=SI(e);switch(jI(s[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":t.Fonts.push(i),i={};break;case"<name":s.val&&(i.name=zI(s.val));break;case"<b":i.bold=s.val?RI(s.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=s.val?RI(s.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(s.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=s.val?RI(s.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=s.val?RI(s.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=s.val?RI(s.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=s.val?RI(s.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=s.val?RI(s.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":s.val&&(i.sz=+s.val);break;case"<vertAlign":s.val&&(i.vertAlign=s.val);break;case"<family":s.val&&(i.family=parseInt(s.val,10));break;case"<scheme":s.val&&(i.scheme=s.val);break;case"<charset":if("1"==s.val)break;s.codepage=gA[parseInt(s.val,10)];break;case"<color":if(i.color||(i.color={}),s.auto&&(i.color.auto=RI(s.auto)),s.rgb)i.color.rgb=s.rgb.slice(-6);else if(s.indexed){i.color.index=parseInt(s.indexed,10);var o=oR[i.color.index];81==i.color.index&&(o=oR[1]),o||(o=oR[1]),i.color.rgb=o[0].toString(16)+o[1].toString(16)+o[2].toString(16)}else s.theme&&(i.color.theme=parseInt(s.theme,10),s.tint&&(i.color.tint=parseFloat(s.tint)),s.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=PF(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<AlternateContent":case"<ext":a=!0;break;case"</AlternateContent>":case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+s[0]+" in fonts")}}))}(l,c,s,o),(l=a.match(r))&&function(e,t,r,n){t.Fills=[];var i={},a=!1;(e[0].match(wI)||[]).forEach((function(e){var r=SI(e);switch(jI(r[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":i={},t.Fills.push(i);break;case"<gradientFill":case"</gradientFill>":t.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":r.patternType&&(i.patternType=r.patternType);break;case"<bgColor":i.bgColor||(i.bgColor={}),r.indexed&&(i.bgColor.indexed=parseInt(r.indexed,10)),r.theme&&(i.bgColor.theme=parseInt(r.theme,10)),r.tint&&(i.bgColor.tint=parseFloat(r.tint)),r.rgb&&(i.bgColor.rgb=r.rgb.slice(-6));break;case"<fgColor":i.fgColor||(i.fgColor={}),r.theme&&(i.fgColor.theme=parseInt(r.theme,10)),r.tint&&(i.fgColor.tint=parseFloat(r.tint)),null!=r.rgb&&(i.fgColor.rgb=r.rgb.slice(-6));break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+r[0]+" in fills")}}))}(l,c,0,o),(l=a.match(i))&&function(e,t,r,n){t.Borders=[];var i={},a=!1;(e[0].match(wI)||[]).forEach((function(e){var r=SI(e);switch(jI(r[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":i={},r.diagonalUp&&(i.diagonalUp=RI(r.diagonalUp)),r.diagonalDown&&(i.diagonalDown=RI(r.diagonalDown)),t.Borders.push(i);break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+r[0]+" in borders")}}))}(l,c,0,o),(l=a.match(t))&&function(e,t,r){var n;t.CellXf=[];var i=!1;(e[0].match(wI)||[]).forEach((function(e){var a=SI(e),s=0;switch(jI(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(n=a)[0],s=0;s<UF.length;++s)n[UF[s]]&&(n[UF[s]]=parseInt(n[UF[s]],10));for(s=0;s<VF.length;++s)n[VF[s]]&&(n[VF[s]]=RI(n[VF[s]]));if(t.NumberFmt&&n.numFmtId>392)for(s=392;s>60;--s)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[s]){n.numFmtId=s;break}t.CellXf.push(n);break;case"<alignment":case"<alignment/>":var o={};a.vertical&&(o.vertical=a.vertical),a.horizontal&&(o.horizontal=a.horizontal),null!=a.textRotation&&(o.textRotation=a.textRotation),a.indent&&(o.indent=a.indent),a.wrapText&&(o.wrapText=RI(a.wrapText)),n.alignment=o;break;case"<AlternateContent":case"<ext":i=!0;break;case"</AlternateContent>":case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}}))}(l,c,o),c):c}}();function GF(e,t){var r,n=[xI,QI("styleSheet",null,{xmlns:mO[0],"xmlns:vt":hO})];return e.SSF&&null!=(r=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach((function(r){for(var n=r[0];n<=r[1];++n)null!=e[n]&&(t[t.length]=QI("numFmt",null,{numFmtId:n,formatCode:AI(e[n])}))})),1===t.length?"":(t[t.length]="</numFmts>",t[0]=QI("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function(e){var t=[];return t[t.length]=QI("cellXfs",null),e.forEach((function(e){t[t.length]=QI("xf",null,e)})),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=QI("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function WF(e,t,r){r||(r=aD(6+4*t.length)),r.write_shift(2,e),TD(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return null==r.l&&(r.l=r.length),n}function qF(e,t){t||(t=aD(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=aD(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,r),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var r=0;"superscript"==e.vertAlign?r=1:"subscript"==e.vertAlign&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),QD(e.color,t);var n=0;return"major"==e.scheme&&(n=1),"minor"==e.scheme&&(n=2),t.write_shift(1,n),TD(e.name,t),t.length>t.l?t.slice(0,t.l):t}var KF,ZF=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],YF=iD;function XF(e,t){t||(t=aD(84)),KF||(KF=BM(ZF));var r=KF[e.patternType];null==r&&(r=40),t.write_shift(4,r);var n=0;if(40!=r)for(QD({auto:1},t),QD({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function QF(e,t,r){r||(r=aD(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);return r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function JF(e,t){return t||(t=aD(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var e$=iD;function t$(e){lD(e,613,CD(1)),lD(e,46,function(e,t){return t||(t=aD(51)),t.write_shift(1,0),JF(0,t),JF(0,t),JF(0,t),JF(0,t),JF(0,t),t.length>t.l?t.slice(0,t.l):t}()),lD(e,614)}function r$(e){lD(e,619,CD(1)),lD(e,48,function(e,t){return t||(t=aD(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),zD(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),lD(e,620)}function n$(e){lD(e,508,function(e,t,r){var n=aD(2052);return n.write_shift(4,e),zD(t,n),zD(r,n),n.length>n.l?n.slice(0,n.l):n}(0,"TableStyleMedium9","PivotStyleMedium4")),lD(e,509)}function i$(e,t){var r=oD();return lD(r,278),function(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach((function(e){for(var n=e[0];n<=e[1];++n)null!=t[n]&&++r})),0!=r&&(lD(e,615,CD(r)),[[5,8],[23,26],[41,44],[50,392]].forEach((function(r){for(var n=r[0];n<=r[1];++n)null!=t[n]&&lD(e,44,WF(n,t[n]))})),lD(e,616))}}(r,e.SSF),function(e){lD(e,611,CD(1)),lD(e,43,qF({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),lD(e,612)}(r),function(e){lD(e,603,CD(2)),lD(e,45,XF({patternType:"none"})),lD(e,45,XF({patternType:"gray125"})),lD(e,604)}(r),t$(r),function(e){lD(e,626,CD(1)),lD(e,47,QF({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),lD(e,627)}(r),function(e,t){lD(e,617,CD(t.length)),t.forEach((function(t){lD(e,47,QF(t,0))})),lD(e,618)}(r,t.cellXfs),r$(r),function(e){lD(e,505,CD(0)),lD(e,506)}(r),n$(r),lD(r,279),r.end()}var a$=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function s$(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(wI)||[]).forEach((function(e){var i=SI(e);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===i[0].charAt(1)?(t.themeElements.clrScheme[a$.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}}))}function o$(){}function l$(){}var c$=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,u$=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,d$=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;var h$=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function p$(e,t){var r;e&&0!==e.length||(e=f$());var n={};if(!(r=e.match(h$)))throw new Error("themeElements not found in theme");return function(e,t,r){var n;t.themeElements={},[["clrScheme",c$,s$],["fontScheme",u$,o$],["fmtScheme",d$,l$]].forEach((function(i){if(!(n=e.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,t,r)}))}(r[0],n,t),n.raw=e,n}function f$(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var r=[xI];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function m$(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:case 4:e.l+=4;break;case 1:t.xclrValue=function(e,t){return iD(e,t)}(e,4);break;case 2:t.xclrValue=fL(e);break;case 3:t.xclrValue=function(e){return e.read_shift(4)}(e)}return e.l+=8,t}function g$(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=m$(e);break;case 6:n[1]=function(e,t){return iD(e,t)}(e,r);break;case 14:case 15:n[1]=e.read_shift(1===r?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function v$(){var e=oD();return lD(e,332),lD(e,334,CD(1)),lD(e,335,function(e){var t=aD(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),TD(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),lD(e,336),lD(e,339,function(e,t){var r=aD(8+2*t.length);return r.write_shift(4,e),TD(t,r),r.slice(0,r.l)}(1,"XLDAPR")),lD(e,52),lD(e,35,CD(514)),lD(e,4096,CD(0)),lD(e,4097,eL(1)),lD(e,36),lD(e,53),lD(e,340),lD(e,337,function(e,t){var r=aD(8);return r.write_shift(4,e),r.write_shift(4,t?1:0),r}(1,!0)),lD(e,51,function(e){var t=aD(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}([[1,0]])),lD(e,338),lD(e,333),e.end()}function x$(){var e=[xI];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var y$=1024;function b$(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),i=[QI("xml",null,{"xmlns:v":wO,"xmlns:o":gO,"xmlns:x":vO,"xmlns:mv":bO}).replace(/\/>/,">"),QI("o:shapelayout",QI("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),QI("v:shapetype",[QI("v:stroke",null,{joinstyle:"miter"}),QI("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];y$<1e3*e;)y$+=1e3;return t.forEach((function(e){var t=vD(e[0]),r={color2:"#BEFF82",type:"gradient"};"gradient"==r.type&&(r.angle="-180");var n="gradient"==r.type?QI("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,a=QI("v:fill",n,r);++y$,i=i.concat(["<v:shape"+XI({id:"_x0000_s"+y$,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",a,QI("v:shadow",null,{on:"t",obscured:"t"}),QI("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",YI("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),YI("x:AutoFill","False"),YI("x:Row",String(t.r)),YI("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])})),i.push("</xml>"),i.join("")}function w$(e,t,r,n){var i,a=Array.isArray(e);t.forEach((function(t){var s=vD(t.ref);if(a?(e[s.r]||(e[s.r]=[]),i=e[s.r][s.c]):i=e[t.ref],!i){i={t:"z"},a?e[s.r][s.c]=i:e[t.ref]=i;var o=wD(e["!ref"]||"BDWGO1000001:A1");o.s.r>s.r&&(o.s.r=s.r),o.e.r<s.r&&(o.e.r=s.r),o.s.c>s.c&&(o.s.c=s.c),o.e.c<s.c&&(o.e.c=s.c);var l=bD(o);l!==e["!ref"]&&(e["!ref"]=l)}i.c||(i.c=[]);var c={a:t.author,t:t.t,r:t.r,T:r};t.h&&(c.h=t.h);for(var u=i.c.length-1;u>=0;--u){if(!r&&i.c[u].T)return;r&&!i.c[u].T&&i.c.splice(u,1)}if(r&&n)for(u=0;u<n.length;++u)if(c.a==n[u].id){c.a=n[u].name||c.a;break}i.c.push(c)}))}function _$(e){var t=[xI,QI("comments",null,{xmlns:mO[0]})],r=[];return t.push("<authors>"),e.forEach((function(e){e[1].forEach((function(e){var n=AI(e.a);-1==r.indexOf(n)&&(r.push(n),t.push("<author>"+n+"</author>")),e.T&&e.ID&&-1==r.indexOf("tc="+e.ID)&&(r.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))}))})),0==r.length&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach((function(e){var n=0,i=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?n=r.indexOf("tc="+e[1][0].ID):e[1].forEach((function(e){e.a&&(n=r.indexOf(AI(e.a))),i.push(e.t||"")})),t.push('<comment ref="'+e[0]+'" authorId="'+n+'"><text>'),i.length<=1)t.push(YI("t",AI(i[0]||"")));else{for(var a="Comment:\n    "+i[0]+"\n",s=1;s<i.length;++s)a+="Reply:\n    "+i[s]+"\n";t.push(YI("t",AI(a)))}t.push("</text></comment>")})),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function k$(e,t,r){var n=[xI,QI("ThreadedComments",null,{xmlns:oO}).replace(/[\/]>/,">")];return e.forEach((function(e){var i="";(e[1]||[]).forEach((function(a,s){if(a.T){a.a&&-1==t.indexOf(a.a)&&t.push(a.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};0==s?i=o.id:o.parentId=i,a.ID=o.id,a.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(a.a)).slice(-12)+"}"),n.push(QI("threadedComment",YI("text",a.t||""),o))}else delete a.ID}))})),n.push("</ThreadedComments>"),n.join("")}var S$=ND;function j$(e){var t=oD(),r=[];return lD(t,628),lD(t,630),e.forEach((function(e){e[1].forEach((function(e){r.indexOf(e.a)>-1||(r.push(e.a.slice(0,54)),lD(t,632,function(e){return TD(e.slice(0,54))}(e.a)))}))})),lD(t,631),lD(t,633),e.forEach((function(e){e[1].forEach((function(n){n.iauthor=r.indexOf(n.a);var i={s:vD(e[0]),e:vD(e[0])};lD(t,635,function(e,t){return null==t&&(t=aD(36)),t.write_shift(4,e[1].iauthor),ZD(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([i,n])),n.t&&n.t.length>0&&lD(t,637,ID(n)),lD(t,636),delete n.iauthor}))})),lD(t,634),lD(t,629),t.end()}var E$=["xlsb","xlsm","xlam","biff8","xla"];var C$=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(e,r,n,i){var a=!1,s=!1;0==n.length?s=!0:"["==n.charAt(0)&&(s=!0,n=n.slice(1,-1)),0==i.length?a=!0:"["==i.charAt(0)&&(a=!0,i=i.slice(1,-1));var o=n.length>0?0|parseInt(n,10):0,l=i.length>0?0|parseInt(i,10):0;return a?l+=t.c:--l,s?o+=t.r:--o,r+(a?"":"$")+gD(l)+(s?"":"$")+fD(o)}return function(n,i){return t=i,n.replace(e,r)}}(),N$=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,T$=function(){return function(e,t){return e.replace(N$,(function(e,r,n,i,a,s){var o=mD(i)-(n?0:t.c),l=pD(s)-(a?0:t.r);return r+"R"+(0==l?"":a?l+1:"["+l+"]")+"C"+(0==o?"":n?o+1:"["+o+"]")}))}}();function P$(e,t){return e.replace(N$,(function(e,r,n,i,a,s){return r+("$"==n?n+i:gD(mD(i)+t.c))+("$"==a?a+s:fD(pD(s)+t.r))}))}function A$(e,t,r){var n=yD(t).s,i=vD(r);return P$(e,{r:i.r-n.r,c:i.c-n.c})}function M$(e){return e.replace(/_xlfn\./g,"")}function I$(e){e.l+=1}function O$(e,t){var r=e.read_shift(1==t?1:2);return[16383&r,r>>14&1,r>>15&1]}function D$(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return R$(e);12==r.biff&&(n=4)}var i=e.read_shift(n),a=e.read_shift(n),s=O$(e,2),o=O$(e,2);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function R$(e){var t=O$(e,2),r=O$(e,2),n=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function L$(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return function(e){var t=O$(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}(e);var n=e.read_shift(r&&12==r.biff?4:2),i=O$(e,2);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function F$(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:255&r,fQuoted:!!(16384&r),cRel:r>>15,rRel:r>>15}}function $$(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function B$(e){return[e.read_shift(1),e.read_shift(1)]}function z$(e,t){var r=[e.read_shift(1)];if(12==t)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2}switch(r[0]){case 4:r[1]=XR(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:r[1]=lR[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:r[1]=YD(e);break;case 2:r[1]=lL(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function U$(e,t,r){for(var n=e.read_shift(12==r.biff?4:2),i=[],a=0;a!=n;++a)i.push((12==r.biff?KD:bL)(e,8));return i}function V$(e,t,r){var n=0,i=0;12==r.biff?(n=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,0==--i&&(i=256));for(var a=0,s=[];a!=n&&(s[a]=[]);++a)for(var o=0;o!=i;++o)s[a][o]=z$(e,r.biff);return s}function H$(e,t,r){return e.l+=2,[F$(e)]}function G$(e){return e.l+=6,[]}function W$(e){return e.l+=2,[JR(e),1&e.read_shift(2)]}var q$=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var K$={1:{n:"PtgExp",f:function(e,t,r){return e.l++,r&&12==r.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(r&&2==r.biff?1:2)]}},2:{n:"PtgTbl",f:iD},3:{n:"PtgAdd",f:I$},4:{n:"PtgSub",f:I$},5:{n:"PtgMul",f:I$},6:{n:"PtgDiv",f:I$},7:{n:"PtgPower",f:I$},8:{n:"PtgConcat",f:I$},9:{n:"PtgLt",f:I$},10:{n:"PtgLe",f:I$},11:{n:"PtgEq",f:I$},12:{n:"PtgGe",f:I$},13:{n:"PtgGt",f:I$},14:{n:"PtgNe",f:I$},15:{n:"PtgIsect",f:I$},16:{n:"PtgUnion",f:I$},17:{n:"PtgRange",f:I$},18:{n:"PtgUplus",f:I$},19:{n:"PtgUminus",f:I$},20:{n:"PtgPercent",f:I$},21:{n:"PtgParen",f:I$},22:{n:"PtgMissArg",f:I$},23:{n:"PtgStr",f:function(e,t,r){return e.l++,nL(e,0,r)}},26:{n:"PtgSheet",f:function(e,t,r){return e.l+=5,e.l+=2,e.l+=2==r.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,r){return e.l+=2==r.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,lR[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,YD(e)}},32:{n:"PtgArray",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=2==r.biff?6:12==r.biff?14:7,[n]}},33:{n:"PtgFunc",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(r&&r.biff<=3?1:2);return[gB[i],mB[i],n]}},34:{n:"PtgFuncVar",f:function(e,t,r){var n=e[e.l++],i=e.read_shift(1),a=r&&r.biff<=3?[88==n?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===a[0]?mB:fB)[a[1]]]}},35:{n:"PtgName",f:function(e,t,r){var n=e.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,a=e.read_shift(i);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[n,0,a]}},36:{n:"PtgRef",f:function(e,t,r){var n=(96&e[e.l])>>5;return e.l+=1,[n,L$(e,0,r)]}},37:{n:"PtgArea",f:function(e,t,r){return[(96&e[e.l++])>>5,D$(e,r.biff>=2&&r.biff,r)]}},38:{n:"PtgMemArea",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=r&&2==r.biff?3:4,[n,e.read_shift(r&&2==r.biff?1:2)]}},39:{n:"PtgMemErr",f:iD},40:{n:"PtgMemNoMem",f:iD},41:{n:"PtgMemFunc",f:function(e,t,r){return[e.read_shift(1)>>>5&3,e.read_shift(r&&2==r.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,12==r.biff&&(e.l+=2),[n]}},43:{n:"PtgAreaErr",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}},44:{n:"PtgRefN",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var i=function(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return function(e){var t=e.read_shift(2),r=e.read_shift(1),n=(32768&t)>>15,i=(16384&t)>>14;return t&=16383,1==n&&t>=8192&&(t-=16384),1==i&&r>=128&&(r-=256),{r:t,c:r,cRel:i,rRel:n}}(e);var i=e.read_shift(n>=12?4:2),a=e.read_shift(2),s=(16384&a)>>14,o=(32768&a)>>15;if(a&=16383,1==o)for(;i>524287;)i-=1048576;if(1==s)for(;a>8191;)a-=16384;return{r:i,c:a,cRel:s,rRel:o}}(e,0,r);return[n,i]}},45:{n:"PtgAreaN",f:function(e,t,r){var n=(96&e[e.l++])>>5,i=function(e,t,r){if(r.biff<8)return R$(e);var n=e.read_shift(12==r.biff?4:2),i=e.read_shift(12==r.biff?4:2),a=O$(e,2),s=O$(e,2);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}(e,0,r);return[n,i]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,r){return 5==r.biff?function(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return r&&5==r.biff&&(e.l+=12),[n,i,L$(e,0,r)]}},59:{n:"PtgArea3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(r)switch(r.biff){case 5:e.l+=12;break;case 12:0}return[n,i,D$(e,0,r)]}},60:{n:"PtgRefErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,i=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6}return e.l+=a,[n,i]}},61:{n:"PtgAreaErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,i=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12}return e.l+=a,[n,i]}},255:{}},Z$={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Y$={1:{n:"PtgElfLel",f:W$},2:{n:"PtgElfRw",f:H$},3:{n:"PtgElfCol",f:H$},6:{n:"PtgElfRwV",f:H$},7:{n:"PtgElfColV",f:H$},10:{n:"PtgElfRadical",f:H$},11:{n:"PtgElfRadicalS",f:G$},13:{n:"PtgElfColS",f:G$},15:{n:"PtgElfColSV",f:G$},16:{n:"PtgElfRadicalLel",f:W$},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i=e.read_shift(2),a=e.read_shift(2);return{ixti:t,coltype:3&r,rt:q$[r>>2&31],idx:n,c:i,C:a}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},X$={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=r&&2==r.biff?3:4,[n]}},2:{n:"PtgAttrIf",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,r){e.l+=2;for(var n=e.read_shift(r&&2==r.biff?1:2),i=[],a=0;a<=n;++a)i.push(e.read_shift(r&&2==r.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,r){e.l+=r&&2==r.biff?3:4}},32:{n:"PtgAttrBaxcel",f:$$},33:{n:"PtgAttrBaxcel",f:$$},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),B$(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),B$(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function Q$(e,t,r,n){if(n.biff<8)return iD(e,t);for(var i=e.l+t,a=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=V$(e,0,n),a.push(r[s][1]);break;case"PtgMemArea":r[s][2]=U$(e,r[s][1],n),a.push(r[s][2]);break;case"PtgExp":n&&12==n.biff&&(r[s][1][1]=e.read_shift(4),a.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return 0!==(t=i-e.l)&&a.push(iD(e,t)),a}function J$(e,t,r){for(var n,i,a=e.l+t,s=[];a!=e.l;)t=a-e.l,i=e[e.l],n=K$[i]||K$[Z$[i]],24!==i&&25!==i||(n=(24===i?Y$:X$)[e[e.l+1]]),n&&n.f?s.push([n.n,n.f(e,t,r)]):iD(e,t);return s}function eB(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],i=[],a=0;a<n.length;++a){var s=n[a];if(s)if(2===s[0])i.push('"'+s[1].replace(/"/g,'""')+'"');else i.push(s[1]);else i.push("")}t.push(i.join(","))}return t.join(";")}var tB={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function rB(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(e[n[0]][0]){case 357:return i=-1==n[1]?"#REF":e.SheetNames[n[1]],n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 358:return null!=r.SID?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return i=-1==n[1]?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map((function(e){return e.Name})).join(";;");default:return e[n[0]][0][3]?(i=-1==n[1]?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function nB(e,t,r){var n=rB(e,t,r);return"#REF"==n?n:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(n,r)}function iB(e,t,r,n,i){var a,s,o,l,c=i&&i.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},d=[],h=0,p=0,f="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",v=0,x=e[0].length;v<x;++v){var y=e[0][v];switch(y[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(a=d.pop(),s=d.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=tI(" ",e[0][m][1][1]);break;case 1:g=tI("\r",e[0][m][1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}s+=g,m=-1}d.push(s+tB[y[0]]+a);break;case"PtgIsect":a=d.pop(),s=d.pop(),d.push(s+" "+a);break;case"PtgUnion":a=d.pop(),s=d.pop(),d.push(s+","+a);break;case"PtgRange":a=d.pop(),s=d.pop(),d.push(s+":"+a);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=cD(y[1][1],u,i),d.push(dD(o,c));break;case"PtgRefN":o=r?cD(y[1][1],r,i):y[1][1],d.push(dD(o,c));break;case"PtgRef3d":h=y[1][1],o=cD(y[1][2],u,i);f=nB(n,h,i);d.push(f+"!"+dD(o,c));break;case"PtgFunc":case"PtgFuncVar":var b=y[1][0],w=y[1][1];b||(b=0);var _=0==(b&=127)?[]:d.slice(-b);d.length-=b,"User"===w&&(w=_.shift()),d.push(w+"("+_.join(",")+")");break;case"PtgBool":d.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":d.push(y[1]);break;case"PtgNum":d.push(String(y[1]));break;case"PtgStr":d.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=uD(y[1][1],r?{s:r}:u,i),d.push(hD(l,i));break;case"PtgArea":l=uD(y[1][1],u,i),d.push(hD(l,i));break;case"PtgArea3d":h=y[1][1],l=y[1][2],f=nB(n,h,i),d.push(f+"!"+hD(l,i));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgName":p=y[1][2];var k=(n.names||[])[p-1]||(n[0]||[])[p],S=k?k.Name:"SH33TJSNAME"+String(p);S&&"_xlfn."==S.slice(0,6)&&!i.xlfn&&(S=S.slice(6)),d.push(S);break;case"PtgNameX":var j,E=y[1][1];if(p=y[1][2],!(i.biff<=5)){var C="";if(14849==((n[E]||[])[0]||[])[0]||(1025==((n[E]||[])[0]||[])[0]?n[E][p]&&n[E][p].itab>0&&(C=n.SheetNames[n[E][p].itab-1]+"!"):C=n.SheetNames[p-1]+"!"),n[E]&&n[E][p])C+=n[E][p].Name;else if(n[0]&&n[0][p])C+=n[0][p].Name;else{var N=(rB(n,E,i)||"").split(";;");N[p-1]?C=N[p-1]:C+="SH33TJSERRX"}d.push(C);break}E<0&&(E=-E),n[E]&&(j=n[E][p]),j||(j={Name:"SH33TJSERRY"}),d.push(j.Name);break;case"PtgParen":var T="(",P=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:T=tI(" ",e[0][m][1][1])+T;break;case 3:T=tI("\r",e[0][m][1][1])+T;break;case 4:P=tI(" ",e[0][m][1][1])+P;break;case 5:P=tI("\r",e[0][m][1][1])+P;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}d.push(T+d.pop()+P);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":d.push("#REF!");break;case"PtgExp":o={c:y[1][1],r:y[1][0]};var A={c:r.c,r:r.r};if(n.sharedf[xD(o)]){var M=n.sharedf[xD(o)];d.push(iB(M,u,A,n,i))}else{var I=!1;for(a=0;a!=n.arrayf.length;++a)if(s=n.arrayf[a],!(o.c<s[0].s.c||o.c>s[0].e.c)&&!(o.r<s[0].s.r||o.r>s[0].e.r)){d.push(iB(s[1],u,A,n,i)),I=!0;break}I||d.push(y[1])}break;case"PtgArray":d.push("{"+eB(y[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=v;break;case"PtgMissArg":d.push("");break;case"PtgList":d.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(y))}if(3!=i.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var O=!0;switch((y=e[0][m])[1][0]){case 4:O=!1;case 0:g=tI(" ",y[1][1]);break;case 5:O=!1;case 1:g=tI("\r",y[1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}d.push((O?g:"")+d.pop()+(O?"":g)),m=-1}}if(d.length>1&&i.WTF)throw new Error("bad formula stack");return d[0]}function aB(e,t,r){var n,i=e.l+t,a=2==r.biff?1:2,s=e.read_shift(a);if(65535==s)return[[],iD(e,t-2)];var o=J$(e,s,r);return t!==s+a&&(n=Q$(e,t-s-a,o,r)),e.l=i,[o,n]}function sB(e,t,r){var n,i=e.l+t,a=e.read_shift(2),s=J$(e,a,r);return 65535==a?[[],iD(e,t-2)]:(t!==a+2&&(n=Q$(e,i-a-2,s,r)),[s,n])}function oB(e,t,r){var n=e.l+t,i=gL(e);2==r.biff&&++e.l;var a=function(e){var t;if(65535!==WO(e,e.l+6))return[YD(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=1===e[e.l+2],e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}(e),s=e.read_shift(1);2!=r.biff&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=function(e,t,r){var n,i=e.l+t,a=2==r.biff?1:2,s=e.read_shift(a);if(65535==s)return[[],iD(e,t-2)];var o=J$(e,s,r);return t!==s+a&&(n=Q$(e,t-s-a,o,r)),e.l=i,[o,n]}(e,n-e.l,r);return{cell:i,val:a[0],formula:o,shared:s>>3&1,tt:a[1]}}function lB(e,t,r,n,i){var a=vL(t,r,i),s=function(e){if(null==e){var t=aD(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return XD("number"==typeof e?e:0)}(e.v),o=aD(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=aD(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return LA([a,s,o,l])}function cB(e,t,r){var n=e.read_shift(4),i=J$(e,n,r),a=e.read_shift(4);return[i,a>0?Q$(e,a,i,r):null]}var uB=cB,dB=cB,hB=cB,pB=cB,fB={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},mB={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},gB={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function vB(e){return"of:"==e.slice(0,3)&&(e=e.slice(3)),61==e.charCodeAt(0)&&61==(e=e.slice(1)).charCodeAt(0)&&(e=e.slice(1)),(e=(e=(e=e.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,(function(e,t){return t.replace(/\./g,"")}))).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function xB(e){return("of:="+e.replace(N$,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function yB(e){var t=e.split(":");return[t[0].split(".")[0],t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function bB(e){return e.replace(/\./,"!")}var wB={},_B={},kB="undefined"!==typeof Map;function SB(e,t,r){var n=0,i=e.length;if(r){if(kB?r.has(t):Object.prototype.hasOwnProperty.call(r,t))for(var a=kB?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}else for(;n<i;++n)if(e[n].t===t)return e.Count++,n;return e[i]={t:t},e.Count++,e.Unique++,r&&(kB?(r.has(t)||r.set(t,[]),r.get(t).push(i)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(i))),i}function jB(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(AF=t.MDW),null!=t.width?r.customWidth=1:null!=t.wpx?n=IF(t.wpx):null!=t.wch&&(n=t.wch),n>-1?(r.width=OF(n),r.customWidth=1):null!=t.width&&(r.width=t.width),t.hidden&&(r.hidden=!0),null!=t.level&&(r.outlineLevel=r.level=t.level),r}function EB(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(r=[1,1,1,1,.5,.5]),null==e.left&&(e.left=r[0]),null==e.right&&(e.right=r[1]),null==e.top&&(e.top=r[2]),null==e.bottom&&(e.bottom=r[3]),null==e.header&&(e.header=r[4]),null==e.footer&&(e.footer=r[5])}}function CB(e,t,r){var n=r.revssf[null!=t.z?t.z:"General"],i=60,a=e.length;if(null==n&&r.ssf)for(;i<392;++i)if(null==r.ssf[i]){NM(t.z,i),r.ssf[i]=t.z,r.revssf[t.z]=n=i;break}for(i=0;i!=a;++i)if(e[i].numFmtId===n)return i;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function NB(e,t,r,n,i,a){try{n.cellNF&&(e.z=ZA[t])}catch(W){if(n.WTF)throw W}if("z"!==e.t||n.cellStyles){if("d"===e.t&&"string"===typeof e.v&&(e.v=QM(e.v)),(!n||!1!==n.cellText)&&"z"!==e.t)try{if(null==ZA[t]&&NM(AM[t]||"General",t),"e"===e.t)e.w=e.w||lR[e.v];else if(0===t)if("n"===e.t)(0|e.v)===e.v?e.w=e.v.toString(10):e.w=aM(e.v);else if("d"===e.t){var s=VM(e.v);e.w=(0|s)===s?s.toString(10):aM(s)}else{if(void 0===e.v)return"";e.w=sM(e.v,_B)}else"d"===e.t?e.w=CM(t,VM(e.v),_B):e.w=CM(t,e.v,_B)}catch(W){if(n.WTF)throw W}if(n.cellStyles&&null!=r)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=PF(i.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=i.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=PF(i.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=i.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(W){if(n.WTF&&a.Fills)throw W}}}function TB(e,t,r){if(e&&e["!ref"]){var n=wD(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}var PB=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,AB=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,MB=/<(?:\w:)?hyperlink [^>]*>/gm,IB=/"(\w*:\w*)"/,OB=/<(?:\w:)?col\b[^>]*[\/]?>/g,DB=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,RB=/<(?:\w:)?pageMargins[^>]*\/>/g,LB=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,FB=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,$B=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function BB(e,t,r,n,i,a,s){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",d=e.match(AB);d?(c=e.slice(0,d.index),u=e.slice(d.index+d[0].length)):c=u=e;var h=c.match(LB);h?zB(h[0],o,i,r):(h=c.match(FB))&&function(e,t,r,n,i){zB(e.slice(0,e.indexOf(">")),r,n,i)}(h[0],h[1],o,i,r);var p=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var f=c.slice(p,p+50).match(IB);f&&function(e,t){var r=wD(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=bD(r))}(o,f[1])}var m=c.match($B);m&&m[1]&&function(e,t){t.Views||(t.Views=[{}]);(e.match(HB)||[]).forEach((function(e,r){var n=SI(e);t.Views[r]||(t.Views[r]={}),+n.zoomScale&&(t.Views[r].zoom=+n.zoomScale),RI(n.rightToLeft)&&(t.Views[r].RTL=!0)}))}(m[1],i);var g=[];if(t.cellStyles){var v=c.match(OB);v&&function(e,t){for(var r=!1,n=0;n!=t.length;++n){var i=SI(t[n],!0);i.hidden&&(i.hidden=RI(i.hidden));var a=parseInt(i.min,10)-1,s=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,RF(i.width)),LF(i);a<=s;)e[a++]=eI(i)}}(g,v)}d&&WB(d[1],o,t,l,a,s);var x=u.match(DB);x&&(o["!autofilter"]=function(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}(x[0]));var y=[],b=u.match(PB);if(b)for(p=0;p!=b.length;++p)y[p]=wD(b[p].slice(b[p].indexOf('"')+1));var w=u.match(MB);w&&function(e,t,r){for(var n=Array.isArray(e),i=0;i!=t.length;++i){var a=SI(zI(t[i]),!0);if(!a.ref)return;var s=((r||{})["!id"]||[])[a.id];s?(a.Target=s.Target,a.location&&(a.Target+="#"+NI(a.location))):(a.Target="#"+NI(a.location),s={Target:a.Target,TargetMode:"Internal"}),a.Rel=s,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=wD(a.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=xD({c:c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=a):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=a)}}}(o,w,n);var _=u.match(RB);if(_&&(o["!margins"]=function(e){var t={};return["left","right","top","bottom","header","footer"].forEach((function(r){e[r]&&(t[r]=parseFloat(e[r]))})),t}(SI(_[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=bD(l)),t.sheetRows>0&&o["!ref"]){var k=wD(o["!ref"]);t.sheetRows<=+k.e.r&&(k.e.r=t.sheetRows-1,k.e.r>l.e.r&&(k.e.r=l.e.r),k.e.r<k.s.r&&(k.s.r=k.e.r),k.e.c>l.e.c&&(k.e.c=l.e.c),k.e.c<k.s.c&&(k.s.c=k.e.c),o["!fullref"]=o["!ref"],o["!ref"]=bD(k))}return g.length>0&&(o["!cols"]=g),y.length>0&&(o["!merges"]=y),o}function zB(e,t,r,n){var i=SI(e);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=NI(zI(i.codeName)))}var UB=["objects","scenarios","selectLockedCells","selectUnlockedCells"],VB=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];var HB=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function GB(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var i="",a=e.t,s=e.v;if("z"!==e.t)switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=lR[e.v];break;case"d":n&&n.cellDates?i=QM(e.v,-1).toISOString():((e=eI(e)).t="n",i=""+(e.v=VM(QM(e.v)))),"undefined"===typeof e.z&&(e.z=ZA[14]);break;default:i=e.v}var o=YI("v",AI(i)),l={r:t},c=CB(n.cellXfs,e,n);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=YI("v",""+SB(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str"}if(e.t!=a&&(e.t=a,e.v=s),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=QI("f",AI(e.f),u)+(null!=e.v?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),QI("c",o,l)}var WB=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,a=VI("v"),s=VI("f");return function(o,l,c,u,d,h){for(var p,f,m,g,v,x=0,y="",b=[],w=[],_=0,k=0,S=0,j="",E=0,C=0,N=0,T=0,P=Array.isArray(h.CellXf),A=[],M=[],I=Array.isArray(l),O=[],D={},R=!1,L=!!c.sheetStubs,F=o.split(t),$=0,B=F.length;$!=B;++$){var z=(y=F[$].trim()).length;if(0!==z){var U=0;e:for(x=0;x<z;++x)switch(y[x]){case">":if("/"!=y[x-1]){++x;break e}if(c&&c.cellStyles){if(E=null!=(f=SI(y.slice(U,x),!0)).r?parseInt(f.r,10):E+1,C=-1,c.sheetRows&&c.sheetRows<E)continue;D={},R=!1,f.ht&&(R=!0,D.hpt=parseFloat(f.ht),D.hpx=BF(D.hpt)),"1"==f.hidden&&(R=!0,D.hidden=!0),null!=f.outlineLevel&&(R=!0,D.level=+f.outlineLevel),R&&(O[E-1]=D)}break;case"<":U=x}if(U>=x)break;if(E=null!=(f=SI(y.slice(U,x),!0)).r?parseInt(f.r,10):E+1,C=-1,!(c.sheetRows&&c.sheetRows<E)){u.s.r>E-1&&(u.s.r=E-1),u.e.r<E-1&&(u.e.r=E-1),c&&c.cellStyles&&(D={},R=!1,f.ht&&(R=!0,D.hpt=parseFloat(f.ht),D.hpx=BF(D.hpt)),"1"==f.hidden&&(R=!0,D.hidden=!0),null!=f.outlineLevel&&(R=!0,D.level=+f.outlineLevel),R&&(O[E-1]=D)),b=y.slice(x).split(e);for(var V=0;V!=b.length&&"<"==b[V].trim().charAt(0);++V);for(b=b.slice(V),x=0;x!=b.length;++x)if(0!==(y=b[x].trim()).length){if(w=y.match(r),_=x,k=0,S=0,y="<c "+("<"==y.slice(0,1)?">":"")+y,null!=w&&2===w.length){for(_=0,j=w[1],k=0;k!=j.length&&!((S=j.charCodeAt(k)-64)<1||S>26);++k)_=26*_+S;C=--_}else++C;for(k=0;k!=y.length&&62!==y.charCodeAt(k);++k);if(++k,(f=SI(y.slice(0,k),!0)).r||(f.r=xD({r:E-1,c:C})),p={t:""},null!=(w=(j=y.slice(k)).match(a))&&""!==w[1]&&(p.v=NI(w[1])),c.cellFormula){if(null!=(w=j.match(s))&&""!==w[1]){if(p.f=NI(zI(w[1])).replace(/\r\n/g,"\n"),c.xlfn||(p.f=M$(p.f)),w[0].indexOf('t="array"')>-1)p.F=(j.match(i)||[])[1],p.F.indexOf(":")>-1&&A.push([wD(p.F),p.F]);else if(w[0].indexOf('t="shared"')>-1){g=SI(w[0]);var H=NI(zI(w[1]));c.xlfn||(H=M$(H)),M[parseInt(g.si,10)]=[g,H,f.r]}}else(w=j.match(/<f[^>]*\/>/))&&M[(g=SI(w[0])).si]&&(p.f=A$(M[g.si][1],M[g.si][2],f.r));var G=vD(f.r);for(k=0;k<A.length;++k)G.r>=A[k][0].s.r&&G.r<=A[k][0].e.r&&G.c>=A[k][0].s.c&&G.c<=A[k][0].e.c&&(p.F=A[k][1])}if(null==f.t&&void 0===p.v)if(p.f||p.F)p.v=0,p.t="n";else{if(!L)continue;p.t="z"}else p.t=f.t||"n";switch(u.s.c>C&&(u.s.c=C),u.e.c<C&&(u.e.c=C),p.t){case"n":if(""==p.v||null==p.v){if(!L)continue;p.t="z"}else p.v=parseFloat(p.v);break;case"s":if("undefined"==typeof p.v){if(!L)continue;p.t="z"}else m=wB[parseInt(p.v,10)],p.v=m.t,p.r=m.r,c.cellHTML&&(p.h=m.h);break;case"str":p.t="s",p.v=null!=p.v?zI(p.v):"",c.cellHTML&&(p.h=OI(p.v));break;case"inlineStr":w=j.match(n),p.t="s",null!=w&&(m=oF(w[1]))?(p.v=m.t,c.cellHTML&&(p.h=m.h)):p.v="";break;case"b":p.v=RI(p.v);break;case"d":c.cellDates?p.v=QM(p.v,1):(p.v=VM(QM(p.v,1)),p.t="n");break;case"e":c&&!1===c.cellText||(p.w=p.v),p.v=cR[p.v]}if(N=T=0,v=null,P&&void 0!==f.s&&null!=(v=h.CellXf[f.s])&&(null!=v.numFmtId&&(N=v.numFmtId),c.cellStyles&&null!=v.fillId&&(T=v.fillId)),NB(p,N,T,c,d,h),c.cellDates&&P&&"n"==p.t&&kM(ZA[N])&&(p.t="d",p.v=qM(p.v)),f.cm&&c.xlmeta){var W=(c.xlmeta.Cell||[])[+f.cm-1];W&&"XLDAPR"==W.type&&(p.D=!0)}if(I){var q=vD(f.r);l[q.r]||(l[q.r]=[]),l[q.r][q.c]=p}else l[f.r]=p}}}}O.length>0&&(l["!rows"]=O)}}();function qB(e,t,r,n){var i,a=[xI,QI("worksheet",null,{xmlns:mO[0],"xmlns:r":dO})],s=r.SheetNames[e],o="",l=r.Sheets[s];null==l&&(l={});var c=l["!ref"]||"A1",u=wD(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=bD(u)}n||(n={}),l["!comments"]=[];var d=[];!function(e,t,r,n,i){var a=!1,s={},o=null;if("xlsx"!==n.bookType&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch(W){}a=!0,s.codeName=UI(AI(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+QI("outlinePr",null,c)}(a||o)&&(i[i.length]=QI("sheetPr",o,s))}(l,r,e,t,a),a[a.length]=QI("dimension",null,{ref:c}),a[a.length]=function(e,t,r,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),QI("sheetViews",QI("sheetView",null,i),{})}(0,0,0,r),t.sheetFormat&&(a[a.length]=QI("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(a[a.length]=function(e,t){for(var r,n=["<cols>"],i=0;i!=t.length;++i)(r=t[i])&&(n[n.length]=QI("col",null,jB(i,r)));return n[n.length]="</cols>",n.join("")}(0,l["!cols"])),a[i=a.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var r,n,i=[],a=[],s=wD(e["!ref"]),o="",l="",c=[],u=0,d=0,h=e["!rows"],p=Array.isArray(e),f={r:l},m=-1;for(d=s.s.c;d<=s.e.c;++d)c[d]=gD(d);for(u=s.s.r;u<=s.e.r;++u){for(a=[],l=fD(u),d=s.s.c;d<=s.e.c;++d){r=c[d]+l;var g=p?(e[u]||[])[d]:e[r];void 0!==g&&null!=(o=GB(g,r,e,t))&&a.push(o)}(a.length>0||h&&h[u])&&(f={r:l},h&&h[u]&&((n=h[u]).hidden&&(f.hidden=1),m=-1,n.hpx?m=$F(n.hpx):n.hpt&&(m=n.hpt),m>-1&&(f.ht=m,f.customHeight=1),n.level&&(f.outlineLevel=n.level)),i[i.length]=QI("row",a.join(""),f))}if(h)for(;u<h.length;++u)h&&h[u]&&(f={r:u+1},(n=h[u]).hidden&&(f.hidden=1),m=-1,n.hpx?m=$F(n.hpx):n.hpt&&(m=n.hpt),m>-1&&(f.ht=m,f.customHeight=1),n.level&&(f.outlineLevel=n.level),i[i.length]=QI("row","",f));return i.join("")}(l,t,0,0),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),l["!protect"]&&(a[a.length]=function(e){var t={sheet:1};return UB.forEach((function(r){null!=e[r]&&e[r]&&(t[r]="1")})),VB.forEach((function(r){null==e[r]||e[r]||(t[r]="0")})),e.password&&(t.password=SF(e.password).toString(16).toUpperCase()),QI("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(a[a.length]=function(e,t,r,n){var i="string"==typeof e.ref?e.ref:bD(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,s=yD(i);s.s.r==s.e.r&&(s.e.r=yD(t["!ref"]).e.r,i=bD(s));for(var o=0;o<a.length;++o){var l=a[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+i;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),QI("autoFilter",null,{ref:i})}(l["!autofilter"],l,r,e)),null!=l["!merges"]&&l["!merges"].length>0&&(a[a.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+bD(e[r])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var h,p,f=-1,m=-1;return l["!links"].length>0&&(a[a.length]="<hyperlinks>",l["!links"].forEach((function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=vR(n,-1,AI(e[1].Target).replace(/#.*$/,""),pR.HLINK),h["r:id"]="rId"+m),(f=e[1].Target.indexOf("#"))>-1&&(h.location=AI(e[1].Target.slice(f+1))),e[1].Tooltip&&(h.tooltip=AI(e[1].Tooltip)),a[a.length]=QI("hyperlink",null,h))})),a[a.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(a[a.length]=(EB(p=l["!margins"]),QI("pageMargins",null,p))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(a[a.length]=YI("ignoredErrors",QI("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(m=vR(n,-1,"../drawings/drawing"+(e+1)+".xml",pR.DRAW),a[a.length]=QI("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=d),l["!comments"].length>0&&(m=vR(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",pR.VML),a[a.length]=QI("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function KB(e,t,r,n){var i=function(e,t,r){var n=aD(145),i=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;i.hpx?a=20*$F(i.hpx):i.hpt&&(a=20*i.hpt),n.write_shift(2,a),n.write_shift(1,0);var s=0;i.level&&(s|=i.level),i.hidden&&(s|=16),(i.hpx||i.hpt)&&(s|=32),n.write_shift(1,s),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var d=-1,h=-1,p=u<<10;p<u+1<<10;++p)c.c=p,(Array.isArray(r)?(r[c.r]||[])[c.c]:r[xD(c)])&&(d<0&&(d=p),h=p);d<0||(++o,n.write_shift(4,d),n.write_shift(4,h))}var f=n.l;return n.l=l,n.write_shift(4,o),n.l=f,n.length>n.l?n.slice(0,n.l):n}(n,r,t);(i.length>17||(t["!rows"]||[])[n])&&lD(e,0,i)}var ZB=KD,YB=ZD;function XB(e){return[RD(e),YD(e),"n"]}var QB=KD,JB=ZD;var ez=["left","right","top","bottom","header","footer"];function tz(e,t,r,n,i,a,s){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=eI(t)).z=t.z||ZA[14],t.v=VM(QM(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:r,c:n};switch(l.s=CB(i.cellXfs,t,i),t.l&&a["!links"].push([xD(l),t.l]),t.c&&a["!comments"].push([xD(l),t.c]),t.t){case"s":case"str":return i.bookSST?(o=SB(i.Strings,t.v,i.revStrings),l.t="s",l.v=o,s?lD(e,18,function(e,t,r){return null==r&&(r=aD(8)),LD(t,r),r.write_shift(4,t.v),r}(0,l)):lD(e,7,function(e,t,r){return null==r&&(r=aD(12)),DD(t,r),r.write_shift(4,t.v),r}(0,l))):(l.t="str",s?lD(e,17,function(e,t,r){return null==r&&(r=aD(8+4*e.v.length)),LD(t,r),TD(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l)):lD(e,6,function(e,t,r){return null==r&&(r=aD(12+4*e.v.length)),DD(t,r),TD(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?s?lD(e,13,function(e,t,r){return null==r&&(r=aD(8)),LD(t,r),WD(e.v,r),r}(t,l)):lD(e,2,function(e,t,r){return null==r&&(r=aD(12)),DD(t,r),WD(e.v,r),r}(t,l)):s?lD(e,16,function(e,t,r){return null==r&&(r=aD(12)),LD(t,r),XD(e.v,r),r}(t,l)):lD(e,5,function(e,t,r){return null==r&&(r=aD(16)),DD(t,r),XD(e.v,r),r}(t,l)),!0;case"b":return l.t="b",s?lD(e,15,function(e,t,r){return null==r&&(r=aD(5)),LD(t,r),r.write_shift(1,e.v?1:0),r}(t,l)):lD(e,4,function(e,t,r){return null==r&&(r=aD(9)),DD(t,r),r.write_shift(1,e.v?1:0),r}(t,l)),!0;case"e":return l.t="e",s?lD(e,14,function(e,t,r){return null==r&&(r=aD(8)),LD(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}(t,l)):lD(e,3,function(e,t,r){return null==r&&(r=aD(9)),DD(t,r),r.write_shift(1,e.v),r}(t,l)),!0}return s?lD(e,12,function(e,t,r){return null==r&&(r=aD(4)),LD(t,r)}(0,l)):lD(e,1,function(e,t,r){return null==r&&(r=aD(8)),DD(t,r)}(0,l)),!0}function rz(e,t){t&&t["!merges"]&&(lD(e,177,function(e,t){return null==t&&(t=aD(4)),t.write_shift(4,e),t}(t["!merges"].length)),t["!merges"].forEach((function(t){lD(e,176,JB(t))})),lD(e,178))}function nz(e,t){t&&t["!cols"]&&(lD(e,390),t["!cols"].forEach((function(t,r){t&&lD(e,60,function(e,t,r){null==r&&(r=aD(18));var n=jB(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,256*(n.width||10)),r.write_shift(4,0);var i=0;return t.hidden&&(i|=1),"number"==typeof n.width&&(i|=2),t.level&&(i|=t.level<<8),r.write_shift(2,i),r}(r,t))})),lD(e,391))}function iz(e,t){t&&t["!ref"]&&(lD(e,648),lD(e,649,function(e){var t=aD(24);return t.write_shift(4,4),t.write_shift(4,1),ZD(e,t),t}(wD(t["!ref"]))),lD(e,650))}function az(e,t,r){t["!links"].forEach((function(t){if(t[1].Target){var n=vR(r,-1,t[1].Target.replace(/#.*$/,""),pR.HLINK);lD(e,494,function(e,t){var r=aD(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));ZD({s:vD(e[0]),e:vD(e[0])},r),HD("rId"+t,r);var n=e[1].Target.indexOf("#");return TD((-1==n?"":e[1].Target.slice(n+1))||"",r),TD(e[1].Tooltip||"",r),TD("",r),r.slice(0,r.l)}(t,n))}})),delete t["!links"]}function sz(e,t,r){lD(e,133),lD(e,137,function(e,t,r){null==r&&(r=aD(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}(0,r)),lD(e,138),lD(e,134)}function oz(e,t){t["!protect"]&&lD(e,535,function(e,t){return null==t&&(t=aD(66)),t.write_shift(2,e.password?SF(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach((function(r){r[1]?t.write_shift(4,null==e[r[0]]||e[r[0]]?0:1):t.write_shift(4,null!=e[r[0]]&&e[r[0]]?0:1)})),t}(t["!protect"]))}function lz(e,t,r,n){var i=oD(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch(W){}var l=wD(s["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return s["!links"]=[],s["!comments"]=[],lD(i,129),(r.vbaraw||s["!outline"])&&lD(i,147,function(e,t,r){null==r&&(r=aD(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var i=1;i<3;++i)r.write_shift(1,0);return QD({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),$D(e,r),r.slice(0,r.l)}(o,s["!outline"])),lD(i,148,YB(l)),sz(i,0,r.Workbook),nz(i,s),function(e,t,r,n){var i,a=wD(t["!ref"]||"A1"),s="",o=[];lD(e,145);var l=Array.isArray(t),c=a.e.r;t["!rows"]&&(c=Math.max(a.e.r,t["!rows"].length-1));for(var u=a.s.r;u<=c;++u){s=fD(u),KB(e,t,a,u);var d=!1;if(u<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){u===a.s.r&&(o[h]=gD(h)),i=o[h]+s;var p=l?(t[u]||[])[h]:t[i];d=!!p&&tz(e,p,u,h,n,t,d)}}lD(e,146)}(i,s,0,t),oz(i,s),function(e,t,r,n){if(t["!autofilter"]){var i=t["!autofilter"],a="string"===typeof i.ref?i.ref:bD(i.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=yD(a);o.s.r==o.e.r&&(o.e.r=yD(t["!ref"]).e.r,a=bD(o));for(var l=0;l<s.length;++l){var c=s[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),lD(e,161,ZD(wD(a))),lD(e,162)}}(i,s,r,e),rz(i,s),az(i,s,n),s["!margins"]&&lD(i,476,function(e,t){return null==t&&(t=aD(48)),EB(e),ez.forEach((function(r){XD(e[r],t)})),t}(s["!margins"])),t&&!t.ignoreEC&&void 0!=t.ignoreEC||iz(i,s),function(e,t,r,n){if(t["!comments"].length>0){var i=vR(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",pR.VML);lD(e,551,HD("rId"+i)),t["!legacy"]=i}}(i,s,e,n),lD(i,130),i.end()}function cz(e,t,r,n,i,a){var s=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach((function(e){var t=function(e){var t,r=[],n=e.match(/^<c:numCache>/);(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach((function(e){var t=e.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);t&&(r[+t[1]]=n?+t[2]:t[2])}));var i=NI((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach((function(e){t=e.replace(/<.*?>/g,"")})),[r,i,t]}(e);u.s.r=u.s.c=0,u.e.c=o,c=gD(o),t[0].forEach((function(e,r){s[c+fD(r)]={t:"n",v:e,z:t[1]},l=r})),u.e.r<l&&(u.e.r=l),++o})),o>0&&(s["!ref"]=bD(u)),s}var uz=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],dz=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],hz=[],pz=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function fz(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],i=0;i!=t.length;++i){var a=t[i];if(null==n[a[0]])n[a[0]]=a[1];else switch(a[2]){case"bool":"string"==typeof n[a[0]]&&(n[a[0]]=RI(n[a[0]]));break;case"int":"string"==typeof n[a[0]]&&(n[a[0]]=parseInt(n[a[0]],10))}}}function mz(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(null==e[n[0]])e[n[0]]=n[1];else switch(n[2]){case"bool":"string"==typeof e[n[0]]&&(e[n[0]]=RI(e[n[0]]));break;case"int":"string"==typeof e[n[0]]&&(e[n[0]]=parseInt(e[n[0]],10))}}}function gz(e){mz(e.WBProps,uz),mz(e.CalcPr,pz),fz(e.WBView,dz),fz(e.Sheets,hz),_B.date1904=RI(e.WBProps.date1904)}var vz="][*?/\\".split("");function xz(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return vz.forEach((function(n){if(-1!=e.indexOf(n)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}})),r}function yz(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,r){e.forEach((function(n,i){xz(n);for(var a=0;a<i;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var s=t&&t[i]&&t[i].CodeName||n;if(95==s.charCodeAt(0)&&s.length>22)throw new Error("Bad Code Name: Worksheet"+s)}}))}(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)TB(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var bz=/<\w+:workbook/;function wz(e){var t=[xI];t[t.length]=QI("workbook",null,{xmlns:mO[0],"xmlns:r":dO});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(uz.forEach((function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(n[t[0]]=e.Workbook.WBProps[t[0]])})),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=QI("workbookPr",null,n);var i=e.Workbook&&e.Workbook.Sheets||[],a=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&i[a]&&i[a].Hidden;++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var s={name:AI(e.SheetNames[a].slice(0,31))};if(s.sheetId=""+(a+1),s["r:id"]="rId"+(a+1),i[a])switch(i[a].Hidden){case 1:s.state="hidden";break;case 2:s.state="veryHidden"}t[t.length]=QI("sheet",null,s)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach((function(e){var r={name:e.Name};e.Comment&&(r.comment=e.Comment),null!=e.Sheet&&(r.localSheetId=""+e.Sheet),e.Hidden&&(r.hidden="1"),e.Ref&&(t[t.length]=QI("definedName",AI(e.Ref),r))})),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function _z(e,t){return t||(t=aD(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),HD(e.strRelID,t),TD(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function kz(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Sz(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var r=t.Workbook.Sheets,n=0,i=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&-1==i?i=n:1==r[n].Hidden&&-1==a&&(a=n);a>i||(lD(e,135),lD(e,158,function(e,t){return t||(t=aD(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(i)),lD(e,136))}}function jz(e,t){var r=oD();return lD(r,131),lD(r,128,function(e,t){t||(t=aD(127));for(var r=0;4!=r;++r)t.write_shift(4,0);return TD("SheetJS",t),TD(hA.version,t),TD(hA.version,t),TD("7262",t),t.length>t.l?t.slice(0,t.l):t}()),lD(r,153,function(e,t){t||(t=aD(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),$D(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),Sz(r,e),function(e,t){lD(e,143);for(var r=0;r!=t.SheetNames.length;++r)lD(e,156,_z({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]}));lD(e,144)}(r,e),lD(r,132),r.end()}function Ez(e,t,r){return".bin"===t.slice(-4)?function(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;t||(t={}),t.biff=12;var a=[],s=[[]];return s.SheetNames=[],s.XTI=[],hU[16]={n:"BrtFRTArchID$",f:kz},sD(e,(function(e,o,l){switch(l){case 156:s.SheetNames.push(e.name),r.Sheets.push(e);break;case 153:r.WBProps=e;break;case 39:null!=e.Sheet&&(t.SID=e.Sheet),e.Ref=iB(e.Ptg,0,null,s,t),delete t.SID,delete e.Ptg,a.push(e);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:s[0].length?s.push([l,e]):s[0]=[l,e],s[s.length-1].XTI=[];break;case 362:0===s.length&&(s[0]=[],s[0].XTI=[]),s[s.length-1].XTI=s[s.length-1].XTI.concat(e),s.XTI=s.XTI.concat(e);break;case 35:case 37:n.push(l),i=!0;break;case 36:case 38:n.pop(),i=!1;break;default:if(o.T);else if(!i||t.WTF&&37!=n[n.length-1]&&35!=n[n.length-1])throw new Error("Unexpected record 0x"+l.toString(16))}}),t),gz(r),r.Names=a,r.supbooks=s,r}(e,r):function(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",a={},s=0;if(e.replace(wI,(function(o,l){var c=SI(o);switch(jI(c[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":o.match(bz)&&(i="xmlns"+o.match(/<(\w+):/)[1]),r.xmlns=c[i];break;case"<fileVersion":delete c[0],r.AppVersion=c;break;case"<workbookPr":case"<workbookPr/>":uz.forEach((function(e){if(null!=c[e[0]])switch(e[2]){case"bool":r.WBProps[e[0]]=RI(c[e[0]]);break;case"int":r.WBProps[e[0]]=parseInt(c[e[0]],10);break;default:r.WBProps[e[0]]=c[e[0]]}})),c.codeName&&(r.WBProps.CodeName=zI(c.codeName));break;case"<workbookView":case"<workbookView/>":delete c[0],r.WBView.push(c);break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state,c.name=NI(zI(c.name)),delete c[0],r.Sheets.push(c);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":n=!1;break;case"<definedName":(a={}).Name=zI(c.name),c.comment&&(a.Comment=c.comment),c.localSheetId&&(a.Sheet=+c.localSheetId),RI(c.hidden||"0")&&(a.Hidden=!0),s=l+o.length;break;case"</definedName>":a.Ref=NI(zI(e.slice(s,l))),r.Names.push(a);break;case"<calcPr":case"<calcPr/>":delete c[0],r.CalcPr=c;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in workbook")}return o})),-1===mO.indexOf(r.xmlns))throw new Error("Unknown Namespace: "+r.xmlns);return gz(r),r}(e,r)}function Cz(e,t,r,n,i,a,s,o){return".bin"===t.slice(-4)?function(e,t,r,n,i,a,s){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l,c,u,d,h,p,f,m,g,v,x=o.dense?[]:{},y={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=[],w=!1,_=!1,k=[];o.biff=12,o["!row"]=0;var S=0,j=!1,E=[],C={},N=o.supbooks||i.supbooks||[[]];if(N.sharedf=C,N.arrayf=E,N.SheetNames=i.SheetNames||i.Sheets.map((function(e){return e.name})),!o.supbooks&&(o.supbooks=N,i.Names))for(var T=0;T<i.Names.length;++T)N[0][T+1]=i.Names[T];var P,A,M=[],I=[],O=!1;if(hU[16]={n:"BrtShortReal",f:XB},sD(e,(function(e,t,T){if(!_)switch(T){case 148:l=e;break;case 0:c=e,o.sheetRows&&o.sheetRows<=c.r&&(_=!0),g=fD(h=c.r),o["!row"]=c.r,(e.hidden||e.hpt||null!=e.level)&&(e.hpt&&(e.hpx=BF(e.hpt)),I[e.r]=e);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(u={t:e[2]},e[2]){case"n":u.v=e[1];break;case"s":m=wB[e[1]],u.v=m.t,u.r=m.r;break;case"b":u.v=!!e[1];break;case"e":u.v=e[1],!1!==o.cellText&&(u.w=lR[u.v]);break;case"str":u.t="s",u.v=e[1];break;case"is":u.t="s",u.v=e[1].t}if((d=s.CellXf[e[0].iStyleRef])&&NB(u,d.numFmtId,null,o,a,s),p=-1==e[0].c?p+1:e[0].c,o.dense?(x[h]||(x[h]=[]),x[h][p]=u):x[gD(p)+g]=u,o.cellFormula){for(j=!1,S=0;S<E.length;++S){var D=E[S];c.r>=D[0].s.r&&c.r<=D[0].e.r&&p>=D[0].s.c&&p<=D[0].e.c&&(u.F=bD(D[0]),j=!0)}!j&&e.length>3&&(u.f=e[3])}if(y.s.r>c.r&&(y.s.r=c.r),y.s.c>p&&(y.s.c=p),y.e.r<c.r&&(y.e.r=c.r),y.e.c<p&&(y.e.c=p),o.cellDates&&d&&"n"==u.t&&kM(ZA[d.numFmtId])){var R=JA(u.v);R&&(u.t="d",u.v=new Date(R.y,R.m-1,R.d,R.H,R.M,R.S,R.u))}P&&("XLDAPR"==P.type&&(u.D=!0),P=void 0),A&&(A=void 0);break;case 1:case 12:if(!o.sheetStubs||w)break;u={t:"z",v:void 0},p=-1==e[0].c?p+1:e[0].c,o.dense?(x[h]||(x[h]=[]),x[h][p]=u):x[gD(p)+g]=u,y.s.r>c.r&&(y.s.r=c.r),y.s.c>p&&(y.s.c=p),y.e.r<c.r&&(y.e.r=c.r),y.e.c<p&&(y.e.c=p),P&&("XLDAPR"==P.type&&(u.D=!0),P=void 0),A&&(A=void 0);break;case 176:k.push(e);break;case 49:P=((o.xlmeta||{}).Cell||[])[e-1];break;case 494:var L=n["!id"][e.relId];for(L?(e.Target=L.Target,e.loc&&(e.Target+="#"+e.loc),e.Rel=L):""==e.relId&&(e.Target="#"+e.loc),h=e.rfx.s.r;h<=e.rfx.e.r;++h)for(p=e.rfx.s.c;p<=e.rfx.e.c;++p)o.dense?(x[h]||(x[h]=[]),x[h][p]||(x[h][p]={t:"z",v:void 0}),x[h][p].l=e):(f=xD({c:p,r:h}),x[f]||(x[f]={t:"z",v:void 0}),x[f].l=e);break;case 426:if(!o.cellFormula)break;E.push(e),(v=o.dense?x[h][p]:x[gD(p)+g]).f=iB(e[1],0,{r:c.r,c:p},N,o),v.F=bD(e[0]);break;case 427:if(!o.cellFormula)break;C[xD(e[0].s)]=e[1],(v=o.dense?x[h][p]:x[gD(p)+g]).f=iB(e[1],0,{r:c.r,c:p},N,o);break;case 60:if(!o.cellStyles)break;for(;e.e>=e.s;)M[e.e--]={width:e.w/256,hidden:!!(1&e.flags),level:e.level},O||(O=!0,RF(e.w/256)),LF(M[e.e+1]);break;case 161:x["!autofilter"]={ref:bD(e)};break;case 476:x["!margins"]=e;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),e.name&&(i.Sheets[r].CodeName=e.name),(e.above||e.left)&&(x["!outline"]={above:e.above,left:e.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),e.RTL&&(i.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:w=!0;break;case 36:w=!1;break;case 37:b.push(T),w=!0;break;case 38:b.pop(),w=!1;break;default:if(t.T);else if(!w||o.WTF)throw new Error("Unexpected record 0x"+T.toString(16))}}),o),delete o.supbooks,delete o["!row"],!x["!ref"]&&(y.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(x["!ref"]=bD(l||y)),o.sheetRows&&x["!ref"]){var D=wD(x["!ref"]);o.sheetRows<=+D.e.r&&(D.e.r=o.sheetRows-1,D.e.r>y.e.r&&(D.e.r=y.e.r),D.e.r<D.s.r&&(D.s.r=D.e.r),D.e.c>y.e.c&&(D.e.c=y.e.c),D.e.c<D.s.c&&(D.s.c=D.e.c),x["!fullref"]=x["!ref"],x["!ref"]=bD(D))}return k.length>0&&(x["!merges"]=k),M.length>0&&(x["!cols"]=M),I.length>0&&(x["!rows"]=I),x}(e,n,r,i,a,s,o):BB(e,n,r,i,a,s,o)}function Nz(e,t,r,n,i,a,s,o){return".bin"===t.slice(-4)?function(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s=[],o=!1;return sD(e,(function(e,n,l){switch(l){case 550:a["!rel"]=e;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),e.name&&(i.Sheets[r].CodeName=e.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(l);break;case 38:s.pop();break;default:if(n.T>0)s.push(l);else if(n.T<0)s.pop();else if(!o||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}(e,n,r,i,a):function(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a,s={"!type":"chart","!drawel":null,"!rel":""},o=e.match(LB);return o&&zB(o[0],0,i,r),(a=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}(e,0,r,i,a)}function Tz(e,t,r,n){return".bin"===t.slice(-4)?function(e,t,r){var n={NumberFmt:[]};for(var i in ZA)n.NumberFmt[i]=ZA[i];n.CellXf=[],n.Fonts=[];var a=[],s=!1;return sD(e,(function(e,i,o){switch(o){case 44:n.NumberFmt[e[0]]=e[1],NM(e[1],e[0]);break;case 43:n.Fonts.push(e),null!=e.color.theme&&t&&t.themeElements&&t.themeElements.clrScheme&&(e.color.rgb=PF(t.themeElements.clrScheme[e.color.theme].rgb,e.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==a[a.length-1]&&n.CellXf.push(e);break;case 35:s=!0;break;case 36:s=!1;break;case 37:a.push(o),s=!0;break;case 38:a.pop(),s=!1;break;default:if(i.T>0)a.push(o);else if(i.T<0)a.pop();else if(!s||r.WTF&&37!=a[a.length-1])throw new Error("Unexpected record 0x"+o.toString(16))}})),n}(e,r,n):HF(e,r,n)}function Pz(e,t,r){return".bin"===t.slice(-4)?function(e,t){var r=[],n=!1;return sD(e,(function(e,i,a){switch(a){case 159:r.Count=e[0],r.Unique=e[1];break;case 19:r.push(e);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+a.toString(16))}})),r}(e,r):function(e,t){var r=[],n="";if(!e)return r;var i=e.match(lF);if(i){n=i[2].replace(cF,"").split(uF);for(var a=0;a!=n.length;++a){var s=oF(n[a].trim(),t);null!=s&&(r[r.length]=s)}i=SI(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}(e,r)}function Az(e,t,r){return".bin"===t.slice(-4)?function(e,t){var r=[],n=[],i={},a=!1;return sD(e,(function(e,s,o){switch(o){case 632:n.push(e);break;case 635:i=e;break;case 637:i.t=e.t,i.h=e.h,i.r=e.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,t.sheetRows&&i.rfx&&t.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:case 37:case 38:break;case 35:a=!0;break;case 36:a=!1;break;default:if(s.T);else if(!a||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}})),r}(e,r):function(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach((function(e){if(""!==e&&""!==e.trim()){var t=e.match(/<(?:\w+:)?author[^>]*>(.*)/);t&&r.push(t[1])}}));var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach((function(e){if(""!==e&&""!==e.trim()){var i=e.match(/<(?:\w+:)?comment[^>]*>/);if(i){var a=SI(i[0]),s={author:a.authorId&&r[a.authorId]||"sheetjsghost",ref:a.ref,guid:a.guid},o=vD(a.ref);if(!(t.sheetRows&&t.sheetRows<=o.r)){var l=e.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),c=!!l&&!!l[1]&&oF(l[1])||{r:"",t:"",h:""};s.r=c.r,"<t></t>"==c.r&&(c.t=c.h=""),s.t=(c.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t.cellHTML&&(s.h=c.h),n.push(s)}}}})),n}(e,r)}function Mz(e,t,r){return".bin"===t.slice(-4)?function(e){var t=[];return sD(e,(function(e,r,n){if(63===n)t.push(e);else if(!r.T)throw new Error("Unexpected record 0x"+n.toString(16))})),t}(e):function(e){var t=[];if(!e)return t;var r=1;return(e.match(wI)||[]).forEach((function(e){var n=SI(e);switch(n[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,t.push(n)}})),t}(e)}function Iz(e,t,r,n){if(".bin"===r.slice(-4))return function(e,t,r,n){if(!e)return e;var i=n||{},a=!1;sD(e,(function(e,t,r){switch(r){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(t.T);else if(!a||i.WTF)throw new Error("Unexpected record 0x"+r.toString(16))}}),i)}(e,0,0,n)}function Oz(e,t,r){return".bin"===t.slice(-4)?function(e,t,r){var n={Types:[],Cell:[],Value:[]},i=r||{},a=[],s=!1,o=2;return sD(e,(function(e,t,r){switch(r){case 335:n.Types.push({name:e.name});break;case 51:e.forEach((function(e){1==o?n.Cell.push({type:n.Types[e[0]-1].name,index:e[1]}):0==o&&n.Value.push({type:n.Types[e[0]-1].name,index:e[1]})}));break;case 337:o=e?1:0;break;case 338:o=2;break;case 35:a.push(r),s=!0;break;case 36:a.pop(),s=!1;break;default:if(t.T);else if(!s||i.WTF&&35!=a[a.length-1])throw new Error("Unexpected record 0x"+r.toString(16))}})),n}(e,0,r):function(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var i,a=!1,s=2;return e.replace(wI,(function(e){var t=SI(e);switch(jI(t[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":n.Types.push({name:t.name});break;case"<futureMetadata":for(var o=0;o<n.Types.length;++o)n.Types[o].name==t.name&&(i=n.Types[o]);break;case"<rc":1==s?n.Cell.push({type:n.Types[t.t-1].name,index:+t.v}):0==s&&n.Value.push({type:n.Types[t.t-1].name,index:+t.v});break;case"<cellMetadata":s=1;break;case"</cellMetadata>":case"</valueMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+t.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+t[0]+" in metadata")}return e})),n}(e,0,r)}function Dz(e,t,r,n,i){return(".bin"===t.slice(-4)?lz:qB)(e,r,n,i)}function Rz(e,t,r){return(".bin"===t.slice(-4)?j$:_$)(e,r)}var Lz,Fz=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,$z=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Bz(e,t){var r=e.split(/\s+/),n=[];if(t||(n[0]=r[0]),1===r.length)return n;var i,a,s,o=e.match(Fz);if(o)for(s=0;s!=o.length;++s)-1===(a=(i=o[s].match($z))[1].indexOf(":"))?n[i[1]]=i[2].slice(1,i[2].length-1):n["xmlns:"===i[1].slice(0,6)?"xmlns"+i[1].slice(6):i[1].slice(a+1)]=i[2].slice(1,i[2].length-1);return n}function zz(e){var t={};if(1===e.split(/\s+/).length)return t;var r,n,i,a=e.match(Fz);if(a)for(i=0;i!=a.length;++i)-1===(n=(r=a[i].match($z))[1].indexOf(":"))?t[r[1]]=r[2].slice(1,r[2].length-1):t["xmlns:"===r[1].slice(0,6)?"xmlns"+r[1].slice(6):r[1].slice(n+1)]=r[2].slice(1,r[2].length-1);return t}function Uz(e,t,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=RI(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=QM(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[NI(t)]=i}function Vz(e,t,r){if("z"!==e.t){if(!r||!1!==r.cellText)try{"e"===e.t?e.w=e.w||lR[e.v]:"General"===t?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=aM(e.v):e.w=sM(e.v):e.w=function(e,t){var r=Lz[e]||NI(e);return"General"===r?sM(t):CM(r,t)}(t||"General",e.v)}catch(W){if(r.WTF)throw W}try{var n=Lz[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&"n"==e.t&&kM(n)){var i=JA(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(W){if(r.WTF)throw W}}}function Hz(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=zF[n.Pattern]||n.Pattern)}e[t.ID]=t}function Gz(e,t,r,n,i,a,s,o,l,c){var u="General",d=n.StyleID,h={};c=c||{};var p=[],f=0;for(void 0===d&&o&&(d=o.StyleID),void 0===d&&s&&(d=s.StyleID);void 0!==a[d]&&(a[d].nf&&(u=a[d].nf),a[d].Interior&&p.push(a[d].Interior),a[d].Parent);)d=a[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=RI(e);break;case"String":n.t="s",n.r=DI(NI(e)),n.v=e.indexOf("<")>-1?NI(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":"Z"!=e.slice(-1)&&(e+="Z"),n.v=(QM(e)-new Date(Date.UTC(1899,11,30)))/864e5,n.v!==n.v?n.v=NI(e):n.v<60&&(n.v=n.v-1),u&&"General"!=u||(u="yyyy-mm-dd");case"Number":void 0===n.v&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=cR[e],!1!==c.cellText&&(n.w=e);break;default:""==e&&""==t?n.t="z":(n.t="s",n.v=DI(t||e))}if(Vz(n,u,c),!1!==c.cellFormula)if(n.Formula){var m=NI(n.Formula);61==m.charCodeAt(0)&&(m=m.slice(1)),n.f=C$(m,i),delete n.Formula,"RC"==n.ArrayRange?n.F=C$("RC:RC",i):n.ArrayRange&&(n.F=C$(n.ArrayRange,i),l.push([wD(n.F),n.F]))}else for(f=0;f<l.length;++f)i.r>=l[f][0].s.r&&i.r<=l[f][0].e.r&&i.c>=l[f][0].s.c&&i.c<=l[f][0].e.c&&(n.F=l[f][1]);c.cellStyles&&(p.forEach((function(e){!h.patternType&&e.patternType&&(h.patternType=e.patternType)})),n.s=h),void 0!==n.StyleID&&(n.ixfe=n.StyleID)}function Wz(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.v=e.w=e.ixfe=void 0}function qz(e,t){var r=t||{};PM();var n=kA(eO(e));"binary"!=r.type&&"array"!=r.type&&"base64"!=r.type||(n="undefined"!==typeof _A?_A.utils.decode(65001,bA(n)):zI(n));var i,a=n.slice(0,1024).toLowerCase(),s=!1;if((1023&(a=a.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&a.indexOf(","),1023&a.indexOf(";"))){var o=eI(r);return o.type="string",eF.to_workbook(n,o)}if(-1==a.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach((function(e){a.indexOf("<"+e)>=0&&(s=!0)})),s)return function(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||0==r.length)throw new Error("Invalid HTML: could not find <table>");if(1==r.length)return SD(SU(r[0],t),t);var n={SheetNames:[],Sheets:{}};return r.forEach((function(e,r){HV(n,SU(e,t),"Sheet"+(r+1))})),n}(n,r);Lz={"General Number":"General","General Date":ZA[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":ZA[15],"Short Date":ZA[14],"Long Time":ZA[19],"Medium Time":ZA[18],"Short Time":ZA[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:ZA[2],Standard:ZA[4],Percent:ZA[10],Scientific:ZA[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[];var u,d={},h=[],p=r.dense?[]:{},f="",m={},g={},v=Bz('<Data ss:Type="String">'),x=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},_={},k={},S="",j=0,E=[],C={},N={},T=0,P=[],A=[],M={},I=[],O=!1,D=[],R=[],L={},F=0,$=0,B={Sheets:[],WBProps:{date1904:!1}},z={};tO.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/gm,"");for(var U="";i=tO.exec(n);)switch(i[3]=(U=i[3]).toLowerCase()){case"data":if("data"==U){if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==i[0].charAt(i[0].length-2)&&c.push([i[3],!0]);break}if(c[c.length-1][1])break;"/"===i[1]?Gz(n.slice(x,i.index),S,v,"comment"==c[c.length-1][0]?M:m,{c:y,r:b},_,I[y],g,D,r):(S="",v=Bz(i[0]),x=i.index+i[0].length);break;case"cell":if("/"===i[1])if(A.length>0&&(m.c=A),(!r.sheetRows||r.sheetRows>b)&&void 0!==m.v&&(r.dense?(p[b]||(p[b]=[]),p[b][y]=m):p[gD(y)+fD(b)]=m),m.HRef&&(m.l={Target:NI(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(F=y+(0|parseInt(m.MergeAcross,10)),$=b+(0|parseInt(m.MergeDown,10)),E.push({s:{c:y,r:b},e:{c:F,r:$}})),r.sheetStubs)if(m.MergeAcross||m.MergeDown){for(var V=y;V<=F;++V)for(var H=b;H<=$;++H)(V>y||H>b)&&(r.dense?(p[H]||(p[H]=[]),p[H][V]={t:"z"}):p[gD(V)+fD(H)]={t:"z"});y=F+1}else++y;else m.MergeAcross?y=F+1:++y;else(m=zz(i[0])).Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),"/>"===i[0].slice(-2)&&++y,A=[];break;case"row":"/"===i[1]||"/>"===i[0].slice(-2)?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),"/>"===i[0].slice(-2)&&(g=Bz(i[0])).Index&&(b=+g.Index-1),y=0,++b):((g=Bz(i[0])).Index&&(b=+g.Index-1),L={},("0"==g.AutoFitHeight||g.Height)&&(L.hpx=parseInt(g.Height,10),L.hpt=$F(L.hpx),R[b]=L),"1"==g.Hidden&&(L.hidden=!0,R[b]=L));break;case"worksheet":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"));h.push(f),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(p["!ref"]=bD(w),r.sheetRows&&r.sheetRows<=w.e.r&&(p["!fullref"]=p["!ref"],w.e.r=r.sheetRows-1,p["!ref"]=bD(w))),E.length&&(p["!merges"]=E),I.length>0&&(p["!cols"]=I),R.length>0&&(p["!rows"]=R),d[f]=p}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([i[3],!1]),l=Bz(i[0]),f=NI(l.Name),p=r.dense?[]:{},E=[],D=[],R=[],z={name:f,Hidden:0},B.Sheets.push(z);break;case"table":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else{if("/>"==i[0].slice(-2))break;c.push([i[3],!1]),I=[],O=!1}break;case"style":"/"===i[1]?Hz(_,k,r):k=Bz(i[0]);break;case"numberformat":k.nf=NI(Bz(i[0]).Format||"General"),Lz[k.nf]&&(k.nf=Lz[k.nf]);for(var G=0;392!=G&&ZA[G]!=k.nf;++G);if(392==G)for(G=57;392!=G;++G)if(null==ZA[G]){NM(k.nf,G);break}break;case"column":if("table"!==c[c.length-1][0])break;if((u=Bz(i[0])).Hidden&&(u.hidden=!0,delete u.Hidden),u.Width&&(u.wpx=parseInt(u.Width,10)),!O&&u.wpx>10){O=!0,AF=6;for(var W=0;W<I.length;++W)I[W]&&LF(I[W])}O&&LF(u),I[u.Index-1||I.length]=u;for(var q=0;q<+u.Span;++q)I[I.length]=eI(u);break;case"namedrange":if("/"===i[1])break;B.Names||(B.Names=[]);var K=SI(i[0]),Z={Name:K.Name,Ref:C$(K.RefersTo.slice(1),{r:0,c:0})};B.Sheets.length>0&&(Z.Sheet=B.Sheets.length-1),B.Names.push(Z);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===i[0].slice(-2))break;"/"===i[1]?S+=n.slice(j,i.index):j=i.index+i[0].length;break;case"interior":if(!r.cellStyles)break;k.Interior=Bz(i[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===i[0].slice(-2))break;"/"===i[1]?IR(C,U,n.slice(T,i.index)):T=i.index+i[0].length;break;case"styles":case"workbook":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else c.push([i[3],!1]);break;case"comment":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"));Wz(M),A.push(M)}else c.push([i[3],!1]),M={a:(l=Bz(i[0])).Author};break;case"autofilter":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else if("/"!==i[0].charAt(i[0].length-2)){var Y=Bz(i[0]);p["!autofilter"]={ref:C$(Y.Range).replace(/\$/g,"")},c.push([i[3],!0])}break;case"datavalidation":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==i[0].charAt(i[0].length-2)&&c.push([i[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===i[1]){if((l=c.pop())[0]!==i[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==i[0].charAt(i[0].length-2)&&c.push([i[3],!0]);break;default:if(0==c.length&&"document"==i[3])return LU(n,r);if(0==c.length&&"uof"==i[3])return LU(n,r);var X=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(i[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:X=!1}break;case"componentoptions":switch(i[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:X=!1}break;case"excelworkbook":switch(i[3]){case"date1904":B.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:X=!1}break;case"workbookoptions":switch(i[3]){case"owcversion":case"height":case"width":break;default:X=!1}break;case"worksheetoptions":switch(i[3]){case"visible":if("/>"===i[0].slice(-2));else if("/"===i[1])switch(n.slice(T,i.index)){case"SheetHidden":z.Hidden=1;break;case"SheetVeryHidden":z.Hidden=2}else T=i.index+i[0].length;break;case"header":p["!margins"]||EB(p["!margins"]={},"xlml"),isNaN(+SI(i[0]).Margin)||(p["!margins"].header=+SI(i[0]).Margin);break;case"footer":p["!margins"]||EB(p["!margins"]={},"xlml"),isNaN(+SI(i[0]).Margin)||(p["!margins"].footer=+SI(i[0]).Margin);break;case"pagemargins":var Q=SI(i[0]);p["!margins"]||EB(p["!margins"]={},"xlml"),isNaN(+Q.Top)||(p["!margins"].top=+Q.Top),isNaN(+Q.Left)||(p["!margins"].left=+Q.Left),isNaN(+Q.Right)||(p["!margins"].right=+Q.Right),isNaN(+Q.Bottom)||(p["!margins"].bottom=+Q.Bottom);break;case"displayrighttoleft":B.Views||(B.Views=[]),B.Views[0]||(B.Views[0]={}),B.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;default:X=!1}break;case"pivottable":case"pivotcache":switch(i[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:X=!1}break;case"pagebreaks":switch(i[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:X=!1}break;case"autofilter":switch(i[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:X=!1}break;case"querytable":switch(i[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:X=!1}break;case"datavalidation":switch(i[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:X=!1}break;case"sorting":case"conditionalformatting":switch(i[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:X=!1}break;case"mapinfo":case"schema":case"data":switch(i[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:X=!1}break;case"smarttags":break;default:X=!1}if(X)break;if(i[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+i[3]+"|"+c.join("|");if("customdocumentproperties"===c[c.length-1][0]){if("/>"===i[0].slice(-2))break;"/"===i[1]?Uz(N,U,P,n.slice(T,i.index)):(P=i,T=i.index+i[0].length);break}if(r.WTF)throw"Unrecognized tag: "+i[3]+"|"+c.join("|")}var J={};return r.bookSheets||r.bookProps||(J.Sheets=d),J.SheetNames=h,J.Workbook=B,J.SSF=eI(ZA),J.Props=C,J.Custprops=N,J}function Kz(e,t){switch(mV(t=t||{}),t.type||"base64"){case"base64":return qz(NA(e),t);case"binary":case"buffer":case"file":return qz(e,t);case"array":return qz(DA(e),t)}}function Zz(e,t){var r=[];return e.Props&&r.push(function(e,t){var r=[];return FM(MR).map((function(e){for(var t=0;t<bR.length;++t)if(bR[t][1]==e)return bR[t];for(t=0;t<jR.length;++t)if(jR[t][1]==e)return jR[t];throw e})).forEach((function(n){if(null!=e[n[1]]){var i=t&&t.Props&&null!=t.Props[n[1]]?t.Props[n[1]]:e[n[1]];"date"===n[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),r.push(YI(MR[n[1]]||n[1],i))}})),QI("DocumentProperties",r.join(""),{xmlns:gO})}(e.Props,t)),e.Custprops&&r.push(function(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return e&&FM(e).forEach((function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var n=0;n<bR.length;++n)if(t==bR[n][1])return;for(n=0;n<jR.length;++n)if(t==jR[n][1])return;for(n=0;n<r.length;++n)if(t==r[n])return;var a=e[t],s="string";"number"==typeof a?(s="float",a=String(a)):!0===a||!1===a?(s="boolean",a=a?"1":"0"):a=String(a),i.push(QI(MI(t),a,{"dt:dt":s}))}})),t&&FM(t).forEach((function(r){if(Object.prototype.hasOwnProperty.call(t,r)&&(!e||!Object.prototype.hasOwnProperty.call(e,r))){var n=t[r],a="string";"number"==typeof n?(a="float",n=String(n)):!0===n||!1===n?(a="boolean",n=n?"1":"0"):n instanceof Date?(a="dateTime.tz",n=n.toISOString()):n=String(n),i.push(QI(MI(r),n,{"dt:dt":a}))}})),"<"+n+' xmlns="'+gO+'">'+i.join("")+"</"+n+">"}(e.Props,e.Custprops)),r.join("")}function Yz(e){return QI("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+T$(e.Ref,{r:0,c:0})})}function Xz(e,t,r,n,i,a,s){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+AI(T$(e.f,s))),e.F&&e.F.slice(0,t.length)==t){var l=vD(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==s.r?"":"["+(l.r-s.r)+"]")+"C"+(l.c==s.c?"":"["+(l.c-s.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=AI(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=AI(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],u=0;u!=c.length;++u)c[u].s.c==s.c&&c[u].s.r==s.r&&(c[u].e.c>c[u].s.c&&(o["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(o["ss:MergeDown"]=c[u].e.r-c[u].s.r));var d="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",h=String(e.v);break;case"b":d="Boolean",h=e.v?"1":"0";break;case"e":d="Error",h=lR[e.v];break;case"d":d="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||ZA[14]);break;case"s":d="String",h=((e.v||"")+"").replace(TI,(function(e){return CI[e]})).replace(II,(function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}))}var p=CB(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=s.c+1;var f=null!=e.v?h:"",m="z"==e.t?"":'<Data ss:Type="'+d+'">'+f+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map((function(e){var t=QI("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return QI("Comment",t,{"ss:Author":e.a})})).join("")),QI("Cell",m,o)}function Qz(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=BF(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Jz(e,t,r){var n=[],i=r.SheetNames[e],a=r.Sheets[i],s=a?function(e,t,r,n){if(!e)return"";if(!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,a=[],s=0;s<i.length;++s){var o=i[s];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(Yz(o)))}return a.join("")}(a,0,e,r):"";return s.length>0&&n.push("<Names>"+s+"</Names>"),s=a?function(e,t){if(!e["!ref"])return"";var r=wD(e["!ref"]),n=e["!merges"]||[],i=0,a=[];e["!cols"]&&e["!cols"].forEach((function(e,t){LF(e);var r=!!e.width,n=jB(t,e),i={"ss:Index":t+1};r&&(i["ss:Width"]=MF(n.width)),e.hidden&&(i["ss:Hidden"]="1"),a.push(QI("Column",null,i))}));for(var s=Array.isArray(e),o=r.s.r;o<=r.e.r;++o){for(var l=[Qz(o,(e["!rows"]||[])[o])],c=r.s.c;c<=r.e.c;++c){var u=!1;for(i=0;i!=n.length;++i)if(!(n[i].s.c>c)&&!(n[i].s.r>o)&&!(n[i].e.c<c)&&!(n[i].e.r<o)){n[i].s.c==c&&n[i].s.r==o||(u=!0);break}if(!u){var d={r:o,c:c},h=xD(d),p=s?(e[o]||[])[c]:e[h];l.push(Xz(p,h,e,t,0,0,d))}}l.push("</Row>"),l.length>2&&a.push(l.join(""))}return a.join("")}(a,t):"",s.length>0&&n.push("<Table>"+s+"</Table>"),n.push(function(e,t,r,n){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(QI("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(QI("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(QI("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)i.push(QI("Visible",1==n.Workbook.Sheets[r].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&(!n.Workbook.Sheets[a]||n.Workbook.Sheets[a].Hidden);++a);a==r&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(YI("ProtectContents","True")),e["!protect"].objects&&i.push(YI("ProtectObjects","True")),e["!protect"].scenarios&&i.push(YI("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||i.push(YI("EnableSelection","UnlockedCells")):i.push(YI("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach((function(t){e["!protect"][t[0]]&&i.push("<"+t[1]+"/>")}))),0==i.length?"":QI("WorksheetOptions",i.join(""),{xmlns:vO})}(a,0,e,r)),n.join("")}function eU(e,t){t||(t={}),e.SSF||(e.SSF=eI(ZA)),e.SSF&&(PM(),TM(e.SSF),t.revssf=zM(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],CB(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Zz(e,t)),r.push(""),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(QI("Worksheet",Jz(n,t,e),{"ss:Name":AI(e.SheetNames[n])}));return r[2]=function(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach((function(e,t){var n=[];n.push(QI("NumberFormat",null,{"ss:Format":AI(ZA[e.numFmtId])}));var i={"ss:ID":"s"+(21+t)};r.push(QI("Style",n.join(""),i))})),QI("Styles",r.join(""))}(0,t),r[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var i=t[n];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||r.push(Yz(i)))}return QI("Names",r.join(""))}(e),xI+QI("Workbook",r.join(""),{xmlns:xO,"xmlns:o":gO,"xmlns:x":vO,"xmlns:ss":xO,"xmlns:dt":yO,"xmlns:html":_O})}function tU(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=function(e){return JD(e,1)}(r),r.length-r.l<=4)return t;var n=r.read_shift(4);return 0==n||n>40?t:(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4||1907505652!==(n=r.read_shift(4))?t:(t.UnicodeClipboardFormat=function(e){return JD(e,2)}(r),0==(n=r.read_shift(4))||n>40?t:(r.l-=4,void(t.Reserved2=r.read_shift(0,"lpwstr")))))}var rU=[60,1084,2066,2165,2175];function nU(e,t,r,n,i){var a=n,s=[],o=r.slice(r.l,r.l+a);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:i.enc.insitu(o)}s.push(o),r.l+=a;for(var l=WO(r,r.l),c=pU[l],u=0;null!=c&&rU.indexOf(l)>-1;)a=WO(r,r.l+2),u=r.l+4,2066==l?u+=4:2165!=l&&2175!=l||(u+=12),o=r.slice(u,r.l+4+a),s.push(o),r.l+=4+a,c=pU[l=WO(r,r.l)];var d=LA(s);nD(d,0);var h=0;d.lens=[];for(var p=0;p<s.length;++p)d.lens.push(h),h+=s[p].length;if(d.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+d.length+" < "+n;return t.f(d,d.length,i)}function iU(e,t,r){if("z"!==e.t&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=ZA[n])}catch(W){if(t.WTF)throw W}if(!t||!1!==t.cellText)try{"e"===e.t?e.w=e.w||lR[e.v]:0===n||"General"==n?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=aM(e.v):e.w=sM(e.v):e.w=CM(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(W){if(t.WTF)throw W}if(t.cellDates&&n&&"n"==e.t&&kM(ZA[n]||String(n))){var i=JA(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function aU(e,t,r){return{v:e,ixfe:t,t:r}}function sU(e,t){var r={opts:{}},n={};var i,a,s,o,l,c,u,d,h=t.dense?[]:{},p={},f={},m=null,g=[],v="",x={},y="",b={},w=[],_=[],k=[],S={Sheets:[],WBProps:{date1904:!1},Views:[{}]},j={},E=function(e){return e<8?oR[e]:e<64&&k[e-8]||oR[e]},C=function(e,t,r){if(!(L>1)&&!(r.sheetRows&&e.r>=r.sheetRows)){if(r.cellStyles&&t.XF&&t.XF.data&&function(e,t,r){var n,i=t.XF.data;i&&i.patternType&&r&&r.cellStyles&&(t.s={},t.s.patternType=i.patternType,(n=TF(E(i.icvFore)))&&(t.s.fgColor={rgb:n}),(n=TF(E(i.icvBack)))&&(t.s.bgColor={rgb:n}))}(0,t,r),delete t.ixfe,delete t.XF,i=e,y=xD(e),f&&f.s&&f.e||(f={s:{r:0,c:0},e:{r:0,c:0}}),e.r<f.s.r&&(f.s.r=e.r),e.c<f.s.c&&(f.s.c=e.c),e.r+1>f.e.r&&(f.e.r=e.r+1),e.c+1>f.e.c&&(f.e.c=e.c+1),r.cellFormula&&t.f)for(var n=0;n<w.length;++n)if(!(w[n][0].s.c>e.c||w[n][0].s.r>e.r)&&!(w[n][0].e.c<e.c||w[n][0].e.r<e.r)){t.F=bD(w[n][0]),w[n][0].s.c==e.c&&w[n][0].s.r==e.r||delete t.f,t.f&&(t.f=""+iB(w[n][1],0,e,O,N));break}r.dense?(h[e.r]||(h[e.r]=[]),h[e.r][e.c]=t):h[y]=t}},N={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(N.password=t.password);var T=[],P=[],A=[],M=[],I=!1,O=[];O.SheetNames=N.snames,O.sharedf=N.sharedf,O.arrayf=N.arrayf,O.names=[],O.XTI=[];var D,R=0,L=0,F=0,$=[],B=[];N.codepage=1200,xA(1200);for(var z=!1;e.l<e.length-1;){var U=e.l,V=e.read_shift(2);if(0===V&&10===R)break;var H=e.l===e.length?0:e.read_shift(2),G=pU[V];if(G&&G.f){if(t.bookSheets&&133===R&&133!==V)break;if(R=V,2===G.r||12==G.r){var W=e.read_shift(2);if(H-=2,!N.enc&&W!==V&&((255&W)<<8|W>>8)!==V)throw new Error("rt mismatch: "+W+"!="+V);12==G.r&&(e.l+=10,H-=10)}var q={};if(q=10===V?G.f(e,H,N):nU(V,G,e,H,N),0==L&&-1===[9,521,1033,2057].indexOf(R))continue;switch(V){case 34:r.opts.Date1904=S.WBProps.date1904=q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(N.enc||(e.l=0),N.enc=q,!t.password)throw new Error("File is password-protected");if(null==q.valid)throw new Error("Encryption scheme unsupported");if(!q.valid)throw new Error("Password is incorrect");break;case 92:N.lastuser=q;break;case 66:var K=Number(q);switch(K){case 21010:K=1200;break;case 32768:K=1e4;break;case 32769:K=1252}xA(N.codepage=K),z=!0;break;case 317:N.rrtabid=q;break;case 25:N.winlocked=q;break;case 439:r.opts.RefreshAll=q;break;case 12:r.opts.CalcCount=q;break;case 16:r.opts.CalcDelta=q;break;case 17:r.opts.CalcIter=q;break;case 13:r.opts.CalcMode=q;break;case 14:r.opts.CalcPrecision=q;break;case 95:r.opts.CalcSaveRecalc=q;break;case 15:N.CalcRefMode=q;break;case 2211:r.opts.FullCalc=q;break;case 129:q.fDialog&&(h["!type"]="dialog"),q.fBelow||((h["!outline"]||(h["!outline"]={})).above=!0),q.fRight||((h["!outline"]||(h["!outline"]={})).left=!0);break;case 224:_.push(q);break;case 430:O.push([q]),O[O.length-1].XTI=[];break;case 35:case 547:O[O.length-1].push(q);break;case 24:case 536:D={Name:q.Name,Ref:iB(q.rgce,0,null,O,N)},q.itab>0&&(D.Sheet=q.itab-1),O.names.push(D),O[0]||(O[0]=[],O[0].XTI=[]),O[O.length-1].push(q),"_xlnm._FilterDatabase"==q.Name&&q.itab>0&&q.rgce&&q.rgce[0]&&q.rgce[0][0]&&"PtgArea3d"==q.rgce[0][0][0]&&(B[q.itab-1]={ref:bD(q.rgce[0][0][1][2])});break;case 22:N.ExternCount=q;break;case 23:0==O.length&&(O[0]=[],O[0].XTI=[]),O[O.length-1].XTI=O[O.length-1].XTI.concat(q),O.XTI=O.XTI.concat(q);break;case 2196:if(N.biff<8)break;null!=D&&(D.Comment=q[1]);break;case 18:h["!protect"]=q;break;case 19:0!==q&&N.WTF&&console.error("Password verifier: "+q);break;case 133:p[q.pos]=q,N.snames.push(q.name);break;case 10:if(--L)break;if(f.e){if(f.e.r>0&&f.e.c>0){if(f.e.r--,f.e.c--,h["!ref"]=bD(f),t.sheetRows&&t.sheetRows<=f.e.r){var Z=f.e.r;f.e.r=t.sheetRows-1,h["!fullref"]=h["!ref"],h["!ref"]=bD(f),f.e.r=Z}f.e.r++,f.e.c++}T.length>0&&(h["!merges"]=T),P.length>0&&(h["!objects"]=P),A.length>0&&(h["!cols"]=A),M.length>0&&(h["!rows"]=M),S.Sheets.push(j)}""===v?x=h:n[v]=h,h=t.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===N.biff&&(N.biff={9:2,521:3,1033:4}[V]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[q.BIFFVer]||8),N.biffguess=0==q.BIFFVer,0==q.BIFFVer&&4096==q.dt&&(N.biff=5,z=!0,xA(N.codepage=28591)),8==N.biff&&0==q.BIFFVer&&16==q.dt&&(N.biff=2),L++)break;if(h=t.dense?[]:{},N.biff<8&&!z&&(z=!0,xA(N.codepage=t.codepage||1252)),N.biff<5||0==q.BIFFVer&&4096==q.dt){""===v&&(v="Sheet1"),f={s:{r:0,c:0},e:{r:0,c:0}};var Y={pos:e.l-H,name:v};p[Y.pos]=Y,N.snames.push(v)}else v=(p[U]||{name:""}).name;32==q.dt&&(h["!type"]="chart"),64==q.dt&&(h["!type"]="macro"),T=[],P=[],N.arrayf=w=[],A=[],M=[],I=!1,j={Hidden:(p[U]||{hs:0}).hs,name:v};break;case 515:case 3:case 2:"chart"==h["!type"]&&(t.dense?(h[q.r]||[])[q.c]:h[xD({c:q.c,r:q.r})])&&++q.c,c={ixfe:q.ixfe,XF:_[q.ixfe]||{},v:q.val,t:"n"},F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C({c:q.c,r:q.r},c,t);break;case 5:case 517:c={ixfe:q.ixfe,XF:_[q.ixfe],v:q.val,t:q.t},F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C({c:q.c,r:q.r},c,t);break;case 638:c={ixfe:q.ixfe,XF:_[q.ixfe],v:q.rknum,t:"n"},F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C({c:q.c,r:q.r},c,t);break;case 189:for(var X=q.c;X<=q.C;++X){var Q=q.rkrec[X-q.c][0];c={ixfe:Q,XF:_[Q],v:q.rkrec[X-q.c][1],t:"n"},F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C({c:X,r:q.r},c,t)}break;case 6:case 518:case 1030:if("String"==q.val){m=q;break}if((c=aU(q.val,q.cell.ixfe,q.tt)).XF=_[c.ixfe],t.cellFormula){var J=q.formula;if(J&&J[0]&&J[0][0]&&"PtgExp"==J[0][0][0]){var ee=J[0][0][1][0],te=J[0][0][1][1],re=xD({r:ee,c:te});b[re]?c.f=""+iB(q.formula,0,q.cell,O,N):c.F=((t.dense?(h[ee]||[])[te]:h[re])||{}).F}else c.f=""+iB(q.formula,0,q.cell,O,N)}F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C(q.cell,c,t),m=q;break;case 7:case 519:if(!m)throw new Error("String record expects Formula");m.val=q,(c=aU(q,m.cell.ixfe,"s")).XF=_[c.ixfe],t.cellFormula&&(c.f=""+iB(m.formula,0,m.cell,O,N)),F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C(m.cell,c,t),m=null;break;case 33:case 545:w.push(q);var ne=xD(q[0].s);if(a=t.dense?(h[q[0].s.r]||[])[q[0].s.c]:h[ne],t.cellFormula&&a){if(!m)break;if(!ne||!a)break;a.f=""+iB(q[1],0,q[0],O,N),a.F=bD(q[0])}break;case 1212:if(!t.cellFormula)break;if(y){if(!m)break;b[xD(m.cell)]=q[0],((a=t.dense?(h[m.cell.r]||[])[m.cell.c]:h[xD(m.cell)])||{}).f=""+iB(q[0],0,i,O,N)}break;case 253:c=aU(g[q.isst].t,q.ixfe,"s"),g[q.isst].h&&(c.h=g[q.isst].h),c.XF=_[c.ixfe],F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C({c:q.c,r:q.r},c,t);break;case 513:t.sheetStubs&&(c={ixfe:q.ixfe,XF:_[q.ixfe],t:"z"},F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C({c:q.c,r:q.r},c,t));break;case 190:if(t.sheetStubs)for(var ie=q.c;ie<=q.C;++ie){var ae=q.ixfe[ie-q.c];c={ixfe:ae,XF:_[ae],t:"z"},F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C({c:ie,r:q.r},c,t)}break;case 214:case 516:case 4:(c=aU(q.val,q.ixfe,"s")).XF=_[c.ixfe],F>0&&(c.z=$[c.ixfe>>8&63]),iU(c,t,r.opts.Date1904),C({c:q.c,r:q.r},c,t);break;case 0:case 512:1===L&&(f=q);break;case 252:g=q;break;case 1054:if(4==N.biff){$[F++]=q[1];for(var se=0;se<F+163&&ZA[se]!=q[1];++se);se>=163&&NM(q[1],F+163)}else NM(q[1],q[0]);break;case 30:$[F++]=q;for(var oe=0;oe<F+163&&ZA[oe]!=q;++oe);oe>=163&&NM(q,F+163);break;case 229:T=T.concat(q);break;case 93:P[q.cmo[0]]=N.lastobj=q;break;case 438:N.lastobj.TxO=q;break;case 127:N.lastobj.ImData=q;break;case 440:for(l=q[0].s.r;l<=q[0].e.r;++l)for(o=q[0].s.c;o<=q[0].e.c;++o)(a=t.dense?(h[l]||[])[o]:h[xD({c:o,r:l})])&&(a.l=q[1]);break;case 2048:for(l=q[0].s.r;l<=q[0].e.r;++l)for(o=q[0].s.c;o<=q[0].e.c;++o)(a=t.dense?(h[l]||[])[o]:h[xD({c:o,r:l})])&&a.l&&(a.l.Tooltip=q[1]);break;case 28:if(N.biff<=5&&N.biff>=2)break;a=t.dense?(h[q[0].r]||[])[q[0].c]:h[xD(q[0])];var le=P[q[2]];a||(t.dense?(h[q[0].r]||(h[q[0].r]=[]),a=h[q[0].r][q[0].c]={t:"z"}):a=h[xD(q[0])]={t:"z"},f.e.r=Math.max(f.e.r,q[0].r),f.s.r=Math.min(f.s.r,q[0].r),f.e.c=Math.max(f.e.c,q[0].c),f.s.c=Math.min(f.s.c,q[0].c)),a.c||(a.c=[]),s={a:q[1],t:le.TxO.t},a.c.push(s);break;case 2173:_[q.ixfe],q.ext.forEach((function(e){e[0]}));break;case 125:if(!N.cellStyles)break;for(;q.e>=q.s;)A[q.e--]={width:q.w/256,level:q.level||0,hidden:!!(1&q.flags)},I||(I=!0,RF(q.w/256)),LF(A[q.e+1]);break;case 520:var ce={};null!=q.level&&(M[q.r]=ce,ce.level=q.level),q.hidden&&(M[q.r]=ce,ce.hidden=!0),q.hpt&&(M[q.r]=ce,ce.hpt=q.hpt,ce.hpx=BF(q.hpt));break;case 38:case 39:case 40:case 41:h["!margins"]||EB(h["!margins"]={}),h["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[V]]=q;break;case 161:h["!margins"]||EB(h["!margins"]={}),h["!margins"].header=q.header,h["!margins"].footer=q.footer;break;case 574:q.RTL&&(S.Views[0].RTL=!0);break;case 146:k=q;break;case 2198:d=q;break;case 140:u=q;break;case 442:v?j.CodeName=q||j.name:S.WBProps.CodeName=q||"ThisWorkbook"}}else G||console.error("Missing Info for XLS Record 0x"+V.toString(16)),e.l+=H}return r.SheetNames=FM(p).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return p[e].name})),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&x["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=x)):r.Preamble=x,r.Sheets&&B.forEach((function(e,t){r.Sheets[r.SheetNames[t]]["!autofilter"]=e})),r.Strings=g,r.SSF=eI(ZA),N.enc&&(r.Encryption=N.enc),d&&(r.Themes=d),r.Metadata={},void 0!==u&&(r.Metadata.Country=u),O.names.length>0&&(S.Names=O.names),r.Workbook=S,r}var oU="e0859ff2f94f6810ab9108002b27b3d9",lU="02d5cdd59c2e1b10939708002b2cf9ae",cU="05d5cdd59c2e1b10939708002b2cf9ae";function uU(e,t){var r,n,i,a;if(t||(t={}),mV(t),yA(),t.codepage&&vA(t.codepage),e.FullPaths){if(OM.find(e,"/encryption"))throw new Error("File is password-protected");r=OM.find(e,"!CompObj"),n=OM.find(e,"/Workbook")||OM.find(e,"/Book")}else{switch(t.type){case"base64":e=IA(NA(e));break;case"binary":e=IA(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e))}nD(e,0),n={content:e}}if(r&&tU(r),t.bookProps&&!t.bookSheets)i={};else{var s=TA?"buffer":"array";if(n&&n.content)i=sU(n.content,t);else if((a=OM.find(e,"PerfectOffice_MAIN"))&&a.content)i=tF.to_workbook(a.content,(t.type=s,t));else{if(!(a=OM.find(e,"NativeContent_MAIN"))||!a.content)throw(a=OM.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");i=tF.to_workbook(a.content,(t.type=s,t))}t.bookVBA&&e.FullPaths&&OM.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=function(e){var t=OM.utils.cfb_new({root:"R"});return e.FullPaths.forEach((function(r,n){if("/"!==r.slice(-1)&&r.match(/_VBA_PROJECT_CUR/)){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");OM.utils.cfb_add(t,i,e.FileIndex[n].content)}})),OM.write(t)}(e))}var o={};return e.FullPaths&&function(e,t,r){var n=OM.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=KR(n,rR,lU);for(var a in i)t[a]=i[a]}catch(W){if(r.WTF)throw W}var s=OM.find(e,"/!SummaryInformation");if(s&&s.size>0)try{var o=KR(s,nR,oU);for(var l in o)null==t[l]&&(t[l]=o[l])}catch(W){if(r.WTF)throw W}t.HeadingPairs&&t.TitlesOfParts&&(CR(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}(e,o,t),i.Props=i.Custprops=o,t.bookFiles&&(i.cfb=e),i}function dU(e,t){var r=t||{},n=OM.utils.cfb_new({root:"R"}),i="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":i="/Workbook",r.biff=8;break;case"biff5":i="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return OM.utils.cfb_add(n,i,kU(e,r)),8==r.biff&&(e.Props||e.Custprops)&&function(e,t){var r,n=[],i=[],a=[],s=0,o=$M(rR,"n"),l=$M(nR,"n");if(e.Props)for(r=FM(e.Props),s=0;s<r.length;++s)(Object.prototype.hasOwnProperty.call(o,r[s])?n:Object.prototype.hasOwnProperty.call(l,r[s])?i:a).push([r[s],e.Props[r[s]]]);if(e.Custprops)for(r=FM(e.Custprops),s=0;s<r.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},r[s])||(Object.prototype.hasOwnProperty.call(o,r[s])?n:Object.prototype.hasOwnProperty.call(l,r[s])?i:a).push([r[s],e.Custprops[r[s]]]);var c=[];for(s=0;s<a.length;++s)GR.indexOf(a[s][0])>-1||ER.indexOf(a[s][0])>-1||null!=a[s][1]&&c.push(a[s]);i.length&&OM.utils.cfb_add(t,"/\x05SummaryInformation",ZR(i,oU,l,nR)),(n.length||c.length)&&OM.utils.cfb_add(t,"/\x05DocumentSummaryInformation",ZR(n,lU,o,rR,c.length?c:null,cU))}(e,n),8==r.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach((function(r,n){if(0!=n){var i=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&OM.utils.cfb_add(e,i,t.FileIndex[n].content)}}))}(n,OM.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),n}var hU={0:{f:function(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,7&a&&(r.level=7&a),16&a&&(r.hidden=!0),32&a&&(r.hpt=i/20),r}},1:{f:function(e){return[OD(e)]}},2:{f:function(e){return[OD(e),GD(e),"n"]}},3:{f:function(e){return[OD(e),e.read_shift(1),"e"]}},4:{f:function(e){return[OD(e),e.read_shift(1),"b"]}},5:{f:function(e){return[OD(e),YD(e),"n"]}},6:{f:function(e){return[OD(e),ND(e),"str"]}},7:{f:function(e){return[OD(e),e.read_shift(4),"s"]}},8:{f:function(e,t,r){var n=e.l+t,i=OD(e);i.r=r["!row"];var a=[i,ND(e),"str"];if(r.cellFormula){e.l+=2;var s=dB(e,n-e.l,r);a[3]=iB(s,0,i,r.supbooks,r)}else e.l=n;return a}},9:{f:function(e,t,r){var n=e.l+t,i=OD(e);i.r=r["!row"];var a=[i,YD(e),"n"];if(r.cellFormula){e.l+=2;var s=dB(e,n-e.l,r);a[3]=iB(s,0,i,r.supbooks,r)}else e.l=n;return a}},10:{f:function(e,t,r){var n=e.l+t,i=OD(e);i.r=r["!row"];var a=[i,e.read_shift(1),"b"];if(r.cellFormula){e.l+=2;var s=dB(e,n-e.l,r);a[3]=iB(s,0,i,r.supbooks,r)}else e.l=n;return a}},11:{f:function(e,t,r){var n=e.l+t,i=OD(e);i.r=r["!row"];var a=[i,e.read_shift(1),"e"];if(r.cellFormula){e.l+=2;var s=dB(e,n-e.l,r);a[3]=iB(s,0,i,r.supbooks,r)}else e.l=n;return a}},12:{f:function(e){return[RD(e)]}},13:{f:function(e){return[RD(e),GD(e),"n"]}},14:{f:function(e){return[RD(e),e.read_shift(1),"e"]}},15:{f:function(e){return[RD(e),e.read_shift(1),"b"]}},16:{f:XB},17:{f:function(e){return[RD(e),ND(e),"str"]}},18:{f:function(e){return[RD(e),e.read_shift(4),"s"]}},19:{f:AD},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),a=UD(e),s=hB(e,0,r),o=BD(e);e.l=n;var l={Name:a,Ptg:s};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,r){var n={};n.sz=e.read_shift(2)/20;var i=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1),700===e.read_shift(2)&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript"}var a=e.read_shift(1);0!=a&&(n.underline=a);var s=e.read_shift(1);s>0&&(n.family=s);var o=e.read_shift(1);switch(o>0&&(n.charset=o),e.l++,n.color=function(e){var t={},r=e.read_shift(1)>>>1,n=e.read_shift(1),i=e.read_shift(2,"i"),a=e.read_shift(1),s=e.read_shift(1),o=e.read_shift(1);switch(e.l++,r){case 0:t.auto=1;break;case 1:t.index=n;var l=oR[n];l&&(t.rgb=TF(l));break;case 2:t.rgb=TF([a,s,o]);break;case 3:t.theme=n}return 0!=i&&(t.tint=i>0?i/32767:i/32768),t}(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor"}return n.name=ND(e),n}},44:{f:function(e,t){return[e.read_shift(2),ND(e)]}},45:{f:YF},46:{f:e$},47:{f:function(e,t){var r=e.l+t,n=e.read_shift(2),i=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:i}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:GL},62:{f:function(e){return[OD(e),AD(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=xD(r);var n=e.read_shift(1);return 2&n&&(t.l="1"),8&n&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:iD,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var r={},n=e[e.l];return++e.l,r.above=!(64&n),r.left=!(128&n),e.l+=18,r.name=FD(e,t-19),r}},148:{f:ZB,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var i=t>8?ND(e):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(65536&n),r.backupFile=!!(64&n),r.checkCompatibility=!!(4096&n),r.date1904=!!(1&n),r.filterPrivacy=!!(8&n),r.hidePivotFieldList=!!(1024&n),r.promptedSolutions=!!(16&n),r.publishItems=!!(2048&n),r.refreshAllConnections=!!(262144&n),r.saveExternalLinkValues=!!(128&n),r.showBorderUnselectedTables=!!(4&n),r.showInkAnnotation=!!(32&n),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(32768&n),r.updateLinks=["userSet","never","always"][n>>8&3],r}},154:{},155:{},156:{f:function(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=VD(e,t-8),r.name=ND(e),r}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:KD},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:QB},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ND(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:VD},357:{},358:{},359:{},360:{T:1},361:{},362:{f:BL},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,r){var n=e.l+t,i=qD(e),a=e.read_shift(1),s=[i];if(s[2]=a,r.cellFormula){var o=uB(e,n-e.l,r);s[1]=o}else e.l=n;return s}},427:{f:function(e,t,r){var n=e.l+t,i=[KD(e,16)];if(r.cellFormula){var a=pB(e,n-e.l,r);i[1]=a,e.l=n}else e.l=n;return i}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return ez.forEach((function(r){t[r]=YD(e)})),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var r=e.l+t,n=KD(e,16),i=BD(e),a=ND(e),s=ND(e),o=ND(e);e.l=r;var l={rfx:n,relId:i,loc:a,display:o};return s&&(l.Tooltip=s),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:VD},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:S$},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var r=KD(e,16);return t.rfx=r.s,t.ref=xD(r.s),e.l+=16,t}},636:{T:-1},637:{f:MD},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:ND(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},pU={6:{f:oB},10:{f:YR},12:{f:JR},13:{f:JR},14:{f:XR},15:{f:XR},16:{f:YD},17:{f:XR},18:{f:XR},19:{f:JR},20:{f:RL},21:{f:RL},23:{f:BL},24:{f:$L},25:{f:XR},26:{},27:{},28:{f:function(e,t,r){return function(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=lL(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:i},o,s,a]}}(e,0,r)}},29:{},34:{f:XR},35:{f:LL},38:{f:YD},39:{f:YD},40:{f:YD},41:{f:YD},42:{f:XR},43:{f:XR},47:{f:function(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?CF(e,t-2,n):function(e,t,r,n){var i={key:JR(e),verificationBytes:JR(e)};r.password&&(i.verifier=SF(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=EF(r.password))}(e,r.biff,r,n),n}},49:{f:function(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10}return n.name=nL(e,0,r),n}},51:{f:JR},60:{},61:{f:function(e){return{Pos:[e.read_shift(2),e.read_shift(2)],Dim:[e.read_shift(2),e.read_shift(2)],Flags:e.read_shift(2),CurTab:e.read_shift(2),FirstTab:e.read_shift(2),Selected:e.read_shift(2),TabRatio:e.read_shift(2)}}},64:{f:XR},65:{f:function(){}},66:{f:JR},77:{},80:{},81:{},82:{},85:{f:JR},89:{},90:{},91:{},92:{f:function(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,i=lL(e,0,r);return e.read_shift(t+n-e.l),i}},93:{f:function(e,t,r){if(r&&r.biff<8)return function(e,t,r){e.l+=4;var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var s=[];return s.push((UL[n]||iD)(e,t,r)),{cmo:[i,n,a],ft:s}}(e,t,r);var n=SL(e),i=function(e,t){for(var r=e.l+t,n=[];e.l<r;){var i=e.read_shift(2);e.l-=2;try{n.push(EL[i](e,r-e.l))}catch(W){return e.l=r,n}}return e.l!=r&&(e.l=r),n}(e,t-22,n[1]);return{cmo:n,ft:i}}},94:{},95:{f:XR},96:{},97:{},99:{f:XR},125:{f:GL},128:{f:function(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(0!==t[0]&&t[0]--,0!==t[1]&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}},129:{f:function(e,t,r){var n=r&&8==r.biff||2==t?e.read_shift(2):(e.l+=t,0);return{fDialog:16&n,fBelow:64&n,fRight:128&n}}},130:{f:JR},131:{f:XR},132:{f:XR},133:{f:function(e,t,r){var n=e.read_shift(4),i=3&e.read_shift(1),a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule"}var s=nL(e,0,r);return 0===s.length&&(s="Sheet1"),{pos:n,hs:i,dt:a,name:s}}},134:{},140:{f:function(e){var t,r=[0,0];return t=e.read_shift(2),r[0]=iR[t]||t,t=e.read_shift(2),r[1]=iR[t]||t,r}},141:{f:JR},144:{},146:{f:function(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(mL(e));return r}},151:{},152:{},153:{},154:{},155:{},156:{f:JR},157:{},158:{},160:{f:qL},161:{f:function(e,t){var r={};return t<32||(e.l+=16,r.header=YD(e),r.footer=YD(e),e.l+=2),r}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(yL(e));if(e.l!==r)throw new Error("MulRK read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:s,rkrec:a}}},190:{f:function(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:s,ixfe:a}}},193:{f:YR},197:{},198:{},199:{},200:{},201:{},202:{f:XR},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:JR},220:{},221:{f:XR},222:{},224:{f:function(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,n.data=function(e,t,r,n){var i={},a=e.read_shift(4),s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return i.patternType=aR[o>>26],n.cellStyles?(i.alc=7&a,i.fWrap=a>>3&1,i.alcV=a>>4&7,i.fJustLast=a>>7&1,i.trot=a>>8&255,i.cIndent=a>>16&15,i.fShrinkToFit=a>>20&1,i.iReadOrder=a>>22&2,i.fAtrNum=a>>26&1,i.fAtrFnt=a>>27&1,i.fAtrAlc=a>>28&1,i.fAtrBdr=a>>29&1,i.fAtrPat=a>>30&1,i.fAtrProt=a>>31&1,i.dgLeft=15&s,i.dgRight=s>>4&15,i.dgTop=s>>8&15,i.dgBottom=s>>12&15,i.icvLeft=s>>16&127,i.icvRight=s>>23&127,i.grbitDiag=s>>30&3,i.icvTop=127&o,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=127&l,i.icvBack=l>>7&127,i.fsxButton=l>>14&1,i):i}(e,0,n.fStyle,r),n}},225:{f:function(e,t){return 0===t||e.read_shift(2),1200}},226:{f:YR},227:{},229:{f:function(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(bL(e));return r}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function(e,t){for(var r=e.l+t,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0;s!=i&&e.l<r;++s)a.push(iL(e));return a.Count=n,a.Unique=i,a}},253:{f:function(e){var t=gL(e);return t.isst=e.read_shift(4),t}},255:{f:function(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:tL},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:XR},353:{f:YR},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,1025==a||14849==a)return[a,i];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var s=sL(e,a),o=[];n>e.l;)o.push(oL(e));return[a,i,s,o]}},431:{f:XR},432:{},433:{},434:{},437:{},438:{f:function(e,t,r){var n=e.l,i="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(a)?e.l+=6:function(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}(e);var s=e.read_shift(2);e.read_shift(2),JR(e);var o=e.read_shift(2);e.l+=o;for(var l=1;l<e.lens.length-1;++l){if(e.l-n!=e.lens[l])throw new Error("TxO: bad continue record");var c=e[e.l];if((i+=sL(e,e.lens[l+1]-e.lens[l]-1)).length>=(c?s:2*s))break}if(i.length!==s&&i.length!==2*s)throw new Error("cchText: "+s+" != "+i.length);return e.l=n+t,{t:i}}catch(W){return e.l=n+t,{t:i}}}},439:{f:XR},440:{f:function(e,t){var r=bL(e);e.l+=16;var n=function(e,t){var r=e.l+t,n=e.read_shift(4);if(2!==n)throw new Error("Unrecognized streamVersion: "+n);var i=e.read_shift(2);e.l+=2;var a,s,o,l,c,u,d="";16&i&&(a=dL(e,e.l)),128&i&&(s=dL(e,e.l)),257===(257&i)&&(o=dL(e,e.l)),1===(257&i)&&(l=uL(e,e.l)),8&i&&(d=dL(e,e.l)),32&i&&(c=e.read_shift(16)),64&i&&(u=OR(e)),e.l=r;var h=s||o||l||"";h&&d&&(h+="#"+d),h||(h="#"+d),2&i&&"/"==h.charAt(0)&&"/"!=h.charAt(1)&&(h="file://"+h);var p={Target:h};return c&&(p.guid=c),u&&(p.time=u),a&&(p.Tooltip=a),p}(e,t-24);return[r,n]}},441:{},442:{f:oL},443:{},444:{f:JR},445:{},446:{},448:{f:YR},449:{f:function(e){return e.read_shift(2),e.read_shift(4)},r:2},450:{f:YR},512:{f:IL},513:{f:WL},515:{f:function(e,t,r){r.biffguess&&2==r.biff&&(r.biff=5);var n=gL(e),i=YD(e);return n.val=i,n}},516:{f:function(e,t,r){r.biffguess&&2==r.biff&&(r.biff=5),e.l;var n=gL(e);2==r.biff&&e.l++;var i=oL(e,e.l,r);return n.val=i,n}},517:{f:DL},519:{f:KL},520:{f:function(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,7&n&&(t.level=7&n),32&n&&(t.hidden=!0),64&n&&(t.hpt=r/20),t}},523:{},545:{f:zL},549:{f:PL},566:{},574:{f:function(e,t,r){return r&&r.biff>=2&&r.biff<5?{}:{RTL:64&e.read_shift(2)}}},638:{f:function(e){var t=e.read_shift(2),r=e.read_shift(2),n=yL(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}},659:{},1048:{},1054:{f:function(e,t,r){return[e.read_shift(2),lL(e,0,r)]}},1084:{},1212:{f:function(e,t,r){var n=_L(e);e.l++;var i=e.read_shift(1);return[sB(e,t-=8,r),i,n]}},2048:{f:function(e,t){e.read_shift(2);var r=bL(e),n=e.read_shift((t-10)/2,"dbcs-cont");return[r,n=n.replace(FA,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:CL},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:YR},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t},r:12},2173:{f:function(e,t){e.l,e.l+=2;var r=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),i=[];n-- >0;)i.push(g$(e,e.l));return{ixfe:r,ext:i}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:XR,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),i=e.read_shift(2);return[sL(e,n,r),sL(e,i,r)]}e.l+=t},r:12},2197:{},2198:{f:function(e,t,r){var n=e.l+t;if(124226!==e.read_shift(4))if(r.cellStyles){var i,a=e.slice(e.l);e.l=n;try{i=gI(a,{type:"array"})}catch(W){return}var s=dI(i,"theme/theme/theme1.xml",!0);if(s)return p$(s,r)}else e.l=n},r:12},2199:{},2200:{},2201:{},2202:{f:function(e){return[0!==e.read_shift(4),0!==e.read_shift(4),e.read_shift(4)]},r:12},2203:{f:YR},2204:{},2205:{},2206:{},2207:{},2211:{f:function(e){var t=function(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}(e);if(2211!=t.type)throw new Error("Invalid Future Record "+t.type);return 0!==e.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:JR},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function(e,t,r){var n={area:!1};if(5!=r.biff)return e.l+=t,n;var i=e.read_shift(1);return e.l+=3,16&i&&(n.area=!0),n}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(mL(e));return r}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:IL},1:{},2:{f:function(e){var t=gL(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}},3:{f:function(e){var t=gL(e);++e.l;var r=YD(e);return t.t="n",t.val=r,t}},4:{f:function(e,t,r){r.biffguess&&5==r.biff&&(r.biff=2);var n=gL(e);++e.l;var i=lL(e,0,r);return n.t="str",n.val=i,n}},5:{f:DL},7:{f:function(e){var t=e.read_shift(1);return 0===t?(e.l++,""):e.read_shift(t,"sbcs-cont")}},8:{},9:{f:CL},11:{},22:{f:JR},30:{f:ML},31:{},32:{},33:{f:zL},36:{},37:{f:PL},50:{f:function(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}},62:{},52:{},67:{},68:{f:JR},69:{},86:{},126:{},127:{f:function(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,i}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function(e,t,r){var n=e.l+t,i=gL(e),a=e.read_shift(2),s=sL(e,a,r);return e.l=n,i.t="str",i.val=s,i}},223:{},234:{},354:{},421:{},518:{f:oB},521:{f:CL},536:{f:$L},547:{f:LL},561:{},579:{},1030:{f:oB},1033:{f:CL},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function fU(e,t,r,n){var i=t;if(!isNaN(i)){var a=n||(r||[]).length||0,s=e.next(4);s.write_shift(2,i),s.write_shift(2,a),a>0&&VO(r)&&e.push(r)}}function mU(e,t,r){return e||(e=aD(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function gU(e,t,r,n){if(null!=t.v)switch(t.t){case"d":case"n":var i="d"==t.t?VM(QM(t.v)):t.v;return void(i==(0|i)&&i>=0&&i<65536?fU(e,2,function(e,t,r){var n=aD(9);return mU(n,e,t),n.write_shift(2,r),n}(r,n,i)):fU(e,3,function(e,t,r){var n=aD(15);return mU(n,e,t),n.write_shift(8,r,"f"),n}(r,n,i)));case"b":case"e":return void fU(e,5,function(e,t,r,n){var i=aD(9);return mU(i,e,t),rL(r,n||"b",i),i}(r,n,t.v,t.t));case"s":case"str":return void fU(e,4,function(e,t,r){var n=aD(8+2*r.length);return mU(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}(r,n,(t.v||"").slice(0,255)))}fU(e,1,mU(null,r,n))}function vU(e,t){var r=t||{};for(var n=oD(),i=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(i=a);if(0==i&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return fU(n,4==r.biff?1033:3==r.biff?521:9,NL(0,16,r)),function(e,t,r,n){var i,a=Array.isArray(t),s=wD(t["!ref"]||"A1"),o="",l=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=bD(s)}for(var c=s.s.r;c<=s.e.r;++c){o=fD(c);for(var u=s.s.c;u<=s.e.c;++u){c===s.s.r&&(l[u]=gD(u)),i=l[u]+o;var d=a?(t[c]||[])[u]:t[i];d&&gU(e,d,c,u)}}}(n,e.Sheets[e.SheetNames[i]],0,r),fU(n,10),n.end()}function xU(e,t,r){fU(e,49,function(e,t){var r=e.name||"Arial",n=t&&5==t.biff,i=aD(n?15+r.length:16+2*r.length);return i.write_shift(2,20*(e.sz||12)),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function yU(e,t){if(t){var r=0;t.forEach((function(t,n){++r<=256&&t&&fU(e,125,function(e,t){var r=aD(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,256*e.width),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}(jB(n,t),n))}))}}function bU(e,t,r,n,i){var a=16+CB(i.cellXfs,t,i);if(null!=t.v||t.bf)if(t.bf)fU(e,6,lB(t,r,n,0,a));else switch(t.t){case"d":case"n":fU(e,515,function(e,t,r,n){var i=aD(14);return vL(e,t,n,i),XD(r,i),i}(r,n,"d"==t.t?VM(QM(t.v)):t.v,a));break;case"b":case"e":fU(e,517,function(e,t,r,n,i,a){var s=aD(8);return vL(e,t,n,s),rL(r,a,s),s}(r,n,t.v,a,0,t.t));break;case"s":case"str":if(i.bookSST)fU(e,253,function(e,t,r,n){var i=aD(10);return vL(e,t,n,i),i.write_shift(4,r),i}(r,n,SB(i.Strings,t.v,i.revStrings),a));else fU(e,516,function(e,t,r,n,i){var a=!i||8==i.biff,s=aD(+a+8+(1+a)*r.length);return vL(e,t,n,s),s.write_shift(2,r.length),a&&s.write_shift(1,1),s.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),s}(r,n,(t.v||"").slice(0,255),a,i));break;default:fU(e,513,vL(r,n,a))}else fU(e,513,vL(r,n,a))}function wU(e,t,r){var n,i=oD(),a=r.SheetNames[e],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(s),u=8==t.biff,d="",h=[],p=wD(s["!ref"]||"A1"),f=u?65536:16384;if(p.e.c>255||p.e.r>=f){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,f-1)}fU(i,2057,NL(0,16,t)),fU(i,13,eL(1)),fU(i,12,eL(100)),fU(i,15,QR(!0)),fU(i,17,QR(!1)),fU(i,16,XD(.001)),fU(i,95,QR(!0)),fU(i,42,QR(!1)),fU(i,43,QR(!1)),fU(i,130,eL(1)),fU(i,128,function(e){var t=aD(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),fU(i,131,QR(!1)),fU(i,132,QR(!1)),u&&yU(i,s["!cols"]),fU(i,512,function(e,t){var r=8!=t.biff&&t.biff?2:4,n=aD(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}(p,t)),u&&(s["!links"]=[]);for(var m=p.s.r;m<=p.e.r;++m){d=fD(m);for(var g=p.s.c;g<=p.e.c;++g){m===p.s.r&&(h[g]=gD(g)),n=h[g]+d;var v=c?(s[m]||[])[g]:s[n];v&&(bU(i,v,m,g,t),u&&v.l&&s["!links"].push([n,v.l]))}}var x=l.CodeName||l.name||a;return u&&fU(i,574,function(e){var t=aD(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&fU(i,229,function(e){var t=aD(2+8*e.length);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)wL(e[r],t);return t}(s["!merges"])),u&&function(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];fU(e,440,VL(n)),n[1].Tooltip&&fU(e,2048,HL(n))}delete t["!links"]}(i,s),fU(i,442,cL(x)),u&&function(e,t){var r=aD(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),fU(e,2151,r),(r=aD(39)).write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),wL(wD(t["!ref"]||"A1"),r),r.write_shift(4,4),fU(e,2152,r)}(i,s),fU(i,10),i.end()}function _U(e,t,r){var n=oD(),i=(e||{}).Workbook||{},a=i.Sheets||[],s=i.WBProps||{},o=8==r.biff,l=5==r.biff;(fU(n,2057,NL(0,5,r)),"xla"==r.bookType&&fU(n,135),fU(n,225,o?eL(1200):null),fU(n,193,function(e,t){t||(t=aD(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}(2)),l&&fU(n,191),l&&fU(n,192),fU(n,226),fU(n,92,function(e,t){var r=!t||8==t.biff,n=aD(r?112:54);for(n.write_shift(8==t.biff?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}(0,r)),fU(n,66,eL(o?1200:1252)),o&&fU(n,353,eL(0)),o&&fU(n,448),fU(n,317,function(e){for(var t=aD(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&fU(n,211),o&&e.vbaraw)&&fU(n,442,cL(s.CodeName||"ThisWorkbook"));fU(n,156,eL(17)),fU(n,25,QR(!1)),fU(n,18,QR(!1)),fU(n,19,eL(0)),o&&fU(n,431,QR(!1)),o&&fU(n,444,eL(0)),fU(n,61,function(){var e=aD(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),fU(n,64,QR(!1)),fU(n,141,eL(0)),fU(n,34,QR("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&RI(e.Workbook.WBProps.date1904)?"true":"false"}(e))),fU(n,14,QR(!0)),o&&fU(n,439,QR(!1)),fU(n,218,eL(0)),xU(n,0,r),function(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var i=n[0];i<=n[1];++i)null!=t[i]&&fU(e,1054,AL(i,t[i],r))}))}(n,e.SSF,r),function(e,t){for(var r=0;r<16;++r)fU(e,224,OL({numFmtId:0,style:!0},0,t));t.cellXfs.forEach((function(r){fU(e,224,OL(r,0,t))}))}(n,r),o&&fU(n,352,QR(!1));var c=n.end(),u=oD();o&&fU(u,140,function(e){return e||(e=aD(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),o&&r.Strings&&function(e,t,r,n){var i=n||(r||[]).length||0;if(i<=8224)return fU(e,t,r,i);var a=t;if(!isNaN(a)){for(var s=r.parts||[],o=0,l=0,c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;var u=e.next(4);for(u.write_shift(2,a),u.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c;l<i;){for((u=e.next(4)).write_shift(2,60),c=0;c+(s[o]||8224)<=8224;)c+=s[o]||8224,o++;u.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c}}}(u,252,function(e){var t=aD(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var r=[],n=0;n<e.length;++n)r[n]=aL(e[n]);var i=LA([t].concat(r));return i.parts=[t.length].concat(r.map((function(e){return e.length}))),i}(r.Strings)),fU(u,10);var d=u.end(),h=oD(),p=0,f=0;for(f=0;f<e.SheetNames.length;++f)p+=(o?12:11)+(o?2:1)*e.SheetNames[f].length;var m=c.length+p+d.length;for(f=0;f<e.SheetNames.length;++f){fU(h,133,TL({pos:m,hs:(a[f]||{}).Hidden||0,dt:0,name:e.SheetNames[f]},r)),m+=t[f].length}var g=h.end();if(p!=g.length)throw new Error("BS8 "+p+" != "+g.length);var v=[];return c.length&&v.push(c),g.length&&v.push(g),d.length&&v.push(d),LA(v)}function kU(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(n&&n["!ref"])yD(n["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}var i=t||{};switch(i.biff||2){case 8:case 5:return function(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=eI(ZA)),e&&e.SSF&&(PM(),TM(e.SSF),r.revssf=zM(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,gV(r),r.cellXfs=[],CB(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)n[n.length]=wU(i,r,e);return n.unshift(_U(e,n,r)),LA(n)}(e,t);case 4:case 3:case 2:return vU(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function SU(e,t){var r=t||{};var n=r.dense?[]:{},i=(e=e.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),s=i.index,o=a&&a.index||e.length,l=aI(e.slice(s,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,d=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},f=[];for(s=0;s<l.length;++s){var m=l[s].trim(),g=m.slice(0,3).toLowerCase();if("<tr"!=g){if("<td"==g||"<th"==g){var v=m.split(/<\/t[dh]>/i);for(o=0;o<v.length;++o){var x=v[o].trim();if(x.match(/<t[dh]/i)){for(var y=x,b=0;"<"==y.charAt(0)&&(b=y.indexOf(">"))>-1;)y=y.slice(b+1);for(var w=0;w<f.length;++w){var _=f[w];_.s.c==u&&_.s.r<c&&c<=_.e.r&&(u=_.e.c+1,w=-1)}var k=SI(x.slice(0,x.indexOf(">")));h=k.colspan?+k.colspan:1,((d=+k.rowspan)>1||h>1)&&f.push({s:{r:c,c:u},e:{r:c+(d||1)-1,c:u+h-1}});var S=k.t||k["data-t"]||"";if(y.length)if(y=HI(y),p.s.r>c&&(p.s.r=c),p.e.r<c&&(p.e.r=c),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),y.length){var j={t:"s",v:y};r.raw||!y.trim().length||"s"==S||("TRUE"===y?j={t:"b",v:!0}:"FALSE"===y?j={t:"b",v:!1}:isNaN(rI(y))?isNaN(iI(y).getDate())||(j={t:"d",v:QM(y)},r.cellDates||(j={t:"n",v:VM(j.v)}),j.z=r.dateNF||ZA[14]):j={t:"n",v:rI(y)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=j):n[xD({r:c,c:u})]=j,u+=h}else u+=h;else u+=h}}}}else{if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0}}return n["!ref"]=bD(p),f.length&&(n["!merges"]=f),n}function jU(e,t,r,n){for(var i=e["!merges"]||[],a=[],s=t.s.c;s<=t.e.c;++s){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>s)&&!(i[c].e.r<r||i[c].e.c<s)){if(i[c].s.r<r||i[c].s.c<s){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var u=xD({r:r,c:s}),d=n.dense?(e[r]||[])[s]:e[u],h=d&&null!=d.v&&(d.h||OI(d.w||(kD(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":d&&(p["data-t"]=d&&d.t||"z",null!=d.v&&(p["data-v"]=d.v),null!=d.z&&(p["data-z"]=d.z),d.l&&"#"!=(d.l.Target||"#").charAt(0)&&(h='<a href="'+d.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+u,a.push(QI("td",h,p))}}return"<tr>"+a.join("")+"</tr>"}var EU='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',CU="</body></html>";function NU(e,t,r){return[].join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function TU(e,t){var r=t||{},n=null!=r.header?r.header:EU,i=null!=r.footer?r.footer:CU,a=[n],s=yD(e["!ref"]);r.dense=Array.isArray(e),a.push(NU(0,0,r));for(var o=s.s.r;o<=s.e.r;++o)a.push(jU(e,s,o,r));return a.push("</table>"+i),a.join("")}function PU(e,t,r){var n=r||{};var i=0,a=0;if(null!=n.origin)if("number"==typeof n.origin)i=n.origin;else{var s="string"==typeof n.origin?vD(n.origin):n.origin;i=s.r,a=s.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:a}};if(e["!ref"]){var u=yD(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),-1==i&&(c.e.r=i=u.e.r+1)}var d=[],h=0,p=e["!rows"]||(e["!rows"]=[]),f=0,m=0,g=0,v=0,x=0,y=0;for(e["!cols"]||(e["!cols"]=[]);f<o.length&&m<l;++f){var b=o[f];if(MU(b)){if(n.display)continue;p[m]={hidden:!0}}var w=b.children;for(g=v=0;g<w.length;++g){var _=w[g];if(!n.display||!MU(_)){var k=_.hasAttribute("data-v")?_.getAttribute("data-v"):_.hasAttribute("v")?_.getAttribute("v"):HI(_.innerHTML),S=_.getAttribute("data-z")||_.getAttribute("z");for(h=0;h<d.length;++h){var j=d[h];j.s.c==v+a&&j.s.r<m+i&&m+i<=j.e.r&&(v=j.e.c+1-a,h=-1)}y=+_.getAttribute("colspan")||1,((x=+_.getAttribute("rowspan")||1)>1||y>1)&&d.push({s:{r:m+i,c:v+a},e:{r:m+i+(x||1)-1,c:v+a+(y||1)-1}});var E={t:"s",v:k},C=_.getAttribute("data-t")||_.getAttribute("t")||"";null!=k&&(0==k.length?E.t=C||"z":n.raw||0==k.trim().length||"s"==C||("TRUE"===k?E={t:"b",v:!0}:"FALSE"===k?E={t:"b",v:!1}:isNaN(rI(k))?isNaN(iI(k).getDate())||(E={t:"d",v:QM(k)},n.cellDates||(E={t:"n",v:VM(E.v)}),E.z=n.dateNF||ZA[14]):E={t:"n",v:rI(k)})),void 0===E.z&&null!=S&&(E.z=S);var N="",T=_.getElementsByTagName("A");if(T&&T.length)for(var P=0;P<T.length&&(!T[P].hasAttribute("href")||"#"==(N=T[P].getAttribute("href")).charAt(0));++P);N&&"#"!=N.charAt(0)&&(E.l={Target:N}),n.dense?(e[m+i]||(e[m+i]=[]),e[m+i][v+a]=E):e[xD({c:v+a,r:m+i})]=E,c.e.c<v+a&&(c.e.c=v+a),v+=y}}++m}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,m-1+i),e["!ref"]=bD(c),m>=l&&(e["!fullref"]=bD((c.e.r=o.length-f+m-1+i,c))),e}function AU(e,t){return PU((t||{}).dense?[]:{},e,t)}function MU(e){var t="",r=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}function IU(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,(function(e,t){return Array(parseInt(t,10)+1).join(" ")})).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[NI(t.replace(/<[^>]*>/g,""))]}var OU={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function DU(e,t){var r=t||{};var n,i,a,s,o,l,c=eO(e),u=[],d={name:""},h="",p=0,f={},m=[],g=r.dense?[]:{},v={value:""},x="",y=0,b=[],w=-1,_=-1,k={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,j={},E=[],C={},N=[],T=1,P=1,A=[],M={Names:[]},I={},O=["",""],D=[],R={},L="",F=0,$=!1,B=!1,z=0;for(tO.lastIndex=0,c=c.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");o=tO.exec(c);)switch(o[3]=o[3].replace(/_.*$/,"")){case"table":case"\u5de5\u4f5c\u8868":"/"===o[1]?(k.e.c>=k.s.c&&k.e.r>=k.s.r?g["!ref"]=bD(k):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=k.e.r&&(g["!fullref"]=g["!ref"],k.e.r=r.sheetRows-1,g["!ref"]=bD(k)),E.length&&(g["!merges"]=E),N.length&&(g["!rows"]=N),a.name=a["\u540d\u79f0"]||a.name,"undefined"!==typeof JSON&&JSON.stringify(a),m.push(a.name),f[a.name]=g,B=!1):"/"!==o[0].charAt(o[0].length-2)&&(a=SI(o[0],!1),w=_=-1,k.s.r=k.s.c=1e7,k.e.r=k.e.c=0,g=r.dense?[]:{},E=[],N=[],B=!0);break;case"table-row-group":"/"===o[1]?--S:++S;break;case"table-row":case"\u884c":if("/"===o[1]){w+=T,T=1;break}if((s=SI(o[0],!1))["\u884c\u53f7"]?w=s["\u884c\u53f7"]-1:-1==w&&(w=0),(T=+s["number-rows-repeated"]||1)<10)for(z=0;z<T;++z)S>0&&(N[w+z]={level:S});_=-1;break;case"covered-table-cell":"/"!==o[1]&&++_,r.sheetStubs&&(r.dense?(g[w]||(g[w]=[]),g[w][_]={t:"z"}):g[xD({r:w,c:_})]={t:"z"}),x="",b=[];break;case"table-cell":case"\u6570\u636e":if("/"===o[0].charAt(o[0].length-2))++_,v=SI(o[0],!1),P=parseInt(v["number-columns-repeated"]||"1",10),l={t:"z",v:null},v.formula&&0!=r.cellFormula&&(l.f=vB(NI(v.formula))),"string"==(v["\u6570\u636e\u7c7b\u578b"]||v["value-type"])&&(l.t="s",l.v=NI(v["string-value"]||""),r.dense?(g[w]||(g[w]=[]),g[w][_]=l):g[xD({r:w,c:_})]=l),_+=P-1;else if("/"!==o[1]){x="",y=0,b=[],P=1;var U=T?w+T-1:w;if(++_>k.e.c&&(k.e.c=_),_<k.s.c&&(k.s.c=_),w<k.s.r&&(k.s.r=w),U>k.e.r&&(k.e.r=U),D=[],R={},l={t:(v=SI(o[0],!1))["\u6570\u636e\u7c7b\u578b"]||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=NI(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(C={s:{r:w,c:_},e:{r:w+(parseInt(v["number-matrix-rows-spanned"],10)||0)-1,c:_+(parseInt(v["number-matrix-columns-spanned"],10)||0)-1}},l.F=bD(C),A.push([C,l.F])),v.formula)l.f=vB(v.formula);else for(z=0;z<A.length;++z)w>=A[z][0].s.r&&w<=A[z][0].e.r&&_>=A[z][0].s.c&&_<=A[z][0].e.c&&(l.F=A[z][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(C={s:{r:w,c:_},e:{r:w+(parseInt(v["number-rows-spanned"],10)||0)-1,c:_+(parseInt(v["number-columns-spanned"],10)||0)-1}},E.push(C)),v["number-columns-repeated"]&&(P=parseInt(v["number-columns-repeated"],10)),l.t){case"boolean":l.t="b",l.v=RI(v["boolean-value"]);break;case"float":case"percentage":case"currency":l.t="n",l.v=parseFloat(v.value);break;case"date":l.t="d",l.v=QM(v["date-value"]),r.cellDates||(l.t="n",l.v=VM(l.v)),l.z="m/d/yy";break;case"time":l.t="n",l.v=KM(v["time-value"])/86400,r.cellDates&&(l.t="d",l.v=qM(l.v)),l.z="HH:MM:SS";break;case"number":l.t="n",l.v=parseFloat(v["\u6570\u636e\u6570\u503c"]);break;default:if("string"!==l.t&&"text"!==l.t&&l.t)throw new Error("Unsupported value type "+l.t);l.t="s",null!=v["string-value"]&&(x=NI(v["string-value"]),b=[])}}else{if($=!1,"s"===l.t&&(l.v=x||"",b.length&&(l.R=b),$=0==y),I.Target&&(l.l=I),D.length>0&&(l.c=D,D=[]),x&&!1!==r.cellText&&(l.w=x),$&&(l.t="z",delete l.v),(!$||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=w))for(var V=0;V<T;++V){if(P=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(g[w+V]||(g[w+V]=[]),g[w+V][_]=0==V?l:eI(l);--P>0;)g[w+V][_+P]=eI(l);else for(g[xD({r:w+V,c:_})]=l;--P>0;)g[xD({r:w+V,c:_+P})]=eI(l);k.e.c<=_&&(k.e.c=_)}_+=(P=parseInt(v["number-columns-repeated"]||"1",10))-1,P=0,l={},x="",b=[]}I={};break;case"document":case"document-content":case"\u7535\u5b50\u8868\u683c\u6587\u6863":case"spreadsheet":case"\u4e3b\u4f53":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===o[1]){if((n=u.pop())[0]!==o[3])throw"Bad state: "+n}else"/"!==o[0].charAt(o[0].length-2)&&u.push([o[3],!0]);break;case"annotation":if("/"===o[1]){if((n=u.pop())[0]!==o[3])throw"Bad state: "+n;R.t=x,b.length&&(R.R=b),R.a=L,D.push(R)}else"/"!==o[0].charAt(o[0].length-2)&&u.push([o[3],!1]);L="",F=0,x="",y=0,b=[];break;case"creator":"/"===o[1]?L=c.slice(F,o.index):F=o.index+o[0].length;break;case"meta":case"\u5143\u6570\u636e":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===o[1]){if((n=u.pop())[0]!==o[3])throw"Bad state: "+n}else"/"!==o[0].charAt(o[0].length-2)&&u.push([o[3],!1]);x="",y=0,b=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"\u7535\u5b50\u8868\u683c":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"\u6807\u9898":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===o[1]){if(j[d.name]=h,(n=u.pop())[0]!==o[3])throw"Bad state: "+n}else"/"!==o[0].charAt(o[0].length-2)&&(h="",d=SI(o[0],!1),u.push([o[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(u[u.length-1][0]){case"time-style":case"date-style":i=SI(o[0],!1),h+=OU[o[3]]["long"===i.style?1:0]}break;case"text":if("/>"===o[0].slice(-2))break;if("/"===o[1])switch(u[u.length-1][0]){case"number-style":case"date-style":case"time-style":h+=c.slice(p,o.index)}else p=o.index+o[0].length;break;case"named-range":O=yB((i=SI(o[0],!1))["cell-range-address"]);var H={Name:i.name,Ref:O[0]+"!"+O[1]};B&&(H.Sheet=m.length),M.Names.push(H);break;case"p":case"\u6587\u672c\u4e32":if(["master-styles"].indexOf(u[u.length-1][0])>-1)break;if("/"!==o[1]||v&&v["string-value"])SI(o[0],!1),y=o.index+o[0].length;else{var G=IU(c.slice(y,o.index));x=(x.length>0?x+"\n":"")+G[0]}break;case"database-range":if("/"===o[1])break;try{f[(O=yB(SI(o[0])["target-range-address"]))[0]]["!autofilter"]={ref:O[1]}}catch(W){}break;case"a":if("/"!==o[1]){if(!(I=SI(o[0],!1)).href)break;I.Target=NI(I.href),delete I.href,"#"==I.Target.charAt(0)&&I.Target.indexOf(".")>-1?(O=yB(I.Target.slice(1)),I.Target="#"+O[0]+"!"+O[1]):I.Target.match(/^\.\.[\\\/]/)&&(I.Target=I.Target.slice(3))}break;default:switch(o[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"\u8868:":case"\u5b57:":break;default:if(r.WTF)throw new Error(o)}}var q={Sheets:f,SheetNames:m,Workbook:M};return r.bookSheets&&delete q.Sheets,q}function RU(e,t){t=t||{},lI(e,"META-INF/manifest.xml")&&function(e,t){for(var r,n,i=eO(e);r=tO.exec(i);)switch(r[3]){case"manifest":break;case"file-entry":if("/"==(n=SI(r[0],!1)).path&&"application/vnd.oasis.opendocument.spreadsheet"!==n.type)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw r}}(uI(e,"META-INF/manifest.xml"),t);var r=dI(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=DU(zI(r),t);return lI(e,"meta.xml")&&(n.Props=_R(uI(e,"meta.xml"))),n}function LU(e,t){return DU(e,t)}var FU=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+XI({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return xI+t}}(),$U=function(){var e="          <table:table-cell />\n",t=function(t,r,n){var i=[];i.push('      <table:table table:name="'+AI(r.SheetNames[n])+'" table:style-name="ta1">\n');var a=0,s=0,o=yD(t["!ref"]||"A1"),l=t["!merges"]||[],c=0,u=Array.isArray(t);if(t["!cols"])for(s=0;s<=o.e.c;++s)i.push("        <table:table-column"+(t["!cols"][s]?' table:style-name="co'+t["!cols"][s].ods+'"':"")+"></table:table-column>\n");var d="",h=t["!rows"]||[];for(a=0;a<o.s.r;++a)d=h[a]?' table:style-name="ro'+h[a].ods+'"':"",i.push("        <table:table-row"+d+"></table:table-row>\n");for(;a<=o.e.r;++a){for(d=h[a]?' table:style-name="ro'+h[a].ods+'"':"",i.push("        <table:table-row"+d+">\n"),s=0;s<o.s.c;++s)i.push(e);for(;s<=o.e.c;++s){var p=!1,f={},m="";for(c=0;c!=l.length;++c)if(!(l[c].s.c>s)&&!(l[c].s.r>a)&&!(l[c].e.c<s)&&!(l[c].e.r<a)){l[c].s.c==s&&l[c].s.r==a||(p=!0),f["table:number-columns-spanned"]=l[c].e.c-l[c].s.c+1,f["table:number-rows-spanned"]=l[c].e.r-l[c].s.r+1;break}if(p)i.push("          <table:covered-table-cell/>\n");else{var g=xD({r:a,c:s}),v=u?(t[a]||[])[s]:t[g];if(v&&v.f&&(f["table:formula"]=AI(xB(v.f)),v.F&&v.F.slice(0,g.length)==g)){var x=yD(v.F);f["table:number-matrix-columns-spanned"]=x.e.c-x.s.c+1,f["table:number-matrix-rows-spanned"]=x.e.r-x.s.r+1}if(v){switch(v.t){case"b":m=v.v?"TRUE":"FALSE",f["office:value-type"]="boolean",f["office:boolean-value"]=v.v?"true":"false";break;case"n":m=v.w||String(v.v||0),f["office:value-type"]="float",f["office:value"]=v.v||0;break;case"s":case"str":m=null==v.v?"":v.v,f["office:value-type"]="string";break;case"d":m=v.w||QM(v.v).toISOString(),f["office:value-type"]="date",f["office:date-value"]=QM(v.v).toISOString(),f["table:style-name"]="ce1";break;default:i.push(e);continue}var y=AI(m).replace(/  +/g,(function(e){return'<text:s text:c="'+e.length+'"/>'})).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>");if(v.l&&v.l.Target){var b=v.l.Target;"#"==(b="#"==b.charAt(0)?"#"+bB(b.slice(1)):b).charAt(0)||b.match(/^\w+:/)||(b="../"+b),y=QI("text:a",y,{"xlink:href":b.replace(/&/g,"&amp;")})}i.push("          "+QI("table:table-cell",QI("text:p",y,{}),f)+"\n")}else i.push(e)}}i.push("        </table:table-row>\n")}return i.push("      </table:table>\n"),i.join("")};return function(e,r){var n=[xI],i=XI({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),a=XI({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==r.bookType?(n.push("<office:document"+i+a+">\n"),n.push(yR().replace(/office:document-meta/g,"office:meta"))):n.push("<office:document-content"+i+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var r=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!cols"])for(var n=0;n<t["!cols"].length;++n)if(t["!cols"][n]){var i=t["!cols"][n];if(null==i.width&&null==i.wpx&&null==i.wch)continue;LF(i),i.ods=r;var a=t["!cols"][n].wpx+"px";e.push('  <style:style style:name="co'+r+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+a+'"/>\n'),e.push("  </style:style>\n"),++r}}));var n=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!rows"])for(var r=0;r<t["!rows"].length;++r)if(t["!rows"][r]){t["!rows"][r].ods=n;var i=t["!rows"][r].hpx+"px";e.push('  <style:style style:name="ro'+n+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+i+'"/>\n'),e.push("  </style:style>\n"),++n}})),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(n,e),n.push("  <office:body>\n"),n.push("    <office:spreadsheet>\n");for(var s=0;s!=e.SheetNames.length;++s)n.push(t(e.Sheets[e.SheetNames[s]],e,s));return n.push("    </office:spreadsheet>\n"),n.push("  </office:body>\n"),"fods"==r.bookType?n.push("</office:document>"):n.push("</office:document-content>"),n.join("")}}();function BU(e,t){if("fods"==t.bookType)return $U(e,t);var r=mI(),n="",i=[],a=[];return fI(r,n="mimetype","application/vnd.oasis.opendocument.spreadsheet"),fI(r,n="content.xml",$U(e,t)),i.push([n,"text/xml"]),a.push([n,"ContentFile"]),fI(r,n="styles.xml",FU(e,t)),i.push([n,"text/xml"]),a.push([n,"StylesFile"]),fI(r,n="meta.xml",xI+yR()),i.push([n,"text/xml"]),a.push([n,"MetadataFile"]),fI(r,n="manifest.rdf",function(e){var t,r,n=[xI];n.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var i=0;i!=e.length;++i)n.push(xR(e[i][0],e[i][1])),n.push((t="",r=e[i][0],['  <rdf:Description rdf:about="'+t+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+r+'"/>\n',"  </rdf:Description>\n"].join("")));return n.push(xR("","Document","pkg")),n.push("</rdf:RDF>"),n.join("")}(a)),i.push([n,"application/rdf+xml"]),fI(r,n="META-INF/manifest.xml",function(e){var t=[xI];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(i)),r}function zU(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function UU(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):zI(DA(e))}function VU(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):IA(UI(e))}function HU(e){var t=e.reduce((function(e,t){return e+t.length}),0),r=new Uint8Array(t),n=0;return e.forEach((function(e){r.set(e,n),n+=e.length})),r}function GU(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>>24}function WU(e,t){var r=t?t[0]:0,n=127&e[r];e:if(e[r++]>=128){if(n|=(127&e[r])<<7,e[r++]<128)break e;if(n|=(127&e[r])<<14,e[r++]<128)break e;if(n|=(127&e[r])<<21,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,28),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,35),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,42),++r,e[r++]<128)break e}return t&&(t[0]=r),n}function qU(e){var t=new Uint8Array(7);t[0]=127&e;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383)break e;if(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)break e;if(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)break e;if(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)break e;if(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103)break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function KU(e){var t=0,r=127&e[t];e:if(e[t++]>=128){if(r|=(127&e[t])<<7,e[t++]<128)break e;if(r|=(127&e[t])<<14,e[t++]<128)break e;if(r|=(127&e[t])<<21,e[t++]<128)break e;r|=(127&e[t])<<28}return r}function ZU(e){for(var t=[],r=[0];r[0]<e.length;){var n,i=r[0],a=WU(e,r),s=7&a,o=0;if(0==(a=Math.floor(a/8)))break;switch(s){case 0:for(var l=r[0];e[r[0]++]>=128;);n=e.slice(l,r[0]);break;case 5:o=4,n=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,n=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=WU(e,r),n=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(i))}var c={data:n,type:s};null==t[a]?t[a]=[c]:t[a].push(c)}return t}function YU(e){var t=[];return e.forEach((function(e,r){e.forEach((function(e){e.data&&(t.push(qU(8*r+e.type)),2==e.type&&t.push(qU(e.data.length)),t.push(e.data))}))})),HU(t)}function XU(e,t){return(null==e?void 0:e.map((function(e){return t(e.data)})))||[]}function QU(e){for(var t,r=[],n=[0];n[0]<e.length;){var i=WU(e,n),a=ZU(e.slice(n[0],n[0]+i));n[0]+=i;var s={id:KU(a[1][0].data),messages:[]};a[2].forEach((function(t){var r=ZU(t.data),i=KU(r[3][0].data);s.messages.push({meta:r,data:e.slice(n[0],n[0]+i)}),n[0]+=i})),(null==(t=a[3])?void 0:t[0])&&(s.merge=KU(a[3][0].data)>>>0>0),r.push(s)}return r}function JU(e){var t=[];return e.forEach((function(e){var r=[];r[1]=[{data:qU(e.id),type:0}],r[2]=[],null!=e.merge&&(r[3]=[{data:qU(+!!e.merge),type:0}]);var n=[];e.messages.forEach((function(e){n.push(e.data),e.meta[3]=[{type:0,data:qU(e.data.length)}],r[2].push({data:YU(e.meta),type:2})}));var i=YU(r);t.push(qU(i.length)),t.push(i),n.forEach((function(e){return t.push(e)}))})),HU(t)}function eV(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=WU(t,r),i=[];r[0]<t.length;){var a=3&t[r[0]];if(0!=a){var s=0,o=0;if(1==a?(o=4+(t[r[0]]>>2&7),s=(224&t[r[0]++])<<3,s|=t[r[0]++]):(o=1+(t[r[0]++]>>2),2==a?(s=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(s=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),i=[HU(i)],0==s)throw new Error("Invalid offset 0");if(s>i[0].length)throw new Error("Invalid offset beyond length");if(o>=s)for(i.push(i[0].slice(-s)),o-=s;o>=i[i.length-1].length;)i.push(i[i.length-1]),o-=i[i.length-1].length;i.push(i[0].slice(-s,-s+o))}else{var l=t[r[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[r[0]],c>1&&(l|=t[r[0]+1]<<8),c>2&&(l|=t[r[0]+2]<<16),c>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=c}i.push(t.slice(r[0],r[0]+l)),r[0]+=l}}var u=HU(i);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function tV(e){for(var t=[],r=0;r<e.length;){var n=e[r++],i=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(eV(n,e.slice(r,r+i))),r+=i}if(r!==e.length)throw new Error("data is not a valid framed stream!");return HU(t)}function rV(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),i=new Uint8Array(4);t.push(i);var a=qU(n),s=a.length;t.push(a),n<=60?(s++,t.push(new Uint8Array([n-1<<2]))):n<=256?(s+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(s+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(s+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(s+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),s+=n,i[0]=0,i[1]=255&s,i[2]=s>>8&255,i[3]=s>>16&255,r+=n}return HU(t)}function nV(e,t,r){var n,i=zU(e),a=i.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);switch(1&a&&(c=function(e,t){for(var r=(127&e[t+15])<<7|e[t+14]>>1,n=1&e[t+14],i=t+13;i>=t;--i)n=256*n+e[i];return(128&e[t+15]?-n:n)*Math.pow(10,r-6176)}(e,s),s+=16),2&a&&(u=i.getFloat64(s,!0),s+=8),4&a&&(d.setTime(d.getTime()+1e3*i.getFloat64(s,!0)),s+=8),8&a&&(l=i.getUint32(s,!0),s+=4),16&a&&(o=i.getUint32(s,!0),s+=4),e[1]){case 0:break;case 2:case 10:n={t:"n",v:c};break;case 3:n={t:"s",v:t[l]};break;case 5:n={t:"d",v:d};break;case 6:n={t:"b",v:u>0};break;case 7:n={t:"n",v:u/86400};break;case 8:n={t:"e",v:0};break;case 9:if(!(o>-1))throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&a," : ").concat(e.slice(0,4)));n={t:"s",v:r[o]};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&a," : ").concat(e.slice(0,4)))}return n}function iV(e,t){var r=new Uint8Array(32),n=zU(r),i=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,function(e,t,r){var n=Math.floor(0==r?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,i=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(127&n)<<1;for(var a=0;i>=1;++a,i/=256)e[t+a]=255&i;e[t+15]|=r>=0?0:128}(r,i,e.v),a|=1,i+=16;break;case"b":r[1]=6,n.setFloat64(i,e.v?1:0,!0),a|=2,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(i,t.indexOf(e.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,i)}function aV(e,t){var r=new Uint8Array(32),n=zU(r),i=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(i,e.v,!0),a|=32,i+=8;break;case"b":r[2]=6,n.setFloat64(i,e.v?1:0,!0),a|=32,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(i,t.indexOf(e.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,i)}function sV(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return function(e,t,r,n){var i,a=zU(e),s=a.getUint32(4,!0),o=(n>1?12:8)+4*GU(s&(n>1?3470:398)),l=-1,c=-1,u=NaN,d=new Date(2001,0,1);switch(512&s&&(l=a.getUint32(o,!0),o+=4),o+=4*GU(s&(n>1?12288:4096)),16&s&&(c=a.getUint32(o,!0),o+=4),32&s&&(u=a.getFloat64(o,!0),o+=8),64&s&&(d.setTime(d.getTime()+1e3*a.getFloat64(o,!0)),o+=8),e[2]){case 0:break;case 2:i={t:"n",v:u};break;case 3:i={t:"s",v:t[c]};break;case 5:i={t:"d",v:d};break;case 6:i={t:"b",v:u>0};break;case 7:i={t:"n",v:u/86400};break;case 8:i={t:"e",v:0};break;case 9:if(l>-1)i={t:"s",v:r[l]};else if(c>-1)i={t:"s",v:t[c]};else{if(isNaN(u))throw new Error("Unsupported cell type ".concat(e.slice(0,4)));i={t:"n",v:u}}break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return i}(e,t,r,e[0]);case 5:return nV(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function oV(e){return WU(ZU(e)[1][0].data)}function lV(e,t){var r=ZU(t.data),n=KU(r[1][0].data),i=r[3],a=[];return(i||[]).forEach((function(t){var r=ZU(t.data),i=KU(r[1][0].data)>>>0;switch(n){case 1:a[i]=UU(r[3][0].data);break;case 8:var s=ZU(e[oV(r[9][0].data)][0].data),o=e[oV(s[1][0].data)][0],l=KU(o.meta[1][0].data);if(2001!=l)throw new Error("2000 unexpected reference to ".concat(l));var c=ZU(o.data);a[i]=c[3].map((function(e){return UU(e.data)})).join("")}})),a}function cV(e,t){var r,n=ZU(t.data),i=(null==(r=null==n?void 0:n[7])?void 0:r[0])?KU(n[7][0].data)>>>0>0?1:0:-1,a=XU(n[5],(function(e){return function(e,t){var r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x=ZU(e),y=KU(x[1][0].data)>>>0,b=KU(x[2][0].data)>>>0,w=(null==(n=null==(r=x[8])?void 0:r[0])?void 0:n.data)&&KU(x[8][0].data)>0||!1;if((null==(a=null==(i=x[7])?void 0:i[0])?void 0:a.data)&&0!=t)g=null==(o=null==(s=x[7])?void 0:s[0])?void 0:o.data,v=null==(c=null==(l=x[6])?void 0:l[0])?void 0:c.data;else{if(!(null==(d=null==(u=x[4])?void 0:u[0])?void 0:d.data)||1==t)throw"NUMBERS Tile missing ".concat(t," cell storage");g=null==(p=null==(h=x[4])?void 0:h[0])?void 0:p.data,v=null==(m=null==(f=x[3])?void 0:f[0])?void 0:m.data}for(var _=w?4:1,k=zU(g),S=[],j=0;j<g.length/2;++j){var E=k.getUint16(2*j,!0);E<65535&&S.push([j,E])}if(S.length!=b)throw"Expected ".concat(b," cells, found ").concat(S.length);var C=[];for(j=0;j<S.length-1;++j)C[S[j][0]]=v.subarray(S[j][1]*_,S[j+1][1]*_);return S.length>=1&&(C[S[S.length-1][0]]=v.subarray(S[S.length-1][1]*_)),{R:y,cells:C}}(e,i)}));return{nrows:KU(n[4][0].data)>>>0,data:a.reduce((function(e,t){return e[t.R]||(e[t.R]=[]),t.cells.forEach((function(r,n){if(e[t.R][n])throw new Error("Duplicate cell r=".concat(t.R," c=").concat(n));e[t.R][n]=r})),e}),[])}}function uV(e,t){var r={"!ref":"A1"},n=e[oV(ZU(t.data)[2][0].data)],i=KU(n[0].meta[1][0].data);if(6001!=i)throw new Error("6000 unexpected reference to ".concat(i));return function(e,t,r){var n,i=ZU(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(KU(i[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(a.e.c=(KU(i[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=bD(a);var s=ZU(i[4][0].data),o=lV(e,e[oV(s[4][0].data)][0]),l=(null==(n=s[17])?void 0:n[0])?lV(e,e[oV(s[17][0].data)][0]):[],c=ZU(s[3][0].data),u=0;c[1].forEach((function(t){var n=ZU(t.data),i=e[oV(n[2][0].data)][0],a=KU(i.meta[1][0].data);if(6002!=a)throw new Error("6001 unexpected reference to ".concat(a));var s=cV(0,i);s.data.forEach((function(e,t){e.forEach((function(e,n){var i=xD({r:u+t,c:n}),a=sV(e,o,l);a&&(r[i]=a)}))})),u+=s.nrows}))}(e,n[0],r),r}function dV(e,t){var r={SheetNames:[],Sheets:{}};if(XU(ZU(t.data)[1],oV).forEach((function(t){e[t].forEach((function(t){if(2==KU(t.meta[1][0].data)){var n=function(e,t){var r,n=ZU(t.data),i={name:(null==(r=n[1])?void 0:r[0])?UU(n[1][0].data):"",sheets:[]};return XU(n[2],oV).forEach((function(t){e[t].forEach((function(t){6e3==KU(t.meta[1][0].data)&&i.sheets.push(uV(e,t))}))})),i}(e,t);n.sheets.forEach((function(e,t){HV(r,e,0==t?n.name:n.name+"_"+t,!0)}))}}))})),0==r.SheetNames.length)throw new Error("Empty NUMBERS file");return r}function hV(e){var t,r,n,i,a={},s=[];if(e.FullPaths.forEach((function(e){if(e.match(/\.iwpv2/))throw new Error("Unsupported password protection")})),e.FileIndex.forEach((function(e){if(e.name.match(/\.iwa$/)){var t,r;try{t=tV(e.content)}catch(W){return console.log("?? "+e.content.length+" "+(W.message||W))}try{r=QU(t)}catch(W){return console.log("## "+(W.message||W))}r.forEach((function(e){a[e.id]=e.messages,s.push(e.id)}))}})),!s.length)throw new Error("File has no messages");var o=(null==(i=null==(n=null==(r=null==(t=null==a?void 0:a[1])?void 0:t[0])?void 0:r.meta)?void 0:n[1])?void 0:i[0].data)&&1==KU(a[1][0].meta[1][0].data)&&a[1][0];if(o||s.forEach((function(e){a[e].forEach((function(e){if(1==KU(e.meta[1][0].data)>>>0){if(o)throw new Error("Document has multiple roots");o=e}}))})),!o)throw new Error("Cannot find Document root");return dV(a,o)}function pV(e,t,r){var n,i,a,s;if(!(null==(n=e[6])?void 0:n[0])||!(null==(i=e[7])?void 0:i[0]))throw"Mutation only works on post-BNC storages!";if((null==(s=null==(a=e[8])?void 0:a[0])?void 0:s.data)&&KU(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=zU(e[7][0].data),c=0,u=[],d=zU(e[4][0].data),h=0,p=[],f=0;f<t.length;++f)if(null!=t[f]){var m,g;switch(l.setUint16(2*f,c,!0),d.setUint16(2*f,h,!0),typeof t[f]){case"string":m=iV({t:"s",v:t[f]},r),g=aV({t:"s",v:t[f]},r);break;case"number":m=iV({t:"n",v:t[f]},r),g=aV({t:"n",v:t[f]},r);break;case"boolean":m=iV({t:"b",v:t[f]},r),g=aV({t:"b",v:t[f]},r);break;default:throw new Error("Unsupported value "+t[f])}u.push(m),c+=m.length,p.push(g),h+=g.length,++o}else l.setUint16(2*f,65535,!0),d.setUint16(2*f,65535);for(e[2][0].data=qU(o);f<e[7][0].data.length/2;++f)l.setUint16(2*f,65535,!0),d.setUint16(2*f,65535,!0);return e[6][0].data=HU(u),e[3][0].data=HU(p),o}function fV(e){return function(t){for(var r=0;r!=e.length;++r){var n=e[r];void 0===t[n[0]]&&(t[n[0]]=n[1]),"n"===n[2]&&(t[n[0]]=Number(t[n[0]]))}}}function mV(e){fV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function gV(e){fV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function vV(e){return pR.WS.indexOf(e)>-1?"sheet":pR.CS&&e==pR.CS?"chart":pR.DS&&e==pR.DS?"dialog":pR.MS&&e==pR.MS?"macro":e&&e.length?e:"sheet"}function xV(e,t,r,n,i,a,s,o,l,c,u,d){try{a[n]=mR(dI(e,r,!0),t);var h,p=uI(e,t);switch(o){case"sheet":h=Cz(p,t,i,l,a[n],c,u,d);break;case"chart":if(!(h=Nz(p,t,i,l,a[n],c))||!h["!drawel"])break;var f=vI(h["!drawel"].Target,t),m=fR(f),g=function(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}(dI(e,f,!0),mR(dI(e,m,!0),f)),v=vI(g,f),x=fR(v);h=cz(dI(e,v,!0),0,0,mR(dI(e,x,!0),v),0,h);break;case"macro":b=t,a[n],b.slice(-4),h={"!type":"macro"};break;case"dialog":h=function(e,t){return t.slice(-4),{"!type":"dialog"}}(0,t,0,0,a[n]);break;default:throw new Error("Unrecognized sheet type "+o)}s[n]=h;var y=[];a&&a[n]&&FM(a[n]).forEach((function(r){var i="";if(a[n][r].Type==pR.CMNT){i=vI(a[n][r].Target,t);var s=Az(uI(e,i,!0),i,l);if(!s||!s.length)return;w$(h,s,!1)}a[n][r].Type==pR.TCMNT&&(i=vI(a[n][r].Target,t),y=y.concat(function(e,t){var r=[],n=!1,i={},a=0;return e.replace(wI,(function(s,o){var l=SI(s);switch(jI(l[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":i={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":null!=i.t&&r.push(i);break;case"<text>":case"<text":a=o+s.length;break;case"</text>":i.t=e.slice(a,o).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":n=!0;break;case"</mentions>":case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return s})),r}(uI(e,i,!0),l)))})),y&&y.length&&w$(h,y,!0,l.people||[])}catch(W){if(l.WTF)throw W}var b}function yV(e){return"/"==e.charAt(0)?e.slice(1):e}function bV(e,t){if(PM(),mV(t=t||{}),lI(e,"META-INF/manifest.xml"))return RU(e,t);if(lI(e,"objectdata.xml"))return RU(e,t);if(lI(e,"Index/Document.iwa")){if("undefined"==typeof Uint8Array)throw new Error("NUMBERS file parsing requires Uint8Array support");if(e.FileIndex)return hV(e);var r=OM.utils.cfb_new();return pI(e).forEach((function(t){fI(r,t,hI(e,t))})),hV(r)}if(!lI(e,"[Content_Types].xml")){if(lI(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(lI(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");throw new Error("Unsupported ZIP file")}var n,i,a=pI(e),s=function(e){var t={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!e||!e.match)return t;var r={};if((e.match(wI)||[]).forEach((function(e){var n=SI(e);switch(n[0].replace(_I,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":void 0!==t[uR[n.ContentType]]&&t[uR[n.ContentType]].push(n.PartName)}})),t.xmlns!==aO)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}(dI(e,"[Content_Types].xml")),o=!1;if(0===s.workbooks.length&&uI(e,i="xl/workbook.xml",!0)&&s.workbooks.push(i),0===s.workbooks.length){if(!uI(e,i="xl/workbook.bin",!0))throw new Error("Could not find workbook");s.workbooks.push(i),o=!0}"bin"==s.workbooks[0].slice(-3)&&(o=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(wB=[],s.sst)try{wB=Pz(uI(e,yV(s.sst)),s.sst,t)}catch(W){if(t.WTF)throw W}t.cellStyles&&s.themes.length&&(l=function(e,t,r){return p$(e,r)}(dI(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(c=Tz(uI(e,yV(s.style)),s.style,l,t))}s.links.map((function(r){try{mR(dI(e,fR(yV(r))),r);return Iz(uI(e,yV(r)),0,r,t)}catch(W){}}));var u=Ez(uI(e,yV(s.workbooks[0])),s.workbooks[0],t),d={},h="";s.coreprops.length&&((h=uI(e,yV(s.coreprops[0]),!0))&&(d=_R(h)),0!==s.extprops.length&&(h=uI(e,yV(s.extprops[0]),!0))&&function(e,t,r){var n={};t||(t={}),e=zI(e),jR.forEach((function(r){var i=(e.match(VI(r[0]))||[])[1];switch(r[2]){case"string":i&&(t[r[1]]=NI(i));break;case"bool":t[r[1]]="true"===i;break;case"raw":var a=e.match(new RegExp("<"+r[0]+"[^>]*>([\\s\\S]*?)</"+r[0]+">"));a&&a.length>0&&(n[r[1]]=a[1])}})),n.HeadingPairs&&n.TitlesOfParts&&CR(n.HeadingPairs,n.TitlesOfParts,t,r)}(h,d,t));var p={};t.bookSheets&&!t.bookProps||0!==s.custprops.length&&(h=dI(e,yV(s.custprops[0]),!0))&&(p=function(e,t){var r={},n="",i=e.match(TR);if(i)for(var a=0;a!=i.length;++a){var s=i[a],o=SI(s);switch(o[0]){case"<?xml":case"<Properties":break;case"<property":n=NI(o.name);break;case"</property>":n=null;break;default:if(0===s.indexOf("<vt:")){var l=s.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":r[n]=NI(u);break;case"bool":r[n]=RI(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=QM(u);break;default:if("/"==c.slice(-1))break;t.WTF&&"undefined"!==typeof console&&console.warn("Unexpected",s,c,l)}}else if("</"===s.slice(0,2));else if(t.WTF)throw new Error(s)}}return r}(h,t));var f={};if((t.bookSheets||t.bookProps)&&(u.Sheets?n=u.Sheets.map((function(e){return e.name})):d.Worksheets&&d.SheetNames.length>0&&(n=d.SheetNames),t.bookProps&&(f.Props=d,f.Custprops=p),t.bookSheets&&"undefined"!==typeof n&&(f.SheetNames=n),t.bookSheets?f.SheetNames:t.bookProps))return f;n={};var m={};t.bookDeps&&s.calcchain&&(m=Mz(uI(e,yV(s.calcchain)),s.calcchain));var g,v,x=0,y={},b=u.Sheets;d.Worksheets=b.length,d.SheetNames=[];for(var w=0;w!=b.length;++w)d.SheetNames[w]=b[w].name;var _=o?"bin":"xml",k=s.workbooks[0].lastIndexOf("/"),S=(s.workbooks[0].slice(0,k+1)+"_rels/"+s.workbooks[0].slice(k+1)+".rels").replace(/^\//,"");lI(e,S)||(S="xl/_rels/workbook."+_+".rels");var j=mR(dI(e,S,!0),S.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Oz(uI(e,yV(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=function(e,t){var r=[],n=!1;return e.replace(wI,(function(e){var i=SI(e);switch(jI(i[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return e})),r}(uI(e,yV(s.people[0])),t)),j&&(j=function(e,t){if(!e)return 0;try{e=t.map((function(t){return t.id||(t.id=t.strRelID),[t.name,e["!id"][t.id].Target,vV(e["!id"][t.id].Type)]}))}catch(W){return null}return e&&0!==e.length?e:null}(j,u.Sheets));var E=uI(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(x=0;x!=d.Worksheets;++x){var C="sheet";if(j&&j[x]?(g="xl/"+j[x][1].replace(/[\/]?xl\//,""),lI(e,g)||(g=j[x][1]),lI(e,g)||(g=S.replace(/_rels\/.*$/,"")+j[x][1]),C=j[x][2]):g=(g="xl/worksheets/sheet"+(x+1-E)+"."+_).replace(/sheet0\./,"sheet."),v=g.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&null!=t.sheets)switch(typeof t.sheets){case"number":if(x!=t.sheets)continue e;break;case"string":if(d.SheetNames[x].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var N=!1,T=0;T!=t.sheets.length;++T)"number"==typeof t.sheets[T]&&t.sheets[T]==x&&(N=1),"string"==typeof t.sheets[T]&&t.sheets[T].toLowerCase()==d.SheetNames[x].toLowerCase()&&(N=1);if(!N)continue e}}xV(e,g,v,d.SheetNames[x],x,y,n,C,t,u,l,c)}return f={Directory:s,Workbook:u,Props:d,Custprops:p,Deps:m,Sheets:n,SheetNames:d.SheetNames,Strings:wB,Styles:c,Themes:l,SSF:eI(ZA)},t&&t.bookFiles&&(e.files?(f.keys=a,f.files=e.files):(f.keys=[],f.files={},e.FullPaths.forEach((function(t,r){t=t.replace(/^Root Entry[\/]/,""),f.keys.push(t),f.files[t]=e.FileIndex[r]})))),t&&t.bookVBA&&(s.vba.length>0?f.vbaraw=uI(e,yV(s.vba[0]),!0):s.defaults&&"application/vnd.ms-office.vbaProject"===s.defaults.bin&&(f.vbaraw=uI(e,"xl/vbaProject.bin",!0))),f}function wV(e,t){var r=t||{},n="Workbook",i=OM.find(e,n);try{if(n="/!DataSpaces/Version",!(i=OM.find(e,n))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(function(e){var t={};t.id=e.read_shift(0,"lpp4"),t.R=gF(e,4),t.U=gF(e,4),t.W=gF(e,4)}(i.content),n="/!DataSpaces/DataSpaceMap",!(i=OM.find(e,n))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=function(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(vF(e));return t}(i.content);if(1!==a.length||1!==a[0].comps.length||0!==a[0].comps[0].t||"StrongEncryptionDataSpace"!==a[0].name||"EncryptedPackage"!==a[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",!(i=OM.find(e,n))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=function(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}(i.content);if(1!=s.length||"StrongEncryptionTransform"!=s[0])throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",!(i=OM.find(e,n))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);xF(i.content)}catch(W){}if(n="/EncryptionInfo",!(i=OM.find(e,n))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=function(e){var t=gF(e);switch(t.Minor){case 2:return[t.Minor,wF(e)];case 3:return[t.Minor,_F()];case 4:return[t.Minor,kF(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}(i.content);if(n="/EncryptedPackage",!(i=OM.find(e,n))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(4==o[0]&&"undefined"!==typeof decrypt_agile)return decrypt_agile(o[1],i.content,r.password||"",r);if(2==o[0]&&"undefined"!==typeof decrypt_std76)return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function _V(e,t){return"ods"==t.bookType?BU(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=yD(r["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(bD(n)));var a=RV(r,{range:n,header:1}),s=["~Sh33tJ5~"];a.forEach((function(e){return e.forEach((function(e){"string"==typeof e&&s.push(e)}))}));var o={},l=[],c=OM.read(t.numbers,{type:"base64"});c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0],r=e[1];2==t.type&&t.name.match(/\.iwa/)&&QU(tV(t.content)).forEach((function(e){l.push(e.id),o[e.id]={deps:[],location:r,type:KU(e.messages[0].meta[1][0].data)}}))})),l.sort((function(e,t){return e-t}));var u=l.filter((function(e){return e>1})).map((function(e){return[e,qU(e)]}));c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&QU(tV(t.content)).forEach((function(e){e.messages.forEach((function(t){u.forEach((function(t){e.messages.some((function(e){return 11006!=KU(e.meta[1][0].data)&&function(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}(e.data,t[1])}))&&o[t[0]].deps.push(e.id)}))}))}))}));for(var d,h=OM.find(c,o[1].location),p=QU(tV(h.content)),f=0;f<p.length;++f){var m=p[f];1==m.id&&(d=m)}var g=oV(ZU(d.messages[0].data)[1][0].data);for(p=QU(tV((h=OM.find(c,o[g].location)).content)),f=0;f<p.length;++f)(m=p[f]).id==g&&(d=m);for(g=oV(ZU(d.messages[0].data)[2][0].data),p=QU(tV((h=OM.find(c,o[g].location)).content)),f=0;f<p.length;++f)(m=p[f]).id==g&&(d=m);for(g=oV(ZU(d.messages[0].data)[2][0].data),p=QU(tV((h=OM.find(c,o[g].location)).content)),f=0;f<p.length;++f)(m=p[f]).id==g&&(d=m);var v=ZU(d.messages[0].data);v[6][0].data=qU(n.e.r+1),v[7][0].data=qU(n.e.c+1);for(var x=oV(v[46][0].data),y=OM.find(c,o[x].location),b=QU(tV(y.content)),w=0;w<b.length&&b[w].id!=x;++w);if(b[w].id!=x)throw"Bad ColumnRowUIDMapArchive";var _=ZU(b[w].messages[0].data);_[1]=[],_[2]=[],_[3]=[];for(var k=0;k<=n.e.c;++k){var S=[];S[1]=S[2]=[{type:0,data:qU(k+420690)}],_[1].push({type:2,data:YU(S)}),_[2].push({type:0,data:qU(k)}),_[3].push({type:0,data:qU(k)})}_[4]=[],_[5]=[],_[6]=[];for(var j=0;j<=n.e.r;++j)(S=[])[1]=S[2]=[{type:0,data:qU(j+726270)}],_[4].push({type:2,data:YU(S)}),_[5].push({type:0,data:qU(j)}),_[6].push({type:0,data:qU(j)});b[w].messages[0].data=YU(_),y.content=rV(JU(b)),y.size=y.content.length,delete v[46];var E=ZU(v[4][0].data);E[7][0].data=qU(n.e.r+1);var C=oV(ZU(E[1][0].data)[2][0].data);if((b=QU(tV((y=OM.find(c,o[C].location)).content)))[0].id!=C)throw"Bad HeaderStorageBucket";var N=ZU(b[0].messages[0].data);for(j=0;j<a.length;++j){var T=ZU(N[2][0].data);T[1][0].data=qU(j),T[4][0].data=qU(a[j].length),N[2][j]={type:N[2][0].type,data:YU(T)}}b[0].messages[0].data=YU(N),y.content=rV(JU(b)),y.size=y.content.length;var P=oV(E[2][0].data);if((b=QU(tV((y=OM.find(c,o[P].location)).content)))[0].id!=P)throw"Bad HeaderStorageBucket";for(N=ZU(b[0].messages[0].data),k=0;k<=n.e.c;++k)(T=ZU(N[2][0].data))[1][0].data=qU(k),T[4][0].data=qU(n.e.r+1),N[2][k]={type:N[2][0].type,data:YU(T)};b[0].messages[0].data=YU(N),y.content=rV(JU(b)),y.size=y.content.length;var A=oV(E[4][0].data);!function(){for(var e,t=OM.find(c,o[A].location),r=QU(tV(t.content)),n=0;n<r.length;++n){var i=r[n];i.id==A&&(e=i)}var a=ZU(e.messages[0].data);a[3]=[];var l=[];s.forEach((function(e,t){l[1]=[{type:0,data:qU(t)}],l[2]=[{type:0,data:qU(1)}],l[3]=[{type:2,data:VU(e)}],a[3].push({type:2,data:YU(l)})})),e.messages[0].data=YU(a);var u=rV(JU(r));t.content=u,t.size=t.content.length}();var M=ZU(E[3][0].data),I=M[1][0];delete M[2];var O=ZU(I.data),D=oV(O[2][0].data);!function(){for(var e,t=OM.find(c,o[D].location),r=QU(tV(t.content)),i=0;i<r.length;++i){var l=r[i];l.id==D&&(e=l)}var u=ZU(e.messages[0].data);delete u[6],delete M[7];var d=new Uint8Array(u[5][0].data);u[5]=[];for(var h=0,p=0;p<=n.e.r;++p){var f=ZU(d);h+=pV(f,a[p],s),f[1][0].data=qU(p),u[5].push({data:YU(f),type:2})}u[1]=[{type:0,data:qU(n.e.c+1)}],u[2]=[{type:0,data:qU(n.e.r+1)}],u[3]=[{type:0,data:qU(h)}],u[4]=[{type:0,data:qU(n.e.r+1)}],e.messages[0].data=YU(u);var m=rV(JU(r));t.content=m,t.size=t.content.length}(),I.data=YU(O),E[3][0].data=YU(M),v[4][0].data=YU(E),d.messages[0].data=YU(v);var R=rV(JU(p));return h.content=R,h.size=h.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){y$=1024,e&&!e.SSF&&(e.SSF=eI(ZA));e&&e.SSF&&(PM(),TM(e.SSF),t.revssf=zM(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,kB?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xlsb"==t.bookType?"bin":"xml",n=E$.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};gV(t=t||{});var a=mI(),s="",o=0;t.cellXfs=[],CB(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(s="docProps/core.xml",fI(a,s,SR(e.Props,t)),i.coreprops.push(s),vR(t.rels,2,s,pR.CORE_PROPS),s="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,fI(a,s,NR(e.Props)),i.extprops.push(s),vR(t.rels,3,s,pR.EXT_PROPS),e.Custprops!==e.Props&&FM(e.Custprops||{}).length>0&&(fI(a,s="docProps/custom.xml",PR(e.Custprops)),i.custprops.push(s),vR(t.rels,4,s,pR.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},d=e.Sheets[e.SheetNames[o-1]];(d||{})["!type"];if(fI(a,s="xl/worksheets/sheet"+o+"."+r,Dz(o-1,s,t,e,u)),i.sheets.push(s),vR(t.wbrels,-1,"worksheets/sheet"+o+"."+r,pR.WS[0]),d){var h=d["!comments"],p=!1,f="";h&&h.length>0&&(fI(a,f="xl/comments"+o+"."+r,Rz(h,f,t)),i.comments.push(f),vR(u,-1,"../comments"+o+"."+r,pR.CMNT),p=!0),d["!legacy"]&&p&&fI(a,"xl/drawings/vmlDrawing"+o+".vml",b$(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&fI(a,fR(s),gR(u))}null!=t.Strings&&t.Strings.length>0&&(fI(a,s="xl/sharedStrings."+r,function(e,t,r){return(".bin"===t.slice(-4)?fF:hF)(e,r)}(t.Strings,s,t)),i.strs.push(s),vR(t.wbrels,-1,"sharedStrings."+r,pR.SST));s="xl/workbook."+r,fI(a,s,function(e,t,r){return(".bin"===t.slice(-4)?jz:wz)(e,r)}(e,s,t)),i.workbooks.push(s),vR(t.rels,1,s,pR.WB),s="xl/theme/theme1.xml",fI(a,s,f$(e.Themes,t)),i.themes.push(s),vR(t.wbrels,-1,"theme/theme1.xml",pR.THEME),s="xl/styles."+r,fI(a,s,function(e,t,r){return(".bin"===t.slice(-4)?i$:GF)(e,r)}(e,s,t)),i.styles.push(s),vR(t.wbrels,-1,"styles."+r,pR.STY),e.vbaraw&&n&&(fI(a,s="xl/vbaProject.bin",e.vbaraw),i.vba.push(s),vR(t.wbrels,-1,"vbaProject.bin",pR.VBA));return s="xl/metadata."+r,fI(a,s,function(e){return(".bin"===e.slice(-4)?v$:x$)()}(s)),i.metadata.push(s),vR(t.wbrels,-1,"metadata."+r,pR.XLMETA),fI(a,"[Content_Types].xml",hR(i,t)),fI(a,"_rels/.rels",gR(t.rels)),fI(a,"xl/_rels/workbook."+r+".rels",gR(t.wbrels)),delete t.revssf,delete t.ssf,a}(e,t):kV(e,t)}function kV(e,t){y$=1024,e&&!e.SSF&&(e.SSF=eI(ZA)),e&&e.SSF&&(PM(),TM(e.SSF),t.revssf=zM(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,kB?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=E$.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};gV(t=t||{});var a=mI(),s="",o=0;if(t.cellXfs=[],CB(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),fI(a,s="docProps/core.xml",SR(e.Props,t)),i.coreprops.push(s),vR(t.rels,2,s,pR.CORE_PROPS),s="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,fI(a,s,NR(e.Props)),i.extprops.push(s),vR(t.rels,3,s,pR.EXT_PROPS),e.Custprops!==e.Props&&FM(e.Custprops||{}).length>0&&(fI(a,s="docProps/custom.xml",PR(e.Custprops)),i.custprops.push(s),vR(t.rels,4,s,pR.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},h=e.Sheets[e.SheetNames[o-1]];(h||{})["!type"];if(fI(a,s="xl/worksheets/sheet"+o+"."+r,qB(o-1,t,e,d)),i.sheets.push(s),vR(t.wbrels,-1,"worksheets/sheet"+o+"."+r,pR.WS[0]),h){var p=h["!comments"],f=!1,m="";if(p&&p.length>0){var g=!1;p.forEach((function(e){e[1].forEach((function(e){1==e.T&&(g=!0)}))})),g&&(fI(a,m="xl/threadedComments/threadedComment"+o+"."+r,k$(p,u,t)),i.threadedcomments.push(m),vR(d,-1,"../threadedComments/threadedComment"+o+"."+r,pR.TCMNT)),fI(a,m="xl/comments"+o+"."+r,_$(p)),i.comments.push(m),vR(d,-1,"../comments"+o+"."+r,pR.CMNT),f=!0}h["!legacy"]&&f&&fI(a,"xl/drawings/vmlDrawing"+o+".vml",b$(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&fI(a,fR(s),gR(d))}return null!=t.Strings&&t.Strings.length>0&&(fI(a,s="xl/sharedStrings."+r,hF(t.Strings,t)),i.strs.push(s),vR(t.wbrels,-1,"sharedStrings."+r,pR.SST)),fI(a,s="xl/workbook."+r,wz(e)),i.workbooks.push(s),vR(t.rels,1,s,pR.WB),fI(a,s="xl/theme/theme1.xml",f$(e.Themes,t)),i.themes.push(s),vR(t.wbrels,-1,"theme/theme1.xml",pR.THEME),fI(a,s="xl/styles."+r,GF(e,t)),i.styles.push(s),vR(t.wbrels,-1,"styles."+r,pR.STY),e.vbaraw&&n&&(fI(a,s="xl/vbaProject.bin",e.vbaraw),i.vba.push(s),vR(t.wbrels,-1,"vbaProject.bin",pR.VBA)),fI(a,s="xl/metadata."+r,x$()),i.metadata.push(s),vR(t.wbrels,-1,"metadata."+r,pR.XLMETA),u.length>1&&(fI(a,s="xl/persons/person.xml",function(e){var t=[xI,QI("personList",null,{xmlns:oO,"xmlns:x":mO[0]}).replace(/[\/]>/,">")];return e.forEach((function(e,r){t.push(QI("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:e,providerId:"None"}))})),t.push("</personList>"),t.join("")}(u)),i.people.push(s),vR(t.wbrels,-1,"persons/person.xml",pR.PEOPLE)),fI(a,"[Content_Types].xml",hR(i,t)),fI(a,"_rels/.rels",gR(t.rels)),fI(a,"xl/_rels/workbook.xml.rels",gR(t.wbrels)),delete t.revssf,delete t.ssf,a}function SV(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=NA(e.slice(0,12));break;case"binary":r=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function jV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Kz(e.slice(r),t);default:break e}return eF.to_workbook(e,t)}function EV(e,t,r,n){return n?(r.type="string",eF.to_workbook(e,r)):eF.to_workbook(t,r)}function CV(e,t){yA();var r=t||{};if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer)return CV(new Uint8Array(e),((r=eI(r)).type="array",r));"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&!r.type&&(r.type="undefined"!==typeof Deno?"buffer":"array");var n,i=e,a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),_B={},r.dateNF&&(_B.dateNF=r.dateNF),r.type||(r.type=TA&&Buffer.isBuffer(e)?"buffer":"base64"),"file"==r.type&&(r.type=TA?"buffer":"binary",i=function(e){if("undefined"!==typeof DM)return DM.readFileSync(e);if("undefined"!==typeof Deno)return Deno.readFileSync(e);if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(W){if(!W.message||!W.message.match(/onstruct/))throw W}throw new Error("Cannot access file "+e)}(e),"undefined"===typeof Uint8Array||TA||(r.type="array")),"string"==r.type&&(a=!0,r.type="binary",r.codepage=65001,i=function(e){return e.match(/[^\x00-\x7F]/)?UI(e):e}(e)),"array"==r.type&&"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&"undefined"!==typeof ArrayBuffer){var s=new ArrayBuffer(3),o=new Uint8Array(s);if(o.foo="bar",!o.foo)return(r=eI(r)).type="array",CV(RA(i),r)}switch((n=SV(i,r))[0]){case 208:if(207===n[1]&&17===n[2]&&224===n[3]&&161===n[4]&&177===n[5]&&26===n[6]&&225===n[7])return function(e,t){return OM.find(e,"EncryptedPackage")?wV(e,t):uU(e,t)}(OM.read(i,r),r);break;case 9:if(n[1]<=8)return uU(i,r);break;case 60:return Kz(i,r);case 73:if(73===n[1]&&42===n[2]&&0===n[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===n[1])return function(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var i=XL.to_workbook(e,r);return r.WTF=n,i}catch(W){if(r.WTF=n,!W.message.match(/SYLK bad record ID/)&&n)throw W;return eF.to_workbook(e,t)}}(i,r);break;case 84:if(65===n[1]&&66===n[2]&&76===n[3])return QL.to_workbook(i,r);break;case 80:return 75===n[1]&&n[2]<9&&n[3]<9?function(e,t){var r=e,n=t||{};return n.type||(n.type=TA&&Buffer.isBuffer(e)?"buffer":"base64"),bV(gI(r,n),n)}(i,r):EV(e,i,r,a);case 239:return 60===n[3]?Kz(i,r):EV(e,i,r,a);case 255:if(254===n[1])return function(e,t){var r=e;return"base64"==t.type&&(r=NA(r)),r=_A.utils.decode(1200,r.slice(2),"str"),t.type="binary",jV(r,t)}(i,r);if(0===n[1]&&2===n[2]&&0===n[3])return tF.to_workbook(i,r);break;case 0:if(0===n[1]){if(n[2]>=2&&0===n[3])return tF.to_workbook(i,r);if(0===n[2]&&(8===n[3]||9===n[3]))return tF.to_workbook(i,r)}break;case 3:case 131:case 139:case 140:return YL.to_workbook(i,r);case 123:if(92===n[1]&&114===n[2]&&116===n[3])return NF.to_workbook(i,r);break;case 10:case 13:case 32:return function(e,t){var r="",n=SV(e,t);switch(t.type){case"base64":r=NA(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=JM(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]&&(r=zI(r)),t.type="binary",jV(r,t)}(i,r);case 137:if(80===n[1]&&78===n[2]&&71===n[3])throw new Error("PNG Image File is not a spreadsheet")}return ZL.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?YL.to_workbook(i,r):EV(e,i,r,a)}function NV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return LM(t.file,OM.write(e,{type:TA?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return OM.write(e,t)}function TV(e,t){var r={},n=TA?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?OM.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if("undefined"!==typeof Deno&&"string"==typeof i){if("binary"==t.type||"base64"==t.type)return i;i=new Uint8Array(OA(i))}return t.password&&"undefined"!==typeof encrypt_agile?NV(encrypt_agile(i,t.password),t):"file"===t.type?LM(t.file,i):"string"==t.type?zI(i):i}function PV(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return CA(UI(n));case"binary":return UI(n);case"string":return e;case"file":return LM(t.file,n,"utf8");case"buffer":return TA?PA(n,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(n):PV(n,{type:"binary"}).split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}function AV(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return"base64"==t.type?CA(r):"string"==t.type?zI(r):r;case"file":return LM(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function MV(e,t){yA(),yz(e);var r=eI(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),"array"==r.type){r.type="binary";var n=MV(e,r);return r.type="array",OA(n)}var i=0;if(r.sheet&&(i="number"==typeof r.sheet?r.sheet:e.SheetNames.indexOf(r.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return PV(eU(e,r),r);case"slk":case"sylk":return PV(XL.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"htm":case"html":return PV(TU(e.Sheets[e.SheetNames[i]],r),r);case"txt":return function(e,t){switch(t.type){case"base64":return CA(e);case"binary":case"string":return e;case"file":return LM(t.file,e,"binary");case"buffer":return TA?PA(e,"binary"):e.split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}(BV(e.Sheets[e.SheetNames[i]],r),r);case"csv":return PV($V(e.Sheets[e.SheetNames[i]],r),r,"\ufeff");case"dif":return PV(QL.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"dbf":return AV(YL.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"prn":return PV(eF.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"rtf":return PV(NF.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"eth":return PV(JL.from_sheet(e.Sheets[e.SheetNames[i]],r),r);case"fods":return PV(BU(e,r),r);case"wk1":return AV(tF.sheet_to_wk1(e.Sheets[e.SheetNames[i]],r),r);case"wk3":return AV(tF.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),AV(kU(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),function(e,t){var r=t||{};return NV(dU(e,r),r)}(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var r=eI(t||{});return TV(_V(e,r),r)}(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function IV(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function OV(e,t,r){var n=r||{};return n.type="file",n.file=t,IV(n),MV(e,n)}function DV(e,t,r,n,i,a,s,o){var l=fD(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,h=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch(W){h.__rowNum__=r}else h.__rowNum__=r;if(!s||e[r])for(var p=t.s.c;p<=t.e.c;++p){var f=s?e[r][p]:e[n[p]+l];if(void 0!==f&&void 0!==f.t){var m=f.v;switch(f.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+f.t)}if(null!=a[p]){if(null==m)if("e"==f.t&&null===m)h[a[p]]=null;else if(void 0!==c)h[a[p]]=c;else{if(!u||null!==m)continue;h[a[p]]=null}else h[a[p]]=u&&("n"!==f.t||"n"===f.t&&!1!==o.rawNumbers)?m:kD(f,m,o);null!=m&&(d=!1)}}else{if(void 0===c)continue;null!=a[p]&&(h[a[p]]=c)}}return{row:h,isempty:d}}function RV(e,t){if(null==e||null==e["!ref"])return[];var r={t:"n",v:0},n=0,i=1,a=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=null!=c.range?c.range:e["!ref"];switch(1===c.header?n=1:"A"===c.header?n=2:Array.isArray(c.header)?n=3:null==c.header&&(n=0),typeof u){case"string":l=wD(u);break;case"number":(l=wD(e["!ref"])).s.r=u;break;default:l=u}n>0&&(i=0);var d=fD(l.s.r),h=[],p=[],f=0,m=0,g=Array.isArray(e),v=l.s.r,x=0,y={};g&&!e[v]&&(e[v]=[]);var b=c.skipHidden&&e["!cols"]||[],w=c.skipHidden&&e["!rows"]||[];for(x=l.s.c;x<=l.e.c;++x)if(!(b[x]||{}).hidden)switch(h[x]=gD(x),r=g?e[v][x]:e[h[x]+d],n){case 1:a[x]=x-l.s.c;break;case 2:a[x]=h[x];break;case 3:a[x]=c.header[x-l.s.c];break;default:if(null==r&&(r={w:"__EMPTY",t:"s"}),o=s=kD(r,null,c),m=y[s]||0){do{o=s+"_"+m++}while(y[o]);y[s]=m,y[o]=1}else y[s]=1;a[x]=o}for(v=l.s.r+i;v<=l.e.r;++v)if(!(w[v]||{}).hidden){var _=DV(e,l,v,h,n,a,g,c);(!1===_.isempty||(1===n?!1!==c.blankrows:c.blankrows))&&(p[f++]=_.row)}return p.length=f,p}var LV=/"/g;function FV(e,t,r,n,i,a,s,o){for(var l=!0,c=[],u="",d=fD(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=o.dense?(e[r]||[])[h]:e[n[h]+d];if(null==p)u="";else if(null!=p.v){l=!1,u=""+(o.rawNumbers&&"n"==p.t?p.v:kD(p,null,o));for(var f=0,m=0;f!==u.length;++f)if((m=u.charCodeAt(f))===i||m===a||34===m||o.forceQuotes){u='"'+u.replace(LV,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==p.f||p.F?u="":(l=!1,(u="="+p.f).indexOf(",")>=0&&(u='"'+u.replace(LV,'""')+'"'));c.push(u)}return!1===o.blankrows&&l?null:c.join(s)}function $V(e,t){var r=[],n=null==t?{}:t;if(null==e||null==e["!ref"])return"";var i=wD(e["!ref"]),a=void 0!==n.FS?n.FS:",",s=a.charCodeAt(0),o=void 0!==n.RS?n.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==a?"\\|":a)+"+$"),u="",d=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],f=i.s.c;f<=i.e.c;++f)(h[f]||{}).hidden||(d[f]=gD(f));for(var m=0,g=i.s.r;g<=i.e.r;++g)(p[g]||{}).hidden||null!=(u=FV(e,i,g,d,s,l,a,n))&&(n.strip&&(u=u.replace(c,"")),(u||!1!==n.blankrows)&&r.push((m++?o:"")+u));return delete n.dense,r.join("")}function BV(e,t){t||(t={}),t.FS="\t",t.RS="\n";var r=$V(e,t);if("undefined"==typeof _A||"string"==t.type)return r;var n=_A.utils.encode(1200,r,"str");return String.fromCharCode(255)+String.fromCharCode(254)+n}function zV(e,t,r){var n,i=r||{},a=+!i.skipHeader,s=e||{},o=0,l=0;if(s&&null!=i.origin)if("number"==typeof i.origin)o=i.origin;else{var c="string"==typeof i.origin?vD(i.origin):i.origin;o=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(s["!ref"]){var d=wD(s["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),-1==o&&(o=d.e.r+1,u.e.r=o+t.length-1+a)}else-1==o&&(o=0,u.e.r=t.length-1+a);var h=i.header||[],p=0;t.forEach((function(e,t){FM(e).forEach((function(r){-1==(p=h.indexOf(r))&&(h[p=h.length]=r);var c=e[r],u="z",d="",f=xD({c:l+p,r:o+t+a});n=UV(s,f),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?u="n":"boolean"==typeof c?u="b":"string"==typeof c?u="s":c instanceof Date?(u="d",i.cellDates||(u="n",c=VM(c)),d=i.dateNF||ZA[14]):null===c&&i.nullError&&(u="e",c=0),n?(n.t=u,n.v=c,delete n.w,delete n.R,d&&(n.z=d)):s[f]=n={t:u,v:c},d&&(n.z=d)):s[f]=c}))})),u.e.c=Math.max(u.e.c,l+h.length-1);var f=fD(o);if(a)for(p=0;p<h.length;++p)s[gD(p+l)+f]={t:"s",v:h[p]};return s["!ref"]=bD(u),s}function UV(e,t,r){if("string"==typeof t){if(Array.isArray(e)){var n=vD(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return UV(e,xD("number"!=typeof t?t:{r:t,c:r||0}))}function VV(){return{SheetNames:[],Sheets:{}}}function HV(e,t,r,n){var i=1;if(!r)for(;i<=65535&&-1!=e.SheetNames.indexOf(r="Sheet"+i);++i,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var s=a&&a[1]||r;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(r=s+i);++i);}if(xz(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function GV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}var WV={encode_col:gD,encode_row:fD,encode_cell:xD,encode_range:bD,decode_col:mD,decode_row:pD,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:vD,decode_range:yD,format_cell:kD,sheet_add_aoa:jD,sheet_add_json:zV,sheet_add_dom:PU,aoa_to_sheet:ED,json_to_sheet:function(e,t){return zV(null,e,t)},table_to_sheet:AU,table_to_book:function(e,t){return SD(AU(e,t),t)},sheet_to_csv:$V,sheet_to_txt:BV,sheet_to_json:RV,sheet_to_html:TU,sheet_to_formulae:function(e){var t,r="",n="";if(null==e||null==e["!ref"])return[];var i,a=wD(e["!ref"]),s="",o=[],l=[],c=Array.isArray(e);for(i=a.s.c;i<=a.e.c;++i)o[i]=gD(i);for(var u=a.s.r;u<=a.e.r;++u)for(s=fD(u),i=a.s.c;i<=a.e.c;++i)if(r=o[i]+s,n="",void 0!==(t=c?(e[u]||[])[i]:e[r])){if(null!=t.F){if(r=t.F,!t.f)continue;n=t.f,-1==r.indexOf(":")&&(r=r+":"+r)}if(null!=t.f)n=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)n=""+t.v;else if("b"==t.t)n=t.v?"TRUE":"FALSE";else if(void 0!==t.w)n="'"+t.w;else{if(void 0===t.v)continue;n="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=r+"="+n}return l},sheet_to_row_object_array:RV,sheet_get_cell:UV,book_new:VV,book_append_sheet:HV,book_set_sheet_visibility:function(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:GV,cell_set_internal_link:function(e,t,r){return GV(e,"#"+t,r)},cell_add_comment:function(e,t,r){e.c||(e.c=[]),e.c.push({t:t,a:r||"SheetJS"})},sheet_set_array_formula:function(e,t,r,n){for(var i="string"!=typeof t?t:wD(t),a="string"==typeof t?t:bD(t),s=i.s.r;s<=i.e.r;++s)for(var o=i.s.c;o<=i.e.c;++o){var l=UV(e,s,o);l.t="n",l.F=a,delete l.v,s==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};hA.version;const qV=()=>{const e=(0,t.useRef)(null),r=async e=>{const t=new FileReader;t.onload=e=>{var t;const r=null===(t=e.target)||void 0===t?void 0:t.result;if(r){const e=CV(r,{type:"binary"}),t=e.SheetNames[0],n=e.Sheets[t],i=WV.sheet_to_json(n);console.log(i)}},t.readAsBinaryString(e[0])},n=localStorage.getItem("Iplot_admin");return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Leverand\xf8rer"}),(0,V.jsx)("p",{className:"text-gray text-sm md:text-base",children:"Liste over alle leverand\xf8rer"})]}),(0,V.jsxs)("div",{className:"flex gap-3",children:[(0,V.jsx)("input",{type:"file",ref:e,accept:".xls,.xlsx",className:"hidden",onChange:e=>{const t=e.target.files;if(!t)return;t[0].name.endsWith(".xlsx")||t[0].name.endsWith(".xls")?r(t):He.error("Invalid file format. Please upload a CSV or Excel file.",{position:"top-right"})}}),"andre.finger@gmail.com"===n&&(0,V.jsx)(HT,{text:"Legg til",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",icon:(0,V.jsx)(cA,{className:"text-white w-5 h-5"}),path:"/legg-til-leverandor"})]})]}),(0,V.jsx)(dA,{})]})})},KV=F_("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var ZV=e=>"checkbox"===e.type,YV=e=>e instanceof Date,XV=e=>null==e;const QV=e=>"object"===typeof e;var JV=e=>!XV(e)&&!Array.isArray(e)&&QV(e)&&!YV(e),eH=e=>JV(e)&&e.target?ZV(e.target)?e.target.checked:e.target.value:e,tH=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),rH="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function nH(e){let t;const r=Array.isArray(e),n="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(rH&&(e instanceof Blob||n)||!r&&!JV(e))return e;if(t=r?[]:{},r||(e=>{const t=e.constructor&&e.constructor.prototype;return JV(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=nH(e[r]));else t=e}return t}var iH=e=>Array.isArray(e)?e.filter(Boolean):[],aH=e=>void 0===e,sH=(e,t,r)=>{if(!t||!JV(e))return r;const n=iH(t.split(/[,[\].]+?/)).reduce(((e,t)=>XV(e)?e:e[t]),e);return aH(n)||n===e?aH(e[t])?r:e[t]:n},oH=e=>"boolean"===typeof e,lH=e=>/^\w*$/.test(e),cH=e=>iH(e.replace(/["|']|\]/g,"").split(/\.|\[/)),uH=(e,t,r)=>{let n=-1;const i=lH(t)?[t]:cH(t),a=i.length,s=a-1;for(;++n<a;){const t=i[n];let a=r;if(n!==s){const r=e[t];a=JV(r)||Array.isArray(r)?r:isNaN(+i[n+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=a,e=e[t]}return e};const dH="blur",hH="focusout",pH="change",fH="onBlur",mH="onChange",gH="onSubmit",vH="onTouched",xH="all",yH="max",bH="min",wH="maxLength",_H="minLength",kH="pattern",SH="required",jH="validate",EH=t.createContext(null),CH=()=>t.useContext(EH);var NH=function(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const i=a;return t._proxyFormState[i]!==xH&&(t._proxyFormState[i]=!n||xH),r&&(r[i]=!0),e[i]}});return i},TH=e=>JV(e)&&!Object.keys(e).length,PH=(e,t,r,n)=>{r(e);const{name:i,...a}=e;return TH(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find((e=>t[e]===(!n||xH)))},AH=e=>Array.isArray(e)?e:[e],MH=(e,t,r)=>!e||!t||e===t||AH(e).some((e=>e&&(r?e===t:e.startsWith(t)||t.startsWith(e))));function IH(e){const r=t.useRef(e);r.current=e,t.useEffect((()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}}),[e.disabled])}var OH=e=>"string"===typeof e,DH=(e,t,r,n,i)=>OH(e)?(n&&t.watch.add(e),sH(r,e,i)):Array.isArray(e)?e.map((e=>(n&&t.watch.add(e),sH(r,e)))):(n&&(t.watchAll=!0),r);function RH(e){const r=CH(),{name:n,disabled:i,control:a=r.control,shouldUnregister:s}=e,o=tH(a._names.array,n),l=function(e){const r=CH(),{control:n=r.control,name:i,defaultValue:a,disabled:s,exact:o}=e||{},l=t.useRef(i);l.current=i,IH({disabled:s,subject:n._subjects.values,next:e=>{MH(l.current,e.name,o)&&u(nH(DH(l.current,n._names,e.values||n._formValues,!1,a)))}});const[c,u]=t.useState(n._getWatch(i,a));return t.useEffect((()=>n._removeUnmounted())),c}({control:a,name:n,defaultValue:sH(a._formValues,n,sH(a._defaultValues,n,e.defaultValue)),exact:!0}),c=function(e){const r=CH(),{control:n=r.control,disabled:i,name:a,exact:s}=e||{},[o,l]=t.useState(n._formState),c=t.useRef(!0),u=t.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=t.useRef(a);return d.current=a,IH({disabled:i,next:e=>c.current&&MH(d.current,e.name,s)&&PH(e,u.current,n._updateFormState)&&l({...n._formState,...e}),subject:n._subjects.state}),t.useEffect((()=>(c.current=!0,u.current.isValid&&n._updateValid(!0),()=>{c.current=!1})),[n]),t.useMemo((()=>NH(o,n,u.current,!1)),[o,n])}({control:a,name:n,exact:!0}),u=t.useRef(a.register(n,{...e.rules,value:l,...oH(e.disabled)?{disabled:e.disabled}:{}})),d=t.useMemo((()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!sH(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!sH(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!sH(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!sH(c.validatingFields,n)},error:{enumerable:!0,get:()=>sH(c.errors,n)}})),[c,n]),h=t.useMemo((()=>({name:n,value:l,...oH(i)||c.disabled?{disabled:c.disabled||i}:{},onChange:e=>u.current.onChange({target:{value:eH(e),name:n},type:pH}),onBlur:()=>u.current.onBlur({target:{value:sH(a._formValues,n),name:n},type:dH}),ref:e=>{const t=sH(a._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}})),[n,a._formValues,i,c.disabled,l,a._fields]);return t.useEffect((()=>{const e=a._options.shouldUnregister||s,t=(e,t)=>{const r=sH(a._fields,e);r&&r._f&&(r._f.mount=t)};if(t(n,!0),e){const e=nH(sH(a._options.defaultValues,n));uH(a._defaultValues,n,e),aH(sH(a._formValues,n))&&uH(a._formValues,n,e)}return!o&&a.register(n),()=>{(o?e&&!a._state.action:e)?a.unregister(n):t(n,!1)}}),[n,a,o,s]),t.useEffect((()=>{a._updateDisabledField({disabled:i,fields:a._fields,name:n})}),[i,n,a]),t.useMemo((()=>({field:h,formState:c,fieldState:d})),[h,c,d])}const LH=e=>e.render(RH(e));var FH=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},$H=()=>{const e="undefined"===typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const r=(16*Math.random()+e)%16|0;return("x"==t?r:3&r|8).toString(16)}))},BH=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.shouldFocus||aH(r.shouldFocus)?r.focusName||`${e}.${aH(r.focusIndex)?t:r.focusIndex}.`:""},zH=e=>({isOnSubmit:!e||e===gH,isOnBlur:e===fH,isOnChange:e===mH,isOnAll:e===xH,isOnTouch:e===vH}),UH=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const VH=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const r=sH(e,i);if(r){const{_f:e,...a}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!n)return!0;if(e.ref&&t(e.ref,e.name)&&!n)return!0;if(VH(a,t))break}else if(JV(a)&&VH(a,t))break}}};var HH=(e,t,r)=>{const n=AH(sH(e,r));return uH(n,"root",t[r]),uH(e,r,n),e},GH=e=>"file"===e.type,WH=e=>"function"===typeof e,qH=e=>{if(!rH)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},KH=e=>OH(e),ZH=e=>"radio"===e.type,YH=e=>e instanceof RegExp;const XH={value:!1,isValid:!1},QH={value:!0,isValid:!0};var JH=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!aH(e[0].attributes.value)?aH(e[0].value)||""===e[0].value?QH:{value:e[0].value,isValid:!0}:QH:XH}return XH};const eG={isValid:!1,value:null};var tG=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),eG):eG;function rG(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(KH(e)||Array.isArray(e)&&e.every(KH)||oH(e)&&!e)return{type:r,message:KH(e)?e:"",ref:t}}var nG=e=>JV(e)&&!YH(e)?e:{value:e,message:""},iG=async(e,t,r,n,i,a)=>{const{ref:s,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:p,validate:f,name:m,valueAsNumber:g,mount:v}=e._f,x=sH(r,m);if(!v||t.has(m))return{};const y=o?o[0]:s,b=e=>{i&&y.reportValidity&&(y.setCustomValidity(oH(e)?"":e||""),y.reportValidity())},w={},_=ZH(s),k=ZV(s),S=_||k,j=(g||GH(s))&&aH(s.value)&&aH(x)||qH(s)&&""===s.value||""===x||Array.isArray(x)&&!x.length,E=FH.bind(null,m,n,w),C=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wH,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_H;const a=e?t:r;w[m]={type:e?n:i,message:a,ref:s,...E(e?n:i,a)}};if(a?!Array.isArray(x)||!x.length:l&&(!S&&(j||XV(x))||oH(x)&&!x||k&&!JH(o).isValid||_&&!tG(o).isValid)){const{value:e,message:t}=KH(l)?{value:!!l,message:l}:nG(l);if(e&&(w[m]={type:SH,message:t,ref:y,...E(SH,t)},!n))return b(t),w}if(!j&&(!XV(d)||!XV(h))){let e,t;const r=nG(h),i=nG(d);if(XV(x)||isNaN(x)){const n=s.valueAsDate||new Date(x),a=e=>new Date((new Date).toDateString()+" "+e),o="time"==s.type,l="week"==s.type;OH(r.value)&&x&&(e=o?a(x)>a(r.value):l?x>r.value:n>new Date(r.value)),OH(i.value)&&x&&(t=o?a(x)<a(i.value):l?x<i.value:n<new Date(i.value))}else{const n=s.valueAsNumber||(x?+x:x);XV(r.value)||(e=n>r.value),XV(i.value)||(t=n<i.value)}if((e||t)&&(C(!!e,r.message,i.message,yH,bH),!n))return b(w[m].message),w}if((c||u)&&!j&&(OH(x)||a&&Array.isArray(x))){const e=nG(c),t=nG(u),r=!XV(e.value)&&x.length>+e.value,i=!XV(t.value)&&x.length<+t.value;if((r||i)&&(C(r,e.message,t.message),!n))return b(w[m].message),w}if(p&&!j&&OH(x)){const{value:e,message:t}=nG(p);if(YH(e)&&!x.match(e)&&(w[m]={type:kH,message:t,ref:s,...E(kH,t)},!n))return b(t),w}if(f)if(WH(f)){const e=rG(await f(x,r),y);if(e&&(w[m]={...e,...E(jH,e.message)},!n))return b(e.message),w}else if(JV(f)){let e={};for(const t in f){if(!TH(e)&&!n)break;const i=rG(await f[t](x,r),y,t);i&&(e={...i,...E(t,i.message)},b(i.message),n&&(w[m]=e))}if(!TH(e)&&(w[m]={ref:y,...e},!n))return w}return b(!0),w},aG=(e,t)=>[...e,...AH(t)],sG=e=>Array.isArray(e)?e.map((()=>{})):void 0;function oG(e,t,r){return[...e.slice(0,t),...AH(r),...e.slice(t)]}var lG=(e,t,r)=>Array.isArray(e)?(aH(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],cG=(e,t)=>[...AH(t),...AH(e)];var uG=(e,t)=>aH(t)?[]:function(e,t){let r=0;const n=[...e];for(const i of t)n.splice(i-r,1),r++;return iH(n).length?n:[]}(e,AH(t).sort(((e,t)=>e-t))),dG=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]};function hG(e,t){const r=Array.isArray(t)?t:lH(t)?[t]:cH(t),n=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=aH(e)?n++:e[t[n++]];return e}(e,r),i=r.length-1,a=r[i];return n&&delete n[a],0!==i&&(JV(n)&&TH(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!aH(e[t]))return!1;return!0}(n))&&hG(e,r.slice(0,-1)),e}var pG=(e,t,r)=>(e[t]=r,e);function fG(e){const r=CH(),{control:n=r.control,name:i,keyName:a="id",shouldUnregister:s,rules:o}=e,[l,c]=t.useState(n._getFieldArray(i)),u=t.useRef(n._getFieldArray(i).map($H)),d=t.useRef(l),h=t.useRef(i),p=t.useRef(!1);h.current=i,d.current=l,n._names.array.add(i),o&&n.register(i,o),IH({next:e=>{let{values:t,name:r}=e;if(r===h.current||!r){const e=sH(t,h.current);Array.isArray(e)&&(c(e),u.current=e.map($H))}},subject:n._subjects.array});const f=t.useCallback((e=>{p.current=!0,n._updateFieldArray(i,e)}),[n,i]);return t.useEffect((()=>{if(n._state.action=!1,UH(i,n._names)&&n._subjects.state.next({...n._formState}),p.current&&(!zH(n._options.mode).isOnSubmit||n._formState.isSubmitted))if(n._options.resolver)n._executeSchema([i]).then((e=>{const t=sH(e.errors,i),r=sH(n._formState.errors,i);(r?!t&&r.type||t&&(r.type!==t.type||r.message!==t.message):t&&t.type)&&(t?uH(n._formState.errors,i,t):hG(n._formState.errors,i),n._subjects.state.next({errors:n._formState.errors}))}));else{const e=sH(n._fields,i);!e||!e._f||zH(n._options.reValidateMode).isOnSubmit&&zH(n._options.mode).isOnSubmit||iG(e,n._names.disabled,n._formValues,n._options.criteriaMode===xH,n._options.shouldUseNativeValidation,!0).then((e=>!TH(e)&&n._subjects.state.next({errors:HH(n._formState.errors,e,i)})))}n._subjects.values.next({name:i,values:{...n._formValues}}),n._names.focus&&VH(n._fields,((e,t)=>{if(n._names.focus&&t.startsWith(n._names.focus)&&e.focus)return e.focus(),1})),n._names.focus="",n._updateValid(),p.current=!1}),[l,i,n]),t.useEffect((()=>(!sH(n._formValues,i)&&n._updateFieldArray(i),()=>{(n._options.shouldUnregister||s)&&n.unregister(i)})),[i,n,a,s]),{swap:t.useCallback(((e,t)=>{const r=n._getFieldArray(i);dG(r,e,t),dG(u.current,e,t),f(r),c(r),n._updateFieldArray(i,r,dG,{argA:e,argB:t},!1)}),[f,i,n]),move:t.useCallback(((e,t)=>{const r=n._getFieldArray(i);lG(r,e,t),lG(u.current,e,t),f(r),c(r),n._updateFieldArray(i,r,lG,{argA:e,argB:t},!1)}),[f,i,n]),prepend:t.useCallback(((e,t)=>{const r=AH(nH(e)),a=cG(n._getFieldArray(i),r);n._names.focus=BH(i,0,t),u.current=cG(u.current,r.map($H)),f(a),c(a),n._updateFieldArray(i,a,cG,{argA:sG(e)})}),[f,i,n]),append:t.useCallback(((e,t)=>{const r=AH(nH(e)),a=aG(n._getFieldArray(i),r);n._names.focus=BH(i,a.length-1,t),u.current=aG(u.current,r.map($H)),f(a),c(a),n._updateFieldArray(i,a,aG,{argA:sG(e)})}),[f,i,n]),remove:t.useCallback((e=>{const t=uG(n._getFieldArray(i),e);u.current=uG(u.current,e),f(t),c(t),!Array.isArray(sH(n._fields,i))&&uH(n._fields,i,void 0),n._updateFieldArray(i,t,uG,{argA:e})}),[f,i,n]),insert:t.useCallback(((e,t,r)=>{const a=AH(nH(t)),s=oG(n._getFieldArray(i),e,a);n._names.focus=BH(i,e,r),u.current=oG(u.current,e,a.map($H)),f(s),c(s),n._updateFieldArray(i,s,oG,{argA:e,argB:sG(t)})}),[f,i,n]),update:t.useCallback(((e,t)=>{const r=nH(t),a=pG(n._getFieldArray(i),e,r);u.current=[...a].map(((t,r)=>t&&r!==e?u.current[r]:$H())),f(a),c([...a]),n._updateFieldArray(i,a,pG,{argA:e,argB:r},!0,!1)}),[f,i,n]),replace:t.useCallback((e=>{const t=AH(nH(e));u.current=t.map($H),f([...t]),c([...t]),n._updateFieldArray(i,[...t],(e=>e),{},!0,!1)}),[f,i,n]),fields:t.useMemo((()=>l.map(((e,t)=>({...e,[a]:u.current[t]||$H()})))),[l,a])}}var mG=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},gG=e=>XV(e)||!QV(e);function vG(e,t){if(gG(e)||gG(t))return e===t;if(YV(e)&&YV(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r){const r=e[i];if(!n.includes(i))return!1;if("ref"!==i){const e=t[i];if(YV(r)&&YV(e)||JV(r)&&JV(e)||Array.isArray(r)&&Array.isArray(e)?!vG(r,e):r!==e)return!1}}return!0}var xG=e=>"select-multiple"===e.type,yG=e=>qH(e)&&e.isConnected,bG=e=>{for(const t in e)if(WH(e[t]))return!0;return!1};function wG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Array.isArray(e);if(JV(e)||r)for(const n in e)Array.isArray(e[n])||JV(e[n])&&!bG(e[n])?(t[n]=Array.isArray(e[n])?[]:{},wG(e[n],t[n])):XV(e[n])||(t[n]=!0);return t}function _G(e,t,r){const n=Array.isArray(e);if(JV(e)||n)for(const i in e)Array.isArray(e[i])||JV(e[i])&&!bG(e[i])?aH(t)||gG(r[i])?r[i]=Array.isArray(e[i])?wG(e[i],[]):{...wG(e[i])}:_G(e[i],XV(t)?{}:t[i],r[i]):r[i]=!vG(e[i],t[i]);return r}var kG=(e,t)=>_G(e,t,wG(t)),SG=(e,t)=>{let{valueAsNumber:r,valueAsDate:n,setValueAs:i}=t;return aH(e)?e:r?""===e?NaN:e?+e:e:n&&OH(e)?new Date(e):i?i(e):e};function jG(e){const t=e.ref;return GH(t)?t.files:ZH(t)?tG(e.refs).value:xG(t)?[...t.selectedOptions].map((e=>{let{value:t}=e;return t})):ZV(t)?JH(e.refs).value:SG(aH(t.value)?e.ref.value:t.value,e)}var EG=e=>aH(e)?e:YH(e)?e.source:JV(e)?YH(e.value)?e.value.source:e.value:e;const CG="AsyncFunction";function NG(e,t,r){const n=sH(e,r);if(n||lH(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const n=i.join("."),a=sH(t,n),s=sH(e,n);if(a&&!Array.isArray(a)&&r!==n)return{name:r};if(s&&s.type)return{name:n,error:s};i.pop()}return{name:r}}const TG={mode:gH,reValidateMode:mH,shouldFocusError:!0};function PG(){let e,t={...TG,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},r={submitCount:0,isDirty:!1,isLoading:WH(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=(JV(t.defaultValues)||JV(t.values))&&nH(t.defaultValues||t.values)||{},a=t.shouldUnregister?{}:nH(i),s={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={values:mG(),array:mG(),state:mG()},d=zH(t.mode),h=zH(t.reValidateMode),p=t.criteriaMode===xH,f=async e=>{if(!t.disabled&&(c.isValid||e)){const e=t.resolver?TH((await y()).errors):await b(n,!0);e!==r.isValid&&u.state.next({isValid:e})}},m=(e,n)=>{t.disabled||!c.isValidating&&!c.validatingFields||((e||Array.from(o.mount)).forEach((e=>{e&&(n?uH(r.validatingFields,e,n):hG(r.validatingFields,e))})),u.state.next({validatingFields:r.validatingFields,isValidating:!TH(r.validatingFields)}))},g=(e,t,r,o)=>{const l=sH(n,e);if(l){const n=sH(a,e,aH(r)?sH(i,e):r);aH(n)||o&&o.defaultChecked||t?uH(a,e,t?n:jG(l._f)):k(e,n),s.mount&&f()}},v=(e,a,s,o,l)=>{let d=!1,h=!1;const p={name:e};if(!t.disabled){const t=!!(sH(n,e)&&sH(n,e)._f&&sH(n,e)._f.disabled);if(!s||o){c.isDirty&&(h=r.isDirty,r.isDirty=p.isDirty=w(),d=h!==p.isDirty);const n=t||vG(sH(i,e),a);h=!(t||!sH(r.dirtyFields,e)),n||t?hG(r.dirtyFields,e):uH(r.dirtyFields,e,!0),p.dirtyFields=r.dirtyFields,d=d||c.dirtyFields&&h!==!n}if(s){const t=sH(r.touchedFields,e);t||(uH(r.touchedFields,e,s),p.touchedFields=r.touchedFields,d=d||c.touchedFields&&t!==s)}d&&l&&u.state.next(p)}return d?p:{}},x=(n,i,a,s)=>{const o=sH(r.errors,n),d=c.isValid&&oH(i)&&r.isValid!==i;if(t.delayError&&a?(e=(e=>t=>{clearTimeout(l),l=setTimeout(e,t)})((()=>((e,t)=>{uH(r.errors,e,t),u.state.next({errors:r.errors})})(n,a))),e(t.delayError)):(clearTimeout(l),e=null,a?uH(r.errors,n,a):hG(r.errors,n)),(a?!vG(o,a):o)||!TH(s)||d){const e={...s,...d&&oH(i)?{isValid:i}:{},errors:r.errors,name:n};r={...r,...e},u.state.next(e)}},y=async e=>{m(e,!0);const r=await t.resolver(a,t.context,((e,t,r,n)=>{const i={};for(const a of e){const e=sH(t,a);e&&uH(i,a,e._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}})(e||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return m(e),r},b=async function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const l in e){const u=e[l];if(u){const{_f:e,...d}=u;if(e){const d=o.array.has(e.name),h=u._f&&(!!(s=u._f)&&!!s.validate&&!!(WH(s.validate)&&s.validate.constructor.name===CG||JV(s.validate)&&Object.values(s.validate).find((e=>e.constructor.name===CG))));h&&c.validatingFields&&m([l],!0);const f=await iG(u,o.disabled,a,p,t.shouldUseNativeValidation&&!n,d);if(h&&c.validatingFields&&m([l]),f[e.name]&&(i.valid=!1,n))break;!n&&(sH(f,e.name)?d?HH(r.errors,f,e.name):uH(r.errors,e.name,f[e.name]):hG(r.errors,e.name))}!TH(d)&&await b(d,n,i)}}var s;return i.valid},w=(e,r)=>!t.disabled&&(e&&r&&uH(a,e,r),!vG(T(),i)),_=(e,t,r)=>DH(e,o,{...s.mount?a:aH(t)?i:OH(e)?{[e]:t}:t},r,t),k=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=sH(n,e);let s=t;if(i){const r=i._f;r&&(!r.disabled&&uH(a,e,SG(t,r)),s=qH(r.ref)&&XV(t)?"":t,xG(r.ref)?[...r.ref.options].forEach((e=>e.selected=s.includes(e.value))):r.refs?ZV(r.ref)?r.refs.length>1?r.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(s)?!!s.find((t=>t===e.value)):s===e.value))):r.refs[0]&&(r.refs[0].checked=!!s):r.refs.forEach((e=>e.checked=e.value===s)):GH(r.ref)?r.ref.value="":(r.ref.value=s,r.ref.type||u.values.next({name:e,values:{...a}})))}(r.shouldDirty||r.shouldTouch)&&v(e,s,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&N(e)},S=(e,t,r)=>{for(const i in t){const a=t[i],s=`${e}.${i}`,l=sH(n,s);(o.array.has(e)||JV(a)||l&&!l._f)&&!YV(a)?S(s,a,r):k(s,a,r)}},j=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const d=sH(n,e),h=o.array.has(e),p=nH(t);uH(a,e,p),h?(u.array.next({name:e,values:{...a}}),(c.isDirty||c.dirtyFields)&&l.shouldDirty&&u.state.next({name:e,dirtyFields:kG(i,a),isDirty:w(e,p)})):!d||d._f||XV(p)?k(e,p,l):S(e,p,l),UH(e,o)&&u.state.next({...r}),u.values.next({name:s.mount?e:void 0,values:{...a}})},E=async i=>{s.mount=!0;const l=i.target;let g=l.name,w=!0;const _=sH(n,g),k=e=>{w=Number.isNaN(e)||YV(e)&&isNaN(e.getTime())||vG(e,sH(a,g,e))};if(_){let s,S;const j=l.type?jG(_._f):eH(i),E=i.type===dH||i.type===hH,C=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(_._f)&&!t.resolver&&!sH(r.errors,g)&&!_._f.deps||((e,t,r,n,i)=>!i.isOnAll&&(!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:!(r?n.isOnChange:i.isOnChange)||e))(E,sH(r.touchedFields,g),r.isSubmitted,h,d),T=UH(g,o,E);uH(a,g,j),E?(_._f.onBlur&&_._f.onBlur(i),e&&e(0)):_._f.onChange&&_._f.onChange(i);const P=v(g,j,E,!1),A=!TH(P)||T;if(!E&&u.values.next({name:g,type:i.type,values:{...a}}),C)return c.isValid&&("onBlur"===t.mode&&E?f():E||f()),A&&u.state.next({name:g,...T?{}:P});if(!E&&T&&u.state.next({...r}),t.resolver){const{errors:e}=await y([g]);if(k(j),w){const t=NG(r.errors,n,g),i=NG(e,n,t.name||g);s=i.error,g=i.name,S=TH(e)}}else m([g],!0),s=(await iG(_,o.disabled,a,p,t.shouldUseNativeValidation))[g],m([g]),k(j),w&&(s?S=!1:c.isValid&&(S=await b(n,!0)));w&&(_._f.deps&&N(_._f.deps),x(g,S,s,P))}},C=(e,t)=>{if(sH(r.errors,t)&&e.focus)return e.focus(),1},N=async function(e){let i,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=AH(e);if(t.resolver){const t=await(async e=>{const{errors:t}=await y(e);if(e)for(const n of e){const e=sH(t,n);e?uH(r.errors,n,e):hG(r.errors,n)}else r.errors=t;return t})(aH(e)?e:l);i=TH(t),a=e?!l.some((e=>sH(t,e))):i}else e?(a=(await Promise.all(l.map((async e=>{const t=sH(n,e);return await b(t&&t._f?{[e]:t}:t)})))).every(Boolean),(a||r.isValid)&&f()):a=i=await b(n);return u.state.next({...!OH(e)||c.isValid&&i!==r.isValid?{}:{name:e},...t.resolver||!e?{isValid:i}:{},errors:r.errors}),s.shouldFocus&&!a&&VH(n,C,e?l:o.mount),a},T=e=>{const t={...s.mount?a:i};return aH(e)?t:OH(e)?sH(t,e):e.map((e=>sH(t,e)))},P=(e,t)=>({invalid:!!sH((t||r).errors,e),isDirty:!!sH((t||r).dirtyFields,e),error:sH((t||r).errors,e),isValidating:!!sH(r.validatingFields,e),isTouched:!!sH((t||r).touchedFields,e)}),A=(e,t,i)=>{const a=(sH(n,e,{_f:{}})._f||{}).ref,s=sH(r.errors,e)||{},{ref:o,message:l,type:c,...d}=s;uH(r.errors,e,{...d,...t,ref:a}),u.state.next({name:e,errors:r.errors,isValid:!1}),i&&i.shouldFocus&&a&&a.focus&&a.focus()},M=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const l of e?AH(e):o.mount)o.mount.delete(l),o.array.delete(l),s.keepValue||(hG(n,l),hG(a,l)),!s.keepError&&hG(r.errors,l),!s.keepDirty&&hG(r.dirtyFields,l),!s.keepTouched&&hG(r.touchedFields,l),!s.keepIsValidating&&hG(r.validatingFields,l),!t.shouldUnregister&&!s.keepDefaultValue&&hG(i,l);u.values.next({values:{...a}}),u.state.next({...r,...s.keepDirty?{isDirty:w()}:{}}),!s.keepIsValid&&f()},I=e=>{let{disabled:t,name:r,field:n,fields:i}=e;(oH(t)&&s.mount||t||o.disabled.has(r))&&(t?o.disabled.add(r):o.disabled.delete(r),v(r,jG(n?n._f:sH(i,r)._f),!1,!1,!0))},O=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=sH(n,e);const l=oH(r.disabled)||oH(t.disabled);return uH(n,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...r}}),o.mount.add(e),a?I({field:a,disabled:oH(r.disabled)?r.disabled:t.disabled,name:e}):g(e,!0,r.value),{...l?{disabled:r.disabled||t.disabled}:{},...t.progressive?{required:!!r.required,min:EG(r.min),max:EG(r.max),minLength:EG(r.minLength),maxLength:EG(r.maxLength),pattern:EG(r.pattern)}:{},name:e,onChange:E,onBlur:E,ref:l=>{if(l){O(e,r),a=sH(n,e);const t=aH(l.value)&&l.querySelectorAll&&l.querySelectorAll("input,select,textarea")[0]||l,s=(e=>ZH(e)||ZV(e))(t),o=a._f.refs||[];if(s?o.find((e=>e===t)):t===a._f.ref)return;uH(n,e,{_f:{...a._f,...s?{refs:[...o.filter(yG),t,...Array.isArray(sH(i,e))?[{}]:[]],ref:{type:t.type,name:e}}:{ref:t}}}),g(e,!1,void 0,t)}else a=sH(n,e,{}),a._f&&(a._f.mount=!1),(t.shouldUnregister||r.shouldUnregister)&&(!tH(o.array,e)||!s.action)&&o.unMount.add(e)}}},D=()=>t.shouldFocusError&&VH(n,C,o.mount),R=(e,i)=>async s=>{let l;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let c=nH(a);if(o.disabled.size)for(const e of o.disabled)uH(c,e,void 0);if(u.state.next({isSubmitting:!0}),t.resolver){const{errors:e,values:t}=await y();r.errors=e,c=t}else await b(n);if(hG(r.errors,"root"),TH(r.errors)){u.state.next({errors:{}});try{await e(c,s)}catch(d){l=d}}else i&&await i({...r.errors},s),D(),setTimeout(D);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:TH(r.errors)&&!l,submitCount:r.submitCount+1,errors:r.errors}),l)throw l},L=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const d=e?nH(e):i,h=nH(d),p=TH(e),f=p?i:h;if(l.keepDefaultValues||(i=d),!l.keepValues){if(l.keepDirtyValues){const e=new Set([...o.mount,...Object.keys(kG(i,a))]);for(const t of Array.from(e))sH(r.dirtyFields,t)?uH(f,t,sH(a,t)):j(t,sH(f,t))}else{if(rH&&aH(e))for(const e of o.mount){const t=sH(n,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(qH(e)){const t=e.closest("form");if(t){t.reset();break}}}}n={}}a=t.shouldUnregister?l.keepDefaultValues?nH(i):{}:nH(f),u.array.next({values:{...f}}),u.values.next({values:{...f}})}o={mount:l.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!c.isValid||!!l.keepIsValid||!!l.keepDirtyValues,s.watch=!!t.shouldUnregister,u.state.next({submitCount:l.keepSubmitCount?r.submitCount:0,isDirty:!p&&(l.keepDirty?r.isDirty:!(!l.keepDefaultValues||vG(e,i))),isSubmitted:!!l.keepIsSubmitted&&r.isSubmitted,dirtyFields:p?{}:l.keepDirtyValues?l.keepDefaultValues&&a?kG(i,a):r.dirtyFields:l.keepDefaultValues&&e?kG(i,e):l.keepDirty?r.dirtyFields:{},touchedFields:l.keepTouched?r.touchedFields:{},errors:l.keepErrors?r.errors:{},isSubmitSuccessful:!!l.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1})},F=(e,t)=>L(WH(e)?e(a):e,t);return{control:{register:O,unregister:M,getFieldState:P,handleSubmit:R,setError:A,_executeSchema:y,_getWatch:_,_getDirty:w,_updateValid:f,_removeUnmounted:()=>{for(const e of o.unMount){const t=sH(n,e);t&&(t._f.refs?t._f.refs.every((e=>!yG(e))):!yG(t._f.ref))&&M(e)}o.unMount=new Set},_updateFieldArray:function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(d&&l&&!t.disabled){if(s.action=!0,p&&Array.isArray(sH(n,e))){const t=l(sH(n,e),d.argA,d.argB);h&&uH(n,e,t)}if(p&&Array.isArray(sH(r.errors,e))){const t=l(sH(r.errors,e),d.argA,d.argB);h&&uH(r.errors,e,t),((e,t)=>{!iH(sH(e,t)).length&&hG(e,t)})(r.errors,e)}if(c.touchedFields&&p&&Array.isArray(sH(r.touchedFields,e))){const t=l(sH(r.touchedFields,e),d.argA,d.argB);h&&uH(r.touchedFields,e,t)}c.dirtyFields&&(r.dirtyFields=kG(i,a)),u.state.next({name:e,isDirty:w(e,o),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else uH(a,e,o)},_updateDisabledField:I,_getFieldArray:e=>iH(sH(s.mount?a:i,e,t.shouldUnregister?sH(i,e,[]):[])),_reset:L,_resetDefaultValues:()=>WH(t.defaultValues)&&t.defaultValues().then((e=>{F(e,t.resetOptions),u.state.next({isLoading:!1})})),_updateFormState:e=>{r={...r,...e}},_disableForm:e=>{oH(e)&&(u.state.next({disabled:e}),VH(n,((t,r)=>{const i=sH(n,r);i&&(t.disabled=i._f.disabled||e,Array.isArray(i._f.refs)&&i._f.refs.forEach((t=>{t.disabled=i._f.disabled||e})))}),0,!1))},_subjects:u,_proxyFormState:c,_setErrors:e=>{r.errors=e,u.state.next({errors:r.errors,isValid:!1})},get _fields(){return n},get _formValues(){return a},get _state(){return s},set _state(e){s=e},get _defaultValues(){return i},get _names(){return o},set _names(e){o=e},get _formState(){return r},set _formState(e){r=e},get _options(){return t},set _options(e){t={...t,...e}}},trigger:N,register:O,handleSubmit:R,watch:(e,t)=>WH(e)?u.values.subscribe({next:r=>e(_(void 0,t),r)}):_(e,t,!0),setValue:j,getValues:T,reset:F,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sH(n,e)&&(aH(t.defaultValue)?j(e,nH(sH(i,e))):(j(e,t.defaultValue),uH(i,e,nH(t.defaultValue))),t.keepTouched||hG(r.touchedFields,e),t.keepDirty||(hG(r.dirtyFields,e),r.isDirty=t.defaultValue?w(e,nH(sH(i,e))):w()),t.keepError||(hG(r.errors,e),c.isValid&&f()),u.state.next({...r}))},clearErrors:e=>{e&&AH(e).forEach((e=>hG(r.errors,e))),u.state.next({errors:e?r.errors:{}})},unregister:M,setError:A,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=sH(n,e),i=r&&r._f;if(i){const e=i.refs?i.refs[0]:i.ref;e.focus&&(e.focus(),t.shouldSelect&&WH(e.select)&&e.select())}},getFieldState:P}}function AG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=t.useRef(void 0),n=t.useRef(void 0),[i,a]=t.useState({isDirty:!1,isValidating:!1,isLoading:WH(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:WH(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...PG(e),formState:i});const s=r.current.control;return s._options=e,IH({subject:s._subjects.state,next:e=>{PH(e,s._proxyFormState,s._updateFormState,!0)&&a({...s._formState})}}),t.useEffect((()=>s._disableForm(e.disabled)),[s,e.disabled]),t.useEffect((()=>{if(s._proxyFormState.isDirty){const e=s._getDirty();e!==i.isDirty&&s._subjects.state.next({isDirty:e})}}),[s,i.isDirty]),t.useEffect((()=>{e.values&&!vG(e.values,n.current)?(s._reset(e.values,s._options.resetOptions),n.current=e.values,a((e=>({...e})))):s._resetDefaultValues()}),[e.values,s]),t.useEffect((()=>{e.errors&&s._setErrors(e.errors)}),[e.errors,s]),t.useEffect((()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()})),t.useEffect((()=>{e.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})}),[e.shouldUnregister,s]),r.current.formState=NH(i,s),r.current}const MG=(e,t,r)=>{if(e&&"reportValidity"in e){const n=sH(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},IG=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?MG(n.ref,r,e):n&&n.refs&&n.refs.forEach((t=>MG(t,r,e)))}},OG=(e,t)=>{t.shouldUseNativeValidation&&IG(e,t);const r={};for(const n in e){const i=sH(t.fields,n),a=Object.assign(e[n]||{},{ref:i&&i.ref});if(DG(t.names||Object.keys(e),n)){const e=Object.assign({},sH(r,n));uH(e,"root",a),uH(r,n,e)}else uH(r,n,a)}return r},DG=(e,t)=>{const r=RG(t);return e.some((e=>RG(e).match(`^${r}\\.\\d+`)))};function RG(e){return e.replace(/\]|\[/g,"")}function LG(e,t){for(var r={};e.length;){var n=e[0],i=n.code,a=n.message,s=n.path.join(".");if(!r[s])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[s]={message:o.message,type:o.code}}else r[s]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach((function(t){return t.errors.forEach((function(t){return e.push(t)}))})),t){var l=r[s].types,c=l&&l[n.code];r[s]=FH(s,t,r,i,c?[].concat(c,n.message):n.message)}e.shift()}return r}function FG(e,t,r){return void 0===r&&(r={}),function(n,i,a){try{return Promise.resolve(function(i,s){try{var o=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](n,t)).then((function(e){return a.shouldUseNativeValidation&&IG({},a),{errors:{},values:r.raw?Object.assign({},n):e}}))}catch(l){return s(l)}return o&&o.then?o.then(void 0,s):o}(0,(function(e){if(function(e){return Array.isArray(null==e?void 0:e.errors)}(e))return{values:{},errors:OG(LG(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};throw e})))}catch(s){return Promise.reject(s)}}}function $G(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function BG(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{let r=!1;const n=t.map((t=>{const n=$G(t,e);return r||"function"!=typeof n||(r=!0),n}));if(r)return()=>{for(let e=0;e<n.length;e++){const r=n[e];"function"==typeof r?r():$G(t[e],null)}}}}function zG(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.useCallback(BG(...r),r)}var UG=t.forwardRef(((e,r)=>{const{children:n,...i}=e,a=t.Children.toArray(n),s=a.find(GG);if(s){const e=s.props.children,n=a.map((r=>r===s?t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null:r));return(0,V.jsx)(VG,{...i,ref:r,children:t.isValidElement(e)?t.cloneElement(e,void 0,n):null})}return(0,V.jsx)(VG,{...i,ref:r,children:n})}));UG.displayName="Slot";var VG=t.forwardRef(((e,r)=>{const{children:n,...i}=e;if(t.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;if(r)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=function(){a(...arguments),i(...arguments)}:i&&(r[n]=i):"style"===n?r[n]={...i,...a}:"className"===n&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}(i,n.props);return n.type!==t.Fragment&&(a.ref=r?BG(r,e):e),t.cloneElement(n,a)}return t.Children.count(n)>1?t.Children.only(null):null}));VG.displayName="SlotClone";var HG=e=>{let{children:t}=e;return(0,V.jsx)(V.Fragment,{children:t})};function GG(e){return t.isValidElement(e)&&e.type===HG}var WG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,r)=>{const n=t.forwardRef(((e,t)=>{const{asChild:n,...i}=e,a=n?UG:r;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,V.jsx)(a,{...i,ref:t})}));return n.displayName=`Primitive.${r}`,{...e,[r]:n}}),{});var qG=t.forwardRef(((e,t)=>(0,V.jsx)(WG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));qG.displayName="Label";var KG=qG;const ZG=e=>"boolean"===typeof e?`${e}`:0===e?"0":e,YG=vi,XG=(QG="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e=>{var t;if(null==(null===JG||void 0===JG?void 0:JG.variants))return YG(QG,null===e||void 0===e?void 0:e.class,null===e||void 0===e?void 0:e.className);const{variants:r,defaultVariants:n}=JG,i=Object.keys(r).map((t=>{const i=null===e||void 0===e?void 0:e[t],a=null===n||void 0===n?void 0:n[t];if(null===i)return null;const s=ZG(i)||ZG(a);return r[t][s]})),a=e&&Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e}),{}),s=null===JG||void 0===JG||null===(t=JG.compoundVariants)||void 0===t?void 0:t.reduce(((e,t)=>{let{class:r,className:i,...s}=t;return Object.entries(s).every((e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...n,...a}[t]):{...n,...a}[t]===r}))?[...e,r,i]:e}),[]);return YG(QG,i,s,null===e||void 0===e?void 0:e.class,null===e||void 0===e?void 0:e.className)});var QG,JG;const eW=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)(KG,{ref:t,className:x_(XG(),r),...n})}));eW.displayName=KG.displayName;const tW=e=>{const{children:r,...n}=e;return t.createElement(EH.Provider,{value:n},r)},rW=t.createContext({}),nW=e=>{let{...t}=e;return(0,V.jsx)(rW.Provider,{value:{name:t.name},children:(0,V.jsx)(LH,{...t})})},iW=()=>{const e=t.useContext(rW),r=t.useContext(aW),{getFieldState:n,formState:i}=CH(),a=n(e.name,i);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:s}=r;return{id:s,name:e.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...a}},aW=t.createContext({}),sW=t.forwardRef(((e,r)=>{let{className:n,...i}=e;const a=t.useId();return(0,V.jsx)(aW.Provider,{value:{id:a},children:(0,V.jsx)("div",{ref:r,className:x_("",n),...i})})}));sW.displayName="FormItem";const oW=t.forwardRef(((e,t)=>{let{className:r,...n}=e;const{error:i,formItemId:a}=iW();return(0,V.jsx)(eW,{ref:t,className:x_(i&&"text-destructive",r),htmlFor:a,...n})}));oW.displayName="FormLabel";const lW=t.forwardRef(((e,t)=>{let{...r}=e;const{error:n,formItemId:i,formDescriptionId:a,formMessageId:s}=iW();return(0,V.jsx)(UG,{ref:t,id:i,"aria-describedby":n?`${a} ${s}`:`${a}`,"aria-invalid":!!n,"data-error":!!n,...r})}));lW.displayName="FormControl";t.forwardRef(((e,t)=>{let{className:r,...n}=e;const{formDescriptionId:i}=iW();return(0,V.jsx)("p",{ref:t,id:i,className:x_("text-sm text-muted-foreground",r),...n})})).displayName="FormDescription";const cW=t.forwardRef(((e,t)=>{let{className:r,children:n,...i}=e;const{error:a,formMessageId:s}=iW(),o=a?String(null===a||void 0===a?void 0:a.message):n;return o?(0,V.jsx)("p",{ref:t,id:s,className:x_("text-sm text-destructive text-red mt-1",r),...i,children:o}):null}));cW.displayName="FormMessage";const uW=r.p+"static/media/Ic_upload_photo.c29e1303ad0463e95ebbf71962cc1cb0.svg";var dW,hW=new Uint8Array(16);function pW(){if(!dW&&!(dW="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dW(hW)}const fW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const mW=function(e){return"string"===typeof e&&fW.test(e)};for(var gW=[],vW=0;vW<256;++vW)gW.push((vW+256).toString(16).substr(1));const xW=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(gW[e[t+0]]+gW[e[t+1]]+gW[e[t+2]]+gW[e[t+3]]+"-"+gW[e[t+4]]+gW[e[t+5]]+"-"+gW[e[t+6]]+gW[e[t+7]]+"-"+gW[e[t+8]]+gW[e[t+9]]+"-"+gW[e[t+10]]+gW[e[t+11]]+gW[e[t+12]]+gW[e[t+13]]+gW[e[t+14]]+gW[e[t+15]]).toLowerCase();if(!mW(r))throw TypeError("Stringified UUID is invalid");return r};const yW=function(e,t,r){var n=(e=e||{}).random||(e.rng||pW)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return xW(n)},bW=t.forwardRef(((e,t)=>{let{className:r,type:n,value:i,defaultValue:a,...s}=e;return(0,V.jsx)("input",{type:n,value:null!==i&&void 0!==i?i:"",defaultValue:a,className:x_("flex h-11 w-full rounded-[8px] border border-input bg-white text-black px-[14px] py-[10px] text-base file:border-0 file:bg-transparent file:text-sm file:font-medium  focus-visible:outline-none focus:bg-lightYellow2 disabled:cursor-not-allowed disabled:bg-[#F5F5F5] disabled:hover:border-gray7 focus:shadow-none focus-visible:shadow-none placeholder:text-[#667085] placeholder:text-opacity-55 placeholder:text-base disabled:text-[#767676] focus:shadow-shadow1",r),ref:t,...s,disabled:s.disable})}));function wW(e,t){let[r,n]=t;return Math.min(n,Math.max(r,e))}function _W(e,t){let{checkForDefaultPrevented:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}function kW(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const i=()=>{const r=n.map((e=>t.createContext(e)));return function(n){const i=n?.[e]||r;return t.useMemo((()=>({[`__scope${e}`]:{...n,[e]:i}})),[n,i])}};return i.scopeName=e,[function(r,i){const a=t.createContext(i),s=n.length;n=[...n,i];const o=r=>{const{scope:n,children:i,...o}=r,l=n?.[e]?.[s]||a,c=t.useMemo((()=>o),Object.values(o));return(0,V.jsx)(l.Provider,{value:c,children:i})};return o.displayName=r+"Provider",[o,function(n,o){const l=o?.[e]?.[s]||a,c=t.useContext(l);if(c)return c;if(void 0!==i)return i;throw new Error(`\`${n}\` must be used within \`${r}\``)}]},SW(i,...r)]}function SW(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const i=r[0];if(1===r.length)return i;const a=()=>{const e=r.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(r){const n=e.reduce(((e,t)=>{let{useScope:n,scopeName:i}=t;return{...e,...n(r)[`__scope${i}`]}}),{});return t.useMemo((()=>({[`__scope${i.scopeName}`]:n})),[n])}};return a.scopeName=i.scopeName,a}bW.displayName="Input";var jW=t.createContext(void 0);function EW(e){const r=t.useRef(e);return t.useEffect((()=>{r.current=e})),t.useMemo((()=>function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.current?.(...t)}),[])}var CW,NW="dismissableLayer.update",TW="dismissableLayer.pointerDownOutside",PW="dismissableLayer.focusOutside",AW=t.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),MW=t.forwardRef(((e,r)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=t.useContext(AW),[d,h]=t.useState(null),p=d?.ownerDocument??globalThis?.document,[,f]=t.useState({}),m=zG(r,(e=>h(e))),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(v),y=d?g.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,w=y>=x,_=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=EW(e),i=t.useRef(!1),a=t.useRef((()=>{}));return t.useEffect((()=>{const e=e=>{if(e.target&&!i.current){let t=function(){DW(TW,n,i,{discrete:!0})};const i={originalEvent:e};"touch"===e.pointerType?(r.removeEventListener("click",a.current),a.current=t,r.addEventListener("click",a.current,{once:!0})):t()}else r.removeEventListener("click",a.current);i.current=!1},t=window.setTimeout((()=>{r.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(t),r.removeEventListener("pointerdown",e),r.removeEventListener("click",a.current)}}),[r,n]),{onPointerDownCapture:()=>i.current=!0}}((e=>{const t=e.target,r=[...u.branches].some((e=>e.contains(t)));w&&!r&&(a?.(e),o?.(e),e.defaultPrevented||l?.())}),p),k=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=EW(e),i=t.useRef(!1);return t.useEffect((()=>{const e=e=>{if(e.target&&!i.current){DW(PW,n,{originalEvent:e},{discrete:!1})}};return r.addEventListener("focusin",e),()=>r.removeEventListener("focusin",e)}),[r,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}((e=>{const t=e.target;[...u.branches].some((e=>e.contains(t)))||(s?.(e),o?.(e),e.defaultPrevented||l?.())}),p);return function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=EW(e);t.useEffect((()=>{const e=e=>{"Escape"===e.key&&n(e)};return r.addEventListener("keydown",e,{capture:!0}),()=>r.removeEventListener("keydown",e,{capture:!0})}),[n,r])}((e=>{y===u.layers.size-1&&(i?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))}),p),t.useEffect((()=>{if(d)return n&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(CW=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),OW(),()=>{n&&1===u.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=CW)}}),[d,p,n,u]),t.useEffect((()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),OW())}),[d,u]),t.useEffect((()=>{const e=()=>f({});return document.addEventListener(NW,e),()=>document.removeEventListener(NW,e)}),[]),(0,V.jsx)(WG.div,{...c,ref:m,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:_W(e.onFocusCapture,k.onFocusCapture),onBlurCapture:_W(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:_W(e.onPointerDownCapture,_.onPointerDownCapture)})}));MW.displayName="DismissableLayer";var IW=t.forwardRef(((e,r)=>{const n=t.useContext(AW),i=t.useRef(null),a=zG(r,i);return t.useEffect((()=>{const e=i.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}}),[n.branches]),(0,V.jsx)(WG.div,{...e,ref:a})}));function OW(){const e=new CustomEvent(NW);document.dispatchEvent(e)}function DW(e,t,r,n){let{discrete:i}=n;const a=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),i?function(e,t){e&&ci.flushSync((()=>e.dispatchEvent(t)))}(a,s):a.dispatchEvent(s)}IW.displayName="DismissableLayerBranch";var RW=0;function LW(){t.useEffect((()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??FW()),document.body.insertAdjacentElement("beforeend",e[1]??FW()),RW++,()=>{1===RW&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),RW--}}),[])}function FW(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var $W="focusScope.autoFocusOnMount",BW="focusScope.autoFocusOnUnmount",zW={bubbles:!1,cancelable:!0},UW=t.forwardRef(((e,r)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=t.useState(null),u=EW(a),d=EW(s),h=t.useRef(null),p=zG(r,(e=>c(e))),f=t.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;t.useEffect((()=>{if(i){let e=function(e){if(f.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:WW(h.current,{select:!0})},t=function(e){if(f.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||WW(h.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&WW(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return l&&n.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}}),[i,l,f.paused]),t.useEffect((()=>{if(l){qW.add(f);const t=document.activeElement;if(!l.contains(t)){const r=new CustomEvent($W,zW);l.addEventListener($W,u),l.dispatchEvent(r),r.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=document.activeElement;for(const n of e)if(WW(n,{select:t}),document.activeElement!==r)return}((e=VW(l),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&WW(l))}return()=>{l.removeEventListener($W,u),setTimeout((()=>{const e=new CustomEvent(BW,zW);l.addEventListener(BW,d),l.dispatchEvent(e),e.defaultPrevented||WW(t??document.body,{select:!0}),l.removeEventListener(BW,d),qW.remove(f)}),0)}}var e}),[l,u,d,f]);const m=t.useCallback((e=>{if(!n&&!i)return;if(f.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[i,a]=function(e){const t=VW(e),r=HW(t,e),n=HW(t.reverse(),e);return[r,n]}(t);i&&a?e.shiftKey||r!==a?e.shiftKey&&r===i&&(e.preventDefault(),n&&WW(a,{select:!0})):(e.preventDefault(),n&&WW(i,{select:!0})):r===t&&e.preventDefault()}}),[n,i,f.paused]);return(0,V.jsx)(WG.div,{tabIndex:-1,...o,ref:p,onKeyDown:m})}));function VW(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function HW(e,t){for(const r of e)if(!GW(r,{upTo:t}))return r}function GW(e,t){let{upTo:r}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==r&&e===r)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function WW(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}UW.displayName="FocusScope";var qW=function(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=KW(e,t),e.unshift(t)},remove(t){e=KW(e,t),e[0]?.resume()}}}();function KW(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}var ZW=Boolean(globalThis?.document)?t.useLayoutEffect:()=>{},YW=n["useId".toString()]||(()=>{}),XW=0;function QW(e){const[r,n]=t.useState(YW());return ZW((()=>{e||n((e=>e??String(XW++)))}),[e]),e||(r?`radix-${r}`:"")}var JW=t.forwardRef(((e,t)=>{const{children:r,width:n=10,height:i=5,...a}=e;return(0,V.jsx)(WG.svg,{...a,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,V.jsx)("polygon",{points:"0,0 30,0 15,10"})})}));JW.displayName="Arrow";var eq=JW;var tq="Popper",[rq,nq]=kW(tq),[iq,aq]=rq(tq),sq=e=>{const{__scopePopper:r,children:n}=e,[i,a]=t.useState(null);return(0,V.jsx)(iq,{scope:r,anchor:i,onAnchorChange:a,children:n})};sq.displayName=tq;var oq="PopperAnchor",lq=t.forwardRef(((e,r)=>{const{__scopePopper:n,virtualRef:i,...a}=e,s=aq(oq,n),o=t.useRef(null),l=zG(r,o);return t.useEffect((()=>{s.onAnchorChange(i?.current||o.current)})),i?null:(0,V.jsx)(WG.div,{...a,ref:l})}));lq.displayName=oq;var cq="PopperContent",[uq,dq]=rq(cq),hq=t.forwardRef(((e,r)=>{const{__scopePopper:n,side:i="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:m,...g}=e,v=aq(cq,n),[x,y]=t.useState(null),b=zG(r,(e=>y(e))),[w,_]=t.useState(null),k=function(e){const[r,n]=t.useState(void 0);return ZW((()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,a;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,a=t.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)}),[e]),r}(w),S=k?.width??0,j=k?.height??0,E=i+("center"!==s?"-"+s:""),C="number"===typeof d?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(u)?u:[u],T=N.length>0,P={padding:C,boundary:N.filter(gq),altBoundary:T},{refs:A,floatingStyles:M,placement:I,isPositioned:O,middlewareData:D}=jC({strategy:"fixed",placement:E,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return dC(...t,{animationFrame:"always"===f})},elements:{reference:v.anchor},middleware:[CC({mainAxis:a+j,alignmentAxis:o}),c&&NC({mainAxis:!0,crossAxis:!1,limiter:"partial"===h?TC():void 0,...P}),c&&PC({...P}),AC({...P,apply:e=>{let{elements:t,rects:r,availableWidth:n,availableHeight:i}=e;const{width:a,height:s}=r.reference,o=t.floating.style;o.setProperty("--radix-popper-available-width",`${n}px`),o.setProperty("--radix-popper-available-height",`${i}px`),o.setProperty("--radix-popper-anchor-width",`${a}px`),o.setProperty("--radix-popper-anchor-height",`${s}px`)}}),w&&IC({element:w,padding:l}),vq({arrowWidth:S,arrowHeight:j}),p&&MC({strategy:"referenceHidden",...P})]}),[R,L]=xq(I),F=EW(m);ZW((()=>{O&&F?.()}),[O,F]);const $=D.arrow?.x,B=D.arrow?.y,z=0!==D.arrow?.centerOffset,[U,H]=t.useState();return ZW((()=>{x&&H(window.getComputedStyle(x).zIndex)}),[x]),(0,V.jsx)("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:O?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:U,"--radix-popper-transform-origin":[D.transformOrigin?.x,D.transformOrigin?.y].join(" "),...D.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,V.jsx)(uq,{scope:n,placedSide:R,onArrowChange:_,arrowX:$,arrowY:B,shouldHideArrow:z,children:(0,V.jsx)(WG.div,{"data-side":R,"data-align":L,...g,ref:b,style:{...g.style,animation:O?void 0:"none"}})})})}));hq.displayName=cq;var pq="PopperArrow",fq={top:"bottom",right:"left",bottom:"top",left:"right"},mq=t.forwardRef((function(e,t){const{__scopePopper:r,...n}=e,i=dq(pq,r),a=fq[i.placedSide];return(0,V.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,V.jsx)(eq,{...n,ref:t,style:{...n.style,display:"block"}})})}));function gq(e){return null!==e}mq.displayName=pq;var vq=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:i}=t,a=0!==i.arrow?.centerOffset,s=a?0:e.arrowWidth,o=a?0:e.arrowHeight,[l,c]=xq(r),u={start:"0%",center:"50%",end:"100%"}[c],d=(i.arrow?.x??0)+s/2,h=(i.arrow?.y??0)+o/2;let p="",f="";return"bottom"===l?(p=a?u:`${d}px`,f=-o+"px"):"top"===l?(p=a?u:`${d}px`,f=`${n.floating.height+o}px`):"right"===l?(p=-o+"px",f=a?u:`${h}px`):"left"===l&&(p=`${n.floating.width+o}px`,f=a?u:`${h}px`),{data:{x:p,y:f}}}});function xq(e){const[t,r="center"]=e.split("-");return[t,r]}var yq=sq,bq=lq,wq=hq,_q=mq,kq=t.forwardRef(((e,r)=>{const{container:n,...i}=e,[a,s]=t.useState(!1);ZW((()=>s(!0)),[]);const o=n||a&&globalThis?.document?.body;return o?ci.createPortal((0,V.jsx)(WG.div,{...i,ref:r}),o):null}));kq.displayName="Portal";function Sq(e){let{prop:r,defaultProp:n,onChange:i=()=>{}}=e;const[a,s]=function(e){let{defaultProp:r,onChange:n}=e;const i=t.useState(r),[a]=i,s=t.useRef(a),o=EW(n);return t.useEffect((()=>{s.current!==a&&(o(a),s.current=a)}),[a,s,o]),i}({defaultProp:n,onChange:i}),o=void 0!==r,l=o?r:a,c=EW(i);return[l,t.useCallback((e=>{if(o){const t="function"===typeof e?e(r):e;t!==r&&c(t)}else s(e)}),[o,r,s,c])]}var jq=t.forwardRef(((e,t)=>(0,V.jsx)(WG.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));jq.displayName="VisuallyHidden";var Eq=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},Cq=new WeakMap,Nq=new WeakMap,Tq={},Pq=0,Aq=function(e){return e&&(e.host||Aq(e.parentNode))},Mq=function(e,t,r,n){var i=function(e,t){return t.map((function(t){if(e.contains(t))return t;var r=Aq(t);return r&&e.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);Tq[r]||(Tq[r]=new WeakMap);var a=Tq[r],s=[],o=new Set,l=new Set(i),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(Cq.get(e)||0)+1,c=(a.get(e)||0)+1;Cq.set(e,l),a.set(e,c),s.push(e),1===l&&i&&Nq.set(e,!0),1===c&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}catch(W){console.error("aria-hidden: cannot operate on ",e,W)}}))};return u(t),o.clear(),Pq++,function(){s.forEach((function(e){var t=Cq.get(e)-1,i=a.get(e)-1;Cq.set(e,t),a.set(e,i),t||(Nq.has(e)||e.removeAttribute(n),Nq.delete(e)),i||e.removeAttribute(r)})),--Pq||(Cq=new WeakMap,Cq=new WeakMap,Nq=new WeakMap,Tq={})}},Iq=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||Eq(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),Mq(n,i,r,"aria-hidden")):function(){return null}},Oq="right-scroll-bar-position",Dq="width-before-scroll-bar";function Rq(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var Lq="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,Fq=new WeakMap;function $q(e,r){var n=function(e,r){var n=(0,t.useState)((function(){return{value:e,callback:r,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}}))[0];return n.callback=r,n.facade}(r||null,(function(t){return e.forEach((function(e){return Rq(e,t)}))}));return Lq((function(){var t=Fq.get(n);if(t){var r=new Set(t),i=new Set(e),a=n.current;r.forEach((function(e){i.has(e)||Rq(e,null)})),i.forEach((function(e){r.has(e)||Rq(e,a)}))}Fq.set(n,e)}),[e]),n}function Bq(e){return e}function zq(e,t){void 0===t&&(t=Bq);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var i=t(e,n);return r.push(i),function(){r=r.filter((function(e){return e!==i}))}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var i=r;r=[],i.forEach(e),t=r}var a=function(){var r=t;t=[],r.forEach(e)},s=function(){return Promise.resolve().then(a)};s(),r={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),r}}}};return i}var Uq=function(e){void 0===e&&(e={});var t=zq(null);return t.options=Nv({async:!0,ssr:!1},e),t}(),Vq=function(){},Hq=t.forwardRef((function(e,r){var n=t.useRef(null),i=t.useState({onScrollCapture:Vq,onWheelCapture:Vq,onTouchMoveCapture:Vq}),a=i[0],s=i[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,f=e.noIsolation,m=e.inert,g=e.allowPinchZoom,v=e.as,x=void 0===v?"div":v,y=e.gapMode,b=Tv(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,_=$q([n,r]),k=Nv(Nv({},b),a);return t.createElement(t.Fragment,null,d&&t.createElement(w,{sideCar:Uq,removeScrollBar:u,shards:h,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:y}),o?t.cloneElement(t.Children.only(l),Nv(Nv({},k),{ref:_})):t.createElement(x,Nv({},k,{className:c,ref:_}),l))}));Hq.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Hq.classNames={fullWidth:Dq,zeroRight:Oq};var Gq,Wq=function(e){var r=e.sideCar,n=Tv(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=r.read();if(!i)throw new Error("Sidecar medium not found");return t.createElement(i,Nv({},n))};Wq.isSideCarExport=!0;function qq(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Gq||r.nc;return t&&e.setAttribute("nonce",t),e}var Kq=function(){var e=0,t=null;return{add:function(r){var n,i;0==e&&(t=qq())&&(i=r,(n=t).styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Zq=function(){var e=function(){var e=Kq();return function(r,n){t.useEffect((function(){return e.add(r),function(){e.remove()}}),[r&&n])}}();return function(t){var r=t.styles,n=t.dynamic;return e(r,n),null}},Yq={left:0,top:0,right:0,gap:0},Xq=function(e){return parseInt(e||"",10)||0},Qq=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Yq;var t=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[Xq(r),Xq(n),Xq(i)]}(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Jq=Zq(),eK="data-scroll-locked",tK=function(e,t,r,n){var i=e.left,a=e.top,s=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(o,"px ").concat(n,";\n  }\n  body[").concat(eK,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Oq," {\n    right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(Dq," {\n    margin-right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(Oq," .").concat(Oq," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(Dq," .").concat(Dq," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(eK,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},rK=function(){var e=parseInt(document.body.getAttribute(eK)||"0",10);return isFinite(e)?e:0},nK=function(e){var r=e.noRelative,n=e.noImportant,i=e.gapMode,a=void 0===i?"margin":i;t.useEffect((function(){return document.body.setAttribute(eK,(rK()+1).toString()),function(){var e=rK()-1;e<=0?document.body.removeAttribute(eK):document.body.setAttribute(eK,e.toString())}}),[]);var s=t.useMemo((function(){return Qq(a)}),[a]);return t.createElement(Jq,{styles:tK(s,!r,a,n?"":"!important")})},iK=!1;if("undefined"!==typeof window)try{var aK=Object.defineProperty({},"passive",{get:function(){return iK=!0,!0}});window.addEventListener("test",aK,aK),window.removeEventListener("test",aK,aK)}catch(D_e){iK=!1}var sK=!!iK&&{passive:!1},oK=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},lK=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),cK(e,n)){var i=uK(e,n);if(i[1]>i[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},cK=function(e,t){return"v"===e?function(e){return oK(e,"overflowY")}(t):function(e){return oK(e,"overflowX")}(t)},uK=function(e,t){return"v"===e?function(e){return[e.scrollTop,e.scrollHeight,e.clientHeight]}(t):function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t)},dK=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},hK=function(e){return[e.deltaX,e.deltaY]},pK=function(e){return e&&"current"in e?e.current:e},fK=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},mK=0,gK=[];function vK(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xK=(yK=function(e){var r=t.useRef([]),n=t.useRef([0,0]),i=t.useRef(),a=t.useState(mK++)[0],s=t.useState(Zq)[0],o=t.useRef(e);t.useEffect((function(){o.current=e}),[e]),t.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=Pv([e.lockRef.current],(e.shards||[]).map(pK),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(a))})),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(a))}))}}}),[e.inert,e.lockRef.current,e.shards]);var l=t.useCallback((function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var r,a=dK(e),s=n.current,l="deltaX"in e?e.deltaX:s[0]-a[0],c="deltaY"in e?e.deltaY:s[1]-a[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=lK(d,u);if(!h)return!0;if(h?r=d:(r="v"===d?"h":"v",h=lK(d,u)),!h)return!1;if(!i.current&&"changedTouches"in e&&(l||c)&&(i.current=r),!r)return!0;var p=i.current||r;return function(e,t,r,n,i){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=a*n,o=r.target,l=t.contains(o),c=!1,u=s>0,d=0,h=0;do{var p=uK(e,o),f=p[0],m=p[1]-p[2]-a*f;(f||m)&&cK(e,o)&&(d+=m,h+=f),o=o instanceof ShadowRoot?o.host:o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&(i&&Math.abs(d)<1||!i&&s>d)||!u&&(i&&Math.abs(h)<1||!i&&-s>h))&&(c=!0),c}(p,t,e,"h"===p?l:c,!0)}),[]),c=t.useCallback((function(e){var t=e;if(gK.length&&gK[gK.length-1]===s){var n="deltaY"in t?hK(t):dK(t),i=r.current.filter((function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,n)}))[0];if(i&&i.should)t.cancelable&&t.preventDefault();else if(!i){var a=(o.current.shards||[]).map(pK).filter(Boolean).filter((function(e){return e.contains(t.target)}));(a.length>0?l(t,a[0]):!o.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),u=t.useCallback((function(e,t,n,i){var a={name:e,delta:t,target:n,should:i,shadowParent:vK(n)};r.current.push(a),setTimeout((function(){r.current=r.current.filter((function(e){return e!==a}))}),1)}),[]),d=t.useCallback((function(e){n.current=dK(e),i.current=void 0}),[]),h=t.useCallback((function(t){u(t.type,hK(t),t.target,l(t,e.lockRef.current))}),[]),p=t.useCallback((function(t){u(t.type,dK(t),t.target,l(t,e.lockRef.current))}),[]);t.useEffect((function(){return gK.push(s),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,sK),document.addEventListener("touchmove",c,sK),document.addEventListener("touchstart",d,sK),function(){gK=gK.filter((function(e){return e!==s})),document.removeEventListener("wheel",c,sK),document.removeEventListener("touchmove",c,sK),document.removeEventListener("touchstart",d,sK)}}),[]);var f=e.removeScrollBar,m=e.inert;return t.createElement(t.Fragment,null,m?t.createElement(s,{styles:fK(a)}):null,f?t.createElement(nK,{gapMode:e.gapMode}):null)},Uq.useMedium(yK),Wq);var yK,bK=t.forwardRef((function(e,r){return t.createElement(Hq,Nv({},e,{ref:r,sideCar:xK}))}));bK.classNames=Hq.classNames;const wK=bK;var _K=[" ","Enter","ArrowUp","ArrowDown"],kK=[" ","Enter"],SK="Select",[jK,EK,CK]=function(e){const r=e+"CollectionProvider",[n,i]=kW(r),[a,s]=n(r,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:r,children:n}=e,i=t.useRef(null),s=t.useRef(new Map).current;return(0,V.jsx)(a,{scope:r,itemMap:s,collectionRef:i,children:n})};o.displayName=r;const l=e+"CollectionSlot",c=t.forwardRef(((e,t)=>{const{scope:r,children:n}=e,i=zG(t,s(l,r).collectionRef);return(0,V.jsx)(UG,{ref:i,children:n})}));c.displayName=l;const u=e+"CollectionItemSlot",d="data-radix-collection-item",h=t.forwardRef(((e,r)=>{const{scope:n,children:i,...a}=e,o=t.useRef(null),l=zG(r,o),c=s(u,n);return t.useEffect((()=>(c.itemMap.set(o,{ref:o,...a}),()=>{c.itemMap.delete(o)}))),(0,V.jsx)(UG,{[d]:"",ref:l,children:i})}));return h.displayName=u,[{Provider:o,Slot:c,ItemSlot:h},function(r){const n=s(e+"CollectionConsumer",r),i=t.useCallback((()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`)),r=Array.from(n.itemMap.values()).sort(((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current)));return r}),[n.collectionRef,n.itemMap]);return i},i]}(SK),[NK,TK]=kW(SK,[CK,nq]),PK=nq(),[AK,MK]=NK(SK),[IK,OK]=NK(SK),DK=e=>{const{__scopeSelect:r,children:n,open:i,defaultOpen:a,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:p,required:f,form:m}=e,g=PK(r),[v,x]=t.useState(null),[y,b]=t.useState(null),[w,_]=t.useState(!1),k=function(e){const r=t.useContext(jW);return e||r||"ltr"}(u),[S=!1,j]=Sq({prop:i,defaultProp:a,onChange:s}),[E,C]=Sq({prop:o,defaultProp:l,onChange:c}),N=t.useRef(null),T=!v||(m||!!v.closest("form")),[P,A]=t.useState(new Set),M=Array.from(P).map((e=>e.props.value)).join(";");return(0,V.jsx)(yq,{...g,children:(0,V.jsxs)(AK,{required:f,scope:r,trigger:v,onTriggerChange:x,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:_,contentId:QW(),value:E,onValueChange:C,open:S,onOpenChange:j,dir:k,triggerPointerDownPosRef:N,disabled:p,children:[(0,V.jsx)(jK.Provider,{scope:r,children:(0,V.jsx)(IK,{scope:e.__scopeSelect,onNativeOptionAdd:t.useCallback((e=>{A((t=>new Set(t).add(e)))}),[]),onNativeOptionRemove:t.useCallback((e=>{A((t=>{const r=new Set(t);return r.delete(e),r}))}),[]),children:n})}),T?(0,V.jsxs)(kZ,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:h,value:E,onChange:e=>C(e.target.value),disabled:p,form:m,children:[void 0===E?(0,V.jsx)("option",{value:""}):null,Array.from(P)]},M):null]})})};DK.displayName=SK;var RK="SelectTrigger",LK=t.forwardRef(((e,r)=>{const{__scopeSelect:n,disabled:i=!1,...a}=e,s=PK(n),o=MK(RK,n),l=o.disabled||i,c=zG(r,o.onTriggerChange),u=EK(n),d=t.useRef("touch"),[h,p,f]=SZ((e=>{const t=u().filter((e=>!e.disabled)),r=t.find((e=>e.value===o.value)),n=jZ(t,e,r);void 0!==n&&o.onValueChange(n.value)})),m=e=>{l||(o.onOpenChange(!0),f()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,V.jsx)(bq,{asChild:!0,...s,children:(0,V.jsx)(WG.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":_Z(o.value)?"":void 0,...a,ref:c,onClick:_W(a.onClick,(e=>{e.currentTarget.focus(),"mouse"!==d.current&&m(e)})),onPointerDown:_W(a.onPointerDown,(e=>{d.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(m(e),e.preventDefault())})),onKeyDown:_W(a.onKeyDown,(e=>{const t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),t&&" "===e.key||_K.includes(e.key)&&(m(),e.preventDefault())}))})})}));LK.displayName=RK;var FK="SelectValue",$K=t.forwardRef(((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:a,placeholder:s="",...o}=e,l=MK(FK,r),{onValueNodeHasChildrenChange:c}=l,u=void 0!==a,d=zG(t,l.onValueNodeChange);return ZW((()=>{c(u)}),[c,u]),(0,V.jsx)(WG.span,{...o,ref:d,style:{pointerEvents:"none"},children:_Z(l.value)?(0,V.jsx)(V.Fragment,{children:s}):a})}));$K.displayName=FK;var BK=t.forwardRef(((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return(0,V.jsx)(WG.span,{"aria-hidden":!0,...i,ref:t,children:n||"\u25bc"})}));BK.displayName="SelectIcon";var zK=e=>(0,V.jsx)(kq,{asChild:!0,...e});zK.displayName="SelectPortal";var UK="SelectContent",VK=t.forwardRef(((e,r)=>{const n=MK(UK,e.__scopeSelect),[i,a]=t.useState();if(ZW((()=>{a(new DocumentFragment)}),[]),!n.open){const t=i;return t?ci.createPortal((0,V.jsx)(GK,{scope:e.__scopeSelect,children:(0,V.jsx)(jK.Slot,{scope:e.__scopeSelect,children:(0,V.jsx)("div",{children:e.children})})}),t):null}return(0,V.jsx)(qK,{...e,ref:r})}));VK.displayName=UK;var HK=10,[GK,WK]=NK(UK),qK=t.forwardRef(((e,r)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:m,hideWhenDetached:g,avoidCollisions:v,...x}=e,y=MK(UK,n),[b,w]=t.useState(null),[_,k]=t.useState(null),S=zG(r,(e=>w(e))),[j,E]=t.useState(null),[C,N]=t.useState(null),T=EK(n),[P,A]=t.useState(!1),M=t.useRef(!1);t.useEffect((()=>{if(b)return Iq(b)}),[b]),LW();const I=t.useCallback((e=>{const[t,...r]=T().map((e=>e.ref.current)),[n]=r.slice(-1),i=document.activeElement;for(const a of e){if(a===i)return;if(a?.scrollIntoView({block:"nearest"}),a===t&&_&&(_.scrollTop=0),a===n&&_&&(_.scrollTop=_.scrollHeight),a?.focus(),document.activeElement!==i)return}}),[T,_]),O=t.useCallback((()=>I([j,b])),[I,j,b]);t.useEffect((()=>{P&&O()}),[P,O]);const{onOpenChange:D,triggerPointerDownPosRef:R}=y;t.useEffect((()=>{if(b){let e={x:0,y:0};const t=t=>{e={x:Math.abs(Math.round(t.pageX)-(R.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(R.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():b.contains(r.target)||D(!1),document.removeEventListener("pointermove",t),R.current=null};return null!==R.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}}),[b,D,R]),t.useEffect((()=>{const e=()=>D(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}}),[D]);const[L,F]=SZ((e=>{const t=T().filter((e=>!e.disabled)),r=t.find((e=>e.ref.current===document.activeElement)),n=jZ(t,e,r);n&&setTimeout((()=>n.ref.current.focus()))})),$=t.useCallback(((e,t,r)=>{const n=!M.current&&!r;(void 0!==y.value&&y.value===t||n)&&(E(e),n&&(M.current=!0))}),[y.value]),B=t.useCallback((()=>b?.focus()),[b]),z=t.useCallback(((e,t,r)=>{const n=!M.current&&!r;(void 0!==y.value&&y.value===t||n)&&N(e)}),[y.value]),U="popper"===i?ZK:KK,H=U===ZK?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:m,hideWhenDetached:g,avoidCollisions:v}:{};return(0,V.jsx)(GK,{scope:n,content:b,viewport:_,onViewportChange:k,itemRefCallback:$,selectedItem:j,onItemLeave:B,itemTextRefCallback:z,focusSelectedItem:O,selectedItemText:C,position:i,isPositioned:P,searchRef:L,children:(0,V.jsx)(wK,{as:UG,allowPinchZoom:!0,children:(0,V.jsx)(UW,{asChild:!0,trapped:y.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:_W(a,(e=>{y.trigger?.focus({preventScroll:!0}),e.preventDefault()})),children:(0,V.jsx)(MW,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:(0,V.jsx)(U,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:e=>e.preventDefault(),...x,...H,onPlaced:()=>A(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:_W(x.onKeyDown,(e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||F(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=T().filter((e=>!e.disabled)).map((e=>e.ref.current));if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout((()=>I(t))),e.preventDefault()}}))})})})})})}));qK.displayName="SelectContentImpl";var KK=t.forwardRef(((e,r)=>{const{__scopeSelect:n,onPlaced:i,...a}=e,s=MK(UK,n),o=WK(UK,n),[l,c]=t.useState(null),[u,d]=t.useState(null),h=zG(r,(e=>d(e))),p=EK(n),f=t.useRef(!1),m=t.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:x,focusSelectedItem:y}=o,b=t.useCallback((()=>{if(s.trigger&&s.valueNode&&l&&u&&g&&v&&x){const e=s.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),n=x.getBoundingClientRect();if("rtl"!==s.dir){const i=n.left-t.left,a=r.left-i,s=e.left-a,o=e.width+s,c=Math.max(o,t.width),u=window.innerWidth-HK,d=wW(a,[HK,Math.max(HK,u-c)]);l.style.minWidth=o+"px",l.style.left=d+"px"}else{const i=t.right-n.right,a=window.innerWidth-r.right-i,s=window.innerWidth-e.right-a,o=e.width+s,c=Math.max(o,t.width),u=window.innerWidth-HK,d=wW(a,[HK,Math.max(HK,u-c)]);l.style.minWidth=o+"px",l.style.right=d+"px"}const a=p(),o=window.innerHeight-2*HK,c=g.scrollHeight,d=window.getComputedStyle(u),h=parseInt(d.borderTopWidth,10),m=parseInt(d.paddingTop,10),y=parseInt(d.borderBottomWidth,10),b=h+m+c+parseInt(d.paddingBottom,10)+y,w=Math.min(5*v.offsetHeight,b),_=window.getComputedStyle(g),k=parseInt(_.paddingTop,10),S=parseInt(_.paddingBottom,10),j=e.top+e.height/2-HK,E=o-j,C=v.offsetHeight/2,N=h+m+(v.offsetTop+C),T=b-N;if(N<=j){const e=a.length>0&&v===a[a.length-1].ref.current;l.style.bottom="0px";const t=u.clientHeight-g.offsetTop-g.offsetHeight,r=N+Math.max(E,C+(e?S:0)+t+y);l.style.height=r+"px"}else{const e=a.length>0&&v===a[0].ref.current;l.style.top="0px";const t=Math.max(j,h+g.offsetTop+(e?k:0)+C)+T;l.style.height=t+"px",g.scrollTop=N-j+g.offsetTop}l.style.margin=`${HK}px 0`,l.style.minHeight=w+"px",l.style.maxHeight=o+"px",i?.(),requestAnimationFrame((()=>f.current=!0))}}),[p,s.trigger,s.valueNode,l,u,g,v,x,s.dir,i]);ZW((()=>b()),[b]);const[w,_]=t.useState();ZW((()=>{u&&_(window.getComputedStyle(u).zIndex)}),[u]);const k=t.useCallback((e=>{e&&!0===m.current&&(b(),y?.(),m.current=!1)}),[b,y]);return(0,V.jsx)(YK,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:k,children:(0,V.jsx)("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:(0,V.jsx)(WG.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})}));KK.displayName="SelectItemAlignedPosition";var ZK=t.forwardRef(((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=HK,...a}=e,s=PK(r);return(0,V.jsx)(wq,{...s,...a,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})}));ZK.displayName="SelectPopperPosition";var[YK,XK]=NK(UK,{}),QK="SelectViewport",JK=t.forwardRef(((e,r)=>{const{__scopeSelect:n,nonce:i,...a}=e,s=WK(QK,n),o=XK(QK,n),l=zG(r,s.onViewportChange),c=t.useRef(0);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),(0,V.jsx)(jK.Slot,{scope:n,children:(0,V.jsx)(WG.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:_W(a.onScroll,(e=>{const t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=o;if(n?.current&&r){const e=Math.abs(c.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*HK,i=parseFloat(r.style.minHeight),a=parseFloat(r.style.height),s=Math.max(i,a);if(s<n){const i=s+e,a=Math.min(n,i),o=i-a;r.style.height=a+"px","0px"===r.style.bottom&&(t.scrollTop=o>0?o:0,r.style.justifyContent="flex-end")}}}c.current=t.scrollTop}))})})]})}));JK.displayName=QK;var eZ="SelectGroup",[tZ,rZ]=NK(eZ),nZ=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e,i=QW();return(0,V.jsx)(tZ,{scope:r,id:i,children:(0,V.jsx)(WG.div,{role:"group","aria-labelledby":i,...n,ref:t})})}));nZ.displayName=eZ;var iZ="SelectLabel",aZ=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e,i=rZ(iZ,r);return(0,V.jsx)(WG.div,{id:i.id,...n,ref:t})}));aZ.displayName=iZ;var sZ="SelectItem",[oZ,lZ]=NK(sZ),cZ=t.forwardRef(((e,r)=>{const{__scopeSelect:n,value:i,disabled:a=!1,textValue:s,...o}=e,l=MK(sZ,n),c=WK(sZ,n),u=l.value===i,[d,h]=t.useState(s??""),[p,f]=t.useState(!1),m=zG(r,(e=>c.itemRefCallback?.(e,i,a))),g=QW(),v=t.useRef("touch"),x=()=>{a||(l.onValueChange(i),l.onOpenChange(!1))};if(""===i)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,V.jsx)(oZ,{scope:n,value:i,disabled:a,textId:g,isSelected:u,onItemTextChange:t.useCallback((e=>{h((t=>t||(e?.textContent??"").trim()))}),[]),children:(0,V.jsx)(jK.ItemSlot,{scope:n,value:i,disabled:a,textValue:d,children:(0,V.jsx)(WG.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:m,onFocus:_W(o.onFocus,(()=>f(!0))),onBlur:_W(o.onBlur,(()=>f(!1))),onClick:_W(o.onClick,(()=>{"mouse"!==v.current&&x()})),onPointerUp:_W(o.onPointerUp,(()=>{"mouse"===v.current&&x()})),onPointerDown:_W(o.onPointerDown,(e=>{v.current=e.pointerType})),onPointerMove:_W(o.onPointerMove,(e=>{v.current=e.pointerType,a?c.onItemLeave?.():"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})})),onPointerLeave:_W(o.onPointerLeave,(e=>{e.currentTarget===document.activeElement&&c.onItemLeave?.()})),onKeyDown:_W(o.onKeyDown,(e=>{""!==c.searchRef?.current&&" "===e.key||(kK.includes(e.key)&&x()," "===e.key&&e.preventDefault())}))})})})}));cZ.displayName=sZ;var uZ="SelectItemText",dZ=t.forwardRef(((e,r)=>{const{__scopeSelect:n,className:i,style:a,...s}=e,o=MK(uZ,n),l=WK(uZ,n),c=lZ(uZ,n),u=OK(uZ,n),[d,h]=t.useState(null),p=zG(r,(e=>h(e)),c.onItemTextChange,(e=>l.itemTextRefCallback?.(e,c.value,c.disabled))),f=d?.textContent,m=t.useMemo((()=>(0,V.jsx)("option",{value:c.value,disabled:c.disabled,children:f},c.value)),[c.disabled,c.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return ZW((()=>(g(m),()=>v(m))),[g,v,m]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(WG.span,{id:c.textId,...s,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ci.createPortal(s.children,o.valueNode):null]})}));dZ.displayName=uZ;var hZ="SelectItemIndicator",pZ=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e;return lZ(hZ,r).isSelected?(0,V.jsx)(WG.span,{"aria-hidden":!0,...n,ref:t}):null}));pZ.displayName=hZ;var fZ="SelectScrollUpButton",mZ=t.forwardRef(((e,r)=>{const n=WK(fZ,e.__scopeSelect),i=XK(fZ,e.__scopeSelect),[a,s]=t.useState(!1),o=zG(r,i.onScrollButtonChange);return ZW((()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[n.viewport,n.isPositioned]),a?(0,V.jsx)(xZ,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null}));mZ.displayName=fZ;var gZ="SelectScrollDownButton",vZ=t.forwardRef(((e,r)=>{const n=WK(gZ,e.__scopeSelect),i=XK(gZ,e.__scopeSelect),[a,s]=t.useState(!1),o=zG(r,i.onScrollButtonChange);return ZW((()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,r=Math.ceil(t.scrollTop)<e;s(r)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[n.viewport,n.isPositioned]),a?(0,V.jsx)(xZ,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null}));vZ.displayName=gZ;var xZ=t.forwardRef(((e,r)=>{const{__scopeSelect:n,onAutoScroll:i,...a}=e,s=WK("SelectScrollButton",n),o=t.useRef(null),l=EK(n),c=t.useCallback((()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)}),[]);return t.useEffect((()=>()=>c()),[c]),ZW((()=>{const e=l().find((e=>e.ref.current===document.activeElement));e?.ref.current?.scrollIntoView({block:"nearest"})}),[l]),(0,V.jsx)(WG.div,{"aria-hidden":!0,...a,ref:r,style:{flexShrink:0,...a.style},onPointerDown:_W(a.onPointerDown,(()=>{null===o.current&&(o.current=window.setInterval(i,50))})),onPointerMove:_W(a.onPointerMove,(()=>{s.onItemLeave?.(),null===o.current&&(o.current=window.setInterval(i,50))})),onPointerLeave:_W(a.onPointerLeave,(()=>{c()}))})})),yZ=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e;return(0,V.jsx)(WG.div,{"aria-hidden":!0,...n,ref:t})}));yZ.displayName="SelectSeparator";var bZ="SelectArrow",wZ=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e,i=PK(r),a=MK(bZ,r),s=WK(bZ,r);return a.open&&"popper"===s.position?(0,V.jsx)(_q,{...i,...n,ref:t}):null}));function _Z(e){return""===e||void 0===e}wZ.displayName=bZ;var kZ=t.forwardRef(((e,r)=>{const{value:n,...i}=e,a=t.useRef(null),s=zG(r,a),o=function(e){const r=t.useRef({value:e,previous:e});return t.useMemo((()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous)),[e])}(n);return t.useEffect((()=>{const e=a.current,t=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(o!==n&&r){const t=new Event("change",{bubbles:!0});r.call(e,n),e.dispatchEvent(t)}}),[o,n]),(0,V.jsx)(jq,{asChild:!0,children:(0,V.jsx)("select",{...i,ref:s,defaultValue:n})})}));function SZ(e){const r=EW(e),n=t.useRef(""),i=t.useRef(0),a=t.useCallback((e=>{const t=n.current+e;r(t),function e(t){n.current=t,window.clearTimeout(i.current),""!==t&&(i.current=window.setTimeout((()=>e("")),1e3))}(t)}),[r]),s=t.useCallback((()=>{n.current="",window.clearTimeout(i.current)}),[]);return t.useEffect((()=>()=>window.clearTimeout(i.current)),[]),[n,a,s]}function jZ(e,t,r){const n=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,i=r?e.indexOf(r):-1;let a=function(e,t){return e.map(((r,n)=>e[(t+n)%e.length]))}(e,Math.max(i,0));1===n.length&&(a=a.filter((e=>e!==r)));const s=a.find((e=>e.textValue.toLowerCase().startsWith(n.toLowerCase())));return s!==r?s:void 0}kZ.displayName="BubbleSelect";var EZ=DK,CZ=LK,NZ=$K,TZ=BK,PZ=zK,AZ=VK,MZ=JK,IZ=nZ,OZ=aZ,DZ=cZ,RZ=dZ,LZ=pZ,FZ=mZ,$Z=vZ,BZ=yZ;const zZ=F_("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),UZ=F_("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),VZ=F_("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),HZ=EZ,GZ=IZ,WZ=NZ,qZ=t.forwardRef(((e,t)=>{let{className:r,children:n,...i}=e;return(0,V.jsxs)(CZ,{ref:t,className:x_("flex h-11 w-full items-center justify-between rounded-[8px] border border-input bg-background px-3 py-2 text-base placeholder:text-[#667085] placeholder:text-opacity-55 focus:outline-none disabled:cursor-not-allowed disabled:bg-[#F5F5F5] disabled:hover:border-gray7 disabled:text-[#767676] [&>span]:line-clamp-1",r),...i,children:[n,(0,V.jsx)(TZ,{asChild:!0,children:(0,V.jsx)(zZ,{className:"h-4 w-4"})})]})}));qZ.displayName=CZ.displayName;const KZ=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)(FZ,{ref:t,className:x_("flex cursor-default items-center justify-center py-1",r),...n,children:(0,V.jsx)(UZ,{className:"h-4 w-4"})})}));KZ.displayName=FZ.displayName;const ZZ=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)($Z,{ref:t,className:x_("flex cursor-default items-center justify-center py-1",r),...n,children:(0,V.jsx)(zZ,{className:"h-4 w-4"})})}));ZZ.displayName=$Z.displayName;const YZ=t.forwardRef(((e,t)=>{let{className:r,children:n,position:i="popper",...a}=e;return(0,V.jsx)(PZ,{children:(0,V.jsxs)(AZ,{ref:t,className:x_("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-[8px] border border-gray1 bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...a,style:{zIndex:"99999999"},children:[(0,V.jsx)(KZ,{}),(0,V.jsx)(MZ,{className:x_("","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,V.jsx)(ZZ,{})]})})}));YZ.displayName=AZ.displayName;t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)(OZ,{ref:t,className:x_("py-1.5 pl-8 pr-2 text-sm",r),...n})})).displayName=OZ.displayName;const XZ=t.forwardRef(((e,t)=>{let{className:r,children:n,...i}=e;return(0,V.jsxs)(DZ,{ref:t,className:x_("relative flex w-full cursor-default select-none items-center py-1.5 pl-4 pr-2 text-base outline-none focus:text-accent-foreground hover:bg-[#EAECF0] data-[state=selected]:bg-[#EAECF0] data-[disabled]:pointer-events-none data-[disabled]:opacity-50 rounded-[8px]",r),...i,children:[(0,V.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,V.jsx)(LZ,{children:(0,V.jsx)(VZ,{className:"h-4 w-4"})})}),(0,V.jsx)(RZ,{children:n})]})}));XZ.displayName=DZ.displayName;var QZ,JZ;t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)(BZ,{ref:t,className:x_("-mx-1 my-1 h-px bg-muted",r),...n})})).displayName=BZ.displayName,function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!==typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map((e=>"string"===typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t}(QZ||(QZ={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(JZ||(JZ={}));const eY=QZ.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tY=e=>{switch(typeof e){case"undefined":return eY.undefined;case"string":return eY.string;case"number":return isNaN(e)?eY.nan:eY.number;case"boolean":return eY.boolean;case"function":return eY.function;case"bigint":return eY.bigint;case"symbol":return eY.symbol;case"object":return Array.isArray(e)?eY.array:null===e?eY.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?eY.promise:"undefined"!==typeof Map&&e instanceof Map?eY.map:"undefined"!==typeof Set&&e instanceof Set?eY.set:"undefined"!==typeof Date&&e instanceof Date?eY.date:eY.object;default:return eY.unknown}},rY=QZ.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class nY extends Error{get errors(){return this.issues}constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof nY))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,QZ.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message;const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}nY.create=e=>new nY(e);const iY=(e,t)=>{let r;switch(e.code){case rY.invalid_type:r=e.received===eY.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case rY.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,QZ.jsonStringifyReplacer)}`;break;case rY.unrecognized_keys:r=`Unrecognized key(s) in object: ${QZ.joinValues(e.keys,", ")}`;break;case rY.invalid_union:r="Invalid input";break;case rY.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${QZ.joinValues(e.options)}`;break;case rY.invalid_enum_value:r=`Invalid enum value. Expected ${QZ.joinValues(e.options)}, received '${e.received}'`;break;case rY.invalid_arguments:r="Invalid function arguments";break;case rY.invalid_return_type:r="Invalid function return type";break;case rY.invalid_date:r="Invalid date";break;case rY.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"===typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:QZ.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case rY.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case rY.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case rY.custom:r="Invalid input";break;case rY.invalid_intersection_types:r="Intersection results could not be merged";break;case rY.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case rY.not_finite:r="Number must be finite";break;default:r=t.defaultError,QZ.assertNever(e)}return{message:r}};let aY=iY;function sY(){return aY}const oY=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],s={...i,path:a};if(void 0!==i.message)return{...i,path:a,message:i.message};let o="";const l=n.filter((e=>!!e)).slice().reverse();for(const c of l)o=c(s,{data:t,defaultError:o}).message;return{...i,path:a,message:o}};function lY(e,t){const r=sY(),n=oY({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===iY?void 0:iY].filter((e=>!!e))});e.common.issues.push(n)}class cY{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return uY;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const n of t){const e=await n.key,t=await n.value;r.push({key:e,value:t})}return cY.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return uY;if("aborted"===i.status)return uY;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||"undefined"===typeof i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const uY=Object.freeze({status:"aborted"}),dY=e=>({status:"dirty",value:e}),hY=e=>({status:"valid",value:e}),pY=e=>"aborted"===e.status,fY=e=>"dirty"===e.status,mY=e=>"valid"===e.status,gY=e=>"undefined"!==typeof Promise&&e instanceof Promise;function vY(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function xY(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}var yY,bY,wY;"function"===typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"===typeof e?{message:e}:e||{},e.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message}(yY||(yY={}));class _Y{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kY=(e,t)=>{if(mY(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new nY(e.common.issues);return this._error=t,this._error}}};function SY(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{var a,s;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!==o&&void 0!==o?o:i.defaultError}:"undefined"===typeof i.data?{message:null!==(a=null!==o&&void 0!==o?o:n)&&void 0!==a?a:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(s=null!==o&&void 0!==o?o:r)&&void 0!==s?s:i.defaultError}},description:i}}class jY{get description(){return this._def.description}_getType(e){return tY(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:tY(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new cY,ctx:{common:e.parent.common,data:e.data,parsedType:tY(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(gY(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null===t||void 0===t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tY(e)},i=this._parseSync({data:e,path:n.path,parent:n});return kY(n,i)}"~validate"(e){var t,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tY(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:n});return mY(t)?{value:t.value}:{issues:n.common.issues}}catch(D_e){(null===(r=null===(t=null===D_e||void 0===D_e?void 0:D_e.message)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then((e=>mY(e)?{value:e.value}:{issues:n.common.issues}))}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tY(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(gY(n)?n:Promise.resolve(n));return kY(r,i)}refine(e,t){const r=e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),a=()=>n.addIssue({code:rY.custom,...r(t)});return"undefined"!==typeof Promise&&i instanceof Promise?i.then((e=>!!e||(a(),!1))):!!i||(a(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"===typeof t?t(r,n):t),!1)))}_refinement(e){return new CX({schema:this,typeName:BX.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return NX.create(this,this._def)}nullable(){return TX.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return lX.create(this)}promise(){return EX.create(this,this._def)}or(e){return dX.create([this,e],this._def)}and(e){return mX.create(this,e,this._def)}transform(e){return new CX({...SY(this._def),schema:this,typeName:BX.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"===typeof e?e:()=>e;return new PX({...SY(this._def),innerType:this,defaultValue:t,typeName:BX.ZodDefault})}brand(){return new OX({typeName:BX.ZodBranded,type:this,...SY(this._def)})}catch(e){const t="function"===typeof e?e:()=>e;return new AX({...SY(this._def),innerType:this,catchValue:t,typeName:BX.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return DX.create(this,e)}readonly(){return RX.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const EY=/^c[^\s-]{8,}$/i,CY=/^[0-9a-z]+$/,NY=/^[0-9A-HJKMNP-TV-Z]{26}$/i,TY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,PY=/^[a-z0-9_-]{21}$/i,AY=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,MY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,IY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let OY;const DY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,RY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,LY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,FY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,$Y=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,BY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,zY="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",UY=new RegExp(`^${zY}$`);function VY(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function HY(e){return new RegExp(`^${VY(e)}$`)}function GY(e){let t=`${zY}T${VY(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function WY(e,t){return!("v4"!==t&&t||!DY.test(e))||!("v6"!==t&&t||!LY.test(e))}function qY(e,t){if(!AY.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return"object"===typeof i&&null!==i&&(!(!i.typ||!i.alg)&&(!t||i.alg===t))}catch(oT){return!1}}function KY(e,t){return!("v4"!==t&&t||!RY.test(e))||!("v6"!==t&&t||!FY.test(e))}class ZY extends jY{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==eY.string){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.string,received:t.parsedType}),uY}const t=new cY;let r;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const i=e.data.length>n.value,a=e.data.length<n.value;(i||a)&&(r=this._getOrReturnCtx(e,r),i?lY(r,{code:rY.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):a&&lY(r,{code:rY.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)IY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"email",code:rY.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)OY||(OY=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),OY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"emoji",code:rY.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)TY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"uuid",code:rY.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)PY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"nanoid",code:rY.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)EY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"cuid",code:rY.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)CY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"cuid2",code:rY.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)NY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"ulid",code:rY.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(oT){r=this._getOrReturnCtx(e,r),lY(r,{validation:"url",code:rY.invalid_string,message:n.message}),t.dirty()}else if("regex"===n.kind){n.regex.lastIndex=0;n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"regex",code:rY.invalid_string,message:n.message}),t.dirty())}else if("trim"===n.kind)e.data=e.data.trim();else if("includes"===n.kind)e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty());else if("toLowerCase"===n.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===n.kind)e.data=e.data.toUpperCase();else if("startsWith"===n.kind)e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty());else if("endsWith"===n.kind)e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty());else if("datetime"===n.kind){GY(n).test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.invalid_string,validation:"datetime",message:n.message}),t.dirty())}else if("date"===n.kind){UY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.invalid_string,validation:"date",message:n.message}),t.dirty())}else if("time"===n.kind){HY(n).test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.invalid_string,validation:"time",message:n.message}),t.dirty())}else"duration"===n.kind?MY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"duration",code:rY.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?WY(e.data,n.version)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"ip",code:rY.invalid_string,message:n.message}),t.dirty()):"jwt"===n.kind?qY(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"jwt",code:rY.invalid_string,message:n.message}),t.dirty()):"cidr"===n.kind?KY(e.data,n.version)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"cidr",code:rY.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?$Y.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"base64",code:rY.invalid_string,message:n.message}),t.dirty()):"base64url"===n.kind?BY.test(e.data)||(r=this._getOrReturnCtx(e,r),lY(r,{validation:"base64url",code:rY.invalid_string,message:n.message}),t.dirty()):QZ.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:rY.invalid_string,...yY.errToObj(r)})}_addCheck(e){return new ZY({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...yY.errToObj(e)})}url(e){return this._addCheck({kind:"url",...yY.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...yY.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...yY.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...yY.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...yY.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...yY.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...yY.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...yY.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...yY.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...yY.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...yY.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...yY.errToObj(e)})}datetime(e){var t,r;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,local:null!==(r=null===e||void 0===e?void 0:e.local)&&void 0!==r&&r,...yY.errToObj(null===e||void 0===e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"===typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,...yY.errToObj(null===e||void 0===e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...yY.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...yY.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position,...yY.errToObj(null===t||void 0===t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...yY.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...yY.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...yY.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...yY.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...yY.errToObj(t)})}nonempty(e){return this.min(1,yY.errToObj(e))}trim(){return new ZY({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZY({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZY({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function YY(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}ZY.create=e=>{var t;return new ZY({checks:[],typeName:BX.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...SY(e)})};class XY extends jY{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==eY.number){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.number,received:t.parsedType}),uY}let t;const r=new cY;for(const n of this._def.checks)if("int"===n.kind)QZ.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),lY(t,{code:rY.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),lY(t,{code:rY.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),lY(t,{code:rY.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==YY(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),lY(t,{code:rY.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),lY(t,{code:rY.not_finite,message:n.message}),r.dirty()):QZ.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,yY.toString(t))}gt(e,t){return this.setLimit("min",e,!1,yY.toString(t))}lte(e,t){return this.setLimit("max",e,!0,yY.toString(t))}lt(e,t){return this.setLimit("max",e,!1,yY.toString(t))}setLimit(e,t,r,n){return new XY({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:yY.toString(n)}]})}_addCheck(e){return new XY({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:yY.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:yY.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:yY.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:yY.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:yY.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:yY.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:yY.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:yY.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:yY.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&QZ.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}XY.create=e=>new XY({checks:[],typeName:BX.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...SY(e)});class QY extends jY{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(oT){return this._getInvalidInput(e)}if(this._getType(e)!==eY.bigint)return this._getInvalidInput(e);let t;const r=new cY;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),lY(t,{code:rY.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),lY(t,{code:rY.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),lY(t,{code:rY.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):QZ.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.bigint,received:t.parsedType}),uY}gte(e,t){return this.setLimit("min",e,!0,yY.toString(t))}gt(e,t){return this.setLimit("min",e,!1,yY.toString(t))}lte(e,t){return this.setLimit("max",e,!0,yY.toString(t))}lt(e,t){return this.setLimit("max",e,!1,yY.toString(t))}setLimit(e,t,r,n){return new QY({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:yY.toString(n)}]})}_addCheck(e){return new QY({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:yY.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:yY.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:yY.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:yY.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:yY.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}QY.create=e=>{var t;return new QY({checks:[],typeName:BX.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...SY(e)})};class JY extends jY{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==eY.boolean){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.boolean,received:t.parsedType}),uY}return hY(e.data)}}JY.create=e=>new JY({typeName:BX.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...SY(e)});class eX extends jY{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==eY.date){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.date,received:t.parsedType}),uY}if(isNaN(e.data.getTime())){return lY(this._getOrReturnCtx(e),{code:rY.invalid_date}),uY}const t=new cY;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),lY(r,{code:rY.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):QZ.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eX({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:yY.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:yY.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}eX.create=e=>new eX({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:BX.ZodDate,...SY(e)});class tX extends jY{_parse(e){if(this._getType(e)!==eY.symbol){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.symbol,received:t.parsedType}),uY}return hY(e.data)}}tX.create=e=>new tX({typeName:BX.ZodSymbol,...SY(e)});class rX extends jY{_parse(e){if(this._getType(e)!==eY.undefined){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.undefined,received:t.parsedType}),uY}return hY(e.data)}}rX.create=e=>new rX({typeName:BX.ZodUndefined,...SY(e)});class nX extends jY{_parse(e){if(this._getType(e)!==eY.null){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.null,received:t.parsedType}),uY}return hY(e.data)}}nX.create=e=>new nX({typeName:BX.ZodNull,...SY(e)});class iX extends jY{constructor(){super(...arguments),this._any=!0}_parse(e){return hY(e.data)}}iX.create=e=>new iX({typeName:BX.ZodAny,...SY(e)});class aX extends jY{constructor(){super(...arguments),this._unknown=!0}_parse(e){return hY(e.data)}}aX.create=e=>new aX({typeName:BX.ZodUnknown,...SY(e)});class sX extends jY{_parse(e){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.never,received:t.parsedType}),uY}}sX.create=e=>new sX({typeName:BX.ZodNever,...SY(e)});class oX extends jY{_parse(e){if(this._getType(e)!==eY.undefined){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.void,received:t.parsedType}),uY}return hY(e.data)}}oX.create=e=>new oX({typeName:BX.ZodVoid,...SY(e)});class lX extends jY{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==eY.array)return lY(t,{code:rY.invalid_type,expected:eY.array,received:t.parsedType}),uY;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(lY(t,{code:e?rY.too_big:rY.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(lY(t,{code:rY.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(lY(t,{code:rY.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new _Y(t,e,t.path,r))))).then((e=>cY.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new _Y(t,e,t.path,r))));return cY.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new lX({...this._def,minLength:{value:e,message:yY.toString(t)}})}max(e,t){return new lX({...this._def,maxLength:{value:e,message:yY.toString(t)}})}length(e,t){return new lX({...this._def,exactLength:{value:e,message:yY.toString(t)}})}nonempty(e){return this.min(1,e)}}function cX(e){if(e instanceof uX){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=NX.create(cX(n))}return new uX({...e._def,shape:()=>t})}return e instanceof lX?new lX({...e._def,type:cX(e.element)}):e instanceof NX?NX.create(cX(e.unwrap())):e instanceof TX?TX.create(cX(e.unwrap())):e instanceof gX?gX.create(e.items.map((e=>cX(e)))):e}lX.create=(e,t)=>new lX({type:e,minLength:null,maxLength:null,exactLength:null,typeName:BX.ZodArray,...SY(t)});class uX extends jY{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=QZ.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==eY.object){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.object,received:t.parsedType}),uY}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof sX&&"strip"===this._def.unknownKeys))for(const o in r.data)i.includes(o)||a.push(o);const s=[];for(const o of i){const e=n[o],t=r.data[o];s.push({key:{status:"valid",value:o},value:e._parse(new _Y(r,t,r.path,o)),alwaysSet:o in r.data})}if(this._def.catchall instanceof sX){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of a)s.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===e)a.length>0&&(lY(r,{code:rY.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const n=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new _Y(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e})).then((e=>cY.mergeObjectSync(t,e))):cY.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return yY.errToObj,new uX({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,a,s;const o=null!==(a=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==a?a:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=yY.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new uX({...this._def,unknownKeys:"strip"})}passthrough(){return new uX({...this._def,unknownKeys:"passthrough"})}extend(e){return new uX({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new uX({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:BX.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new uX({...this._def,catchall:e})}pick(e){const t={};return QZ.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new uX({...this._def,shape:()=>t})}omit(e){const t={};return QZ.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new uX({...this._def,shape:()=>t})}deepPartial(){return cX(this)}partial(e){const t={};return QZ.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new uX({...this._def,shape:()=>t})}required(e){const t={};return QZ.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof NX;)e=e._def.innerType;t[r]=e}})),new uX({...this._def,shape:()=>t})}keyof(){return kX(QZ.objectKeys(this.shape))}}uX.create=(e,t)=>new uX({shape:()=>e,unknownKeys:"strip",catchall:sX.create(),typeName:BX.ZodObject,...SY(t)}),uX.strictCreate=(e,t)=>new uX({shape:()=>e,unknownKeys:"strict",catchall:sX.create(),typeName:BX.ZodObject,...SY(t)}),uX.lazycreate=(e,t)=>new uX({shape:e,unknownKeys:"strip",catchall:sX.create(),typeName:BX.ZodObject,...SY(t)});class dX extends jY{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const r=e.map((e=>new nY(e.ctx.common.issues)));return lY(t,{code:rY.invalid_union,unionErrors:r}),uY}));{let e;const n=[];for(const a of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new nY(e)));return lY(t,{code:rY.invalid_union,unionErrors:i}),uY}}get options(){return this._def.options}}dX.create=(e,t)=>new dX({options:e,typeName:BX.ZodUnion,...SY(t)});const hX=e=>e instanceof wX?hX(e.schema):e instanceof CX?hX(e.innerType()):e instanceof _X?[e.value]:e instanceof SX?e.options:e instanceof jX?QZ.objectValues(e.enum):e instanceof PX?hX(e._def.innerType):e instanceof rX?[void 0]:e instanceof nX?[null]:e instanceof NX?[void 0,...hX(e.unwrap())]:e instanceof TX?[null,...hX(e.unwrap())]:e instanceof OX||e instanceof RX?hX(e.unwrap()):e instanceof AX?hX(e._def.innerType):[];class pX extends jY{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==eY.object)return lY(t,{code:rY.invalid_type,expected:eY.object,received:t.parsedType}),uY;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(lY(t,{code:rY.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),uY)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const i of t){const t=hX(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of t){if(n.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);n.set(r,i)}}return new pX({typeName:BX.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...SY(r)})}}function fX(e,t){const r=tY(e),n=tY(t);if(e===t)return{valid:!0,data:e};if(r===eY.object&&n===eY.object){const r=QZ.objectKeys(t),n=QZ.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const a of n){const r=fX(e[a],t[a]);if(!r.valid)return{valid:!1};i[a]=r.data}return{valid:!0,data:i}}if(r===eY.array&&n===eY.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=fX(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===eY.date&&n===eY.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class mX extends jY{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(pY(e)||pY(n))return uY;const i=fX(e.value,n.value);return i.valid?((fY(e)||fY(n))&&t.dirty(),{status:t.value,value:i.data}):(lY(r,{code:rY.invalid_intersection_types}),uY)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((e=>{let[t,r]=e;return n(t,r)})):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}mX.create=(e,t,r)=>new mX({left:e,right:t,typeName:BX.ZodIntersection,...SY(r)});class gX extends jY{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==eY.array)return lY(r,{code:rY.invalid_type,expected:eY.array,received:r.parsedType}),uY;if(r.data.length<this._def.items.length)return lY(r,{code:rY.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),uY;!this._def.rest&&r.data.length>this._def.items.length&&(lY(r,{code:rY.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new _Y(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>cY.mergeArray(t,e))):cY.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new gX({...this._def,rest:e})}}gX.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new gX({items:e,typeName:BX.ZodTuple,rest:null,...SY(t)})};class vX extends jY{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==eY.object)return lY(r,{code:rY.invalid_type,expected:eY.object,received:r.parsedType}),uY;const n=[],i=this._def.keyType,a=this._def.valueType;for(const s in r.data)n.push({key:i._parse(new _Y(r,s,r.path,s)),value:a._parse(new _Y(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?cY.mergeObjectAsync(t,n):cY.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new vX(t instanceof jY?{keyType:e,valueType:t,typeName:BX.ZodRecord,...SY(r)}:{keyType:ZY.create(),valueType:e,typeName:BX.ZodRecord,...SY(t)})}}class xX extends jY{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==eY.map)return lY(r,{code:rY.invalid_type,expected:eY.map,received:r.parsedType}),uY;const n=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(((e,t)=>{let[a,s]=e;return{key:n._parse(new _Y(r,a,r.path,[t,"key"])),value:i._parse(new _Y(r,s,r.path,[t,"value"]))}}));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of a){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return uY;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of a){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return uY;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}xX.create=(e,t,r)=>new xX({valueType:t,keyType:e,typeName:BX.ZodMap,...SY(r)});class yX extends jY{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==eY.set)return lY(r,{code:rY.invalid_type,expected:eY.set,received:r.parsedType}),uY;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(lY(r,{code:rY.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(lY(r,{code:rY.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function a(e){const r=new Set;for(const n of e){if("aborted"===n.status)return uY;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const s=[...r.data.values()].map(((e,t)=>i._parse(new _Y(r,e,r.path,t))));return r.common.async?Promise.all(s).then((e=>a(e))):a(s)}min(e,t){return new yX({...this._def,minSize:{value:e,message:yY.toString(t)}})}max(e,t){return new yX({...this._def,maxSize:{value:e,message:yY.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}yX.create=(e,t)=>new yX({valueType:e,minSize:null,maxSize:null,typeName:BX.ZodSet,...SY(t)});class bX extends jY{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==eY.function)return lY(t,{code:rY.invalid_type,expected:eY.function,received:t.parsedType}),uY;function r(e,r){return oY({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sY(),iY].filter((e=>!!e)),issueData:{code:rY.invalid_arguments,argumentsError:r}})}function n(e,r){return oY({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sY(),iY].filter((e=>!!e)),issueData:{code:rY.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof EX){const e=this;return hY((async function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];const l=new nY([]),c=await e._def.args.parseAsync(s,i).catch((e=>{throw l.addIssue(r(s,e)),l})),u=await Reflect.apply(a,this,c),d=await e._def.returns._def.type.parseAsync(u,i).catch((e=>{throw l.addIssue(n(u,e)),l}));return d}))}{const e=this;return hY((function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];const l=e._def.args.safeParse(s,i);if(!l.success)throw new nY([r(s,l.error)]);const c=Reflect.apply(a,this,l.data),u=e._def.returns.safeParse(c,i);if(!u.success)throw new nY([n(c,u.error)]);return u.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new bX({...this._def,args:gX.create(t).rest(aX.create())})}returns(e){return new bX({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new bX({args:e||gX.create([]).rest(aX.create()),returns:t||aX.create(),typeName:BX.ZodFunction,...SY(r)})}}class wX extends jY{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}wX.create=(e,t)=>new wX({getter:e,typeName:BX.ZodLazy,...SY(t)});class _X extends jY{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return lY(t,{received:t.data,code:rY.invalid_literal,expected:this._def.value}),uY}return{status:"valid",value:e.data}}get value(){return this._def.value}}function kX(e,t){return new SX({values:e,typeName:BX.ZodEnum,...SY(t)})}_X.create=(e,t)=>new _X({value:e,typeName:BX.ZodLiteral,...SY(t)});class SX extends jY{constructor(){super(...arguments),bY.set(this,void 0)}_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return lY(t,{expected:QZ.joinValues(r),received:t.parsedType,code:rY.invalid_type}),uY}if(vY(this,bY,"f")||xY(this,bY,new Set(this._def.values),"f"),!vY(this,bY,"f").has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return lY(t,{received:t.data,code:rY.invalid_enum_value,options:r}),uY}return hY(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return SX.create(e,{...this._def,...t})}exclude(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return SX.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}bY=new WeakMap,SX.create=kX;class jX extends jY{constructor(){super(...arguments),wY.set(this,void 0)}_parse(e){const t=QZ.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==eY.string&&r.parsedType!==eY.number){const e=QZ.objectValues(t);return lY(r,{expected:QZ.joinValues(e),received:r.parsedType,code:rY.invalid_type}),uY}if(vY(this,wY,"f")||xY(this,wY,new Set(QZ.getValidEnumValues(this._def.values)),"f"),!vY(this,wY,"f").has(e.data)){const e=QZ.objectValues(t);return lY(r,{received:r.data,code:rY.invalid_enum_value,options:e}),uY}return hY(e.data)}get enum(){return this._def.values}}wY=new WeakMap,jX.create=(e,t)=>new jX({values:e,typeName:BX.ZodNativeEnum,...SY(t)});class EX extends jY{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==eY.promise&&!1===t.common.async)return lY(t,{code:rY.invalid_type,expected:eY.promise,received:t.parsedType}),uY;const r=t.parsedType===eY.promise?t.data:Promise.resolve(t.data);return hY(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}EX.create=(e,t)=>new EX({type:e,typeName:BX.ZodPromise,...SY(t)});class CX extends jY{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===BX.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{lY(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return uY;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?uY:"dirty"===n.status||"dirty"===t.value?dY(n.value):n}));{if("aborted"===t.value)return uY;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?uY:"dirty"===n.status||"dirty"===t.value?dY(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?uY:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?uY:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!mY(e))return e;const a=n.transform(e.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>mY(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}QZ.assertNever(n)}}CX.create=(e,t,r)=>new CX({schema:e,typeName:BX.ZodEffects,effect:t,...SY(r)}),CX.createWithPreprocess=(e,t,r)=>new CX({schema:t,effect:{type:"preprocess",transform:e},typeName:BX.ZodEffects,...SY(r)});class NX extends jY{_parse(e){return this._getType(e)===eY.undefined?hY(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}NX.create=(e,t)=>new NX({innerType:e,typeName:BX.ZodOptional,...SY(t)});class TX extends jY{_parse(e){return this._getType(e)===eY.null?hY(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}TX.create=(e,t)=>new TX({innerType:e,typeName:BX.ZodNullable,...SY(t)});class PX extends jY{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===eY.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}PX.create=(e,t)=>new PX({innerType:e,typeName:BX.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default,...SY(t)});class AX extends jY{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return gY(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new nY(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new nY(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}AX.create=(e,t)=>new AX({innerType:e,typeName:BX.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch,...SY(t)});class MX extends jY{_parse(e){if(this._getType(e)!==eY.nan){const t=this._getOrReturnCtx(e);return lY(t,{code:rY.invalid_type,expected:eY.nan,received:t.parsedType}),uY}return{status:"valid",value:e.data}}}MX.create=e=>new MX({typeName:BX.ZodNaN,...SY(e)});const IX=Symbol("zod_brand");class OX extends jY{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class DX extends jY{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?uY:"dirty"===e.status?(t.dirty(),dY(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?uY:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new DX({in:e,out:t,typeName:BX.ZodPipeline})}}class RX extends jY{_parse(e){const t=this._def.innerType._parse(e),r=e=>(mY(e)&&(e.value=Object.freeze(e.value)),e);return gY(t)?t.then((e=>r(e))):r(t)}unwrap(){return this._def.innerType}}function LX(e,t){const r="function"===typeof e?e(t):"string"===typeof e?{message:e}:e;return"string"===typeof r?{message:r}:r}function FX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return e?iX.create().superRefine(((n,i)=>{var a,s;const o=e(n);if(o instanceof Promise)return o.then((e=>{var a,s;if(!e){const e=LX(t,n),o=null===(s=null!==(a=e.fatal)&&void 0!==a?a:r)||void 0===s||s;i.addIssue({code:"custom",...e,fatal:o})}}));if(!o){const e=LX(t,n),o=null===(s=null!==(a=e.fatal)&&void 0!==a?a:r)||void 0===s||s;i.addIssue({code:"custom",...e,fatal:o})}})):iX.create()}RX.create=(e,t)=>new RX({innerType:e,typeName:BX.ZodReadonly,...SY(t)});const $X={object:uX.lazycreate};var BX;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(BX||(BX={}));const zX=ZY.create,UX=XY.create,VX=MX.create,HX=QY.create,GX=JY.create,WX=eX.create,qX=tX.create,KX=rX.create,ZX=nX.create,YX=iX.create,XX=aX.create,QX=sX.create,JX=oX.create,eQ=lX.create,tQ=uX.create,rQ=uX.strictCreate,nQ=dX.create,iQ=pX.create,aQ=mX.create,sQ=gX.create,oQ=vX.create,lQ=xX.create,cQ=yX.create,uQ=bX.create,dQ=wX.create,hQ=_X.create,pQ=SX.create,fQ=jX.create,mQ=EX.create,gQ=CX.create,vQ=NX.create,xQ=TX.create,yQ=CX.createWithPreprocess,bQ=DX.create,wQ={string:e=>ZY.create({...e,coerce:!0}),number:e=>XY.create({...e,coerce:!0}),boolean:e=>JY.create({...e,coerce:!0}),bigint:e=>QY.create({...e,coerce:!0}),date:e=>eX.create({...e,coerce:!0})},_Q=uY;var kQ=Object.freeze({__proto__:null,defaultErrorMap:iY,setErrorMap:function(e){aY=e},getErrorMap:sY,makeIssue:oY,EMPTY_PATH:[],addIssueToContext:lY,ParseStatus:cY,INVALID:uY,DIRTY:dY,OK:hY,isAborted:pY,isDirty:fY,isValid:mY,isAsync:gY,get util(){return QZ},get objectUtil(){return JZ},ZodParsedType:eY,getParsedType:tY,ZodType:jY,datetimeRegex:GY,ZodString:ZY,ZodNumber:XY,ZodBigInt:QY,ZodBoolean:JY,ZodDate:eX,ZodSymbol:tX,ZodUndefined:rX,ZodNull:nX,ZodAny:iX,ZodUnknown:aX,ZodNever:sX,ZodVoid:oX,ZodArray:lX,ZodObject:uX,ZodUnion:dX,ZodDiscriminatedUnion:pX,ZodIntersection:mX,ZodTuple:gX,ZodRecord:vX,ZodMap:xX,ZodSet:yX,ZodFunction:bX,ZodLazy:wX,ZodLiteral:_X,ZodEnum:SX,ZodNativeEnum:jX,ZodPromise:EX,ZodEffects:CX,ZodTransformer:CX,ZodOptional:NX,ZodNullable:TX,ZodDefault:PX,ZodCatch:AX,ZodNaN:MX,BRAND:IX,ZodBranded:OX,ZodPipeline:DX,ZodReadonly:RX,custom:FX,Schema:jY,ZodSchema:jY,late:$X,get ZodFirstPartyTypeKind(){return BX},coerce:wQ,any:YX,array:eQ,bigint:HX,boolean:GX,date:WX,discriminatedUnion:iQ,effect:gQ,enum:pQ,function:uQ,instanceof:function(e){return FX((t=>t instanceof e),arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:`Input not instance of ${e.name}`})},intersection:aQ,lazy:dQ,literal:hQ,map:lQ,nan:VX,nativeEnum:fQ,never:QX,null:ZX,nullable:xQ,number:UX,object:tQ,oboolean:()=>GX().optional(),onumber:()=>UX().optional(),optional:vQ,ostring:()=>zX().optional(),pipeline:bQ,preprocess:yQ,promise:mQ,record:oQ,set:cQ,strictObject:rQ,string:zX,symbol:qX,transformer:gQ,tuple:sQ,undefined:KX,union:nQ,unknown:XX,void:JX,NEVER:_Q,ZodIssueCode:rY,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:nY});const SQ={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:01\\d|[24-689])\\d{7}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["0"]]]],BL:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","[2-9]\\d{9}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|9(?:0[25]|42))[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:2[125-9]|33|44|66|77|88)|6(?:22|33))[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:46|60\\d\\d)\\d{6}|(?:1\\d|[39])\\d{9}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["46"]],["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:19|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94\\d|7093)\\d{5}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",[6,7,8,9,10,11]],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[0135-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-467]|5[0-3]|8[0-5]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["4(?:[2-46]|5[3-5])|5|6(?:[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-5]|(?:60|86)[23]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|452|678|86","[12]|452|6788|86"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","(?:596\\d|7091)\\d{5}|(?:69|[89]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]|8(?:0[6-9]|[36])"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","38\\d{6}|[78]\\d{9,13}|(?:20|9\\d)\\d{8}",[8,10,11,12,13,14],[["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["3"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|8\\d\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","709\\d{6}|(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["(?:69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))|7092[0-3])\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-6]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|7[67]|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-359]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-4]|5[1-3]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[59]"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[0-468]))\\d{4}|(?:2742|305[3-9]|472[247-9]|505[2-57-9]|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[0135-79]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[0-247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-9]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72|8\\d{4})\\d{4}|[89]\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[47-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","7093\\d{5}|(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["(?:639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])|7093[5-7])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|[579]\\d|63)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[579]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[235-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"],0,0,0,0,0,0,["2\\d{8}",[9]]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};var jQ={}.constructor;function EQ(e){return void 0!==e&&null!==e&&e.constructor===jQ}function CQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function NQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(D_e){o=!0,i=D_e}finally{try{s||null==r.return||r.return()}finally{if(o)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return PQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PQ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AQ(e){var t,r,n,i=TQ(Array.prototype.slice.call(e),4),a=i[0],s=i[1],o=i[2],l=i[3];if("string"!==typeof a)throw new TypeError("A text for parsing must be a string.");if(t=a,s&&"string"!==typeof s){if(!EQ(s))throw new Error("Invalid second argument: ".concat(s));o?(r=s,n=o):n=s}else l?(r=o,n=l):(r=void 0,n=o),s&&(r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CQ(Object(r),!0).forEach((function(t){NQ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CQ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({defaultCountry:s},r));return{text:t,options:r,metadata:n}}var MQ="0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9",IQ="".concat("-\u2010-\u2015\u2212\u30fc\uff0d").concat("\uff0f/").concat("\uff0e.").concat(" \xa0\xad\u200b\u2060\u3000").concat("()\uff08\uff09\uff3b\uff3d\\[\\]").concat("~\u2053\u223c\uff5e");function OQ(e){return OQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OQ(e)}function DQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RQ(e){var t=BQ();return function(){var r,n=UQ(e);if(t){var i=UQ(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===OQ(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return LQ(e)}(this,r)}}function LQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FQ(e){var t="function"===typeof Map?new Map:void 0;return FQ=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return $Q(e,arguments,UQ(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),zQ(n,e)},FQ(e)}function $Q(e,t,r){return $Q=BQ()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&zQ(i,r.prototype),i},$Q.apply(null,arguments)}function BQ(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(W){return!1}}function zQ(e,t){return zQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zQ(e,t)}function UQ(e){return UQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},UQ(e)}var VQ=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zQ(e,t)}(a,e);var t,r,n,i=RQ(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),Object.setPrototypeOf(LQ(t),a.prototype),t.name=t.constructor.name,t}return t=a,r&&DQ(t.prototype,r),n&&DQ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(FQ(Error));function HQ(e,t){e=e.split("-"),t=t.split("-");for(var r=e[0].split("."),n=t[0].split("."),i=0;i<3;i++){var a=Number(r[i]),s=Number(n[i]);if(a>s)return 1;if(s>a)return-1;if(!isNaN(a)&&isNaN(s))return 1;if(isNaN(a)&&!isNaN(s))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}function GQ(e){return GQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GQ(e)}function WQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function KQ(e,t,r){return t&&qQ(e.prototype,t),r&&qQ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var ZQ=" ext. ",YQ=/^\d+$/,XQ=function(){function e(t){WQ(this,e),nJ(t),this.metadata=t,oJ.call(this,t)}return KQ(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter((function(e){return"001"!==e}))}},{key:"getCountryMetadata",value:function(e){return this.metadata.countries[e]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(e){return void 0!==this.getCountryMetadata(e)}},{key:"hasCallingCode",value:function(e){if(this.getCountryCodesForCallingCode(e))return!0;if(this.nonGeographic()){if(this.nonGeographic()[e])return!0}else{var t=this.countryCallingCodes()[e];if(t&&1===t.length&&"001"===t[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(e){return this.nonGeographic()?!!this.nonGeographic()[e]:!this.getCountryCodesForCallingCode(e)}},{key:"country",value:function(e){return this.selectNumberingPlan(e)}},{key:"selectNumberingPlan",value:function(e,t){if(e&&YQ.test(e)&&(t=e,e=null),e&&"001"!==e){if(!this.hasCountry(e))throw new Error("Unknown country: ".concat(e));this.numberingPlan=new QQ(this.getCountryMetadata(e),this)}else if(t){if(!this.hasCallingCode(t))throw new Error("Unknown calling code: ".concat(t));this.numberingPlan=new QQ(this.getNumberingPlanMetadata(t),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(e){var t=this.countryCallingCodes()[e];if(t){if(1===t.length&&3===t[0].length)return;return t}}},{key:"getCountryCodeForCallingCode",value:function(e){var t=this.getCountryCodesForCallingCode(e);if(t)return t[0]}},{key:"getNumberingPlanMetadata",value:function(e){var t=this.getCountryCodeForCallingCode(e);if(t)return this.getCountryMetadata(t);if(this.nonGeographic()){var r=this.nonGeographic()[e];if(r)return r}else{var n=this.countryCallingCodes()[e];if(n&&1===n.length&&"001"===n[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(e){return this.numberingPlan.type(e)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(e){return this.selectNumberingPlan(e)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}]),e}(),QQ=function(){function e(t,r){WQ(this,e),this.globalMetadataObject=r,this.metadata=t,oJ.call(this,r.metadata)}return KQ(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(e){return e[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var e=this,t=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return t.map((function(t){return new JQ(t,e)}))}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(e){return e[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return(!this.types()||0!==this.types().length)&&!!this.types()}},{key:"type",value:function(e){if(this.hasTypes()&&rJ(this.types(),e))return new tJ(rJ(this.types(),e),this)}},{key:"ext",value:function(){return this.v1||this.v2?ZQ:this.metadata[13]||ZQ}}]),e}(),JQ=function(){function e(t,r){WQ(this,e),this._format=t,this.metadata=r}return KQ(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!(!this.nationalPrefixFormattingRule()||eJ.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),eJ=/^\(?\$1\)?$/,tJ=function(){function e(t,r){WQ(this,e),this.type=t,this.metadata=r}return KQ(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function rJ(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}function nJ(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!EQ(e)||!EQ(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(EQ(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+iJ(e)+": "+e,"."))}var iJ=function(e){return GQ(e)};function aJ(e,t){if((t=new XQ(t)).hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function sJ(e,t){return t.countries.hasOwnProperty(e)}function oJ(e){var t=e.version;"number"===typeof t?(this.v1=1===t,this.v2=2===t,this.v3=3===t,this.v4=4===t):t?-1===HQ(t,"1.2.0")?this.v2=!0:-1===HQ(t,"1.7.35")?this.v3=!0:this.v4=!0:this.v1=!0}var lJ=function(e){return"([".concat(MQ,"]{1,").concat(e,"})")};function cJ(e){var t="[ \xa0\\t,]*",r="[:\\.\uff0e]?[ \xa0\\t,-]*",n="#?",i="[ \xa0\\t]*";return";ext="+lJ("20")+"|"+(t+"(?:e?xt(?:ensi(?:o\u0301?|\xf3))?n?|\uff45?\uff58\uff54\uff4e?|\u0434\u043e\u0431|anexo)"+r+lJ("20")+n)+"|"+(t+"(?:[x\uff58#\uff03~\uff5e]|int|\uff49\uff4e\uff54)"+r+lJ("9")+n)+"|"+("[- ]+"+lJ("6")+"#")+"|"+(i+"(?:,{2}|;)"+r+lJ("15")+n)+"|"+(i+"(?:,)+"+r+lJ("9")+n)}var uJ="["+MQ+"]{2}",dJ="[+\uff0b]{0,1}(?:["+IQ+"]*["+MQ+"]){3,}["+IQ+MQ+"]*",hJ=new RegExp("^[+\uff0b]{0,1}(?:["+IQ+"]*["+MQ+"]){1,2}$","i"),pJ=dJ+"(?:"+cJ()+")?",fJ=new RegExp("^"+uJ+"$|^"+pJ+"$","i");var mJ=new RegExp("(?:"+cJ()+")$","i");function gJ(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return vJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vJ(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xJ={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u06f0":"0","\u06f1":"1","\u06f2":"2","\u06f3":"3","\u06f4":"4","\u06f5":"5","\u06f6":"6","\u06f7":"7","\u06f8":"8","\u06f9":"9"};function yJ(e){return xJ[e]}function bJ(e){for(var t,r="",n=gJ(e.split(""));!(t=n()).done;){var i=yJ(t.value);i&&(r+=i)}return r}function wJ(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return _J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _J(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kJ(e){for(var t,r="",n=wJ(e.split(""));!(t=n()).done;){r+=SJ(t.value,r)||""}return r}function SJ(e,t,r){return"+"===e?t?void("function"===typeof r&&r("end")):"+":yJ(e)}function jJ(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return EJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EJ(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function EJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CJ(e,t){return NJ(e,void 0,t)}function NJ(e,t,r){var n=r.type(t),i=n&&n.possibleLengths()||r.possibleLengths();if(!i)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===t){if(!r.type("FIXED_LINE"))return NJ(e,"MOBILE",r);var a=r.type("MOBILE");a&&(i=function(e,t){for(var r,n=e.slice(),i=jJ(t);!(r=i()).done;){var a=r.value;e.indexOf(a)<0&&n.push(a)}return n.sort((function(e,t){return e-t}))}(i,a.possibleLengths()))}else if(t&&!n)return"INVALID_LENGTH";var s=e.length,o=i[0];return o===s?"IS_POSSIBLE":o>s?"TOO_SHORT":i[i.length-1]<s?"TOO_LONG":i.indexOf(s,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function TJ(e,t){return"IS_POSSIBLE"===CJ(e,t)}function PJ(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function AJ(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return MJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MJ(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var IJ=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function OJ(e,t,r){if(t=t||{},e.country||e.countryCallingCode){(r=new XQ(r)).selectNumberingPlan(e.country,e.countryCallingCode);var n=t.v2?e.nationalNumber:e.phone;if(PJ(n,r.nationalNumberPattern())){if(DJ(n,"FIXED_LINE",r))return r.type("MOBILE")&&""===r.type("MOBILE").pattern()?"FIXED_LINE_OR_MOBILE":r.type("MOBILE")?DJ(n,"MOBILE",r)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE";for(var i,a=AJ(IJ);!(i=a()).done;){var s=i.value;if(DJ(n,s,r))return s}}}}function DJ(e,t,r){return!(!(t=r.type(t))||!t.pattern())&&(!(t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0)&&PJ(e,t.pattern()))}function RJ(e,t,r){var n=new XQ(r).getCountryCodesForCallingCode(e);return n?n.filter((function(e){return function(e,t,r){var n=new XQ(r);if(n.selectNumberingPlan(t),n.numberingPlan.possibleLengths().indexOf(e.length)>=0)return!0;return!1}(t,e,r)})):[]}var LJ=new RegExp("(["+MQ+"])");function FJ(e,t,r,n){if(t){var i=new XQ(n);i.selectNumberingPlan(t,r);var a=new RegExp(i.IDDPrefix());if(0===e.search(a)){var s=(e=e.slice(e.match(a)[0].length)).match(LJ);if(!(s&&null!=s[1]&&s[1].length>0&&"0"===s[1]))return e}}}function $J(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var r=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),n=r.exec(e);if(n){var i,a,s,o=n.length-1,l=o>0&&n[o];if(t.nationalPrefixTransformRule()&&l)i=e.replace(r,t.nationalPrefixTransformRule()),o>1&&(a=n[1]);else{var c=n[0];i=e.slice(c.length),l&&(a=n[1])}if(l){var u=e.indexOf(n[1]);e.slice(0,u)===t.numberingPlan.nationalPrefix()&&(s=t.numberingPlan.nationalPrefix())}else s=n[0];return{nationalNumber:i,nationalPrefix:s,carrierCode:a}}}return{nationalNumber:e}}function BJ(e,t){var r=$J(e,t),n=r.carrierCode,i=r.nationalNumber;if(i!==e){if(!function(e,t,r){if(PJ(e,r.nationalNumberPattern())&&!PJ(t,r.nationalNumberPattern()))return!1;return!0}(e,i,t))return{nationalNumber:e};if(t.possibleLengths()&&!function(e,t){switch(CJ(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}(i,t))return{nationalNumber:e}}return{nationalNumber:i,carrierCode:n}}function zJ(e,t,r,n){var i=t?aJ(t,n):r;if(0===e.indexOf(i)){(n=new XQ(n)).selectNumberingPlan(t,r);var a=e.slice(i.length),s=BJ(a,n).nationalNumber,o=BJ(e,n).nationalNumber;if(!PJ(o,n.nationalNumberPattern())&&PJ(s,n.nationalNumberPattern())||"TOO_LONG"===CJ(o,n))return{countryCallingCode:i,number:a}}return{number:e}}function UJ(e,t,r,n){if(!e)return{};var i;if("+"!==e[0]){var a=FJ(e,t,r,n);if(!a||a===e){if(t||r){var s=zJ(e,t,r,n),o=s.countryCallingCode,l=s.number;if(o)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:o,number:l}}return{number:e}}i=!0,e="+"+a}if("0"===e[1])return{};n=new XQ(n);for(var c=2;c-1<=3&&c<=e.length;){var u=e.slice(1,c);if(n.hasCallingCode(u))return n.selectNumberingPlan(u),{countryCallingCodeSource:i?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:u,number:e.slice(c)};c++}return{}}function VJ(e){return e.replace(new RegExp("[".concat(IQ,"]+"),"g")," ").trim()}var HJ=/(\$\d)/;function GJ(e,t,r){var n=r.useInternationalFormat,i=r.withNationalPrefix,a=(r.carrierCode,r.metadata,e.replace(new RegExp(t.pattern()),n?t.internationalFormat():i&&t.nationalPrefixFormattingRule()?t.format().replace(HJ,t.nationalPrefixFormattingRule()):t.format()));return n?VJ(a):a}var WJ=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function qJ(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return KJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KJ(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function KJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function YJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZJ(Object(r),!0).forEach((function(t){XJ(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZJ(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function XJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var QJ={formatExtension:function(e,t,r){return"".concat(e).concat(r.ext()).concat(t)}};function JJ(e,t,r,n){if(r=r?YJ(YJ({},QJ),r):QJ,n=new XQ(n),e.country&&"001"!==e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)return e.phone||"";n.selectNumberingPlan(e.countryCallingCode)}var i,a=n.countryCallingCode(),s=r.v2?e.nationalNumber:e.phone;switch(t){case"NATIONAL":return s?t0(i=e0(s,e.carrierCode,"NATIONAL",n,r),e.ext,n,r.formatExtension):"";case"INTERNATIONAL":return s?(i=e0(s,null,"INTERNATIONAL",n,r),t0(i="+".concat(a," ").concat(i),e.ext,n,r.formatExtension)):"+".concat(a);case"E.164":return"+".concat(a).concat(s);case"RFC3966":return function(e){var t=e.number,r=e.ext;if(!t)return"";if("+"!==t[0])throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(r?";ext="+r:"")}({number:"+".concat(a).concat(s),ext:e.ext});case"IDD":if(!r.fromCountry)return;var o=function(e,t,r,n,i){var a=aJ(n,i.metadata);if(a===r){var s=e0(e,t,"NATIONAL",i);return"1"===r?r+" "+s:s}var o=function(e,t,r){var n=new XQ(r);return n.selectNumberingPlan(e,t),n.defaultIDDPrefix()?n.defaultIDDPrefix():WJ.test(n.IDDPrefix())?n.IDDPrefix():void 0}(n,void 0,i.metadata);if(o)return"".concat(o," ").concat(r," ").concat(e0(e,null,"INTERNATIONAL",i))}(s,e.carrierCode,a,r.fromCountry,n);return t0(o,e.ext,n,r.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function e0(e,t,r,n,i){var a=function(e,t){for(var r,n=qJ(e);!(r=n()).done;){var i=r.value;if(i.leadingDigitsPatterns().length>0){var a=i.leadingDigitsPatterns()[i.leadingDigitsPatterns().length-1];if(0!==t.search(a))continue}if(PJ(t,i.pattern()))return i}}(n.formats(),e);return a?GJ(e,a,{useInternationalFormat:"INTERNATIONAL"===r,withNationalPrefix:!a.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!i||!1!==i.nationalPrefix,carrierCode:t,metadata:n}):e}function t0(e,t,r,n){return t?n(e,t,r):e}function r0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?r0(Object(r),!0).forEach((function(t){i0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s0=function(){function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new TypeError("First argument is required");if("string"!==typeof t)throw new TypeError("First argument must be a string");if("string"===typeof t){if("+"===t[0]&&!r)throw new TypeError("`metadata` argument not passed");if(EQ(r)&&EQ(r.countries)){n=r;var i=t;if(!l0.test(i))throw new Error('Invalid `number` argument passed: must consist of a "+" followed by digits');var a=UJ(i,void 0,void 0,n);if(t=a.countryCallingCode,!(r=a.number))throw new Error("Invalid `number` argument passed: too short")}}if(!r)throw new TypeError("`nationalNumber` argument is required");if("string"!==typeof r)throw new TypeError("`nationalNumber` argument must be a string");nJ(n);var s=function(e,t){var r,n,i=new XQ(t);o0(e)?(r=e,i.selectNumberingPlan(r),n=i.countryCallingCode()):n=e;return{country:r,countryCallingCode:n}}(t,n),o=s.country,l=s.countryCallingCode;this.country=o,this.countryCallingCode=l,this.nationalNumber=r,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return n}}var t,r,n;return t=e,r=[{key:"setExt",value:function(e){this.ext=e}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:RJ(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return function(e,t,r){if(void 0===t&&(t={}),r=new XQ(r),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!r.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));r.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(e.countryCallingCode)}}if(r.possibleLengths())return TJ(e.phone||e.nationalNumber,r);if(e.countryCallingCode&&r.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return function(e,t,r){return t=t||{},(r=new XQ(r)).selectNumberingPlan(e.country,e.countryCallingCode),r.hasTypes()?void 0!==OJ(e,t,r.metadata):PJ(t.v2?e.nationalNumber:e.phone,r.nationalNumberPattern())}(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){return new XQ(this.getMetadata()).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(e){return this.number===e.number&&this.ext===e.ext}},{key:"getType",value:function(){return OJ(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(e,t){return JJ(this,e,t?n0(n0({},t),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(e){return this.format("NATIONAL",e)}},{key:"formatInternational",value:function(e){return this.format("INTERNATIONAL",e)}},{key:"getURI",value:function(e){return this.format("RFC3966",e)}}],r&&a0(t.prototype,r),n&&a0(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),o0=function(e){return/^[A-Z]{2}$/.test(e)};var l0=/^\+\d+$/;function c0(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return u0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u0(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d0(e,t){var r=t.countries,n=(t.defaultCountry,t.metadata);n=new XQ(n);for(var i,a=c0(r);!(i=a()).done;){var s=i.value;if(n.country(s),n.leadingDigits()){if(e&&0===e.search(n.leadingDigits()))return s}else if(OJ({phone:e,country:s},void 0,n.metadata))return s}}function h0(e,t){var r=t.nationalNumber,n=t.defaultCountry,i=t.metadata;var a=i.getCountryCodesForCallingCode(e);if(a)return 1===a.length?a[0]:d0(r,{countries:a,defaultCountry:n,metadata:i.metadata})}var p0="(["+MQ+"]|[\\-\\.\\(\\)]?)",f0=new RegExp("^\\+"+p0+"*["+MQ+"]"+p0+"*$","g"),m0=new RegExp("^("+("["+MQ+"]+((\\-)*["+MQ+"])*")+"\\.)*"+("[a-zA-Z]+((\\-)*["+MQ+"])*")+"\\.?$","g"),g0="tel:",v0=";phone-context=";function x0(e,t){var r,n=t.extractFormattedPhoneNumber,i=function(e){var t=e.indexOf(v0);if(t<0)return null;var r=t+15;if(r>=e.length)return"";var n=e.indexOf(";",r);return n>=0?e.substring(r,n):e.substring(r)}(e);if(!function(e){return null===e||0!==e.length&&(f0.test(e)||m0.test(e))}(i))throw new VQ("NOT_A_NUMBER");if(null===i)r=n(e)||"";else{r="","+"===i.charAt(0)&&(r+=i);var a,s=e.indexOf(g0);a=s>=0?s+4:0;var o=e.indexOf(v0);r+=e.substring(a,o)}var l=r.indexOf(";isub=");if(l>0&&(r=r.substring(0,l)),""!==r)return r}var y0=new RegExp("[+\uff0b"+MQ+"]"),b0=new RegExp("[^"+MQ+"#]+$");function w0(e,t,r){if(t=t||{},r=new XQ(r),t.defaultCountry&&!r.hasCountry(t.defaultCountry)){if(t.v2)throw new VQ("INVALID_COUNTRY");throw new Error("Unknown country: ".concat(t.defaultCountry))}var n=function(e,t,r){var n=x0(e,{extractFormattedPhoneNumber:function(e){return function(e,t,r){if(!e)return;if(e.length>250){if(r)throw new VQ("TOO_LONG");return}if(!1===t)return e;var n=e.search(y0);if(n<0)return;return e.slice(n).replace(b0,"")}(e,r,t)}});if(!n)return{};if(!function(e){return e.length>=2&&fJ.test(e)}(n))return function(e){return hJ.test(e)}(n)?{error:"TOO_SHORT"}:{};var i=function(e){var t=e.search(mJ);if(t<0)return{};for(var r=e.slice(0,t),n=e.match(mJ),i=1;i<n.length;){if(n[i])return{number:r,ext:n[i]};i++}}(n);if(i.ext)return i;return{number:n}}(e,t.v2,t.extract),i=n.number,a=n.ext,s=n.error;if(!i){if(t.v2){if("TOO_SHORT"===s)throw new VQ("TOO_SHORT");throw new VQ("NOT_A_NUMBER")}return{}}var o=function(e,t,r,n){var i,a=UJ(kJ(e),t,r,n.metadata),s=a.countryCallingCodeSource,o=a.countryCallingCode,l=a.number;if(o)n.selectNumberingPlan(o);else{if(!l||!t&&!r)return{};n.selectNumberingPlan(t,r),t&&(i=t),o=r||aJ(t,n.metadata)}if(!l)return{countryCallingCodeSource:s,countryCallingCode:o};var c=BJ(kJ(l),n),u=c.nationalNumber,d=c.carrierCode,h=h0(o,{nationalNumber:u,defaultCountry:t,metadata:n});h&&(i=h,"001"===h||n.country(i));return{country:i,countryCallingCode:o,countryCallingCodeSource:s,nationalNumber:u,carrierCode:d}}(i,t.defaultCountry,t.defaultCallingCode,r),l=o.country,c=o.nationalNumber,u=o.countryCallingCode,d=o.countryCallingCodeSource,h=o.carrierCode;if(!r.hasSelectedNumberingPlan()){if(t.v2)throw new VQ("INVALID_COUNTRY");return{}}if(!c||c.length<2){if(t.v2)throw new VQ("TOO_SHORT");return{}}if(c.length>17){if(t.v2)throw new VQ("TOO_LONG");return{}}if(t.v2){var p=new s0(u,c,r.metadata);return l&&(p.country=l),h&&(p.carrierCode=h),a&&(p.ext=a),p.__countryCallingCodeSource=d,p}var f=!!(t.extended?r.hasSelectedNumberingPlan():l)&&PJ(c,r.nationalNumberPattern());return t.extended?{country:l,countryCallingCode:u,carrierCode:h,valid:f,possible:!!f||!(!0!==t.extended||!r.possibleLengths()||!TJ(c,r)),phone:c,ext:a}:f?function(e,t,r){var n={country:e,phone:t};r&&(n.ext=r);return n}(l,c,a):{}}function _0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_0(Object(r),!0).forEach((function(t){S0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j0(Object(r),!0).forEach((function(t){C0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N0(e,t,r){t&&t.defaultCountry&&!sJ(t.defaultCountry,r)&&(t=E0(E0({},t),{},{defaultCountry:void 0}));try{return function(e,t,r){return w0(e,k0(k0({},t),{},{v2:!0}),r)}(e,t,r)}catch(n){if(!(n instanceof VQ))throw n}}function T0(){var e=AQ(arguments);return N0(e.text,e.options,e.metadata)}const P0={ext:"ext.",country:"Phone number country",phone:"Phone",AB:"Abkhazia",AC:"Ascension Island",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"\xc5land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barth\xe9lemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cote d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Cura\xe7ao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Federated States of Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin (French Part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",OS:"South Ossetia",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russia",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Swaziland",TA:"Tristan da Cunha",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe",ZZ:"International"};var A0=r(5173),M0=r.n(A0),I0=A0.shape({country_calling_codes:A0.object.isRequired,countries:A0.object.isRequired}),O0=A0.objectOf(A0.string),D0=r(8139);function R0(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return L0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L0(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F0(e,t){for(var r,n=0,i=R0(t.split(""));!(r=i()).done;){r.value===e&&n++}return n}function $0(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return B0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B0(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=arguments.length>2?arguments[2]:void 0;if(!e)return function(e){return{text:e}};var n=F0(t,e);return function(i){if(!i)return{text:"",template:e};for(var a,s=0,o="",l=$0(e.split(""));!(a=l()).done;){var c=a.value;if(c===t){if(o+=i[s],++s===i.length&&i.length<n)break}else o+=c}return r&&(o=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",i=e.length,a=F0("(",e)-F0(")",e);a>0&&i<t.length;)e+=t[i].replace(r,n),")"===t[i]&&a--,i++;return e}(o,e)),{text:o,template:e}}}var U0=8,V0=46;function H0(e,t){void 0!==t&&(!function(){if("undefined"!==typeof navigator)return G0.test(navigator.userAgent)}()?e.setSelectionRange(t,t):setTimeout((function(){return e.setSelectionRange(t,t)}),0))}var G0=/Android/i;function W0(e,t,r,n,i){if(!t.hasAttribute("readonly")){var a=function(e){switch(e.keyCode){case U0:return"Backspace";case V0:return"Delete"}}(e);switch(a){case"Delete":case"Backspace":e.preventDefault();var s=function(e){if(e.selectionStart!==e.selectionEnd)return{start:e.selectionStart,end:e.selectionEnd}}(t);return s?(q0(t,s),K0(t,r,n,void 0,i)):K0(t,r,n,a,i)}}}function q0(e,t){var r=e.value;r=r.slice(0,t.start)+r.slice(t.end),e.value=r,H0(e,t.start)}function K0(e,t,r,n,i){var a=function(e,t,r){for(var n={},i="",a=0,s=0;s<e.length;){var o=r(e[s],i,n);void 0!==o&&(i+=o,void 0!==t&&(t===s?a=i.length-1:t>s&&(a=i.length))),s++}return void 0===t&&(a=i.length),{value:i,caret:a}}(e.value,e.selectionStart,t),s=a.value,o=a.caret;if(n){var l=function(e,t,r){switch(r){case"Backspace":t>0&&(e=e.slice(0,t-1)+e.slice(t),t--);break;case"Delete":e=e.slice(0,t)+e.slice(t+1)}return{value:e,caret:t}}(s,o,n);s=l.value,o=l.caret}var c=function(e,t,r){"string"===typeof r&&(r=z0(r));var n=r(e)||{},i=n.text,a=n.template;if(void 0===i&&(i=e),a)if(void 0===t)t=i.length;else{for(var s=0,o=!1,l=-1;s<i.length&&s<a.length;){if(i[s]!==a[s]){if(0===t){o=!0,t=s;break}l=s,t--}s++}o||(t=l+1)}return{text:i,caret:t}}(s,o,r),u=c.text;o=c.caret,e.value=u,H0(e,o),i&&i(s)}var Z0=["ref","parse","format","value","defaultValue","controlled","onChange","onKeyDown"];function Y0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y0(Object(r),!0).forEach((function(t){Q0(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y0(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J0(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function e1(e){var r=e.ref,n=e.parse,i=e.format,a=e.value,s=e.defaultValue,o=e.controlled,l=void 0===o||o,c=e.onChange,u=e.onKeyDown,d=J0(e,Z0),h=(0,t.useRef)(),p=(0,t.useCallback)((function(e){h.current=e,r&&("function"===typeof r?r(e):r.current=e)}),[r]),f=(0,t.useCallback)((function(e){K0(h.current,n,i,void 0,c)}),[h,n,i,c]),m=(0,t.useCallback)((function(e){if(u&&u(e),!e.defaultPrevented)return W0(e,h.current,n,i,c)}),[h,n,i,c,u]),g=X0(X0({},d),{},{ref:p,onChange:f,onKeyDown:m});return X0(X0({},g),{},l?{value:i(t1(a)?"":a).text}:{defaultValue:i(t1(s)?"":s).text})}function t1(e){return void 0===e||null===e}var r1=["inputComponent","parse","format","value","defaultValue","onChange","controlled","onKeyDown","type"];function n1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a1(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function s1(e,r){var n=e.inputComponent,i=void 0===n?"input":n,a=e.parse,s=e.format,o=e.value,l=e.defaultValue,c=e.onChange,u=e.controlled,d=e.onKeyDown,h=e.type,p=e1(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n1(Object(r),!0).forEach((function(t){i1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({ref:r,parse:a,format:s,value:o,defaultValue:l,onChange:c,controlled:u,onKeyDown:d,type:void 0===h?"text":h},a1(e,r1)));return t.createElement(i,p)}(s1=t.forwardRef(s1)).propTypes={parse:A0.func.isRequired,format:A0.func.isRequired,inputComponent:A0.elementType,type:A0.string,value:A0.string,defaultValue:A0.string,onChange:A0.func,controlled:A0.bool,onKeyDown:A0.func,onCut:A0.func,onPaste:A0.func};const o1=s1;function l1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c1=function(){function e(t){var r=t.onCountryChange,n=t.onCallingCodeChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onCountryChange=r,this.onCallingCodeChange=n}var t,r,n;return t=e,r=[{key:"reset",value:function(e){var t=e.country,r=e.callingCode;this.international=!1,this.missingPlus=!1,this.IDDPrefix=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(t,r)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"update",value:function(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];this[n]=e[n]}}},{key:"initCountryAndCallingCode",value:function(e,t){this.setCountry(e),this.setCallingCode(t)}},{key:"setCountry",value:function(e){this.country=e,this.onCountryChange(e)}},{key:"setCallingCode",value:function(e){this.callingCode=e,this.onCallingCodeChange(e,this.country)}},{key:"startInternationalNumber",value:function(e,t){this.international=!0,this.initCountryAndCallingCode(e,t)}},{key:"appendDigits",value:function(e){this.digits+=e}},{key:"appendNationalSignificantNumberDigits",value:function(e){this.nationalSignificantNumber+=e}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}],r&&l1(t.prototype,r),n&&l1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u1(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return d1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d1(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h1="x",p1=new RegExp(h1);function f1(e,t){if(t<1)return"";for(var r="";t>1;)1&t&&(r+=e),t>>=1,e+=e;return r+e}function m1(e,t){return")"===e[t]&&t++,function(e){var t=[],r=0;for(;r<e.length;)"("===e[r]?t.push(r):")"===e[r]&&t.pop(),r++;var n=0,i="";t.push(e.length);for(var a=0,s=t;a<s.length;a++){var o=s[a];i+=e.slice(n,o),n=o+1}return i}(e.slice(0,t))}function g1(e,t,r){var n=r.metadata,i=r.shouldTryNationalPrefixFormattingRule,a=r.getSeparatorAfterNationalPrefix;if(new RegExp("^(?:".concat(t.pattern(),")$")).test(e.nationalSignificantNumber))return function(e,t,r){var n=r.metadata,i=r.shouldTryNationalPrefixFormattingRule,a=r.getSeparatorAfterNationalPrefix;e.nationalSignificantNumber,e.international,e.nationalPrefix,e.carrierCode;if(i(t)){var s=v1(e,t,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:a,metadata:n});if(s)return s}return v1(e,t,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:a,metadata:n})}(e,t,{metadata:n,shouldTryNationalPrefixFormattingRule:i,getSeparatorAfterNationalPrefix:a})}function v1(e,t,r){var n=r.metadata,i=r.useNationalPrefixFormattingRule,a=r.getSeparatorAfterNationalPrefix,s=GJ(e.nationalSignificantNumber,t,{carrierCode:e.carrierCode,useInternationalFormat:e.international,withNationalPrefix:i,metadata:n});if(i||(e.nationalPrefix?s=e.nationalPrefix+a(t)+s:e.complexPrefixBeforeNationalSignificantNumber&&(s=e.complexPrefixBeforeNationalSignificantNumber+" "+s)),function(e,t){return bJ(e)===t.getNationalDigits()}(s,e))return s}function x1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y1=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,r=[{key:"parse",value:function(e){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(e),1!==this.context.length)throw new Error("Non-finalized contexts left when pattern parse ended");var t=this.context[0],r=t.branches,n=t.instructions;if(r)return{op:"|",args:r.concat([k1(n)])};if(0===n.length)throw new Error("Pattern is required");return 1===n.length?n[0]:n}},{key:"startContext",value:function(e){this.context.push(e)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(e){if(!e)throw new Error("Pattern is required");var t=e.match(_1);if(t){var r=t[1],n=e.slice(0,t.index),i=e.slice(t.index+r.length);switch(r){case"(?:":n&&this.parsePattern(n),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw new Error('")" operator must be preceded by "(?:" operator');if(n&&this.parsePattern(n),0===this.getContext().instructions.length)throw new Error('No instructions found after "|" operator in an "or" group');var a=this.getContext().branches;a.push(k1(this.getContext().instructions)),this.endContext(),this.getContext().instructions.push({op:"|",args:a});break;case"|":if(!this.getContext().or)throw new Error('"|" operator can only be used inside "or" groups');if(n&&this.parsePattern(n),!this.getContext().branches){if(1!==this.context.length)throw new Error('"branches" not found in an "or" group context');this.getContext().branches=[]}this.getContext().branches.push(k1(this.getContext().instructions)),this.getContext().instructions=[];break;case"[":n&&this.parsePattern(n),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw new Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:b1(n)});break;default:throw new Error("Unknown operator: ".concat(r))}i&&this.parsePattern(i)}else{if(w1.test(e))throw new Error("Illegal characters found in a pattern: ".concat(e));this.getContext().instructions=this.getContext().instructions.concat(e.split(""))}}}],r&&x1(t.prototype,r),n&&x1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b1(e){for(var t=[],r=0;r<e.length;){if("-"===e[r]){if(0===r||r===e.length-1)throw new Error("Couldn't parse a one-of set pattern: ".concat(e));for(var n=e[r-1].charCodeAt(0)+1,i=e[r+1].charCodeAt(0)-1,a=n;a<=i;)t.push(String.fromCharCode(a)),a++}else t.push(e[r]);r++}return t}var w1=/[\(\)\[\]\?\:\|]/,_1=new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");function k1(e){return 1===e.length?e[0]:e}function S1(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return j1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j1(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C1=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matchTree=(new y1).parse(t)}var t,r,n;return t=e,r=[{key:"match",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowOverflow;if(!e)throw new Error("String is required");var r=N1(e.split(""),this.matchTree,!0);if(r&&r.match&&delete r.matchedChars,!r||!r.overflow||t)return r}}],r&&E1(t.prototype,r),n&&E1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N1(e,t,r){if("string"===typeof t){var n=e.join("");return 0===t.indexOf(n)?e.length===t.length?{match:!0,matchedChars:e}:{partialMatch:!0}:0===n.indexOf(t)?r&&e.length>t.length?{overflow:!0}:{match:!0,matchedChars:e.slice(0,t.length)}:void 0}if(Array.isArray(t)){for(var i=e.slice(),a=0;a<t.length;){var s=N1(i,t[a],r&&a===t.length-1);if(!s)return;if(s.overflow)return s;if(!s.match){if(s.partialMatch)return{partialMatch:!0};throw new Error("Unsupported match result:\n".concat(JSON.stringify(s,null,2)))}if(0===(i=i.slice(s.matchedChars.length)).length)return a===t.length-1?{match:!0,matchedChars:e}:{partialMatch:!0};a++}return r?{overflow:!0}:{match:!0,matchedChars:e.slice(0,e.length-i.length)}}switch(t.op){case"|":for(var o,l,c=S1(t.args);!(l=c()).done;){var u=N1(e,l.value,r);if(u){if(u.overflow)return u;if(u.match)return{match:!0,matchedChars:u.matchedChars};if(!u.partialMatch)throw new Error("Unsupported match result:\n".concat(JSON.stringify(u,null,2)));o=!0}}return o?{partialMatch:!0}:void 0;case"[]":for(var d,h=S1(t.args);!(d=h()).done;){var p=d.value;if(e[0]===p)return 1===e.length?{match:!0,matchedChars:e}:r?{overflow:!0}:{match:!0,matchedChars:[p]}}return;default:throw new Error("Unsupported instruction tree: ".concat(t))}}function T1(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return P1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P1(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var M1=f1("9",15),I1=/[- ]/,O1=function(){return/\[([^\[\]])*\]/g},D1=function(){return/\d(?=[^,}][^,}])/g},R1=new RegExp("["+IQ+"]*\\$1["+IQ+"]*(\\$\\d["+IQ+"]*)*$"),L1=function(){function e(t){t.state;var r=t.metadata;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=r,this.resetFormat()}var t,r,n;return t=e,r=[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(e,t){this.resetFormat(),e?(this.isNANP="1"===e.callingCode(),this.matchingFormats=e.formats(),t.nationalSignificantNumber&&this.narrowDownMatchingFormats(t)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(e,t){var r=this;if(function(e,t){return"IS_POSSIBLE"===CJ(e,t)}(t.nationalSignificantNumber,this.metadata))for(var n,i=T1(this.matchingFormats);!(n=i()).done;){var a=n.value,s=g1(t,a,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(e){return r.shouldTryNationalPrefixFormattingRule(e,{international:t.international,nationalPrefix:t.nationalPrefix})},getSeparatorAfterNationalPrefix:function(e){return r.getSeparatorAfterNationalPrefix(e)}});if(s)return this.resetFormat(),this.chosenFormat=a,this.setNationalNumberTemplate(s.replace(/\d/g,h1),t),this.populatedNationalNumberTemplate=s,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(h1),s}return this.formatNationalNumberWithNextDigits(e,t)}},{key:"formatNationalNumberWithNextDigits",value:function(e,t){var r=this.chosenFormat,n=this.chooseFormat(t);if(n)return n===r?this.formatNextNationalNumberDigits(e):this.formatNextNationalNumberDigits(t.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(e){var t=this,r=e.nationalSignificantNumber,n=e.nationalPrefix,i=e.international,a=r,s=a.length-3;s<0&&(s=0),this.matchingFormats=this.matchingFormats.filter((function(e){return t.formatSuits(e,i,n)&&t.formatMatches(e,a,s)})),this.chosenFormat&&-1===this.matchingFormats.indexOf(this.chosenFormat)&&this.resetFormat()}},{key:"formatSuits",value:function(e,t,r){return!(r&&!e.usesNationalPrefix()&&!e.nationalPrefixIsOptionalWhenFormattingInNationalFormat())&&!(!t&&!r&&e.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(e,t,r){var n=e.leadingDigitsPatterns().length;if(0===n)return!0;r=Math.min(r,n-1);var i=e.leadingDigitsPatterns()[r];if(t.length<3)try{return void 0!==new C1(i).match(t,{allowOverflow:!0})}catch(a){return console.error(a),!0}return new RegExp("^(".concat(i,")")).test(t)}},{key:"getFormatFormat",value:function(e,t){return t?e.internationalFormat():e.format()}},{key:"chooseFormat",value:function(e){for(var t,r=this,n=function(){var n=t.value;return r.chosenFormat===n?"break":R1.test(r.getFormatFormat(n,e.international))?r.createTemplateForFormat(n,e)?(r.chosenFormat=n,"break"):(r.matchingFormats=r.matchingFormats.filter((function(e){return e!==n})),"continue"):"continue"},i=T1(this.matchingFormats.slice());!(t=i()).done;){var a=n();if("break"===a)break}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(e,t){if(!(e.pattern().indexOf("|")>=0)){var r=this.getTemplateForFormat(e,t);return r?(this.setNationalNumberTemplate(r,t),!0):void 0}}},{key:"getSeparatorAfterNationalPrefix",value:function(e){return this.isNANP||e&&e.nationalPrefixFormattingRule()&&I1.test(e.nationalPrefixFormattingRule())?" ":""}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(e,t){var r=e.IDDPrefix,n=e.missingPlus;return r?t&&!1===t.spacing?r:r+" ":n?"":"+"}},{key:"getTemplate",value:function(e){if(this.template){for(var t=-1,r=0,n=e.international?this.getInternationalPrefixBeforeCountryCallingCode(e,{spacing:!1}):"";r<n.length+e.getDigitsWithoutInternationalPrefix().length;)t=this.template.indexOf(h1,t+1),r++;return m1(this.template,t+1)}}},{key:"setNationalNumberTemplate",value:function(e,t){this.nationalNumberTemplate=e,this.populatedNationalNumberTemplate=e,this.populatedNationalNumberTemplatePosition=-1,t.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(t).replace(/[\d\+]/g,h1)+f1(h1,t.callingCode.length)+" "+e:this.template=e}},{key:"getTemplateForFormat",value:function(e,t){var r=t.nationalSignificantNumber,n=t.international,i=t.nationalPrefix,a=t.complexPrefixBeforeNationalSignificantNumber,s=e.pattern();s=s.replace(O1(),"\\d").replace(D1(),"\\d");var o=M1.match(s)[0];if(!(r.length>o.length)){var l=new RegExp("^"+s+"$"),c=r.replace(/\d/g,"9");l.test(c)&&(o=c);var u,d=this.getFormatFormat(e,n);if(this.shouldTryNationalPrefixFormattingRule(e,{international:n,nationalPrefix:i})){var h=d.replace(HJ,e.nationalPrefixFormattingRule());if(bJ(e.nationalPrefixFormattingRule())===(i||"")+bJ("$1")&&(d=h,u=!0,i))for(var p=i.length;p>0;)d=d.replace(/\d/,h1),p--}var f=o.replace(new RegExp(s),d).replace(new RegExp("9","g"),h1);return u||(a?f=f1(h1,a.length)+" "+f:i&&(f=f1(h1,i.length)+this.getSeparatorAfterNationalPrefix(e)+f)),n&&(f=VJ(f)),f}}},{key:"formatNextNationalNumberDigits",value:function(e){var t=function(e,t,r){for(var n,i=u1(r.split(""));!(n=i()).done;){var a=n.value;if(e.slice(t+1).search(p1)<0)return;t=e.search(p1),e=e.replace(p1,a)}return[e,t]}(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,e);if(t)return this.populatedNationalNumberTemplate=t[0],this.populatedNationalNumberTemplatePosition=t[1],m1(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1);this.resetFormat()}},{key:"shouldTryNationalPrefixFormattingRule",value:function(e,t){var r=t.international,n=t.nationalPrefix;if(e.nationalPrefixFormattingRule()){var i=e.usesNationalPrefix();if(i&&n||!i&&!r)return!0}}}],r&&A1(t.prototype,r),n&&A1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(D_e){o=!0,i=D_e}finally{try{s||null==r.return||r.return()}finally{if(o)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $1(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var z1=new RegExp("^"+("["+IQ+MQ+"]+")+"$","i"),U1="(?:[+\uff0b]["+IQ+MQ+"]*|["+IQ+MQ+"]+)",V1=new RegExp("[^"+IQ+MQ+"]+.*$"),H1=/[^\d\[\]]/,G1=function(){function e(t){var r=t.defaultCountry,n=t.defaultCallingCode,i=t.metadata,a=t.onNationalSignificantNumberChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultCountry=r,this.defaultCallingCode=n,this.metadata=i,this.onNationalSignificantNumberChange=a}var t,r,n;return t=e,(r=[{key:"input",value:function(e,t){var r,n=function(e){var t=function(e){var t=function(e){var t,r=e.search(U1);if(!(r<0))return"+"===(e=e.slice(r))[0]&&(t=!0,e=e.slice(1)),e=e.replace(V1,""),t&&(e="+"+e),e}(e)||"";return"+"===t[0]?[t.slice(1),!0]:[t]}(e),r=F1(t,2),n=r[0],i=r[1];return z1.test(n)||(n=""),[n,i]}(e),i=F1(n,2),a=i[0],s=i[1],o=bJ(a);return s&&(t.digits||(t.startInternationalNumber(),o||(r=!0))),o&&this.inputDigits(o,t),{digits:o,justLeadingPlus:r}}},{key:"inputDigits",value:function(e,t){var r=t.digits,n=r.length<3&&r.length+e.length>=3;if(t.appendDigits(e),n&&this.extractIddPrefix(t),this.isWaitingForCountryCallingCode(t)){if(!this.extractCountryCallingCode(t))return}else t.appendNationalSignificantNumberDigits(e);t.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(t.getNationalDigits(),(function(e){return t.update(e)}))}},{key:"isWaitingForCountryCallingCode",value:function(e){var t=e.international,r=e.callingCode;return t&&!r}},{key:"extractCountryCallingCode",value:function(e){var t=UJ("+"+e.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),r=t.countryCallingCode,n=t.number;if(r)return e.setCallingCode(r),e.update({nationalSignificantNumber:n}),!0}},{key:"reset",value:function(e){if(e){this.hasSelectedNumberingPlan=!0;var t=e._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=t&&H1.test(t)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(e,t){if(this.hasSelectedNumberingPlan){var r=$J(e,this.metadata),n=r.nationalPrefix,i=r.nationalNumber,a=r.carrierCode;if(i!==e)return this.onExtractedNationalNumber(n,a,i,e,t),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(e,t,r){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(e,r);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var n=$J(e,this.metadata),i=n.nationalPrefix,a=n.nationalNumber,s=n.carrierCode;if(a!==t)return this.onExtractedNationalNumber(i,s,a,e,r),!0}}},{key:"onExtractedNationalNumber",value:function(e,t,r,n,i){var a,s,o=n.lastIndexOf(r);if(o>=0&&o===n.length-r.length){s=!0;var l=n.slice(0,o);l!==e&&(a=l)}i({nationalPrefix:e,carrierCode:t,nationalSignificantNumber:r,nationalSignificantNumberMatchesInput:s,complexPrefixBeforeNationalSignificantNumber:a}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(e){return!!this.extractAnotherNationalSignificantNumber(e.getNationalDigits(),e.nationalSignificantNumber,(function(t){return e.update(t)}))||(this.extractIddPrefix(e)||this.fixMissingPlus(e)?(this.extractCallingCodeAndNationalSignificantNumber(e),!0):void 0)}},{key:"extractIddPrefix",value:function(e){var t=e.international,r=e.IDDPrefix,n=e.digits;if(e.nationalSignificantNumber,!t&&!r){var i=FJ(n,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);return void 0!==i&&i!==n?(e.update({IDDPrefix:n.slice(0,n.length-i.length)}),this.startInternationalNumber(e,{country:void 0,callingCode:void 0}),!0):void 0}}},{key:"fixMissingPlus",value:function(e){if(!e.international){var t=zJ(e.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),r=t.countryCallingCode;if(t.number,r)return e.update({missingPlus:!0}),this.startInternationalNumber(e,{country:e.country,callingCode:r}),!0}}},{key:"startInternationalNumber",value:function(e,t){var r=t.country,n=t.callingCode;e.startInternationalNumber(r,n),e.nationalSignificantNumber&&(e.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(e){this.extractCountryCallingCode(e)&&this.extractNationalSignificantNumber(e.getNationalDigits(),(function(t){return e.update(t)}))}}])&&B1(t.prototype,r),n&&B1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function W1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(D_e){o=!0,i=D_e}finally{try{s||null==r.return||r.return()}finally{if(o)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q1(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Z1=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=new XQ(r);var n=W1(this.getCountryAndCallingCode(t),2),i=n[0],a=n[1];this.defaultCountry=i,this.defaultCallingCode=a,this.reset()}var t,r,n;return t=e,r=[{key:"getCountryAndCallingCode",value:function(e){var t,r;return e&&(EQ(e)?(t=e.defaultCountry,r=e.defaultCallingCode):t=e),t&&!this.metadata.hasCountry(t)&&(t=void 0),[t,r]}},{key:"input",value:function(e){var t=this.parser.input(e,this.state),r=t.digits;if(t.justLeadingPlus)this.formattedOutput="+";else if(r){var n;if(this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state),this.metadata.hasSelectedNumberingPlan()&&(n=this.formatter.format(r,this.state)),void 0===n&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var i=this.state.getNationalDigits();i&&(n=this.formatter.format(i,this.state))}this.formattedOutput=n?this.getFullNumber(n):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var e=this;return this.state=new c1({onCountryChange:function(t){e.country=t},onCallingCodeChange:function(t,r){e.metadata.selectNumberingPlan(r,t),e.formatter.reset(e.metadata.numberingPlan,e.state),e.parser.reset(e.metadata.numberingPlan)}}),this.formatter=new L1({state:this.state,metadata:this.metadata}),this.parser=new G1({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){e.determineTheCountryIfNeeded(),e.formatter.reset(e.metadata.numberingPlan,e.state)}}),this.state.reset({country:this.defaultCountry,callingCode:this.defaultCallingCode}),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){if(this.isInternational())return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){if(this.state.digits)return this._getCountry()}},{key:"_getCountry",value:function(){var e=this.state.country;return e}},{key:"determineTheCountryIfNeeded",value:function(){this.state.country&&!this.isCountryCallingCodeAmbiguous()||this.determineTheCountry()}},{key:"getFullNumber",value:function(e){var t=this;if(this.isInternational()){var r=function(e){return t.formatter.getInternationalPrefixBeforeCountryCallingCode(t.state,{spacing:!!e})+e},n=this.state.callingCode;return r(n?e?"".concat(n," ").concat(e):n:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return e}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var e=this.state,t=e.nationalSignificantNumber,r=e.complexPrefixBeforeNationalSignificantNumber,n=e.nationalPrefix,i=t,a=r||n;return a&&(i=a+i),i}},{key:"getNonFormattedNumber",value:function(){var e=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(e?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var e=this.getNonFormattedNumber();if(e)return e.replace(/[\+\d]/g,h1)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var e=this.state.callingCode,t=this.metadata.getCountryCodesForCallingCode(e);return t&&t.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(h0(this.isInternational()?this.state.callingCode:this.defaultCallingCode,{nationalNumber:this.state.nationalSignificantNumber,defaultCountry:this.defaultCountry,metadata:this.metadata}))}},{key:"getNumberValue",value:function(){var e=this.state,t=e.digits,r=e.callingCode,n=e.country,i=e.nationalSignificantNumber;if(t)return this.isInternational()?r?"+"+r+i:"+"+t:n||r?"+"+(n?this.metadata.countryCallingCode():r)+i:void 0}},{key:"getNumber",value:function(){var e=this.state,t=e.nationalSignificantNumber,r=e.carrierCode,n=e.callingCode,i=this._getCountry();if(t&&(i||n)){if(i&&i===this.defaultCountry){var a=new XQ(this.metadata.metadata);a.selectNumberingPlan(i);var s=a.numberingPlan.callingCode(),o=this.metadata.getCountryCodesForCallingCode(s);if(o.length>1){var l=d0(t,{countries:o,defaultCountry:this.defaultCountry,metadata:this.metadata.metadata});l&&(i=l)}}var c=new s0(i||n,t,this.metadata.metadata);return r&&(c.carrierCode=r),c}}},{key:"isPossible",value:function(){var e=this.getNumber();return!!e&&e.isPossible()}},{key:"isValid",value:function(){var e=this.getNumber();return!!e&&e.isValid()}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}],r&&K1(t.prototype,r),n&&K1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Y1(e){var t=e.inputFormat,r=e.country,n=e.metadata;return"NATIONAL_PART_OF_INTERNATIONAL"===t?"+".concat(aJ(r,n)):""}function X1(e,t){return t&&" "===(e=e.slice(t.length))[0]&&(e=e.slice(1)),e}function Q1(e,t,r){if(!r||!r.ignoreRest){return SJ(e,t,(function(e){if(r&&"end"===e)r.ignoreRest=!0}))}}function J1(e){var r=e.onKeyDown,n=e.inputFormat;return(0,t.useCallback)((function(e){e.keyCode===e2&&"INTERNATIONAL"===n&&e.target instanceof HTMLInputElement&&e.target.selectionStart===t2.length?e.preventDefault():r&&r(e)}),[r,n])}var e2=8,t2="+",r2=["onKeyDown","country","inputFormat","metadata","international","withCountryCallingCode"];function n2(){return n2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n2.apply(this,arguments)}function i2(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}const a2=function(e){function r(r,n){var i=r.onKeyDown,a=r.country,s=r.inputFormat,o=r.metadata,l=void 0===o?e:o,c=(r.international,r.withCountryCallingCode,i2(r,r2)),u=(0,t.useCallback)((function(e){var t=new Z1(a,l),r=Y1({inputFormat:s,country:a,metadata:l}),n=t.input(r+e),i=t.getTemplate();return r&&(n=X1(n,r),i&&(i=X1(i,r))),{text:n,template:i}}),[a,l]),d=J1({onKeyDown:i,inputFormat:s});return t.createElement(o1,n2({},c,{ref:n,parse:Q1,format:u,onKeyDown:d}))}return(r=t.forwardRef(r)).propTypes={value:A0.string.isRequired,onChange:A0.func.isRequired,onKeyDown:A0.func,country:A0.string,inputFormat:A0.oneOf(["INTERNATIONAL","NATIONAL_PART_OF_INTERNATIONAL","NATIONAL","INTERNATIONAL_OR_NATIONAL"]).isRequired,metadata:A0.object},r}();var s2=["value","onChange","onKeyDown","country","inputFormat","metadata","inputComponent","international","withCountryCallingCode"];function o2(){return o2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o2.apply(this,arguments)}function l2(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}const c2=function(e){function r(r,n){var i=r.value,a=r.onChange,s=r.onKeyDown,o=r.country,l=r.inputFormat,c=r.metadata,u=void 0===c?e:c,d=r.inputComponent,h=void 0===d?"input":d,p=(r.international,r.withCountryCallingCode,l2(r,s2)),f=Y1({inputFormat:l,country:o,metadata:u}),m=(0,t.useCallback)((function(e){var t=kJ(e.target.value);t===i&&(0===u2(f,t,o,u).indexOf(e.target.value)&&(t=t.slice(0,-1)));a(t)}),[f,i,a,o,u]),g=J1({onKeyDown:s,inputFormat:l});return t.createElement(h,o2({},p,{ref:n,value:u2(f,i,o,u),onChange:m,onKeyDown:g}))}return(r=t.forwardRef(r)).propTypes={value:A0.string.isRequired,onChange:A0.func.isRequired,onKeyDown:A0.func,country:A0.string,inputFormat:A0.oneOf(["INTERNATIONAL","NATIONAL_PART_OF_INTERNATIONAL","NATIONAL","INTERNATIONAL_OR_NATIONAL"]).isRequired,metadata:A0.object,inputComponent:A0.elementType},r}();function u2(e,t,r,n){return X1(function(e,t,r){return r||(r=t,t=void 0),new Z1(t,r).input(e)}(e+t,r,n),e)}function d2(e){return String.fromCodePoint(127397+e.toUpperCase().charCodeAt(0))}var h2=["value","onChange","options","disabled","readOnly"],p2=["value","options","className","iconComponent","getIconAspectRatio","arrowComponent","unicodeFlags"];function f2(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return m2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m2(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g2(){return g2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g2.apply(this,arguments)}function v2(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function x2(e){var r=e.value,n=e.onChange,i=e.options,a=e.disabled,s=e.readOnly,o=v2(e,h2),l=(0,t.useCallback)((function(e){var t=e.target.value;n("ZZ"===t?void 0:t)}),[n]);(0,t.useMemo)((function(){return _2(i,r)}),[i,r]);return t.createElement("select",g2({},o,{disabled:a||s,readOnly:s,value:r||"ZZ",onChange:l}),i.map((function(e){var r=e.value,n=e.label,i=e.divider;return t.createElement("option",{key:i?"|":r||"ZZ",value:i?"|":r||"ZZ",disabled:!!i,style:i?y2:void 0},n)})))}x2.propTypes={value:A0.string,onChange:A0.func.isRequired,options:A0.arrayOf(A0.shape({value:A0.string,label:A0.string,divider:A0.bool})).isRequired,disabled:A0.bool,readOnly:A0.bool};var y2={fontSize:"1px",backgroundColor:"currentColor",color:"inherit"};function b2(e){var r,n=e.value,i=e.options,a=e.className,s=e.iconComponent,o=(e.getIconAspectRatio,e.arrowComponent),l=void 0===o?w2:o,c=e.unicodeFlags,u=v2(e,p2),d=(0,t.useMemo)((function(){return _2(i,n)}),[i,n]);return t.createElement("div",{className:"PhoneInputCountry"},t.createElement(x2,g2({},u,{value:n,options:i,className:D0("PhoneInputCountrySelect",a)})),d&&(c&&n?t.createElement("div",{className:"PhoneInputCountryIconUnicode"},d2((r=n)[0])+d2(r[1])):t.createElement(s,{"aria-hidden":!0,country:n,label:d.label,aspectRatio:c?1:void 0})),t.createElement(l,null))}function w2(){return t.createElement("div",{className:"PhoneInputCountrySelectArrow"})}function _2(e,t){for(var r,n=f2(e);!(r=n()).done;){var i=r.value;if(!i.divider&&k2(i.value,t))return i}}function k2(e,t){return void 0===e||null===e?void 0===t||null===t:e===t}b2.propTypes={iconComponent:A0.elementType,arrowComponent:A0.elementType,unicodeFlags:A0.bool};var S2=["country","countryName","flags","flagUrl"];function j2(){return j2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j2.apply(this,arguments)}function E2(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function C2(e){var r=e.country,n=e.countryName,i=e.flags,a=e.flagUrl,s=E2(e,S2);return i&&i[r]?i[r]({title:n}):t.createElement("img",j2({},s,{alt:n,role:n?void 0:"presentation",src:a.replace("{XX}",r).replace("{xx}",r.toLowerCase())}))}C2.propTypes={country:A0.string.isRequired,countryName:A0.string.isRequired,flags:A0.objectOf(A0.elementType),flagUrl:A0.string.isRequired};var N2=["aspectRatio"],T2=["title"],P2=["title"];function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A2.apply(this,arguments)}function M2(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function I2(e){var r=e.aspectRatio,n=M2(e,N2);return 1===r?t.createElement(D2,n):t.createElement(O2,n)}function O2(e){var r=e.title,n=M2(e,T2);return t.createElement("svg",A2({},n,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 75 50"}),t.createElement("title",null,r),t.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeMiterlimit:"10"},t.createElement("path",{strokeLinecap:"round",d:"M47.2,36.1C48.1,36,49,36,50,36c7.4,0,14,1.7,18.5,4.3"}),t.createElement("path",{d:"M68.6,9.6C64.2,12.3,57.5,14,50,14c-7.4,0-14-1.7-18.5-4.3"}),t.createElement("line",{x1:"26",y1:"25",x2:"74",y2:"25"}),t.createElement("line",{x1:"50",y1:"1",x2:"50",y2:"49"}),t.createElement("path",{strokeLinecap:"round",d:"M46.3,48.7c1.2,0.2,2.5,0.3,3.7,0.3c13.3,0,24-10.7,24-24S63.3,1,50,1S26,11.7,26,25c0,2,0.3,3.9,0.7,5.8"}),t.createElement("path",{strokeLinecap:"round",d:"M46.8,48.2c1,0.6,2.1,0.8,3.2,0.8c6.6,0,12-10.7,12-24S56.6,1,50,1S38,11.7,38,25c0,1.4,0.1,2.7,0.2,4c0,0.1,0,0.2,0,0.2"})),t.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"none",fill:"currentColor",d:"M12.4,17.9c2.9-2.9,5.4-4.8,0.3-11.2S4.1,5.2,1.3,8.1C-2,11.4,1.1,23.5,13.1,35.6s24.3,15.2,27.5,11.9c2.8-2.8,7.8-6.3,1.4-11.5s-8.3-2.6-11.2,0.3c-2,2-7.2-2.2-11.7-6.7S10.4,19.9,12.4,17.9z"}))}function D2(e){var r=e.title,n=M2(e,P2);return t.createElement("svg",A2({},n,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"}),t.createElement("title",null,r),t.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeLinecap:"round"},t.createElement("path",{d:"M8.45,13A21.44,21.44,0,1,1,37.08,41.56"}),t.createElement("path",{d:"M19.36,35.47a36.9,36.9,0,0,1-2.28-13.24C17.08,10.39,21.88.85,27.8.85s10.72,9.54,10.72,21.38c0,6.48-1.44,12.28-3.71,16.21"}),t.createElement("path",{d:"M17.41,33.4A39,39,0,0,1,27.8,32.06c6.62,0,12.55,1.5,16.48,3.86"}),t.createElement("path",{d:"M44.29,8.53c-3.93,2.37-9.86,3.88-16.49,3.88S15.25,10.9,11.31,8.54"}),t.createElement("line",{x1:"27.8",y1:"0.85",x2:"27.8",y2:"34.61"}),t.createElement("line",{x1:"15.2",y1:"22.23",x2:"49.15",y2:"22.23"})),t.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"transparent",fill:"currentColor",d:"M9.42,26.64c2.22-2.22,4.15-3.59.22-8.49S3.08,17,.93,19.17c-2.49,2.48-.13,11.74,9,20.89s18.41,11.5,20.89,9c2.15-2.15,5.91-4.77,1-8.71s-6.27-2-8.49.22c-1.55,1.55-5.48-1.69-8.86-5.08S7.87,28.19,9.42,26.64Z"}))}function R2(e){(function(e){if(e.length<2)return!1;if("+"!==e[0])return!1;for(var t=1;t<e.length;){var r=e.charCodeAt(t);if(!(r>=48&&r<=57))return!1;t++}return!0})(e)||console.error("[react-phone-number-input] Expected the initial `value` to be a E.164 phone number. Got",e)}function L2(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return F2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F2(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $2(e,t){return!!sJ(e,t)||(console.error("Country not found: ".concat(e)),!1)}function B2(e,t){return e&&0===(e=e.filter((function(e){return $2(e,t)}))).length&&(e=void 0),e}function z2(e){return new XQ(e).getCountries()}I2.propTypes={title:A0.string.isRequired,aspectRatio:A0.number},O2.propTypes={title:A0.string.isRequired},D2.propTypes={title:A0.string.isRequired};var U2=["country","label","aspectRatio"];function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V2.apply(this,arguments)}function H2(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function G2(e){var r=e.flags,n=e.flagUrl,i=e.flagComponent,a=e.internationalIcon;function s(e){var s=e.country,o=e.label,l=e.aspectRatio,c=H2(e,U2),u=a===I2?l:void 0;return t.createElement("div",V2({},c,{className:D0("PhoneInputCountryIcon",{"PhoneInputCountryIcon--square":1===u,"PhoneInputCountryIcon--border":s})}),s?t.createElement(i,{country:s,countryName:o,flags:r,flagUrl:n,className:"PhoneInputCountryIconImg"}):t.createElement(a,{title:o,aspectRatio:u,className:"PhoneInputCountryIconImg"}))}return s.propTypes={country:A0.string,label:A0.string.isRequired,aspectRatio:A0.number},s}G2({flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",flagComponent:C2,internationalIcon:I2});function W2(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return q2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q2(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K2(e,t){for(var r,n=W2(e);!(r=n()).done;){var i=r.value;i&&Z2(i,t)}}function Z2(e,t){"function"===typeof e?e(t):e.current=t}function Y2(e,t){return"+"+aJ(e,t)}function X2(e,t){return T0(e||"",t)}function Q2(e,t){var r=t.prevCountry,n=t.newCountry,i=t.metadata,a=t.useNationalFormat;if(r===n)return e;if(!e)return a?"":n?Y2(n,i):"";if(n){if("+"===e[0]){if(a)return 0===e.indexOf("+"+aJ(n,i))?function(e,t,r){if(t){var n="+"+aJ(t,r);if(e.length<n.length){if(0===n.indexOf(e))return""}else if(0===e.indexOf(n))return e.slice(n.length)}for(var i=0,a=Object.keys(r.country_calling_codes);i<a.length;i++){var s=a[i];if(1===e.indexOf(s))return e.slice(1+s.length)}return""}(e,n,i):"";if(r){var s=Y2(n,i);return 0===e.indexOf(s)?e:s}var o=Y2(n,i);return 0===e.indexOf(o)?e:o}}else if("+"!==e[0])return J2(e,r,i)||"";return e}function J2(e,t,r){if(e){if("+"===e[0]){if("+"===e)return;var n=new Z1(t,r);return n.input(e),n.getNumberValue()}if(t){var i=i3(e,t,r);return"+".concat(aJ(t,r)).concat(i||"")}}}function e3(e,t,r){var n=i3(e,t,r);if(n){var i=n.length-function(e,t){return t=new XQ(t),t.selectNumberingPlan(e),t.numberingPlan.possibleLengths()[t.numberingPlan.possibleLengths().length-1]}(t,r);if(i>0)return e.slice(0,e.length-i)}return e}function t3(e,t){var r=t.country,n=t.countries,i=t.defaultCountry,a=t.latestCountrySelectedByUser,s=t.required,o=t.metadata;if("+"===e)return r;var l=function(e,t){var r=new Z1(null,t);return r.input(e),r.getCountry()}(e,o);if(l)return!n||n.indexOf(l)>=0?l:void 0;if(r)if(a3(e,r,o)){if(a&&a3(e,a,o))return a;if(i&&a3(e,i,o))return i;if(!s)return}else if(!s)return;return r}function r3(e,t,r){if(0===e.indexOf(Y2(t,r))){var n=new Z1(t,r);n.input(e);var i=n.getNumber();return i?i.formatNational().replace(/\D/g,""):""}return e.replace(/\D/g,"")}function n3(e,t,r){return String.prototype.localeCompare?e.localeCompare(t,r):e<t?-1:e>t?1:0}function i3(e,t,r){var n=new Z1(t,r);n.input(e);var i=n.getNumber();return i&&i.nationalNumber}function a3(e,t,r){for(var n=Y2(t,r),i=0;i<e.length&&i<n.length;){if(e[i]!==n[i])return!1;i++}return!0}function s3(e){var t=e.value,r=e.phoneNumber,n=e.defaultCountry,i=e.international,a=e.useNationalFormat,s=e.metadata;return(!1===i||a)&&r&&r.country?function(e){return e.formatNational().replace(/\D/g,"")}(r):!t&&i&&n?Y2(n,s):t}function o3(e){return o3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o3(e)}function l3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l3(Object(r),!0).forEach((function(t){u3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u3(e,t,r){return t=function(e){var t=function(e,t){if("object"!=o3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o3(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d3(e,t){return null===e&&(e=void 0),null===t&&(t=void 0),e===t}var h3=["name","disabled","readOnly","autoComplete","style","className","inputRef","inputComponent","numberInputProps","smartCaret","countrySelectComponent","countrySelectProps","containerComponent","containerComponentProps","defaultCountry","countries","countryOptionsOrder","labels","flags","flagComponent","flagUrl","addInternationalOption","internationalIcon","displayInitialValueAsLocalNumber","initialValueFormat","onCountryChange","limitMaxLength","countryCallingCodeEditable","focusInputOnCountrySelection","reset","metadata","international","locales"];function p3(e){return p3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p3(e)}function f3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f3(Object(r),!0).forEach((function(t){k3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g3(){return g3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g3.apply(this,arguments)}function v3(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function x3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S3(n.key),n)}}function y3(e,t,r){return t=w3(t),function(e,t){if(t&&("object"===p3(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b3()?Reflect.construct(t,r||[],w3(e).constructor):t.apply(e,r))}function b3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b3=function(){return!!e})()}function w3(e){return w3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w3(e)}function _3(e,t){return _3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_3(e,t)}function k3(e,t,r){return(t=S3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S3(e){var t=function(e,t){if("object"!=p3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p3(t)?t:t+""}var j3=function(e){function r(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),k3(n=y3(this,r,[e]),"setInputRef",(function(e){K2([n.props.inputRef,n.inputRef],e)})),k3(n,"isCountrySupportedWithError",(function(e){return $2(e,n.props.metadata)})),k3(n,"onCountryChange",(function(e){var t=n.props,r=t.international,i=t.metadata,a=t.onChange,s=t.focusInputOnCountrySelection,o=n.state,l=Q2(o.phoneDigits,{prevCountry:o.country,newCountry:e,metadata:i,useNationalFormat:!r}),c=J2(l,e,i);s&&n.inputRef.current.focus(),n.setState({country:e,latestCountrySelectedByUser:e,hasUserSelectedACountry:!0,phoneDigits:l,value:c},(function(){a(c)}))})),k3(n,"onChange",(function(e){var t=n.props,r=t.defaultCountry,i=t.onChange,a=t.addInternationalOption,s=t.international,o=t.limitMaxLength,l=t.countryCallingCodeEditable,c=t.metadata,u=n.state,d=u.countries,h=u.phoneDigits,p=u.country,f=u.latestCountrySelectedByUser,m=function(e,t){var r,n=t.prevPhoneDigits,i=t.country,a=t.defaultCountry,s=t.latestCountrySelectedByUser,o=t.countryRequired,l=t.getAnyCountry,c=t.countries,u=t.international,d=t.limitMaxLength,h=t.countryCallingCodeEditable,p=t.metadata;if(u&&!1===h&&i){var f,m=Y2(i,p);if(0!==e.indexOf(m))return e&&"+"!==e[0]?f=J2(e=m+e,i,p):e=m,{phoneDigits:e,value:f,country:i}}return!1===u&&i&&e&&"+"===e[0]&&(e=r3(e,i,p)),e&&i&&d&&(e=e3(e,i,p)),!e||"+"===e[0]||i&&!u||(e="+"+e),!e&&n&&"+"===n[0]&&(i=u?void 0:a),"+"===e&&n&&"+"===n[0]&&n.length>1&&(i=void 0),e&&(r="+"===e[0]&&("+"===e||i&&0===Y2(i,p).indexOf(e))?void 0:J2(e,i,p)),r&&(i=t3(r,{country:i,countries:c,defaultCountry:a,latestCountrySelectedByUser:s,required:!1,metadata:p}),!1===u&&i&&e&&"+"===e[0]&&(r=J2(e=r3(e,i,p),i,p))),!i&&o&&(i=a||l()),{phoneDigits:e,country:i,value:r}}(e,{prevPhoneDigits:h,country:p,countryRequired:!a,defaultCountry:r,latestCountrySelectedByUser:f,getAnyCountry:function(){return n.getFirstSupportedCountry({countries:d})},countries:d,international:s,limitMaxLength:o,countryCallingCodeEditable:l,metadata:c}),g=m.phoneDigits,v=m.country,x=m.value,y={phoneDigits:g,value:x,country:v};f&&x&&!a3(x,f,c)&&(y.latestCountrySelectedByUser=void 0),!1===l&&(x||g!==n.state.phoneDigits||(y.forceRerender={})),n.setState(y,(function(){return i(x)}))})),k3(n,"_onFocus",(function(){return n.setState({isFocused:!0})})),k3(n,"_onBlur",(function(){return n.setState({isFocused:!1})})),k3(n,"onFocus",(function(e){n._onFocus();var t=n.props.onFocus;t&&t(e)})),k3(n,"onBlur",(function(e){var t=n.props.onBlur;n._onBlur(),t&&t(e)})),k3(n,"onCountryFocus",(function(e){n._onFocus();var t=n.props.countrySelectProps;if(t){var r=t.onFocus;r&&r(e)}})),k3(n,"onCountryBlur",(function(e){n._onBlur();var t=n.props.countrySelectProps;if(t){var r=t.onBlur;r&&r(e)}})),n.inputRef=t.createRef();var i=n.props,a=i.value,s=(i.labels,i.international),o=i.addInternationalOption,l=i.displayInitialValueAsLocalNumber,c=i.initialValueFormat,u=i.metadata,d=n.props,h=d.defaultCountry,p=d.countries;h&&(n.isCountrySupportedWithError(h)||(h=void 0)),a&&R2(a),p=B2(p,u);var f=X2(a,u);n.CountryIcon=G2(n.props);var m=function(e){var t,r=e.value,n=e.phoneNumber,i=e.defaultCountry,a=e.getAnyCountry,s=e.countries,o=e.required,l=e.metadata;return n&&n.country?t=n.country:i&&(r&&!a3(r,i,l)||(t=i)),s&&s.indexOf(t)<0&&(t=void 0),!t&&o&&s&&s.length>0&&(t=a()),t}({value:a,phoneNumber:f,defaultCountry:h,required:!o,countries:p||z2(u),getAnyCountry:function(){return n.getFirstSupportedCountry({countries:p})},metadata:u});return n.state={props:n.props,country:m,countries:p,phoneDigits:s3({value:a,phoneNumber:f,defaultCountry:h,international:s,useNationalFormat:l||"national"===c,metadata:u}),value:a},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_3(e,t)}(r,e),n=r,i=[{key:"componentDidMount",value:function(){var e=this.props.onCountryChange,t=this.props.defaultCountry,r=this.state.country;e&&(t&&(this.isCountrySupportedWithError(t)||(t=void 0)),r!==t&&e(r))}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.onCountryChange,n=this.state.country;r&&n!==t.country&&r(n)}},{key:"getCountrySelectOptions",value:function(e){var t=e.countries,r=this.props,n=r.international,i=r.countryCallingCodeEditable,a=r.countryOptionsOrder,s=r.addInternationalOption,o=r.labels,l=r.locales,c=r.metadata;return this.useMemoCountrySelectOptions((function(){return function(e,t){if(!t)return e;for(var r,n=[],i=[],a=n,s=function(){var t=r.value;if("|"===t)a.push({divider:!0});else if("..."===t||"\u2026"===t)a=i;else{var n;n="\ud83c\udf10"===t?void 0:t;var s=e.indexOf(e.filter((function(e){return e.value===n}))[0]),o=e[s];e.splice(s,1),a.push(o)}},o=L2(t);!(r=o()).done;)s();return n.concat(e).concat(i)}(function(e){var t=e.countries,r=e.countryNames,n=e.addInternationalOption,i=e.compareStringsLocales,a=e.compareStrings;a||(a=n3);var s=t.map((function(e){return{value:e,label:r[e]||e}}));return s.sort((function(e,t){return a(e.label,t.label,i)})),n&&s.unshift({label:r.ZZ}),s}({countries:t||z2(c),countryNames:o,addInternationalOption:(!n||!1!==i)&&s,compareStringsLocales:l}),function(e,t){if(e&&(e=e.filter((function(e){switch(e){case"\ud83c\udf10":case"|":case"...":case"\u2026":return!0;default:return $2(e,t)}}))).length>0)return e}(a,c))}),[t,a,s,o,c])}},{key:"useMemoCountrySelectOptions",value:function(e,t){return this.countrySelectOptionsMemoDependencies&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;){if(e[r]!==t[r])return!1;r++}return!0}(t,this.countrySelectOptionsMemoDependencies)||(this.countrySelectOptionsMemo=e(),this.countrySelectOptionsMemoDependencies=t),this.countrySelectOptionsMemo}},{key:"getFirstSupportedCountry",value:function(e){var t=e.countries;return this.getCountrySelectOptions({countries:t})[0].value}},{key:"render",value:function(){var e=this.props,r=e.name,n=e.disabled,i=e.readOnly,a=e.autoComplete,s=e.style,o=e.className,l=(e.inputRef,e.inputComponent),c=e.numberInputProps,u=e.smartCaret,d=e.countrySelectComponent,h=e.countrySelectProps,p=e.containerComponent,f=e.containerComponentProps,m=(e.defaultCountry,e.countries,e.countryOptionsOrder,e.labels),g=(e.flags,e.flagComponent,e.flagUrl,e.addInternationalOption,e.internationalIcon,e.displayInitialValueAsLocalNumber,e.initialValueFormat,e.onCountryChange,e.limitMaxLength,e.countryCallingCodeEditable,e.focusInputOnCountrySelection,e.reset,e.metadata),v=e.international,x=(e.locales,v3(e,h3)),y=this.state,b=y.country,w=y.countries,_=y.phoneDigits,k=y.isFocused,S=u?a2:c2,j=this.getCountrySelectOptions({countries:w});return t.createElement(p,g3({style:s,className:D0(o,"PhoneInput",{"PhoneInput--focus":k,"PhoneInput--disabled":n,"PhoneInput--readOnly":i})},f),t.createElement(d,g3({name:r?"".concat(r,"Country"):void 0,"aria-label":m.country},h,{value:b,options:j,onChange:this.onCountryChange,onFocus:this.onCountryFocus,onBlur:this.onCountryBlur,disabled:n||h&&h.disabled,readOnly:i||h&&h.readOnly,iconComponent:this.CountryIcon})),t.createElement(S,g3({ref:this.setInputRef,type:"tel",autoComplete:a},c,x,{inputFormat:!0===v?"INTERNATIONAL":!1===v?"NATIONAL":"INTERNATIONAL_OR_NATIONAL",international:!!v||void 0,withCountryCallingCode:!!v||void 0,name:r,metadata:g,country:b,value:_||"",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,disabled:n,readOnly:i,inputComponent:l,className:D0("PhoneInputInput",c&&c.className,x.className)})))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return m3({props:e},function(e,t,r){var n=e.metadata,i=e.countries,a=e.defaultCountry,s=e.value,o=e.reset,l=e.international,c=e.displayInitialValueAsLocalNumber,u=e.initialValueFormat,d=t.defaultCountry,h=t.value,p=t.reset,f=(r.country,r.value),m=r.hasUserSelectedACountry,g=r.latestCountrySelectedByUser,v=function(e){return s3(c3(c3({},e),{},{international:l,useNationalFormat:c||"national"===u,metadata:n}))};if(o!==p)return{phoneDigits:v({value:void 0,defaultCountry:a}),value:void 0,country:a,latestCountrySelectedByUser:void 0,hasUserSelectedACountry:void 0};if(a!==d){var x=!a||$2(a,n),y=!f||l&&f===v({value:void 0,defaultCountry:d});if(!m&&x&&!s&&y)return{country:a,phoneDigits:v({value:void 0,defaultCountry:a}),value:void 0}}if(!d3(s,h)&&!d3(s,f)){var b,w,_;if(s){s&&R2(s),b=X2(s,n);var k=B2(i,n);b&&b.country?(!k||k.indexOf(b.country)>=0)&&(w=b.country):(w=t3(s,{country:void 0,countries:k,metadata:n}))||a&&0===s.indexOf(Y2(a,n))&&(w=a)}return s?g&&((w?g===w:a3(s,g,n))?w||(w=g):_={latestCountrySelectedByUser:void 0}):_={latestCountrySelectedByUser:void 0,hasUserSelectedACountry:void 0},c3(c3({},_),{},{phoneDigits:v({phoneNumber:b,value:s,defaultCountry:a}),value:s,country:s?w:a})}}(e,t.props,t))}}],i&&x3(n.prototype,i),a&&x3(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.PureComponent),E3=t.forwardRef((function(e,r){return t.createElement(j3,g3({},function(e){for(var t in e=m3({},e),C3)void 0===e[t]&&(e[t]=C3[t]);return e}(e),{inputRef:r}))}));E3.propTypes={value:A0.string,onChange:A0.func.isRequired,onFocus:A0.func,onBlur:A0.func,disabled:A0.bool,readOnly:A0.bool,autoComplete:A0.string,initialValueFormat:A0.oneOf(["national"]),displayInitialValueAsLocalNumber:A0.bool,defaultCountry:A0.string,countries:A0.arrayOf(A0.string),labels:O0,locales:A0.oneOfType([A0.string,A0.arrayOf(A0.string)]),flagUrl:A0.string,flags:A0.objectOf(A0.elementType),flagComponent:A0.elementType,addInternationalOption:A0.bool,internationalIcon:A0.elementType,countryOptionsOrder:A0.arrayOf(A0.string),style:A0.object,className:A0.string,countrySelectComponent:A0.elementType,countrySelectProps:A0.object,inputComponent:A0.elementType,numberInputProps:A0.object,containerComponent:A0.elementType,containerComponentProps:A0.object,smartCaret:A0.bool,international:A0.bool,limitMaxLength:A0.bool,countryCallingCodeEditable:A0.bool,metadata:I0,onCountryChange:A0.func,focusInputOnCountrySelection:A0.bool};var C3={autoComplete:"tel",countrySelectComponent:b2,flagComponent:C2,flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",internationalIcon:I2,inputComponent:"input",containerComponent:"div",reset:A0.any,smartCaret:!0,addInternationalOption:!0,countryCallingCodeEditable:!0,focusInputOnCountrySelection:!0};const N3=E3;var T3=["metadata","labels"];function P3(){return P3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P3.apply(this,arguments)}function A3(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function M3(e){var r=t.forwardRef((function(r,n){var i=r.metadata,a=void 0===i?e:i,s=r.labels,o=void 0===s?P0:s,l=A3(r,T3);return t.createElement(N3,P3({},l,{ref:n,metadata:a,labels:o}))}));return r.propTypes={metadata:I0,labels:O0},r}M3();function I3(e,t){var r=Array.prototype.slice.call(t);return r.push(SQ),e.apply(this,r)}const O3=M3(SQ);function D3(){return I3(T0,arguments)}const R3=t.forwardRef(((e,r)=>{let{className:n,value:i,onChange:a,...s}=e;const[o,l]=t.useState(i),[c,u]=t.useState(null);t.useEffect((()=>{l(i)}),[i]);const d=t.useCallback((e=>{if(!e)return!1;const t=D3(e||""),r=null!==t&&void 0!==t&&t.countryCallingCode?`+${t.countryCallingCode}`:"",n=(null===t||void 0===t?void 0:t.nationalNumber)||"",i=j_[r];return!!i&&i(n)}),[]);return(0,V.jsx)("div",{className:x_("flex gap-[8px] h-12 w-full items-center rounded-[8px] border px-3 py-2 text-sm",!1===c?"border-red text-red":"border-gray1 text-black",n),children:(0,V.jsx)(O3,{ref:r,className:x_("border-none h-full focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 focus-within:outline-none w-full text-base"),international:!0,defaultCountry:"NO",value:o,onChange:e=>{l(e);const t=d(e);u(t),a&&a(e)},countries:["NO"],autoComplete:"off",...s})})}));R3.displayName="InputMobile";const L3=kQ.object({photo:kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()]),company_name:kQ.string().min(1,{message:"Firmanavn m\xe5 best\xe5 av minst 2 tegn."}),Orgnr:kQ.number().min(1,{message:"Orgnr m\xe5 best\xe5 av minst 1 tegn."}),Nettside:kQ.string().min(1,{message:"Nettside m\xe5 best\xe5 av minst 1 tegn."}).regex(/^(https?:\/\/)?(www\.)?[a-zA-Z0-9-]+\.[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?(\/.*)?$/,{message:"Vennligst skriv inn en gyldig URL."}),Adresse:kQ.string().min(6,{message:"Adresse m\xe5 best\xe5 av minst 6 tegn."}),Telefon:kQ.string().refine((e=>{const t=D3(e),r=null!==t&&void 0!==t&&t.countryCallingCode?`+${t.countryCallingCode}`:"",n=(null===t||void 0===t?void 0:t.nationalNumber)||"";if("+47"!==r)return!1;const i=j_[r];return!!i&&i(n)}),{message:"Vennligst skriv inn et gyldig telefonnummer for det valgte landet."}),EPost:kQ.string().email({message:"Vennligst skriv inn en gyldig e-postadresse."}).min(1,{message:"E-posten m\xe5 v\xe6re p\xe5 minst 2 tegn."}),Kontaktperson:kQ.string().min(1,{message:"Kontaktperson m\xe5 best\xe5 av minst 2 tegn."}),KontaktpersonEPost:kQ.string().email({message:"Vennligst skriv inn en gyldig Kontaktperson e-postadresse."}).min(1,{message:"Kontaktperson e-posten m\xe5 v\xe6re p\xe5 minst 2 tegn."}),KontaktpersonMobil:kQ.string().refine((e=>{const t=D3(e),r=null!==t&&void 0!==t&&t.countryCallingCode?`+${t.countryCallingCode}`:"",n=(null===t||void 0===t?void 0:t.nationalNumber)||"";if("+47"!==r)return!1;const i=j_[r];return!!i&&i(n)}),{message:"Vennligst skriv inn et gyldig telefonnummer for det valgte landet."}),type_partner:kQ.string().min(1,{message:"Type partner m\xe5 spesifiseres."}),cpo:kQ.string().min(1,{message:"CPO must m\xe5 spesifiseres."}),cpl:kQ.string().min(1,{message:"CPL must m\xe5 spesifiseres."})}),F3=()=>{const e=AG({resolver:FG(L3)}),r=t.useRef(null),n=Gr().pathname.split("/"),i=n.length>2?n[2]:null,a=Kr(),[s,o]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&o(e)})()}),[]),(0,t.useEffect)((()=>{if(!i)return;(async()=>{const t=await w_(i);t&&Object.entries(t).forEach((t=>{let[r,n]=t;void 0!==n&&null!==n&&e.setValue(r,n)}))})()}),[e,i]);const l=async(t,r)=>{if(!t)return;if(t.size>2097152)return void He.error("Image size must be less than 2MB.",{position:"top-right"});const n=`${Date.now()}_${t.name}`,i=h_(v_,`images/${n}`);try{const n=await c_(i,t),a=await d_(n.ref);e.setValue(r,a),e.clearErrors(r)}catch(a){console.error(`Error uploading file for ${r}:`,a)}},c=async e=>{const t=e.target.files;t&&t[0]&&await l(t[0],"photo")},u=()=>{var e;null===(e=r.current)||void 0===e||e.click()},d=async e=>{e.preventDefault();const t=e.dataTransfer.files;t&&t[0]&&await l(t[0],"photo")},h=e=>{e.preventDefault()},p=e.watch("photo");return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...e,children:(0,V.jsxs)("form",{onSubmit:e.handleSubmit((async e=>{try{e.Nettside&&!/^https?:\/\//i.test(e.Nettside)&&(e.Nettside=`https://${e.Nettside}`);const t=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"}),r=i||yW(),n=cm(g_,"suppliers",r);i?(await mg(n,{...e,id:r,updatedAt:t.format(new Date)}),He.success("Lagret",{position:"top-right"})):(await fg(n,{...e,id:r,updatedAt:t.format(new Date),createdAt:t.format(new Date),Produkter:0,createDataBy:{email:null===s||void 0===s?void 0:s.email,photo:null===s||void 0===s?void 0:s.photo,name:null!==s&&void 0!==s&&s.f_name?`${null===s||void 0===s?void 0:s.f_name} ${null===s||void 0===s?void 0:s.l_name}`:null===s||void 0===s?void 0:s.name}}),He.success("Added successfully",{position:"top-right"})),a("/Leverandorer")}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("div",{className:"p-4 md:p-5 laptop:p-6",children:(0,V.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"md:col-span-2 flex flex-col md:flex-row gap-4 md:gap-6 md:items-center",children:[(0,V.jsx)("div",{className:"w-full md:w-1/2",children:(0,V.jsx)(nW,{control:e.control,name:"photo",render:()=>(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-2 md:gap-3 cursor-pointer",onDragOver:h,onClick:u,onDrop:d,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:"SVG, PNG, JPG or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:r,className:"hidden",accept:".svg, .png, .jpg, .jpeg, .gif",onChange:c,name:"photo"})]})})}),(0,V.jsx)(cW,{})]})})}),(0,V.jsx)("div",{className:"w-full md:w-1/2",children:"string"===typeof p&&(0,V.jsx)("img",{src:p,alt:"logo",height:"140px",width:"140px"})})]}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"company_name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Selskapsnavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Selskapsnavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"Orgnr",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Orgnr:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Orgnr",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"Nettside",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Nettside"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Nettside",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"Adresse",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Adresse"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Adresse",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"Telefon",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Telefon"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(R3,{placeholder:"Skriv inn Telefon",...t,className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"tel"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"EPost",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"E-post"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn E-post",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"Kontaktperson",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Kontaktperson"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Kontaktperson",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"KontaktpersonEPost",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Kontaktperson e-post"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Kontaktperson e-post",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"KontaktpersonMobil",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Kontaktperson mobil"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(R3,{placeholder:"Skriv inn Kontaktperson mobil",...t,className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"tel"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"type_partner",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Type partner"}),(0,V.jsx)(lW,{children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Enter Type partner"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsxs)(GZ,{children:[(0,V.jsx)(XZ,{value:"Hytteprodusent",children:"Hytteprodusent"}),(0,V.jsx)(XZ,{value:"Boligprodusent",children:"Boligprodusent"}),(0,V.jsx)(XZ,{value:"Hytte og boligprodusent",children:"Hytte og boligprodusent"}),(0,V.jsx)(XZ,{value:"Bank",children:"Bank"})]})})]})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"cpo",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"CPO (Cost per Order)"}),(0,V.jsx)(lW,{children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Enter CPO (Cost per Order)"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsxs)(GZ,{children:[(0,V.jsx)(XZ,{value:"0 NOK",children:"0 NOK"}),(0,V.jsx)(XZ,{value:"14.900 NOK",children:"14.900 NOK"}),(0,V.jsx)(XZ,{value:"19.900 NOK",children:"19.900 NOK"}),(0,V.jsx)(XZ,{value:"24.900 NOK",children:"24.900 NOK"}),(0,V.jsx)(XZ,{value:"29.900 NOK",children:"29.900 NOK"})]})})]})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"cpl",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Cost per Lead"}),(0,V.jsx)(lW,{children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Enter Cost per Lead"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsxs)(GZ,{children:[(0,V.jsx)(XZ,{value:"0 NOK",children:"0 NOK"}),(0,V.jsx)(XZ,{value:"249 NOK",children:"249 NOK"}),(0,V.jsx)(XZ,{value:"499 NOK",children:"499 NOK"}),(0,V.jsx)(XZ,{value:"749 NOK",children:"749 NOK"}),(0,V.jsx)(XZ,{value:"999 NOK",children:"999 NOK"}),(0,V.jsx)(XZ,{value:"1249 NOK",children:"1249 NOK"}),(0,V.jsx)(XZ,{value:"1490 NOK",children:"1490 NOK"})]})})]})}),(0,V.jsx)(cW,{})]})}})})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4",children:[(0,V.jsx)("div",{onClick:()=>e.reset(),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})})})},$3=()=>(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3",children:[(0,V.jsx)(ti,{to:"/Leverandorer",className:"text-gray text-xs md:text-sm font-medium",children:"Leverand\xf8rer"}),(0,V.jsx)(KV,{className:"text-gray2 w-4 h-4"}),(0,V.jsx)("span",{className:"text-primary text-xs md:text-sm font-medium",children:"Legg til nye leverand\xf8rer"})]}),(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Legg til leverand\xf8r"}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-4 md:gap-6 lg:gap-8",children:[(0,V.jsxs)("div",{className:"w-max",children:[(0,V.jsx)("h5",{className:"text-black text-sm font-medium",children:"Partnerdetaljer"}),(0,V.jsx)("p",{className:"text-gray text-sm whitespace-nowrap",children:"Legg til bilder og persondetaljer"})]}),(0,V.jsx)("div",{className:"w-full shadow-shadow2 rounded-lg overflow-hidden relative",children:(0,V.jsx)(F3,{})})]})]})}),B3=e=>{let{tabs:t,setActiveTab:r,activeTab:n}=e;return(0,V.jsx)("div",{className:"flex gap-2 md:gap-4",children:t.map(((e,t)=>(0,V.jsx)("button",{className:`text-sm md:text-base border-b-[3px] text-darkBlack py-2 md:py-3 px-3 md:px-5 ${n===t?"border-primary font-semibold bg-lightPurple rounded-t-[12px]":"border-transparent"} ${r?"cursor-pointer":"cursor-auto"}`,onClick:()=>r?r(t):void 0,children:e.label},t)))})};const z3=r.p+"static/media/Ic_download_primary.61971a5f2140e0283ac19ce7e3fe513b.svg";const U3=r.p+"static/media/Ic_close.92ec46151263d65efaf8b92ffe2ac500.svg",V3=F_("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),H3=e=>{let{file:r}=e;const[n,i]=(0,t.useState)({fileName:"",fileSize:""});return(0,t.useEffect)((()=>{(async()=>{const e=await(async e=>{try{const r=p_(),n=h_(r,decodeURIComponent(e).split("/o/")[1].split("?")[0].replace(/%2F/g,"/")),i=await u_(n),a=i.size?(t=i.size)<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(2)} KB`:t<1073741824?`${(t/1048576).toFixed(2)} MB`:`${(t/1073741824).toFixed(2)} GB`:"Unknown size";return{fileName:i.name,fileSize:a}}catch(r){return console.error("Error fetching file info:",r),{fileName:"Unknown",fileSize:"Unknown size"}}var t})(r);i(e)})()}),[r]),(0,V.jsxs)("div",{className:"truncate",children:[(0,V.jsx)("h5",{className:"text-darkBlack text-sm font-medium mb-1 truncate",children:n.fileName||"Loading..."}),(0,V.jsx)("p",{className:"text-gray text-xs",children:n.fileSize||"Fetching size..."})]})},G3=e=>{let{husmodellData:r,loading:n}=e;const[i,a]=(0,t.useState)(!1),s=(null===r||void 0===r?void 0:r.photo3D)||[],o=s.slice(0,6),l=s.length-6;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6 md:h-[333px] mb-6 md:mb-9 desktop:mb-[74px]",children:[n?(0,V.jsx)("div",{className:"w-full md:w-2/3 h-full rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"w-full md:w-2/3 h-full",children:[(0,V.jsx)("h4",{className:"mb-2 md:mb-4 text-darkBlack text-sm md:text-base desktop:text-lg font-semibold",children:"Illustrasjoner"}),(0,V.jsx)("div",{className:"h-[calc(100%-40px)]",children:(0,V.jsx)("div",{className:"grid grid-cols-3 gap-2 md:gap-6 h-full",children:o.map(((e,t)=>(0,V.jsxs)("div",{className:"relative overflow-hidden h-full w-full",children:[(0,V.jsx)("img",{src:e,alt:"product",className:"w-full h-full object-cover rounded-lg"}),5===t&&l>0&&(0,V.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-35 flex items-center justify-center text-white text-base font-bold cursor-pointer rounded-lg",onClick:()=>a(!0),children:["+",l]})]},t)))})})]}),n?(0,V.jsx)("div",{className:"w-full md:w-1/3 h-full rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"w-full md:w-1/3 border border-gray2 shadow-shadow2 rounded-lg h-full",children:[(0,V.jsx)("div",{className:"px-3 md:px-4 py-3 md:py-5 border-b border-gray2 text-darkBlack text-sm md:text-base font-semibold",children:"Dokumenter"}),(0,V.jsx)("div",{className:"p-3 md:p-4 flex flex-col gap-4 overflow-y-auto h-[calc(100%-65px)] overFlowAutoY",children:null!==r&&void 0!==r&&r.documents&&(null===r||void 0===r?void 0:r.documents.length)>0?null===r||void 0===r?void 0:r.documents.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between",children:[(0,V.jsxs)("div",{className:"flex items-start gap-3 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)(V3,{className:"text-primary w-4 h-4"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsx)("img",{src:z3,alt:"download",className:"cursor-pointer",onClick:()=>(async e=>{try{if(!e)return void console.error("File path is missing!");const t=h_(p_(),e),r=await d_(t),n=document.createElement("a");n.href=r,n.target="_blank",n.rel="noopener noreferrer",n.download=e.split("/").pop()||"download",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(t){console.error("Error downloading file:",t)}})(e)})]},t))):(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("p",{children:"Ingen dokument funnet."})})})]})]}),(0,V.jsxs)("div",{className:"w-full flex flex-col md:flex-row gap-6 lg:gap-[60px] mt-8",children:[(0,V.jsxs)("div",{className:"w-full md:w-[43%]",children:[n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer mb-6",style:{borderRadius:"8px"}}):(0,V.jsx)("h4",{className:"text-darkBlack mb-4 md:mb-6 font-semibold text-lg md:text-xl desktop:text-2xl",children:null===r||void 0===r?void 0:r.husmodell_name}),(0,V.jsx)("div",{className:"relative",children:n?(0,V.jsx)("div",{className:"w-full h-[262px] rounded-md custom-shimme",style:{borderRadius:"8px"}}):(0,V.jsx)("img",{src:null===r||void 0===r?void 0:r.photo,alt:"product-1",className:"w-full h-[262px] object-cover rounded-[12px] overflow-hidden"})}),(0,V.jsxs)("div",{className:"my-4 md:my-5 flex items-center justify-between gap-1",children:[(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsx)("p",{className:"text-gray text-sm md:text-base",children:"Pris fra"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("h4",{className:"text-base md:text-lg desktop:text-xl font-semibold text-darkBlack",children:(null===r||void 0===r?void 0:r.pris)&&S_(null===r||void 0===r?void 0:r.pris)})]}),(0,V.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:[(0,V.jsx)("span",{className:"text-darkBlack font-semibold",children:null===r||void 0===r?void 0:r.BRATotal})," ","m",(0,V.jsx)("sup",{children:"2"})]}),(0,V.jsx)("div",{className:"h-[12px] w-[1px] border-l border-gray"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:[(0,V.jsx)("span",{className:"text-darkBlack font-semibold",children:null===r||void 0===r?void 0:r.Soverom})," ","soverom"]}),(0,V.jsx)("div",{className:"h-[12px] w-[1px] border-l border-gray"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:[(0,V.jsx)("span",{className:"text-darkBlack font-semibold",children:null===r||void 0===r?void 0:r.Bad})," ","bad"]})]})]}),(0,V.jsxs)("div",{className:"w-full flex flex-col sm:flex-row gap-4 md:flex-col lg:flex-row lg:gap-8 mb-8 md:mb-[60px]",children:[(0,V.jsx)("div",{className:"w-full lg:w-1/2 border-t-2 border-b-0 border-l-0 border-r-0 border-purple pt-3 md:pt-4",children:(0,V.jsx)("table",{className:"table-auto border-0 w-full text-left property_detail_tbl",children:(0,V.jsxs)("tbody",{children:[(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"BRA total (bruksareal)"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:[null===r||void 0===r?void 0:r.BRATotal," m",(0,V.jsx)("sup",{children:"2"})]})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"BRA bolig"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:[null===r||void 0===r?void 0:r.BebygdAreal," m",(0,V.jsx)("sup",{children:"2"})]})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"GUA (Gulvareal):"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:[null===r||void 0===r?void 0:r.PRom," m",(0,V.jsx)("sup",{children:"2"})]})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"Bebygd areal (BYA)"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:[null===r||void 0===r?void 0:r.BebygdAreal," m",(0,V.jsx)("sup",{children:"2"})]})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"Lengde"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:null===r||void 0===r?void 0:r.Lengde})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"Bredde"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:null===r||void 0===r?void 0:r.Bredde})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"Soverom"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:null===r||void 0===r?void 0:r.Soverom})]})]})})}),(0,V.jsx)("div",{className:"w-full lg:w-1/2 border-t-2 border-b-0 border-l-0 border-r-0 border-purple pt-3 md:pt-4",children:(0,V.jsx)("table",{className:"table-auto border-0 w-full text-left property_detail_tbl",children:(0,V.jsxs)("tbody",{children:[(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"Bad"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:null===r||void 0===r?void 0:r.Bad})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"Innvendig bod"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:null===r||void 0===r?void 0:r.InnvendigBod})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"Energimerking"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:null===r||void 0===r?void 0:r.Energimerking})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"Tilgjengelig bolig"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:null===r||void 0===r?void 0:r.TilgjengeligBolig})]}),(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-gray text-sm whitespace-nowrap",children:"Tomtetype"}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("td",{className:"text-left pb-3 md:pb-4 text-darkBlack text-sm font-semibold whitespace-nowrap",children:Array.isArray(null===r||void 0===r?void 0:r.Tomtetype)?r.Tomtetype.join(", "):null===r||void 0===r?void 0:r.Tomtetype})]})]})})})]}),(0,V.jsx)("h2",{className:"mb-6 text-darkBlack text-lg md:text-xl desktop:text-2xl font-semibold",children:"Plantegninger og fasader"}),n?(0,V.jsx)("div",{className:"w-full h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("img",{src:null===r||void 0===r?void 0:r.PlantegningerFasader[0],alt:"map",className:"w-full"})]}),(0,V.jsxs)("div",{className:"w-full md:w-[57%]",children:[n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer mb-4",style:{borderRadius:"8px"}}):(0,V.jsx)("h2",{className:"text-darkBlack text-lg md:text-xl desktop:text-2xl font-semibold mb-2 md:mb-4 truncate",children:null===r||void 0===r?void 0:r.Hustittel}),(0,V.jsx)("div",{className:"flex flex-col gap-4 mb-8 md:mb-[60px]",children:n?(0,V.jsx)("div",{className:"w-full h-[100px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("p",{className:"text-sm md:text-base text-gray h-full focus-within:outline-none resize-none",children:null===r||void 0===r?void 0:r.OmHusmodellen})}),n?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer mb-4",style:{borderRadius:"8px"}}):(0,V.jsx)("h2",{className:"text-darkBlack text-lg md:text-xl desktop:text-2xl font-semibold mb-4",children:null===r||void 0===r?void 0:r.TittelVideo}),(null===r||void 0===r?void 0:r.VideoLink)&&(0,V.jsx)("div",{style:{width:"100%",height:"400px"},children:n?(0,V.jsx)("div",{className:"w-full h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("iframe",{width:"100%",height:"100%",src:(e=>{var t;const r=null===(t=e.split("v=")[1])||void 0===t?void 0:t.split("&")[0];return r?`https://www.youtube.com/embed/${r}?rel=0&modestbranding=1&controls=0&disablekb=1&fs=0`:""})(null===r||void 0===r?void 0:r.VideoLink),frameBorder:"0",allowFullScreen:!0,title:null===r||void 0===r?void 0:r.TittelVideo,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin"})})]})]}),i&&(0,V.jsx)(sA,{isOpen:!0,onClose:()=>{a(!i)},children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-4xl w-full relative h-[90vh] overflow-y-auto",children:[(0,V.jsx)("button",{className:"absolute top-3 right-3",onClick:()=>a(!1),children:(0,V.jsx)("img",{src:U3,alt:"close"})}),(0,V.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 my-4",children:s.map(((e,t)=>(0,V.jsx)("img",{src:e,alt:"product",className:"w-full h-[150px] md:h-[200px]"},t)))})]})})]})};const W3=r.p+"static/media/Ic_info_circle.f235c5d49af556aa298afcd66ae739cd.svg",q3=e=>{var t,r,n;let{husmodellData:i}=e;const a=null===i||void 0===i?void 0:i.Byggekostnader,s=(a?a.reduce(((e,t)=>{var r;const n=null===(r=t.pris)||void 0===r?void 0:r.replace(/\s/g,"").replace(/\./g,"").replace(",",".");return e+(n?parseFloat(n):0)}),0):0).toLocaleString("nb-NO"),o=null===i||void 0===i?void 0:i.Tomtekost,l=(o?o.reduce(((e,t)=>{var r;const n=null===(r=t.pris)||void 0===r?void 0:r.replace(/\s/g,"").replace(/\./g,"").replace(",",".");return e+(n?parseFloat(n):0)}),0):0).toLocaleString("nb-NO");return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6",children:[(0,V.jsxs)("div",{className:"w-full lg:w-1/2 p-3 md:p-4 border border-gray2 rounded-lg h-max",style:{boxShadow:"0px 4px 6px -2px #10182808, 0px 12px 16px -4px #10182814"},children:[(0,V.jsx)("div",{className:"text-center p-3 md:p-4 text-black font-medium text-base desktop:text-lg bg-lightPurple mb-3 md:mb-5",children:"Byggekostnader"}),(null===i||void 0===i||null===(t=i.Byggekostnader)||void 0===t?void 0:t.length)>0&&(0,V.jsxs)("div",{className:"flex flex-col gap-3 md:gap-5",children:[null===i||void 0===i||null===(r=i.Byggekostnader)||void 0===r?void 0:r.sort(((e,t)=>{var r,n;const i=parseInt(null===(r=String(null===e||void 0===e?void 0:e.pris))||void 0===r?void 0:r.replace(/\D/g,""))||0,a=parseInt(null===(n=String(null===t||void 0===t?void 0:t.pris))||void 0===n?void 0:n.replace(/\D/g,""))||0,s=!(null===e||void 0===e||!e.pris),o=!(null===t||void 0===t||!t.pris);return s&&!o?-1:!s&&o?1:a-i})).map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)("img",{src:W3,alt:"icon"}),(0,V.jsx)("p",{className:"text-gray text-sm font-medium",children:null===e||void 0===e?void 0:e.Headline})]}),(0,V.jsx)("h4",{className:"text-black font-medium text-base",children:null!==e&&void 0!==e&&e.pris?`kr ${e.pris}`:"inkl. i tilbud"})]},t))),(0,V.jsx)("div",{className:"border-t border-gray2"}),(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)("img",{src:W3,alt:"icon"}),(0,V.jsx)("p",{className:"text-gray text-base md:text-lg font-bold",children:"Sum byggkostnader"})]}),(0,V.jsxs)("h4",{className:"text-black font-bold text-sm md:text-base",children:["kr ",s]})]})]})]}),(0,V.jsxs)("div",{className:"w-full lg:w-1/2 p-3 md:p-4 border border-gray2 rounded-lg h-max",style:{boxShadow:"0px 4px 6px -2px #10182808, 0px 12px 16px -4px #10182814"},children:[(0,V.jsx)("div",{className:"text-center p-3 md:p-4 text-black font-medium text-base desktop:text-lg bg-lightPurple mb-3 md:mb-5",children:"Tomkostnader"}),(0,V.jsxs)("div",{className:"flex flex-col gap-3 md:gap-5",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)("img",{src:W3,alt:"icon"}),(0,V.jsx)("p",{className:"text-gray text-sm font-medium",children:"Tomtekj\xf8p"})]}),(0,V.jsx)("input",{type:"text",className:"focus-within:outline-none placeholder:text-gray rounded-[8px] shadow-shadow1 border border-gray1 py-[10px] px-[14px] w-[140px]",placeholder:"Enter"})]}),(null===i||void 0===i?void 0:i.Tomtekost.length)>0&&(null===i||void 0===i||null===(n=i.Tomtekost)||void 0===n?void 0:n.sort(((e,t)=>{var r,n;const i=parseInt(null===(r=String(null===e||void 0===e?void 0:e.pris))||void 0===r?void 0:r.replace(/\D/g,""))||0,a=parseInt(null===(n=String(null===t||void 0===t?void 0:t.pris))||void 0===n?void 0:n.replace(/\D/g,""))||0,s=!(null===e||void 0===e||!e.pris),o=!(null===t||void 0===t||!t.pris);return s&&!o?-1:!s&&o?1:a-i})).map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)("img",{src:W3,alt:"icon"}),(0,V.jsx)("p",{className:"text-gray text-sm font-medium",children:null===e||void 0===e?void 0:e.Headline})]}),(0,V.jsxs)("h4",{className:"text-black font-medium text-base",children:["kr ",null!==e&&void 0!==e&&e.pris?`${e.pris}`:"inkl. i tilbud"]})]},t)))),(0,V.jsx)("div",{className:"border-t border-gray2"}),(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)("img",{src:W3,alt:"icon"}),(0,V.jsx)("p",{className:"text-gray text-base md:text-lg font-bold",children:"Sum tomtekostnader"})]}),(0,V.jsxs)("h4",{className:"text-black font-bold text-sm md:text-base",children:["kr ",l]})]})]})]})]})})},K3=()=>{var e,r,n,i,a,s;const[o,l]=(0,t.useState)(0),c=Gr().pathname.split("/"),u=c.length>2?c[2]:null,[d,h]=(0,t.useState)(!0),[p,f]=(0,t.useState)(null);return(0,t.useEffect)((()=>{if(!u)return void h(!1);(async()=>{const e=await y_(u);e&&f(e),h(!1)})()}),[u]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"bg-lightPurple py-4 px-4 md:px-6",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3 mb-6",children:[(0,V.jsx)(ti,{to:"/Husmodeller",className:"text-gray text-xs md:text-sm font-medium",children:"Husmodeller"}),(0,V.jsx)(KV,{className:"text-gray2 w-4 h-4"}),(0,V.jsx)("span",{className:"text-primary text-xs md:text-sm font-medium",children:"Se husmodell"})]}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row items-start justify-between gap-3",children:[(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:items-center",children:[d?(0,V.jsx)("div",{className:"w-full sm:w-[180px] h-[300px] sm:h-[113px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}):(0,V.jsx)("img",{src:null===p||void 0===p||null===(e=p.Husdetaljer)||void 0===e?void 0:e.photo,alt:"plot-image",className:"w-full sm:w-[180px] h-auto sm:h-[113px] rounded-lg"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2 md:gap-4",children:[d?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("h4",{className:"text-darkBlack font-medium text-lg md:text-xl desktop:text-2xl",children:null===p||void 0===p||null===(r=p.Husdetaljer)||void 0===r?void 0:r.husmodell_name}),(0,V.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[d?(0,V.jsx)("div",{className:"w-[100px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-sm md:text-base desktop:text-lg text-darkBlack font-semibold",children:[null===p||void 0===p||null===(n=p.Husdetaljer)||void 0===n?void 0:n.BRATotal," ",(0,V.jsxs)("span",{className:"text-gray font-normal",children:["m",(0,V.jsx)("sup",{children:"2"})]})]}),(0,V.jsx)("div",{className:"h-3 border-l border-gray2"}),d?(0,V.jsx)("div",{className:"w-[100px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-sm md:text-base desktop:text-lg text-darkBlack font-semibold",children:[null===p||void 0===p||null===(i=p.Husdetaljer)||void 0===i?void 0:i.Soverom," ",(0,V.jsx)("span",{className:"text-gray font-normal",children:"soverom"})]}),(0,V.jsx)("div",{className:"h-3 border-l border-gray2"}),d?(0,V.jsx)("div",{className:"w-[100px] h-[30px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-sm md:text-base desktop:text-lg text-darkBlack font-semibold",children:[null===p||void 0===p||null===(a=p.Husdetaljer)||void 0===a?void 0:a.Bad," ",(0,V.jsx)("span",{className:"text-gray font-normal",children:"bad"})]})]})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-1 md:gap-2",children:[(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm",children:"Pris fra"}),d?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("h5",{className:"text-darkBlack text-base md:text-lg desktop:text-xl font-semibold",children:S_(null===p||void 0===p||null===(s=p.Husdetaljer)||void 0===s?void 0:s.pris)})]})]})]}),(0,V.jsxs)("div",{className:"py-4 px-4 md:px-6",children:[(0,V.jsxs)("div",{className:"border-b border-gray2 flex flex-col-reverse items-start sm:flex-row sm:items-center justify-between gap-2 mb-4 md:mb-6",children:[(0,V.jsx)(B3,{tabs:[{label:"Husdetaljer"},{label:"Prisliste"}],activeTab:o,setActiveTab:l}),(0,V.jsx)(HT,{text:"Endre husmodell",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",path:`/edit-husmodell/${u}`})]}),0===o&&(0,V.jsx)(G3,{husmodellData:null===p||void 0===p?void 0:p.Husdetaljer,loading:d}),1===o&&(0,V.jsx)(q3,{husmodellData:null===p||void 0===p?void 0:p.Prisliste})]})]})};const Z3=r.p+"static/media/Ic_build_housing.c15fbf97e6fbb9de7c121d2dc825bc7e.svg";const Y3=r.p+"static/media/Ic_delete_purple.e86d0ef5ee16d2148126c2aa19d63041.svg";const X3=r.p+"static/media/Ic_garaje.b8c93a3f446cb95d4bab7931a7bc0cdf.svg";const Q3=r.p+"static/media/Ic_file.324c8ee680fc673c1552b8b82bb6f9d3.svg",J3=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,V.jsx)("textarea",{className:x_("flex w-full rounded-[8px] border border-input bg-white text-black px-[14px] py-[10px] text-base focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 focus:shadow-none focus-visible:shadow-none resize-none border-input file:border-0 file:bg-transparent file:text-sm file:font-medium focus:bg-lightYellow2 focus:shadow-none focus-visible:shadow-none placeholder:text-[#667085] placeholder:text-opacity-55 placeholder:text-base disabled:text-[#767676] focus:shadow-shadow1",r),ref:t,...n})}));J3.displayName="TextArea";const e4=r.p+"static/media/Ic_close_black.544ca08f30882e19988d73630b09e5ef.svg";const t4=r.p+"static/media/Ic_down_arrow.4d39b13f1e2309bd75f0d8b16fe71a4c.svg",r4=e=>{let{options:r,onChange:n,placeholder:i,className:a,value:s=[],disabled:o}=e;const[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)([]),h=(0,t.useRef)(null);(0,t.useEffect)((()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);(0,t.useEffect)((()=>{if(Array.isArray(s)){const e=null===s||void 0===s?void 0:s.map((e=>{const t=r.find((t=>t.value===e));return t||{value:e,label:e}}));(null===e||void 0===e?void 0:e.length)>0&&d(e)}}),[s,r]);const p=(0,t.useRef)(null);return(0,t.useEffect)((()=>{u&&p.current&&(p.current.scrollLeft=p.current.scrollWidth)}),[u]),(0,V.jsx)("div",{className:"relative",ref:h,children:(0,V.jsxs)("div",{className:"relative",children:[(0,V.jsxs)("div",{className:`flex gap-2 justify-between items-center py-1 px-3 focus:border-1 border rounded-[8px] h-12 ${a} ${l&&"border"} ${o?"cursor-not-allowed bg-[#F5F5F5] text-gray hover:border-gray7":"cursor-pointer border-gray7"}`,onClick:()=>!o&&c(!l),children:[(0,V.jsxs)("p",{className:"text-gray flex items-center gap-2 whitespace-nowrap overflow-x-auto overFlowXScroll py-1",ref:p,children:[(null===u||void 0===u?void 0:u.length)>0&&(0,V.jsx)("div",{className:"flex gap-2 items-center",children:u.map((e=>(0,V.jsxs)("div",{className:"flex items-center bg-gray3 text-gray rounded-[8px] px-2 py-[1px] gap-[4px] whitespace-nowrap w-max",children:[e.label,(0,V.jsx)("img",{src:e4,alt:"close",onClick:t=>{t.stopPropagation(),(e=>{const t=u.filter((t=>t.value!==e.value));d(t),n(t)})(e)},className:"cursor-pointer w-4 h-4"})]},e.value)))}),i]}),(0,V.jsx)("img",{src:t4,alt:"arrow",className:""+(l?"rotate-180":"rotate-0")})]}),l&&(0,V.jsx)("div",{className:"absolute z-10 top-[40px] lg:top-[48px] left-0 w-full mt-1 bg-white border border-gray1 rounded-[8px] shadow-lg max-h-60 overflow-auto",children:r.map((e=>(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 p-2 cursor-pointer text-black",onClick:()=>(e=>{const t=null!==u&&void 0!==u&&u.some((t=>t.value===e.value))?u.filter((t=>t.value!==e.value)):[...u,e];d(t),n(t)})(e),children:[e.label,(0,V.jsx)("div",{className:"",children:null!==u&&void 0!==u&&u.some((t=>t.value===e.value))?(0,V.jsx)(VZ,{className:"w-5 h-5"}):(0,V.jsx)(V.Fragment,{})})]},e.value)))})]})})},n4=kQ.object({"Leverand\xf8rer":kQ.string().min(1,{message:"Leverand\xf8rer must m\xe5 spesifiseres."}),TypeObjekt:kQ.string().min(1,{message:"Velg en Type Objekt."}),photo:kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()]),PlantegningerFasader:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).min(1,"Minst ett bilde kreves."),photo3D:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).min(1,"Minst ett bilde kreves."),husmodell_name:kQ.string().min(1,{message:"Navn p\xe5 husmodell m\xe5 best\xe5 av minst 2 tegn."}),link_3D_image:kQ.string().min(1,{message:"Link til 3D bilde m\xe5 best\xe5 av minst 2 tegn."}).optional(),pris:kQ.string().min(1,{message:"Pris m\xe5 best\xe5 av minst 1 tegn."}),BRATotal:kQ.string().min(1,{message:"BRA total (bruksareal) m\xe5 best\xe5 av minst 2 tegn."}),PRom:kQ.string().min(1,{message:"GUA (Gulvareal) m\xe5 best\xe5 av minst 2 tegn."}),"M\xf8neh\xf8yde":kQ.number().min(1,{message:"M\xf8neh\xf8yde areal m\xe5 best\xe5 av minst 2 tegn."}),"Gesimsh\xf8yde":kQ.number().min(1,{message:"Gesimsh\xf8yde areal m\xe5 best\xe5 av minst 2 tegn."}),Lengde:kQ.string().min(1,{message:"Lengde areal m\xe5 best\xe5 av minst 2 tegn."}),Bredde:kQ.string().min(1,{message:"Bredde areal m\xe5 best\xe5 av minst 2 tegn."}),Takvinkel:kQ.number().min(1,{message:"Takvinkel areal m\xe5 best\xe5 av minst 2 tegn."}),BebygdAreal:kQ.number().min(1,{message:"Bebygd areal (BYA) m\xe5 best\xe5 av minst 2 tegn."}),Soverom:kQ.number().min(1,{message:"Soverom m\xe5 best\xe5 av minst 2 tegn."}),InnvendigBod:kQ.number().min(1,{message:"InnvendigBod m\xe5 best\xe5 av minst 2 tegn."}),Bad:kQ.number().min(1,{message:"Bad m\xe5 best\xe5 av minst 2 tegn."}),Energimerking:kQ.string().min(1,{message:"Energimerking must m\xe5 spesifiseres."}),TilgjengeligBolig:kQ.string().min(1,{message:"TilgjengeligBolig must m\xe5 spesifiseres."}),Tomtetype:kQ.array(kQ.string().min(1,{message:"Tomtetype m\xe5 spesifiseres."})).min(1,{message:"Minst \xe9n tomtetype m\xe5 velges."}),Hustittel:kQ.string().min(1,{message:"Hustittel m\xe5 best\xe5 av minst 2 tegn."}),OmHusmodellen:kQ.string().min(1,{message:"OmHusmodellen m\xe5 best\xe5 av minst 2 tegn."}),TittelVideo:kQ.string().min(1,{message:"Tittel p\xe5 video m\xe5 best\xe5 av minst 2 tegn."}).optional(),VideoLink:kQ.string().refine((e=>""===e||/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)[a-zA-Z0-9_-]+$/.test(e)),{message:"Please enter a valid YouTube URL."}),signConractConstructionDrawing:kQ.number().min(1,{message:"Antall dager for \xe5 signere kontrakt og byggtegninger m\xe5 best\xe5 av minst 1 tegn."}),neighborNotification:kQ.number().min(1,{message:"Antall dager for nabovarsel m\xe5 best\xe5 av minst 1 tegn."}),appSubmitApprove:kQ.number().min(1,{message:"Antall dager fra s\xf8knad sendt til s\xf8knad godkjent m\xe5 best\xe5 av minst 1 tegn."}),constuctionDayStart:kQ.number().min(1,{message:"Antall dager f\xf8r oppstart av byggearbeider m\xe5 best\xe5 av minst 1 tegn."}),foundationWork:kQ.number().min(1,{message:"Antall dager for grunnarbeider m\xe5 best\xe5 av minst 1 tegn."}),concreteWork:kQ.number().min(1,{message:"Antall dager for betongarbeid m\xe5 best\xe5 av minst 1 tegn."}),deliveryconstuctionKit:kQ.number().min(1,{message:"Antall dager for levering byggesett m\xe5 best\xe5 av minst 1 tegn."}),denseConstuction:kQ.number().min(1,{message:"Antall dager for tett bygg m\xe5 best\xe5 av minst 1 tegn."}),completeInside:kQ.number().min(1,{message:"Antall dager for ferdig inne m\xe5 best\xe5 av minst 1 tegn."}),preliminaryInspection:kQ.number().min(1,{message:"Antall dager for forh\xe5ndsbefaring m\xe5 best\xe5 av minst 1 tegn."}),takeOver:kQ.number().min(1,{message:"Antall dager for overtakelse m\xe5 best\xe5 av minst 1 tegn."}),documents:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).optional(),VelgBoligtype:kQ.string({required_error:"Velg en boligtype"}).min(1,"Velg en boligtype"),VelgEgenskaperBoligtype:kQ.array(kQ.string()).optional()}),i4=e=>{let{setActiveTab:r}=e;const n=AG({resolver:FG(n4)}),i=Gr().pathname.split("/"),a=i.length>2?i[2]:null,[s,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),f=localStorage.getItem("Iplot_admin");(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){d(e);const t=null===e||void 0===e?void 0:e.supplier;p(t)}})()}),[h]),(0,t.useEffect)((()=>{if(!a)return;(async()=>{const e=await y_(a);e&&e.Husdetaljer&&Object.entries(e.Husdetaljer).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&(n.setValue(t,r),"Leverand\xf8rer"===t&&c(r))}))})()}),[n,a,s]);(0,t.useEffect)((()=>{(async()=>{try{if(h&&h||"andre.finger@gmail.com"!==f){const e=await w_(h),t=[];e&&t.push(e),t&&o(t)}else{const e=(await pg(lm(g_,"suppliers"))).docs.map((e=>({id:e.id,...e.data()})));o(e)}}catch(e){console.error("Error fetching husmodell data:",e)}})()}),[h]);const m=Kr(),g=t.useRef(null),v=t.useRef(null),x=t.useRef(null),y=t.useRef(null),b=n.watch("photo"),w=n.watch("PlantegningerFasader"),_=n.watch("photo3D"),k=n.watch("documents"),S=async(e,t)=>{if(!e)return;if(e.size>2097152)return void He.error("Image size must be less than 2MB.",{position:"top-right"});const r=`${Date.now()}_${e.name}`,i=h_(v_,`images/${r}`);try{const r=await c_(i,e),a=await d_(r.ref);n.setValue(t,a),n.clearErrors(t)}catch(a){console.error(`Error uploading file for ${t}:`,a)}},j=async e=>{var t;null!==(t=e.target.files)&&void 0!==t&&t[0]&&await S(e.target.files[0],"photo")},E=()=>{var e;null===(e=g.current)||void 0===e||e.click()},C=async e=>{var t;e.preventDefault(),null!==(t=e.dataTransfer.files)&&void 0!==t&&t[0]&&await S(e.dataTransfer.files[0],"photo")},N=async(e,t)=>{if(!e.length)return;let r=[..."PlantegningerFasader"===t?w||[]:_||[]];const i=Array.from(e).map((async e=>{if(e.size>2097152)return He.error("Image size must be less than 2MB.",{position:"top-right"}),null;const t=`${Date.now()}_${e.name}`,r=h_(v_,`images/${t}`);try{const t=await c_(r,e);return await d_(t.ref)}catch(n){return console.error("Error uploading file:",n),null}})),a=(await Promise.all(i)).filter(Boolean);a.length&&(r=[...r,...a],n.setValue(t,r),n.clearErrors(t))},T=async e=>{e.target.files&&await N(e.target.files,"PlantegningerFasader")},P=()=>{var e;null===(e=y.current)||void 0===e||e.click()},A=async e=>{e.preventDefault(),e.dataTransfer.files&&await N(e.dataTransfer.files,"PlantegningerFasader")},M=async(e,t)=>{if(!e.length)return;let r=[...k||[]];const i=Array.from(e).map((async e=>{if(e.size>2097152)return He.error("Image size must be less than 2MB.",{position:"top-right"}),null;const t=`${Date.now()}_${e.name}`,r=h_(v_,`documents/${t}`);try{const t=await c_(r,e);return await d_(t.ref)}catch(n){return console.error("Error uploading file:",n),null}})),a=(await Promise.all(i)).filter(Boolean);a.length&&(r=[...r,...a],n.setValue(t,r),n.clearErrors(t))},I=async e=>{e.target.files&&await M(e.target.files,"documents")},O=()=>{var e;null===(e=x.current)||void 0===e||e.click()},D=async e=>{e.preventDefault(),e.dataTransfer.files&&await M(e.dataTransfer.files,"documents")},R=e=>{e.preventDefault()},L=e=>{e.preventDefault()},F=e=>{e.preventDefault()},$=async e=>{e.target.files&&await N(e.target.files,"photo3D")},B=()=>{var e;null===(e=v.current)||void 0===e||e.click()},z=async e=>{e.preventDefault(),e.dataTransfer.files&&await N(e.dataTransfer.files,"photo3D")},U=e=>{e.preventDefault()},H=n.watch("TypeObjekt"),G=[n.watch("signConractConstructionDrawing"),n.watch("neighborNotification"),n.watch("appSubmitApprove"),n.watch("constuctionDayStart"),n.watch("foundationWork"),n.watch("concreteWork"),n.watch("deliveryconstuctionKit"),n.watch("denseConstuction"),n.watch("completeInside"),n.watch("preliminaryInspection"),n.watch("takeOver")].reduce(((e,t)=>e+(t||0)),0),W=["Funkis","Moderne","Herskapelig","Tradisjonelt","Tomannsbolig"],q=["Tomannsbolig","Med utleiedal","Ett plan","Med garasje"],[K,Z]=(0,t.useState)(!1),[Y,X]=(0,t.useState)(null),Q=[{value:"Flat tomt",label:"Flat tomt"},{value:"Skr\xe5net tomt",label:"Skr\xe5net tomt"}];return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(tW,{...n,children:(0,V.jsxs)("form",{onSubmit:n.handleSubmit((async e=>{try{e.VideoLink&&!/^https?:\/\//i.test(e.VideoLink)&&(e.VideoLink=`https://${e.VideoLink}`);const t=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",",""),n=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"}),i=e.Leverand\u00f8rer;if(l&&i!==l){const t=cm(g_,"suppliers",i),r=await w_(i);await mg(t,{...r,id:i,updatedAt:n.format(new Date),Produkter:(null===r||void 0===r?void 0:r.Produkter)+1});const a=cm(g_,"suppliers",l),s=await w_(l);await mg(a,{...s,id:l,documents:null!==e&&void 0!==e&&e.documents&&(null===e||void 0===e?void 0:e.documents.length)>0?null===e||void 0===e?void 0:e.documents:null,updatedAt:n.format(new Date),Produkter:Math.max(0===(null===s||void 0===s?void 0:s.Produkter)?0:(null===s||void 0===s?void 0:s.Produkter)-1)})}else{const t=cm(g_,"suppliers",i),r=await w_(i);await mg(t,{...r,id:i,documents:null!==e&&void 0!==e&&e.documents&&(null===e||void 0===e?void 0:e.documents.length)>0?null===e||void 0===e?void 0:e.documents:null,updatedAt:n.format(new Date),Produkter:(null===r||void 0===r?void 0:r.Produkter)+1})}const s=a||yW(),o=cm(g_,"house_model",s),d={...e,link_3D_image:e.link_3D_image||null,id:s};a?(await mg(o,{Husdetaljer:d,updatedAt:t(new Date),updateDataBy:{email:null===u||void 0===u?void 0:u.email,photo:null===u||void 0===u?void 0:u.photo,name:null!==u&&void 0!==u&&u.f_name?`${null===u||void 0===u?void 0:u.f_name} ${null===u||void 0===u?void 0:u.l_name}`:null===u||void 0===u?void 0:u.name}}),He.success("Lagret",{position:"top-right"})):(await fg(o,{Husdetaljer:d,updatedAt:t(new Date),createdAt:t(new Date),createDataBy:{email:null===u||void 0===u?void 0:u.email,photo:null===u||void 0===u?void 0:u.photo,name:null!==u&&void 0!==u&&u.f_name?`${null===u||void 0===u?void 0:u.f_name} ${null===u||void 0===u?void 0:u.l_name}`:null===u||void 0===u?void 0:u.name},updateDataBy:{email:null===u||void 0===u?void 0:u.email,photo:null===u||void 0===u?void 0:u.photo,name:null!==u&&void 0!==u&&u.f_name?`${null===u||void 0===u?void 0:u.f_name} ${null===u||void 0===u?void 0:u.l_name}`:null===u||void 0===u?void 0:u.name}}),He.success("Added successfully",{position:"top-right"})),m(`/edit-husmodell/${s}`),r(1),c(null)}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("div",{className:"p-4 md:p-6 mb-10 md:mb-14 desktop:mb-20",children:(0,V.jsxs)("div",{className:"flex flex-col gap-5 lg:gap-8",children:[(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-5 desktop:gap-8",children:[(0,V.jsxs)("div",{className:"w-full lg:w-[30%] desktop:w-[20%]",children:[(0,V.jsx)("h5",{className:"text-black text-sm font-medium",children:"Grunninformasjon"}),(0,V.jsx)("p",{className:"text-gray text-sm whitespace-nowrap truncate",children:"Legg til bilder og husdetaljer"})]}),(0,V.jsxs)("div",{className:"md:grid flex flex-col md:grid-cols-2 gap-4 lg:gap-6 w-full lg:w-[70%] desktop:w-[80%] shadow-shadow2 px-4 lg:px-6 py-4 md:py-5 rounded-lg",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"Leverand\xf8rer",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Leverand\xf8rer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Select Leverand\xf8rer"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsx)(GZ,{children:null===s||void 0===s?void 0:s.map(((e,t)=>(0,V.jsx)(XZ,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.company_name},t)))})})]})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"col-span-2",children:[(0,V.jsx)("p",{className:(n.formState.errors.TypeObjekt?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Type objekt"}),(0,V.jsx)("div",{className:"flex flex-wrap gap-2 lg:gap-4 items-center",children:[{label:"Bolig",icon:Z3,value:"bolig"},{label:"Hytte",icon:Z3,value:"hytte"},{label:"Garasje",icon:X3,value:"garasje"}].map(((e,t)=>(0,V.jsxs)("div",{onClick:()=>{n.setValue("TypeObjekt",e.value),n.clearErrors("TypeObjekt")},className:"border-2 rounded-lg p-2 cursor-pointer "+(H===e.value?"border-purple":"border-gray1"),children:[(0,V.jsx)("div",{className:"bg-[#F9FAFB] rounded-[8px] h-[60px] md:h-[90px] lg:h-[125px] w-[110px] md:w-[150px] lg:w-[160px] desktop:w-[198px] flex items-center justify-center mb-2",children:(0,V.jsx)("img",{src:e.icon,alt:e.label,className:"w-[40px] md:w-[55px] lg:w-auto"})}),(0,V.jsx)("div",{className:"text-darkBlack text-sm text-center font-medium",children:e.label})]},t)))}),n.formState.errors.TypeObjekt&&(0,V.jsx)("p",{className:"text-red text-sm mt-1",children:n.formState.errors.TypeObjekt.message})]}),(0,V.jsx)("div",{className:"col-span-2",children:(0,V.jsx)(nW,{control:n.control,name:"VelgBoligtype",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:"text-black mb-1.5 md:mb-3 text-base font-semibold",children:"Velg boligtype"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center flex-wrap gap-3 lg:gap-5",children:W.map((e=>(0,V.jsxs)("div",{className:"relative flex items-center gap-2",children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] border text-black\n        ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4 accent-primary`,type:"radio",value:e,onChange:e=>{n.setValue("VelgBoligtype",e.target.value)},checked:t.value===e}),(0,V.jsx)("p",{className:"text-gray text-sm font-medium",children:e})]},e)))})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"col-span-2",children:(0,V.jsx)(nW,{control:n.control,name:"VelgEgenskaperBoligtype",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:"text-black mb-1.5 md:mb-3 text-base font-semibold",children:"Velg egenskaper til boligtype"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center flex-wrap gap-3 lg:gap-5",children:q.map((e=>{var i;return(0,V.jsxs)("div",{className:"relative flex items-center gap-2",children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] border text-black\n        ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4 accent-primary`,type:"checkbox",value:e,checked:null===(i=t.value)||void 0===i?void 0:i.includes(e),onChange:r=>{const i=r.target.checked,a=t.value||[];i?n.setValue("VelgEgenskaperBoligtype",[...a,e]):n.setValue("VelgEgenskaperBoligtype",a.filter((t=>t!==e)))}}),(0,V.jsx)("p",{className:"text-gray text-sm font-medium",children:e})]},e)}))})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"husmodell_name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Navn p\xe5 husmodell"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Navn p\xe5 husmodell",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Pris fra"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Pris fra",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})}})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"col-span-2 flex gap-4 lg:gap-6 items-center",children:(0,V.jsx)(nW,{control:n.control,name:"photo",render:e=>{let{fieldState:t}=e;return(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)("p",{className:(t.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Hovedbilde"}),(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"flex flex-col items-center gap-5 w-full",children:[b&&(0,V.jsx)("img",{src:b,alt:"logo",height:"140px",width:"140px"}),(0,V.jsx)("div",{className:"relative w-full",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-2 lg:gap-3 cursor-pointer w-full",onDragOver:R,onClick:E,onDrop:C,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:"SVG, PNG, JPG or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:g,className:"hidden",accept:".svg, .png, .jpg, .jpeg, .gif",onChange:j,name:"photo"})]})})]})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"col-span-2",children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm font-medium",children:"Illustrasjoner"}),(0,V.jsxs)("div",{className:"flex flex-col md:grid grid-cols-2 gap-4 lg:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"link_3D_image",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Link til 3D bilde"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Legg til 3D link fra Norkart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)(nW,{control:n.control,name:"photo",render:()=>(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:L,onClick:B,onDrop:z,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"SVG, PNG, JPG or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:v,className:"hidden",accept:".svg, .png, .jpg, .jpeg, .gif",onChange:$,name:"photo3D",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})})]}),_&&(0,V.jsx)("div",{className:"mt-3 md:mt-5 flex items-center gap-3 lg:gap-5 flex-wrap",children:null===_||void 0===_?void 0:_.map(((e,t)=>(0,V.jsxs)("div",{className:"relative h-[140px] w-[140px]",children:[(0,V.jsx)("img",{src:e,alt:"logo",className:"object-cover w-full h-full rounded-lg"}),(0,V.jsx)("div",{className:"absolute top-2 right-2 bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer",onClick:()=>{const e=_.filter(((e,r)=>r!==t));n.setValue("photo3D",e)},children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})]},t)))})]}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"BRATotal",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"BRA total (bruksareal)"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn BRA total (bruksareal)",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"PRom",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"GUA (Gulvareal)"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn GUA (Gulvareal)",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"M\xf8neh\xf8yde",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"M\xf8neh\xf8yde"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn M\xf8neh\xf8yde",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"Gesimsh\xf8yde",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Gesimsh\xf8yde"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Gesimsh\xf8yde",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"Takvinkel",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Takvinkel"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Takvinkel",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"BebygdAreal",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Bebygd areal (BYA)"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Bebygd areal (BYA)",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"Lengde",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Lengde"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Lengde",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"Bredde",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Bredde"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Bredde",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"Soverom",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Soverom"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Soverom",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"Bad",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Bad"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Bad",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"InnvendigBod",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Innvendig bod"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Innvendig bod",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"Energimerking",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Energimerking"}),(0,V.jsx)(lW,{children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Enter Energimerking"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsxs)(GZ,{children:[(0,V.jsx)(XZ,{value:"A",children:"A"}),(0,V.jsx)(XZ,{value:"B",children:"B"}),(0,V.jsx)(XZ,{value:"C",children:"C"}),(0,V.jsx)(XZ,{value:"D",children:"D"})]})})]})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"TilgjengeligBolig",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Tilgjengelig bolig"}),(0,V.jsx)(lW,{children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Enter Tilgjengelig bolig"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsxs)(GZ,{children:[(0,V.jsx)(XZ,{value:"Ja",children:"Ja"}),(0,V.jsx)(XZ,{value:"Nei",children:"Nei"})]})})]})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"Tomtetype",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Tomtetype"}),(0,V.jsx)(lW,{children:(0,V.jsx)(r4,{options:Q,onChange:e=>{if(Array.isArray(e)){const r=e.map((e=>e.value));t.onChange(r)}else t.onChange(e)},placeholder:"Enter Tomtetype",className:(null!==r&&void 0!==r&&r.error?"border-red":"border-gray1")+" ",value:t.value})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-5 desktop:gap-8",children:[(0,V.jsxs)("div",{className:"w-full lg:w-[30%] desktop:w-[20%]",children:[(0,V.jsx)("h5",{className:"text-black text-sm font-medium",children:"Dokumenter"}),(0,V.jsx)("p",{className:"text-gray text-sm whitespace-nowrap truncate",children:"Legg til dokument for huset"})]}),(0,V.jsx)("div",{className:"md:grid flex flex-col md:grid-cols-2 gap-4 lg:gap-6 w-full lg:w-[70%] desktop:w-[80%] shadow-shadow2 px-4 lg:px-6 py-4 md:py-5 rounded-lg",children:(0,V.jsxs)("div",{className:"col-span-2",children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm font-medium",children:"Dokumenter"}),(0,V.jsxs)("div",{className:"flex flex-col md:grid grid-cols-2 gap-4 lg:gap-6",children:[(0,V.jsx)(nW,{control:n.control,name:"documents",render:()=>(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-3 lg:gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-1.5 lg:gap-3 cursor-pointer w-full",onDragOver:U,onClick:O,onDrop:D,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:"PDF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:x,className:"hidden",accept:".pdf",onChange:I,name:"documents",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}),(0,V.jsx)("div",{children:k&&(0,V.jsx)("div",{className:"flex flex-col items-center gap-3",children:null===k||void 0===k?void 0:k.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsx)("div",{children:(0,V.jsx)("div",{className:"bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer w-8 h-8",onClick:()=>(e=>{X(e),Z(!0)})(t),children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})})]},t)))})})]})]})})]}),(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-5 desktop:gap-8",children:[(0,V.jsxs)("div",{className:"w-full lg:w-[30%] desktop:w-[20%]",children:[(0,V.jsx)("h5",{className:"text-black text-sm font-medium",children:"Tidskalkulering"}),(0,V.jsx)("p",{className:"text-gray text-sm whitespace-nowrap truncate",children:"Legg til forventet s\xf8knad og byggerperiode."})]}),(0,V.jsxs)("div",{className:"md:grid flex flex-col md:grid-cols-2 gap-4 lg:gap-6 w-full lg:w-[70%] desktop:w-[80%] shadow-shadow2 px-4 lg:px-6 py-4 md:py-5 rounded-lg",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h4",{className:"text-[#111322] font-semibold text-sm md:text-base desktop:text-lg mb-2 md:mb-4",children:"Antall dager fra lead til byggestart"}),(0,V.jsxs)("div",{className:"flex flex-col gap-4 lg:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"signConractConstructionDrawing",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager for \xe5"," ",(0,V.jsx)("span",{className:"font-bold",children:"signere kontrakt og byggtegninger"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"neighborNotification",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager for"," ",(0,V.jsx)("span",{className:"font-bold",children:"nabovarsel"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"appSubmitApprove",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager fra"," ",(0,V.jsx)("span",{className:"font-bold",children:"s\xf8knad sendt til s\xf8knad godkjent"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"constuctionDayStart",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager f\xf8r"," ",(0,V.jsx)("span",{className:"font-bold",children:"oppstart av byggearbeider"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("h4",{className:"text-[#111322] font-semibold text-sm md:text-base desktop:text-lg mb-2 md:mb-4",children:"Antall dager fra byggestart til overtakelse"}),(0,V.jsxs)("div",{className:"flex flex-col gap-4 lg:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"foundationWork",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager for"," ",(0,V.jsx)("span",{className:"font-bold",children:"grunnarbeider"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"concreteWork",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager for",(0,V.jsx)("span",{className:"font-bold",children:"betongarbeid"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"deliveryconstuctionKit",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager for"," ",(0,V.jsx)("span",{className:"font-bold",children:"levering byggesett"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"denseConstuction",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager for"," ",(0,V.jsx)("span",{className:"font-bold",children:"tett bygg"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"completeInside",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager for"," ",(0,V.jsx)("span",{className:"font-bold",children:"ferdig inne"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"preliminaryInspection",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager for"," ",(0,V.jsx)("span",{className:"font-bold",children:"forh\xe5ndsbefaring"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"takeOver",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Antall dager for"," ",(0,V.jsx)("span",{className:"font-bold",children:"overtakelse"})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Angi verdi i dager",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number",onChange:e=>t.onChange(Number(e.target.value)||"")})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"col-span-2 flex flex-col gap-4 lg:gap-6 items-center justify-center",children:[(0,V.jsxs)("h3",{className:"text-black text-xs md:text-sm text-center",children:["TOTALT ANTALL DAGER"," ",(0,V.jsx)("span",{className:"font-bold",children:"FRA LEAD TIL OVERTAKELSE"})]}),(0,V.jsxs)("p",{className:"text-lg md:text-xl desktop:text-2xl font-semibold text-black",children:[G," ",(0,V.jsx)("span",{className:"text-[#34405499]",children:"dager"})]})]})]})]}),(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-5 desktop:gap-8",children:[(0,V.jsxs)("div",{className:"w-full lg:w-[30%] desktop:w-[20%]",children:[(0,V.jsx)("h5",{className:"text-black text-sm font-medium",children:"Husbeskrivelse og plantegninger"}),(0,V.jsx)("p",{className:"text-gray text-sm whitespace-nowrap truncate",children:"Legg til bilder og husbeskrivelse"})]}),(0,V.jsxs)("div",{className:"md:grid flex flex-col md:grid-cols-2 gap-4 lg:gap-6 w-full lg:w-[70%] desktop:w-[80%] shadow-shadow2 px-4 lg:px-6 py-4 md:py-5 rounded-lg",children:[(0,V.jsx)("div",{className:"col-span-2",children:(0,V.jsx)(nW,{control:n.control,name:"Hustittel",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Hustittel"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Hustittel",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"col-span-2",children:(0,V.jsx)(nW,{control:n.control,name:"OmHusmodellen",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Om husmodellen"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(J3,{placeholder:"Skriv inn Om husmodellen",...t,className:`h-[300px] bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"",children:(0,V.jsx)(nW,{control:n.control,name:"PlantegningerFasader",render:e=>{let{fieldState:t}=e;return(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)("p",{className:(t.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Plantegninger og fasader"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-3 lg:gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-1 lg:gap-3 cursor-pointer w-full",onDragOver:F,onClick:P,onDrop:A,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:"SVG, PNG, JPG or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:y,className:"hidden",accept:".svg, .png, .jpg, .jpeg, .gif",onChange:T,name:"PlantegningerFasader",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:w&&(0,V.jsx)("div",{className:"flex items-center gap-3 lg:gap-5 flex-wrap",children:null===w||void 0===w?void 0:w.map(((e,t)=>(0,V.jsxs)("div",{className:"relative h-[140px] w-[140px]",children:[(0,V.jsx)("img",{src:e,alt:"logo",className:"object-cover w-full h-full rounded-lg"}),(0,V.jsx)("div",{className:"absolute top-2 right-2 bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer",onClick:()=>{const e=w.filter(((e,r)=>r!==t));n.setValue("PlantegningerFasader",e)},children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})]},t)))})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"TittelVideo",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Tittel p\xe5 video"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Tittel p\xe5 video",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"VideoLink",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Video link"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Video link",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})})]})]})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)(ti,{to:"/Husmodeller",children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})}),K&&(0,V.jsx)(sA,{onClose:()=>{Z(!K)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,V.jsx)("p",{className:"mb-4",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,V.jsx)("div",{onClick:()=>{Z(!1),X(null)},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>{if(null!==Y){const e=k.filter(((e,t)=>t!==Y));n.setValue("documents",e)}Z(!1),X(null)}})]})]})})})]})};const a4=r.p+"static/media/Ic_x_circle.d0042930fd1caed79d02556d7abbfece.svg",s4=kQ.object({Kategorinavn:kQ.string().min(1,{message:"Kategorinavn m\xe5 best\xe5 av minst 2 tegn."}),isSelected:kQ.boolean().optional()}),o4=e=>{let{onClose:r,formData:n,activeTabData:i,setCategory:a,editIndex:s,editData:o}=e;const l=AG({resolver:FG(s4)});(0,t.useEffect)((()=>{null!==o&&void 0!==o&&o.navn&&l.setValue("Kategorinavn",null===o||void 0===o?void 0:o.navn),null!==o&&void 0!==o&&o.isSelected&&l.setValue("isSelected",null===o||void 0===o?void 0:o.isSelected)}),[l,null===o||void 0===o?void 0:o.navn,null===o||void 0===o?void 0:o.isSelected]);return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...l,children:(0,V.jsxs)("form",{onSubmit:l.handleSubmit((async e=>{r();const t=e.Kategorinavn,o=n.getValues(`hovedkategorinavn.${i}.Kategorinavn`)||[];if(null!==s&&o[s]){var l;const r=[...o];r[s].navn=t,r[s].isSelected=null!==(l=null===e||void 0===e?void 0:e.isSelected)&&void 0!==l&&l,a((t=>{var n;const a=[...t];return a[i]={...a[i],Kategorinavn:r,isSelected:null!==(n=e.isSelected)&&void 0!==n&&n},a})),n.setValue(`hovedkategorinavn.${i}.Kategorinavn`,r,{shouldValidate:!0})}else{var c;const r={navn:t,isSelected:null!==(c=null===e||void 0===e?void 0:e.isSelected)&&void 0!==c&&c,produkter:[]};a((t=>{var n;const a=[...t];return a[i]={...a[i],Kategorinavn:[...o,r],isSelected:null!==(n=e.isSelected)&&void 0!==n&&n},a}))}})),className:"relative w-full",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:"Kategorinavn",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Kategorinavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Kategorinavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:"isSelected",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"relative flex items-center gap-2 mt-3",children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] accent-primary border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4`,type:"radio",onChange:e=>{const t=e.target.checked;t&&l.setValue("isSelected",t)},checked:t.value}),(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" text-sm font-medium",children:"Is mandatory"})]})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center left-0 mt-8",children:[(0,V.jsx)("div",{onClick:()=>{l.reset(),r()},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-lightPurple bg-lightPurple text-purple text-sm rounded-[8px] h-[40px] font-medium relative px-12 py-2 flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-12 py-2 flex items-center gap-2",type:"submit"})]})]})})})},l4=kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()]),c4=kQ.object({Produktnavn:kQ.string().min(1,"Produktnavn m\xe5 best\xe5 av minst 1 tegn."),Hovedbilde:kQ.array(l4).min(1,"Minst \xe9n fil m\xe5 lastes opp."),pris:kQ.string().nullable(),IncludingOffer:kQ.boolean().optional(),Produktbeskrivelse:kQ.string().min(1,"Produktbeskrivelse m\xe5 best\xe5 av minst 1 tegn.")}),u4=kQ.object({navn:kQ.string().min(1,"Kategorinavn m\xe5 best\xe5 av minst 1 tegn."),produkter:kQ.array(c4).min(1,"Minst ett produkt er p\xe5krevd."),isSelected:kQ.boolean().optional()}),d4=kQ.object({navn:kQ.string().min(1,"Hovedkategorinavn m\xe5 best\xe5 av minst 1 tegn."),Beskrivelse:kQ.string().min(1,"Beskrivelse m\xe5 best\xe5 av minst 1 tegn."),Kategorinavn:kQ.array(u4),isSelected:kQ.boolean().optional()}),h4=kQ.object({hovedkategorinavn:kQ.array(d4)}),p4=e=>{let{setActiveTab:r,labelName:n,Category:i,activeTabData:a,setCategory:s}=e;const[o,l]=(0,t.useState)(0),[c,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&u(e)})()}),[]);const d=Gr().pathname.split("/"),h=d.length>2?d[2]:null,p=Kr(),f=AG({resolver:FG(h4),defaultValues:{hovedkategorinavn:[{navn:"",Beskrivelse:"",Kategorinavn:[{navn:"",produkter:[{Produktnavn:"",Hovedbilde:[],pris:"",IncludingOffer:!1,Produktbeskrivelse:""}],isSelected:!1}]}]}}),m=f.watch(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter`),{fields:g,insert:v,remove:x}=fG({control:f.control,name:`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter`}),[y,b]=(0,t.useState)(!1);(0,t.useEffect)((()=>{f.setValue("hovedkategorinavn",i)}),[f,i]);const w=(0,t.useRef)([]);(0,t.useEffect)((()=>{const e=f.watch(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter`),t=f.watch(`hovedkategorinavn.${a}.Kategorinavn.${o}.isSelected`);e&&JSON.stringify(w.current)!==JSON.stringify(e)&&(s((r=>{var n,i;const s=[...r];return null!==(n=s[a])&&void 0!==n&&null!==(i=n.Kategorinavn)&&void 0!==i&&i[o]&&(s[a].Kategorinavn[o].produkter=null===e||void 0===e?void 0:e.map(((e,t)=>({Produktnavn:e.Produktnavn||"",Hovedbilde:e.Hovedbilde||[],pris:e.pris||"",IncludingOffer:e.IncludingOffer||!1,Produktbeskrivelse:e.Produktbeskrivelse||""}))),s[a].Kategorinavn[o].isSelected=null!==t&&void 0!==t&&t),s})),w.current=e)}),[JSON.stringify(f.watch(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter`)),f.watch(`hovedkategorinavn.${a}.Kategorinavn.${o}.isSelected`)]);const _=t.useRef(null),k=(0,t.useCallback)((()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()}),[]),S=(0,t.useCallback)((e=>e.preventDefault()),[]),j=f.watch("hovedkategorinavn"),E=(null===j||void 0===j?void 0:j.reduce(((e,t)=>{var r;return e+((null===t||void 0===t||null===(r=t.Kategorinavn)||void 0===r?void 0:r.reduce(((e,t)=>{var r;return e+((null===t||void 0===t||null===(r=t.produkter)||void 0===r?void 0:r.reduce(((e,t)=>{var r;const n=null===(r=t.pris)||void 0===r?void 0:r.replace(/\s/g,"").replace(/\./g,"").replace(",",".");return e+(n?parseFloat(n):0)}),0))||0)}),0))||0)}),0))||0,C=((e,t)=>{const r=((null===(e=f.getValues("hovedkategorinavn"))||void 0===e||null===(t=e[a])||void 0===t?void 0:t.Kategorinavn)||[]).filter((e=>{var t,r;if(null===e||void 0===e||!e.navn)return!1;const n=""!==e.navn.trim(),i=""!==(null===e||void 0===e||null===(t=e[o])||void 0===t||null===(r=t.navn)||void 0===r?void 0:r.trim());return n||i}));return r.length>0?r:[]})(),[N,T]=(0,t.useState)(null),[P,A]=(0,t.useState)(null),[M,I]=(0,t.useState)(null),[O,D]=(0,t.useState)(null),[R,L]=(0,t.useState)(null),[F,$]=(0,t.useState)(null);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(tW,{...f,children:(0,V.jsxs)("form",{onSubmit:f.handleSubmit((async e=>{try{const t=cm(g_,"house_model",h),n={...e,id:h},i=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");await mg(t,{Huskonfigurator:n,updatedAt:i(new Date),updateDataBy:{email:null===c||void 0===c?void 0:c.email,photo:null===c||void 0===c?void 0:c.photo,name:null!==c&&void 0!==c&&c.f_name?`${null===c||void 0===c?void 0:c.f_name} ${null===c||void 0===c?void 0:c.l_name}`:null===c||void 0===c?void 0:c.name}}),He.success("Lagret",{position:"top-right"}),p(`/edit-husmodell/${h}`),r(2)}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),children:[(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-2",children:[(0,V.jsx)("h4",{className:"text-darkBlack font-semibold text-base md:text-lg desktop:text-xl",children:n}),(0,V.jsx)("h5",{className:"text-purple font-semibold text-sm md:text-base cursor-pointer",onClick:()=>r(2),children:"Hopp over steget"})]}),(0,V.jsx)(nW,{control:f.control,name:`hovedkategorinavn.${a}.Beskrivelse`,render:e=>{var t,r;let{field:n,fieldState:i}=e;const o=null!==n&&void 0!==n&&n.value&&"string"===typeof n.value?null===n||void 0===n||null===(t=n.value)||void 0===t?void 0:t.trim().split(/\s+/).length:0;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(i.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Beskrivelse"}),(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"relative",children:[(0,V.jsx)(bW,{placeholder:"Skriv inn Beskrivelse",...n,className:"bg-white rounded-[8px] border text-black "+(i.error?"border-red":"border-gray1"),type:"text",onChange:e=>{var t,r;(null===e||void 0===e||null===(t=e.target)||void 0===t||null===(r=t.value)||void 0===r?void 0:r.trim().split(/\s+/)).length<=20&&(n.onChange(e.target.value),s((t=>{const r=[...t];return r[a]={...r[a],Beskrivelse:e.target.value},r})))}}),(0,V.jsxs)("div",{className:"flex justify-end text-xs font-medium mt-[6px] text-black",children:[o,"/",20]})]})}),(0,V.jsx)(cW,{children:null===(r=i.error)||void 0===r?void 0:r.message})]})}},a),(0,V.jsxs)("div",{className:"mt-2 border-b border-gray2 flex items-center gap-4 md:gap-6 h-[40px] md:h-[48px] mb-4 md:mb-8",children:[(null===C||void 0===C?void 0:C.length)>0&&(0,V.jsx)("div",{className:"flex items-center gap-2 md:gap-4 overflow-x-auto overflowXAuto",children:null===C||void 0===C?void 0:C.map(((e,t)=>(0,V.jsxs)("div",{draggable:!0,onDragStart:()=>L(t),onDragOver:e=>{e.preventDefault(),$(t)},onDrop:()=>{if(null===R||null===F||R===F)return;const e=[...f.getValues(`hovedkategorinavn.${a}.Kategorinavn`)],t=e[R];e.splice(R,1),e.splice(F,0,t),f.setValue(`hovedkategorinavn.${a}.Kategorinavn`,e,{shouldValidate:!0}),s((t=>{const r=[...t];return r[a].Kategorinavn=e,r}))},className:"cursor-pointer font-semibold gap-1 h-full flex items-center border-b-[3px] text-darkBlack py-3 px-3 pr-6 md:pr-5 md:px-5 whitespace-nowrap "+(o===t?"border-primary font-semibold":"border-transparent"),onClick:()=>l(t),children:[(0,V.jsx)("span",{className:"text-xs md:text-sm",children:e.navn}),(0,V.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),D(t),b(!0)},children:(0,V.jsx)(GT,{className:"w-4 md:w-5 h-4 md:h-5 text-primary"})}),(0,V.jsx)("img",{src:a4,alt:"close",onClick:e=>{e.preventDefault(),e.stopPropagation();const r=C.filter(((e,r)=>r!==t));s((e=>{const t=[...e];return t[a]={...t[a],Kategorinavn:r},t})),f.setValue(`hovedkategorinavn.${a}.Kategorinavn`,r,{shouldValidate:!0})}})]},t)))}),(0,V.jsxs)("div",{className:"text-purple font-semibold text-xs md:text-sm flex items-center gap-1 cursor-pointer h-full whitespace-nowrap",onClick:()=>b(!0),children:[(0,V.jsx)(cA,{className:"w-4 h-5 md:w-6 md:h-6"}),"Legg til kategori"]})]}),(null===C||void 0===C?void 0:C.length)>0&&(0,V.jsxs)("div",{className:"flex flex-col gap-4 md:gap-8",children:[null===m||void 0===m?void 0:m.map(((e,t)=>{const r=f.watch(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.Hovedbilde`);return(0,V.jsx)("div",{className:"flex flex-col gap-4 md:gap-8 cursor-move",draggable:!0,onDragStart:()=>T(t),onDragOver:e=>{e.preventDefault(),A(t)},onDrop:()=>(()=>{if(null===N||null===P||N===P)return;const e=[...m],t=e[N];e.splice(N,1),e.splice(P,0,t),f.setValue(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter`,e),T(null),A(null)})(),children:(0,V.jsxs)("div",{className:"flex flex-col gap-4 md:gap-[18px] p-3 md:p-4 rounded-lg bg-white",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:[(0,V.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 justify-between",children:[(0,V.jsx)("h4",{className:"text-darkBlack text-sm md:text-base font-semibold",children:"Produktdetaljer"}),(0,V.jsxs)("div",{className:"flex text-sm md:text-base items-center gap-1 font-medium "+(1===m.length?"text-gray cursor-not-allowed text-opacity-55":"text-purple cursor-pointer"),onClick:()=>{m.length>1&&(e=>{m.length>1&&x(e)})(t)},children:[(0,V.jsx)(B_,{className:"h-4 w-4 md:h-6 md:w-6"})," Slett produkt"]})]}),(0,V.jsxs)("div",{className:"flex flex-col md:grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:f.control,name:`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.Produktnavn`,render:e=>{let{field:r,fieldState:n}=e;const i=f.getValues(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.Produktnavn`)||"";return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(n.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Produktnavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Produktnavn",...r,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==n&&void 0!==n&&n.error?"border-red":"border-gray1"} `,type:"text",value:null!==i&&void 0!==i?i:""})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"row-span-2",children:(0,V.jsx)(nW,{control:f.control,name:`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.Hovedbilde`,render:()=>{const e=`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.Hovedbilde`,r=f.watch(e)||[],n=async t=>{if(t){let n=[...r||[]];for(let r=0;r<t.length;r++){const i=t[r];if(i.size>2097152){He.error("Image size must be less than 2MB.",{position:"top-right"});continue}const a="images",s=`${(new Date).getTime()}_${null===i||void 0===i?void 0:i.name}`,o=h_(v_,`${a}/${s}`),l=await c_(o,i),c=await d_(l.ref);n.push(c),f.setValue(e,n),f.clearErrors(e)}}};return(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:S,onClick:k,onDrop:e=>{e.preventDefault(),n(e.dataTransfer.files)},children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"SVG, PNG, JPG or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:_,className:"hidden",multiple:!0,accept:"image/png, image/jpeg, image/svg+xml, image/gif",onChange:e=>n(e.target.files)})]})})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:f.control,name:`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.pris`,render:e=>{let{field:r,fieldState:n}=e;const i=f.getValues(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.pris`);return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-[6px]",children:[(0,V.jsx)("p",{className:(n.error?"text-red":"text-black")+" text-sm font-medium",children:"Pris fra"}),(0,V.jsxs)("div",{className:"flex items-center gap-3 text-black text-sm font-medium",children:["inkl. i tilbud",(0,V.jsxs)("div",{className:"toggle-container",children:[(0,V.jsx)("input",{type:"checkbox",id:`toggleSwitch.${a}.Kategorinavn.${o}.produkter.${t}.IncludingOffer`,className:"toggle-input",checked:f.watch(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.IncludingOffer`)||!1,name:`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.IncludingOffer`,onChange:e=>{const r=e.target.checked;f.setValue(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.IncludingOffer`,r),r?f.setValue(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.pris`,null):f.setValue(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.pris`,"")}}),(0,V.jsx)("label",{htmlFor:`toggleSwitch.${a}.Kategorinavn.${o}.produkter.${t}.IncludingOffer`,className:"toggle-label"})]})]})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Pris fra",...r,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==n&&void 0!==n&&n.error?"border-red":"border-gray1"} `,inputMode:"numeric",disabled:f.watch(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.IncludingOffer`),type:"text",onChange:e=>{let{target:{value:n}}=e,i=n.replace(/[^\d-]/g,"").replace(/(?!^)-/g,"");const s=i.startsWith("-"),l=i.replace(/-/g,"");let c="";l?(c=new Intl.NumberFormat("no-NO").format(Number(l)),s&&(c="-"+c)):c=s?"-":"",r.onChange({target:{name:`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.pris`,value:c}})},value:null===i?"-":i})})}),(0,V.jsx)(cW,{})]})}})})]}),(0,V.jsx)("div",{children:r&&(0,V.jsx)("div",{className:"flex items-center gap-3 md:gap-5",children:null===r||void 0===r?void 0:r.map(((e,n)=>(0,V.jsxs)("div",{className:"relative h-[140px] w-[140px]",draggable:!0,onDragStart:()=>I(n),onDragOver:e=>e.preventDefault(),onDrop:()=>{if(null===M||M===n)return;const e=[...r],i=e[M];e.splice(M,1),e.splice(n,0,i),f.setValue(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.Hovedbilde`,e),I(null)},children:[(0,V.jsx)("img",{src:e,alt:"logo",className:"object-cover h-full w-full rounded-lg"}),(0,V.jsx)("div",{className:"absolute top-2 right-2 bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer",onClick:()=>{const e=r.filter(((e,t)=>t!==n));f.setValue(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.Hovedbilde`,e)},children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})]},n)))})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:f.control,name:`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.Produktbeskrivelse`,render:e=>{let{field:r,fieldState:n}=e;const i=f.getValues(`hovedkategorinavn.${a}.Kategorinavn.${o}.produkter.${t}.Produktbeskrivelse`)||"";return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(n.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Produktbeskrivelse"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(J3,{placeholder:"Skriv inn Produktbeskrivelse",...r,className:`h-[130px] bg-white rounded-[8px] border text-black\n                                  ${null!==n&&void 0!==n&&n.error?"border-red":"border-gray1"} `,value:i})})}),(0,V.jsx)(cW,{})]})}})})]})},t)})),(0,V.jsxs)("div",{className:"text-purple font-semibold text-base flex items-center gap-1 cursor-pointer h-full",onClick:()=>(e=>{v(e+1,{Produktnavn:"",Hovedbilde:[],pris:"",IncludingOffer:!1,Produktbeskrivelse:""})})(g.length-1),children:[(0,V.jsx)(cA,{}),"Legg til annet produkt"]})]})]}),(0,V.jsxs)("div",{className:"flex justify-between w-full gap-2.5 md:gap-5 items-center fixed bottom-0 bg-white z-50 border-t border-gray2 p-3 md:p-4 left-0",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,V.jsx)("span",{className:"text-gray text-sm md:text-base mb-4",children:"Totalpris"}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("h3",{className:"mb-[2px] text-darkBlack font-semibold text-lg md:text-xl desktop:text-2xl",children:["kr ",E]}),(0,V.jsx)("h6",{className:"text-purple text-xs md:text-sm font-semibold",children:"Se oppstilling"})]})]}),(0,V.jsxs)("div",{className:"flex items-center gap-3 md:gap-5",children:[(0,V.jsx)("div",{onClick:()=>{r(0)},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-lightPurple bg-lightPurple text-purple text-sm rounded-[8px] h-[40px] font-medium relative px-10 py-2 flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-10 py-2 flex items-center gap-2",type:"submit"})]})]})]})}),y&&(0,V.jsx)(sA,{onClose:()=>{b(!y)},isOpen:!0,children:(0,V.jsxs)("div",{className:"bg-white relative rounded-[12px] p-6 md:m-0 w-full sm:w-[518px]",children:[(0,V.jsx)("h4",{className:"mb-[20px] text-darkBlack font-medium text-xl",children:null!==O?"Rediger underkategori":"Legg til ny underkategori"}),(0,V.jsx)(o4,{onClose:()=>{b(!1),D(null)},formData:f,activeTabData:a,setCategory:s,editIndex:O,editData:null!==O&&C[O]})]})})]})},f4=kQ.object({Hovedkategorinavn:kQ.string().min(1,{message:"Hovedkategorinavn m\xe5 best\xe5 av minst 2 tegn."}),isSelected:kQ.boolean().optional()}),m4=e=>{var r,n;let{onClose:i,setCategory:a,editData:s}=e;const o=AG({resolver:FG(f4)});(0,t.useEffect)((()=>{var e,t,r,n;null!==s&&void 0!==s&&null!==(e=s.data)&&void 0!==e&&e.navn&&o.setValue("Hovedkategorinavn",null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.navn);null!==s&&void 0!==s&&null!==(t=s.data)&&void 0!==t&&t.isSelected&&o.setValue("isSelected",null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.isSelected)}),[o,null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.navn,null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.isSelected]);return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...o,children:(0,V.jsxs)("form",{onSubmit:o.handleSubmit((async e=>{i(),a(s?t=>t.map(((t,r)=>{var n;return r===s.index?{...t,navn:e.Hovedkategorinavn,isSelected:null!==(n=e.isSelected)&&void 0!==n&&n}:t})):t=>{var r;return[...t,{navn:e.Hovedkategorinavn,Beskrivelse:"",Kategorinavn:[],isSelected:null!==(r=e.isSelected)&&void 0!==r&&r}]})})),className:"relative w-full",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:o.control,name:"Hovedkategorinavn",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Hovedkategorinavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Hovedkategorinavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:o.control,name:"isSelected",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"relative flex items-center gap-2 mt-3",children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] accent-primary border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4`,type:"radio",onChange:e=>{const t=e.target.checked;t&&o.setValue("isSelected",t)},checked:t.value}),(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" text-sm font-medium",children:"Is mandatory"})]})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center left-0 mt-8",children:[(0,V.jsx)("div",{onClick:()=>{o.reset(),i()},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-lightPurple bg-lightPurple text-purple text-sm rounded-[8px] h-[40px] font-medium relative px-12 py-2 flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-12 py-2 flex items-center gap-2",type:"submit"})]})]})})})};const g4=r.p+"static/media/Ic_trash.470840ab3fb61eb8b0c47fe0899784ba.svg",v4=e=>{var r;let{setActiveTab:n}=e;const[i,a]=(0,t.useState)(0),[s,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),f=Gr().pathname.split("/"),m=f.length>2?f[2]:null;(0,t.useEffect)((()=>{if(!m)return;(async()=>{const e=await y_(m);e&&e.Huskonfigurator&&c(e.Huskonfigurator.hovedkategorinavn)})()}),[m]);const g=()=>{s?(o(!1),p(null)):o(!0)},v=e=>{e.preventDefault()};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("h3",{className:"text-darkBlack text-lg md:text-xl desktop:text-2xl font-semibold mb-4 md:mb-8 px-4 md:px-6",children:"Her konfigurerer du husmodellen"}),(0,V.jsxs)("div",{className:"flex flex-col desktop:flex-row gap-4 lg:gap-6 px-4 md:px-6 relative",children:[(0,V.jsxs)("div",{className:"w-full desktop:w-[20%] flex desktop:flex-col bg-[#F9FAFB] p-2 md:p-3 pb-0 rounded-lg gap-3 h-full desktop:max-h-[690px] overflow-y-auto overFlowAutoY sticky top-[80px] z-40",children:[l.map(((e,t)=>(0,V.jsxs)("div",{draggable:!0,onDragStart:()=>(e=>{d(e)})(t),onDragOver:v,onDrop:()=>(e=>{if(null===u||u===e)return;const t=[...l],r=t[u];t.splice(u,1),t.splice(e,0,r),c(t),d(null)})(t),className:"bg-white cursor-pointer rounded-lg flex items-center justify-between gap-2 px-3 md:px-5 "+(i===t?"border-2 border-primary bg-lightPurple rounded-t-[12px]":"border border-gray2"),onClick:()=>a(t),children:[(0,V.jsxs)("div",{className:"text-xs md:text-sm text-darkBlack py-1.5 md:py-3 flex items-center gap-1 md:gap-2 font-semibold",children:[(0,V.jsx)("span",{className:"w-5 h-5 rounded-full bg-lightPurple flex items-center justify-center text-darkBlack font-semibold text-[10px] md:text-xs",children:t+1}),e.navn]}),(0,V.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,V.jsx)("div",{onClick:r=>{r.preventDefault(),r.stopPropagation(),p({index:t,data:e}),o(!0)},children:(0,V.jsx)(GT,{className:"w-4 h-4 md:w-5 md:h-5 text-primary"})}),(0,V.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),c((e=>e.filter(((e,r)=>r!==t)))),a(0)},className:"w-4 h-4 md:w-5 md:h-5",children:(0,V.jsx)("img",{src:g4,alt:"delete",className:"w-full h-full"})})]})]},t))),(0,V.jsxs)("div",{className:"desktop:sticky bottom-0 desktop:mb-3 bg-purple border-gray2 rounded-lg p-1.5 md:p-3 flex items-center gap-2 text-white font-semibold text-xs md:text-sm cursor-pointer",onClick:()=>o(!0),children:[(0,V.jsx)("div",{className:"w-5 h-5",children:(0,V.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-darkBlack text-xs font-semibold bg-white",children:"+"})}),"Legg til nytt rom/kategori"]})]}),l.length>0?(0,V.jsx)("div",{className:"w-full desktop:w-[80%] mb-[130px] relative",children:(0,V.jsx)(p4,{setActiveTab:n,labelName:(null===(r=l[i])||void 0===r?void 0:r.navn)||"",Category:l,activeTabData:i,setCategory:c})}):(0,V.jsxs)("div",{className:"w-full desktop:w-[80%] relative z-40",children:[(0,V.jsx)("div",{className:"text-purple font-semibold text-base cursor-pointer flex justify-end w-full",onClick:()=>n(2),children:"Hopp over steget"}),(0,V.jsx)("div",{className:"flex justify-end w-full gap-5 items-center fixed bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:(0,V.jsx)("div",{onClick:()=>{n(0)},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-lightPurple bg-lightPurple text-purple text-sm rounded-[8px] h-[40px] font-medium relative px-10 py-2 flex items-center gap-2"})})})]})]}),s&&(0,V.jsx)(sA,{onClose:g,isOpen:!0,children:(0,V.jsxs)("div",{className:"bg-white relative rounded-[12px] p-6 md:m-0 w-full sm:w-[518px]",children:[(0,V.jsx)("h4",{className:"mb-[20px] text-darkBlack font-medium text-xl",children:"Legg til ny underkategori"}),(0,V.jsx)(m4,{onClose:g,setCategory:c,editData:h})]})})]})},x4=kQ.object({byggkostnaderID:kQ.string(),Headline:kQ.string().min(1,{message:"Headline m\xe5 best\xe5 av minst 2 tegn."}),MerInformasjon:kQ.string().min(1,{message:"MerInformasjon m\xe5 best\xe5 av minst 2 tegn."}),pris:kQ.string().min(1,{message:"Pris m\xe5 best\xe5 av minst 1 tegn."}).nullable(),IncludingOffer:kQ.boolean().optional()}),y4=e=>{let{product:t,formValue:r}=e;const n=AG({resolver:FG(x4),defaultValues:{byggkostnaderID:"",Headline:"",MerInformasjon:"",pris:"",IncludingOffer:!1}}),i=async(e,t)=>{t.preventDefault(),e.byggkostnaderID=(new Date).toISOString();const n=r.getValues("Byggekostnader")||[];n.push(e);const i=n.filter((e=>e.byggkostnaderID));i.length&&r.setValue("Byggekostnader",i,{shouldValidate:!0,shouldDirty:!0})};return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...n,children:(0,V.jsx)("form",{onSubmit:n.handleSubmit(i),className:"relative",children:(0,V.jsxs)("div",{className:"flex flex-col gap-[18px]",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{name:"Headline",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Heading"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Heading",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"MerInformasjon",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Mer informasjon"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Mer informasjon",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-[6px]",children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" text-sm font-medium",children:"Pris fra"}),(0,V.jsxs)("div",{className:"flex items-center gap-3 text-black text-sm font-medium",children:["inkl. i tilbud",(0,V.jsxs)("div",{className:"toggle-container",children:[(0,V.jsx)("input",{type:"checkbox",id:"toggleSwitch1",className:"toggle-input",checked:n.watch("IncludingOffer")||!1,name:"IncludingOffer",onChange:e=>{const t=e.target.checked;n.setValue("IncludingOffer",t),t?n.setValue("pris",null):n.setValue("pris","")}}),(0,V.jsx)("label",{htmlFor:"toggleSwitch1",className:"toggle-label"})]})]})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Pris fra",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]}),(0,V.jsxs)("div",{className:"flex justify-end items-center gap-4",children:[(0,V.jsx)("div",{onClick:()=>n.reset(),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:n.handleSubmit(i),children:(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})})})},b4=kQ.object({TomtekostID:kQ.string(),Headline:kQ.string().min(1,{message:"Headline m\xe5 best\xe5 av minst 2 tegn."}),MerInformasjon:kQ.string().min(1,{message:"MerInformasjon m\xe5 best\xe5 av minst 2 tegn."}),pris:kQ.string().min(1,{message:"Pris m\xe5 best\xe5 av minst 1 tegn."}).nullable(),IncludingOffer:kQ.boolean().optional()}),w4=e=>{let{product:t,formValue:r}=e;const n=AG({resolver:FG(b4),defaultValues:{TomtekostID:"",Headline:"",MerInformasjon:"",pris:"",IncludingOffer:!1}}),i=async(e,t)=>{t.preventDefault(),e.TomtekostID=(new Date).toISOString();const n=r.getValues("Tomtekost")||[];n.push(e);const i=n.filter((e=>e.TomtekostID));i.length&&r.setValue("Tomtekost",i,{shouldValidate:!0,shouldDirty:!0})};return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...n,children:(0,V.jsx)("form",{onSubmit:n.handleSubmit(i),className:"relative",children:(0,V.jsxs)("div",{className:"flex flex-col gap-[18px]",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{name:"Headline",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Heading"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Heading",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"MerInformasjon",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Mer informasjon"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Mer informasjon",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-[6px]",children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" text-sm font-medium",children:"Pris fra"}),(0,V.jsxs)("div",{className:"flex items-center gap-3 text-black text-sm font-medium",children:["inkl. i tilbud",(0,V.jsxs)("div",{className:"toggle-container",children:[(0,V.jsx)("input",{type:"checkbox",id:"toggleTomtekSwitch1",className:"toggle-input",checked:n.watch("IncludingOffer")||!1,name:"IncludingOffer",onChange:e=>{const t=e.target.checked;n.setValue("IncludingOffer",t),t?n.setValue("pris",null):n.setValue("pris","")}}),(0,V.jsx)("label",{htmlFor:"toggleTomtekSwitch1",className:"toggle-label"})]})]})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Pris fra",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]}),(0,V.jsxs)("div",{className:"flex justify-end items-center gap-4",children:[(0,V.jsx)("div",{onClick:()=>n.reset(),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:n.handleSubmit(i),children:(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})})})},_4=kQ.object({ByggekostnaderInfo:kQ.string().min(1,{message:"Byggekostnader Informasjon m\xe5 best\xe5 av minst 2 tegn."}),Byggekostnader:kQ.array(kQ.object({byggkostnaderID:kQ.string(),Headline:kQ.string().min(1,{message:"Headline m\xe5 best\xe5 av minst 2 tegn."}),MerInformasjon:kQ.string().min(1,{message:"MerInformasjon m\xe5 best\xe5 av minst 2 tegn."}),pris:kQ.string().min(1,{message:"Pris m\xe5 best\xe5 av minst 1 tegn."}).nullable(),IncludingOffer:kQ.boolean().optional()})).min(1,"Minst ett produkt er p\xe5krevd."),tomtekostnaderInfo:kQ.string().min(1,{message:"Tomtekostnader Informasjon m\xe5 best\xe5 av minst 2 tegn."}),Tomtekost:kQ.array(kQ.object({TomtekostID:kQ.string(),Headline:kQ.string().min(1,{message:"Headline m\xe5 best\xe5 av minst 2 tegn."}),MerInformasjon:kQ.string().min(1,{message:"MerInformasjon m\xe5 best\xe5 av minst 2 tegn."}),pris:kQ.string().min(1,{message:"Pris m\xe5 best\xe5 av minst 1 tegn."}).nullable(),IncludingOffer:kQ.boolean().optional()})).min(1,"Minst ett produkt er p\xe5krevd.")}),k4=e=>{let{setActiveTab:r}=e;const n=AG({resolver:FG(_4),defaultValues:{ByggekostnaderInfo:"",Byggekostnader:[{byggkostnaderID:"",Headline:"",MerInformasjon:"",pris:"",IncludingOffer:!1}],tomtekostnaderInfo:"",Tomtekost:[{TomtekostID:"",Headline:"",MerInformasjon:"",pris:"",IncludingOffer:!1}]}}),{fields:i,append:a,remove:s}=fG({control:n.control,name:"Byggekostnader"}),{fields:o,append:l,remove:c}=fG({control:n.control,name:"Tomtekost"}),[u,d]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&d(e)})()}),[]);const h=Gr().pathname.split("/"),p=h.length>2?h[2]:null,f=Kr();(0,t.useEffect)((()=>{if(!p)return;(async()=>{const e=await y_(p);e&&e.Prisliste&&Object.entries(e.Prisliste).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&n.setValue(t,r)}))})()}),[n,p]);const m=e=>{const t=document.getElementById(e);if(t){const e=170,r=t.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:r-e,behavior:"smooth"})}},[g,v]=(0,t.useState)("byggekostnader");(0,t.useEffect)((()=>{const e=()=>{let e=g,t=1/0;["byggekostnader","tomkostnader"].forEach((r=>{const n=document.getElementById(r);if(n){const i=n.getBoundingClientRect(),a=Math.abs(i.top-170);a<t&&(t=a,e=r)}})),e!==g&&v(e)};return window.addEventListener("wheel",e),()=>{window.removeEventListener("wheel",e)}}),[g]);const x=n.watch("Byggekostnader"),y=x?x.reduce(((e,t)=>{var r;const n=null===(r=t.pris)||void 0===r?void 0:r.replace(/\s/g,"").replace(/\./g,"").replace(",",".");return e+(n?parseFloat(n):0)}),0):0,b=n.watch("Tomtekost"),w=b?b.reduce(((e,t)=>{var r;const n=null===(r=t.pris)||void 0===r?void 0:r.replace(/\s/g,"").replace(/\./g,"").replace(",",".");return e+(n?parseFloat(n):0)}),0):0,[_,k]=(0,t.useState)(null),[S,j]=(0,t.useState)(null);return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...n,children:(0,V.jsxs)("form",{onSubmit:n.handleSubmit((async e=>{try{const t=cm(g_,"house_model",p),r={...e,id:p},n=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");await mg(t,{Prisliste:r,updatedAt:n(new Date),updateDataBy:{email:null===u||void 0===u?void 0:u.email,photo:null===u||void 0===u?void 0:u.photo,name:null!==u&&void 0!==u&&u.f_name?`${null===u||void 0===u?void 0:u.f_name} ${null===u||void 0===u?void 0:u.l_name}`:null===u||void 0===u?void 0:u.name}}),He.success("Lagret",{position:"top-right"}),f("/Husmodeller")}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("div",{className:"w-full bg-white sticky top-[70px] md:top-[80px] shadow-shadow1 py-2 z-50",children:(0,V.jsxs)("div",{className:"bg-lightPurple flex items-center gap-2 rounded-lg p-[6px] mx-4 md:mx-6 w-max",children:[(0,V.jsx)("div",{className:`cursor-pointer px-5 py-2 text-sm rounded-lg ${"byggekostnader"===g&&"font-semibold bg-white shadow-shadow2"}`,onClick:()=>{m("byggekostnader"),v("byggekostnader")},children:"Byggekostnader"}),(0,V.jsx)("div",{className:`cursor-pointer px-5 py-2 text-sm rounded-lg ${"tomkostnader"===g&&"font-semibold bg-white shadow-shadow2"}`,onClick:()=>{m("tomkostnader"),v("tomkostnader")},children:"Tomkostnader"})]})}),(0,V.jsx)("div",{className:"p-4 md:p-6 mb-10 md:mb-14 desktop:mb-20 relative",children:(0,V.jsxs)("div",{className:"flex flex-col gap-5 desktop:gap-8",children:[(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-5 desktop:gap-8",id:"byggekostnader",children:[(0,V.jsxs)("div",{className:"w-full lg:w-[30%] desktop:w-[20%]",children:[(0,V.jsx)("h5",{className:"text-black text-sm font-medium",children:"Byggekostnader"}),(0,V.jsx)("p",{className:"text-gray text-sm whitespace-nowrap truncate",children:"Update photos and House details."})]}),(0,V.jsxs)("div",{className:"w-full lg:w-[70%] desktop:w-[80%] shadow-shadow2 px-4 lg:px-6 py-4 md:py-5 rounded-lg flex flex-col gap-6",children:[(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsx)("h5",{className:"text-black font-semibold text-base",children:"Sum byggkostnader"}),(0,V.jsxs)("div",{className:"flex flex-col md:grid grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"ByggekostnaderInfo",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Mer informasjon"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Mer informasjon",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"text-darkBlack text-right font-bold text-lg md:text-xl desktop:text-2xl",children:["kr ",y]})]})]}),(0,V.jsx)("div",{className:"border-t border-gray2"}),(0,V.jsxs)("div",{className:"flex flex-col gap-5 desktop:gap-8",children:[i.map(((e,t)=>(0,V.jsx)("div",{draggable:!0,onDragStart:()=>(e=>{j(e)})(t),onDragEnter:()=>(e=>{if(null===S||S===e)return;const t=[...n.getValues("Tomtekost")],r=t[S];t.splice(S,1),t.splice(e,0,r),j(e),n.setValue("Tomtekost",t)})(t),onDragOver:e=>e.preventDefault(),className:"transition-shadow duration-200 border border-transparent hover:border-gray2 rounded-lg p-2",children:e.byggkostnaderID?(0,V.jsxs)("div",{className:"flex flex-col gap-4 md:gap-[18px]",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3 justify-between",children:[(0,V.jsx)("div",{className:"w-full",children:(0,V.jsx)(nW,{control:n.control,name:`Byggekostnader.${t}.Headline`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Heading"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Heading",...t,className:`bg-white rounded-[8px] border text-black\n                                        ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"w-max text-sm md:text-base whitespace-nowrap flex items-center gap-1 font-medium "+(1===i.length?"text-gray cursor-not-allowed text-opacity-55":"text-purple cursor-pointer"),onClick:()=>{i.length>1&&(e=>{i.length>1&&s(e)})(t)},children:[(0,V.jsx)(B_,{className:"w-4 h-4 md:w-6 md:h-6"})," Slett produkt"]})]}),(0,V.jsxs)("div",{className:"flex flex-col md:grid grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:`Byggekostnader.${t}.MerInformasjon`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Mer informasjon"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Mer informasjon",...t,className:`bg-white rounded-[8px] border text-black\n                                        ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:`Byggekostnader.${t}.pris`,render:r=>{let{field:i,fieldState:a}=r;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-[6px]",children:[(0,V.jsx)("p",{className:(a.error?"text-red":"text-black")+" text-sm font-medium",children:"Pris fra"}),(0,V.jsxs)("div",{className:"flex items-center gap-3 text-black text-sm font-medium",children:["inkl. i tilbud",(0,V.jsxs)("div",{className:"toggle-container",children:[(0,V.jsx)("input",{type:"checkbox",id:`toggleSwitch${e.id}`,className:"toggle-input",checked:n.watch(`Byggekostnader.${t}.IncludingOffer`)||!1,name:`Byggekostnader.${t}.IncludingOffer`,onChange:e=>{const r=e.target.checked;n.setValue(`Byggekostnader.${t}.IncludingOffer`,r),r?n.setValue(`Byggekostnader.${t}.pris`,null):n.setValue(`Byggekostnader.${t}.pris`,"")}}),(0,V.jsx)("label",{htmlFor:`toggleSwitch${e.id}`,className:"toggle-label"})]})]})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Pris fra",...i,className:`bg-white rounded-[8px] border text-black\n                                        ${null!==a&&void 0!==a&&a.error?"border-red":"border-gray1"} `,inputMode:"numeric",disabled:n.watch(`Byggekostnader.${t}.IncludingOffer`),type:"text",onChange:e=>{let{target:{value:r}}=e;return i.onChange({target:{name:`Byggekostnader.${t}.pris`,value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===i.value?"-":i.value})})}),(0,V.jsx)(cW,{})]})}})})]}),t===i.length-1&&(0,V.jsx)("div",{className:"border-t border-gray2"})]}):(0,V.jsx)(y4,{product:e,formValue:n})},e.id))),(0,V.jsx)("div",{className:"flex justify-end",children:(0,V.jsx)("div",{className:"text-white rounded-lg w-max bg-purple font-medium justify-center text-base flex items-center gap-1 cursor-pointer h-full px-4 py-[10px]",onClick:()=>{a({byggkostnaderID:"",Headline:"",MerInformasjon:"",pris:"",IncludingOffer:!1})},children:"+ Legg til ny byggekostnad"})})]})]})]}),(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-5 desktop:gap-8",id:"tomkostnader",children:[(0,V.jsxs)("div",{className:"w-full lg:w-[30%] desktop:w-[20%]",children:[(0,V.jsx)("h5",{className:"text-black text-sm font-medium",children:"Tomkostnader"}),(0,V.jsx)("p",{className:"text-gray text-sm whitespace-nowrap truncate",children:"Update photos and House details."})]}),(0,V.jsxs)("div",{className:"w-full lg:w-[70%] desktop:w-[80%] shadow-shadow2 px-4 lg:px-6 py-4 md:py-5 rounded-lg flex flex-col gap-6",children:[(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsx)("h5",{className:"text-black font-semibold text-base",children:"Sum tomtekostnader"}),(0,V.jsxs)("div",{className:"flex flex-col md:grid grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"tomtekostnaderInfo",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Mer informasjon"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Mer informasjon",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"text-darkBlack text-right font-bold text-lg md:text-xl desktop:text-2xl",children:["kr ",w]})]})]}),(0,V.jsx)("div",{className:"border-t border-gray2"}),(0,V.jsxs)("div",{className:"flex flex-col gap-5 desktop:gap-8",children:[o.map(((e,t)=>(0,V.jsx)("div",{draggable:!0,onDragStart:()=>(e=>{k(e)})(t),onDragEnter:()=>(e=>{if(null===_||_===e)return;const t=[...n.getValues("Byggekostnader")],r=t[_];t.splice(_,1),t.splice(e,0,r),k(e),n.setValue("Byggekostnader",t)})(t),onDragOver:e=>e.preventDefault(),className:"transition-shadow duration-200 border border-transparent hover:border-gray2 rounded-lg p-2",children:e.TomtekostID?(0,V.jsxs)("div",{className:"flex flex-col gap-4 md:gap-[18px]",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3 justify-between",children:[(0,V.jsx)("div",{className:"w-full",children:(0,V.jsx)(nW,{control:n.control,name:`Tomtekost.${t}.Headline`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Heading"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Heading",...t,className:`bg-white rounded-[8px] border text-black\n                                        ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"flex text-sm md:text-base whitespace-nowrap w-max items-center gap-1 font-medium "+(1===o.length?"text-gray cursor-not-allowed text-opacity-55":"text-purple cursor-pointer"),onClick:()=>{o.length>1&&(e=>{o.length>1&&c(e)})(t)},children:[(0,V.jsx)(B_,{className:"w-4 h-4 md:w-6 md:h-6"})," Slett produkt"]})]}),(0,V.jsxs)("div",{className:"flex flex-col md:grid grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:`Tomtekost.${t}.MerInformasjon`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Mer informasjon"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Mer informasjon",...t,className:`bg-white rounded-[8px] border text-black\n                                        ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:`Tomtekost.${t}.pris`,render:r=>{let{field:i,fieldState:a}=r;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-[6px]",children:[(0,V.jsx)("p",{className:(a.error?"text-red":"text-black")+" text-sm font-medium",children:"Pris fra"}),(0,V.jsxs)("div",{className:"flex items-center gap-3 text-black text-sm font-medium",children:["inkl. i tilbud",(0,V.jsxs)("div",{className:"toggle-container",children:[(0,V.jsx)("input",{type:"checkbox",id:`toggleSwitch${e.id}`,className:"toggle-input",checked:n.watch(`Tomtekost.${t}.IncludingOffer`)||!1,name:`Tomtekost.${t}.IncludingOffer`,onChange:e=>{const r=e.target.checked;n.setValue(`Tomtekost.${t}.IncludingOffer`,r),r?n.setValue(`Tomtekost.${t}.pris`,null):n.setValue(`Tomtekost.${t}.pris`,"")}}),(0,V.jsx)("label",{htmlFor:`toggleSwitch${e.id}`,className:"toggle-label"})]})]})]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Pris fra",...i,className:`bg-white rounded-[8px] border text-black\n                                        ${null!==a&&void 0!==a&&a.error?"border-red":"border-gray1"} `,inputMode:"numeric",disabled:n.watch(`Tomtekost.${t}.IncludingOffer`),type:"text",onChange:e=>{let{target:{value:r}}=e;return i.onChange({target:{name:`Tomtekost.${t}.pris`,value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===i.value?"-":i.value})})}),(0,V.jsx)(cW,{})]})}})})]}),t===o.length-1&&(0,V.jsx)("div",{className:"border-t border-gray2"})]}):(0,V.jsx)(w4,{product:e,formValue:n})},e.id))),(0,V.jsx)("div",{className:"flex justify-end",children:(0,V.jsx)("div",{className:"text-white rounded-lg w-max bg-purple font-medium justify-center text-base flex items-center gap-1 cursor-pointer h-full px-4 py-[10px]",onClick:()=>{l({TomtekostID:"",Headline:"",MerInformasjon:"",pris:"",IncludingOffer:!1})},children:"+ Legg til ny tomtekost"})})]})]})]})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)("div",{onClick:()=>r(1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})})})},S4=()=>{const[e,r]=(0,t.useState)(0),n=Gr(),i=n.pathname.split("/"),a=i.length>2?i[2]:null,[s,o]=(0,t.useState)(null);return(0,t.useEffect)((()=>{if(!a)return;a&&(async()=>{const e=await y_(a);e&&e.Husdetaljer&&o(null===e||void 0===e?void 0:e.Husdetaljer)})()}),[a]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"py-4 px-4 md:px-6",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3 mb-3 md:mb-6",children:[(0,V.jsx)(ti,{to:"/Husmodeller",className:"text-gray text-xs md:text-sm font-medium",children:"Husmodeller"}),(0,V.jsx)(KV,{className:"text-gray2 w-4 h-4"}),(0,V.jsx)("span",{className:"text-primary text-xs md:text-sm font-medium",children:"Endre husmodell"})]}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-3 md:mb-5",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-lg md:text-xl desktop:text-2xl",children:"Endre husmodell"}),(0,V.jsxs)("div",{className:"flex gap-1 flex-wrap sm:gap-3 items-center",children:[(0,V.jsx)("p",{className:"text-gray text-sm md:text-base desktop:text-lg",children:"Sum antatte anleggskostnader inkl. mva."}),(0,V.jsx)("h1",{className:"text-darkBlack font-bold text-lg md:text-xl desktop:text-2xl",children:s&&null!==s&&void 0!==s&&s.pris?S_(null===s||void 0===s?void 0:s.pris):"kr 0"})]})]}),s&&(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 mb-6",children:[(0,V.jsx)("img",{src:null===s||void 0===s?void 0:s.photo,alt:"house",className:"w-full sm:w-[160px] rounded-lg"}),(0,V.jsxs)("div",{children:[(0,V.jsx)("h2",{className:"text-darkBlack font-semibold text-base md:text-lg desktop:text-xl",children:null===s||void 0===s?void 0:s.husmodell_name}),(0,V.jsx)("p",{className:"text-gray desktop:w-[900px] text-sm md:text-base",children:null===s||void 0===s?void 0:s.Hustittel})]})]})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{className:"border-b border-gray2 flex items-center justify-between gap-2 mb-4 md:mb-6 px-4 md:px-6",children:(0,V.jsx)(B3,{tabs:[{label:"Husdetaljer"},{label:"Huskonfigurator"},{label:"Prisliste"}],activeTab:e,...n.pathname.startsWith("/edit-husmodell")?{setActiveTab:r}:{}})}),0===e&&(0,V.jsx)(i4,{setActiveTab:r}),1===e&&(0,V.jsx)(v4,{setActiveTab:r}),2===e&&(0,V.jsx)(k4,{setActiveTab:r})]})]})},j4=()=>{var e;const[r,n]=(0,t.useState)(1),[i,a]=(0,t.useState)([]),[s,o]=(0,t.useState)(""),l=Kr(),[c,u]=(0,t.useState)(!0),d=(0,t.useMemo)((()=>i.filter((e=>{var t,r,n,i,a,o;const l=null===(t=e.CadastreDataFromApi)||void 0===t||null===(r=t.presentationAddressApi)||void 0===r||null===(n=r.response)||void 0===n||null===(i=n.item)||void 0===i?void 0:i.formatted;if(!l)return!1;const c=(null===(a=l.line1)||void 0===a?void 0:a.toLowerCase())||"",u=(null===(o=l.line2)||void 0===o?void 0:o.toLowerCase())||"",d=s.toLowerCase();return c.includes(d)||u.includes(d)}))),[i,s]);(0,t.useEffect)((()=>{(async()=>{u(!0);try{const e=(await pg(lm(g_,"empty_plot"))).docs.map((e=>({id:e.id,...e.data()})));a(e)}catch(e){console.error("Error fetching plot data:",e)}finally{u(!1)}})()}),[]);const h=(0,t.useMemo)((()=>[{accessorKey:"tomt_navn",header:"Tomt navn",cell:e=>{var t,r,n,i,a;let{row:s}=e;const o=null===(t=s.original)||void 0===t||null===(r=t.CadastreDataFromApi)||void 0===r||null===(n=r.presentationAddressApi)||void 0===n||null===(i=n.response)||void 0===i||null===(a=i.item)||void 0===a?void 0:a.formatted;return(0,V.jsxs)("p",{className:"font-semibold text-sm text-darkBlack w-max",children:[null===o||void 0===o?void 0:o.line1," ",null===o||void 0===o?void 0:o.line2]})}},{accessorKey:"kommunenummer",header:"Kommunenummer",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black w-max",children:null===(t=n.original.lamdaDataFromApi)||void 0===t||null===(r=t.searchParameters)||void 0===r?void 0:r.kommunenummer})}},{accessorKey:"bruksnummer",header:"Bruksnummer",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack w-max",children:null===(t=n.original.lamdaDataFromApi)||void 0===t||null===(r=t.searchParameters)||void 0===r?void 0:r.bruksnummer})}},{accessorKey:"gardsnummer",header:"Gardsnummer",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack w-max",children:null===(t=n.original.lamdaDataFromApi)||void 0===t||null===(r=t.searchParameters)||void 0===r?void 0:r.gardsnummer})}},{accessorKey:"plot_size",header:"Plot size",cell:e=>{var t,r,n,i;let{row:a}=e;return(0,V.jsx)("div",{children:(0,V.jsx)("p",{className:"text-black text-sm mb-[2px] w-max",children:null===(t=a.original.additionalData)||void 0===t||null===(r=t.answer)||void 0===r||null===(n=r.bya_calculations)||void 0===n||null===(i=n.input)||void 0===i?void 0:i.plot_size})})}},{accessorKey:"view_count",header:"Antall eiendomsvisninger",cell:e=>{let{row:t}=e;return(0,V.jsx)("div",{children:(0,V.jsx)("p",{className:"text-black text-sm mb-[2px] w-max",children:t.original.view_count||0})})}},{id:"action",header:"Action",cell:e=>{let{row:t}=e;return(0,V.jsx)(qT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>l(`/se-plot/${t.original.id}`)})}}]),[l]),p=(0,t.useMemo)((()=>{const e=10*(r-1);return d.slice(e,e+10)}),[d,r]),f=aA({data:p,columns:h,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:r-1,pageSize:10}},pageCount:Math.ceil(d.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:r-1,pageSize:10});n(t.pageIndex+1)}}});return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"p-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Alle tomter"}),(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{className:"mb-2 flex flex-col sm:flex-row sm:items-center justify-between bg-lightPurple rounded-[12px] py-3 px-3 md:px-4 gap-2",children:(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px]",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k",className:"focus-within:outline-none",value:s,onChange:e=>o(e.target.value)})]})}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:f.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:c?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:h.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===d.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:h.length,className:"h-24 text-center",children:"No results."})}):(null===(e=f.getRowModel().rows)||void 0===e?void 0:e.length)&&f.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>f.previousPage(),disabled:!f.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:r})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:f.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>f.nextPage(),disabled:!f.getCanNextPage(),children:"Neste"})]})]})]})]})})};const E4=r.p+"static/media/Ic_x_close.2927b7d219cf8c2897b9d9e9074a80c1.svg";const C4=r.p+"static/media/Ic_check.801362d2a4373f5853b28a6fa8919a72.svg";const N4=r.p+"static/media/Ic_generelt.5587c7ffd08273c504698007822e7781.svg";const T4=r.p+"static/media/Ic_check_true.aef95e1450cb0cd1aa24da2980c14f87.svg";const P4=r.p+"static/media/Ic_chevron_right.d0df60b8083e393506a2a5531985f1d8.svg";const A4=r.p+"static/media/Ic_check_green_icon.9acc92dec9f75865f08048d301bf121b.svg",M4=r.p+"static/media/Img_line_bg.ea53a5f7dd39bc3e2975.png";var I4=r(9889),O4=r.n(I4),D4=r(620),R4=r.n(D4),L4=r(5268),F4=r.n(L4),$4=r(3097),B4=r.n($4),z4=r(9160),U4=r.n(z4),V4=function(e){return 0===e?0:e>0?1:-1},H4=function(e){return R4()(e)&&e.indexOf("%")===e.length-1},G4=function(e){return U4()(e)&&!F4()(e)},W4=function(e){return G4(e)||R4()(e)},q4=0,K4=function(e){var t=++q4;return"".concat(e||"").concat(t)},Z4=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!G4(e)&&!R4()(e))return n;if(H4(e)){var a=e.indexOf("%");r=t*parseFloat(e.slice(0,a))/100}else r=+e;return F4()(r)&&(r=n),i&&r>t&&(r=t),r},Y4=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},X4=function(e,t){return G4(e)&&G4(t)?function(r){return e+r*(t-e)}:function(){return t}};function Q4(e,t,r){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):B4()(e,t))===r})):null}var J4=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]},e5=r(9686),t5=r.n(e5),r5=r(1629),n5=r.n(r5),i5=r(6686),a5=r.n(i5),s5=r(9062);function o5(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function l5(e){return l5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l5(e)}var c5=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],u5=["points","pathLength"],d5={svg:["viewBox","children"],polygon:u5,polyline:u5},h5=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],p5=function(e,r){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,t.isValidElement)(e)&&(n=e.props),!a5()(n))return null;var i={};return Object.keys(n).forEach((function(e){h5.includes(e)&&(i[e]=r||function(t){return n[e](n,t)})})),i},f5=function(e,t,r){if(!a5()(e)||"object"!==l5(e))return null;var n=null;return Object.keys(e).forEach((function(i){var a=e[i];h5.includes(i)&&"function"===typeof a&&(n||(n={}),n[i]=function(e,t,r){return function(n){return e(t,r,n),null}}(a,t,r))})),n},m5=["children"],g5=["children"];function v5(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var x5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},y5=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},b5=null,w5=null,_5=function e(r){if(r===b5&&Array.isArray(w5))return w5;var n=[];return t.Children.forEach(r,(function(t){t5()(t)||((0,s5.isFragment)(t)?n=n.concat(e(t.props.children)):n.push(t))})),w5=n,b5=r,n};function k5(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map((function(e){return y5(e)})):[y5(t)],_5(e).forEach((function(e){var t=B4()(e,"type.displayName")||B4()(e,"type.name");-1!==n.indexOf(t)&&r.push(e)})),r}function S5(e,t){var r=k5(e,t);return r&&r[0]}var j5=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,n=t.height;return!(!G4(r)||r<=0||!G4(n)||n<=0)},E5=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],C5=function(e){return e&&e.type&&R4()(e.type)&&E5.indexOf(e.type)>=0},N5=function(e,r,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var i=e;if((0,t.isValidElement)(e)&&(i=e.props),!a5()(i))return null;var a={};return Object.keys(i).forEach((function(e){var t;(function(e,t,r,n){var i,a=null!==(i=null===d5||void 0===d5?void 0:d5[n])&&void 0!==i?i:[];return!n5()(e)&&(n&&a.includes(t)||c5.includes(t))||r&&h5.includes(t)})(null===(t=i)||void 0===t?void 0:t[e],e,r,n)&&(a[e]=i[e])})),a},T5=function e(r,n){if(r===n)return!0;var i=t.Children.count(r);if(i!==t.Children.count(n))return!1;if(0===i)return!0;if(1===i)return P5(Array.isArray(r)?r[0]:r,Array.isArray(n)?n[0]:n);for(var a=0;a<i;a++){var s=r[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!P5(s,o))return!1}return!0},P5=function(e,t){if(t5()(e)&&t5()(t))return!0;if(!t5()(e)&&!t5()(t)){var r=e.props||{},n=r.children,i=v5(r,m5),a=t.props||{},s=a.children,o=v5(a,g5);return n&&s?o5(i,o)&&T5(n,s):!n&&!s&&o5(i,o)}return!1},A5=function(e,t){var r=[],n={};return _5(e).forEach((function(e,i){if(C5(e))r.push(e);else if(e){var a=y5(e.type),s=t[a]||{},o=s.handler,l=s.once;if(o&&(!l||!n[a])){var c=o(e,a,i);r.push(c),n[a]=!0}}})),r},M5=function(e,t){return _5(t).indexOf(e)};function I5(e){return I5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I5(e)}function O5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O5(Object(r),!0).forEach((function(t){R5(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O5(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R5(e,t,r){return t=function(e){var t=function(e,t){if("object"!=I5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I5(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F5(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $5=(0,t.forwardRef)((function(e,r){var n=e.aspect,i=e.initialDimension,a=void 0===i?{width:-1,height:-1}:i,s=e.width,o=void 0===s?"100%":s,l=e.height,c=void 0===l?"100%":l,u=e.minWidth,d=void 0===u?0:u,h=e.minHeight,p=e.maxHeight,f=e.children,m=e.debounce,g=void 0===m?0:m,v=e.id,x=e.className,y=e.onResize,b=e.style,w=void 0===b?{}:b,_=(0,t.useRef)(null),k=(0,t.useRef)();k.current=y,(0,t.useImperativeHandle)(r,(function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})}));var S=L5((0,t.useState)({containerWidth:a.width,containerHeight:a.height}),2),j=S[0],E=S[1],C=(0,t.useCallback)((function(e,t){E((function(r){var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}}))}),[]);(0,t.useEffect)((function(){var e=function(e){var t,r=e[0].contentRect,n=r.width,i=r.height;C(n,i),null===(t=k.current)||void 0===t||t.call(k,n,i)};g>0&&(e=O4()(e,g,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=_.current.getBoundingClientRect(),n=r.width,i=r.height;return C(n,i),t.observe(_.current),function(){t.disconnect()}}),[C,g]);var N=(0,t.useMemo)((function(){var e=j.containerWidth,r=j.containerHeight;if(e<0||r<0)return null;J4(H4(o)||H4(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,c),J4(!n||n>0,"The aspect(%s) must be greater than zero.",n);var i=H4(o)?e:o,a=H4(c)?r:c;n&&n>0&&(i?a=i/n:a&&(i=a*n),p&&a>p&&(a=p)),J4(i>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,a,o,c,d,h,n);var s=!Array.isArray(f)&&y5(f.type).endsWith("Chart");return t.Children.map(f,(function(e){return t.isValidElement(e)?(0,t.cloneElement)(e,D5({width:i,height:a},s?{style:D5({height:"100%",width:"100%",maxHeight:a,maxWidth:i},e.props.style)}:{})):e}))}),[n,f,c,p,h,d,j,o]);return t.createElement("div",{id:v?"".concat(v):void 0,className:xi("recharts-responsive-container",x),style:D5(D5({},w),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:p}),ref:_},N)})),B5=r(6604),z5=r.n(B5),U5=r(7424),V5=r.n(U5),H5="Invariant failed";function G5(e,t){if(!e)throw new Error(H5)}var W5=["children","width","height","viewBox","className","style","title","desc"];function q5(){return q5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q5.apply(this,arguments)}function K5(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Z5(e){var r=e.children,n=e.width,i=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=K5(e,W5),d=a||{width:n,height:i,x:0,y:0},h=xi("recharts-surface",s);return t.createElement("svg",q5({},N5(u,!0,"svg"),{className:h,width:n,height:i,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),t.createElement("title",null,l),t.createElement("desc",null,c),r)}var Y5=["children","className"];function X5(){return X5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X5.apply(this,arguments)}function Q5(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var J5=t.forwardRef((function(e,r){var n=e.children,i=e.className,a=Q5(e,Y5),s=xi("recharts-layer",i);return t.createElement("g",X5({className:s},N5(a,!0),{ref:r}),n)}));function e6(e){return e6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e6(e)}function t6(){return t6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t6.apply(this,arguments)}function r6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return n6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n6(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i6(Object(r),!0).forEach((function(t){s6(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s6(e,t,r){return t=function(e){var t=function(e,t){if("object"!=e6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=e6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e6(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o6(e){return Array.isArray(e)&&W4(e[0])&&W4(e[1])?e.join(" ~ "):e}var l6=function(e){var r=e.separator,n=void 0===r?" : ":r,i=e.contentStyle,a=void 0===i?{}:i,s=e.itemStyle,o=void 0===s?{}:s,l=e.labelStyle,c=void 0===l?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,p=e.wrapperClassName,f=e.labelClassName,m=e.label,g=e.labelFormatter,v=e.accessibilityLayer,x=void 0!==v&&v,y=a6({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),b=a6({margin:0},c),w=!t5()(m),_=w?m:"",k=xi("recharts-default-tooltip",p),S=xi("recharts-tooltip-label",f);w&&g&&void 0!==u&&null!==u&&(_=g(m,u));var j=x?{role:"status","aria-live":"assertive"}:{};return t.createElement("div",t6({className:k,style:y},j),t.createElement("p",{className:S,style:b},t.isValidElement(_)?_:"".concat(_)),function(){if(u&&u.length){var e=(h?V5()(u,h):u).map((function(e,r){if("none"===e.type)return null;var i=a6({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},o),a=e.formatter||d||o6,s=e.value,l=e.name,c=s,h=l;if(a&&null!=c&&null!=h){var p=a(s,l,e,r,u);if(Array.isArray(p)){var f=r6(p,2);c=f[0],h=f[1]}else c=p}return t.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(r),style:i},W4(h)?t.createElement("span",{className:"recharts-tooltip-item-name"},h):null,W4(h)?t.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,t.createElement("span",{className:"recharts-tooltip-item-value"},c),t.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return t.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function c6(e){return c6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c6(e)}function u6(e,t,r){return t=function(e){var t=function(e,t){if("object"!=c6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c6(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d6="recharts-tooltip-wrapper",h6={visibility:"hidden"};function p6(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return xi(d6,u6(u6(u6(u6({},"".concat(d6,"-right"),G4(r)&&t&&G4(t.x)&&r>=t.x),"".concat(d6,"-left"),G4(r)&&t&&G4(t.x)&&r<t.x),"".concat(d6,"-bottom"),G4(n)&&t&&G4(t.y)&&n>=t.y),"".concat(d6,"-top"),G4(n)&&t&&G4(t.y)&&n<t.y))}function f6(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(a&&G4(a[n]))return a[n];var u=r[n]-o-i,d=r[n]+i;return t[n]?s[n]?u:d:s[n]?u<l[n]?Math.max(d,l[n]):Math.max(u,l[n]):d+o>l[n]+c?Math.max(u,l[n]):Math.max(d,l[n])}function m6(e){return m6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m6(e)}function g6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g6(Object(r),!0).forEach((function(t){k6(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g6(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S6(n.key),n)}}function y6(e,t,r){return t=w6(t),function(e,t){if(t&&("object"===m6(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b6()?Reflect.construct(t,r||[],w6(e).constructor):t.apply(e,r))}function b6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b6=function(){return!!e})()}function w6(e){return w6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w6(e)}function _6(e,t){return _6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_6(e,t)}function k6(e,t,r){return(t=S6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S6(e){var t=function(e,t){if("object"!=m6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m6(t)?t:t+""}var j6=function(e){function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return k6(e=y6(this,r,[].concat(n)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),k6(e,"handleKeyDown",(function(t){var r,n,i,a;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(r=null===(n=e.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==r?r:0,y:null!==(i=null===(a=e.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==i?i:0}})})),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_6(e,t)}(r,e),n=r,(i=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,r=this.props,n=r.active,i=r.allowEscapeViewBox,a=r.animationDuration,s=r.animationEasing,o=r.children,l=r.coordinate,c=r.hasPayload,u=r.isAnimationActive,d=r.offset,h=r.position,p=r.reverseDirection,f=r.useTranslate3d,m=r.viewBox,g=r.wrapperStyle,v=function(e){var t,r,n=e.allowEscapeViewBox,i=e.coordinate,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:t=f6({allowEscapeViewBox:n,coordinate:i,key:"x",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:r=f6({allowEscapeViewBox:n,coordinate:i,key:"y",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):h6,cssClasses:p6({translateX:t,translateY:r,coordinate:i})}}({allowEscapeViewBox:i,coordinate:l,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:f,viewBox:m}),x=v.cssClasses,y=v.cssProperties,b=v6(v6({transition:u&&n?"transform ".concat(a,"ms ").concat(s):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return t.createElement("div",{tabIndex:-1,className:x,style:b,ref:function(t){e.wrapperNode=t}},o)}}])&&x6(n.prototype,i),a&&x6(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.PureComponent),E6={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return E6[e]},set:function(e,t){if("string"===typeof e)E6[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach((function(t){E6[t]=e[t]}))}}},C6=r(977),N6=r.n(C6);function T6(e,t,r){return!0===t?N6()(e,r):n5()(t)?N6()(e,t):e}function P6(e){return P6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P6(e)}function A6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A6(Object(r),!0).forEach((function(t){F6(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A6(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$6(n.key),n)}}function O6(e,t,r){return t=R6(t),function(e,t){if(t&&("object"===P6(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D6()?Reflect.construct(t,r||[],R6(e).constructor):t.apply(e,r))}function D6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D6=function(){return!!e})()}function R6(e){return R6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R6(e)}function L6(e,t){return L6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L6(e,t)}function F6(e,t,r){return(t=$6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $6(e){var t=function(e,t){if("object"!=P6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P6(t)?t:t+""}function B6(e){return e.dataKey}var z6=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),O6(this,r,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L6(e,t)}(r,e),n=r,(i=[{key:"render",value:function(){var e=this,r=this.props,n=r.active,i=r.allowEscapeViewBox,a=r.animationDuration,s=r.animationEasing,o=r.content,l=r.coordinate,c=r.filterNull,u=r.isAnimationActive,d=r.offset,h=r.payload,p=r.payloadUniqBy,f=r.position,m=r.reverseDirection,g=r.useTranslate3d,v=r.viewBox,x=r.wrapperStyle,y=null!==h&&void 0!==h?h:[];c&&y.length&&(y=T6(h.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),p,B6));var b=y.length>0;return t.createElement(j6,{allowEscapeViewBox:i,animationDuration:a,animationEasing:s,isAnimationActive:u,active:n,coordinate:l,hasPayload:b,offset:d,position:f,reverseDirection:m,useTranslate3d:g,viewBox:v,wrapperStyle:x},function(e,r){return t.isValidElement(e)?t.cloneElement(e,r):"function"===typeof e?t.createElement(e,r):t.createElement(l6,r)}(o,M6(M6({},this.props),{},{payload:y})))}}])&&I6(n.prototype,i),a&&I6(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.PureComponent);F6(z6,"displayName","Tooltip"),F6(z6,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!E6.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var U6=r(643),V6=r.n(U6);Math.abs,Math.atan2;const H6=Math.cos,G6=(Math.max,Math.min,Math.sin),W6=Math.sqrt,q6=Math.PI,K6=2*q6;const Z6={draw(e,t){const r=W6(t/q6);e.moveTo(r,0),e.arc(0,0,r,0,K6)}},Y6={draw(e,t){const r=W6(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},X6=W6(1/3),Q6=2*X6,J6={draw(e,t){const r=W6(t/Q6),n=r*X6;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},e8={draw(e,t){const r=W6(t),n=-r/2;e.rect(n,n,r,r)}},t8=G6(q6/10)/G6(7*q6/10),r8=G6(K6/10)*t8,n8=-H6(K6/10)*t8,i8={draw(e,t){const r=W6(.8908130915292852*t),n=r8*r,i=n8*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const t=K6*a/5,s=H6(t),o=G6(t);e.lineTo(o*r,-s*r),e.lineTo(s*n-o*i,o*n+s*i)}e.closePath()}},a8=W6(3),s8={draw(e,t){const r=-W6(t/(3*a8));e.moveTo(0,2*r),e.lineTo(-a8*r,-r),e.lineTo(a8*r,-r),e.closePath()}},o8=-.5,l8=W6(3)/2,c8=1/W6(12),u8=3*(c8/2+1),d8={draw(e,t){const r=W6(t/u8),n=r/2,i=r*c8,a=n,s=r*c8+r,o=-a,l=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(o8*n-l8*i,l8*n+o8*i),e.lineTo(o8*a-l8*s,l8*a+o8*s),e.lineTo(o8*o-l8*l,l8*o+o8*l),e.lineTo(o8*n+l8*i,o8*i-l8*n),e.lineTo(o8*a+l8*s,o8*s-l8*a),e.lineTo(o8*o+l8*l,o8*l-l8*o),e.closePath()}};function h8(e){return function(){return e}}const p8=Math.PI,f8=2*p8,m8=1e-6,g8=f8-m8;function v8(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class x8{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?v8:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return v8;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,a){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+a}`}arcTo(e,t,r,n,i){if(e=+e,t=+t,r=+r,n=+n,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,s=this._y1,o=r-e,l=n-t,c=a-e,u=s-t,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>m8)if(Math.abs(u*o-l*c)>m8&&i){let h=r-a,p=n-s,f=o*o+l*l,m=h*h+p*p,g=Math.sqrt(f),v=Math.sqrt(d),x=i*Math.tan((p8-Math.acos((f+d-m)/(2*g*v)))/2),y=x/v,b=x/g;Math.abs(y-1)>m8&&this._append`L${e+y*c},${t+y*u}`,this._append`A${i},${i},0,0,${+(u*h>c*p)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,r,n,i,a){if(e=+e,t=+t,a=!!a,(r=+r)<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(n),o=r*Math.sin(n),l=e+s,c=t+o,u=1^a,d=a?n-i:i-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>m8||Math.abs(this._y1-c)>m8)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%f8+f8),d>g8?this._append`A${r},${r},0,1,${u},${e-s},${t-o}A${r},${r},0,1,${u},${this._x1=l},${this._y1=c}`:d>m8&&this._append`A${r},${r},0,${+(d>=p8)},${u},${this._x1=e+r*Math.cos(i)},${this._y1=t+r*Math.sin(i)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function y8(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new x8(t)}W6(3),W6(3);function b8(e){return b8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b8(e)}var w8=["type","size","sizeType"];function _8(){return _8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_8.apply(this,arguments)}function k8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k8(Object(r),!0).forEach((function(t){j8(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k8(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j8(e,t,r){return t=function(e){var t=function(e,t){if("object"!=b8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b8(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E8(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var C8={symbolCircle:Z6,symbolCross:Y6,symbolDiamond:J6,symbolSquare:e8,symbolStar:i8,symbolTriangle:s8,symbolWye:d8},N8=Math.PI/180,T8=function(e){var r=e.type,n=void 0===r?"circle":r,i=e.size,a=void 0===i?64:i,s=e.sizeType,o=void 0===s?"area":s,l=S8(S8({},E8(e,w8)),{},{type:n,size:a,sizeType:o}),c=l.className,u=l.cx,d=l.cy,h=N5(l,!0);return u===+u&&d===+d&&a===+a?t.createElement("path",_8({},h,{className:xi("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:function(){var e=function(e){var t="symbol".concat(V6()(e));return C8[t]||Z6}(n),t=function(e,t){let r=null,n=y8(i);function i(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return e="function"===typeof e?e:h8(e||Z6),t="function"===typeof t?t:h8(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:h8(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:h8(+e),i):t},i.context=function(e){return arguments.length?(r=null==e?null:e,i):r},i}().type(e).size(function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*N8;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.pow(Math.tan(n),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(a,o,n));return t()}()})):null};function P8(e){return P8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P8(e)}function A8(){return A8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A8.apply(this,arguments)}function M8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$8(n.key),n)}}function O8(e,t,r){return t=R8(t),function(e,t){if(t&&("object"===P8(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D8()?Reflect.construct(t,r||[],R8(e).constructor):t.apply(e,r))}function D8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D8=function(){return!!e})()}function R8(e){return R8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R8(e)}function L8(e,t){return L8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L8(e,t)}function F8(e,t,r){return(t=$8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $8(e){var t=function(e,t){if("object"!=P8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P8(t)?t:t+""}T8.registerSymbol=function(e,t){C8["symbol".concat(V6()(e))]=t};var B8=32,z8=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),O8(this,r,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L8(e,t)}(r,e),n=r,i=[{key:"renderIcon",value:function(e){var r=this.props.inactiveColor,n=16,i=B8/6,a=B8/3,s=e.inactive?r:e.color;if("plainline"===e.type)return t.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:B8,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return t.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(n,"h").concat(a,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(n,"\n            H").concat(B8,"M").concat(2*a,",").concat(n,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return t.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(B8,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(t.isValidElement(e.legendIcon)){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M8(Object(r),!0).forEach((function(t){F8(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M8(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);return delete o.legendIcon,t.cloneElement(e.legendIcon,o)}return t.createElement(T8,{fill:s,cx:n,cy:n,size:B8,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,r=this.props,n=r.payload,i=r.iconSize,a=r.layout,s=r.formatter,o=r.inactiveColor,l={x:0,y:0,width:B8,height:B8},c={display:"horizontal"===a?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(r,n){var a=r.formatter||s,d=xi(F8(F8({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",r.inactive));if("none"===r.type)return null;var h=n5()(r.value)?null:r.value;J4(!n5()(r.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var p=r.inactive?o:r.color;return t.createElement("li",A8({className:d,style:c,key:"legend-item-".concat(n)},f5(e.props,r,n)),t.createElement(Z5,{width:i,height:i,viewBox:l,style:u},e.renderIcon(r)),t.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},a?a(h,r,n):h))}))}},{key:"render",value:function(){var e=this.props,r=e.payload,n=e.layout,i=e.align;if(!r||!r.length)return null;var a={padding:0,margin:0,textAlign:"horizontal"===n?i:"left"};return t.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}],i&&I8(n.prototype,i),a&&I8(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.PureComponent);function U8(e){return U8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U8(e)}F8(z8,"displayName","Legend"),F8(z8,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var V8=["ref"];function H8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H8(Object(r),!0).forEach((function(t){X8(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H8(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q8(n.key),n)}}function q8(e,t,r){return t=Z8(t),function(e,t){if(t&&("object"===U8(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,K8()?Reflect.construct(t,r||[],Z8(e).constructor):t.apply(e,r))}function K8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K8=function(){return!!e})()}function Z8(e){return Z8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Z8(e)}function Y8(e,t){return Y8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y8(e,t)}function X8(e,t,r){return(t=Q8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q8(e){var t=function(e,t){if("object"!=U8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=U8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U8(t)?t:t+""}function J8(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function e9(e){return e.value}var t9=function(e){function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return X8(e=q8(this,r,[].concat(n)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y8(e,t)}(r,e),n=r,i=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?G8({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,n=this.props,i=n.layout,a=n.align,s=n.verticalAlign,o=n.margin,l=n.chartWidth,c=n.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===a&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===a?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===s?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===s?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),G8(G8({},t),r)}},{key:"render",value:function(){var e=this,r=this.props,n=r.content,i=r.width,a=r.height,s=r.wrapperStyle,o=r.payloadUniqBy,l=r.payload,c=G8(G8({position:"absolute",width:i||"auto",height:a||"auto"},this.getDefaultPosition(s)),s);return t.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,r){if(t.isValidElement(e))return t.cloneElement(e,r);if("function"===typeof e)return t.createElement(e,r);r.ref;var n=J8(r,V8);return t.createElement(z8,n)}(n,G8(G8({},this.props),{},{payload:T6(l,o,e9)})))}}],a=[{key:"getWithHeight",value:function(e,t){var r=G8(G8({},this.defaultProps),e.props).layout;return"vertical"===r&&G4(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}],i&&W8(n.prototype,i),a&&W8(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.PureComponent);function r9(){return r9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r9.apply(this,arguments)}X8(t9,"displayName","Legend"),X8(t9,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var n9=function(e){var r=e.cx,n=e.cy,i=e.r,a=e.className,s=xi("recharts-dot",a);return r===+r&&n===+n&&i===+i?t.createElement("circle",r9({},N5(e,!1),p5(e),{className:s,cx:r,cy:n,r:i})):null},i9=Object.getOwnPropertyNames,a9=Object.getOwnPropertySymbols,s9=Object.prototype.hasOwnProperty;function o9(e,t){return function(r,n,i){return e(r,n,i)&&t(r,n,i)}}function l9(e){return function(t,r,n){if(!t||!r||"object"!==typeof t||"object"!==typeof r)return e(t,r,n);var i=n.cache,a=i.get(t),s=i.get(r);if(a&&s)return a===r&&s===t;i.set(t,r),i.set(r,t);var o=e(t,r,n);return i.delete(t),i.delete(r),o}}function c9(e){return i9(e).concat(a9(e))}var u9=Object.hasOwn||function(e,t){return s9.call(e,t)};function d9(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var h9=Object.getOwnPropertyDescriptor,p9=Object.keys;function f9(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function m9(e,t){return d9(e.getTime(),t.getTime())}function g9(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function v9(e,t){return e===t}function x9(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i,a,s=new Array(n),o=e.entries(),l=0;(i=o.next())&&!i.done;){for(var c=t.entries(),u=!1,d=0;(a=c.next())&&!a.done;)if(s[d])d++;else{var h=i.value,p=a.value;if(r.equals(h[0],p[0],l,d,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){u=s[d]=!0;break}d++}if(!u)return!1;l++}return!0}var y9=d9;function b9(e,t,r){var n=p9(e),i=n.length;if(p9(t).length!==i)return!1;for(;i-- >0;)if(!C9(e,t,r,n[i]))return!1;return!0}function w9(e,t,r){var n,i,a,s=c9(e),o=s.length;if(c9(t).length!==o)return!1;for(;o-- >0;){if(!C9(e,t,r,n=s[o]))return!1;if(i=h9(e,n),a=h9(t,n),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable))return!1}return!0}function _9(e,t){return d9(e.valueOf(),t.valueOf())}function k9(e,t){return e.source===t.source&&e.flags===t.flags}function S9(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i,a,s=new Array(n),o=e.values();(i=o.next())&&!i.done;){for(var l=t.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!s[u]&&r.equals(i.value,a.value,i.value,a.value,e,t,r)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function j9(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function E9(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function C9(e,t,r,n){return!("_owner"!==n&&"__o"!==n&&"__v"!==n||!e.$$typeof&&!t.$$typeof)||u9(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var N9=Array.isArray,T9="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,P9=Object.assign,A9=Object.prototype.toString.call.bind(Object.prototype.toString);var M9=I9();I9({strict:!0}),I9({circular:!0}),I9({circular:!0,strict:!0}),I9({createInternalComparator:function(){return d9}}),I9({strict:!0,createInternalComparator:function(){return d9}}),I9({circular:!0,createInternalComparator:function(){return d9}}),I9({circular:!0,createInternalComparator:function(){return d9},strict:!0});function I9(e){void 0===e&&(e={});var t=e.circular,r=void 0!==t&&t,n=e.createInternalComparator,i=e.createState,a=e.strict,s=void 0!==a&&a,o=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?w9:f9,areDatesEqual:m9,areErrorsEqual:g9,areFunctionsEqual:v9,areMapsEqual:n?o9(x9,w9):x9,areNumbersEqual:y9,areObjectsEqual:n?w9:b9,arePrimitiveWrappersEqual:_9,areRegExpsEqual:k9,areSetsEqual:n?o9(S9,w9):S9,areTypedArraysEqual:n?w9:j9,areUrlsEqual:E9};if(r&&(i=P9({},i,r(i))),t){var a=l9(i.areArraysEqual),s=l9(i.areMapsEqual),o=l9(i.areObjectsEqual),l=l9(i.areSetsEqual);i=P9({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}(e),l=function(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,p,f){if(e===p)return!0;if(null==e||null==p)return!1;var m=typeof e;if(m!==typeof p)return!1;if("object"!==m)return"number"===m?s(e,p,f):"function"===m&&i(e,p,f);var g=e.constructor;if(g!==p.constructor)return!1;if(g===Object)return o(e,p,f);if(N9(e))return t(e,p,f);if(null!=T9&&T9(e))return d(e,p,f);if(g===Date)return r(e,p,f);if(g===RegExp)return c(e,p,f);if(g===Map)return a(e,p,f);if(g===Set)return u(e,p,f);var v=A9(e);return"[object Date]"===v?r(e,p,f):"[object RegExp]"===v?c(e,p,f):"[object Map]"===v?a(e,p,f):"[object Set]"===v?u(e,p,f):"[object Object]"===v?"function"!==typeof e.then&&"function"!==typeof p.then&&o(e,p,f):"[object URL]"===v?h(e,p,f):"[object Error]"===v?n(e,p,f):"[object Arguments]"===v?o(e,p,f):("[object Boolean]"===v||"[object Number]"===v||"[object String]"===v)&&l(e,p,f)}}(o),c=n?n(l):function(e){return function(t,r,n,i,a,s,o){return e(t,r,o)}}(l);return function(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(e,s){var o=n(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,u=o.meta;return r(e,s,{cache:c,equals:i,meta:u,strict:a})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(e,t){return r(e,t,s)}}({circular:r,comparator:l,createState:i,equals:c,strict:s})}function O9(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame((function n(i){r<0&&(r=i),i-r>t?(e(i),r=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(n)}))}function D9(e){return D9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D9(e)}function R9(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return L9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L9(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F9(){var e=function(){return null},t=!1,r=function r(n){if(!t){if(Array.isArray(n)){if(!n.length)return;var i=R9(n),a=i[0],s=i.slice(1);return"number"===typeof a?void O9(r.bind(null,s),a):(r(a),void O9(r.bind(null,s)))}"object"===D9(n)&&e(n),"function"===typeof n&&n()}};return{stop:function(){t=!0},start:function(e){t=!1,r(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function $9(e){return $9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$9(e)}function B9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B9(Object(r),!0).forEach((function(t){U9(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B9(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U9(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==$9(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==$9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$9(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V9=function(e){return e},H9=function(e,t){return Object.keys(t).reduce((function(r,n){return z9(z9({},r),{},U9({},n,e(n,t[n])))}),{})},G9=function(e,t,r){return e.map((function(e){return"".concat((n=e,n.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(r);var n})).join(",")};function W9(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||K9(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q9(e){return function(e){if(Array.isArray(e))return Z9(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K9(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K9(e,t){if(e){if("string"===typeof e)return Z9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z9(e,t):void 0}}function Z9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y9=1e-4,X9=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Q9=function(e,t){return e.map((function(e,r){return e*Math.pow(t,r)})).reduce((function(e,t){return e+t}))},J9=function(e,t){return function(r){var n=X9(e,t);return Q9(n,r)}},e7=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[1],a=t[2],s=t[3];if(1===t.length)switch(t[0]){case"linear":n=0,i=0,a=1,s=1;break;case"ease":n=.25,i=.1,a=.25,s=1;break;case"ease-in":n=.42,i=0,a=1,s=1;break;case"ease-out":n=.42,i=0,a=.58,s=1;break;case"ease-in-out":n=0,i=0,a=.58,s=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=o[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),c=W9(l,4);n=c[0],i=c[1],a=c[2],s=c[3]}}[n,a,i,s].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var u,d,h=J9(n,a),p=J9(i,s),f=(u=n,d=a,function(e){var t=X9(u,d),r=[].concat(q9(t.map((function(e,t){return e*t})).slice(1)),[0]);return Q9(r,e)}),m=function(e){return e>1?1:e<0?0:e},g=function(e){for(var t=e>1?1:e,r=t,n=0;n<8;++n){var i=h(r)-t,a=f(r);if(Math.abs(i-t)<Y9||a<Y9)return p(r);r=m(r-i/a)}return p(r)};return g.isStepper=!1,g},t7=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];if("string"===typeof n)switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return e7(n);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,n=e.damping,i=void 0===n?8:n,a=e.dt,s=void 0===a?17:a,o=function(e,t,n){var a=n+(-(e-t)*r-n*i)*s/1e3,o=n*s/1e3+e;return Math.abs(o-t)<Y9&&Math.abs(a)<Y9?[t,0]:[o,a]};return o.isStepper=!0,o.dt=s,o}();default:if("cubic-bezier"===n.split("(")[0])return e7(n)}return"function"===typeof n?n:null};function r7(e){return r7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r7(e)}function n7(e){return function(e){if(Array.isArray(e))return c7(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l7(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i7(Object(r),!0).forEach((function(t){s7(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i7(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s7(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==r7(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==r7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r7(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||l7(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l7(e,t){if(e){if("string"===typeof e)return c7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c7(e,t):void 0}}function c7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u7=function(e,t,r){return e+(t-e)*r},d7=function(e){return e.from!==e.to},h7=function e(t,r,n){var i=H9((function(e,r){if(d7(r)){var n=o7(t(r.from,r.to,r.velocity),2),i=n[0],a=n[1];return a7(a7({},r),{},{from:i,velocity:a})}return r}),r);return n<1?H9((function(e,t){return d7(t)?a7(a7({},t),{},{velocity:u7(t.velocity,i[e].velocity,n),from:u7(t.from,i[e].from,n)}):t}),r):e(t,i,n-1)};const p7=function(e,t,r,n,i){var a,s,o,l,c=(a=e,s=t,[Object.keys(a),Object.keys(s)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),u=c.reduce((function(r,n){return a7(a7({},r),{},s7({},n,[e[n],t[n]]))}),{}),d=c.reduce((function(r,n){return a7(a7({},r),{},s7({},n,{from:e[n],velocity:0,to:t[n]}))}),{}),h=-1,p=function(){return null};return p=r.isStepper?function(n){o||(o=n);var a=(n-o)/r.dt;d=h7(r,d,a),i(a7(a7(a7({},e),t),H9((function(e,t){return t.from}),d))),o=n,Object.values(d).filter(d7).length&&(h=requestAnimationFrame(p))}:function(a){l||(l=a);var s=(a-l)/n,o=H9((function(e,t){return u7.apply(void 0,n7(t).concat([r(s)]))}),u);if(i(a7(a7(a7({},e),t),o)),s<1)h=requestAnimationFrame(p);else{var c=H9((function(e,t){return u7.apply(void 0,n7(t).concat([r(1)]))}),u);i(a7(a7(a7({},e),t),c))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(h)}}};function f7(e){return f7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f7(e)}var m7=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function g7(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function v7(e){return function(e){if(Array.isArray(e))return x7(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return x7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x7(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y7(Object(r),!0).forEach((function(t){w7(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y7(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w7(e,t,r){return(t=k7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k7(n.key),n)}}function k7(e){var t=function(e,t){if("object"!==f7(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f7(t)?t:String(t)}function S7(e,t){return S7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S7(e,t)}function j7(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(W){return!1}}();return function(){var r,n=N7(e);if(t){var i=N7(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E7(this,r)}}function E7(e,t){if(t&&("object"===f7(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C7(e)}function C7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N7(e){return N7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N7(e)}var T7=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S7(e,t)}(s,e);var r,n,i,a=j7(s);function s(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var n=(r=a.call(this,e,t)).props,i=n.isActive,o=n.attributeName,l=n.from,c=n.to,u=n.steps,d=n.children,h=n.duration;if(r.handleStyleChange=r.handleStyleChange.bind(C7(r)),r.changeStyle=r.changeStyle.bind(C7(r)),!i||h<=0)return r.state={style:{}},"function"===typeof d&&(r.state={style:c}),E7(r);if(u&&u.length)r.state={style:u[0].style};else if(l){if("function"===typeof d)return r.state={style:l},E7(r);r.state={style:o?w7({},o,l):l}}else r.state={style:{}};return r}return r=s,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,n=t.canBegin,i=t.attributeName,a=t.shouldReAnimate,s=t.to,o=t.from,l=this.state.style;if(n)if(r){if(!(M9(e.to,s)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||a?o:e.to;if(this.state&&l){var d={style:i?w7({},i,u):u};(i&&l[i]!==u||!i&&l!==u)&&this.setState(d)}this.runAnimation(b7(b7({},this.props),{},{from:u,begin:0}))}}else{var h={style:i?w7({},i,s):s};this.state&&l&&(i&&l[i]!==s||!i&&l!==s)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,n=e.to,i=e.duration,a=e.easing,s=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=p7(r,n,t7(a),i,this.changeStyle);this.manager.start([l,s,function(){t.stopJSAnimation=c()},i,o])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,n=e.begin,i=e.onAnimationStart,a=r[0],s=a.style,o=a.duration,l=void 0===o?0:o;return this.manager.start([i].concat(v7(r.reduce((function(e,n,i){if(0===i)return e;var a=n.duration,s=n.easing,o=void 0===s?"ease":s,l=n.style,c=n.properties,u=n.onAnimationEnd,d=i>0?r[i-1]:n,h=c||Object.keys(l);if("function"===typeof o||"spring"===o)return[].concat(v7(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:a,easing:o}),a]);var p=G9(h,a,o),f=b7(b7(b7({},d.style),l),{},{transition:p});return[].concat(v7(e),[f,a,u]).filter(V9)}),[s,Math.max(l,n)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=F9());var t=e.begin,r=e.duration,n=e.attributeName,i=e.to,a=e.easing,s=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof a&&"function"!==typeof c&&"spring"!==a)if(l.length>1)this.runStepAnimation(e);else{var d=n?w7({},n,i):i,h=G9(Object.keys(d),r,a);u.start([s,t,b7(b7({},d),{},{transition:h}),r,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,r=e.children,n=(e.begin,e.duration),i=(e.attributeName,e.easing,e.isActive),a=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,g7(e,m7)),s=t.Children.count(r),o=this.state.style;if("function"===typeof r)return r(o);if(!i||0===s||n<=0)return r;var l=function(e){var r=e.props,n=r.style,i=void 0===n?{}:n,s=r.className;return(0,t.cloneElement)(e,b7(b7({},a),{},{style:b7(b7({},i),o),className:s}))};return 1===s?l(t.Children.only(r)):t.createElement("div",null,t.Children.map(r,(function(e){return l(e)})))}}],n&&_7(r.prototype,n),i&&_7(r,i),Object.defineProperty(r,"prototype",{writable:!1}),s}(t.PureComponent);T7.displayName="Animate",T7.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},T7.propTypes={from:M0().oneOfType([M0().object,M0().string]),to:M0().oneOfType([M0().object,M0().string]),attributeName:M0().string,duration:M0().number,begin:M0().number,easing:M0().oneOfType([M0().string,M0().func]),steps:M0().arrayOf(M0().shape({duration:M0().number.isRequired,style:M0().object.isRequired,easing:M0().oneOfType([M0().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),M0().func]),properties:M0().arrayOf("string"),onAnimationEnd:M0().func})),children:M0().oneOfType([M0().node,M0().func]),isActive:M0().bool,canBegin:M0().bool,onAnimationEnd:M0().func,shouldReAnimate:M0().bool,onAnimationStart:M0().func,onAnimationReStart:M0().func};const P7=T7;function A7(e){return A7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A7(e)}function M7(){return M7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M7.apply(this,arguments)}function I7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O7(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D7(Object(r),!0).forEach((function(t){L7(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D7(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L7(e,t,r){return t=function(e){var t=function(e,t){if("object"!=A7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A7(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F7=function(e,t,r,n,i){var a,s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(s>0&&i instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=i[d]>s?s:i[d];a="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(a+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),a+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(a+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+o*u[1])),a+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(a+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+r-l*u[2],",").concat(t+n)),a+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(a+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-o*u[3])),a+="Z"}else if(s>0&&i===+i&&i>0){var h=Math.min(s,i);a="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+r-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,"\n            L ").concat(e+r,",").concat(t+n-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,"\n            L ").concat(e+l*h,",").concat(t+n,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else a="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return a},$7=function(e,t){if(!e||!t)return!1;var r=e.x,n=e.y,i=t.x,a=t.y,s=t.width,o=t.height;if(Math.abs(s)>0&&Math.abs(o)>0){var l=Math.min(i,i+s),c=Math.max(i,i+s),u=Math.min(a,a+o),d=Math.max(a,a+o);return r>=l&&r<=c&&n>=u&&n<=d}return!1},B7={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},z7=function(e){var r=R7(R7({},B7),e),n=(0,t.useRef)(),i=I7((0,t.useState)(-1),2),a=i[0],s=i[1];(0,t.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(D_e){}}),[]);var o=r.x,l=r.y,c=r.width,u=r.height,d=r.radius,h=r.className,p=r.animationEasing,f=r.animationDuration,m=r.animationBegin,g=r.isAnimationActive,v=r.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||u!==+u||0===c||0===u)return null;var x=xi("recharts-rectangle",h);return v?t.createElement(P7,{canBegin:a>0,from:{width:c,height:u,x:o,y:l},to:{width:c,height:u,x:o,y:l},duration:f,animationEasing:p,isActive:v},(function(e){var i=e.width,s=e.height,o=e.x,l=e.y;return t.createElement(P7,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,isActive:g,easing:p},t.createElement("path",M7({},N5(r,!0),{className:x,d:F7(o,l,i,s,d),ref:n})))})):t.createElement("path",M7({},N5(r,!0),{className:x,d:F7(o,l,c,u,d)}))};function U7(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function V7(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class H7 extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K7;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(G7(this,e))}has(e){return super.has(G7(this,e))}set(e,t){return super.set(W7(this,e),t)}delete(e){return super.delete(q7(this,e))}}Set;function G7(e,t){let{_intern:r,_key:n}=e;const i=n(t);return r.has(i)?r.get(i):t}function W7(e,t){let{_intern:r,_key:n}=e;const i=n(t);return r.has(i)?r.get(i):(r.set(i,t),t)}function q7(e,t){let{_intern:r,_key:n}=e;const i=n(t);return r.has(i)&&(t=r.get(i),r.delete(i)),t}function K7(e){return null!==e&&"object"===typeof e?e.valueOf():e}const Z7=Symbol("implicit");function Y7(){var e=new H7,t=[],r=[],n=Z7;function i(i){let a=e.get(i);if(void 0===a){if(n!==Z7)return n;e.set(i,a=t.push(i)-1)}return r[a%r.length]}return i.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new H7;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return Y7(t,r).unknown(n)},U7.apply(i,arguments),i}function X7(){var e,t,r=Y7().unknown(void 0),n=r.domain,i=r.range,a=0,s=1,o=!1,l=0,c=0,u=.5;function d(){var r=n().length,d=s<a,h=d?s:a,p=d?a:s;e=(p-h)/Math.max(1,r-l+2*c),o&&(e=Math.floor(e)),h+=(p-h-e*(r-l))*u,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var f=function(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),a=new Array(i);++n<i;)a[n]=e+n*r;return a}(r).map((function(t){return h+e*t}));return i(d?f.reverse():f)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),d()):n()},r.range=function(e){return arguments.length?([a,s]=e,a=+a,s=+s,d()):[a,s]},r.rangeRound=function(e){return[a,s]=e,a=+a,s=+s,o=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,d()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},r.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},r.copy=function(){return X7(n(),[a,s]).round(o).paddingInner(l).paddingOuter(c).align(u)},U7.apply(d(),arguments)}function Q7(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Q7(t())},e}function J7(){return Q7(X7.apply(null,arguments).paddingInner(1))}function eee(e){return eee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eee(e)}function tee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ree(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tee(Object(r),!0).forEach((function(t){nee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nee(e,t,r){return t=function(e){var t=function(e,t){if("object"!=eee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eee(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var iee={widthCache:{},cacheCount:0},aee={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},see="recharts_measurement_span";var oee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||E6.isSsr)return{width:0,height:0};var r=function(e){var t=ree({},e);return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t}(t),n=JSON.stringify({text:e,copyStyle:r});if(iee.widthCache[n])return iee.widthCache[n];try{var i=document.getElementById(see);i||((i=document.createElement("span")).setAttribute("id",see),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var a=ree(ree({},aee),r);Object.assign(i.style,a),i.textContent="".concat(e);var s=i.getBoundingClientRect(),o={width:s.width,height:s.height};return iee.widthCache[n]=o,++iee.cacheCount>2e3&&(iee.cacheCount=0,iee.widthCache={}),o}catch(W){return{width:0,height:0}}};function lee(e){return lee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lee(e)}function cee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return uee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hee(n.key),n)}}function hee(e){var t=function(e,t){if("object"!=lee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lee(t)?t:t+""}var pee=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fee=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mee=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gee=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},xee=Object.keys(vee),yee="NaN";var bee=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),""===r||mee.test(r)||(this.num=NaN,this.unit=""),xee.includes(r)&&(this.num=function(e,t){return e*vee[t]}(t,r),this.unit="px")}return t=e,n=[{key:"parse",value:function(t){var r,n=cee(null!==(r=gee.exec(t))&&void 0!==r?r:[],3),i=n[1],a=n[2];return new e(parseFloat(i),null!==a&&void 0!==a?a:"")}}],(r=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&dee(t.prototype,r),n&&dee(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function wee(e){if(e.includes(yee))return yee;for(var t=e;t.includes("*")||t.includes("/");){var r,n=cee(null!==(r=pee.exec(t))&&void 0!==r?r:[],4),i=n[1],a=n[2],s=n[3],o=bee.parse(null!==i&&void 0!==i?i:""),l=bee.parse(null!==s&&void 0!==s?s:""),c="*"===a?o.multiply(l):o.divide(l);if(c.isNaN())return yee;t=t.replace(pee,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=cee(null!==(u=fee.exec(t))&&void 0!==u?u:[],4),h=d[1],p=d[2],f=d[3],m=bee.parse(null!==h&&void 0!==h?h:""),g=bee.parse(null!==f&&void 0!==f?f:""),v="+"===p?m.add(g):m.subtract(g);if(v.isNaN())return yee;t=t.replace(fee,v.toString())}return t}var _ee=/\(([^()]*)\)/;function kee(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var r=cee(_ee.exec(t),2)[1];t=t.replace(_ee,wee(r))}return t}(t),t=wee(t)}function See(e){var t=function(e){try{return kee(e)}catch(W){return yee}}(e.slice(5,-1));return t===yee?"":t}var jee=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Eee=["dx","dy","angle","className","breakAll"];function Cee(){return Cee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cee.apply(this,arguments)}function Nee(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Tee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Aee=/[ \f\n\r\t\v\u2028\u2029]+/,Mee=function(e){var t=e.children,r=e.breakAll,n=e.style;try{var i=[];return t5()(t)||(i=r?t.toString().split(""):t.toString().split(Aee)),{wordsWithComputedWidth:i.map((function(e){return{word:e,width:oee(e,n).width}})),spaceWidth:r?0:oee("\xa0",n).width}}catch(W){return null}},Iee=function(e){return[{words:t5()(e)?[]:e.toString().split(Aee)}]},Oee=function(e){var t=e.width,r=e.scaleToFit,n=e.children,i=e.style,a=e.breakAll,s=e.maxLines;if((t||r)&&!E6.isSsr){var o=Mee({breakAll:a,children:n,style:i});return o?function(e,t,r,n,i){var a=e.maxLines,s=e.children,o=e.style,l=e.breakAll,c=G4(a),u=s,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var a=t.word,s=t.width,o=e[e.length-1];if(o&&(null==n||i||o.width+s+r<Number(n)))o.words.push(a),o.width+=s+r;else{var l={words:[a],width:s};e.push(l)}return e}),[])},h=d(t);if(!c)return h;for(var p,f=function(e){var t=u.slice(0,e),r=Mee({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,i=d(r),s=i.length>a||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(i).width>Number(n);return[s,i]},m=0,g=u.length-1,v=0;m<=g&&v<=u.length-1;){var x=Math.floor((m+g)/2),y=Tee(f(x-1),2),b=y[0],w=y[1],_=Tee(f(x),1)[0];if(b||_||(m=x+1),b&&_&&(g=x-1),!b&&_){p=w;break}v++}return p||h}({breakAll:a,children:n,maxLines:s,style:i},o.wordsWithComputedWidth,o.spaceWidth,t,r):Iee(n)}return Iee(n)},Dee="#808080",Ree=function(e){var r=e.x,n=void 0===r?0:r,i=e.y,a=void 0===i?0:i,s=e.lineHeight,o=void 0===s?"1em":s,l=e.capHeight,c=void 0===l?"0.71em":l,u=e.scaleToFit,d=void 0!==u&&u,h=e.textAnchor,p=void 0===h?"start":h,f=e.verticalAnchor,m=void 0===f?"end":f,g=e.fill,v=void 0===g?Dee:g,x=Nee(e,jee),y=(0,t.useMemo)((function(){return Oee({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})}),[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),b=x.dx,w=x.dy,_=x.angle,k=x.className,S=x.breakAll,j=Nee(x,Eee);if(!W4(n)||!W4(a))return null;var E,C=n+(G4(b)?b:0),N=a+(G4(w)?w:0);switch(m){case"start":E=See("calc(".concat(c,")"));break;case"middle":E=See("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:E=See("calc(".concat(y.length-1," * -").concat(o,")"))}var T=[];if(d){var P=y[0].width,A=x.width;T.push("scale(".concat((G4(A)?A/P:1)/P,")"))}return _&&T.push("rotate(".concat(_,", ").concat(C,", ").concat(N,")")),T.length&&(j.transform=T.join(" ")),t.createElement("text",Cee({},N5(j,!0),{x:C,y:N,className:xi("recharts-text",k),textAnchor:p,fill:v.includes("url")?Dee:v}),y.map((function(e,r){var n=e.words.join(S?"":" ");return t.createElement("tspan",{x:C,dy:0===r?E:o,key:"".concat(n,"-").concat(r)},n)})))};const Lee=Math.sqrt(50),Fee=Math.sqrt(10),$ee=Math.sqrt(2);function Bee(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=Lee?10:a>=Fee?5:a>=$ee?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?Bee(e,t,2*r):[o,l,c]}function zee(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[i,a,s]=n?Bee(t,e,r):Bee(e,t,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function Uee(e,t,r){return Bee(e=+e,t=+t,r=+r)[2]}function Vee(e,t,r){r=+r;const n=(t=+t)<(e=+e),i=n?Uee(t,e,r):Uee(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function Hee(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Gee(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wee(e){let t,r,n;function i(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(n,n))return a;do{const t=i+a>>>1;r(e[t],n)<0?i=t+1:a=t}while(i<a)}return i}return 2!==e.length?(t=Hee,r=(t,r)=>Hee(e(t),r),n=(t,r)=>e(t)-r):(t=e===Hee||e===Gee?e:qee,r=e,n=e),{left:i,center:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=i(e,t,r,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return a>r&&n(e[a-1],t)>-n(e[a],t)?a-1:a},right:function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(n,n))return a;do{const t=i+a>>>1;r(e[t],n)<=0?i=t+1:a=t}while(i<a)}return i}}}function qee(){return 0}function Kee(e){return null===e?NaN:+e}const Zee=Wee(Hee),Yee=Zee.right,Xee=(Zee.left,Wee(Kee).center,Yee);function Qee(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Jee(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ete(){}var tte=.7,rte=1/tte,nte="\\s*([+-]?\\d+)\\s*",ite="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ate="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ste=/^#([0-9a-f]{3,8})$/,ote=new RegExp(`^rgb\\(${nte},${nte},${nte}\\)$`),lte=new RegExp(`^rgb\\(${ate},${ate},${ate}\\)$`),cte=new RegExp(`^rgba\\(${nte},${nte},${nte},${ite}\\)$`),ute=new RegExp(`^rgba\\(${ate},${ate},${ate},${ite}\\)$`),dte=new RegExp(`^hsl\\(${ite},${ate},${ate}\\)$`),hte=new RegExp(`^hsla\\(${ite},${ate},${ate},${ite}\\)$`),pte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fte(){return this.rgb().formatHex()}function mte(){return this.rgb().formatRgb()}function gte(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ste.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?vte(t):3===r?new bte(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?xte(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?xte(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ote.exec(e))?new bte(t[1],t[2],t[3],1):(t=lte.exec(e))?new bte(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=cte.exec(e))?xte(t[1],t[2],t[3],t[4]):(t=ute.exec(e))?xte(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=dte.exec(e))?Ete(t[1],t[2]/100,t[3]/100,1):(t=hte.exec(e))?Ete(t[1],t[2]/100,t[3]/100,t[4]):pte.hasOwnProperty(e)?vte(pte[e]):"transparent"===e?new bte(NaN,NaN,NaN,0):null}function vte(e){return new bte(e>>16&255,e>>8&255,255&e,1)}function xte(e,t,r,n){return n<=0&&(e=t=r=NaN),new bte(e,t,r,n)}function yte(e,t,r,n){return 1===arguments.length?function(e){return e instanceof ete||(e=gte(e)),e?new bte((e=e.rgb()).r,e.g,e.b,e.opacity):new bte}(e):new bte(e,t,r,null==n?1:n)}function bte(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function wte(){return`#${jte(this.r)}${jte(this.g)}${jte(this.b)}`}function _te(){const e=kte(this.opacity);return`${1===e?"rgb(":"rgba("}${Ste(this.r)}, ${Ste(this.g)}, ${Ste(this.b)}${1===e?")":`, ${e})`}`}function kte(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ste(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jte(e){return((e=Ste(e))<16?"0":"")+e.toString(16)}function Ete(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Nte(e,t,r,n)}function Cte(e){if(e instanceof Nte)return new Nte(e.h,e.s,e.l,e.opacity);if(e instanceof ete||(e=gte(e)),!e)return new Nte;if(e instanceof Nte)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(s=t===a?(r-n)/o+6*(r<n):r===a?(n-t)/o+2:(t-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Nte(s,o,l,e.opacity)}function Nte(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function Tte(e){return(e=(e||0)%360)<0?e+360:e}function Pte(e){return Math.max(0,Math.min(1,e||0))}function Ate(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function Mte(e,t,r,n,i){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*r+(1+3*e+3*a-3*s)*n+s*i)/6}Qee(ete,gte,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fte,formatHex:fte,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Cte(this).formatHsl()},formatRgb:mte,toString:mte}),Qee(bte,yte,Jee(ete,{brighter(e){return e=null==e?rte:Math.pow(rte,e),new bte(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?tte:Math.pow(tte,e),new bte(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bte(Ste(this.r),Ste(this.g),Ste(this.b),kte(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wte,formatHex:wte,formatHex8:function(){return`#${jte(this.r)}${jte(this.g)}${jte(this.b)}${jte(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:_te,toString:_te})),Qee(Nte,(function(e,t,r,n){return 1===arguments.length?Cte(e):new Nte(e,t,r,null==n?1:n)}),Jee(ete,{brighter(e){return e=null==e?rte:Math.pow(rte,e),new Nte(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?tte:Math.pow(tte,e),new Nte(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new bte(Ate(e>=240?e-240:e+120,i,n),Ate(e,i,n),Ate(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Nte(Tte(this.h),Pte(this.s),Pte(this.l),kte(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kte(this.opacity);return`${1===e?"hsl(":"hsla("}${Tte(this.h)}, ${100*Pte(this.s)}%, ${100*Pte(this.l)}%${1===e?")":`, ${e})`}`}}));const Ite=e=>()=>e;function Ote(e,t){return function(r){return e+r*t}}function Dte(e){return 1===(e=+e)?Rte:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):Ite(isNaN(t)?r:t)}}function Rte(e,t){var r=t-e;return r?Ote(e,r):Ite(isNaN(e)?t:e)}const Lte=function e(t){var r=Dte(t);function n(e,t){var n=r((e=yte(e)).r,(t=yte(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),s=Rte(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=s(t),e+""}}return n.gamma=e,n}(1);function Fte(e){return function(t){var r,n,i=t.length,a=new Array(i),s=new Array(i),o=new Array(i);for(r=0;r<i;++r)n=yte(t[r]),a[r]=n.r||0,s[r]=n.g||0,o[r]=n.b||0;return a=e(a),s=e(s),o=e(o),n.opacity=1,function(e){return n.r=a(e),n.g=s(e),n.b=o(e),n+""}}}Fte((function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],a=e[n+1],s=n>0?e[n-1]:2*i-a,o=n<t-1?e[n+2]:2*a-i;return Mte((r-n/t)*t,s,i,a,o)}})),Fte((function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),i=e[(n+t-1)%t],a=e[n%t],s=e[(n+1)%t],o=e[(n+2)%t];return Mte((r-n/t)*t,i,a,s,o)}}));function $te(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),s=new Array(n);for(r=0;r<i;++r)a[r]=qte(e[r],t[r]);for(;r<n;++r)s[r]=t[r];return function(e){for(r=0;r<i;++r)s[r]=a[r](e);return s}}function Bte(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function zte(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Ute(e,t){var r,n={},i={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?n[r]=qte(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}var Vte=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hte=new RegExp(Vte.source,"g");function Gte(e,t){var r,n,i,a=Vte.lastIndex=Hte.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(r=Vte.exec(e))&&(n=Hte.exec(t));)(i=n.index)>a&&(i=t.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(r=r[0])===(n=n[0])?o[s]?o[s]+=n:o[++s]=n:(o[++s]=null,l.push({i:s,x:zte(r,n)})),a=Hte.lastIndex;return a<t.length&&(i=t.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function Wte(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function qte(e,t){var r,n=typeof t;return null==t||"boolean"===n?Ite(t):("number"===n?zte:"string"===n?(r=gte(t))?(t=r,Lte):Gte:t instanceof gte?Lte:t instanceof Date?Bte:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Wte:Array.isArray(t)?$te:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Ute:zte)(e,t)}function Kte(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Zte(e){return+e}var Yte=[0,1];function Xte(e){return e}function Qte(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Jte(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=Qte(i,n),a=r(s,a)):(n=Qte(n,i),a=r(a,s)),function(e){return a(n(e))}}function ere(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=Qte(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(t){var r=Xee(e,t,1,n)-1;return a[r](i[r](t))}}function tre(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rre(){var e,t,r,n,i,a,s=Yte,o=Yte,l=qte,c=Xte;function u(){var e=Math.min(s.length,o.length);return c!==Xte&&(c=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(s[0],s[e-1])),n=e>2?ere:Jte,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?r:(i||(i=n(s.map(e),o,l)))(e(c(t)))}return d.invert=function(r){return c(t((a||(a=n(o,s.map(e),zte)))(r)))},d.domain=function(e){return arguments.length?(s=Array.from(e,Zte),u()):s.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),u()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=Kte,u()},d.clamp=function(e){return arguments.length?(c=!!e||Xte,u()):c!==Xte},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,u()}}function nre(){return rre()(Xte,Xte)}var ire,are=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sre(e){if(!(t=are.exec(e)))throw new Error("invalid format: "+e);var t;return new ore({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function ore(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function lre(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function cre(e){return(e=lre(Math.abs(e)))?e[1]:NaN}function ure(e,t){var r=lre(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}sre.prototype=ore.prototype,ore.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const dre={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ure(100*e,t),r:ure,s:function(e,t){var r=lre(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(ire=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+lre(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function hre(e){return e}var pre,fre,mre,gre=Array.prototype.map,vre=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function xre(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?hre:(t=gre.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var i=e.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(e.substring(i-=o,i+o)),!((l+=o+1)>n));)o=t[s=(s+1)%t.length];return a.reverse().join(r)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?hre:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(gre.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=sre(e)).fill,r=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,v=e.trim,x=e.type;"n"===x?(m=!0,x="g"):dre[x]||(void 0===g&&(g=12),v=!0,x="g"),(p||"0"===t&&"="===r)&&(p=!0,t="0",r="=");var y="$"===h?i:"#"===h&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b="$"===h?a:/[%p]/.test(x)?l:"",w=dre[x],_=/[defgprs%]/.test(x);function k(e){var i,a,l,h=y,k=b;if("c"===x)k=w(e)+k,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),v&&(e=function(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==d&&(S=!1),h=(S?"("===d?d:c:"-"===d||"("===d?"":d)+h,k=("s"===x?vre[8+ire/3]:"")+k+(S&&"("===d?")":""),_)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){k=(46===l?s+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}m&&!p&&(e=n(e,1/0));var j=h.length+e.length+k.length,E=j<f?new Array(f-j+1).join(t):"";switch(m&&p&&(e=n(E+e,E.length?f-k.length:1/0),E=""),r){case"<":e=h+e+k+E;break;case"=":e=h+E+e+k;break;case"^":e=E.slice(0,j=E.length>>1)+h+e+k+E.slice(j);break;default:e=E+h+e+k}return o(e)}return g=void 0===g?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return e+""},k}return{format:d,formatPrefix:function(e,t){var r=d(((e=sre(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(cre(t)/3))),i=Math.pow(10,-n),a=vre[8+n/3];return function(e){return r(i*e)+a}}}}function yre(e,t,r,n){var i,a=Vee(e,t,r);switch((n=sre(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(cre(t)/3)))-cre(Math.abs(e)))}(a,s))||(n.precision=i),mre(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,cre(t)-cre(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=function(e){return Math.max(0,-cre(Math.abs(e)))}(a))||(n.precision=i-2*("%"===n.type))}return fre(n)}function bre(e){var t=e.domain;return e.ticks=function(e){var r=t();return zee(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return yre(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,i,a=t(),s=0,o=a.length-1,l=a[s],c=a[o],u=10;for(c<l&&(i=l,l=c,c=i,i=s,s=o,o=i);u-- >0;){if((i=Uee(l,c,r))===n)return a[s]=l,a[o]=c,t(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}n=i}return e},e}function wre(){var e=nre();return e.copy=function(){return tre(e,wre())},U7.apply(e,arguments),bre(e)}function _re(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,Zte),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return _re(e).unknown(t)},e=arguments.length?Array.from(e,Zte):[0,1],bre(r)}function kre(e,t){var r,n=0,i=(e=e.slice()).length-1,a=e[n],s=e[i];return s<a&&(r=n,n=i,i=r,r=a,a=s,s=r),e[n]=t.floor(a),e[i]=t.ceil(s),e}function Sre(e){return Math.log(e)}function jre(e){return Math.exp(e)}function Ere(e){return-Math.log(-e)}function Cre(e){return-Math.exp(-e)}function Nre(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Tre(e){return(t,r)=>-e(-t,r)}function Pre(e){const t=e(Sre,jre),r=t.domain;let n,i,a=10;function s(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(a),i=function(e){return 10===e?Nre:e===Math.E?Math.exp:t=>Math.pow(e,t)}(a),r()[0]<0?(n=Tre(n),i=Tre(i),e(Ere,Cre)):e(Sre,jre),t}return t.base=function(e){return arguments.length?(a=+e,s()):a},t.domain=function(e){return arguments.length?(r(e),s()):r()},t.ticks=e=>{const t=r();let s=t[0],o=t[t.length-1];const l=o<s;l&&([s,o]=[o,s]);let c,u,d=n(s),h=n(o);const p=null==e?10:+e;let f=[];if(!(a%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1;c<a;++c)if(u=d<0?c/i(-d):c*i(d),!(u<s)){if(u>o)break;f.push(u)}}else for(;d<=h;++d)for(c=a-1;c>=1;--c)if(u=d>0?c/i(-d):c*i(d),!(u<s)){if(u>o)break;f.push(u)}2*f.length<p&&(f=zee(s,o,p))}else f=zee(d,h,Math.min(h-d,p)).map(i);return l?f.reverse():f},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===a?"s":","),"function"!==typeof r&&(a%1||null!=(r=sre(r)).precision||(r.trim=!0),r=fre(r)),e===1/0)return r;const s=Math.max(1,a*e/t.ticks().length);return e=>{let t=e/i(Math.round(n(e)));return t*a<a-.5&&(t*=a),t<=s?r(e):""}},t.nice=()=>r(kre(r(),{floor:e=>i(Math.floor(n(e))),ceil:e=>i(Math.ceil(n(e)))})),t}function Are(){const e=Pre(rre()).domain([1,10]);return e.copy=()=>tre(e,Are()).base(e.base()),U7.apply(e,arguments),e}function Mre(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ire(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ore(e){var t=1,r=e(Mre(t),Ire(t));return r.constant=function(r){return arguments.length?e(Mre(t=+r),Ire(t)):t},bre(r)}function Dre(){var e=Ore(rre());return e.copy=function(){return tre(e,Dre()).constant(e.constant())},U7.apply(e,arguments)}function Rre(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Lre(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Fre(e){return e<0?-e*e:e*e}function $re(e){var t=e(Xte,Xte),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(Xte,Xte):.5===r?e(Lre,Fre):e(Rre(r),Rre(1/r)):r},bre(t)}function Bre(){var e=$re(rre());return e.copy=function(){return tre(e,Bre()).exponent(e.exponent())},U7.apply(e,arguments),e}function zre(){return Bre.apply(null,arguments).exponent(.5)}function Ure(e){return Math.sign(e)*e*e}function Vre(){var e,t=nre(),r=[0,1],n=!1;function i(r){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(i)?e:n?Math.round(i):i}return i.invert=function(e){return t.invert(Ure(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((r=Array.from(e,Zte)).map(Ure)),i):r.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(n=!!e,i):n},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Vre(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},U7.apply(i,arguments),bre(i)}function Hre(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}function Gre(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}function Wre(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hee;if(e===Hee)return qre;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function qre(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function Kre(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=void 0===i?qre:Wre(i);n>r;){if(n-r>600){const a=n-r+1,s=t-r+1,o=Math.log(a),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(a-l)/a)*(s-a/2<0?-1:1);Kre(e,t,Math.max(r,Math.floor(t-s*l/a+c)),Math.min(n,Math.floor(t+(a-s)*l/a+c)),i)}const a=e[t];let s=r,o=n;for(Zre(e,r,t),i(e[n],a)>0&&Zre(e,r,n);s<o;){for(Zre(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}0===i(e[r],a)?Zre(e,r,o):(++o,Zre(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Zre(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Yre(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return Gre(e);if(t>=1)return Hre(e);var n,i=(n-1)*t,a=Math.floor(i),s=Hre(Kre(e,a).subarray(0,a+1));return s+(Gre(e.subarray(a+1))-s)*(i-a)}}function Xre(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kee;if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e);return s+(+r(e[a+1],a+1,e)-s)*(i-a)}}function Qre(){var e,t=[],r=[],n=[];function i(){var e=0,i=Math.max(1,r.length);for(n=new Array(i-1);++e<i;)n[e-1]=Xre(t,e/i);return a}function a(t){return null==t||isNaN(t=+t)?e:r[Xee(n,t)]}return a.invertExtent=function(e){var i=r.indexOf(e);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(Hee),i()},a.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return n.slice()},a.copy=function(){return Qre().domain(t).range(r).unknown(e)},U7.apply(a,arguments)}function Jre(){var e,t=0,r=1,n=1,i=[.5],a=[0,1];function s(t){return null!=t&&t<=t?a[Xee(i,t,0,n)]:e}function o(){var e=-1;for(i=new Array(n);++e<n;)i[e]=((e+1)*r-(e-n)*t)/(n+1);return s}return s.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,o()):[t,r]},s.range=function(e){return arguments.length?(n=(a=Array.from(e)).length-1,o()):a.slice()},s.invertExtent=function(e){var s=a.indexOf(e);return s<0?[NaN,NaN]:s<1?[t,i[0]]:s>=n?[i[n-1],r]:[i[s-1],i[s]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return Jre().domain([t,r]).range(a).unknown(e)},U7.apply(bre(s),arguments)}function ene(){var e,t=[.5],r=[0,1],n=1;function i(i){return null!=i&&i<=i?r[Xee(t,i,0,n)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),i):t.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return ene().domain(t).range(r).unknown(e)},U7.apply(i,arguments)}pre=xre({thousands:",",grouping:[3],currency:["$",""]}),fre=pre.format,mre=pre.formatPrefix;const tne=1e3,rne=6e4,nne=36e5,ine=864e5,ane=6048e5,sne=2592e6,one=31536e6,lne=new Date,cne=new Date;function une(e,t,r,n){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=e=>{const t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),i.range=(r,n,a)=>{const s=[];if(r=i.ceil(r),a=null==a?1:Math.floor(a),!(r<n)||!(a>0))return s;let o;do{s.push(o=new Date(+r)),t(r,a),e(r)}while(o<r&&r<n);return s},i.filter=r=>une((t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)}),((e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););})),r&&(i.count=(t,n)=>(lne.setTime(+t),cne.setTime(+n),e(lne),e(cne),Math.floor(r(lne,cne))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(n?t=>n(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const dne=une((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));dne.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?une((t=>{t.setTime(Math.floor(t/e)*e)}),((t,r)=>{t.setTime(+t+r*e)}),((t,r)=>(r-t)/e)):dne:null);dne.range;const hne=une((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*tne)}),((e,t)=>(t-e)/tne),(e=>e.getUTCSeconds())),pne=(hne.range,une((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tne)}),((e,t)=>{e.setTime(+e+t*rne)}),((e,t)=>(t-e)/rne),(e=>e.getMinutes()))),fne=(pne.range,une((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*rne)}),((e,t)=>(t-e)/rne),(e=>e.getUTCMinutes()))),mne=(fne.range,une((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tne-e.getMinutes()*rne)}),((e,t)=>{e.setTime(+e+t*nne)}),((e,t)=>(t-e)/nne),(e=>e.getHours()))),gne=(mne.range,une((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*nne)}),((e,t)=>(t-e)/nne),(e=>e.getUTCHours()))),vne=(gne.range,une((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*rne)/ine),(e=>e.getDate()-1))),xne=(vne.range,une((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/ine),(e=>e.getUTCDate()-1))),yne=(xne.range,une((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/ine),(e=>Math.floor(e/ine))));yne.range;function bne(e){return une((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*rne)/ane))}const wne=bne(0),_ne=bne(1),kne=bne(2),Sne=bne(3),jne=bne(4),Ene=bne(5),Cne=bne(6);wne.range,_ne.range,kne.range,Sne.range,jne.range,Ene.range,Cne.range;function Nne(e){return une((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/ane))}const Tne=Nne(0),Pne=Nne(1),Ane=Nne(2),Mne=Nne(3),Ine=Nne(4),One=Nne(5),Dne=Nne(6),Rne=(Tne.range,Pne.range,Ane.range,Mne.range,Ine.range,One.range,Dne.range,une((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()))),Lne=(Rne.range,une((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),Fne=(Lne.range,une((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));Fne.every=e=>isFinite(e=Math.floor(e))&&e>0?une((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,r)=>{t.setFullYear(t.getFullYear()+r*e)})):null;Fne.range;const $ne=une((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));$ne.every=e=>isFinite(e=Math.floor(e))&&e>0?une((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)})):null;$ne.range;function Bne(e,t,r,n,i,a){const s=[[hne,1,tne],[hne,5,5e3],[hne,15,15e3],[hne,30,3e4],[a,1,rne],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,nne],[i,3,108e5],[i,6,216e5],[i,12,432e5],[n,1,ine],[n,2,1728e5],[r,1,ane],[t,1,sne],[t,3,7776e6],[e,1,one]];function o(t,r,n){const i=Math.abs(r-t)/n,a=Wee((e=>{let[,,t]=e;return t})).right(s,i);if(a===s.length)return e.every(Vee(t/one,r/one,n));if(0===a)return dne.every(Math.max(Vee(t,r,n),1));const[o,l]=s[i/s[a-1][2]<s[a][2]/i?a-1:a];return o.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const i=r&&"function"===typeof r.range?r:o(e,t,r),a=i?i.range(e,+t+1):[];return n?a.reverse():a},o]}const[zne,Une]=Bne($ne,Lne,Tne,yne,gne,fne),[Vne,Hne]=Bne(Fne,Rne,wne,vne,mne,pne);function Gne(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Wne(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qne(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var Kne,Zne,Yne,Xne={"-":"",_:" ",0:"0"},Qne=/^\s*\d+/,Jne=/^%/,eie=/[\\^$*+?|[\]().{}]/g;function tie(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function rie(e){return e.replace(eie,"\\$&")}function nie(e){return new RegExp("^(?:"+e.map(rie).join("|")+")","i")}function iie(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function aie(e,t,r){var n=Qne.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function sie(e,t,r){var n=Qne.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function oie(e,t,r){var n=Qne.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function lie(e,t,r){var n=Qne.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function cie(e,t,r){var n=Qne.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function uie(e,t,r){var n=Qne.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function die(e,t,r){var n=Qne.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function hie(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function pie(e,t,r){var n=Qne.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function fie(e,t,r){var n=Qne.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function mie(e,t,r){var n=Qne.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function gie(e,t,r){var n=Qne.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function vie(e,t,r){var n=Qne.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function xie(e,t,r){var n=Qne.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function yie(e,t,r){var n=Qne.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function bie(e,t,r){var n=Qne.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function wie(e,t,r){var n=Qne.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function _ie(e,t,r){var n=Jne.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function kie(e,t,r){var n=Qne.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Sie(e,t,r){var n=Qne.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function jie(e,t){return tie(e.getDate(),t,2)}function Eie(e,t){return tie(e.getHours(),t,2)}function Cie(e,t){return tie(e.getHours()%12||12,t,2)}function Nie(e,t){return tie(1+vne.count(Fne(e),e),t,3)}function Tie(e,t){return tie(e.getMilliseconds(),t,3)}function Pie(e,t){return Tie(e,t)+"000"}function Aie(e,t){return tie(e.getMonth()+1,t,2)}function Mie(e,t){return tie(e.getMinutes(),t,2)}function Iie(e,t){return tie(e.getSeconds(),t,2)}function Oie(e){var t=e.getDay();return 0===t?7:t}function Die(e,t){return tie(wne.count(Fne(e)-1,e),t,2)}function Rie(e){var t=e.getDay();return t>=4||0===t?jne(e):jne.ceil(e)}function Lie(e,t){return e=Rie(e),tie(jne.count(Fne(e),e)+(4===Fne(e).getDay()),t,2)}function Fie(e){return e.getDay()}function $ie(e,t){return tie(_ne.count(Fne(e)-1,e),t,2)}function Bie(e,t){return tie(e.getFullYear()%100,t,2)}function zie(e,t){return tie((e=Rie(e)).getFullYear()%100,t,2)}function Uie(e,t){return tie(e.getFullYear()%1e4,t,4)}function Vie(e,t){var r=e.getDay();return tie((e=r>=4||0===r?jne(e):jne.ceil(e)).getFullYear()%1e4,t,4)}function Hie(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tie(t/60|0,"0",2)+tie(t%60,"0",2)}function Gie(e,t){return tie(e.getUTCDate(),t,2)}function Wie(e,t){return tie(e.getUTCHours(),t,2)}function qie(e,t){return tie(e.getUTCHours()%12||12,t,2)}function Kie(e,t){return tie(1+xne.count($ne(e),e),t,3)}function Zie(e,t){return tie(e.getUTCMilliseconds(),t,3)}function Yie(e,t){return Zie(e,t)+"000"}function Xie(e,t){return tie(e.getUTCMonth()+1,t,2)}function Qie(e,t){return tie(e.getUTCMinutes(),t,2)}function Jie(e,t){return tie(e.getUTCSeconds(),t,2)}function eae(e){var t=e.getUTCDay();return 0===t?7:t}function tae(e,t){return tie(Tne.count($ne(e)-1,e),t,2)}function rae(e){var t=e.getUTCDay();return t>=4||0===t?Ine(e):Ine.ceil(e)}function nae(e,t){return e=rae(e),tie(Ine.count($ne(e),e)+(4===$ne(e).getUTCDay()),t,2)}function iae(e){return e.getUTCDay()}function aae(e,t){return tie(Pne.count($ne(e)-1,e),t,2)}function sae(e,t){return tie(e.getUTCFullYear()%100,t,2)}function oae(e,t){return tie((e=rae(e)).getUTCFullYear()%100,t,2)}function lae(e,t){return tie(e.getUTCFullYear()%1e4,t,4)}function cae(e,t){var r=e.getUTCDay();return tie((e=r>=4||0===r?Ine(e):Ine.ceil(e)).getUTCFullYear()%1e4,t,4)}function uae(){return"+0000"}function dae(){return"%"}function hae(e){return+e}function pae(e){return Math.floor(+e/1e3)}function fae(e){return new Date(e)}function mae(e){return e instanceof Date?+e:+new Date(+e)}function gae(e,t,r,n,i,a,s,o,l,c){var u=nre(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),x=c("%b %d"),y=c("%B"),b=c("%Y");function w(e){return(l(e)<e?p:o(e)<e?f:s(e)<e?m:a(e)<e?g:n(e)<e?i(e)<e?v:x:r(e)<e?y:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,mae)):h().map(fae)},u.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var r=h();return e&&"function"===typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(kre(r,e)):u},u.copy=function(){return tre(u,gae(e,t,r,n,i,a,s,o,l,c))},u}function vae(){return U7.apply(gae(Vne,Hne,Fne,Rne,wne,vne,mne,pne,hne,Zne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xae(){return U7.apply(gae(zne,Une,$ne,Lne,Tne,xne,gne,fne,hne,Yne).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yae(){var e,t,r,n,i,a=0,s=1,o=Xte,l=!1;function c(t){return null==t||isNaN(t=+t)?i:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),c):[o(0),o(1)]}}return c.domain=function(i){return arguments.length?([a,s]=i,e=n(a=+a),t=n(s=+s),r=e===t?0:1/(t-e),c):[a,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=u(qte),c.rangeRound=u(Kte),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return n=i,e=i(a),t=i(s),r=e===t?0:1/(t-e),c}}function bae(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wae(){var e=bre(yae()(Xte));return e.copy=function(){return bae(e,wae())},V7.apply(e,arguments)}function _ae(){var e=Pre(yae()).domain([1,10]);return e.copy=function(){return bae(e,_ae()).base(e.base())},V7.apply(e,arguments)}function kae(){var e=Ore(yae());return e.copy=function(){return bae(e,kae()).constant(e.constant())},V7.apply(e,arguments)}function Sae(){var e=$re(yae());return e.copy=function(){return bae(e,Sae()).exponent(e.exponent())},V7.apply(e,arguments)}function jae(){return Sae.apply(null,arguments).exponent(.5)}function Eae(){var e=[],t=Xte;function r(r){if(null!=r&&!isNaN(r=+r))return t((Xee(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(Hee),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map(((r,n)=>t(n/(e.length-1))))},r.quantiles=function(t){return Array.from({length:t+1},((r,n)=>Yre(e,n/t)))},r.copy=function(){return Eae(t).domain(e)},V7.apply(r,arguments)}function Cae(){var e,t,r,n,i,a,s,o=0,l=.5,c=1,u=1,d=Xte,h=!1;function p(e){return isNaN(e=+e)?s:(e=.5+((e=+a(e))-t)*(u*e<u*t?n:i),d(h?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var r,n,i;return arguments.length?([r,n,i]=t,d=function(e,t){void 0===t&&(t=e,e=qte);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return a[t](e-t)}}(e,[r,n,i]),p):[d(0),d(.5),d(1)]}}return p.domain=function(s){return arguments.length?([o,l,c]=s,e=a(o=+o),t=a(l=+l),r=a(c=+c),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),u=t<e?-1:1,p):[o,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=f(qte),p.rangeRound=f(Kte),p.unknown=function(e){return arguments.length?(s=e,p):s},function(s){return a=s,e=s(o),t=s(l),r=s(c),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),u=t<e?-1:1,p}}function Nae(){var e=bre(Cae()(Xte));return e.copy=function(){return bae(e,Nae())},V7.apply(e,arguments)}function Tae(){var e=Pre(Cae()).domain([.1,1,10]);return e.copy=function(){return bae(e,Tae()).base(e.base())},V7.apply(e,arguments)}function Pae(){var e=Ore(Cae());return e.copy=function(){return bae(e,Pae()).constant(e.constant())},V7.apply(e,arguments)}function Aae(){var e=$re(Cae());return e.copy=function(){return bae(e,Aae()).exponent(e.exponent())},V7.apply(e,arguments)}function Mae(){return Aae.apply(null,arguments).exponent(.5)}function Iae(e,t){if((i=e.length)>1)for(var r,n,i,a=1,s=e[t[0]],o=s.length;a<i;++a)for(n=s,s=e[t[a]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}!function(e){Kne=function(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=nie(i),u=iie(i),d=nie(a),h=iie(a),p=nie(s),f=iie(s),m=nie(o),g=iie(o),v=nie(l),x=iie(l),y={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:jie,e:jie,f:Pie,g:zie,G:Vie,H:Eie,I:Cie,j:Nie,L:Tie,m:Aie,M:Mie,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:hae,s:pae,S:Iie,u:Oie,U:Die,V:Lie,w:Fie,W:$ie,x:null,X:null,y:Bie,Y:Uie,Z:Hie,"%":dae},b={a:function(e){return s[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:Gie,e:Gie,f:Yie,g:oae,G:cae,H:Wie,I:qie,j:Kie,L:Zie,m:Xie,M:Qie,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:hae,s:pae,S:Jie,u:eae,U:tae,V:nae,w:iae,W:aae,x:null,X:null,y:sae,Y:lae,Z:uae,"%":dae},w={a:function(e,t,r){var n=p.exec(t.slice(r));return n?(e.w=f.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=v.exec(t.slice(r));return n?(e.m=x.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return S(e,t,r,n)},d:mie,e:mie,f:wie,g:die,G:uie,H:vie,I:vie,j:gie,L:bie,m:fie,M:xie,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=u.get(n[0].toLowerCase()),r+n[0].length):-1},q:pie,Q:kie,s:Sie,S:yie,u:sie,U:oie,V:lie,w:aie,W:cie,x:function(e,t,n){return S(e,r,t,n)},X:function(e,t,r){return S(e,n,t,r)},y:die,Y:uie,Z:hie,"%":_ie};function _(e,t){return function(r){var n,i,a,s=[],o=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(i=Xne[n=e.charAt(++o)])?n=e.charAt(++o):i="e"===n?" ":"0",(a=t[n])&&(n=a(r,i)),s.push(n),l=o+1);return s.push(e.slice(l,o)),s.join("")}}function k(e,t){return function(r){var n,i,a=qne(1900,void 0,1);if(S(a,e,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(n=Wne(qne(a.y,0,1))).getUTCDay(),n=i>4||0===i?Pne.ceil(n):Pne(n),n=xne.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(i=(n=Gne(qne(a.y,0,1))).getDay(),n=i>4||0===i?_ne.ceil(n):_ne(n),n=vne.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Wne(qne(a.y,0,1)).getUTCDay():Gne(qne(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Wne(a)):Gne(a)}}function S(e,t,r,n){for(var i,a,s=0,o=t.length,l=r.length;s<o;){if(n>=l)return-1;if(37===(i=t.charCodeAt(s++))){if(i=t.charAt(s++),!(a=w[i in Xne?t.charAt(s++):i])||(n=a(e,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return y.x=_(r,y),y.X=_(n,y),y.c=_(t,y),b.x=_(r,b),b.X=_(n,b),b.c=_(t,b),{format:function(e){var t=_(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}(e),Zne=Kne.format,Kne.parse,Yne=Kne.utcFormat,Kne.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function Oae(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Dae(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Rae(e,t){return e[t]}function Lae(e){const t=[];return t.key=e,t}var Fae=r(539),$ae=r.n(Fae),Bae=r(6745),zae=r.n(Bae),Uae=r(3538),Vae=r.n(Uae),Hae=r(9853),Gae=r.n(Hae),Wae=r(8210),qae=r.n(Wae);function Kae(e){return function(e){if(Array.isArray(e))return Zae(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Zae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yae=function(e){return e},Xae={"@@functional/placeholder":!0},Qae=function(e){return e===Xae},Jae=function(e){return function t(){return 0===arguments.length||1===arguments.length&&Qae(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},ese=function e(t,r){return 1===t?r:Jae((function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter((function(e){return e!==Xae})).length;return s>=t?r.apply(void 0,i):e(t-s,Jae((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=i.map((function(e){return Qae(e)?t.shift():e}));return r.apply(void 0,Kae(a).concat(t))})))}))},tse=function(e){return ese(e.length,e)},rse=function(e,t){for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},nse=tse((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),ise=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return Yae;var n=t.reverse(),i=n[0],a=n.slice(1);return function(){return a.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},ase=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},sse=function(e){var t=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t&&i.every((function(e,r){return e===t[r]}))?r:(t=i,r=e.apply(void 0,i))}};var ose=tse((function(e,t,r){var n=+e;return n+r*(+t-n)})),lse=tse((function(e,t,r){var n=t-+e;return(r-e)/(n=n||1/0)})),cse=tse((function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))}));const use={rangeStep:function(e,t,r){for(var n=new(qae())(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a},getDigitCount:function(e){return 0===e?1:Math.floor(new(qae())(e).abs().log(10).toNumber())+1},interpolateNumber:ose,uninterpolateNumber:lse,uninterpolateTruncation:cse};function dse(e){return function(e){if(Array.isArray(e))return fse(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||pse(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hse(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(D_e){i=!0,a=D_e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}(e,t)||pse(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pse(e,t){if(e){if("string"===typeof e)return fse(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fse(e,t):void 0}}function fse(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mse(e){var t=hse(e,2),r=t[0],n=t[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function gse(e,t,r){if(e.lte(0))return new(qae())(0);var n=use.getDigitCount(e.toNumber()),i=new(qae())(10).pow(n),a=e.div(i),s=1!==n?.05:.1,o=new(qae())(Math.ceil(a.div(s).toNumber())).add(r).mul(s).mul(i);return t?o:new(qae())(Math.ceil(o))}function vse(e,t,r){var n=1,i=new(qae())(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new(qae())(10).pow(use.getDigitCount(e)-1),i=new(qae())(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new(qae())(Math.floor(e)))}else 0===e?i=new(qae())(Math.floor((t-1)/2)):r||(i=new(qae())(Math.floor(e)));var s=Math.floor((t-1)/2),o=ise(nse((function(e){return i.add(new(qae())(e-s).mul(n)).toNumber()})),rse);return o(0,t)}function xse(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(qae())(0),tickMin:new(qae())(0),tickMax:new(qae())(0)};var a,s=gse(new(qae())(t).sub(e).div(r-1),n,i);a=e<=0&&t>=0?new(qae())(0):(a=new(qae())(e).add(t).div(2)).sub(new(qae())(a).mod(s));var o=Math.ceil(a.sub(e).div(s).toNumber()),l=Math.ceil(new(qae())(t).sub(a).div(s).toNumber()),c=o+l+1;return c>r?xse(e,t,r,n,i+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:s,tickMin:a.sub(new(qae())(o).mul(s)),tickMax:a.add(new(qae())(l).mul(s))})}var yse=sse((function(e){var t=hse(e,2),r=t[0],n=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(i,2),o=hse(mse([r,n]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(dse(rse(0,i-1).map((function(){return 1/0})))):[].concat(dse(rse(0,i-1).map((function(){return-1/0}))),[c]);return r>n?ase(u):u}if(l===c)return vse(l,i,a);var d=xse(l,c,s,a),h=d.step,p=d.tickMin,f=d.tickMax,m=use.rangeStep(p,f.add(new(qae())(.1).mul(h)),h);return r>n?ase(m):m})),bse=(sse((function(e){var t=hse(e,2),r=t[0],n=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(i,2),o=hse(mse([r,n]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,n];if(l===c)return vse(l,i,a);var u=gse(new(qae())(c).sub(l).div(s-1),a,0),d=ise(nse((function(e){return new(qae())(l).add(new(qae())(e).mul(u)).toNumber()})),rse),h=d(0,s).filter((function(e){return e>=l&&e<=c}));return r>n?ase(h):h})),sse((function(e,t){var r=hse(e,2),n=r[0],i=r[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=hse(mse([n,i]),2),o=s[0],l=s[1];if(o===-1/0||l===1/0)return[n,i];if(o===l)return[o];var c=Math.max(t,2),u=gse(new(qae())(l).sub(o).div(c-1),a,0),d=[].concat(dse(use.rangeStep(new(qae())(o),new(qae())(l).sub(new(qae())(.99).mul(u)),u)),[l]);return n>i?ase(d):d}))),wse=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _se(e){return _se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_se(e)}function kse(){return kse=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kse.apply(this,arguments)}function Sse(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jse(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jse(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jse(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ese(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Cse(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ise(n.key),n)}}function Nse(e,t,r){return t=Pse(t),function(e,t){if(t&&("object"===_se(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Tse()?Reflect.construct(t,r||[],Pse(e).constructor):t.apply(e,r))}function Tse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tse=function(){return!!e})()}function Pse(e){return Pse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pse(e)}function Ase(e,t){return Ase=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ase(e,t)}function Mse(e,t,r){return(t=Ise(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ise(e){var t=function(e,t){if("object"!=_se(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_se(t)?t:t+""}var Ose=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Nse(this,r,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ase(e,t)}(r,e),n=r,i=[{key:"render",value:function(){var e=this.props,r=e.offset,n=e.layout,i=e.width,a=e.dataKey,s=e.data,o=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,u=Ese(e,wse),d=N5(u,!1);"x"===this.props.direction&&"number"!==l.type&&G5(!1);var h=s.map((function(e){var s=o(e,a),u=s.x,h=s.y,p=s.value,f=s.errorVal;if(!f)return null;var m,g,v=[];if(Array.isArray(f)){var x=Sse(f,2);m=x[0],g=x[1]}else m=g=f;if("vertical"===n){var y=l.scale,b=h+r,w=b+i,_=b-i,k=y(p-m),S=y(p+g);v.push({x1:S,y1:w,x2:S,y2:_}),v.push({x1:k,y1:b,x2:S,y2:b}),v.push({x1:k,y1:w,x2:k,y2:_})}else if("horizontal"===n){var j=c.scale,E=u+r,C=E-i,N=E+i,T=j(p-m),P=j(p+g);v.push({x1:C,y1:P,x2:N,y2:P}),v.push({x1:E,y1:T,x2:E,y2:P}),v.push({x1:C,y1:T,x2:N,y2:T})}return t.createElement(J5,kse({className:"recharts-errorBar",key:"bar-".concat(v.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},d),v.map((function(e){return t.createElement("line",kse({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return t.createElement(J5,{className:"recharts-errorBars"},h)}}],i&&Cse(n.prototype,i),a&&Cse(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.Component);function Dse(e){return Dse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dse(e)}function Rse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rse(Object(r),!0).forEach((function(t){Fse(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fse(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Dse(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Dse(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dse(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Mse(Ose,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Mse(Ose,"displayName","ErrorBar");var $se=function(e){var t=e.children,r=e.formattedGraphicalItems,n=e.legendWidth,i=e.legendContent,a=S5(t,t9);if(!a)return null;var s,o=t9.defaultProps,l=void 0!==o?Lse(Lse({},o),a.props):{};return s=a.props&&a.props.payload?a.props&&a.props.payload:"children"===i?(r||[]).reduce((function(e,t){var r=t.item,n=t.props,i=n.sectors||n.data||[];return e.concat(i.map((function(e){return{type:a.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(r||[]).map((function(e){var t=e.item,r=t.type.defaultProps,n=void 0!==r?Lse(Lse({},r),t.props):{},i=n.dataKey,a=n.name,s=n.legendType;return{inactive:n.hide,dataKey:i,type:l.iconType||s||"square",color:Kse(t),value:a||i,payload:n}})),Lse(Lse(Lse({},l),t9.getWithHeight(a,n)),{},{payload:s,item:a})};function Bse(e){return Bse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bse(e)}function zse(e){return function(e){if(Array.isArray(e))return Use(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Use(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Use(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Use(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vse(Object(r),!0).forEach((function(t){Gse(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vse(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gse(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Bse(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Bse(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bse(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wse(e,t,r){return t5()(e)||t5()(t)?r:W4(t)?B4()(e,t,r):n5()(t)?t(e):r}function qse(e,t,r,n){var i=Vae()(e,(function(e){return Wse(e,t)}));if("number"===r){var a=i.filter((function(e){return G4(e)||parseFloat(e)}));return a.length?[zae()(a),$ae()(a)]:[1/0,-1/0]}return(n?i.filter((function(e){return!t5()(e)})):i).map((function(e){return W4(e)||e instanceof Date?e:""}))}var Kse=function(e){var t,r,n=e.type.displayName,i=null!==(t=e.type)&&void 0!==t&&t.defaultProps?Hse(Hse({},e.type.defaultProps),e.props):e.props,a=i.stroke,s=i.fill;switch(n){case"Line":r=a;break;case"Area":case"Radar":r=a&&"none"!==a?a:s;break;default:r=s}return r},Zse=function(e,t,r,n,i){var a=k5(t.props.children,Ose).filter((function(e){return function(e,t,r){return!!t5()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===r?"xAxis"===t:"y"!==r||"yAxis"===t)}(n,i,e.props.direction)}));if(a&&a.length){var s=a.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var n=Wse(t,r);if(t5()(n))return e;var i=Array.isArray(n)?[zae()(n),$ae()(n)]:[n,n],a=s.reduce((function(e,r){var n=Wse(t,r,0),a=i[0]-Math.abs(Array.isArray(n)?n[0]:n),s=i[1]+Math.abs(Array.isArray(n)?n[1]:n);return[Math.min(a,e[0]),Math.max(s,e[1])]}),[1/0,-1/0]);return[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}),[1/0,-1/0])}return null},Yse=function(e,t,r,n,i){var a=t.map((function(t){var a=t.props.dataKey;return"number"===r&&a&&Zse(e,t,a,n)||qse(e,a,r,i)}));if("number"===r)return a.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var s={};return a.reduce((function(e,t){for(var r=0,n=t.length;r<n;r++)s[t[r]]||(s[t[r]]=!0,e.push(t[r]));return e}),[])},Xse=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},Qse=function(e,t,r){if(!e)return null;var n=e.scale,i=e.duplicateDomain,a=e.type,s=e.range,o="scaleBand"===e.realScaleType?n.bandwidth()/2:2,l=(t||r)&&"category"===a&&n.bandwidth?n.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null===s||void 0===s?void 0:s.length)>=2?2*V4(s[0]-s[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:n(t)+l,value:e,offset:l}})).filter((function(e){return!F4()(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:n(e)+l,value:e,index:t,offset:l}})):n.ticks&&!r?n.ticks(e.tickCount).map((function(e){return{coordinate:n(e)+l,value:e,offset:l}})):n.domain().map((function(e,t){return{coordinate:n(e)+l,value:i?i[e]:e,index:t,offset:l}}))},Jse=new WeakMap,eoe=function(e,t){if("function"!==typeof t)return e;Jse.has(e)||Jse.set(e,new WeakMap);var r=Jse.get(e);if(r.has(t))return r.get(t);var n=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,n),n},toe=1e-4,roe={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0,s=0;s<t;++s){var o=F4()(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,i,a=0,s=e[0].length;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}Iae(e,t)}},none:Iae,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,i=e[t[0]],a=i.length;n<a;++n){for(var s=0,o=0;s<r;++s)o+=e[s][n][1]||0;i[n][1]+=i[n][0]=-o/2}Iae(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,i,a=0,s=1;s<n;++s){for(var o=0,l=0,c=0;o<i;++o){for(var u=e[t[o]],d=u[s][1]||0,h=(d-(u[s-1][1]||0))/2,p=0;p<o;++p){var f=e[t[p]];h+=(f[s][1]||0)-(f[s-1][1]||0)}l+=d,c+=h*d}r[s-1][1]+=r[s-1][0]=a,l&&(a-=c/l)}r[s-1][1]+=r[s-1][0]=a,Iae(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0;a<t;++a){var s=F4()(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=i,e[a][r][1]=i+s,i=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}}},noe=function(e,t,r){var n=t.map((function(e){return e.props.dataKey})),i=roe[r],a=function(){var e=h8([]),t=Dae,r=Iae,n=Rae;function i(i){var a,s,o=Array.from(e.apply(this,arguments),Lae),l=o.length,c=-1;for(const e of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+n(e,o[a].key,c,i)]).data=e;for(a=0,s=Oae(t(o));a<l;++a)o[s[a]].index=a;return r(o,s),o}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:h8(Array.from(t)),i):e},i.value=function(e){return arguments.length?(n="function"===typeof e?e:h8(+e),i):n},i.order=function(e){return arguments.length?(t=null==e?Dae:"function"===typeof e?e:h8(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(r=null==e?Iae:e,i):r},i}().keys(n).value((function(e,t){return+Wse(e,t,0)})).order(Dae).offset(i);return a(e)};var ioe=function(e,t,r){return Object.keys(e).reduce((function(n,i){var a=e[i].stackedData.reduce((function(e,n){var i=function(e){return e.reduce((function(e,t){return[zae()(t.concat([e[0]]).filter(G4)),$ae()(t.concat([e[1]]).filter(G4))]}),[1/0,-1/0])}(n.slice(t,r+1));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(a[0],n[0]),Math.max(a[1],n[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},aoe=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,soe=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ooe=function(e,t,r){if(n5()(e))return e(t,r);if(!Array.isArray(e))return t;var n=[];if(G4(e[0]))n[0]=r?e[0]:Math.min(e[0],t[0]);else if(aoe.test(e[0])){var i=+aoe.exec(e[0])[1];n[0]=t[0]-i}else n5()(e[0])?n[0]=e[0](t[0]):n[0]=t[0];if(G4(e[1]))n[1]=r?e[1]:Math.max(e[1],t[1]);else if(soe.test(e[1])){var a=+soe.exec(e[1])[1];n[1]=t[1]+a}else n5()(e[1])?n[1]=e[1](t[1]):n[1]=t[1];return n},loe=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=V5()(t,(function(e){return e.coordinate})),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],c=i[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},coe=function(e,t,r){return e&&e.length?Gae()(e,B4()(r,"type.defaultProps.domain"))?t:e:t},uoe=function(e,t){var r=e.type.defaultProps?Hse(Hse({},e.type.defaultProps),e.props):e.props,n=r.dataKey,i=r.name,a=r.unit,s=r.formatter,o=r.tooltipType,l=r.chartType,c=r.hide;return Hse(Hse({},N5(e,!1)),{},{dataKey:n,unit:a,formatter:s,name:i||n,color:Kse(e),value:Wse(t,n),type:o,payload:t,chartType:l,hide:c})};function doe(e){return doe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},doe(e)}function hoe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function poe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hoe(Object(r),!0).forEach((function(t){foe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hoe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function foe(e,t,r){return t=function(e){var t=function(e,t){if("object"!=doe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=doe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==doe(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var moe=["Webkit","Moz","O","ms"];function goe(e){return goe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},goe(e)}function voe(){return voe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},voe.apply(this,arguments)}function xoe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yoe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xoe(Object(r),!0).forEach((function(t){joe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xoe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function boe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Eoe(n.key),n)}}function woe(e,t,r){return t=koe(t),function(e,t){if(t&&("object"===goe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_oe()?Reflect.construct(t,r||[],koe(e).constructor):t.apply(e,r))}function _oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_oe=function(){return!!e})()}function koe(e){return koe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},koe(e)}function Soe(e,t){return Soe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Soe(e,t)}function joe(e,t,r){return(t=Eoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eoe(e){var t=function(e,t){if("object"!=goe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=goe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==goe(t)?t:t+""}var Coe=function(e){return e.changedTouches&&!!e.changedTouches.length},Noe=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),joe(t=woe(this,r,[e]),"handleDrag",(function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)})),joe(t,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])})),joe(t,"handleDragEnd",(function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=t.props,r=e.endIndex,n=e.onDragEnd,i=e.startIndex;null===n||void 0===n||n({endIndex:r,startIndex:i})})),t.detachDragEndListener()})),joe(t,"handleLeaveWrapper",(function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))})),joe(t,"handleEnterSlideOrTraveller",(function(){t.setState({isTextActive:!0})})),joe(t,"handleLeaveSlideOrTraveller",(function(){t.setState({isTextActive:!1})})),joe(t,"handleSlideDragStart",(function(e){var r=Coe(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:r.pageX}),t.attachDragEndListener()})),t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(t,"startX"),endX:t.handleTravellerDragStart.bind(t,"endX")},t.state={},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Soe(e,t)}(r,e),n=r,i=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,n=e.endX,i=this.state.scaleValues,a=this.props,s=a.gap,o=a.data.length-1,l=Math.min(t,n),c=Math.max(t,n),u=r.getIndexInRange(i,l),d=r.getIndexInRange(i,c);return{startIndex:u-u%s,endIndex:d===o?o:d-d%s}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,i=t.dataKey,a=Wse(r[e],i,e);return n5()(n)?n(a,e):a}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,i=t.endX,a=this.props,s=a.x,o=a.width,l=a.travellerWidth,c=a.startIndex,u=a.endIndex,d=a.onChange,h=e.pageX-r;h>0?h=Math.min(h,s+o-l-i,s+o-l-n):h<0&&(h=Math.max(h,s-n,s-i));var p=this.getIndex({startX:n+h,endX:i+h});p.startIndex===c&&p.endIndex===u||!d||d(p),this.setState({startX:n+h,endX:i+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=Coe(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,i=t.endX,a=t.startX,s=this.state[n],o=this.props,l=o.x,c=o.width,u=o.travellerWidth,d=o.onChange,h=o.gap,p=o.data,f={startX:this.state.startX,endX:this.state.endX},m=e.pageX-r;m>0?m=Math.min(m,l+c-u-s):m<0&&(m=Math.max(m,l-s)),f[n]=s+m;var g=this.getIndex(f),v=g.startIndex,x=g.endIndex;this.setState(joe(joe({},n,s+m),"brushMoveStartX",e.pageX),(function(){d&&function(){var e=p.length-1;return"startX"===n&&(i>a?v%h===0:x%h===0)||i<a&&x===e||"endX"===n&&(i>a?x%h===0:v%h===0)||i>a&&x===e}()&&d(g)}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,i=n.scaleValues,a=n.startX,s=n.endX,o=this.state[t],l=i.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=i.length)){var u=i[c];"startX"===t&&u>=s||"endX"===t&&u<=a||this.setState(joe({},t,u),(function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,r=e.x,n=e.y,i=e.width,a=e.height,s=e.fill,o=e.stroke;return t.createElement("rect",{stroke:o,fill:s,x:r,y:n,width:i,height:a})}},{key:"renderPanorama",value:function(){var e=this.props,r=e.x,n=e.y,i=e.width,a=e.height,s=e.data,o=e.children,l=e.padding,c=t.Children.only(o);return c?t.cloneElement(c,{x:r,y:n,width:i,height:a,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(e,n){var i,a,s=this,o=this.props,l=o.y,c=o.travellerWidth,u=o.height,d=o.traveller,h=o.ariaLabel,p=o.data,f=o.startIndex,m=o.endIndex,g=Math.max(e,this.props.x),v=yoe(yoe({},N5(this.props,!1)),{},{x:g,y:l,width:c,height:u}),x=h||"Min value: ".concat(null===(i=p[f])||void 0===i?void 0:i.name,", Max value: ").concat(null===(a=p[m])||void 0===a?void 0:a.name);return t.createElement(J5,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(d,v))}},{key:"renderSlide",value:function(e,r){var n=this.props,i=n.y,a=n.height,s=n.stroke,o=n.travellerWidth,l=Math.min(e,r)+o,c=Math.max(Math.abs(r-e)-o,0);return t.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:i,width:c,height:a})}},{key:"renderText",value:function(){var e=this.props,r=e.startIndex,n=e.endIndex,i=e.y,a=e.height,s=e.travellerWidth,o=e.stroke,l=this.state,c=l.startX,u=l.endX,d={pointerEvents:"none",fill:o};return t.createElement(J5,{className:"recharts-brush-texts"},t.createElement(Ree,voe({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,u)-5,y:i+a/2},d),this.getTextOfTick(r)),t.createElement(Ree,voe({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,u)+s+5,y:i+a/2},d),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,r=e.data,n=e.className,i=e.children,a=e.x,s=e.y,o=e.width,l=e.height,c=e.alwaysShowText,u=this.state,d=u.startX,h=u.endX,p=u.isTextActive,f=u.isSlideMoving,m=u.isTravellerMoving,g=u.isTravellerFocused;if(!r||!r.length||!G4(a)||!G4(s)||!G4(o)||!G4(l)||o<=0||l<=0)return null;var v=xi("recharts-brush",n),x=1===t.Children.count(i),y=function(e,t){if(!e)return null;var r=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),n=moe.reduce((function(e,n){return poe(poe({},e),{},foe({},n+r,t))}),{});return n[e]=t,n}("userSelect","none");return t.createElement(J5,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(d,h),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(h,"endX"),(p||f||m||g||c)&&this.renderText())}}],a=[{key:"renderDefaultTraveller",value:function(e){var r=e.x,n=e.y,i=e.width,a=e.height,s=e.stroke,o=Math.floor(n+a/2)-1;return t.createElement(t.Fragment,null,t.createElement("rect",{x:r,y:n,width:i,height:a,fill:s,stroke:"none"}),t.createElement("line",{x1:r+1,y1:o,x2:r+i-1,y2:o,fill:"none",stroke:"#fff"}),t.createElement("line",{x1:r+1,y1:o+2,x2:r+i-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):n5()(e)?e(n):r.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,i=e.x,a=e.travellerWidth,s=e.updateId,o=e.startIndex,l=e.endIndex;if(r!==t.prevData||s!==t.prevUpdateId)return yoe({prevData:r,prevTravellerWidth:a,prevUpdateId:s,prevX:i,prevWidth:n},r&&r.length?function(e){var t=e.data,r=e.startIndex,n=e.endIndex,i=e.x,a=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=J7().domain(z5()(0,o)).range([i,i+a-s]),c=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(n),scale:l,scaleValues:c}}({data:r,width:n,x:i,travellerWidth:a,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||i!==t.prevX||a!==t.prevTravellerWidth)){t.scale.range([i,i+n-a]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:r,prevTravellerWidth:a,prevUpdateId:s,prevX:i,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=0,n=e.length-1;n-r>1;){var i=Math.floor((r+n)/2);e[i]>t?n=i:r=i}return t>=e[n]?n:r}}],i&&boe(n.prototype,i),a&&boe(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.PureComponent);function Toe(e){return Toe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Toe(e)}function Poe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Aoe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Poe(Object(r),!0).forEach((function(t){Moe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Poe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Moe(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Toe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Toe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Toe(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ioe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ooe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ooe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ooe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}joe(Noe,"displayName","Brush"),joe(Noe,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Doe=Math.PI/180,Roe=function(e){return 180*e/Math.PI},Loe=function(e,t,r,n){return{x:e+Math.cos(-Doe*n)*r,y:t+Math.sin(-Doe*n)*r}},Foe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},$oe=function(e,t){var r=e.x,n=e.y,i=t.cx,a=t.cy,s=function(e,t){var r=e.x,n=e.y,i=t.x,a=t.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(n-a,2))}({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s};var o=(r-i)/s,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:s,angle:Roe(l),angleInRadian:l}},Boe=function(e,t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),a=Math.floor(n/360);return e+360*Math.min(i,a)},zoe=function(e,t){var r=e.x,n=e.y,i=$oe({x:r,y:n},t),a=i.radius,s=i.angle,o=t.innerRadius,l=t.outerRadius;if(a<o||a>l)return!1;if(0===a)return!0;var c,u=function(e){var t=e.startAngle,r=e.endAngle,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-360*a,endAngle:r-360*a}}(t),d=u.startAngle,h=u.endAngle,p=s;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;c=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;c=p>=h&&p<=d}return c?Aoe(Aoe({},t),{},{radius:a,angle:Boe(p,t)}):null},Uoe=function(e){return(0,t.isValidElement)(e)||n5()(e)||"boolean"===typeof e?"":e.className};function Voe(e){return Voe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Voe(e)}var Hoe=["offset"];function Goe(e){return function(e){if(Array.isArray(e))return Woe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Woe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Woe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Woe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qoe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Koe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zoe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Koe(Object(r),!0).forEach((function(t){Yoe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Koe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yoe(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Voe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Voe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Voe(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xoe(){return Xoe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xoe.apply(this,arguments)}var Qoe=function(e,r,n){var i,a,s=e.position,o=e.viewBox,l=e.offset,c=e.className,u=o,d=u.cx,h=u.cy,p=u.innerRadius,f=u.outerRadius,m=u.startAngle,g=u.endAngle,v=u.clockWise,x=(p+f)/2,y=function(e,t){return V4(t-e)*Math.min(Math.abs(t-e),360)}(m,g),b=y>=0?1:-1;"insideStart"===s?(i=m+b*l,a=v):"insideEnd"===s?(i=g-b*l,a=!v):"end"===s&&(i=g+b*l,a=v),a=y<=0?a:!a;var w=Loe(d,h,x,i),_=Loe(d,h,x,i+359*(a?1:-1)),k="M".concat(w.x,",").concat(w.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(a?0:1,",\n    ").concat(_.x,",").concat(_.y),S=t5()(e.id)?K4("recharts-radial-line-"):e.id;return t.createElement("text",Xoe({},n,{dominantBaseline:"central",className:xi("recharts-radial-bar-label",c)}),t.createElement("defs",null,t.createElement("path",{id:S,d:k})),t.createElement("textPath",{xlinkHref:"#".concat(S)},r))};function Joe(e){var r,n=e.offset,i=Zoe({offset:void 0===n?5:n},qoe(e,Hoe)),a=i.viewBox,s=i.position,o=i.value,l=i.children,c=i.content,u=i.className,d=void 0===u?"":u,h=i.textBreakAll;if(!a||t5()(o)&&t5()(l)&&!(0,t.isValidElement)(c)&&!n5()(c))return null;if((0,t.isValidElement)(c))return(0,t.cloneElement)(c,i);if(n5()(c)){if(r=(0,t.createElement)(c,i),(0,t.isValidElement)(r))return r}else r=function(e){var t=e.value,r=e.formatter,n=t5()(e.children)?t:e.children;return n5()(r)?r(n):n}(i);var p=function(e){return"cx"in e&&G4(e.cx)}(a),f=N5(i,!0);if(p&&("insideStart"===s||"insideEnd"===s||"end"===s))return Qoe(i,r,f);var m=p?function(e){var t=e.viewBox,r=e.offset,n=e.position,i=t,a=i.cx,s=i.cy,o=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===n){var u=Loe(a,s,l+r,c),d=u.x;return{x:d,y:u.y,textAnchor:d>=a?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=Loe(a,s,(o+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(i):function(e){var t=e.viewBox,r=e.parentViewBox,n=e.offset,i=e.position,a=t,s=a.x,o=a.y,l=a.width,c=a.height,u=c>=0?1:-1,d=u*n,h=u>0?"end":"start",p=u>0?"start":"end",f=l>=0?1:-1,m=f*n,g=f>0?"end":"start",v=f>0?"start":"end";if("top"===i)return Zoe(Zoe({},{x:s+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===i)return Zoe(Zoe({},{x:s+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:p}),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{});if("left"===i){var x={x:s-m,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return Zoe(Zoe({},x),r?{width:Math.max(x.x-r.x,0),height:c}:{})}if("right"===i){var y={x:s+l+m,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return Zoe(Zoe({},y),r?{width:Math.max(r.x+r.width-y.x,0),height:c}:{})}var b=r?{width:l,height:c}:{};return"insideLeft"===i?Zoe({x:s+m,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},b):"insideRight"===i?Zoe({x:s+l-m,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===i?Zoe({x:s+l/2,y:o+d,textAnchor:"middle",verticalAnchor:p},b):"insideBottom"===i?Zoe({x:s+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:h},b):"insideTopLeft"===i?Zoe({x:s+m,y:o+d,textAnchor:v,verticalAnchor:p},b):"insideTopRight"===i?Zoe({x:s+l-m,y:o+d,textAnchor:g,verticalAnchor:p},b):"insideBottomLeft"===i?Zoe({x:s+m,y:o+c-d,textAnchor:v,verticalAnchor:h},b):"insideBottomRight"===i?Zoe({x:s+l-m,y:o+c-d,textAnchor:g,verticalAnchor:h},b):a5()(i)&&(G4(i.x)||H4(i.x))&&(G4(i.y)||H4(i.y))?Zoe({x:s+Z4(i.x,l),y:o+Z4(i.y,c),textAnchor:"end",verticalAnchor:"end"},b):Zoe({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(i);return t.createElement(Ree,Xoe({className:xi("recharts-label",d)},f,m,{breakAll:h}),r)}Joe.displayName="Label";var ele=function(e){var t=e.cx,r=e.cy,n=e.angle,i=e.startAngle,a=e.endAngle,s=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,d=e.y,h=e.top,p=e.left,f=e.width,m=e.height,g=e.clockWise,v=e.labelViewBox;if(v)return v;if(G4(f)&&G4(m)){if(G4(u)&&G4(d))return{x:u,y:d,width:f,height:m};if(G4(h)&&G4(p))return{x:h,y:p,width:f,height:m}}return G4(u)&&G4(d)?{x:u,y:d,width:0,height:0}:G4(t)&&G4(r)?{cx:t,cy:r,startAngle:i||n||0,endAngle:a||n||0,innerRadius:l||0,outerRadius:c||o||s||0,clockWise:g}:e.viewBox?e.viewBox:{}};Joe.parseViewBox=ele,Joe.renderCallByParent=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=ele(e),s=k5(i,Joe).map((function(e,n){return(0,t.cloneElement)(e,{viewBox:r||a,key:"label-".concat(n)})}));if(!n)return s;var o=function(e,r){return e?!0===e?t.createElement(Joe,{key:"label-implicit",viewBox:r}):W4(e)?t.createElement(Joe,{key:"label-implicit",viewBox:r,value:e}):(0,t.isValidElement)(e)?e.type===Joe?(0,t.cloneElement)(e,{key:"label-implicit",viewBox:r}):t.createElement(Joe,{key:"label-implicit",content:e,viewBox:r}):n5()(e)?t.createElement(Joe,{key:"label-implicit",content:e,viewBox:r}):a5()(e)?t.createElement(Joe,Xoe({viewBox:r},e,{key:"label-implicit"})):null:null}(e.label,r||a);return[o].concat(Goe(s))};var tle=function(e,t){var r=e.alwaysShow,n=e.ifOverflow;return r&&(n="extendDomain"),n===t},rle=r(1733),nle=r.n(rle),ile=r(7002),ale=r.n(ile);function sle(e){return sle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sle(e)}function ole(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dle(n.key),n)}}function lle(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cle(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lle(Object(r),!0).forEach((function(t){ule(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lle(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ule(e,t,r){return(t=dle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dle(e){var t=function(e,t){if("object"!=sle(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sle(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sle(t)?t:t+""}var hle=function(e,t){var r=e.x,n=e.y,i=t.x,a=t.y;return{x:Math.min(r,i),y:Math.min(n,a),width:Math.abs(i-r),height:Math.abs(a-n)}},ple=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,r=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,n=t.position;if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}],n=[{key:"create",value:function(t){return new e(t)}}],r&&ole(t.prototype,r),n&&ole(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();ule(ple,"EPS",1e-4);var fle=function(e){var t=Object.keys(e).reduce((function(t,r){return cle(cle({},t),{},ule({},r,ple.create(e[r])))}),{});return cle(cle({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.bandAware,i=r.position;return nle()(e,(function(e,r){return t[r].apply(e,{bandAware:n,position:i})}))},isInRange:function(e){return ale()(e,(function(e,r){return t[r].isInRange(e)}))}})};function mle(){return mle=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mle.apply(this,arguments)}function gle(e){return gle="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gle(e)}function vle(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xle(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vle(Object(r),!0).forEach((function(t){Sle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vle(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yle(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jle(n.key),n)}}function ble(e,t,r){return t=_le(t),function(e,t){if(t&&("object"===gle(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wle()?Reflect.construct(t,r||[],_le(e).constructor):t.apply(e,r))}function wle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wle=function(){return!!e})()}function _le(e){return _le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_le(e)}function kle(e,t){return kle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kle(e,t)}function Sle(e,t,r){return(t=jle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jle(e){var t=function(e,t){if("object"!=gle(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gle(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gle(t)?t:t+""}var Ele=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),ble(this,r,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kle(e,t)}(r,e),n=r,i=[{key:"render",value:function(){var e=this.props,n=e.x,i=e.y,a=e.r,s=e.alwaysShow,o=e.clipPathId,l=W4(n),c=W4(i);if(J4(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var u=function(e){var t=e.x,r=e.y,n=e.xAxis,i=e.yAxis,a=fle({x:n.scale,y:i.scale}),s=a.apply({x:t,y:r},{bandAware:!0});return tle(e,"discard")&&!a.isInRange(s)?null:s}(this.props);if(!u)return null;var d=u.x,h=u.y,p=this.props,f=p.shape,m=p.className,g=xle(xle({clipPath:tle(this.props,"hidden")?"url(#".concat(o,")"):void 0},N5(this.props,!0)),{},{cx:d,cy:h});return t.createElement(J5,{className:xi("recharts-reference-dot",m)},r.renderDot(f,g),Joe.renderCallByParent(this.props,{x:d-a,y:h-a,width:2*a,height:2*a}))}}],i&&yle(n.prototype,i),a&&yle(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.Component);Sle(Ele,"displayName","ReferenceDot"),Sle(Ele,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),Sle(Ele,"renderDot",(function(e,r){return t.isValidElement(e)?t.cloneElement(e,r):n5()(e)?e(r):t.createElement(n9,mle({},r,{cx:r.cx,cy:r.cy,className:"recharts-reference-dot-dot"}))}));var Cle=r(4597),Nle=r.n(Cle),Tle=(r(8990),r(5797)),Ple=r.n(Tle)()((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}));var Ale=(0,t.createContext)(void 0),Mle=(0,t.createContext)(void 0),Ile=(0,t.createContext)(void 0),Ole=(0,t.createContext)({}),Dle=(0,t.createContext)(void 0),Rle=(0,t.createContext)(0),Lle=(0,t.createContext)(0),Fle=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,s=e.clipPathId,o=e.children,l=e.width,c=e.height,u=Ple(a);return t.createElement(Ale.Provider,{value:n},t.createElement(Mle.Provider,{value:i},t.createElement(Ole.Provider,{value:a},t.createElement(Ile.Provider,{value:u},t.createElement(Dle.Provider,{value:s},t.createElement(Rle.Provider,{value:c},t.createElement(Lle.Provider,{value:l},o)))))))};function $le(e){return $le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$le(e)}function Ble(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kle(n.key),n)}}function zle(e,t,r){return t=Vle(t),function(e,t){if(t&&("object"===$le(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ule()?Reflect.construct(t,r||[],Vle(e).constructor):t.apply(e,r))}function Ule(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ule=function(){return!!e})()}function Vle(e){return Vle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vle(e)}function Hle(e,t){return Hle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hle(e,t)}function Gle(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wle(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gle(Object(r),!0).forEach((function(t){qle(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gle(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qle(e,t,r){return(t=Kle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kle(e){var t=function(e,t){if("object"!=$le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$le(t)?t:t+""}function Zle(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Yle(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yle(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yle(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xle(){return Xle=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xle.apply(this,arguments)}function Qle(e){var r=e.x,n=e.y,i=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=(0,t.useContext)(Dle),d=function(e){var r=(0,t.useContext)(Ale);null==r&&G5(!1);var n=r[e];return null==n&&G5(!1),n}(a),h=function(e){var r=(0,t.useContext)(Mle);null==r&&G5(!1);var n=r[e];return null==n&&G5(!1),n}(s),p=(0,t.useContext)(Ile);if(!u||!p)return null;J4(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=function(e,t,r,n,i,a,s,o,l){var c=i.x,u=i.y,d=i.width,h=i.height;if(r){var p=l.y,f=e.y.apply(p,{position:a});if(tle(l,"discard")&&!e.y.isInRange(f))return null;var m=[{x:c+d,y:f},{x:c,y:f}];return"left"===o?m.reverse():m}if(t){var g=l.x,v=e.x.apply(g,{position:a});if(tle(l,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:u+h},{x:v,y:u}];return"top"===s?x.reverse():x}if(n){var y=l.segment.map((function(t){return e.apply(t,{position:a})}));return tle(l,"discard")&&Nle()(y,(function(t){return!e.isInRange(t)}))?null:y}return null}(fle({x:d.scale,y:h.scale}),W4(r),W4(n),i&&2===i.length,p,e.position,d.orientation,h.orientation,e);if(!f)return null;var m=Zle(f,2),g=m[0],v=g.x,x=g.y,y=m[1],b=y.x,w=y.y,_=Wle(Wle({clipPath:tle(e,"hidden")?"url(#".concat(u,")"):void 0},N5(e,!0)),{},{x1:v,y1:x,x2:b,y2:w});return t.createElement(J5,{className:xi("recharts-reference-line",l)},function(e,r){return t.isValidElement(e)?t.cloneElement(e,r):n5()(e)?e(r):t.createElement("line",Xle({},r,{className:"recharts-reference-line-line"}))}(o,_),Joe.renderCallByParent(e,function(e){var t=e.x1,r=e.y1,n=e.x2,i=e.y2;return hle({x:t,y:r},{x:n,y:i})}({x1:v,y1:x,x2:b,y2:w})))}var Jle=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),zle(this,r,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hle(e,t)}(r,e),n=r,(i=[{key:"render",value:function(){return t.createElement(Qle,this.props)}}])&&Ble(n.prototype,i),a&&Ble(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.Component);function ece(){return ece=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ece.apply(this,arguments)}function tce(e){return tce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tce(e)}function rce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rce(Object(r),!0).forEach((function(t){cce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ice(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uce(n.key),n)}}function ace(e,t,r){return t=oce(t),function(e,t){if(t&&("object"===tce(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sce()?Reflect.construct(t,r||[],oce(e).constructor):t.apply(e,r))}function sce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sce=function(){return!!e})()}function oce(e){return oce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oce(e)}function lce(e,t){return lce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lce(e,t)}function cce(e,t,r){return(t=uce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uce(e){var t=function(e,t){if("object"!=tce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tce(t)?t:t+""}qle(Jle,"displayName","ReferenceLine"),qle(Jle,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var dce=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),ace(this,r,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lce(e,t)}(r,e),n=r,(i=[{key:"render",value:function(){var e=this.props,n=e.x1,i=e.x2,a=e.y1,s=e.y2,o=e.className,l=e.alwaysShow,c=e.clipPathId;J4(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=W4(n),d=W4(i),h=W4(a),p=W4(s),f=this.props.shape;if(!u&&!d&&!h&&!p&&!f)return null;var m=function(e,t,r,n,i){var a=i.x1,s=i.x2,o=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis;if(!c||!u)return null;var d=fle({x:c.scale,y:u.scale}),h={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(o,{position:"start"}):d.y.rangeMin},p={x:t?d.x.apply(s,{position:"end"}):d.x.rangeMax,y:n?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!tle(i,"discard")||d.isInRange(h)&&d.isInRange(p)?hle(h,p):null}(u,d,h,p,this.props);if(!m&&!f)return null;var g=tle(this.props,"hidden")?"url(#".concat(c,")"):void 0;return t.createElement(J5,{className:xi("recharts-reference-area",o)},r.renderRect(f,nce(nce({clipPath:g},N5(this.props,!0)),m)),Joe.renderCallByParent(this.props,m))}}])&&ice(n.prototype,i),a&&ice(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.Component);function hce(e){return function(e){if(Array.isArray(e))return pce(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return pce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pce(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}cce(dce,"displayName","ReferenceArea"),cce(dce,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),cce(dce,"renderRect",(function(e,r){return t.isValidElement(e)?t.cloneElement(e,r):n5()(e)?e(r):t.createElement(z7,ece({},r,{className:"recharts-reference-area-rect"}))}));var fce=function(e,t,r,n,i){var a=k5(e,Jle),s=k5(e,Ele),o=[].concat(hce(a),hce(s)),l=k5(e,dce),c="".concat(n,"Id"),u=n[0],d=t;if(o.length&&(d=o.reduce((function(e,t){if(t.props[c]===r&&tle(t.props,"extendDomain")&&G4(t.props[u])){var n=t.props[u];return[Math.min(e[0],n),Math.max(e[1],n)]}return e}),d)),l.length){var h="".concat(u,"1"),p="".concat(u,"2");d=l.reduce((function(e,t){if(t.props[c]===r&&tle(t.props,"extendDomain")&&G4(t.props[h])&&G4(t.props[p])){var n=t.props[h],i=t.props[p];return[Math.min(e[0],n,i),Math.max(e[1],n,i)]}return e}),d)}return i&&i.length&&(d=i.reduce((function(e,t){return G4(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),d)),d},mce=r(7283),gce=new(r.n(mce)()),vce="recharts.syncMouseEvents";function xce(e){return xce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xce(e)}function yce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wce(n.key),n)}}function bce(e,t,r){return(t=wce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wce(e){var t=function(e,t){if("object"!=xce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xce(t)?t:t+""}var _ce=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),bce(this,"activeIndex",0),bce(this,"coordinateList",[]),bce(this,"layout","horizontal")},t=[{key:"setDetails",value:function(e){var t,r=e.coordinateList,n=void 0===r?null:r,i=e.container,a=void 0===i?null:i,s=e.layout,o=void 0===s?null:s,l=e.offset,c=void 0===l?null:l,u=e.mouseHandlerCallback,d=void 0===u?null:u;this.coordinateList=null!==(t=null!==n&&void 0!==n?n:this.coordinateList)&&void 0!==t?t:[],this.container=null!==a&&void 0!==a?a:this.container,this.layout=null!==o&&void 0!==o?o:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==d&&void 0!==d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var r=this.container.getBoundingClientRect(),n=r.x,i=r.y,a=r.height,s=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=n+s+o,u=i+this.offset.top+a/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}],t&&yce(e.prototype,t),r&&yce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();var kce=r(2322),Sce=r.n(kce),jce=r(6361),Ece=r.n(jce);function Cce(e){return Cce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cce(e)}function Nce(){return Nce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nce.apply(this,arguments)}function Tce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ace(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ace(Object(r),!0).forEach((function(t){Ice(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ace(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ice(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Cce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Cce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cce(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oce=function(e,t,r,n,i){var a,s=r-n;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+r,",").concat(t),a+="L ".concat(e+r-s/2,",").concat(t+i),a+="L ".concat(e+r-s/2-n,",").concat(t+i),a+="L ".concat(e,",").concat(t," Z")},Dce={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rce=function(e){var r=Mce(Mce({},Dce),e),n=(0,t.useRef)(),i=Tce((0,t.useState)(-1),2),a=i[0],s=i[1];(0,t.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(D_e){}}),[]);var o=r.x,l=r.y,c=r.upperWidth,u=r.lowerWidth,d=r.height,h=r.className,p=r.animationEasing,f=r.animationDuration,m=r.animationBegin,g=r.isUpdateAnimationActive;if(o!==+o||l!==+l||c!==+c||u!==+u||d!==+d||0===c&&0===u||0===d)return null;var v=xi("recharts-trapezoid",h);return g?t.createElement(P7,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:o,y:l},to:{upperWidth:c,lowerWidth:u,height:d,x:o,y:l},duration:f,animationEasing:p,isActive:g},(function(e){var i=e.upperWidth,s=e.lowerWidth,o=e.height,l=e.x,c=e.y;return t.createElement(P7,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,easing:p},t.createElement("path",Nce({},N5(r,!0),{className:v,d:Oce(l,c,i,s,o),ref:n})))})):t.createElement("g",null,t.createElement("path",Nce({},N5(r,!0),{className:v,d:Oce(o,l,c,u,d)})))};function Lce(e){return Lce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lce(e)}function Fce(){return Fce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fce.apply(this,arguments)}function $ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$ce(Object(r),!0).forEach((function(t){zce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zce(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Lce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lce(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Uce=function(e){var t=e.cx,r=e.cy,n=e.radius,i=e.angle,a=e.sign,s=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(s?1:-1)+n,u=Math.asin(o/c)/Doe,d=l?i:i+a*u,h=l?i-a*u:i;return{center:Loe(t,r,c,d),circleTangency:Loe(t,r,n,d),lineTangency:Loe(t,r,c*Math.cos(u*Doe),h),theta:u}},Vce=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,i=e.outerRadius,a=e.startAngle,s=function(e,t){return V4(t-e)*Math.min(Math.abs(t-e),359.999)}(a,e.endAngle),o=a+s,l=Loe(t,r,i,a),c=Loe(t,r,i,o),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(a>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(n>0){var d=Loe(t,r,n,a),h=Loe(t,r,n,o);u+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(a<=o),",\n            ").concat(d.x,",").concat(d.y," Z")}else u+="L ".concat(t,",").concat(r," Z");return u},Hce={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Gce=function(e){var r=Bce(Bce({},Hce),e),n=r.cx,i=r.cy,a=r.innerRadius,s=r.outerRadius,o=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,u=r.startAngle,d=r.endAngle,h=r.className;if(s<a||u===d)return null;var p,f=xi("recharts-sector",h),m=s-a,g=Z4(o,m,0,!0);return p=g>0&&Math.abs(u-d)<360?function(e){var t=e.cx,r=e.cy,n=e.innerRadius,i=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=V4(c-l),d=Uce({cx:t,cy:r,radius:i,angle:l,sign:u,cornerRadius:a,cornerIsExternal:o}),h=d.circleTangency,p=d.lineTangency,f=d.theta,m=Uce({cx:t,cy:r,radius:i,angle:c,sign:-u,cornerRadius:a,cornerIsExternal:o}),g=m.circleTangency,v=m.lineTangency,x=m.theta,y=o?Math.abs(l-c):Math.abs(l-c)-f-x;if(y<0)return s?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*a,",0\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*-a,",0\n      "):Vce({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:c});var b="M ".concat(p.x,",").concat(p.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,"\n  ");if(n>0){var w=Uce({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),_=w.circleTangency,k=w.lineTangency,S=w.theta,j=Uce({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),E=j.circleTangency,C=j.lineTangency,N=j.theta,T=o?Math.abs(l-c):Math.abs(l-c)-S-N;if(T<0&&0===a)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+="L".concat(C.x,",").concat(C.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(E.x,",").concat(E.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(T>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"Z")}else b+="L".concat(t,",").concat(r,"Z");return b}({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):Vce({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),t.createElement("path",Fce({},N5(r,!0),{className:f,d:p,role:"img"}))},Wce=["option","shapeType","propTransformer","activeClassName","isActive"];function qce(e){return qce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qce(e)}function Kce(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Zce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zce(Object(r),!0).forEach((function(t){Xce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xce(e,t,r){return t=function(e){var t=function(e,t){if("object"!=qce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qce(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qce(e,t){return Yce(Yce({},t),e)}function Jce(e){var r=e.shapeType,n=e.elementProps;switch(r){case"rectangle":return t.createElement(z7,n);case"trapezoid":return t.createElement(Rce,n);case"sector":return t.createElement(Gce,n);case"symbols":if(function(e){return"symbols"===e}(r))return t.createElement(T8,n);break;default:return null}}function eue(e){var r,n=e.option,i=e.shapeType,a=e.propTransformer,s=void 0===a?Qce:a,o=e.activeClassName,l=void 0===o?"recharts-active-shape":o,c=e.isActive,u=Kce(e,Wce);if((0,t.isValidElement)(n))r=(0,t.cloneElement)(n,Yce(Yce({},u),function(e){return(0,t.isValidElement)(e)?e.props:e}(n)));else if(n5()(n))r=n(u);else if(Sce()(n)&&!Ece()(n)){var d=s(n,u);r=t.createElement(Jce,{shapeType:i,elementProps:d})}else{var h=u;r=t.createElement(Jce,{shapeType:i,elementProps:h})}return c?t.createElement(J5,{className:l},r):r}function tue(e,t){return null!=t&&"trapezoids"in e.props}function rue(e,t){return null!=t&&"sectors"in e.props}function nue(e,t){return null!=t&&"points"in e.props}function iue(e,t){var r,n,i=e.x===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,a=e.y===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.y)||e.y===t.y;return i&&a}function aue(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function sue(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function oue(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=function(e,t){var r;return tue(e,t)?r="trapezoids":rue(e,t)?r="sectors":nue(e,t)&&(r="points"),r}(r,t),a=function(e,t){var r,n;return tue(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:rue(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:nue(e,t)?t.payload:{}}(r,t),s=n.filter((function(e,n){var s=Gae()(a,e),o=r.props[i].filter((function(e){var n=function(e,t){var r;return tue(e,t)?r=iue:rue(e,t)?r=aue:nue(e,t)&&(r=sue),r}(r,t);return n(e,t)})),l=r.props[i].indexOf(o[o.length-1]);return s&&n===l}));return n.indexOf(s[s.length-1])}function lue(){}function cue(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function uue(e){this._context=e}function due(e){this._context=e}function hue(e){this._context=e}uue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cue(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cue(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},due.prototype={areaStart:lue,areaEnd:lue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cue(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},hue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:cue(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class pue{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function fue(e){this._context=e}function mue(e){this._context=e}function gue(e){return new mue(e)}function vue(e){return e<0?-1:1}function xue(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(vue(a)+vue(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function yue(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function bue(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function wue(e){this._context=e}function _ue(e){this._context=new kue(e)}function kue(e){this._context=e}function Sue(e){this._context=e}function jue(e){var t,r,n=e.length-1,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Eue(e,t){this._context=e,this._t=t}function Cue(e){return e[0]}function Nue(e){return e[1]}function Tue(e,t){var r=h8(!0),n=null,i=gue,a=null,s=y8(o);function o(o){var l,c,u,d=(o=Oae(o)).length,h=!1;for(null==n&&(a=i(u=s())),l=0;l<=d;++l)!(l<d&&r(c=o[l],l,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(c,l,o),+t(c,l,o));if(u)return a=null,u+""||null}return e="function"===typeof e?e:void 0===e?Cue:h8(e),t="function"===typeof t?t:void 0===t?Nue:h8(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:h8(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:h8(+e),o):t},o.defined=function(e){return arguments.length?(r="function"===typeof e?e:h8(!!e),o):r},o.curve=function(e){return arguments.length?(i=e,null!=n&&(a=i(n)),o):i},o.context=function(e){return arguments.length?(null==e?n=a=null:a=i(n=e),o):n},o}function Pue(e,t,r){var n=null,i=h8(!0),a=null,s=gue,o=null,l=y8(c);function c(c){var u,d,h,p,f,m=(c=Oae(c)).length,g=!1,v=new Array(m),x=new Array(m);for(null==a&&(o=s(f=l())),u=0;u<=m;++u){if(!(u<m&&i(p=c[u],u,c))===g)if(g=!g)d=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=u-1;h>=d;--h)o.point(v[h],x[h]);o.lineEnd(),o.areaEnd()}g&&(v[u]=+e(p,u,c),x[u]=+t(p,u,c),o.point(n?+n(p,u,c):v[u],r?+r(p,u,c):x[u]))}if(f)return o=null,f+""||null}function u(){return Tue().defined(i).curve(s).context(a)}return e="function"===typeof e?e:void 0===e?Cue:h8(+e),t="function"===typeof t?t:h8(void 0===t?0:+t),r="function"===typeof r?r:void 0===r?Nue:h8(+r),c.x=function(t){return arguments.length?(e="function"===typeof t?t:h8(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:h8(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:h8(+e),c):n},c.y=function(e){return arguments.length?(t="function"===typeof e?e:h8(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:h8(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:h8(+e),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(e){return arguments.length?(i="function"===typeof e?e:h8(!!e),c):i},c.curve=function(e){return arguments.length?(s=e,null!=a&&(o=s(a)),c):s},c.context=function(e){return arguments.length?(null==e?a=o=null:o=s(a=e),c):a},c}function Aue(e){return Aue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aue(e)}function Mue(){return Mue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mue.apply(this,arguments)}function Iue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Iue(Object(r),!0).forEach((function(t){Due(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Due(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Aue(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Aue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Aue(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}fue.prototype={areaStart:lue,areaEnd:lue,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},mue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},wue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bue(this,this._t0,yue(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bue(this,yue(this,r=xue(this,e,t)),r);break;default:bue(this,this._t0,r=xue(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(_ue.prototype=Object.create(wue.prototype)).point=function(e,t){wue.prototype.point.call(this,t,e)},kue.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}},Sue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=jue(e),i=jue(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Eue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var Rue={curveBasisClosed:function(e){return new due(e)},curveBasisOpen:function(e){return new hue(e)},curveBasis:function(e){return new uue(e)},curveBumpX:function(e){return new pue(e,!0)},curveBumpY:function(e){return new pue(e,!1)},curveLinearClosed:function(e){return new fue(e)},curveLinear:gue,curveMonotoneX:function(e){return new wue(e)},curveMonotoneY:function(e){return new _ue(e)},curveNatural:function(e){return new Sue(e)},curveStep:function(e){return new Eue(e,.5)},curveStepAfter:function(e){return new Eue(e,1)},curveStepBefore:function(e){return new Eue(e,0)}},Lue=function(e){return e.x===+e.x&&e.y===+e.y},Fue=function(e){return e.x},$ue=function(e){return e.y},Bue=function(e){var t,r=e.type,n=void 0===r?"linear":r,i=e.points,a=void 0===i?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,u=function(e,t){if(n5()(e))return e;var r="curve".concat(V6()(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?Rue[r]||gue:Rue["".concat(r).concat("vertical"===t?"Y":"X")]}(n,o),d=c?a.filter((function(e){return Lue(e)})):a;if(Array.isArray(s)){var h=c?s.filter((function(e){return Lue(e)})):s,p=d.map((function(e,t){return Oue(Oue({},e),{},{base:h[t]})}));return t="vertical"===o?Pue().y($ue).x1(Fue).x0((function(e){return e.base.x})):Pue().x(Fue).y1($ue).y0((function(e){return e.base.y})),t.defined(Lue).curve(u),t(p)}return(t="vertical"===o&&G4(s)?Pue().y($ue).x1(Fue).x0(s):G4(s)?Pue().x(Fue).y1($ue).y0(s):Tue().x(Fue).y($ue)).defined(Lue).curve(u),t(d)},zue=function(e){var r=e.className,n=e.points,i=e.path,a=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?Bue(e):i;return t.createElement("path",Mue({},N5(e,!1),p5(e),{className:xi("recharts-curve",r),d:s,ref:a}))};function Uue(e){return Uue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uue(e)}var Vue=["x","y","top","left","width","height","className"];function Hue(){return Hue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hue.apply(this,arguments)}function Gue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wue(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Uue(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Uue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Uue(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function que(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Kue=function(e,t,r,n,i,a){return"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r)},Zue=function(e){var r=e.x,n=void 0===r?0:r,i=e.y,a=void 0===i?0:i,s=e.top,o=void 0===s?0:s,l=e.left,c=void 0===l?0:l,u=e.width,d=void 0===u?0:u,h=e.height,p=void 0===h?0:h,f=e.className,m=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gue(Object(r),!0).forEach((function(t){Wue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({x:n,y:a,top:o,left:c,width:d,height:p},que(e,Vue));return G4(n)&&G4(a)&&G4(d)&&G4(p)&&G4(o)&&G4(c)?t.createElement("path",Hue({},N5(m,!0),{className:xi("recharts-cross",f),d:Kue(n,a,d,p,o,c)})):null};function Yue(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,a=e.endAngle;return{points:[Loe(t,r,n,i),Loe(t,r,n,a)],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function Xue(e,t,r){var n,i,a,s;if("horizontal"===e)a=n=t.x,i=r.top,s=r.top+r.height;else if("vertical"===e)s=i=t.y,n=r.left,a=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return Yue(t);var o=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,h=Loe(o,l,c,d),p=Loe(o,l,u,d);n=h.x,i=h.y,a=p.x,s=p.y}return[{x:n,y:i},{x:a,y:s}]}function Que(e){return Que="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Que(e)}function Jue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ede(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jue(Object(r),!0).forEach((function(t){tde(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tde(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Que(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Que(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Que(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rde(e){var r,n,i,a=e.element,s=e.tooltipEventType,o=e.isActive,l=e.activeCoordinate,c=e.activePayload,u=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,p=e.layout,f=e.chartName,m=null!==(r=a.props.cursor)&&void 0!==r?r:null===(n=a.type.defaultProps)||void 0===n?void 0:n.cursor;if(!a||!m||!o||!l||"ScatterChart"!==f&&"axis"!==s)return null;var g=zue;if("ScatterChart"===f)i=l,g=Zue;else if("BarChart"===f)i=function(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-i,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(p,l,u,h),g=z7;else if("radial"===p){var v=Yue(l),x=v.cx,y=v.cy,b=v.radius;i={cx:x,cy:y,startAngle:v.startAngle,endAngle:v.endAngle,innerRadius:b,outerRadius:b},g=Gce}else i={points:Xue(p,l,u)},g=zue;var w=ede(ede(ede(ede({stroke:"#ccc",pointerEvents:"none"},u),i),N5(m,!1)),{},{payload:c,payloadIndex:d,className:xi("recharts-tooltip-cursor",m.className)});return(0,t.isValidElement)(m)?(0,t.cloneElement)(m,w):(0,t.createElement)(g,w)}var nde=["item"],ide=["children","className","width","height","style","compact","title","desc"];function ade(e){return ade="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ade(e)}function sde(){return sde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sde.apply(this,arguments)}function ode(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||mde(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lde(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function cde(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bde(n.key),n)}}function ude(e,t,r){return t=hde(t),function(e,t){if(t&&("object"===ade(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dde()?Reflect.construct(t,r||[],hde(e).constructor):t.apply(e,r))}function dde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dde=function(){return!!e})()}function hde(e){return hde=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hde(e)}function pde(e,t){return pde=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pde(e,t)}function fde(e){return function(e){if(Array.isArray(e))return gde(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mde(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mde(e,t){if(e){if("string"===typeof e)return gde(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gde(e,t):void 0}}function gde(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vde(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xde(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vde(Object(r),!0).forEach((function(t){yde(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vde(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yde(e,t,r){return(t=bde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bde(e){var t=function(e,t){if("object"!=ade(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ade(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ade(t)?t:t+""}var wde={xAxis:["bottom","top"],yAxis:["left","right"]},_de={width:"100%",height:"100%"},kde={x:0,y:0};function Sde(e){return e}var jde=function(e,t){var r=t.graphicalItems,n=t.dataStartIndex,i=t.dataEndIndex,a=(null!==r&&void 0!==r?r:[]).reduce((function(e,t){var r=t.props.data;return r&&r.length?[].concat(fde(e),fde(r)):e}),[]);return a.length>0?a:e&&e.length&&G4(n)&&G4(i)?e.slice(n,i+1):[]};function Ede(e){return"number"===e?[0,"auto"]:void 0}var Cde=function(e,t,r,n){var i=e.graphicalItems,a=e.tooltipAxis,s=jde(t,e);return r<0||!i||!i.length||r>=s.length?null:i.reduce((function(i,o){var l,c,u=null!==(l=o.props.data)&&void 0!==l?l:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),a.dataKey&&!a.allowDuplicatedCategory)?c=Q4(void 0===u?s:u,a.dataKey,n):c=u&&u[r]||s[r];return c?[].concat(fde(i),[uoe(o,c)]):i}),[])},Nde=function(e,t,r,n){var i=n||{x:e.chartX,y:e.chartY},a=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,r),s=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=-1,s=null!==(t=null===r||void 0===r?void 0:r.length)&&void 0!==t?t:0;if(s<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var o=i.range,l=0;l<s;l++){var c=l>0?n[l-1].coordinate:n[s-1].coordinate,u=n[l].coordinate,d=l>=s-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(V4(u-c)!==V4(d-u)){var p=[];if(V4(d-u)===V4(o[1]-o[0])){h=d;var f=u+o[1]-o[0];p[0]=Math.min(f,(f+c)/2),p[1]=Math.max(f,(f+c)/2)}else{h=c;var m=d+o[1]-o[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){a=n[l].index;break}}else{var v=Math.min(c,d),x=Math.max(c,d);if(e>(v+u)/2&&e<=(x+u)/2){a=n[l].index;break}}}else for(var y=0;y<s;y++)if(0===y&&e<=(r[y].coordinate+r[y+1].coordinate)/2||y>0&&y<s-1&&e>(r[y].coordinate+r[y-1].coordinate)/2&&e<=(r[y].coordinate+r[y+1].coordinate)/2||y===s-1&&e>(r[y].coordinate+r[y-1].coordinate)/2){a=r[y].index;break}return a}(a,s,l,o);if(c>=0&&l){var u=l[c]&&l[c].value,d=Cde(e,t,c,u),h=function(e,t,r,n){var i=t.find((function(e){return e&&e.index===r}));if(i){if("horizontal"===e)return{x:i.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:i.coordinate};if("centric"===e){var a=i.coordinate,s=n.radius;return xde(xde(xde({},n),Loe(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,l=n.angle;return xde(xde(xde({},n),Loe(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return kde}(r,s,c,i);return{activeTooltipIndex:c,activeLabel:u,activePayload:d,activeCoordinate:h}}return null},Tde=function(e,t){var r=t.axes,n=t.graphicalItems,i=t.axisType,a=t.axisIdKey,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=e.stackOffset,h=Xse(c,i);return r.reduce((function(t,r){var p,f=void 0!==r.type.defaultProps?xde(xde({},r.type.defaultProps),r.props):r.props,m=f.type,g=f.dataKey,v=f.allowDataOverflow,x=f.allowDuplicatedCategory,y=f.scale,b=f.ticks,w=f.includeHidden,_=f[a];if(t[_])return t;var k,S,j,E=jde(e.data,{graphicalItems:n.filter((function(e){var t;return(a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a])===_})),dataStartIndex:o,dataEndIndex:l}),C=E.length;(function(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null===e||void 0===e?void 0:e[0],i=null===e||void 0===e?void 0:e[1];if(n&&i&&G4(n)&&G4(i))return!0}return!1})(f.domain,v,m)&&(k=ooe(f.domain,null,v),!h||"number"!==m&&"auto"===y||(j=qse(E,g,"category")));var N=Ede(m);if(!k||0===k.length){var T,P=null!==(T=f.domain)&&void 0!==T?T:N;if(g){if(k=qse(E,g,m),"category"===m&&h){var A=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1}(k);x&&A?(S=k,k=z5()(0,C)):x||(k=coe(P,k,r).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(fde(e),[t])}),[]))}else if("category"===m)k=x?k.filter((function(e){return""!==e&&!t5()(e)})):coe(P,k,r).reduce((function(e,t){return e.indexOf(t)>=0||""===t||t5()(t)?e:[].concat(fde(e),[t])}),[]);else if("number"===m){var M=function(e,t,r,n,i){var a=t.map((function(t){return Zse(e,t,r,i,n)})).filter((function(e){return!t5()(e)}));return a&&a.length?a.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(E,n.filter((function(e){var t,r,n=a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a],i="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===_&&(w||!i)})),g,i,c);M&&(k=M)}!h||"number"!==m&&"auto"===y||(j=qse(E,g,"category"))}else k=h?z5()(0,C):s&&s[_]&&s[_].hasStack&&"number"===m?"expand"===d?[0,1]:ioe(s[_].stackGroups,o,l):Yse(E,n.filter((function(e){var t=a in e.props?e.props[a]:e.type.defaultProps[a],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===_&&(w||!r)})),m,c,!0);if("number"===m)k=fce(u,k,_,i,b),P&&(k=ooe(P,k,v));else if("category"===m&&P){var I=P;k.every((function(e){return I.indexOf(e)>=0}))&&(k=I)}}return xde(xde({},t),{},yde({},_,xde(xde({},f),{},{axisType:i,domain:k,categoricalDomain:j,duplicateDomain:S,originalDomain:null!==(p=f.domain)&&void 0!==p?p:N,isCategorical:h,layout:c})))}),{})},Pde=function(e,t){var r=t.axisType,n=void 0===r?"xAxis":r,i=t.AxisComp,a=t.graphicalItems,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(n,"Id"),d=k5(c,i),h={};return d&&d.length?h=Tde(e,{axes:d,graphicalItems:a,axisType:n,axisIdKey:u,stackGroups:s,dataStartIndex:o,dataEndIndex:l}):a&&a.length&&(h=function(e,t){var r=t.graphicalItems,n=t.Axis,i=t.axisType,a=t.axisIdKey,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=jde(e.data,{graphicalItems:r,dataStartIndex:o,dataEndIndex:l}),h=d.length,p=Xse(c,i),f=-1;return r.reduce((function(e,t){var m,g=(void 0!==t.type.defaultProps?xde(xde({},t.type.defaultProps),t.props):t.props)[a],v=Ede("number");return e[g]?e:(f++,p?m=z5()(0,h):s&&s[g]&&s[g].hasStack?(m=ioe(s[g].stackGroups,o,l),m=fce(u,m,g,i)):(m=ooe(v,Yse(d,r.filter((function(e){var t,r,n=a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a],i="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===g&&!i})),"number",c),n.defaultProps.allowDataOverflow),m=fce(u,m,g,i)),xde(xde({},e),{},yde({},g,xde(xde({axisType:i},n.defaultProps),{},{hide:!0,orientation:B4()(wde,"".concat(i,".").concat(f%2),null),domain:m,originalDomain:v,isCategorical:p,layout:c}))))}),{})}(e,{Axis:i,graphicalItems:a,axisType:n,axisIdKey:u,stackGroups:s,dataStartIndex:o,dataEndIndex:l})),h},Ade=function(e){var t=e.children,r=e.defaultShowTooltip,n=S5(t,Noe),i=0,a=0;return e.data&&0!==e.data.length&&(a=e.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(i=n.props.startIndex),n.props.endIndex>=0&&(a=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:Boolean(r)}},Mde=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ide=function(e,t){var r=e.props,n=(e.graphicalItems,e.xAxisMap),i=void 0===n?{}:n,a=e.yAxisMap,s=void 0===a?{}:a,o=r.width,l=r.height,c=r.children,u=r.margin||{},d=S5(c,Noe),h=S5(c,t9),p=Object.keys(s).reduce((function(e,t){var r=s[t],n=r.orientation;return r.mirror||r.hide?e:xde(xde({},e),{},yde({},n,e[n]+r.width))}),{left:u.left||0,right:u.right||0}),f=Object.keys(i).reduce((function(e,t){var r=i[t],n=r.orientation;return r.mirror||r.hide?e:xde(xde({},e),{},yde({},n,B4()(e,"".concat(n))+r.height))}),{top:u.top||0,bottom:u.bottom||0}),m=xde(xde({},f),p),g=m.bottom;d&&(m.bottom+=d.props.height||Noe.defaultProps.height),h&&t&&(m=function(e,t,r,n){var i=r.children,a=r.width,s=r.margin,o=a-(s.left||0)-(s.right||0),l=$se({children:i,legendWidth:o});if(l){var c=n||{},u=c.width,d=c.height,h=l.align,p=l.verticalAlign,f=l.layout;if(("vertical"===f||"horizontal"===f&&"middle"===p)&&"center"!==h&&G4(e[h]))return Hse(Hse({},e),{},Gse({},h,e[h]+(u||0)));if(("horizontal"===f||"vertical"===f&&"center"===h)&&"middle"!==p&&G4(e[p]))return Hse(Hse({},e),{},Gse({},p,e[p]+(d||0)))}return e}(m,0,r,t));var v=o-m.left-m.right,x=l-m.top-m.bottom;return xde(xde({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(x,0)})},Ode=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},Dde=["points","className","baseLinePoints","connectNulls"];function Rde(){return Rde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rde.apply(this,arguments)}function Lde(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Fde(e){return function(e){if(Array.isArray(e))return $de(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return $de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $de(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bde=function(e){return e&&e.x===+e.x&&e.y===+e.y},zde=function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){Bde(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),Bde(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(r=[r.reduce((function(e,t){return[].concat(Fde(e),Fde(t))}),[])]);var n=r.map((function(e){return e.reduce((function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===r.length?"".concat(n,"Z"):n},Ude=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,a=e.connectNulls,s=Lde(e,Dde);if(!r||!r.length)return null;var o=xi("recharts-polygon",n);if(i&&i.length){var l=s.stroke&&"none"!==s.stroke,c=function(e,t,r){var n=zde(e,r);return"".concat("Z"===n.slice(-1)?n.slice(0,-1):n,"L").concat(zde(t.reverse(),r).slice(1))}(r,i,a);return t.createElement("g",{className:o},t.createElement("path",Rde({},N5(s,!0),{fill:"Z"===c.slice(-1)?s.fill:"none",stroke:"none",d:c})),l?t.createElement("path",Rde({},N5(s,!0),{fill:"none",d:zde(r,a)})):null,l?t.createElement("path",Rde({},N5(s,!0),{fill:"none",d:zde(i,a)})):null)}var u=zde(r,a);return t.createElement("path",Rde({},N5(s,!0),{fill:"Z"===u.slice(-1)?s.fill:"none",className:o,d:u}))};function Vde(e){return Vde="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vde(e)}function Hde(){return Hde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hde.apply(this,arguments)}function Gde(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wde(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gde(Object(r),!0).forEach((function(t){Qde(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gde(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qde(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jde(n.key),n)}}function Kde(e,t,r){return t=Yde(t),function(e,t){if(t&&("object"===Vde(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zde()?Reflect.construct(t,r||[],Yde(e).constructor):t.apply(e,r))}function Zde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zde=function(){return!!e})()}function Yde(e){return Yde=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yde(e)}function Xde(e,t){return Xde=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xde(e,t)}function Qde(e,t,r){return(t=Jde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jde(e){var t=function(e,t){if("object"!=Vde(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vde(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vde(t)?t:t+""}var ehe=Math.PI/180,the=1e-5,rhe=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Kde(this,r,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xde(e,t)}(r,e),n=r,i=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,n=t.cy,i=t.radius,a=t.orientation,s=t.tickSize||8,o=Loe(r,n,i,e.coordinate),l=Loe(r,n,i+("inner"===a?-1:1)*s,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*ehe);return r>the?"outer"===t?"start":"end":r<-the?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,r=e.cx,n=e.cy,i=e.radius,a=e.axisLine,s=e.axisLineType,o=Wde(Wde({},N5(this.props,!1)),{},{fill:"none"},N5(a,!1));if("circle"===s)return t.createElement(n9,Hde({className:"recharts-polar-angle-axis-line"},o,{cx:r,cy:n,r:i}));var l=this.props.ticks.map((function(e){return Loe(r,n,i,e.coordinate)}));return t.createElement(Ude,Hde({className:"recharts-polar-angle-axis-line"},o,{points:l}))}},{key:"renderTicks",value:function(){var e=this,n=this.props,i=n.ticks,a=n.tick,s=n.tickLine,o=n.tickFormatter,l=n.stroke,c=N5(this.props,!1),u=N5(a,!1),d=Wde(Wde({},c),{},{fill:"none"},N5(s,!1)),h=i.map((function(n,i){var h=e.getTickLineCoord(n),p=Wde(Wde(Wde({textAnchor:e.getTickTextAnchor(n)},c),{},{stroke:"none",fill:l},u),{},{index:i,payload:n,x:h.x2,y:h.y2});return t.createElement(J5,Hde({className:xi("recharts-polar-angle-axis-tick",Uoe(a)),key:"tick-".concat(n.coordinate)},f5(e.props,n,i)),s&&t.createElement("line",Hde({className:"recharts-polar-angle-axis-tick-line"},d,h)),a&&r.renderTickItem(a,p,o?o(n.value,i):n.value))}));return t.createElement(J5,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,r=e.ticks,n=e.radius,i=e.axisLine;return n<=0||!r||!r.length?null:t.createElement(J5,{className:xi("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],a=[{key:"renderTickItem",value:function(e,r,n){return t.isValidElement(e)?t.cloneElement(e,r):n5()(e)?e(r):t.createElement(Ree,Hde({},r,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],i&&qde(n.prototype,i),a&&qde(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.PureComponent);Qde(rhe,"displayName","PolarAngleAxis"),Qde(rhe,"axisType","angleAxis"),Qde(rhe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var nhe=r(2794),ihe=r.n(nhe),ahe=r(9364),she=r.n(ahe),ohe=["cx","cy","angle","ticks","axisLine"],lhe=["ticks","tick","angle","tickFormatter","stroke"];function che(e){return che="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},che(e)}function uhe(){return uhe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uhe.apply(this,arguments)}function dhe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hhe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dhe(Object(r),!0).forEach((function(t){yhe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dhe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function phe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fhe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bhe(n.key),n)}}function mhe(e,t,r){return t=vhe(t),function(e,t){if(t&&("object"===che(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ghe()?Reflect.construct(t,r||[],vhe(e).constructor):t.apply(e,r))}function ghe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ghe=function(){return!!e})()}function vhe(e){return vhe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vhe(e)}function xhe(e,t){return xhe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xhe(e,t)}function yhe(e,t,r){return(t=bhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bhe(e){var t=function(e,t){if("object"!=che(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=che(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==che(t)?t:t+""}var whe=function(e){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),mhe(this,r,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xhe(e,t)}(r,e),n=r,i=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,n=r.angle,i=r.cx,a=r.cy;return Loe(i,a,t,n)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,i=e.ticks,a=ihe()(i,(function(e){return e.coordinate||0}));return{cx:t,cy:r,startAngle:n,endAngle:n,innerRadius:she()(i,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:a.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,r=e.cx,n=e.cy,i=e.angle,a=e.ticks,s=e.axisLine,o=phe(e,ohe),l=a.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),c=Loe(r,n,l[0],i),u=Loe(r,n,l[1],i),d=hhe(hhe(hhe({},N5(o,!1)),{},{fill:"none"},N5(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return t.createElement("line",uhe({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var e=this,n=this.props,i=n.ticks,a=n.tick,s=n.angle,o=n.tickFormatter,l=n.stroke,c=phe(n,lhe),u=this.getTickTextAnchor(),d=N5(c,!1),h=N5(a,!1),p=i.map((function(n,i){var c=e.getTickValueCoord(n),p=hhe(hhe(hhe(hhe({textAnchor:u,transform:"rotate(".concat(90-s,", ").concat(c.x,", ").concat(c.y,")")},d),{},{stroke:"none",fill:l},h),{},{index:i},c),{},{payload:n});return t.createElement(J5,uhe({className:xi("recharts-polar-radius-axis-tick",Uoe(a)),key:"tick-".concat(n.coordinate)},f5(e.props,n,i)),r.renderTickItem(a,p,o?o(n.value,i):n.value))}));return t.createElement(J5,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var e=this.props,r=e.ticks,n=e.axisLine,i=e.tick;return r&&r.length?t.createElement(J5,{className:xi("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),i&&this.renderTicks(),Joe.renderCallByParent(this.props,this.getViewBox())):null}}],a=[{key:"renderTickItem",value:function(e,r,n){return t.isValidElement(e)?t.cloneElement(e,r):n5()(e)?e(r):t.createElement(Ree,uhe({},r,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],i&&fhe(n.prototype,i),a&&fhe(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.PureComponent);yhe(whe,"displayName","PolarRadiusAxis"),yhe(whe,"axisType","radiusAxis"),yhe(whe,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var _he=r(4065),khe=r.n(_he);function She(e){return She="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},She(e)}var jhe=["valueAccessor"],Ehe=["data","dataKey","clockWise","id","textBreakAll"];function Che(e){return function(e){if(Array.isArray(e))return Nhe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Nhe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nhe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nhe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function The(){return The=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},The.apply(this,arguments)}function Phe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ahe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Phe(Object(r),!0).forEach((function(t){Mhe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Phe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mhe(e,t,r){return t=function(e){var t=function(e,t){if("object"!=She(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=She(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==She(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ihe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Ohe=function(e){return Array.isArray(e.value)?khe()(e.value):e.value};function Dhe(e){var r=e.valueAccessor,n=void 0===r?Ohe:r,i=Ihe(e,jhe),a=i.data,s=i.dataKey,o=i.clockWise,l=i.id,c=i.textBreakAll,u=Ihe(i,Ehe);return a&&a.length?t.createElement(J5,{className:"recharts-label-list"},a.map((function(e,r){var i=t5()(s)?n(e,r):Wse(e&&e.payload,s),a=t5()(l)?{}:{id:"".concat(l,"-").concat(r)};return t.createElement(Joe,The({},N5(e,!0),u,a,{parentViewBox:e.parentViewBox,value:i,textBreakAll:c,viewBox:Joe.parseViewBox(t5()(o)?e:Ahe(Ahe({},e),{},{clockWise:o})),key:"label-".concat(r),index:r}))}))):null}Dhe.displayName="LabelList",Dhe.renderCallByParent=function(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var i=k5(e.children,Dhe).map((function(e,n){return(0,t.cloneElement)(e,{data:r,key:"labelList-".concat(n)})}));if(!n)return i;var a=function(e,r){return e?!0===e?t.createElement(Dhe,{key:"labelList-implicit",data:r}):t.isValidElement(e)||n5()(e)?t.createElement(Dhe,{key:"labelList-implicit",data:r,content:e}):a5()(e)?t.createElement(Dhe,The({data:r},e,{key:"labelList-implicit"})):null:null}(e.label,r);return[a].concat(Che(i))};var Rhe,Lhe=function(e){return null};function Fhe(e){return Fhe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fhe(e)}function $he(){return $he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$he.apply(this,arguments)}function Bhe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zhe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bhe(Object(r),!0).forEach((function(t){qhe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bhe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Uhe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Khe(n.key),n)}}function Vhe(e,t,r){return t=Ghe(t),function(e,t){if(t&&("object"===Fhe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hhe()?Reflect.construct(t,r||[],Ghe(e).constructor):t.apply(e,r))}function Hhe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hhe=function(){return!!e})()}function Ghe(e){return Ghe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ghe(e)}function Whe(e,t){return Whe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Whe(e,t)}function qhe(e,t,r){return(t=Khe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Khe(e){var t=function(e,t){if("object"!=Fhe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fhe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fhe(t)?t:t+""}Lhe.displayName="Cell";var Zhe=function(e){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),qhe(t=Vhe(this,r,[e]),"pieRef",null),qhe(t,"sectorRefs",[]),qhe(t,"id",K4("recharts-pie-")),qhe(t,"handleAnimationEnd",(function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),n5()(e)&&e()})),qhe(t,"handleAnimationStart",(function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),n5()(e)&&e()})),t.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,sectorToFocus:0},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Whe(e,t)}(r,e),n=r,i=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,i=n.label,a=n.labelLine,s=n.dataKey,o=n.valueKey,l=N5(this.props,!1),c=N5(i,!1),u=N5(a,!1),d=i&&i.offsetRadius||20,h=e.map((function(e,n){var h=(e.startAngle+e.endAngle)/2,p=Loe(e.cx,e.cy,e.outerRadius+d,h),f=zhe(zhe(zhe(zhe({},l),e),{},{stroke:"none"},c),{},{index:n,textAnchor:r.getTextAnchor(p.x,e.cx)},p),m=zhe(zhe(zhe(zhe({},l),e),{},{fill:"none",stroke:e.fill},u),{},{index:n,points:[Loe(e.cx,e.cy,e.outerRadius,h),p]}),g=s;return t5()(s)&&t5()(o)?g="value":t5()(s)&&(g=o),t.createElement(J5,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(n)},a&&r.renderLabelLineItem(a,m,"line"),r.renderLabelItem(i,f,Wse(e,g)))}));return t.createElement(J5,{className:"recharts-pie-labels"},h)}},{key:"renderSectorsStatically",value:function(e){var r=this,n=this.props,i=n.activeShape,a=n.blendStroke,s=n.inactiveShape;return e.map((function(n,o){if(0===(null===n||void 0===n?void 0:n.startAngle)&&0===(null===n||void 0===n?void 0:n.endAngle)&&1!==e.length)return null;var l=r.isActiveIndex(o),c=s&&r.hasActiveIndex()?s:null,u=l?i:c,d=zhe(zhe({},n),{},{stroke:a?n.fill:n.stroke,tabIndex:-1});return t.createElement(J5,$he({ref:function(e){e&&!r.sectorRefs.includes(e)&&r.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},f5(r.props,n,o),{key:"sector-".concat(null===n||void 0===n?void 0:n.startAngle,"-").concat(null===n||void 0===n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(o)}),t.createElement(eue,$he({option:u,isActive:l,shapeType:"sector"},d)))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,r=this.props,n=r.sectors,i=r.isAnimationActive,a=r.animationBegin,s=r.animationDuration,o=r.animationEasing,l=r.animationId,c=this.state,u=c.prevSectors,d=c.prevIsAnimationActive;return t.createElement(P7,{begin:a,duration:s,isActive:i,easing:o,from:{t:0},to:{t:1},key:"pie-".concat(l,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(r){var i=r.t,a=[],s=(n&&n[0]).startAngle;return n.forEach((function(e,t){var r=u&&u[t],n=t>0?B4()(e,"paddingAngle",0):0;if(r){var o=X4(r.endAngle-r.startAngle,e.endAngle-e.startAngle),l=zhe(zhe({},e),{},{startAngle:s+n,endAngle:s+o(i)+n});a.push(l),s=l.endAngle}else{var c=e.endAngle,d=e.startAngle,h=X4(0,c-d)(i),p=zhe(zhe({},e),{},{startAngle:s+n,endAngle:s+h+n});a.push(p),s=p.endAngle}})),t.createElement(J5,null,e.renderSectorsStatically(a))}))}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var r=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"ArrowRight":var n=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,r=e.isAnimationActive,n=this.state.prevSectors;return!(r&&t&&t.length)||n&&Gae()(n,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,r=this.props,n=r.hide,i=r.sectors,a=r.className,s=r.label,o=r.cx,l=r.cy,c=r.innerRadius,u=r.outerRadius,d=r.isAnimationActive,h=this.state.isAnimationFinished;if(n||!i||!i.length||!G4(o)||!G4(l)||!G4(c)||!G4(u))return null;var p=xi("recharts-pie",a);return t.createElement(J5,{tabIndex:this.props.rootTabIndex,className:p,ref:function(t){e.pieRef=t}},this.renderSectors(),s&&this.renderLabels(i),Joe.renderCallByParent(this.props,null,!1),(!d||h)&&Dhe.renderCallByParent(this.props,i,!1))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,r,n){if(t.isValidElement(e))return t.cloneElement(e,r);if(n5()(e))return e(r);var i=xi("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return t.createElement(zue,$he({},r,{key:n,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(e,r,n){if(t.isValidElement(e))return t.cloneElement(e,r);var i=n;if(n5()(e)&&(i=e(r),t.isValidElement(i)))return i;var a=xi("recharts-pie-label-text","boolean"===typeof e||n5()(e)?"":e.className);return t.createElement(Ree,$he({},r,{alignmentBaseline:"middle",className:a}),i)}}],i&&Uhe(n.prototype,i),a&&Uhe(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(t.PureComponent);Rhe=Zhe,qhe(Zhe,"displayName","Pie"),qhe(Zhe,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!E6.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),qhe(Zhe,"parseDeltaAngle",(function(e,t){return V4(t-e)*Math.min(Math.abs(t-e),360)})),qhe(Zhe,"getRealPieData",(function(e){var t=e.data,r=e.children,n=N5(e,!1),i=k5(r,Lhe);return t&&t.length?t.map((function(e,t){return zhe(zhe(zhe({payload:e},n),e),i&&i[t]&&i[t].props)})):i&&i.length?i.map((function(e){return zhe(zhe({},n),e.props)})):[]})),qhe(Zhe,"parseCoordinateOfPie",(function(e,t){var r=t.top,n=t.left,i=t.width,a=t.height,s=Foe(i,a);return{cx:n+Z4(e.cx,i,i/2),cy:r+Z4(e.cy,a,a/2),innerRadius:Z4(e.innerRadius,s,0),outerRadius:Z4(e.outerRadius,s,.8*s),maxRadius:e.maxRadius||Math.sqrt(i*i+a*a)/2}})),qhe(Zhe,"getComposedData",(function(e){var t=e.item,r=e.offset,n=void 0!==t.type.defaultProps?zhe(zhe({},t.type.defaultProps),t.props):t.props,i=Rhe.getRealPieData(n);if(!i||!i.length)return null;var a=n.cornerRadius,s=n.startAngle,o=n.endAngle,l=n.paddingAngle,c=n.dataKey,u=n.nameKey,d=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),f=Rhe.parseCoordinateOfPie(n,r),m=Rhe.parseDeltaAngle(s,o),g=Math.abs(m),v=c;t5()(c)&&t5()(d)?(J4(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v="value"):t5()(c)&&(J4(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v=d);var x,y,b=i.filter((function(e){return 0!==Wse(e,v,0)})).length,w=g-b*p-(g>=360?b:b-1)*l,_=i.reduce((function(e,t){var r=Wse(t,v,0);return e+(G4(r)?r:0)}),0);_>0&&(x=i.map((function(e,t){var r,n=Wse(e,v,0),i=Wse(e,u,t),o=(G4(n)?n:0)/_,c=(r=t?y.endAngle+V4(m)*l*(0!==n?1:0):s)+V4(m)*((0!==n?p:0)+o*w),d=(r+c)/2,g=(f.innerRadius+f.outerRadius)/2,x=[{name:i,value:n,payload:e,dataKey:v,type:h}],b=Loe(f.cx,f.cy,g,d);return y=zhe(zhe(zhe({percent:o,cornerRadius:a,name:i,tooltipPayload:x,midAngle:d,middleRadius:g,tooltipPosition:b},e),f),{},{value:Wse(e,v),startAngle:r,endAngle:c,payload:e,paddingAngle:V4(m)*l})})));return zhe(zhe({},f),{},{sectors:x,data:i})}));var Yhe=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,a=void 0===i?"axis":i,s=e.validateTooltipEventTypes,o=void 0===s?["axis"]:s,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(e,t){var r=t.graphicalItems,n=t.stackGroups,i=t.offset,a=t.updateId,s=t.dataStartIndex,o=t.dataEndIndex,c=e.barSize,u=e.layout,d=e.barGap,h=e.barCategoryGap,p=e.maxBarSize,f=Mde(u),m=f.numericAxisName,g=f.cateAxisName,v=function(e){return!(!e||!e.length)&&e.some((function(e){var t=y5(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(r),x=[];return r.forEach((function(r,f){var y=jde(e.data,{graphicalItems:[r],dataStartIndex:s,dataEndIndex:o}),b=void 0!==r.type.defaultProps?xde(xde({},r.type.defaultProps),r.props):r.props,w=b.dataKey,_=b.maxBarSize,k=b["".concat(m,"Id")],S=b["".concat(g,"Id")],j=l.reduce((function(e,r){var n=t["".concat(r.axisType,"Map")],i=b["".concat(r.axisType,"Id")];n&&n[i]||"zAxis"===r.axisType||G5(!1);var a=n[i];return xde(xde({},e),{},yde(yde({},r.axisType,a),"".concat(r.axisType,"Ticks"),Qse(a)))}),{}),E=j[g],C=j["".concat(g,"Ticks")],N=n&&n[k]&&n[k].hasStack&&function(e,t){var r,n=(null!==(r=e.type)&&void 0!==r&&r.defaultProps?Hse(Hse({},e.type.defaultProps),e.props):e.props).stackId;if(W4(n)){var i=t[n];if(i){var a=i.items.indexOf(e);return a>=0?i.stackedData[a]:null}}return null}(r,n[k].stackGroups),T=y5(r.type).indexOf("Bar")>=0,P=loe(E,C),A=[],M=v&&function(e){var t=e.barSize,r=e.totalSize,n=e.stackGroups,i=void 0===n?{}:n;if(!i)return{};for(var a={},s=Object.keys(i),o=0,l=s.length;o<l;o++)for(var c=i[s[o]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var p=c[u[d]],f=p.items,m=p.cateAxisId,g=f.filter((function(e){return y5(e.type).indexOf("Bar")>=0}));if(g&&g.length){var v=g[0].type.defaultProps,x=void 0!==v?Hse(Hse({},v),g[0].props):g[0].props,y=x.barSize,b=x[m];a[b]||(a[b]=[]);var w=t5()(y)?t:y;a[b].push({item:g[0],stackList:g.slice(1),barSize:t5()(w)?void 0:Z4(w,r,0)})}}return a}({barSize:c,stackGroups:n,totalSize:Ode(j,g)});if(T){var I,O,D=t5()(_)?p:_,R=null!==(I=null!==(O=loe(E,C,!0))&&void 0!==O?O:D)&&void 0!==I?I:0;A=function(e){var t=e.barGap,r=e.barCategoryGap,n=e.bandSize,i=e.sizeList,a=void 0===i?[]:i,s=e.maxBarSize,o=a.length;if(o<1)return null;var l,c=Z4(t,n,0,!0),u=[];if(a[0].barSize===+a[0].barSize){var d=!1,h=n/o,p=a.reduce((function(e,t){return e+t.barSize||0}),0);(p+=(o-1)*c)>=n&&(p-=(o-1)*c,c=0),p>=n&&h>0&&(d=!0,p=o*(h*=.9));var f={offset:((n-p)/2|0)-c,size:0};l=a.reduce((function(e,t){var r={item:t.item,position:{offset:f.offset+f.size+c,size:d?h:t.barSize}},n=[].concat(zse(e),[r]);return f=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){n.push({item:e,position:f})})),n}),u)}else{var m=Z4(r,n,0,!0);n-2*m-(o-1)*c<=0&&(c=0);var g=(n-2*m-(o-1)*c)/o;g>1&&(g>>=0);var v=s===+s?Math.min(g,s):g;l=a.reduce((function(e,t,r){var n=[].concat(zse(e),[{item:t.item,position:{offset:m+(g+c)*r+(g-v)/2,size:v}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){n.push({item:e,position:n[n.length-1].position})})),n}),u)}return l}({barGap:d,barCategoryGap:h,bandSize:R!==P?R:P,sizeList:M[S],maxBarSize:D}),R!==P&&(A=A.map((function(e){return xde(xde({},e),{},{position:xde(xde({},e.position),{},{offset:e.position.offset-R/2})})})))}var L=r&&r.type&&r.type.getComposedData;L&&x.push({props:xde(xde({},L(xde(xde({},j),{},{displayedData:y,props:e,dataKey:w,item:r,bandSize:P,barPosition:A,offset:i,stackedData:N,layout:u,dataStartIndex:s,dataEndIndex:o}))),{},yde(yde(yde({key:r.key||"item-".concat(f)},m,j[m]),g,j[g]),"animationId",a)),childIndex:M5(r,e.children),item:r})})),x},p=function(e,t){var i=e.props,a=e.dataStartIndex,s=e.dataEndIndex,o=e.updateId;if(!j5({props:i}))return null;var c=i.children,d=i.layout,p=i.stackOffset,f=i.data,m=i.reverseStackOrder,g=Mde(d),v=g.numericAxisName,x=g.cateAxisName,y=k5(c,n),b=function(e,t,r,n,i,a){if(!e)return null;var s=(a?t.reverse():t).reduce((function(e,t){var i,a=null!==(i=t.type)&&void 0!==i&&i.defaultProps?Hse(Hse({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(a.hide)return e;var o=a[r],l=e[o]||{hasStack:!1,stackGroups:{}};if(W4(s)){var c=l.stackGroups[s]||{numericAxisId:r,cateAxisId:n,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[s]=c}else l.stackGroups[K4("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[t]};return Hse(Hse({},e),{},Gse({},o,l))}),{});return Object.keys(s).reduce((function(t,a){var o=s[a];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce((function(t,a){var s=o.stackGroups[a];return Hse(Hse({},t),{},Gse({},a,{numericAxisId:r,cateAxisId:n,items:s.items,stackedData:noe(e,s.items,i)}))}),{})),Hse(Hse({},t),{},Gse({},a,o))}),{})}(f,y,"".concat(v,"Id"),"".concat(x,"Id"),p,m),w=l.reduce((function(e,t){var r="".concat(t.axisType,"Map");return xde(xde({},e),{},yde({},r,Pde(i,xde(xde({},t),{},{graphicalItems:y,stackGroups:t.axisType===v&&b,dataStartIndex:a,dataEndIndex:s}))))}),{}),_=Ide(xde(xde({},w),{},{props:i,graphicalItems:y}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(w).forEach((function(e){w[e]=u(i,w[e],_,e.replace("Map",""),r)}));var k=function(e){var t=Y4(e),r=Qse(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:V5()(r,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:loe(t,r)}}(w["".concat(x,"Map")]),S=h(i,xde(xde({},w),{},{dataStartIndex:a,dataEndIndex:s,updateId:o,graphicalItems:y,stackGroups:b,offset:_}));return xde(xde({formattedGraphicalItems:S,graphicalItems:y,offset:_,stackGroups:b},k),w)},f=function(e){function n(e){var i,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),yde(s=ude(this,n,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),yde(s,"accessibilityManager",new _ce),yde(s,"handleLegendBBoxUpdate",(function(e){if(e){var t=s.state,r=t.dataStartIndex,n=t.dataEndIndex,i=t.updateId;s.setState(xde({legendBBox:e},p({props:s.props,dataStartIndex:r,dataEndIndex:n,updateId:i},xde(xde({},s.state),{},{legendBBox:e}))))}})),yde(s,"handleReceiveSyncEvent",(function(e,t,r){if(s.props.syncId===e){if(r===s.eventEmitterSymbol&&"function"!==typeof s.props.syncMethod)return;s.applySyncEvent(t)}})),yde(s,"handleBrushChange",(function(e){var t=e.startIndex,r=e.endIndex;if(t!==s.state.dataStartIndex||r!==s.state.dataEndIndex){var n=s.state.updateId;s.setState((function(){return xde({dataStartIndex:t,dataEndIndex:r},p({props:s.props,dataStartIndex:t,dataEndIndex:r,updateId:n},s.state))})),s.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}})),yde(s,"handleMouseEnter",(function(e){var t=s.getMouseInfo(e);if(t){var r=xde(xde({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseEnter;n5()(n)&&n(r,e)}})),yde(s,"triggeredAfterMouseMove",(function(e){var t=s.getMouseInfo(e),r=t?xde(xde({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseMove;n5()(n)&&n(r,e)})),yde(s,"handleItemMouseEnter",(function(e){s.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),yde(s,"handleItemMouseLeave",(function(){s.setState((function(){return{isTooltipActive:!1}}))})),yde(s,"handleMouseMove",(function(e){e.persist(),s.throttleTriggeredAfterMouseMove(e)})),yde(s,"handleMouseLeave",(function(e){s.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};s.setState(t),s.triggerSyncEvent(t);var r=s.props.onMouseLeave;n5()(r)&&r(t,e)})),yde(s,"handleOuterEvent",(function(e){var t,r=function(e){var t=e&&e.type;return t&&x5[t]?x5[t]:null}(e),n=B4()(s.props,"".concat(r));r&&n5()(n)&&n(null!==(t=/.*touch.*/i.test(r)?s.getMouseInfo(e.changedTouches[0]):s.getMouseInfo(e))&&void 0!==t?t:{},e)})),yde(s,"handleClick",(function(e){var t=s.getMouseInfo(e);if(t){var r=xde(xde({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onClick;n5()(n)&&n(r,e)}})),yde(s,"handleMouseDown",(function(e){var t=s.props.onMouseDown;n5()(t)&&t(s.getMouseInfo(e),e)})),yde(s,"handleMouseUp",(function(e){var t=s.props.onMouseUp;n5()(t)&&t(s.getMouseInfo(e),e)})),yde(s,"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),yde(s,"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseDown(e.changedTouches[0])})),yde(s,"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseUp(e.changedTouches[0])})),yde(s,"handleDoubleClick",(function(e){var t=s.props.onDoubleClick;n5()(t)&&t(s.getMouseInfo(e),e)})),yde(s,"handleContextMenu",(function(e){var t=s.props.onContextMenu;n5()(t)&&t(s.getMouseInfo(e),e)})),yde(s,"triggerSyncEvent",(function(e){void 0!==s.props.syncId&&gce.emit(vce,s.props.syncId,e,s.eventEmitterSymbol)})),yde(s,"applySyncEvent",(function(e){var t=s.props,r=t.layout,n=t.syncMethod,i=s.state.updateId,a=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)s.setState(xde({dataStartIndex:a,dataEndIndex:o},p({props:s.props,dataStartIndex:a,dataEndIndex:o,updateId:i},s.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,u=e.activeTooltipIndex,d=s.state,h=d.offset,f=d.tooltipTicks;if(!h)return;if("function"===typeof n)u=n(f,e);else if("value"===n){u=-1;for(var m=0;m<f.length;m++)if(f[m].value===e.activeLabel){u=m;break}}var g=xde(xde({},h),{},{x:h.left,y:h.top}),v=Math.min(l,g.x+g.width),x=Math.min(c,g.y+g.height),y=f[u]&&f[u].value,b=Cde(s.state,s.props.data,u),w=f[u]?{x:"horizontal"===r?f[u].coordinate:v,y:"horizontal"===r?x:f[u].coordinate}:kde;s.setState(xde(xde({},e),{},{activeLabel:y,activeCoordinate:w,activePayload:b,activeTooltipIndex:u}))}else s.setState(e)})),yde(s,"renderCursor",(function(e){var n,i=s.state,a=i.isTooltipActive,o=i.activeCoordinate,l=i.activePayload,c=i.offset,u=i.activeTooltipIndex,d=i.tooltipAxisBandSize,h=s.getTooltipEventType(),p=null!==(n=e.props.active)&&void 0!==n?n:a,f=s.props.layout,m=e.key||"_recharts-cursor";return t.createElement(rde,{key:m,activeCoordinate:o,activePayload:l,activeTooltipIndex:u,chartName:r,element:e,isActive:p,layout:f,offset:c,tooltipAxisBandSize:d,tooltipEventType:h})})),yde(s,"renderPolarAxis",(function(e,r,n){var i=B4()(e,"type.axisType"),a=B4()(s.state,"".concat(i,"Map")),o=e.type.defaultProps,l=void 0!==o?xde(xde({},o),e.props):e.props,c=a&&a[l["".concat(i,"Id")]];return(0,t.cloneElement)(e,xde(xde({},c),{},{className:xi(i,c.className),key:e.key||"".concat(r,"-").concat(n),ticks:Qse(c,!0)}))})),yde(s,"renderPolarGrid",(function(e){var r=e.props,n=r.radialLines,i=r.polarAngles,a=r.polarRadius,o=s.state,l=o.radiusAxisMap,c=o.angleAxisMap,u=Y4(l),d=Y4(c),h=d.cx,p=d.cy,f=d.innerRadius,m=d.outerRadius;return(0,t.cloneElement)(e,{polarAngles:Array.isArray(i)?i:Qse(d,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(a)?a:Qse(u,!0).map((function(e){return e.coordinate})),cx:h,cy:p,innerRadius:f,outerRadius:m,key:e.key||"polar-grid",radialLines:n})})),yde(s,"renderLegend",(function(){var e=s.state.formattedGraphicalItems,r=s.props,n=r.children,i=r.width,a=r.height,o=s.props.margin||{},l=i-(o.left||0)-(o.right||0),u=$se({children:n,formattedGraphicalItems:e,legendWidth:l,legendContent:c});if(!u)return null;var d=u.item,h=lde(u,nde);return(0,t.cloneElement)(d,xde(xde({},h),{},{chartWidth:i,chartHeight:a,margin:o,onBBoxUpdate:s.handleLegendBBoxUpdate}))})),yde(s,"renderTooltip",(function(){var e,r=s.props,n=r.children,i=r.accessibilityLayer,a=S5(n,z6);if(!a)return null;var o=s.state,l=o.isTooltipActive,c=o.activeCoordinate,u=o.activePayload,d=o.activeLabel,h=o.offset,p=null!==(e=a.props.active)&&void 0!==e?e:l;return(0,t.cloneElement)(a,{viewBox:xde(xde({},h),{},{x:h.left,y:h.top}),active:p,label:d,payload:p?u:[],coordinate:c,accessibilityLayer:i})})),yde(s,"renderBrush",(function(e){var r=s.props,n=r.margin,i=r.data,a=s.state,o=a.offset,l=a.dataStartIndex,c=a.dataEndIndex,u=a.updateId;return(0,t.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:eoe(s.handleBrushChange,e.props.onChange),data:i,x:G4(e.props.x)?e.props.x:o.left,y:G4(e.props.y)?e.props.y:o.top+o.height+o.brushBottom-(n.bottom||0),width:G4(e.props.width)?e.props.width:o.width,startIndex:l,endIndex:c,updateId:"brush-".concat(u)})})),yde(s,"renderReferenceElement",(function(e,r,n){if(!e)return null;var i=s.clipPathId,a=s.state,o=a.xAxisMap,l=a.yAxisMap,c=a.offset,u=e.type.defaultProps||{},d=e.props,h=d.xAxisId,p=void 0===h?u.xAxisId:h,f=d.yAxisId,m=void 0===f?u.yAxisId:f;return(0,t.cloneElement)(e,{key:e.key||"".concat(r,"-").concat(n),xAxis:o[p],yAxis:l[m],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:i})})),yde(s,"renderActivePoints",(function(e){var t=e.item,r=e.activePoint,i=e.basePoint,a=e.childIndex,s=e.isRange,o=[],l=t.props.key,c=void 0!==t.item.type.defaultProps?xde(xde({},t.item.type.defaultProps),t.item.props):t.item.props,u=c.activeDot,d=xde(xde({index:a,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:Kse(t.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},N5(u,!1)),p5(u));return o.push(n.renderActiveDot(u,d,"".concat(l,"-activePoint-").concat(a))),i?o.push(n.renderActiveDot(u,xde(xde({},d),{},{cx:i.x,cy:i.y}),"".concat(l,"-basePoint-").concat(a))):s&&o.push(null),o})),yde(s,"renderGraphicChild",(function(e,r,n){var i=s.filterFormatItem(e,r,n);if(!i)return null;var a=s.getTooltipEventType(),o=s.state,l=o.isTooltipActive,c=o.tooltipAxis,u=o.activeTooltipIndex,d=o.activeLabel,h=S5(s.props.children,z6),p=i.props,f=p.points,m=p.isRange,g=p.baseLine,v=void 0!==i.item.type.defaultProps?xde(xde({},i.item.type.defaultProps),i.item.props):i.item.props,x=v.activeDot,y=v.hide,b=v.activeBar,w=v.activeShape,_=Boolean(!y&&l&&h&&(x||b||w)),k={};"axis"!==a&&h&&"click"===h.props.trigger?k={onClick:eoe(s.handleItemMouseEnter,e.props.onClick)}:"axis"!==a&&(k={onMouseLeave:eoe(s.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:eoe(s.handleItemMouseEnter,e.props.onMouseEnter)});var S=(0,t.cloneElement)(e,xde(xde({},i.props),k));if(_){if(!(u>=0)){var j,E=(null!==(j=s.getItemByXY(s.state.activeCoordinate))&&void 0!==j?j:{graphicalItem:S}).graphicalItem,C=E.item,N=void 0===C?e:C,T=E.childIndex,P=xde(xde(xde({},i.props),k),{},{activeIndex:T});return[(0,t.cloneElement)(N,P),null,null]}var A,M;if(c.dataKey&&!c.allowDuplicatedCategory){var I="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());A=Q4(f,I,d),M=m&&g&&Q4(g,I,d)}else A=null===f||void 0===f?void 0:f[u],M=m&&g&&g[u];if(w||b){var O=void 0!==e.props.activeIndex?e.props.activeIndex:u;return[(0,t.cloneElement)(e,xde(xde(xde({},i.props),k),{},{activeIndex:O})),null,null]}if(!t5()(A))return[S].concat(fde(s.renderActivePoints({item:i,activePoint:A,basePoint:M,childIndex:u,isRange:m})))}return m?[S,null,null]:[S,null]})),yde(s,"renderCustomized",(function(e,r,n){return(0,t.cloneElement)(e,xde(xde({key:"recharts-customized-".concat(n)},s.props),s.state))})),yde(s,"renderMap",{CartesianGrid:{handler:Sde,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:Sde},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:Sde},YAxis:{handler:Sde},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!==(i=e.id)&&void 0!==i?i:K4("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=O4()(s.triggeredAfterMouseMove,null!==(a=e.throttleDelay)&&void 0!==a?a:1e3/60),s.state={},s}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pde(e,t)}(n,e),i=n,s=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,n=e.height,i=e.layout,a=S5(t,z6);if(a){var s=a.props.defaultIndex;if(!("number"!==typeof s||s<0||s>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[s]&&this.state.tooltipTicks[s].value,l=Cde(this.state,r,s,o),c=this.state.tooltipTicks[s].coordinate,u=(this.state.offset.top+n)/2,d="horizontal"===i?{x:c,y:u}:{y:c,x:u},h=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));h&&(d=xde(xde({},d),h.props.points[s].tooltipPosition),l=h.props.points[s].tooltipPayload);var p={activeTooltipIndex:s,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:d};this.setState(p),this.renderCursor(a),this.accessibilityManager.setIndex(s)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(r=this.props.margin.left)&&void 0!==r?r:0,top:null!==(n=this.props.margin.top)&&void 0!==n?n:0}}),null):null;var r,n}},{key:"componentDidUpdate",value:function(e){T5([S5(e.children,z6)],[S5(this.props.children,z6)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=S5(this.props.children,z6);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return o.indexOf(t)>=0?t:a}return a}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,r=this.container,n=r.getBoundingClientRect(),i={top:(t=n).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},a={chartX:Math.round(e.pageX-i.left),chartY:Math.round(e.pageY-i.top)},s=n.width/r.offsetWidth||1,o=this.inRange(a.chartX,a.chartY,s);if(!o)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&c&&u){var d=Y4(c).scale,h=Y4(u).scale,p=d&&d.invert?d.invert(a.chartX):null,f=h&&h.invert?h.invert(a.chartY):null;return xde(xde({},a),{},{xValue:p,yValue:f})}var m=Nde(this.state,this.props.data,this.props.layout,o);return m?xde(xde({},a),m):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.props.layout,i=e/r,a=t/r;if("horizontal"===n||"vertical"===n){var s=this.state.offset;return i>=s.left&&i<=s.left+s.width&&a>=s.top&&a<=s.top+s.height?{x:i,y:a}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var u=Y4(l);return zoe({x:i,y:a},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=S5(e,z6),n={};return r&&"axis"===t&&(n="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),xde(xde({},p5(this.props,this.handleOuterEvent)),n)}},{key:"addListener",value:function(){gce.on(vce,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){gce.removeListener(vce,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var n=this.state.formattedGraphicalItems,i=0,a=n.length;i<a;i++){var s=n[i];if(s.item===e||s.props.key===e.key||t===y5(s.item.type)&&r===s.childIndex)return s}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,r=this.state.offset,n=r.left,i=r.top,a=r.height,s=r.width;return t.createElement("defs",null,t.createElement("clipPath",{id:e},t.createElement("rect",{x:n,y:i,height:a,width:s})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var r=ode(t,2),n=r[0],i=r[1];return xde(xde({},e),{},yde({},n,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var r=ode(t,2),n=r[0],i=r[1];return xde(xde({},e),{},yde({},n,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,n=t.activeItem;if(r&&r.length)for(var i=0,a=r.length;i<a;i++){var s=r[i],o=s.props,l=s.item,c=void 0!==l.type.defaultProps?xde(xde({},l.type.defaultProps),l.props):l.props,u=y5(l.type);if("Bar"===u){var d=(o.data||[]).find((function(t){return $7(e,t)}));if(d)return{graphicalItem:s,payload:d}}else if("RadialBar"===u){var h=(o.data||[]).find((function(t){return zoe(e,t)}));if(h)return{graphicalItem:s,payload:h}}else if(tue(s,n)||rue(s,n)||nue(s,n)){var p=oue({graphicalItem:s,activeTooltipItem:n,itemData:c.data}),f=void 0===c.activeIndex?p:c.activeIndex;return{graphicalItem:xde(xde({},s),{},{childIndex:f}),payload:nue(s,n)?c.data[p]:s.props.data[p]}}}return null}},{key:"render",value:function(){var e=this;if(!j5(this))return null;var r,n,i=this.props,a=i.children,s=i.className,o=i.width,l=i.height,c=i.style,u=i.compact,d=i.title,h=i.desc,p=lde(i,ide),f=N5(p,!1);if(u)return t.createElement(Fle,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},t.createElement(Z5,sde({},f,{width:o,height:l,title:d,desc:h}),this.renderClipPath(),A5(a,this.renderMap)));this.props.accessibilityLayer&&(f.tabIndex=null!==(r=this.props.tabIndex)&&void 0!==r?r:0,f.role=null!==(n=this.props.role)&&void 0!==n?n:"application",f.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},f.onFocus=function(){e.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return t.createElement(Fle,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},t.createElement("div",sde({className:xi("recharts-wrapper",s),style:xde({position:"relative",cursor:"default",width:o,height:l},c)},m,{ref:function(t){e.container=t}}),t.createElement(Z5,sde({},f,{width:o,height:l,title:d,desc:h,style:_de}),this.renderClipPath(),A5(a,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],s&&cde(i.prototype,s),l&&cde(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,s,l}(t.Component);yde(f,"displayName",r),yde(f,"defaultProps",xde({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),yde(f,"getDerivedStateFromProps",(function(e,t){var r=e.dataKey,n=e.data,i=e.children,a=e.width,s=e.height,o=e.layout,l=e.stackOffset,c=e.margin,u=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var h=Ade(e);return xde(xde(xde({},h),{},{updateId:0},p(xde(xde({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:n,prevWidth:a,prevHeight:s,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(r!==t.prevDataKey||n!==t.prevData||a!==t.prevWidth||s!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!o5(c,t.prevMargin)){var f=Ade(e),m={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=xde(xde({},Nde(t,n,o)),{},{updateId:t.updateId+1}),v=xde(xde(xde({},f),m),g);return xde(xde(xde({},v),p(xde({props:e},v),t)),{},{prevDataKey:r,prevData:n,prevWidth:a,prevHeight:s,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(!T5(i,t.prevChildren)){var x,y,b,w,_=S5(i,Noe),k=_&&null!==(x=null===(y=_.props)||void 0===y?void 0:y.startIndex)&&void 0!==x?x:u,S=_&&null!==(b=null===(w=_.props)||void 0===w?void 0:w.endIndex)&&void 0!==b?b:d,j=k!==u||S!==d,E=!t5()(n)&&!j?t.updateId:t.updateId+1;return xde(xde({updateId:E},p(xde(xde({props:e},t),{},{updateId:E,dataStartIndex:k,dataEndIndex:S}),t)),{},{prevChildren:i,dataStartIndex:k,dataEndIndex:S})}return null})),yde(f,"renderActiveDot",(function(e,r,n){var i;return i=(0,t.isValidElement)(e)?(0,t.cloneElement)(e,r):n5()(e)?e(r):t.createElement(n9,r),t.createElement(J5,{className:"recharts-active-dot",key:n},i)}));var m=(0,t.forwardRef)((function(e,r){return t.createElement(f,sde({},e,{ref:r}))}));return m.displayName=f.displayName,m}({chartName:"PieChart",GraphicalChild:Zhe,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:rhe},{axisType:"radiusAxis",AxisComp:whe}],formatAxisMap:function(t,r,n,i,a){var s=t.width,o=t.height,l=t.startAngle,c=t.endAngle,u=Z4(t.cx,s,s/2),d=Z4(t.cy,o,o/2),h=Foe(s,o,n),p=Z4(t.innerRadius,h,0),f=Z4(t.outerRadius,h,.8*h);return Object.keys(r).reduce((function(t,n){var s,o=r[n],h=o.domain,m=o.reversed;if(t5()(o.range))"angleAxis"===i?s=[l,c]:"radiusAxis"===i&&(s=[p,f]),m&&(s=[s[1],s[0]]);else{var g=Ioe(s=o.range,2);l=g[0],c=g[1]}var v=function(t,r,n){var i=t.scale,a=t.type,s=t.layout,o=t.axisType;if("auto"===i)return"radial"===s&&"radiusAxis"===o?{scale:X7(),realScaleType:"band"}:"radial"===s&&"angleAxis"===o?{scale:wre(),realScaleType:"linear"}:"category"===a&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:J7(),realScaleType:"point"}:"category"===a?{scale:X7(),realScaleType:"band"}:{scale:wre(),realScaleType:"linear"};if(R4()(i)){var l="scale".concat(V6()(i));return{scale:(e[l]||J7)(),realScaleType:e[l]?l:"point"}}return n5()(i)?{scale:i}:{scale:J7(),realScaleType:"point"}}(o,a),x=v.realScaleType,y=v.scale;y.domain(h).range(s),function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-toe,a=Math.max(n[0],n[1])+toe,s=e(t[0]),o=e(t[r-1]);(s<i||s>a||o<i||o>a)&&e.domain([t[0],t[r-1]])}}(y);var b=function(e,t){var r=t.realScaleType,n=t.type,i=t.tickCount,a=t.originalDomain,s=t.allowDecimals,o=r||t.scale;if("auto"!==o&&"linear"!==o)return null;if(i&&"number"===n&&a&&("auto"===a[0]||"auto"===a[1])){var l=e.domain();if(!l.length)return null;var c=yse(l,i,s);return e.domain([zae()(c),$ae()(c)]),{niceTicks:c}}if(i&&"number"===n){var u=e.domain();return{niceTicks:bse(u,i,s)}}return null}(y,Aoe(Aoe({},o),{},{realScaleType:x})),w=Aoe(Aoe(Aoe({},o),b),{},{range:s,radius:f,realScaleType:x,scale:y,cx:u,cy:d,innerRadius:p,outerRadius:f,startAngle:l,endAngle:c});return Aoe(Aoe({},t),{},Moe({},n,w))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Xhe=e=>`hsl(${260+20*e%40}, 65%, ${50+e%10}%)`,Qhe=e=>{let{chartData:t}=e;const r=null===t||void 0===t?void 0:t.map((e=>({name:e.Navn,value:parseFloat(e.value)})));return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"w-full h-[270px] md:h-[300px] relative",children:[(0,V.jsx)($5,{width:"100%",height:"100%",children:(0,V.jsx)(Yhe,{children:(0,V.jsx)(Zhe,{data:r,cx:"50%",cy:"50%",innerRadius:60,outerRadius:130,fill:"#8884d8",dataKey:"value",children:null===r||void 0===r?void 0:r.map(((e,t)=>(0,V.jsx)(Lhe,{fill:Xhe(t)},`cell-${t}`)))})})}),(0,V.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center",children:[(0,V.jsx)("span",{className:"text-gray text-sm md:text-base mb-2",children:"Eierandel"}),(0,V.jsx)("span",{className:"text-black font-semibold text-lg md:text-xl desktop:text-[26px]",children:"100%"})]})]}),(0,V.jsx)("div",{className:"mt-8 lg:mt-[48px] mb-1 md:mb-3",children:(0,V.jsx)("div",{className:"flex justify-between gap-4",children:null===r||void 0===r?void 0:r.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-start gap-2",children:[(0,V.jsx)("div",{className:"h-[26px] w-3 flex items-center",children:(0,V.jsx)("div",{className:"w-full h-3 rounded-full",style:{backgroundColor:Xhe(t)}})}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"font-semibold text-base md:text-lg desktop:text-[20px] h-[26px]",children:[e.value,"%"]}),(0,V.jsx)("span",{className:"text-sm font-medium text-[#111322]",children:e.name})]})]},t)))})})]})},Jhe=e=>{let{data:t}=e;function r(e){var t;let[r,n]=null===(t=e.split("/"))||void 0===t?void 0:t.map(Number);return r/n*100+"%"}const n=null===t||void 0===t?void 0:t.map((e=>({name:"Ownership Share",value:r(null===e||void 0===e?void 0:e.andel)})));return(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6",children:[(0,V.jsxs)("div",{className:"w-full lg:w-1/3 p-3 lg:p-5 rounded-lg h-max",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsx)("h5",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold mb-8",children:"Eierskap"}),(0,V.jsx)(Qhe,{chartData:n})]}),(0,V.jsx)("div",{className:"w-full lg:w-2/3",children:(0,V.jsx)("div",{className:"grid grid-cols-2 gap-4 lg:gap-6",children:t&&(null===t||void 0===t?void 0:t.map(((e,t)=>{var n;return(0,V.jsxs)("div",{className:"p-3 md:p-5 rounded-lg flex flex-col gap-2 lg:gap-4",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsxs)("div",{children:[(0,V.jsxs)("h5",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold mb-2",children:["ID: ",null===e||void 0===e?void 0:e.eierId]}),(0,V.jsxs)("h6",{className:"text-black text-xs md:text-sm font-medium",children:["F\xd8DSELSNUMMER (Code: ",null===e||void 0===e||null===(n=e.personalNumberType)||void 0===n?void 0:n.code,")"]})]}),(0,V.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-gray text-[10px] md:text-xs mb-1",children:"Eierandel"}),(0,V.jsx)("h6",{className:"text-black text-xs md:text-sm font-medium",children:r(null===e||void 0===e?void 0:e.andel)})]})})]},t)})))})})]})};var epe=r(4066),tpe=r.n(epe);const rpe=e=>{let{coordinates:r}=e;const n=(0,t.useRef)(null),i=(0,t.useRef)(null),[a,s]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{var e;const t=null!==(e=null===r||void 0===r?void 0:r.map((e=>[e.longitude,e.latitude])))&&void 0!==e?e:[];if(!n.current||0===t.length)return;const a=t[0];return s(!0),i.current||(i.current=new(tpe().Map)({container:n.current,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:["https://waapi.webatlas.no/maptiles/tiles/webatlas-orto-newup/wa_grid/{z}/{x}/{y}.jpeg?APITOKEN=E8C374EF-6B2A-4304-B935-A05DDBB79947"],tileSize:256,attribution:"\xa9 2020 Norkart AS/Geovekst og kommunene/OpenStreetMap/NASA/EEA CLC2006/Meti/Plan- og bygningsetaten, Oslo Kommune"}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:24}]},center:a,zoom:18,maxZoom:18,collectResourceTiming:!1}),i.current.addControl(new(tpe().NavigationControl),"top-right"),i.current.addControl(new(tpe().ScaleControl),"bottom-left")),i.current.on("load",(()=>{var e,r,n,a,o;null!==(e=i.current)&&void 0!==e&&e.getSource("boundary")?i.current.getSource("boundary").setData({type:"Feature",geometry:{type:"Polygon",coordinates:[[...t]]},properties:{}}):(null===(n=i.current)||void 0===n||n.addSource("boundary",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[[...t]]},properties:{}}}),null===(a=i.current)||void 0===a||a.addLayer({id:"boundary-layer",type:"line",source:"boundary",paint:{"line-color":"#6941C6","line-width":3,"line-opacity":.85}}),null===(o=i.current)||void 0===o||o.addLayer({id:"boundary-fill-layer",type:"fill",source:"boundary",paint:{"fill-color":"#6941C6","fill-opacity":.15}}));const l=new(tpe().LngLatBounds);t.forEach((e=>l.extend(e))),null===(r=i.current)||void 0===r||r.fitBounds(l,{padding:60,maxZoom:18,duration:1500}),i.current.once("moveend",(()=>{var e,t;const r=i.current.getZoom();null===(e=i.current)||void 0===e||e.zoomTo(Math.min(r+1,18),{duration:500}),null===(t=i.current)||void 0===t||t.once("moveend",(()=>{s(!1)}))}))})),()=>{i.current&&(i.current.remove(),i.current=null)}}),[r]),(0,V.jsxs)("div",{className:"flex flex-col w-full h-full relative",children:[a&&(0,V.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-10",children:(0,V.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})}),(0,V.jsx)("div",{className:"relative w-full h-full",children:(0,V.jsx)("div",{ref:n,className:"w-full h-full rounded-lg shadow-lg relative"})})]})},npe=()=>{var e,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_,k,S,j,E,C,N,T,P,A,M,I,O,D,R,L,F,$,B,z,U,H,G,W,q,K,Z,Y,X,Q,J,ee,te,re,ne,ie,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ge,ve,xe,ye,be,we,_e,ke,Se,je,Ee,Ce,Ne,Te,Pe,Ae,Me,Ie,Oe,De,Re,Le,Fe,$e,Be,ze,Ue,Ve,He,Ge,We,qe,Ke,Ze,Ye,Xe,Qe,Je,et,tt,rt,nt,it,at,st,ot,lt,ct,ut,dt,ht,pt,ft,mt,gt,vt,xt,yt,bt,wt,_t,kt,St,jt,Et,Ct,Nt,Tt,Pt,At,Mt,It,Ot,Dt,Rt,Lt,Ft,$t,Bt,zt,Ut,Vt,Ht,Gt,Wt,qt,Kt,Zt,Yt,Xt,Qt,Jt,er,tr,rr,nr,ir,ar;const sr=Gr().pathname.split("/"),or=sr.length>2?sr[2]:null,[lr,cr]=(0,t.useState)(!1),[ur,dr]=(0,t.useState)(!1),[hr,pr]=(0,t.useState)(null),[fr,mr]=(0,t.useState)(null),[gr,vr]=(0,t.useState)(null);(0,t.useEffect)((()=>{var e;if(null!==hr&&void 0!==hr&&null!==(e=hr.additionalData)&&void 0!==e&&e.answer)try{var t;const e=null===hr||void 0===hr||null===(t=hr.additionalData)||void 0===t?void 0:t.answer;mr(e)}catch(r){console.error("Error parsing additionalData.answer:",r),mr(null)}}),[null===hr||void 0===hr?void 0:hr.additionalData]),(0,t.useEffect)((()=>{if(or){cr(!0);const e=async()=>{try{const e=cm(g_,"empty_plot",or),t=await dg(e);let r=[];if(t.exists()){pr(t.data());const e=lm(g_,"empty_plot",or,"viewer");r=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),vr(r),cr(!1)}}catch(e){cr(!1),console.error("Error fetching plot data:",e)}};e()}}),[or]);const[xr,yr]=(0,t.useState)(!0),br=null===hr||void 0===hr?void 0:hr.lamdaDataFromApi,wr=[{id:"Regulering",label:"Regulering"},...null!==br&&void 0!==br&&br.latestOwnership?[{id:"Eierinformasjon",label:"Eierinformasjon"}]:[],{id:"Dokument",label:"Dokument"}],[_r,kr]=(0,t.useState)(wr[0].id),Sr=null===hr||void 0===hr?void 0:hr.CadastreDataFromApi,jr=null===Sr||void 0===Sr||null===(e=Sr.cadastreApi)||void 0===e||null===(r=e.response)||void 0===r||null===(n=r.item)||void 0===n||null===(i=n.geojson)||void 0===i?void 0:i.bbox,Er=Array.isArray(jr)&&4===jr.length,Cr=(0,t.useRef)(null),Nr=()=>{Cr.current&&Cr.current.scrollBy({left:-90,behavior:"smooth"})},Tr=()=>{Cr.current&&Cr.current.scrollBy({left:90,behavior:"smooth"})},Pr=Er&&[jr[0]-30,jr[1]-30,jr[2]+30,jr[3]+30],[Ar,Mr]=(0,t.useState)(null);(0,t.useEffect)((()=>{Er&&(async()=>{const e=`https://wms.geonorge.no/skwms1/wms.reguleringsplaner?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&QUERY_LAYERS=Planomrade_02,Arealformal_02&LAYERS=Planomrade_02,Arealformal_02&INFO_FORMAT=text/html&CRS=EPSG:25833&BBOX=${jr[0]},${jr[1]},${jr[2]},${jr[3]}&WIDTH=800&HEIGHT=600&I=400&J=300`;try{const t=await fetch(e),r=await t.text(),n=(new DOMParser).parseFromString(r,"text/html");n.querySelectorAll("img").forEach((e=>e.remove()));const i=n.body.innerHTML;Mr(i)}catch(t){console.error("Error fetching feature info:",t),Mr("<p>Error loading data</p>")}})()}),[Er,jr]);const Ir=Er?[{id:1,src:`https://wms.geonorge.no/skwms1/wms.reguleringsplaner?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&LAYERS=Planomrade_02,Arealformal_02,Grenser_og_juridiske_linjer_02&STYLES=default,default,default&CRS=EPSG:25833&BBOX=${Pr[0]},${Pr[1]},${Pr[2]},${Pr[3]}&WIDTH=800&HEIGHT=600&FORMAT=image/png`,alt:"Reguleringsplan image"},{id:2,src:`https://wms.geonorge.no/skwms1/wms.matrikkelkart?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&LAYERS=MatrikkelKart&STYLES=default&CRS=EPSG:25833&BBOX=${Pr[0]},${Pr[1]},${Pr[2]},${Pr[3]}&WIDTH=1024&HEIGHT=768&FORMAT=image/png`,alt:"Matrikkelkart image"}]:[],[Or,Dr]=(0,t.useState)(null);(0,t.useEffect)((()=>{!Or&&Ir.length>0&&Dr(Ir[0])}),[Ir,Or]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"bg-lightPurple py-4 md:py-5 relative px-4 md:px-6",children:[(0,V.jsx)("img",{src:M4,alt:"images",className:"absolute top-0 left-0 w-full h-full",style:{zIndex:1}}),(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between relative gap-2",style:{zIndex:9},children:[(0,V.jsxs)("div",{children:[lr?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}):(0,V.jsx)("h2",{className:"text-black text-2xl md:text-[28px] desktop:text-[32px] font-semibold mb-2",children:(null===Sr||void 0===Sr||null===(a=Sr.presentationAddressApi)||void 0===a||null===(s=a.response)||void 0===s||null===(o=s.item)||void 0===o||null===(l=o.formatted)||void 0===l?void 0:l.line1)||(null===hr||void 0===hr||null===(c=hr.getAddress)||void 0===c?void 0:c.adressetekst)}),lr?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("p",{className:"text-gray text-base md:text-lg desktop:text-xl",children:(null===Sr||void 0===Sr||null===(u=Sr.presentationAddressApi)||void 0===u||null===(d=u.response)||void 0===d||null===(h=d.item)||void 0===h||null===(p=h.formatted)||void 0===p?void 0:p.line2)||`${null===hr||void 0===hr||null===(f=hr.getAddress)||void 0===f?void 0:f.kommunenummer} ${null===hr||void 0===hr||null===(m=hr.getAddress)||void 0===m?void 0:m.kommunenavn}`})]}),(0,V.jsx)("div",{className:"flex items-center gap-3 md:gap-6",children:(0,V.jsxs)("div",{className:"flex items-center gap-4",children:[lr?(0,V.jsx)("div",{className:"w-[100px] h-[20px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-gray text-sm md:text-base",children:["Gnr:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===br||void 0===br||null===(g=br.searchParameters)||void 0===g?void 0:g.gardsnummer})]}),lr?(0,V.jsx)("div",{className:"w-[100px] h-[20px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-gray text-sm md:text-base",children:["Bnr:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===br||void 0===br||null===(v=br.searchParameters)||void 0===v?void 0:v.bruksnummer})]})]})})]})]}),(0,V.jsx)("div",{className:"bg-[#125D56] py-5 relative px-4 md:px-6",children:lr?(0,V.jsx)("div",{className:"w-full h-[30px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap md:flex-nowrap gap-4 lg:gap-8 desktop:gap-[70px] justify-between",children:[(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Eiendommen er"}),(0,V.jsx)("p",{className:"text-white text-sm md:text-base font-semibold",children:"ferdig regulert til boligform\xe5l"})]})]}),(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Eiendommen har en"}),(0,V.jsxs)("p",{className:"text-white text-sm md:text-base font-semibold",children:["Utnyttelsesgrad p\xe5"," ",null===fr||void 0===fr||null===(x=fr.bya_calculations)||void 0===x||null===(y=x.input)||void 0===y?void 0:y.bya_percentage,"%"]})]})]}),(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Ekisterende BYA"}),(0,V.jsxs)("p",{className:"text-white text-sm md:text-base font-semibold",children:["Utnyttelsesgrad p\xe5"," ",((e,t,r,n,i,a)=>{const s=null!==(e=null===Sr||void 0===Sr||null===(t=Sr.buildingsApi)||void 0===t||null===(r=t.response)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.builtUpArea)))&&void 0!==e?e:[];if(null!==br&&void 0!==br&&null!==(i=br.eiendomsInformasjon)&&void 0!==i&&null!==(a=i.basisInformasjon)&&void 0!==a&&a.areal_beregnet){var o,l;return`${((s?s.reduce(((e,t)=>e+t),0):0)/(null===br||void 0===br||null===(o=br.eiendomsInformasjon)||void 0===o||null===(l=o.basisInformasjon)||void 0===l?void 0:l.areal_beregnet)*100).toFixed(2)}  %`}return"0"})()]}),(0,V.jsxs)("p",{className:"text-white text-xs md:text-sm",children:["Tilgjengelig BYA"," ",((e,t,r,n,i,a)=>{const s=null!==(e=null===Sr||void 0===Sr||null===(t=Sr.buildingsApi)||void 0===t||null===(r=t.response)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.builtUpArea)))&&void 0!==e?e:[];if(null!==fr&&void 0!==fr&&null!==(i=fr.bya_calculations)&&void 0!==i&&null!==(a=i.results)&&void 0!==a&&a.total_allowed_bya){var o,l,c,u;const e=((s?s.reduce(((e,t)=>e+t),0):0)/(null===br||void 0===br||null===(o=br.eiendomsInformasjon)||void 0===o||null===(l=o.basisInformasjon)||void 0===l?void 0:l.areal_beregnet)*100).toFixed(2);return`${((null===fr||void 0===fr||null===(c=fr.bya_calculations)||void 0===c||null===(u=c.input)||void 0===u?void 0:u.bya_percentage)-e).toFixed(2)} %`}return"0"})()]})]})]}),(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Boligen kan ha en"}),(0,V.jsxs)("p",{className:"text-white text-sm md:text-base font-semibold",children:["Grunnflate p\xe5"," ",null===fr||void 0===fr||null===(b=fr.bya_calculations)||void 0===b||null===(w=b.results)||void 0===w?void 0:w.available_building_area," ","m",(0,V.jsx)("sup",{children:"2"})]}),(0,V.jsxs)("p",{className:"text-white text-xs md:text-sm",children:["Tilgjengelig"," ",((e,t,r,n,i,a)=>{const s=null!==(e=null===Sr||void 0===Sr||null===(t=Sr.buildingsApi)||void 0===t||null===(r=t.response)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.builtUpArea)))&&void 0!==e?e:[];if(null!==fr&&void 0!==fr&&null!==(i=fr.bya_calculations)&&void 0!==i&&null!==(a=i.results)&&void 0!==a&&a.total_allowed_bya){var o,l;const e=s?s.reduce(((e,t)=>e+t),0):0;return(0,V.jsxs)(V.Fragment,{children:[((null===fr||void 0===fr||null===(o=fr.bya_calculations)||void 0===o||null===(l=o.results)||void 0===l?void 0:l.total_allowed_bya)-e).toFixed(2),"m",(0,V.jsx)("sup",{children:"2"})]})}return"0"})()]})]})]})]})}),(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h2",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold mb-3",children:"Seerdetaljer"}),(null===gr||void 0===gr?void 0:gr.length)>0?(0,V.jsxs)("table",{className:"border border-gray1 rounded-lg w-full",cellPadding:"8",children:[(0,V.jsx)("thead",{className:"border border-gray1",children:(0,V.jsxs)("tr",{children:[(0,V.jsx)("th",{className:"border border-gray1 text-sm md:text-base",children:"Navn"}),(0,V.jsx)("th",{className:"border border-gray1 text-sm md:text-base",children:"Siste visning"}),(0,V.jsx)("th",{className:"border border-gray1 text-sm md:text-base",children:"Visningstall"})]})}),(0,V.jsx)("tbody",{children:gr.map((e=>(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-center text-gray border border-gray1 text-sm md:text-base",children:e.name}),(0,V.jsx)("td",{className:"text-center text-gray border border-gray1 text-sm md:text-base",children:new Date(e.last_updated_date).toLocaleString()}),(0,V.jsx)("td",{className:"text-center text-gray border border-gray1 text-sm md:text-base",children:e.view_count})]},e.id)))})]}):(0,V.jsx)("p",{children:"Fant ingen seere."})]}),(0,V.jsxs)("div",{className:"p-4 md:p-6 rounded-lg",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 cursor-pointer",onClick:()=>{yr(!xr)},children:[(0,V.jsx)("h3",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold",children:"Eiendomsinformasjon"}),xr?(0,V.jsx)("img",{src:mi,alt:"arrow"}):(0,V.jsx)("img",{src:mi,alt:"arrow",className:"rotate-180"})]}),(0,V.jsx)("div",{className:"mt-6 "+(xr?"block":"hidden"),children:(0,V.jsxs)("div",{className:"flex flex-col desktop:flex-row gap-4 md:gap-6 desktop:gap-4 big:gap-6 justify-between",children:[(0,V.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 desktop:gap-4 big:gap-6",children:[(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Tomteopplysninger"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Areal beregnet"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(_=br.eiendomsInformasjon)&&void 0!==_&&null!==(k=_.basisInformasjon)&&void 0!==k&&k.areal_beregnet?(0,V.jsxs)(V.Fragment,{children:[null===br||void 0===br||null===(S=br.eiendomsInformasjon)||void 0===S||null===(j=S.basisInformasjon)||void 0===j?void 0:j.areal_beregnet," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Etablerings\xe5rs dato"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(E=br.eiendomsInformasjon)&&void 0!==E&&null!==(C=E.basisInformasjon)&&void 0!==C&&C.etableringsdato?E_(null===br||void 0===br||null===(N=br.eiendomsInformasjon)||void 0===N||null===(T=N.basisInformasjon)||void 0===T?void 0:T.etableringsdato):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Sist oppdatert"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(P=br.eiendomsInformasjon)&&void 0!==P&&null!==(A=P.basisInformasjon)&&void 0!==A&&A.sist_oppdatert?E_(null===br||void 0===br||null===(M=br.eiendomsInformasjon)||void 0===M||null===(I=M.basisInformasjon)||void 0===I?void 0:I.sist_oppdatert.split("T")[0]):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Tomtens totale BYA"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==fr&&void 0!==fr&&null!==(O=fr.bya_calculations)&&void 0!==O&&null!==(D=O.results)&&void 0!==D&&D.total_allowed_bya?(0,V.jsxs)(V.Fragment,{children:[null===fr||void 0===fr||null===(R=fr.bya_calculations)||void 0===R||null===(L=R.results)||void 0===L?void 0:L.total_allowed_bya," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Er registrert land"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(F=Sr.cadastreApi)||void 0===F||null===($=F.response)||void 0===$?void 0:$.item.isRegisteredLand)||!0===(null===Sr||void 0===Sr||null===(B=Sr.cadastreApi)||void 0===B||null===(z=B.response)||void 0===z?void 0:z.item.isRegisteredLand)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Festenummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(U=br.eiendomsInformasjon)&&void 0!==U&&null!==(H=U.basisInformasjon)&&void 0!==H&&H.festenummer?null===br||void 0===br||null===(G=br.eiendomsInformasjon)||void 0===G||null===(W=G.basisInformasjon)||void 0===W?void 0:W.festenummer:"-"})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Kommunale data"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kommune"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null===Sr||void 0===Sr||null===(q=Sr.presentationAddressApi)||void 0===q||null===(K=q.response)||void 0===K||null===(Z=K.item)||void 0===Z||null===(Y=Z.municipality)||void 0===Y?void 0:Y.municipalityName})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kommunenummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(X=br.eiendomsInformasjon)&&void 0!==X&&null!==(Q=X.kommune_info)&&void 0!==Q&&Q.kommunenr?null===br||void 0===br||null===(J=br.eiendomsInformasjon)||void 0===J||null===(ee=J.kommune_info)||void 0===ee?void 0:ee.kommunenr:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"G\xe5rdsnummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(te=br.eiendomsInformasjon)&&void 0!==te&&null!==(re=te.kommune_info)&&void 0!==re&&re.gaardsnummer?null===br||void 0===br||null===(ne=br.eiendomsInformasjon)||void 0===ne||null===(ie=ne.kommune_info)||void 0===ie?void 0:ie.gaardsnummer:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Bruksnummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(ae=br.eiendomsInformasjon)&&void 0!==ae&&null!==(se=ae.kommune_info)&&void 0!==se&&se.bruksnummer?null===br||void 0===br||null===(oe=br.eiendomsInformasjon)||void 0===oe||null===(le=oe.kommune_info)||void 0===le?void 0:le.bruksnummer:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Seksjonsnummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(ce=br.eiendomsInformasjon)&&void 0!==ce&&null!==(ue=ce.kommune_info)&&void 0!==ue&&ue.seksjonsnr?null===br||void 0===br||null===(de=br.eiendomsInformasjon)||void 0===de||null===(he=de.kommune_info)||void 0===he?void 0:he.seksjonsnr:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Fylke"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(pe=Sr.cadastreApi)&&void 0!==pe&&null!==(fe=pe.response)&&void 0!==fe&&null!==(me=fe.item.municipality)&&void 0!==me&&me.regionName?null===Sr||void 0===Sr||null===(ge=Sr.cadastreApi)||void 0===ge||null===(ve=ge.response)||void 0===ve||null===(xe=ve.item.municipality)||void 0===xe?void 0:xe.regionName:"-"})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Eiendomsstatus"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kan selges"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(ye=Sr.cadastreApi)||void 0===ye||null===(be=ye.response)||void 0===be?void 0:be.item.canBeSold)||"Ja"===(null===Sr||void 0===Sr||null===(we=Sr.cadastreApi)||void 0===we||null===(_e=we.response)||void 0===_e?void 0:_e.item.canBeSold)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kan bel\xe5nes"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(ke=Sr.cadastreApi)||void 0===ke||null===(Se=ke.response)||void 0===Se?void 0:Se.item.canBeMortgaged)||"Ja"===(null===Sr||void 0===Sr||null===(je=Sr.cadastreApi)||void 0===je||null===(Ee=je.response)||void 0===Ee?void 0:Ee.item.canBeMortgaged)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har bygning"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(Ce=Sr.cadastreApi)||void 0===Ce||null===(Ne=Ce.response)||void 0===Ne?void 0:Ne.item.hasBuilding)||"Ja"===(null===Sr||void 0===Sr||null===(Te=Sr.cadastreApi)||void 0===Te||null===(Pe=Te.response)||void 0===Pe?void 0:Pe.item.hasBuilding)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har fritidsbolig"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(Ae=Sr.cadastreApi)||void 0===Ae||null===(Me=Ae.response)||void 0===Me?void 0:Me.item.hasHolidayHome)||"Ja"===(null===Sr||void 0===Sr||null===(Ie=Sr.cadastreApi)||void 0===Ie||null===(Oe=Ie.response)||void 0===Oe?void 0:Oe.item.hasHolidayHome)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har bolig"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(De=Sr.cadastreApi)||void 0===De||null===(Re=De.response)||void 0===Re?void 0:Re.item.hasHousing)||"Ja"===(null===Sr||void 0===Sr||null===(Le=Sr.cadastreApi)||void 0===Le||null===(Fe=Le.response)||void 0===Fe?void 0:Fe.item.hasHousing)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Parkeringsinformasjon"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Parkering reservert plass"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==fr&&void 0!==fr&&null!==($e=fr.bya_calculations)&&void 0!==$e&&null!==(Be=$e.results)&&void 0!==Be&&null!==(ze=Be.parking)&&void 0!==ze&&ze.required_spaces?(0,V.jsxs)(V.Fragment,{children:[null===fr||void 0===fr||null===(Ue=fr.bya_calculations)||void 0===Ue||null===(Ve=Ue.results)||void 0===Ve||null===(He=Ve.parking)||void 0===He?void 0:He.required_spaces," ","stk"]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Parkering omr\xe5de per plass"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==fr&&void 0!==fr&&null!==(Ge=fr.bya_calculations)&&void 0!==Ge&&null!==(We=Ge.results)&&void 0!==We&&null!==(qe=We.parking)&&void 0!==qe&&qe.area_per_space?(0,V.jsxs)(V.Fragment,{children:[null===fr||void 0===fr||null===(Ke=fr.bya_calculations)||void 0===Ke||null===(Ze=Ke.results)||void 0===Ze||null===(Ye=Ze.parking)||void 0===Ye?void 0:Ye.area_per_space," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Totalt parkeringsomr\xe5de"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==fr&&void 0!==fr&&null!==(Xe=fr.bya_calculations)&&void 0!==Xe&&null!==(Qe=Xe.results)&&void 0!==Qe&&null!==(Je=Qe.parking)&&void 0!==Je&&Je.total_parking_area?(0,V.jsxs)(V.Fragment,{children:[null===fr||void 0===fr||null===(et=fr.bya_calculations)||void 0===et||null===(tt=et.results)||void 0===tt||null===(rt=tt.parking)||void 0===rt?void 0:rt.total_parking_area," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Parkering er usikker"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===fr||void 0===fr||null===(nt=fr.bya_calculations)||void 0===nt||null===(it=nt.results)||void 0===it||null===(at=it.parking)||void 0===at?void 0:at.is_uncertain)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Ytterligere eiendomsforhold"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har forurensning"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(st=Sr.cadastreApi)||void 0===st||null===(ot=st.response)||void 0===ot?void 0:ot.item.hasSoilContamination)||!0===(null===Sr||void 0===Sr||null===(lt=Sr.cadastreApi)||void 0===lt||null===(ct=lt.response)||void 0===ct?void 0:ct.item.hasSoilContamination)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har aktive festegrunner"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(ut=Sr.cadastreApi)||void 0===ut||null===(dt=ut.response)||void 0===dt?void 0:dt.item.hasActiveLeasedLand)||!0===(null===Sr||void 0===Sr||null===(ht=Sr.cadastreApi)||void 0===ht||null===(pt=ht.response)||void 0===pt?void 0:pt.item.hasActiveLeasedLand)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Inng\xe5r i samlet eiendom"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(ft=Sr.cadastreApi)||void 0===ft||null===(mt=ft.response)||void 0===mt?void 0:mt.item.includedInTotalRealEstate)||!0===(null===Sr||void 0===Sr||null===(gt=Sr.cadastreApi)||void 0===gt||null===(vt=gt.response)||void 0===vt?void 0:vt.item.includedInTotalRealEstate)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kulturminner registrert"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(xt=br.eiendomsInformasjon)||void 0===xt||null===(yt=xt.status)||void 0===yt?void 0:yt.kulturminner_registrert)||!0===(null===br||void 0===br||null===(bt=br.eiendomsInformasjon)||void 0===bt||null===(wt=bt.status)||void 0===wt?void 0:wt.kulturminner_registrert)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Grunnforurensning"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(_t=br.eiendomsInformasjon)||void 0===_t||null===(kt=_t.status)||void 0===kt?void 0:kt.grunnforurensning)||!0===(null===br||void 0===br||null===(St=br.eiendomsInformasjon)||void 0===St||null===(jt=St.status)||void 0===jt?void 0:jt.grunnforurensning)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Spesielle registreringer"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Sammensl\xe5tte tomter"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(Et=Sr.cadastreApi)||void 0===Et||null===(Ct=Et.response)||void 0===Ct?void 0:Ct.item.numberOfPlots)||!0===(null===Sr||void 0===Sr||null===(Nt=Sr.cadastreApi)||void 0===Nt||null===(Tt=Nt.response)||void 0===Tt?void 0:Tt.item.numberOfPlots)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Tinglyst"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(Pt=br.eiendomsInformasjon)||void 0===Pt||null===(At=Pt.basisInformasjon)||void 0===At?void 0:At.tinglyst)||!0===(null===br||void 0===br||null===(Mt=br.eiendomsInformasjon)||void 0===Mt||null===(It=Mt.basisInformasjon)||void 0===It?void 0:It.tinglyst)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Ugyldig"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:(0,V.jsx)("img",{src:C4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Oppm\xe5ling ikke fullf\xf8rt"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(Ot=br.eiendomsInformasjon)||void 0===Ot||null===(Dt=Ot.status)||void 0===Dt?void 0:Dt.oppmaling_ikke_fullfort)||!0===(null===br||void 0===br||null===(Rt=br.eiendomsInformasjon)||void 0===Rt||null===(Lt=Rt.status)||void 0===Lt?void 0:Lt.oppmaling_ikke_fullfort)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Mangler grenseoppmerking"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(Ft=br.eiendomsInformasjon)||void 0===Ft||null===($t=Ft.status)||void 0===$t?void 0:$t.mangler_grensepunktmerking)||!0===(null===br||void 0===br||null===(Bt=br.eiendomsInformasjon)||void 0===Bt||null===(zt=Bt.status)||void 0===zt?void 0:zt.mangler_grensepunktmerking)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Under sammensl\xe5ing"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(Ut=br.eiendomsInformasjon)||void 0===Ut||null===(Vt=Ut.status)||void 0===Vt?void 0:Vt.under_sammenslaing)||"Ja"===(null===br||void 0===br||null===(Ht=br.eiendomsInformasjon)||void 0===Ht||null===(Gt=Ht.status)||void 0===Gt?void 0:Gt.under_sammenslaing)===!0?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]})]}),(0,V.jsx)("div",{className:"rounded-[12px] overflow-hidden h-[300px] desktop:h-auto w-full desktop:w-[407px]",children:lr?(0,V.jsx)("div",{className:"w-full h-full rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)(V.Fragment,{children:(null===br||void 0===br||null===(Wt=br.coordinates)||void 0===Wt?void 0:Wt.convertedCoordinates)&&(0,V.jsx)(rpe,{coordinates:null===br||void 0===br||null===(qt=br.coordinates)||void 0===qt?void 0:qt.convertedCoordinates})})})]})})]}),(0,V.jsxs)("div",{className:"w-full mt-8 md:mt-[44px]",children:[(0,V.jsx)("div",{className:"flex border-b border-[#DDDDDD]",children:wr.map((e=>(0,V.jsx)("button",{onClick:()=>kr(e.id),className:"px-3 md:px-4 py-2 text-black border-b-[3px] text-sm md:text-base desktop:text-lg transition-colors duration-300 "+(_r===e.id?"border-[#6941C6] font-semibold":"border-transparent"),children:e.label},e.id)))}),(0,V.jsxs)("div",{className:"pt-5 md:pt-8",children:["Regulering"===_r&&(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 md:gap-[44px] desktop:gap-[60px]",children:[lr?(0,V.jsx)("div",{className:"w-1/2 h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"relative w-full md:w-1/2",children:[(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[(0,V.jsx)("h2",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold",children:"Reguleringsplan"}),(0,V.jsx)("img",{src:N4,alt:"images"})]}),(0,V.jsx)("div",{className:"flex flex-col gap-2 md:gap-3",children:(0,V.jsx)(V.Fragment,{children:fr&&(null===fr||void 0===fr||null===(Kt=fr.conclusion)||void 0===Kt?void 0:Kt.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-start gap-2 md:gap-3 text-gray text-sm md:text-base",children:[(0,V.jsx)("img",{src:T4,alt:"images"}),(0,V.jsx)("span",{children:e})]},t))))})})]}),(0,V.jsxs)("div",{className:"w-full flex flex-col gap-4 md:gap-8 items-center mt-7 md:mt-[55px]",children:[(0,V.jsxs)("div",{className:"rounded-[12px] overflow-hidden w-full relative border border-[#7D89B0] h-[450px] md:h-[590px]",children:[ur&&(0,V.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-10",children:(0,V.jsx)("div",{className:"spinner-border animate-spin border-t-4 border-b-4 border-blue-500 w-12 h-12 border-solid rounded-full"})}),(0,V.jsx)("img",{src:null===Or||void 0===Or?void 0:Or.src,alt:null===Or||void 0===Or?void 0:Or.alt,className:"h-full w-full",onLoad:()=>dr(!1),onError:()=>dr(!1)}),(0,V.jsx)("div",{className:"absolute top-0 left-[4px] flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("div",{className:"bg-white h-[44px] w-[44px] rounded-full flex items-center justify-center "+((null===Or||void 0===Or?void 0:Or.id)===(null===(Zt=Ir[0])||void 0===Zt?void 0:Zt.id)?"opacity-50":"opacity-100"),style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},onClick:()=>{var e;if((null===Or||void 0===Or?void 0:Or.id)!==(null===(e=Ir[0])||void 0===e?void 0:e.id)){const e=Ir.findIndex((e=>e.id===Or.id));dr(!0);const t=e-1;t>=0&&(Dr(Ir[t]),Nr())}},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:`${(null===Or||void 0===Or?void 0:Or.id)!==(null===(Yt=Ir[0])||void 0===Yt?void 0:Yt.id)&&"cursor-pointer"} rotate-180`})})}),(0,V.jsx)("div",{className:"absolute bottom-0 right-[4px] flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("div",{className:"bg-white h-[44px] w-[44px] rounded-full flex items-center justify-center "+((null===Or||void 0===Or?void 0:Or.id)===(null===(Xt=Ir[Ir.length-1])||void 0===Xt?void 0:Xt.id)?"opacity-50":"opacity-100"),style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},onClick:()=>{var e;if((null===Or||void 0===Or?void 0:Or.id)!==(null===(e=Ir[Ir.length-1])||void 0===e?void 0:e.id)){const e=Ir.findIndex((e=>e.id===Or.id));dr(!0);const t=e+1;t<Ir.length&&Dr(Ir[t]),Tr()}},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:`${(null===Or||void 0===Or?void 0:Or.id)!==(null===(Qt=Ir[Ir.length-1])||void 0===Qt?void 0:Qt.id)&&"cursor-pointer"}`})})})]}),(0,V.jsxs)("div",{className:"relative w-full flex justify-center",children:[(0,V.jsx)("div",{className:"gap-4 md:gap-8 flex overflow-x-auto overFlowScrollHidden",ref:Cr,children:Ir.map(((e,t)=>(0,V.jsx)("div",{className:"relative min-w-[90px] max-w-[90px]",children:(0,V.jsx)("img",{src:e.src,alt:e.alt,className:"h-[90px] w-full rounded-[12px] cursor-pointer "+((null===Or||void 0===Or?void 0:Or.id)===(null===e||void 0===e?void 0:e.id)?"border-2 border-primary":"border border-[#7D89B033]"),style:{zIndex:999},onClick:()=>(e=>{(null===Or||void 0===Or?void 0:Or.id)===e.id?dr(!1):dr(!0),Dr(e)})(e)})},t)))}),Ir.length>5&&(0,V.jsx)("div",{className:"absolute top-0 right-0 h-[90px] w-[90px]",style:{zIndex:9999,background:"linear-gradient(-90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 90.63%)"}}),Ir.length>5&&(0,V.jsx)("div",{className:"absolute top-0 left-0 h-[90px] w-[90px]",style:{zIndex:9999,background:"linear-gradient(90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 90.63%)"}}),Ir.length>5&&(0,V.jsx)("div",{className:"absolute top-0 left-0 flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:((null===Or||void 0===Or?void 0:Or.id)!==(null===(Jt=Ir[0])||void 0===Jt?void 0:Jt.id)?"cursor-pointer opacity-100":"opacity-50")+" rotate-180",onClick:()=>{var e;if((null===Or||void 0===Or?void 0:Or.id)!==(null===(e=Ir[0])||void 0===e?void 0:e.id)){const e=Ir.findIndex((e=>e.id===Or.id));dr(!0);const t=e-1;t>=0&&(Dr(Ir[t]),Nr())}}})}),Ir.length>5&&(0,V.jsx)("div",{className:"absolute top-0 right-0 flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:""+((null===Or||void 0===Or?void 0:Or.id)!==(null===(er=Ir[Ir.length-1])||void 0===er?void 0:er.id)?"cursor-pointer opacity-100":"opacity-50"),onClick:()=>{var e;if((null===Or||void 0===Or?void 0:Or.id)!==(null===(e=Ir[Ir.length-1])||void 0===e?void 0:e.id)){const e=Ir.findIndex((e=>e.id===Or.id));dr(!0);const t=e+1;t<Ir.length&&Dr(Ir[t]),Tr()}}})})]})]})]}),lr?(0,V.jsx)("div",{className:"w-1/2 h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"relative w-full md:w-1/2",children:[(0,V.jsxs)("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[(0,V.jsxs)("h2",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold",children:["Kommuneplan for"," ",null===Sr||void 0===Sr||null===(tr=Sr.presentationAddressApi)||void 0===tr||null===(rr=tr.response)||void 0===rr||null===(nr=rr.item)||void 0===nr||null===(ir=nr.municipality)||void 0===ir?void 0:ir.municipalityName]}),(0,V.jsx)("img",{src:N4,alt:"images"})]}),(0,V.jsx)("div",{className:"flex flex-col gap-2 md:gap-3",children:fr&&(null===fr||void 0===fr||null===(ar=fr.applicable_rules)||void 0===ar?void 0:ar.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-start gap-2 md:gap-3 text-gray text-sm md:text-base",children:[(0,V.jsx)("img",{src:T4,alt:"images"}),(0,V.jsxs)("div",{children:[e.rule," ",(0,V.jsx)("span",{className:"text-primary font-bold",children:e.section})]})]},t))))})]})]})})}),"Eierinformasjon"===_r&&(0,V.jsx)(Jhe,{data:null===br||void 0===br?void 0:br.latestOwnership}),"Dokument"===_r&&(0,V.jsx)(V.Fragment,{children:lr?(0,V.jsx)("div",{className:"w-full h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)(V.Fragment,{children:Er&&Ar&&(0,V.jsx)("div",{children:(0,V.jsx)("div",{dangerouslySetInnerHTML:{__html:Ar},style:{width:"100%",height:"820px"}})})})})]})]})]})]})},ipe=()=>{var e;const[r,n]=(0,t.useState)(1),[i,a]=(0,t.useState)([]),[s,o]=(0,t.useState)(""),l=Kr(),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null),[p,f]=(0,t.useState)("asc"),m=(0,t.useMemo)((()=>i.filter((e=>{var t;return((null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"").includes(s.toLowerCase())}))),[i,s]);(0,t.useEffect)((()=>{(async()=>{u(!0);try{const e=await pg(lm(g_,"users")),t=await Promise.all(e.docs.map((async e=>{const t=lm(g_,"users",e.id,"property"),r=await pg(t);return{id:e.id,...e.data(),propertyCount:r.size}})));a(t)}catch(e){console.error("Error fetching users data:",e)}finally{u(!1)}})()}),[]);const g=(e,t)=>{var r,n,i;let a=e;switch(t){case"Navn":{const e=(null===a||void 0===a?void 0:a.name)||(null===a||void 0===a?void 0:a.f_name)||(null===a||void 0===a?void 0:a.l_name);return null===e||void 0===e?"":"string"===typeof e?e.toLowerCase():"number"===typeof e||null!==e&&void 0!==e?e:""}case"E-post":return null===(null===a||void 0===a?void 0:a.email)||void 0===(null===a||void 0===a?void 0:a.email)?"":"string"===typeof(null===a||void 0===a?void 0:a.email)?null===a||void 0===a?void 0:a.email.toLowerCase():"number"===typeof(null===a||void 0===a?void 0:a.email)?null===a||void 0===a?void 0:a.email:null!==(r=null===a||void 0===a?void 0:a.email)&&void 0!==r?r:"";case"S\xf8k Eiendom Count":return null===(null===a||void 0===a?void 0:a.propertyCount)||void 0===(null===a||void 0===a?void 0:a.propertyCount)?0:"string"===typeof(null===a||void 0===a?void 0:a.propertyCount)?null===a||void 0===a?void 0:a.propertyCount.toLowerCase():"number"===typeof(null===a||void 0===a?void 0:a.propertyCount)?null===a||void 0===a?void 0:a.propertyCount:null!==(n=null===a||void 0===a?void 0:a.propertyCount)&&void 0!==n?n:"";case"Date registrated":{const e=null===a||void 0===a?void 0:a.createdAt,t=C_(null===e||void 0===e?void 0:e.seconds,null===e||void 0===e?void 0:e.nanoseconds);return null!==t&&void 0!==t?t:0}case"OppdatertKlokke":{const e=null===a||void 0===a?void 0:a.updatedAt,t=C_(null===e||void 0===e?void 0:e.seconds,null===e||void 0===e?void 0:e.nanoseconds);return null!==t&&void 0!==t?t:0}case"Antall p\xe5logginger":return null===(null===a||void 0===a?void 0:a.loginCount)||void 0===(null===a||void 0===a?void 0:a.loginCount)?0:"string"===typeof(null===a||void 0===a?void 0:a.loginCount)?null===a||void 0===a?void 0:a.loginCount.toLowerCase():"number"===typeof(null===a||void 0===a?void 0:a.loginCount)?null===a||void 0===a?void 0:a.loginCount:null!==(i=null===a||void 0===a?void 0:a.loginCount)&&void 0!==i?i:"";default:return""}},v=(0,t.useMemo)((()=>{if(!d)return m;const e=[...m].sort(((e,t)=>{const r=g(e,d),n=g(t,d);return r===n?0:"asc"===p?r>n?1:-1:r<n?1:-1}));return e}),[m,d,p]),x=(0,t.useMemo)((()=>[{accessorKey:"Navn",header:"Navn",cell:e=>{let{row:t}=e;return(0,V.jsxs)("div",{className:"flex items-center gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center border-gray1 border bg-gray3",children:t.original.name[0]}),(0,V.jsx)("p",{className:"font-medium text-black text-sm mb-[2px]",children:t.original.name})]})}},{accessorKey:"E-post",header:"E-post",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-sm text-gray",children:t.original.email})}},{accessorKey:"S\xf8k Eiendom Count",header:"S\xf8k Eiendom Count",cell:e=>{var t;let{row:r}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack",children:null===(t=r.original)||void 0===t?void 0:t.propertyCount})}},{accessorKey:"Date registrated",header:"Date registrated",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black",children:n.original.createdAt?C_(null===(t=n.original.createdAt)||void 0===t?void 0:t.seconds,null===(r=n.original.createdAt)||void 0===r?void 0:r.nanoseconds):"-"})}},{accessorKey:"OppdatertKlokke",header:"OppdatertKlokke",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black",children:n.original.updatedAt?C_(null===(t=n.original.updatedAt)||void 0===t?void 0:t.seconds,null===(r=n.original.updatedAt)||void 0===r?void 0:r.nanoseconds):"-"})}},{accessorKey:"Antall p\xe5logginger",header:"Antall p\xe5logginger",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack",children:null!==(t=n.original)&&void 0!==t&&t.loginCount?null===(r=n.original)||void 0===r?void 0:r.loginCount:0})}},{id:"action",header:"Action",cell:e=>{let{row:t}=e;return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("div",{className:"flex items-center justify-center gap-3",children:(0,V.jsx)(qT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>l(`/se-user/${t.original.id}`)})})})}}]),[l]),y=(0,t.useMemo)((()=>{const e=10*(r-1);return v.slice(e,e+10)}),[v,r]),b=aA({data:y,columns:x,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:r-1,pageSize:10}},pageCount:Math.ceil(v.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:r-1,pageSize:10});n(t.pageIndex+1)}}});return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Alle brukere"}),(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{className:"mb-2 flex items-center justify-between bg-lightPurple rounded-[12px] py-3 px-4",children:(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px]",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k",className:"focus-within:outline-none",value:s,onChange:e=>o(e.target.value)})]})}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:b.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:(0,V.jsxs)("div",{className:"flex items-center cursor-pointer select-none",onClick:()=>{const t=e.column.columnDef.header;d===t?f("asc"===p?"desc":"asc"):(h(t),f("asc"))},children:[iA(e.column.columnDef.header,e.getContext()),d===e.column.columnDef.header&&(0,V.jsxs)("span",{className:"text-darkBlack",children:["\xa0","asc"===p?"\u25b2":"\u25bc"]})]})},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:c?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:x.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===v.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:x.length,className:"h-24 text-center",children:"No results."})}):(null===(e=b.getRowModel().rows)||void 0===e?void 0:e.length)&&b.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>b.previousPage(),disabled:!b.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:r})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:b.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>b.nextPage(),disabled:!b.getCanNextPage(),children:"Neste"})]})]})]})]})})},ape=()=>{var e,r;const n=Gr().pathname.split("/"),i=n.length>2?n[2]:null,[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(1);(0,t.useEffect)((()=>{if(i){s(!0);const e=async()=>{try{const e=cm(g_,"users",i),t=await dg(e);if(t.exists()){const e=t.data(),r=lm(g_,"users",i,"property"),n=(await pg(r)).docs.map((e=>({id:e.id,...e.data()})));l({...e,properties:n}),s(!1)}}catch(e){s(!1),console.error("Error fetching user data:",e)}};e()}}),[i]);const d=null!==o&&void 0!==o&&o.properties?Math.ceil(o.properties.length/8):1,h=null===o||void 0===o||null===(e=o.properties)||void 0===e?void 0:e.slice(8*(c-1),8*c);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"bg-lightPurple py-4 md:py-5 relative px-4 md:px-6",children:[(0,V.jsx)("img",{src:M4,alt:"images",className:"absolute top-0 left-0 w-full h-full",style:{zIndex:1}}),(0,V.jsxs)("div",{style:{zIndex:9},children:[a?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}):(0,V.jsx)("h2",{className:"text-black text-2xl md:text-[28px] desktop:text-[32px] font-semibold mb-2",children:null===o||void 0===o?void 0:o.name}),a?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("p",{className:"text-gray text-base md:text-lg desktop:text-xl",children:null===o||void 0===o?void 0:o.email})]})]}),(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("h4",{className:"text-gray text-base md:text-lg desktop:text-xl",children:["S\xf8k Eiendom Count:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===o||void 0===o||null===(r=o.properties)||void 0===r?void 0:r.length})]}),(0,V.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 desktop:grid-cols-4 gap-x-4 lg:gap-x-6 desktop:gap-x-8 gap-y-7 lg:gap-y-9 desktop:gap-y-12",children:a?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"w-full h-[400px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[400px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[400px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[400px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[400px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[400px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[400px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}),(0,V.jsx)("div",{className:"w-full h-[400px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}})]}):(0,V.jsx)(V.Fragment,{children:(null===h||void 0===h?void 0:h.length)>0?h.map(((e,t)=>{var r,n,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_;return(0,V.jsxs)(ti,{to:`/property?propertyId=${null===e||void 0===e?void 0:e.id}&&userId=${i}`,className:"relative",children:[(0,V.jsxs)("div",{className:"flex flex-col gap-3 cursor-pointer relative z-40",children:[(0,V.jsx)("div",{className:"h-[300px] md:h-[350px] cursor-pointer rounded-lg overflow-hidden",children:(null===e||void 0===e||null===(r=e.lamdaDataFromApi)||void 0===r||null===(n=r.coordinates)||void 0===n?void 0:n.convertedCoordinates)&&(0,V.jsx)(rpe,{coordinates:null===e||void 0===e||null===(a=e.lamdaDataFromApi)||void 0===a||null===(s=a.coordinates)||void 0===s?void 0:s.convertedCoordinates})}),(0,V.jsx)("h4",{className:"text-black font-medium text-base lg:text-lg",children:(null===e||void 0===e||null===(o=e.getAddress)||void 0===o?void 0:o.adressetekst)||`${null===e||void 0===e||null===(l=e.CadastreDataFromApi)||void 0===l||null===(c=l.presentationAddressApi)||void 0===c||null===(u=c.response)||void 0===u||null===(d=u.item)||void 0===d||null===(h=d.formatted)||void 0===h?void 0:h.line1}\n                            ${null===e||void 0===e||null===(p=e.CadastreDataFromApi)||void 0===p||null===(f=p.presentationAddressApi)||void 0===f||null===(m=f.response)||void 0===m||null===(g=m.item)||void 0===g||null===(v=g.formatted)||void 0===v?void 0:v.line2}`}),(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsxs)("div",{className:"text-gray text-sm",children:["Gnr:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===e||void 0===e||null===(x=e.lamdaDataFromApi)||void 0===x||null===(y=x.searchParameters)||void 0===y?void 0:y.gardsnummer})]}),(0,V.jsx)("div",{className:"h-[12px] w-[1px] border-l border-gray1"}),(0,V.jsxs)("div",{className:"text-gray text-sm",children:["Bnr:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===e||void 0===e||null===(b=e.lamdaDataFromApi)||void 0===b||null===(w=b.searchParameters)||void 0===w?void 0:w.bruksnummer})]}),(0,V.jsx)("div",{className:"h-[12px] w-[1px] border-l border-gray1"}),(0,V.jsxs)("div",{className:"text-gray text-sm",children:["Snr:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===e||void 0===e||null===(_=e.getAddress)||void 0===_?void 0:_.bokstav})]})]})]}),(0,V.jsx)("div",{className:"absolute z-50 top-0 left-0 h-full w-full"})]},t)})):(0,V.jsx)("p",{children:"No Search History found."})})}),(0,V.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,V.jsx)("button",{onClick:()=>u((e=>Math.max(e-1,1))),disabled:1===c,className:"px-4 py-2 border rounded "+(1===c?"opacity-50 cursor-not-allowed":""),children:"Previous"}),(0,V.jsxs)("span",{className:"px-4 py-2 border rounded",children:["Page ",c," of ",d]}),(0,V.jsx)("button",{onClick:()=>u((e=>Math.min(e+1,d))),disabled:c===d,className:"px-4 py-2 border rounded "+(c===d?"opacity-50 cursor-not-allowed":""),children:"Next"})]})]})]})},spe=()=>{var e,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_,k,S,j,E,C,N,T,P,A,M,I,O,D,R,L,F,$,B,z,U,H,G,W,q,K,Z,Y,X,Q,J,ee,te,re,ne,ie,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ge,ve,xe,ye,be,we,_e,ke,Se,je,Ee,Ce,Ne,Te,Pe,Ae,Me,Ie,Oe,De,Re,Le,Fe,$e,Be,ze,Ue,Ve,He,Ge,We,qe,Ke,Ze,Ye,Xe,Qe,Je,et,tt,rt,nt,it,at,st,ot,lt,ct,ut,dt,ht,pt,ft,mt,gt,vt,xt,yt,bt,wt,_t,kt,St,jt,Et,Ct,Nt,Tt,Pt,At,Mt,It,Ot,Dt,Rt,Lt,Ft,$t,Bt,zt,Ut,Vt,Ht,Gt,Wt,qt,Kt,Zt,Yt,Xt,Qt,Jt,er,tr,rr,nr,ir,ar;const sr=Gr(),[or,lr]=(0,t.useState)(!1),[cr,ur]=(0,t.useState)(!1),[dr,hr]=(0,t.useState)(null),[pr,fr]=(0,t.useState)(null),mr=new URLSearchParams(sr.search),gr=mr.get("propertyId"),vr=mr.get("userId");(0,t.useEffect)((()=>{var e;if(null!==dr&&void 0!==dr&&null!==(e=dr.additionalData)&&void 0!==e&&e.answer)try{var t;const e=null===dr||void 0===dr||null===(t=dr.additionalData)||void 0===t?void 0:t.answer;fr(e)}catch(r){console.error("Error parsing additionalData.answer:",r),fr(null)}}),[null===dr||void 0===dr?void 0:dr.additionalData]),(0,t.useEffect)((()=>{if(vr&&gr){lr(!0);const e=async()=>{try{const e=cm(g_,"users",vr,"property",gr),t=await dg(e);t.exists()?hr(t.data()):console.error("No such document!")}catch(e){console.error("Error fetching property data:",e)}finally{lr(!1)}};e()}}),[vr,gr]);const[xr,yr]=(0,t.useState)(!0),br=null===dr||void 0===dr?void 0:dr.lamdaDataFromApi,wr=[{id:"Regulering",label:"Regulering"},...null!==br&&void 0!==br&&br.latestOwnership?[{id:"Eierinformasjon",label:"Eierinformasjon"}]:[],{id:"Dokument",label:"Dokument"}],[_r,kr]=(0,t.useState)(wr[0].id),Sr=null===dr||void 0===dr?void 0:dr.CadastreDataFromApi,jr=null===Sr||void 0===Sr||null===(e=Sr.cadastreApi)||void 0===e||null===(r=e.response)||void 0===r||null===(n=r.item)||void 0===n||null===(i=n.geojson)||void 0===i?void 0:i.bbox,Er=Array.isArray(jr)&&4===jr.length,Cr=(0,t.useRef)(null),Nr=()=>{Cr.current&&Cr.current.scrollBy({left:-90,behavior:"smooth"})},Tr=()=>{Cr.current&&Cr.current.scrollBy({left:90,behavior:"smooth"})},Pr=Er&&[jr[0]-30,jr[1]-30,jr[2]+30,jr[3]+30],[Ar,Mr]=(0,t.useState)(null);(0,t.useEffect)((()=>{Er&&(async()=>{const e=`https://wms.geonorge.no/skwms1/wms.reguleringsplaner?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&QUERY_LAYERS=Planomrade_02,Arealformal_02&LAYERS=Planomrade_02,Arealformal_02&INFO_FORMAT=text/html&CRS=EPSG:25833&BBOX=${jr[0]},${jr[1]},${jr[2]},${jr[3]}&WIDTH=800&HEIGHT=600&I=400&J=300`;try{const t=await fetch(e),r=await t.text(),n=(new DOMParser).parseFromString(r,"text/html");n.querySelectorAll("img").forEach((e=>e.remove()));const i=n.body.innerHTML;Mr(i)}catch(t){console.error("Error fetching feature info:",t),Mr("<p>Error loading data</p>")}})()}),[Er,jr]);const Ir=Er?[{id:1,src:`https://wms.geonorge.no/skwms1/wms.reguleringsplaner?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&LAYERS=Planomrade_02,Arealformal_02,Grenser_og_juridiske_linjer_02&STYLES=default,default,default&CRS=EPSG:25833&BBOX=${Pr[0]},${Pr[1]},${Pr[2]},${Pr[3]}&WIDTH=800&HEIGHT=600&FORMAT=image/png`,alt:"Reguleringsplan image"},{id:2,src:`https://wms.geonorge.no/skwms1/wms.matrikkelkart?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&LAYERS=MatrikkelKart&STYLES=default&CRS=EPSG:25833&BBOX=${Pr[0]},${Pr[1]},${Pr[2]},${Pr[3]}&WIDTH=1024&HEIGHT=768&FORMAT=image/png`,alt:"Matrikkelkart image"}]:[],[Or,Dr]=(0,t.useState)(null);(0,t.useEffect)((()=>{!Or&&Ir.length>0&&Dr(Ir[0])}),[Ir,Or]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"bg-lightPurple py-4 md:py-5 relative px-4 md:px-6",children:[(0,V.jsx)("img",{src:M4,alt:"images",className:"absolute top-0 left-0 w-full h-full",style:{zIndex:1}}),(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between relative gap-2",style:{zIndex:9},children:[(0,V.jsxs)("div",{children:[or?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}):(0,V.jsx)("h2",{className:"text-black text-2xl md:text-[28px] desktop:text-[32px] font-semibold mb-2",children:(null===Sr||void 0===Sr||null===(a=Sr.presentationAddressApi)||void 0===a||null===(s=a.response)||void 0===s||null===(o=s.item)||void 0===o||null===(l=o.formatted)||void 0===l?void 0:l.line1)||(null===dr||void 0===dr||null===(c=dr.getAddress)||void 0===c?void 0:c.adressetekst)}),or?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("p",{className:"text-gray text-base md:text-lg desktop:text-xl",children:(null===Sr||void 0===Sr||null===(u=Sr.presentationAddressApi)||void 0===u||null===(d=u.response)||void 0===d||null===(h=d.item)||void 0===h||null===(p=h.formatted)||void 0===p?void 0:p.line2)||`${null===dr||void 0===dr||null===(f=dr.getAddress)||void 0===f?void 0:f.kommunenummer} ${null===dr||void 0===dr||null===(m=dr.getAddress)||void 0===m?void 0:m.kommunenavn}`})]}),(0,V.jsx)("div",{className:"flex items-center gap-3 md:gap-6",children:(0,V.jsxs)("div",{className:"flex items-center gap-4",children:[or?(0,V.jsx)("div",{className:"w-[100px] h-[20px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-gray text-sm md:text-base",children:["Gnr:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===br||void 0===br||null===(g=br.searchParameters)||void 0===g?void 0:g.gardsnummer})]}),or?(0,V.jsx)("div",{className:"w-[100px] h-[20px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-gray text-sm md:text-base",children:["Bnr:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===br||void 0===br||null===(v=br.searchParameters)||void 0===v?void 0:v.bruksnummer})]})]})})]})]}),(0,V.jsx)("div",{className:"bg-[#125D56] py-5 relative px-4 md:px-6",children:or?(0,V.jsx)("div",{className:"w-full h-[30px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap md:flex-nowrap gap-4 lg:gap-8 desktop:gap-[70px] justify-between",children:[(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Eiendommen er"}),(0,V.jsx)("p",{className:"text-white text-sm md:text-base font-semibold",children:"ferdig regulert til boligform\xe5l"})]})]}),(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Eiendommen har en"}),(0,V.jsxs)("p",{className:"text-white text-sm md:text-base font-semibold",children:["Utnyttelsesgrad p\xe5"," ",null===pr||void 0===pr||null===(x=pr.bya_calculations)||void 0===x||null===(y=x.input)||void 0===y?void 0:y.bya_percentage,"%"]})]})]}),(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Ekisterende BYA"}),(0,V.jsxs)("p",{className:"text-white text-sm md:text-base font-semibold",children:["Utnyttelsesgrad p\xe5"," ",((e,t,r,n,i,a)=>{const s=null!==(e=null===Sr||void 0===Sr||null===(t=Sr.buildingsApi)||void 0===t||null===(r=t.response)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.builtUpArea)))&&void 0!==e?e:[];if(null!==br&&void 0!==br&&null!==(i=br.eiendomsInformasjon)&&void 0!==i&&null!==(a=i.basisInformasjon)&&void 0!==a&&a.areal_beregnet){var o,l;return`${((s?s.reduce(((e,t)=>e+t),0):0)/(null===br||void 0===br||null===(o=br.eiendomsInformasjon)||void 0===o||null===(l=o.basisInformasjon)||void 0===l?void 0:l.areal_beregnet)*100).toFixed(2)}  %`}return"0"})()]}),(0,V.jsxs)("p",{className:"text-white text-xs md:text-sm",children:["Tilgjengelig BYA"," ",((e,t,r,n,i,a)=>{const s=null!==(e=null===Sr||void 0===Sr||null===(t=Sr.buildingsApi)||void 0===t||null===(r=t.response)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.builtUpArea)))&&void 0!==e?e:[];if(null!==pr&&void 0!==pr&&null!==(i=pr.bya_calculations)&&void 0!==i&&null!==(a=i.results)&&void 0!==a&&a.total_allowed_bya){var o,l,c,u;const e=((s?s.reduce(((e,t)=>e+t),0):0)/(null===br||void 0===br||null===(o=br.eiendomsInformasjon)||void 0===o||null===(l=o.basisInformasjon)||void 0===l?void 0:l.areal_beregnet)*100).toFixed(2);return`${((null===pr||void 0===pr||null===(c=pr.bya_calculations)||void 0===c||null===(u=c.input)||void 0===u?void 0:u.bya_percentage)-e).toFixed(2)} %`}return"0"})()]})]})]}),(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Boligen kan ha en"}),(0,V.jsxs)("p",{className:"text-white text-sm md:text-base font-semibold",children:["Grunnflate p\xe5"," ",null===pr||void 0===pr||null===(b=pr.bya_calculations)||void 0===b||null===(w=b.results)||void 0===w?void 0:w.available_building_area," ","m",(0,V.jsx)("sup",{children:"2"})]}),(0,V.jsxs)("p",{className:"text-white text-xs md:text-sm",children:["Tilgjengelig"," ",((e,t,r,n,i,a)=>{const s=null!==(e=null===Sr||void 0===Sr||null===(t=Sr.buildingsApi)||void 0===t||null===(r=t.response)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.builtUpArea)))&&void 0!==e?e:[];if(null!==pr&&void 0!==pr&&null!==(i=pr.bya_calculations)&&void 0!==i&&null!==(a=i.results)&&void 0!==a&&a.total_allowed_bya){var o,l;const e=s?s.reduce(((e,t)=>e+t),0):0;return(0,V.jsxs)(V.Fragment,{children:[((null===pr||void 0===pr||null===(o=pr.bya_calculations)||void 0===o||null===(l=o.results)||void 0===l?void 0:l.total_allowed_bya)-e).toFixed(2),"m",(0,V.jsx)("sup",{children:"2"})]})}return"0"})()]})]})]})]})}),(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"p-4 md:p-6 rounded-lg",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 cursor-pointer",onClick:()=>{yr(!xr)},children:[(0,V.jsx)("h3",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold",children:"Eiendomsinformasjon"}),xr?(0,V.jsx)("img",{src:mi,alt:"arrow"}):(0,V.jsx)("img",{src:mi,alt:"arrow",className:"rotate-180"})]}),(0,V.jsx)("div",{className:"mt-6 "+(xr?"block":"hidden"),children:(0,V.jsxs)("div",{className:"flex flex-col desktop:flex-row gap-4 md:gap-6 desktop:gap-4 big:gap-6 justify-between",children:[(0,V.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 desktop:gap-4 big:gap-6",children:[(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Tomteopplysninger"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Areal beregnet"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(_=br.eiendomsInformasjon)&&void 0!==_&&null!==(k=_.basisInformasjon)&&void 0!==k&&k.areal_beregnet?(0,V.jsxs)(V.Fragment,{children:[null===br||void 0===br||null===(S=br.eiendomsInformasjon)||void 0===S||null===(j=S.basisInformasjon)||void 0===j?void 0:j.areal_beregnet," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Etablerings\xe5rs dato"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(E=br.eiendomsInformasjon)&&void 0!==E&&null!==(C=E.basisInformasjon)&&void 0!==C&&C.etableringsdato?E_(null===br||void 0===br||null===(N=br.eiendomsInformasjon)||void 0===N||null===(T=N.basisInformasjon)||void 0===T?void 0:T.etableringsdato):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Sist oppdatert"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(P=br.eiendomsInformasjon)&&void 0!==P&&null!==(A=P.basisInformasjon)&&void 0!==A&&A.sist_oppdatert?E_(null===br||void 0===br||null===(M=br.eiendomsInformasjon)||void 0===M||null===(I=M.basisInformasjon)||void 0===I?void 0:I.sist_oppdatert.split("T")[0]):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Tomtens totale BYA"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==pr&&void 0!==pr&&null!==(O=pr.bya_calculations)&&void 0!==O&&null!==(D=O.results)&&void 0!==D&&D.total_allowed_bya?(0,V.jsxs)(V.Fragment,{children:[null===pr||void 0===pr||null===(R=pr.bya_calculations)||void 0===R||null===(L=R.results)||void 0===L?void 0:L.total_allowed_bya," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Er registrert land"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(F=Sr.cadastreApi)||void 0===F||null===($=F.response)||void 0===$?void 0:$.item.isRegisteredLand)||!0===(null===Sr||void 0===Sr||null===(B=Sr.cadastreApi)||void 0===B||null===(z=B.response)||void 0===z?void 0:z.item.isRegisteredLand)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Festenummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(U=br.eiendomsInformasjon)&&void 0!==U&&null!==(H=U.basisInformasjon)&&void 0!==H&&H.festenummer?null===br||void 0===br||null===(G=br.eiendomsInformasjon)||void 0===G||null===(W=G.basisInformasjon)||void 0===W?void 0:W.festenummer:"-"})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Kommunale data"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kommune"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null===Sr||void 0===Sr||null===(q=Sr.presentationAddressApi)||void 0===q||null===(K=q.response)||void 0===K||null===(Z=K.item)||void 0===Z||null===(Y=Z.municipality)||void 0===Y?void 0:Y.municipalityName})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kommunenummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(X=br.eiendomsInformasjon)&&void 0!==X&&null!==(Q=X.kommune_info)&&void 0!==Q&&Q.kommunenr?null===br||void 0===br||null===(J=br.eiendomsInformasjon)||void 0===J||null===(ee=J.kommune_info)||void 0===ee?void 0:ee.kommunenr:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"G\xe5rdsnummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(te=br.eiendomsInformasjon)&&void 0!==te&&null!==(re=te.kommune_info)&&void 0!==re&&re.gaardsnummer?null===br||void 0===br||null===(ne=br.eiendomsInformasjon)||void 0===ne||null===(ie=ne.kommune_info)||void 0===ie?void 0:ie.gaardsnummer:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Bruksnummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(ae=br.eiendomsInformasjon)&&void 0!==ae&&null!==(se=ae.kommune_info)&&void 0!==se&&se.bruksnummer?null===br||void 0===br||null===(oe=br.eiendomsInformasjon)||void 0===oe||null===(le=oe.kommune_info)||void 0===le?void 0:le.bruksnummer:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Seksjonsnummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(ce=br.eiendomsInformasjon)&&void 0!==ce&&null!==(ue=ce.kommune_info)&&void 0!==ue&&ue.seksjonsnr?null===br||void 0===br||null===(de=br.eiendomsInformasjon)||void 0===de||null===(he=de.kommune_info)||void 0===he?void 0:he.seksjonsnr:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Fylke"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(pe=Sr.cadastreApi)&&void 0!==pe&&null!==(fe=pe.response)&&void 0!==fe&&null!==(me=fe.item.municipality)&&void 0!==me&&me.regionName?null===Sr||void 0===Sr||null===(ge=Sr.cadastreApi)||void 0===ge||null===(ve=ge.response)||void 0===ve||null===(xe=ve.item.municipality)||void 0===xe?void 0:xe.regionName:"-"})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Eiendomsstatus"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kan selges"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(ye=Sr.cadastreApi)||void 0===ye||null===(be=ye.response)||void 0===be?void 0:be.item.canBeSold)||"Ja"===(null===Sr||void 0===Sr||null===(we=Sr.cadastreApi)||void 0===we||null===(_e=we.response)||void 0===_e?void 0:_e.item.canBeSold)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kan bel\xe5nes"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(ke=Sr.cadastreApi)||void 0===ke||null===(Se=ke.response)||void 0===Se?void 0:Se.item.canBeMortgaged)||"Ja"===(null===Sr||void 0===Sr||null===(je=Sr.cadastreApi)||void 0===je||null===(Ee=je.response)||void 0===Ee?void 0:Ee.item.canBeMortgaged)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har bygning"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(Ce=Sr.cadastreApi)||void 0===Ce||null===(Ne=Ce.response)||void 0===Ne?void 0:Ne.item.hasBuilding)||"Ja"===(null===Sr||void 0===Sr||null===(Te=Sr.cadastreApi)||void 0===Te||null===(Pe=Te.response)||void 0===Pe?void 0:Pe.item.hasBuilding)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har fritidsbolig"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(Ae=Sr.cadastreApi)||void 0===Ae||null===(Me=Ae.response)||void 0===Me?void 0:Me.item.hasHolidayHome)||"Ja"===(null===Sr||void 0===Sr||null===(Ie=Sr.cadastreApi)||void 0===Ie||null===(Oe=Ie.response)||void 0===Oe?void 0:Oe.item.hasHolidayHome)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har bolig"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Sr||void 0===Sr||null===(De=Sr.cadastreApi)||void 0===De||null===(Re=De.response)||void 0===Re?void 0:Re.item.hasHousing)||"Ja"===(null===Sr||void 0===Sr||null===(Le=Sr.cadastreApi)||void 0===Le||null===(Fe=Le.response)||void 0===Fe?void 0:Fe.item.hasHousing)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Parkeringsinformasjon"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Parkering reservert plass"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==pr&&void 0!==pr&&null!==($e=pr.bya_calculations)&&void 0!==$e&&null!==(Be=$e.results)&&void 0!==Be&&null!==(ze=Be.parking)&&void 0!==ze&&ze.required_spaces?(0,V.jsxs)(V.Fragment,{children:[null===pr||void 0===pr||null===(Ue=pr.bya_calculations)||void 0===Ue||null===(Ve=Ue.results)||void 0===Ve||null===(He=Ve.parking)||void 0===He?void 0:He.required_spaces," ","stk"]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Parkering omr\xe5de per plass"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==pr&&void 0!==pr&&null!==(Ge=pr.bya_calculations)&&void 0!==Ge&&null!==(We=Ge.results)&&void 0!==We&&null!==(qe=We.parking)&&void 0!==qe&&qe.area_per_space?(0,V.jsxs)(V.Fragment,{children:[null===pr||void 0===pr||null===(Ke=pr.bya_calculations)||void 0===Ke||null===(Ze=Ke.results)||void 0===Ze||null===(Ye=Ze.parking)||void 0===Ye?void 0:Ye.area_per_space," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Totalt parkeringsomr\xe5de"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==pr&&void 0!==pr&&null!==(Xe=pr.bya_calculations)&&void 0!==Xe&&null!==(Qe=Xe.results)&&void 0!==Qe&&null!==(Je=Qe.parking)&&void 0!==Je&&Je.total_parking_area?(0,V.jsxs)(V.Fragment,{children:[null===pr||void 0===pr||null===(et=pr.bya_calculations)||void 0===et||null===(tt=et.results)||void 0===tt||null===(rt=tt.parking)||void 0===rt?void 0:rt.total_parking_area," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Parkering er usikker"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===pr||void 0===pr||null===(nt=pr.bya_calculations)||void 0===nt||null===(it=nt.results)||void 0===it||null===(at=it.parking)||void 0===at?void 0:at.is_uncertain)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Ytterligere eiendomsforhold"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har forurensning"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(st=Sr.cadastreApi)||void 0===st||null===(ot=st.response)||void 0===ot?void 0:ot.item.hasSoilContamination)||!0===(null===Sr||void 0===Sr||null===(lt=Sr.cadastreApi)||void 0===lt||null===(ct=lt.response)||void 0===ct?void 0:ct.item.hasSoilContamination)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har aktive festegrunner"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(ut=Sr.cadastreApi)||void 0===ut||null===(dt=ut.response)||void 0===dt?void 0:dt.item.hasActiveLeasedLand)||!0===(null===Sr||void 0===Sr||null===(ht=Sr.cadastreApi)||void 0===ht||null===(pt=ht.response)||void 0===pt?void 0:pt.item.hasActiveLeasedLand)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Inng\xe5r i samlet eiendom"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(ft=Sr.cadastreApi)||void 0===ft||null===(mt=ft.response)||void 0===mt?void 0:mt.item.includedInTotalRealEstate)||!0===(null===Sr||void 0===Sr||null===(gt=Sr.cadastreApi)||void 0===gt||null===(vt=gt.response)||void 0===vt?void 0:vt.item.includedInTotalRealEstate)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kulturminner registrert"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(xt=br.eiendomsInformasjon)||void 0===xt||null===(yt=xt.status)||void 0===yt?void 0:yt.kulturminner_registrert)||!0===(null===br||void 0===br||null===(bt=br.eiendomsInformasjon)||void 0===bt||null===(wt=bt.status)||void 0===wt?void 0:wt.kulturminner_registrert)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Grunnforurensning"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(_t=br.eiendomsInformasjon)||void 0===_t||null===(kt=_t.status)||void 0===kt?void 0:kt.grunnforurensning)||!0===(null===br||void 0===br||null===(St=br.eiendomsInformasjon)||void 0===St||null===(jt=St.status)||void 0===jt?void 0:jt.grunnforurensning)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Spesielle registreringer"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Sammensl\xe5tte tomter"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(Et=Sr.cadastreApi)||void 0===Et||null===(Ct=Et.response)||void 0===Ct?void 0:Ct.item.numberOfPlots)||!0===(null===Sr||void 0===Sr||null===(Nt=Sr.cadastreApi)||void 0===Nt||null===(Tt=Nt.response)||void 0===Tt?void 0:Tt.item.numberOfPlots)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Tinglyst"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(Pt=br.eiendomsInformasjon)||void 0===Pt||null===(At=Pt.basisInformasjon)||void 0===At?void 0:At.tinglyst)||!0===(null===br||void 0===br||null===(Mt=br.eiendomsInformasjon)||void 0===Mt||null===(It=Mt.basisInformasjon)||void 0===It?void 0:It.tinglyst)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Ugyldig"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:(0,V.jsx)("img",{src:C4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Oppm\xe5ling ikke fullf\xf8rt"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(Ot=br.eiendomsInformasjon)||void 0===Ot||null===(Dt=Ot.status)||void 0===Dt?void 0:Dt.oppmaling_ikke_fullfort)||!0===(null===br||void 0===br||null===(Rt=br.eiendomsInformasjon)||void 0===Rt||null===(Lt=Rt.status)||void 0===Lt?void 0:Lt.oppmaling_ikke_fullfort)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Mangler grenseoppmerking"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(Ft=br.eiendomsInformasjon)||void 0===Ft||null===($t=Ft.status)||void 0===$t?void 0:$t.mangler_grensepunktmerking)||!0===(null===br||void 0===br||null===(Bt=br.eiendomsInformasjon)||void 0===Bt||null===(zt=Bt.status)||void 0===zt?void 0:zt.mangler_grensepunktmerking)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Under sammensl\xe5ing"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===br||void 0===br||null===(Ut=br.eiendomsInformasjon)||void 0===Ut||null===(Vt=Ut.status)||void 0===Vt?void 0:Vt.under_sammenslaing)||"Ja"===(null===br||void 0===br||null===(Ht=br.eiendomsInformasjon)||void 0===Ht||null===(Gt=Ht.status)||void 0===Gt?void 0:Gt.under_sammenslaing)===!0?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]})]}),(0,V.jsx)("div",{className:"rounded-[12px] overflow-hidden h-[300px] desktop:h-auto w-full desktop:w-[407px]",children:or?(0,V.jsx)("div",{className:"w-full h-full rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)(V.Fragment,{children:(null===br||void 0===br||null===(Wt=br.coordinates)||void 0===Wt?void 0:Wt.convertedCoordinates)&&(0,V.jsx)(rpe,{coordinates:null===br||void 0===br||null===(qt=br.coordinates)||void 0===qt?void 0:qt.convertedCoordinates})})})]})})]}),(0,V.jsxs)("div",{className:"w-full mt-8 md:mt-[44px]",children:[(0,V.jsx)("div",{className:"flex border-b border-[#DDDDDD]",children:wr.map((e=>(0,V.jsx)("button",{onClick:()=>kr(e.id),className:"px-3 md:px-4 py-2 text-black border-b-[3px] text-sm md:text-base desktop:text-lg transition-colors duration-300 "+(_r===e.id?"border-[#6941C6] font-semibold":"border-transparent"),children:e.label},e.id)))}),(0,V.jsxs)("div",{className:"pt-5 md:pt-8",children:["Regulering"===_r&&(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 md:gap-[44px] desktop:gap-[60px]",children:[or?(0,V.jsx)("div",{className:"w-1/2 h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"relative w-full md:w-1/2",children:[(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[(0,V.jsx)("h2",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold",children:"Reguleringsplan"}),(0,V.jsx)("img",{src:N4,alt:"images"})]}),(0,V.jsx)("div",{className:"flex flex-col gap-2 md:gap-3",children:(0,V.jsx)(V.Fragment,{children:pr&&(null===pr||void 0===pr||null===(Kt=pr.conclusion)||void 0===Kt?void 0:Kt.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-start gap-2 md:gap-3 text-gray text-sm md:text-base",children:[(0,V.jsx)("img",{src:T4,alt:"images"}),(0,V.jsx)("span",{children:e})]},t))))})})]}),(0,V.jsxs)("div",{className:"w-full flex flex-col gap-4 md:gap-8 items-center mt-7 md:mt-[55px]",children:[(0,V.jsxs)("div",{className:"rounded-[12px] overflow-hidden w-full relative border border-[#7D89B0] h-[450px] md:h-[590px]",children:[cr&&(0,V.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-10",children:(0,V.jsx)("div",{className:"spinner-border animate-spin border-t-4 border-b-4 border-blue-500 w-12 h-12 border-solid rounded-full"})}),(0,V.jsx)("img",{src:null===Or||void 0===Or?void 0:Or.src,alt:null===Or||void 0===Or?void 0:Or.alt,className:"h-full w-full",onLoad:()=>ur(!1),onError:()=>ur(!1)}),(0,V.jsx)("div",{className:"absolute top-0 left-[4px] flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("div",{className:"bg-white h-[44px] w-[44px] rounded-full flex items-center justify-center "+((null===Or||void 0===Or?void 0:Or.id)===(null===(Zt=Ir[0])||void 0===Zt?void 0:Zt.id)?"opacity-50":"opacity-100"),style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},onClick:()=>{var e;if((null===Or||void 0===Or?void 0:Or.id)!==(null===(e=Ir[0])||void 0===e?void 0:e.id)){const e=Ir.findIndex((e=>e.id===Or.id));ur(!0);const t=e-1;t>=0&&(Dr(Ir[t]),Nr())}},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:`${(null===Or||void 0===Or?void 0:Or.id)!==(null===(Yt=Ir[0])||void 0===Yt?void 0:Yt.id)&&"cursor-pointer"} rotate-180`})})}),(0,V.jsx)("div",{className:"absolute bottom-0 right-[4px] flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("div",{className:"bg-white h-[44px] w-[44px] rounded-full flex items-center justify-center "+((null===Or||void 0===Or?void 0:Or.id)===(null===(Xt=Ir[Ir.length-1])||void 0===Xt?void 0:Xt.id)?"opacity-50":"opacity-100"),style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},onClick:()=>{var e;if((null===Or||void 0===Or?void 0:Or.id)!==(null===(e=Ir[Ir.length-1])||void 0===e?void 0:e.id)){const e=Ir.findIndex((e=>e.id===Or.id));ur(!0);const t=e+1;t<Ir.length&&Dr(Ir[t]),Tr()}},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:`${(null===Or||void 0===Or?void 0:Or.id)!==(null===(Qt=Ir[Ir.length-1])||void 0===Qt?void 0:Qt.id)&&"cursor-pointer"}`})})})]}),(0,V.jsxs)("div",{className:"relative w-full flex justify-center",children:[(0,V.jsx)("div",{className:"gap-4 md:gap-8 flex overflow-x-auto overFlowScrollHidden",ref:Cr,children:Ir.map(((e,t)=>(0,V.jsx)("div",{className:"relative min-w-[90px] max-w-[90px]",children:(0,V.jsx)("img",{src:e.src,alt:e.alt,className:"h-[90px] w-full rounded-[12px] cursor-pointer "+((null===Or||void 0===Or?void 0:Or.id)===(null===e||void 0===e?void 0:e.id)?"border-2 border-primary":"border border-[#7D89B033]"),style:{zIndex:999},onClick:()=>(e=>{(null===Or||void 0===Or?void 0:Or.id)===e.id?ur(!1):ur(!0),Dr(e)})(e)})},t)))}),Ir.length>5&&(0,V.jsx)("div",{className:"absolute top-0 right-0 h-[90px] w-[90px]",style:{zIndex:9999,background:"linear-gradient(-90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 90.63%)"}}),Ir.length>5&&(0,V.jsx)("div",{className:"absolute top-0 left-0 h-[90px] w-[90px]",style:{zIndex:9999,background:"linear-gradient(90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 90.63%)"}}),Ir.length>5&&(0,V.jsx)("div",{className:"absolute top-0 left-0 flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:((null===Or||void 0===Or?void 0:Or.id)!==(null===(Jt=Ir[0])||void 0===Jt?void 0:Jt.id)?"cursor-pointer opacity-100":"opacity-50")+" rotate-180",onClick:()=>{var e;if((null===Or||void 0===Or?void 0:Or.id)!==(null===(e=Ir[0])||void 0===e?void 0:e.id)){const e=Ir.findIndex((e=>e.id===Or.id));ur(!0);const t=e-1;t>=0&&(Dr(Ir[t]),Nr())}}})}),Ir.length>5&&(0,V.jsx)("div",{className:"absolute top-0 right-0 flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:""+((null===Or||void 0===Or?void 0:Or.id)!==(null===(er=Ir[Ir.length-1])||void 0===er?void 0:er.id)?"cursor-pointer opacity-100":"opacity-50"),onClick:()=>{var e;if((null===Or||void 0===Or?void 0:Or.id)!==(null===(e=Ir[Ir.length-1])||void 0===e?void 0:e.id)){const e=Ir.findIndex((e=>e.id===Or.id));ur(!0);const t=e+1;t<Ir.length&&Dr(Ir[t]),Tr()}}})})]})]})]}),or?(0,V.jsx)("div",{className:"w-1/2 h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"relative w-full md:w-1/2",children:[(0,V.jsxs)("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[(0,V.jsxs)("h2",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold",children:["Kommuneplan for"," ",null===Sr||void 0===Sr||null===(tr=Sr.presentationAddressApi)||void 0===tr||null===(rr=tr.response)||void 0===rr||null===(nr=rr.item)||void 0===nr||null===(ir=nr.municipality)||void 0===ir?void 0:ir.municipalityName]}),(0,V.jsx)("img",{src:N4,alt:"images"})]}),(0,V.jsx)("div",{className:"flex flex-col gap-2 md:gap-3",children:pr&&(null===pr||void 0===pr||null===(ar=pr.applicable_rules)||void 0===ar?void 0:ar.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-start gap-2 md:gap-3 text-gray text-sm md:text-base",children:[(0,V.jsx)("img",{src:T4,alt:"images"}),(0,V.jsxs)("div",{children:[e.rule," ",(0,V.jsx)("span",{className:"text-primary font-bold",children:e.section})]})]},t))))})]})]})})}),"Eierinformasjon"===_r&&(0,V.jsx)(Jhe,{data:null===br||void 0===br?void 0:br.latestOwnership}),"Dokument"===_r&&(0,V.jsx)(V.Fragment,{children:or?(0,V.jsx)("div",{className:"w-full h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)(V.Fragment,{children:Er&&Ar&&(0,V.jsx)("div",{children:(0,V.jsx)("div",{dangerouslySetInnerHTML:{__html:Ar},style:{width:"100%",height:"820px"}})})})})]})]})]})]})},ope=e=>{var r;let{role:n}=e;const[i,a]=(0,t.useState)(1),[s,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(""),u=Kr(),[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!0),[v,x]=(0,t.useState)(null),[y,b]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&(null!==e&&void 0!==e&&e.role&&b(null===e||void 0===e?void 0:e.role),null!==e&&void 0!==e&&e.supplier&&x(null===e||void 0===e?void 0:e.supplier))})()}),[]);const w=async()=>{g(!0);try{let e=(await pg(lm(g_,"admin"))).docs.map((e=>({id:e.id,...e.data()}))).filter((e=>e.role===n));y&&"Agent"===y&&(e=e.filter((e=>e.supplier===v)));const t=e.sort(((e,t)=>t.updatedAt.toDate()-e.updatedAt.toDate()));o(t)}catch(e){console.error("Error fetching husmodell data:",e)}finally{g(!1)}},_=(0,t.useMemo)((()=>0===s.length?[]:s.filter((e=>{var t;return null===(t=(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.f_name)||(null===e||void 0===e?void 0:e.l_name))||void 0===t?void 0:t.toLowerCase().includes(l.toLowerCase())}))),[s,l]);(0,t.useEffect)((()=>{w()}),[n,y]);const k=(0,t.useMemo)((()=>[{accessorKey:"photo",header:"Avatar",cell:e=>{let{row:t}=e;return(0,V.jsx)(V.Fragment,{children:t.original.photo?(0,V.jsx)("div",{className:"w-10",children:(0,V.jsx)("img",{src:t.original.photo,alt:"logo",className:"w-full"})}):(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center border border-primary bg-lightPurple",children:t.original.f_name?`${t.original.f_name[0]}`:t.original.name[0]})})})}},{accessorKey:"Navn",header:"Navn",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"font-semibold text-sm text-darkBlack w-max",children:t.original.f_name?`${t.original.f_name} ${t.original.l_name}`:t.original.name})}},{accessorKey:"email",header:"E-post",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack",children:t.original.email})}},{accessorKey:"role",header:"Rolle",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack",children:t.original.role})}},{id:"action",header:"Action",cell:e=>{let{row:t}=e;return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,V.jsx)(GT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>{"Admin"===n?u(`/edit-user/${t.original.id}`):"Bankansvarlig"===n?u(`/edit-bank-user/${t.original.id}`):"Agent"===n&&u(`/edit-agent-user/${t.original.id}`)}}),(0,V.jsx)(WT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>{return e=t.original.id,f(e),void h(!0);var e}})]})})}}]),[u,n]),S=(0,t.useMemo)((()=>{const e=10*(i-1);return _.slice(e,e+10)}),[_,i]),j=aA({data:S,columns:k,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:i-1,pageSize:10}},pageCount:Math.ceil(_.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:i-1,pageSize:10});a(t.pageIndex+1)}}});return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between bg-lightPurple rounded-[12px] py-3 px-3 md:px-4",children:(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px]",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k",className:"focus-within:outline-none",value:l,onChange:e=>c(e.target.value)})]})}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:j.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:m?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:k.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===_.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:k.length,className:"h-24 text-center",children:"No results."})}):(null===(r=j.getRowModel().rows)||void 0===r?void 0:r.length)&&j.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>j.previousPage(),disabled:!j.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:i})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:j.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>j.nextPage(),disabled:!j.getCanNextPage(),children:"Neste"})]})]}),d&&(0,V.jsx)(sA,{onClose:()=>{h(!d)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>h(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:()=>(async e=>{try{const t=Zm(lm(g_,"admin"),Xm("id","==",e)),r=await pg(t);if(r.empty)console.error("Document with adminId not found:",e);else{const e=r.docs[0].ref;await gg(e),w(),h(!1),He.success("Deleted successfully",{position:"top-right"})}}catch(t){console.error("Error deleting document:",t)}})(p),children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})})]})},lpe=()=>{const[e,r]=(0,t.useState)(null),[n,i]=(0,t.useState)("Admin");(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&null!==e&&void 0!==e&&e.role&&(r(null===e||void 0===e?void 0:e.role),"Agent"===(null===e||void 0===e?void 0:e.role)&&i("Boligkonsulenter"))})()}),[]);return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Brukere"}),(0,V.jsx)("p",{className:"text-gray text-sm md:text-base",children:"Liste over alle bruker"})]})}),(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[(0,V.jsx)("div",{className:"flex gap-1.5",children:[e&&"Agent"!==e&&"Admin","Boligkonsulenter",e&&"Agent"!==e&&"Bankansvarlig"].filter(Boolean).map((e=>(0,V.jsx)("button",{onClick:()=>i(e),className:"px-2 md:px-4 py-2 text-sm font-medium "+(n===e?"border-b-2 border-purple text-purple":"text-gray-500"),children:e.charAt(0).toUpperCase()+e.slice(1)},e)))}),(0,V.jsx)("div",{className:"flex gap-3",children:(0,V.jsx)(HT,{text:"Legg til",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",icon:(0,V.jsx)(cA,{className:"text-white w-5 h-5"}),path:"Admin"===n?"/legg-user":"Bankansvarlig"===n?"/add-bank-user":"/add-agent-user"})})]}),(()=>{switch(n){case"Admin":return(0,V.jsx)(ope,{role:"Admin"});case"Boligkonsulenter":return(0,V.jsx)(ope,{role:"Agent"});case"Bankansvarlig":return(0,V.jsx)(ope,{role:"Bankansvarlig"});default:return null}})()]})})};var cpe=r(9825),upe=null;function dpe(e,t){if("number"!==typeof(e=e||kpe))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var r=[];return r.push("$2b$"),e<10&&r.push("0"),r.push(e.toString()),r.push("$"),r.push(bpe(function(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return cpe.randomBytes(e)}catch{}if(!upe)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return upe(e)}(_pe),_pe)),r.join("")}function hpe(e,t,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof e&&(r=e,e=void 0),"undefined"===typeof e)e=kpe;else if("number"!==typeof e)throw Error("illegal arguments: "+typeof e);function n(t){gpe((function(){try{t(null,dpe(e))}catch(D_e){t(D_e)}}))}if(!r)return new Promise((function(e,t){n((function(r,n){r?t(r):e(n)}))}));if("function"!==typeof r)throw Error("Illegal callback: "+typeof r);n(r)}function ppe(e,t){if("undefined"===typeof t&&(t=kpe),"number"===typeof t&&(t=dpe(t)),"string"!==typeof e||"string"!==typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return Ipe(e,t)}function fpe(e,t,r,n){function i(r){"string"===typeof e&&"number"===typeof t?hpe(t,(function(t,i){Ipe(e,i,r,n)})):"string"===typeof e&&"string"===typeof t?Ipe(e,t,r,n):gpe(r.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!r)return new Promise((function(e,t){i((function(r,n){r?t(r):e(n)}))}));if("function"!==typeof r)throw Error("Illegal callback: "+typeof r);i(r)}function mpe(e,t){for(var r=e.length^t.length,n=0;n<e.length;++n)r|=e.charCodeAt(n)^t.charCodeAt(n);return 0===r}var gpe="undefined"!==typeof process&&process&&"function"===typeof process.nextTick?"function"===typeof setImmediate?setImmediate:process.nextTick:setTimeout;function vpe(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296===(64512&r)&&56320===(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t}var xpe="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),ype=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function bpe(e,t){var r,n,i=0,a=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;i<t;){if(r=255&e[i++],a.push(xpe[r>>2&63]),r=(3&r)<<4,i>=t){a.push(xpe[63&r]);break}if(r|=(n=255&e[i++])>>4&15,a.push(xpe[63&r]),r=(15&n)<<2,i>=t){a.push(xpe[63&r]);break}r|=(n=255&e[i++])>>6&3,a.push(xpe[63&r]),a.push(xpe[63&n])}return a.join("")}function wpe(e,t){var r,n,i,a,s,o=0,l=e.length,c=0,u=[];if(t<=0)throw Error("Illegal len: "+t);for(;o<l-1&&c<t&&(r=(s=e.charCodeAt(o++))<ype.length?ype[s]:-1,n=(s=e.charCodeAt(o++))<ype.length?ype[s]:-1,-1!=r&&-1!=n)&&(a=r<<2>>>0,a|=(48&n)>>4,u.push(String.fromCharCode(a)),!(++c>=t||o>=l))&&-1!=(i=(s=e.charCodeAt(o++))<ype.length?ype[s]:-1)&&(a=(15&n)<<4>>>0,a|=(60&i)>>2,u.push(String.fromCharCode(a)),!(++c>=t||o>=l));)a=(3&i)<<6>>>0,a|=(s=e.charCodeAt(o++))<ype.length?ype[s]:-1,u.push(String.fromCharCode(a)),++c;var d=[];for(o=0;o<c;o++)d.push(u[o].charCodeAt(0));return d}var _pe=16,kpe=10,Spe=16,jpe=100,Epe=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Cpe=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],Npe=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Tpe(e,t,r,n){var i,a=e[t],s=e[t+1];return i=n[(a^=r[0])>>>24],i+=n[256|a>>16&255],i^=n[512|a>>8&255],i=n[(s^=(i+=n[768|255&a])^r[1])>>>24],i+=n[256|s>>16&255],i^=n[512|s>>8&255],i=n[(a^=(i+=n[768|255&s])^r[2])>>>24],i+=n[256|a>>16&255],i^=n[512|a>>8&255],i=n[(s^=(i+=n[768|255&a])^r[3])>>>24],i+=n[256|s>>16&255],i^=n[512|s>>8&255],i=n[(a^=(i+=n[768|255&s])^r[4])>>>24],i+=n[256|a>>16&255],i^=n[512|a>>8&255],i=n[(s^=(i+=n[768|255&a])^r[5])>>>24],i+=n[256|s>>16&255],i^=n[512|s>>8&255],i=n[(a^=(i+=n[768|255&s])^r[6])>>>24],i+=n[256|a>>16&255],i^=n[512|a>>8&255],i=n[(s^=(i+=n[768|255&a])^r[7])>>>24],i+=n[256|s>>16&255],i^=n[512|s>>8&255],i=n[(a^=(i+=n[768|255&s])^r[8])>>>24],i+=n[256|a>>16&255],i^=n[512|a>>8&255],i=n[(s^=(i+=n[768|255&a])^r[9])>>>24],i+=n[256|s>>16&255],i^=n[512|s>>8&255],i=n[(a^=(i+=n[768|255&s])^r[10])>>>24],i+=n[256|a>>16&255],i^=n[512|a>>8&255],i=n[(s^=(i+=n[768|255&a])^r[11])>>>24],i+=n[256|s>>16&255],i^=n[512|s>>8&255],i=n[(a^=(i+=n[768|255&s])^r[12])>>>24],i+=n[256|a>>16&255],i^=n[512|a>>8&255],i=n[(s^=(i+=n[768|255&a])^r[13])>>>24],i+=n[256|s>>16&255],i^=n[512|s>>8&255],i=n[(a^=(i+=n[768|255&s])^r[14])>>>24],i+=n[256|a>>16&255],i^=n[512|a>>8&255],i=n[(s^=(i+=n[768|255&a])^r[15])>>>24],i+=n[256|s>>16&255],i^=n[512|s>>8&255],a^=(i+=n[768|255&s])^r[16],e[t]=s^r[Spe+1],e[t+1]=a,e}function Ppe(e,t){for(var r=0,n=0;r<4;++r)n=n<<8|255&e[t],t=(t+1)%e.length;return{key:n,offp:t}}function Ape(e,t,r){for(var n,i=0,a=[0,0],s=t.length,o=r.length,l=0;l<s;l++)i=(n=Ppe(e,i)).offp,t[l]=t[l]^n.key;for(l=0;l<s;l+=2)a=Tpe(a,0,t,r),t[l]=a[0],t[l+1]=a[1];for(l=0;l<o;l+=2)a=Tpe(a,0,t,r),r[l]=a[0],r[l+1]=a[1]}function Mpe(e,t,r,n,i){var a,s=Npe.slice(),o=s.length;if(r<4||r>31){if(a=Error("Illegal number of rounds (4-31): "+r),n)return void gpe(n.bind(this,a));throw a}if(t.length!==_pe){if(a=Error("Illegal salt length: "+t.length+" != "+_pe),n)return void gpe(n.bind(this,a));throw a}r=1<<r>>>0;var l,c,u,d=0;function h(){if(i&&i(d/r),!(d<r)){for(d=0;d<64;d++)for(u=0;u<o>>1;u++)Tpe(s,u<<1,l,c);var a=[];for(d=0;d<o;d++)a.push((s[d]>>24&255)>>>0),a.push((s[d]>>16&255)>>>0),a.push((s[d]>>8&255)>>>0),a.push((255&s[d])>>>0);return n?void n(null,a):a}for(var p=Date.now();d<r&&(d+=1,Ape(e,l,c),Ape(t,l,c),!(Date.now()-p>jpe)););n&&gpe(h)}if("function"===typeof Int32Array?(l=new Int32Array(Epe),c=new Int32Array(Cpe)):(l=Epe.slice(),c=Cpe.slice()),function(e,t,r,n){for(var i,a=0,s=[0,0],o=r.length,l=n.length,c=0;c<o;c++)a=(i=Ppe(t,a)).offp,r[c]=r[c]^i.key;for(a=0,c=0;c<o;c+=2)a=(i=Ppe(e,a)).offp,s[0]^=i.key,a=(i=Ppe(e,a)).offp,s[1]^=i.key,s=Tpe(s,0,r,n),r[c]=s[0],r[c+1]=s[1];for(c=0;c<l;c+=2)a=(i=Ppe(e,a)).offp,s[0]^=i.key,a=(i=Ppe(e,a)).offp,s[1]^=i.key,s=Tpe(s,0,r,n),n[c]=s[0],n[c+1]=s[1]}(t,e,l,c),"undefined"!==typeof n)h();else for(var p;;)if("undefined"!==typeof(p=h()))return p||[]}function Ipe(e,t,r,n){var i,a,s;if("string"!==typeof e||"string"!==typeof t){if(i=Error("Invalid string / salt: Not a string"),r)return void gpe(r.bind(this,i));throw i}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(i=Error("Invalid salt version: "+t.substring(0,2)),r)return void gpe(r.bind(this,i));throw i}if("$"===t.charAt(2))a=String.fromCharCode(0),s=3;else{if("a"!==(a=t.charAt(2))&&"b"!==a&&"y"!==a||"$"!==t.charAt(3)){if(i=Error("Invalid salt revision: "+t.substring(2,4)),r)return void gpe(r.bind(this,i));throw i}s=4}if(t.charAt(s+2)>"$"){if(i=Error("Missing salt rounds"),r)return void gpe(r.bind(this,i));throw i}var o=10*parseInt(t.substring(s,s+1),10)+parseInt(t.substring(s+1,s+2),10),l=t.substring(s+3,s+25),c=function(e){for(var t,r,n=0,i=new Array(vpe(e)),a=0,s=e.length;a<s;++a)(t=e.charCodeAt(a))<128?i[n++]=t:t<2048?(i[n++]=t>>6|192,i[n++]=63&t|128):55296===(64512&t)&&56320===(64512&(r=e.charCodeAt(a+1)))?(t=65536+((1023&t)<<10)+(1023&r),++a,i[n++]=t>>18|240,i[n++]=t>>12&63|128,i[n++]=t>>6&63|128,i[n++]=63&t|128):(i[n++]=t>>12|224,i[n++]=t>>6&63|128,i[n++]=63&t|128);return i}(e+=a>="a"?"\0":""),u=wpe(l,_pe);function d(e){var t=[];return t.push("$2"),a>="a"&&t.push(a),t.push("$"),o<10&&t.push("0"),t.push(o.toString()),t.push("$"),t.push(bpe(u,u.length)),t.push(bpe(e,4*Npe.length-1)),t.join("")}if("undefined"==typeof r)return d(Mpe(c,u,o));Mpe(c,u,o,(function(e,t){e?r(e,null):r(null,d(t))}),n)}const Ope={setRandomFallback:function(e){upe=e},genSaltSync:dpe,genSalt:hpe,hashSync:ppe,hash:fpe,compareSync:function(e,t){if("string"!==typeof e||"string"!==typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return 60===t.length&&mpe(ppe(e,t.substring(0,t.length-31)),t)},compare:function(e,t,r,n){function i(r){"string"===typeof e&&"string"===typeof t?60===t.length?fpe(e,t.substring(0,29),(function(e,n){e?r(e):r(null,mpe(n,t))}),n):gpe(r.bind(this,null,!1)):gpe(r.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!r)return new Promise((function(e,t){i((function(r,n){r?t(r):e(n)}))}));if("function"!==typeof r)throw Error("Illegal callback: "+typeof r);i(r)},getRounds:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},getSalt:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)},truncates:function(e){if("string"!==typeof e)throw Error("Illegal arguments: "+typeof e);return vpe(e)>72},encodeBase64:function(e,t){return bpe(e,t)},decodeBase64:function(e,t){return wpe(e,t)}},Dpe=kQ.object({photo:kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()]),f_name:kQ.string().min(1,{message:"Fornavn m\xe5 best\xe5 av minst 2 tegn."}),l_name:kQ.string().min(1,{message:"Etternavn m\xe5 best\xe5 av minst 2 tegn."}),email:kQ.string().email({message:"Vennligst skriv inn en gyldig e-postadresse."}).min(1,{message:"E-posten m\xe5 v\xe6re p\xe5 minst 2 tegn."}),modulePermissions:kQ.array(kQ.object({id:kQ.number(),name:kQ.string(),permissions:kQ.object({all:kQ.boolean(),add:kQ.boolean(),edit:kQ.boolean(),delete:kQ.boolean(),duplicate:kQ.boolean().optional()})})).min(1,"At least one permission is required"),password:kQ.string().min(8,{message:"Passordet m\xe5 v\xe6re minst 8 tegn langt."}).regex(/[A-Z]/,{message:"Passordet m\xe5 inneholde minst \xe9n stor bokstav."}).regex(/[a-z]/,{message:"Passordet m\xe5 inneholde minst \xe9n liten bokstav."}).regex(/[0-9]/,{message:"Passordet m\xe5 inneholde minst ett tall."}).regex(/[@$!%*?&]/,{message:"Passordet m\xe5 inneholde minst ett spesialtegn."})});const Rpe=()=>{var e,r;const n=AG({resolver:FG(Dpe),defaultValues:{f_name:"",l_name:"",email:"",modulePermissions:[],password:""}}),i=t.useRef(null),a=Gr().pathname.split("/"),s=a.length>2?a[2]:null,o=Kr(),[l,c]=(0,t.useState)(!1),u=async(e,t)=>{if(!e)return;if(e.size>2097152)return void He.error("Image size must be less than 2MB.",{position:"top-right"});const r=`${Date.now()}_${e.name}`,i=h_(v_,`images/${r}`);try{const r=await c_(i,e),a=await d_(r.ref);n.setValue(t,a),n.clearErrors(t)}catch(a){console.error(`Error uploading file for ${t}:`,a)}},d=async e=>{const t=e.target.files;t&&t[0]&&await u(t[0],"photo")},h=()=>{var e;null===(e=i.current)||void 0===e||e.click()},p=async e=>{e.preventDefault();const t=e.dataTransfer.files;t&&t[0]&&await u(t[0],"photo")},f=e=>{e.preventDefault()},m=n.watch("photo"),[g,v]=(0,t.useState)([{id:1,name:"Husmodell",permissions:{all:!0,add:!0,edit:!0,delete:!0,duplicate:!0}}]),x=[{key:"all",label:"All"},{key:"add",label:"Add"},{key:"edit",label:"Edit"},{key:"delete",label:"Delete"},{key:"duplicate",label:"Duplicate"}];(0,t.useEffect)((()=>{n.setValue("modulePermissions",g)}),[n,g]),(0,t.useEffect)((()=>{if(!s)return;(async()=>{const e=await __(s);e&&Object.entries(e).forEach((e=>{let[t,r]=e;"password"===t&&n.setValue(t,r),void 0!==r&&null!==r&&n.setValue(t,r),"modulePermissions"===t&&v(r)}))})()}),[n,s]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(tW,{...n,children:(0,V.jsxs)("form",{onSubmit:n.handleSubmit((async e=>{try{const r=cm(g_,"admin",e.email),n=await dg(r),i=s||yW(),a=(t=e.password,Ope.getRounds(t)?t:Ope.hashSync(t,10));s?(await mg(r,{...e,id:i,password:a,updatedAt:new Date,role:"Admin"}),He.success("Lagret",{position:"top-right"}),a===e.password?(c(!1),o("/Brukeradministrasjon")):c(!0)):n.exists()?He.error("Already Added!",{position:"top-right"}):(await fg(r,{...e,id:i,password:a,createdAt:new Date,role:"Admin",updatedAt:new Date}),await fetch("https://nh989m12uk.execute-api.eu-north-1.amazonaws.com/prod/banklead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"send-login",email:e.email,firstName:e.f_name,lastName:e.l_name,password:e.password,link:"https://admin.mintomt.no/",company:"Mintomt"})}),He.success("Admin created successfully!",{position:"top-right"}),c(!0))}catch(r){console.error("Firestore operation failed:",r),He.error("Something went wrong. Please try again.",{position:"top-right"})}var t})),className:"relative",children:[(0,V.jsx)("div",{className:"p-4 laptop:p-6",children:(0,V.jsxs)("div",{className:"flex flex-col md:grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"col-span-2 flex flex-col md:flex-row gap-4 md:gap-6 items-center",children:[(0,V.jsx)("div",{className:"w-full md:w-1/2",children:(0,V.jsx)(nW,{control:n.control,name:"photo",render:()=>(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-1.5 md:gap-3 cursor-pointer",onDragOver:f,onClick:h,onDrop:p,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:"SVG, PNG, JPG or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:i,className:"hidden",accept:".svg, .png, .jpg, .jpeg, .gif",onChange:d,name:"photo"})]})})}),(0,V.jsx)(cW,{})]})})}),(0,V.jsx)("div",{className:"w-1/2",children:"string"===typeof m&&(0,V.jsx)("img",{src:m,alt:"logo",height:"140px",width:"140px"})})]}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"f_name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Fornavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Fornavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"l_name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Etternavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Etternavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"email",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"E-post"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn E-post",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"col-span-2",children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm md:text-base desktop:text-lg font-medium",children:"Informasjon om tilgangsniv\xe5"}),(0,V.jsx)("div",{className:"border border-gray1 border-r-0 border-b-0 rounded shadow-sm overflow-x-auto",children:(0,V.jsxs)("table",{className:"min-w-full bg-white border-r border-gray1",children:[(0,V.jsx)("thead",{children:(0,V.jsxs)("tr",{className:"bg-gray-50 border-b border-gray1",children:[(0,V.jsx)("th",{className:"py-3 px-3 md:px-4 text-sm md:text-base text-left font-medium text-gray-500 tracking-wider border-r border-gray1 text-black",children:"#/Modules"}),x.map((e=>(0,V.jsx)("th",{className:"py-3 px-3 md:px-4 text-sm md:text-base text-center font-medium text-gray-500 tracking-wider border-r border-gray1 text-black",children:e.label},e.key)))]})}),(0,V.jsx)("tbody",{children:g.map(((e,t)=>(0,V.jsxs)("tr",{className:2===t?"border-t-2 border-b-2 border-primary":"border-b border-gray1",children:[(0,V.jsx)("td",{className:"py-3 px-3 md:px-4 border-r border-gray1 text-black text-sm md:text-base",children:e.name}),x.map((t=>(0,V.jsx)("td",{className:"text-center py-2 px-3 md:px-4 border-r border-gray1",children:(0,V.jsxs)("label",{className:"inline-flex items-center justify-center cursor-pointer",children:[(0,V.jsx)("input",{type:"checkbox",className:"hidden",checked:e.permissions[t.key],onChange:()=>{return r=e.id,n=t.key,void v((e=>e.map(((e,t)=>{if(e.id===r){if("all"===n){const t=!e.permissions.all,r={};return Object.keys(e.permissions).forEach((e=>{r[e]=t})),{...e,permissions:r}}{const t={...e.permissions,[n]:!e.permissions[n]},r=Object.entries(t).filter((e=>{let[t]=e;return"all"!==t})).every((e=>{let[t,r]=e;return!0===r}));return t.all=!!r,{...e,permissions:t}}}return e}))));var r,n}}),(0,V.jsx)("div",{className:"w-6 h-6 border rounded flex items-center justify-center "+(e.permissions[t.key]?"bg-primary border-[#fff]":"bg-white border-gray1"),children:e.permissions[t.key]&&(0,V.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4 text-white",children:(0,V.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]})},`${e.id}-${t.key}`)))]},e.id)))})]})}),"string"===typeof(null===(e=n.formState.errors.modulePermissions)||void 0===e?void 0:e.message)&&(0,V.jsx)("div",{className:"text-red text-xs mt-2",children:null===(r=n.formState.errors.modulePermissions)||void 0===r?void 0:r.message})]}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"password",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Passord"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Passord",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"password"})})}),(0,V.jsx)(cW,{})]})}})})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4",children:[(0,V.jsx)("div",{onClick:()=>n.reset(),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})}),l&&(0,V.jsx)(sA,{onClose:()=>{c(!l)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,V.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,V.jsx)("p",{className:"text-lg font-bold",children:"E-post:"}),(0,V.jsx)("span",{className:"text-base",children:n.getValues("email")})]}),(0,V.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,V.jsx)("p",{className:"text-lg font-bold",children:"Password:"}),(0,V.jsx)("span",{className:"text-base",children:n.getValues("password")})]}),(0,V.jsx)("br",{}),(0,V.jsxs)("p",{children:[(0,V.jsx)("span",{className:"font-semibold",children:"Note:"})," Dette er din e-post og passord. vennligst send dette passordet til denne brukeren."]}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>c(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:()=>o("/Brukeradministrasjon"),children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})})]})},Lpe=()=>(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3",children:[(0,V.jsx)(ti,{to:"/Brukeradministrasjon",className:"text-gray text-xs md:text-sm font-medium",children:"Brukere"}),(0,V.jsx)(KV,{className:"text-gray2 w-4 h-4"}),(0,V.jsx)("span",{className:"text-primary text-xs md:text-sm font-medium",children:"Legg til nye brukere"})]}),(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Legg til bruker"}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start gap-4 lg:gap-8",children:[(0,V.jsx)("div",{className:"w-max",children:(0,V.jsx)("h5",{className:"text-black text-sm font-medium whitespace-nowrap mr-16",children:"Brukerdetaljer"})}),(0,V.jsx)("div",{className:"w-full shadow-shadow2 rounded-lg overflow-hidden relative",children:(0,V.jsx)(Rpe,{})})]})]})}),Fpe=F_("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),$pe=()=>{const[e,r]=(0,t.useState)(1),[n,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)(""),c=localStorage.getItem("Iplot_admin"),[u,d]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){const t=null===e||void 0===e?void 0:e.supplier;d(t)}})()}),[u]);const h=(0,t.useMemo)((()=>n.filter((e=>{var t,r;return null===(t=e.user)||void 0===t||null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase())}))),[n,o]);(0,t.useEffect)((()=>{(async()=>{s(!0);try{let e;e="andre.finger@gmail.com"===c?Zm(lm(g_,"leads"),Xm("Isopt","==",!0)):Zm(lm(g_,"leads"),Xm("Isopt","==",!0),Xm("finalData.husmodell.Husdetaljer.Leverand\xf8rer","==",String(u)));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=t.sort(((e,t)=>t.updatedAt.toDate()-e.updatedAt.toDate())),n=["drashti.doubledotts@gmail.com","abc@gmail.com","keren@arnhoff.no","simen@askerhaandverk.no","ole@nestegg.no","fenger@iplot.no","drashtisavani22@gmail.com","rudraksh.shukla98@gmail.com","tanmaymundra01@gmail.com"],a=r.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email)&&!n.includes(e.user.email)}));i(a)}catch(e){console.error("Error fetching leads data:",e)}finally{s(!1)}})()}),[u]);const p=(0,t.useMemo)((()=>{const t=10*(e-1);return h.slice(t,t+10)}),[e,h]),f=(0,t.useMemo)((()=>[{accessorKey:"kunde",header:"Kunde",cell:e=>{let{row:t}=e;return(0,V.jsxs)("div",{className:"flex items-start gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray1 bg-gray3 flex items-center justify-center",children:t.original.user.name[0]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"font-medium text-black text-sm mb-[2px]",children:t.original.user.name}),(0,V.jsx)("p",{className:"text-xs text-gray",children:t.original.user.email})]})]})}},{accessorKey:"husmodell",header:"Husmodell",cell:e=>{let{row:t}=e;return(0,V.jsxs)("div",{className:"flex items-center gap-3 w-max",children:[(0,V.jsx)("img",{src:t.original.finalData.husmodell.Husdetaljer.photo,alt:"Husmodell",className:"w-8 h-8 rounded-full"}),(0,V.jsx)("p",{className:"font-medium text-sm text-darkBlack",children:t.original.finalData.husmodell.Husdetaljer.husmodell_name})]})}},{accessorKey:"leverandor",header:"Leverand\xf8r",cell:e=>{let{row:r}=e;const[n,i]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{const e=await(async e=>{const t=await w_(e);if(t)return t})(r.original.finalData.husmodell.Husdetaljer.Leverand\u00f8rer);i(e)})()}),[r.original.finalData.husmodell.Husdetaljer.Leverand\u00f8rer]),(0,V.jsx)("div",{className:"w-[140px]",children:(0,V.jsx)("img",{src:null===n||void 0===n?void 0:n.photo,alt:"leverandor",className:"w-full"})})}},{accessorKey:"adresse",header:"Adresse",cell:e=>{var t,r,n,i,a,s,o,l,c,u,d,h,p,f,m;let{row:g}=e;return(0,V.jsx)(V.Fragment,{children:null!==(t=g.original.finalData)&&void 0!==t&&t.plot?(0,V.jsxs)("div",{className:"flex items-start gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:(null===(r=g.original.finalData)||void 0===r||null===(n=r.plot)||void 0===n||null===(i=n.lamdaDataFromApi)||void 0===i||null===(a=i.coordinates)||void 0===a?void 0:a.convertedCoordinates)&&(0,V.jsx)(rpe,{coordinates:null===(s=g.original.finalData)||void 0===s||null===(o=s.plot)||void 0===o||null===(l=o.lamdaDataFromApi)||void 0===l||null===(c=l.coordinates)||void 0===c?void 0:c.convertedCoordinates})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"font-medium text-black text-sm mb-[2px]",children:null===(u=g.original.finalData)||void 0===u||null===(d=u.plot)||void 0===d||null===(h=d.CadastreDataFromApi)||void 0===h?void 0:h.presentationAddressApi.response.item.formatted.line1}),(0,V.jsx)("p",{className:"text-xs text-gray",children:null===(p=g.original.finalData)||void 0===p||null===(f=p.plot)||void 0===f||null===(m=f.CadastreDataFromApi)||void 0===m?void 0:m.presentationAddressApi.response.item.formatted.line2})]})]}):(0,V.jsx)("div",{className:"px-9",children:"-"})})}},{accessorKey:"leadSent",header:"Lead sendt",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black w-max",children:C_(null===(t=n.original.updatedAt)||void 0===t?void 0:t.seconds,null===(r=n.original.updatedAt)||void 0===r?void 0:r.nanoseconds)})}},{id:"handling",header:"Handling",cell:()=>(0,V.jsx)("button",{className:"h-8 w-8 flex items-center justify-center",children:(0,V.jsx)(Fpe,{className:"h-4 w-4 text-gray-500"})})}]),[]),m=aA({data:p,columns:f,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:e-1,pageSize:10}},pageCount:Math.ceil(h.length/10),manualPagination:!0,onPaginationChange:t=>{if("function"===typeof t){const n=t({pageIndex:e-1,pageSize:10});r(n.pageIndex+1)}}});return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"mb-2 flex flex-col sm:flex-row sm:items-center justify-between bg-lightPurple rounded-[12px] py-3 px-2 gap-2 md:px-4",children:(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px]",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k i leads",className:"focus-within:outline-none",value:o,onChange:e=>l(e.target.value)})]})}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:m.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:a?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:f.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===h.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:f.length,className:"h-24 text-center",children:"No results."})}):m.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>m.previousPage(),disabled:!m.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:e})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:m.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>m.nextPage(),disabled:!m.getCanNextPage(),children:"Neste"})]})]})]})},Bpe=()=>(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Antall husleads"}),(0,V.jsx)("p",{className:"text-gray text-sm md:text-base",children:"Liste over alle Antall husleads"})]})}),(0,V.jsx)($pe,{})]})}),zpe=()=>{const[e,r]=(0,t.useState)(1),[n,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)(""),c=localStorage.getItem("Iplot_admin"),[u,d]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){const t=null===e||void 0===e?void 0:e.supplier;d(t)}})()}),[u]);const h=(0,t.useMemo)((()=>n.filter((e=>{var t,r;return null===(t=e.user)||void 0===t||null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase())}))),[n,o]);(0,t.useEffect)((()=>{(async()=>{s(!0);try{let e;e="andre.finger@gmail.com"===c?Zm(lm(g_,"leads"),Xm("Isopt","==",!1)):Zm(lm(g_,"leads"),Xm("Isopt","==",!1),Xm("finalData.husmodell.Husdetaljer.Leverand\xf8rer","==",String(u)));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=t.sort(((e,t)=>t.updatedAt.toDate()-e.updatedAt.toDate())),n=["drashti.doubledotts@gmail.com","abc@gmail.com","keren@arnhoff.no","simen@askerhaandverk.no","ole@nestegg.no","fenger@iplot.no","drashtisavani22@gmail.com","rudraksh.shukla98@gmail.com","tanmaymundra01@gmail.com"],a=r.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email)&&!n.includes(e.user.email)}));i(a)}catch(e){console.error("Error fetching leads data:",e)}finally{s(!1)}})()}),[u]);const p=(0,t.useMemo)((()=>{const t=10*(e-1);return h.slice(t,t+10)}),[e,h]),f=(0,t.useMemo)((()=>[{accessorKey:"kunde",header:"Kunde",cell:e=>{let{row:t}=e;return(0,V.jsxs)("div",{className:"flex items-start gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray1 bg-gray3 flex items-center justify-center",children:t.original.user.name[0]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"font-medium text-black text-sm mb-[2px]",children:t.original.user.name}),(0,V.jsx)("p",{className:"text-xs text-gray",children:t.original.user.email})]})]})}},{accessorKey:"husmodell",header:"Husmodell",cell:e=>{var t,r,n,i,a,s,o,l;let{row:c}=e;return(0,V.jsx)(V.Fragment,{children:null!==(t=c.original.finalData)&&void 0!==t&&null!==(r=t.husmodell)&&void 0!==r&&r.Husdetaljer?(0,V.jsxs)("div",{className:"flex items-center gap-3 w-max",children:[(0,V.jsx)("img",{src:null===(n=c.original.finalData)||void 0===n||null===(i=n.husmodell)||void 0===i||null===(a=i.Husdetaljer)||void 0===a?void 0:a.photo,alt:"Husmodell",className:"w-8 h-8 rounded-full"}),(0,V.jsx)("p",{className:"font-medium text-sm text-darkBlack",children:null===(s=c.original.finalData)||void 0===s||null===(o=s.husmodell)||void 0===o||null===(l=o.Husdetaljer)||void 0===l?void 0:l.husmodell_name})]}):"-"})}},{accessorKey:"leverandor",header:"Leverand\xf8r",cell:e=>{var r,n,i;let{row:a}=e;const[s,o]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{var e,t,r;const n=await(async e=>{const t=await w_(e);if(t)return t})(null===(e=a.original.finalData)||void 0===e||null===(t=e.husmodell)||void 0===t||null===(r=t.Husdetaljer)||void 0===r?void 0:r.Leverand\u00f8rer);o(n)})()}),[null===(r=a.original.finalData)||void 0===r||null===(n=r.husmodell)||void 0===n||null===(i=n.Husdetaljer)||void 0===i?void 0:i.Leverand\u00f8rer]),(0,V.jsx)("div",{className:"w-[140px]",children:null!==s&&void 0!==s&&s.photo?(0,V.jsx)("img",{src:null===s||void 0===s?void 0:s.photo,alt:"leverandor",className:"w-full"}):"-"})}},{accessorKey:"adresse",header:"Adresse",cell:e=>{var t,r,n,i,a,s,o,l,c,u,d,h,p,f,m;let{row:g}=e;return(0,V.jsx)(V.Fragment,{children:null!==(t=g.original.finalData)&&void 0!==t&&t.plot?(0,V.jsxs)("div",{className:"flex items-start gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:(null===(r=g.original.finalData)||void 0===r||null===(n=r.plot)||void 0===n||null===(i=n.lamdaDataFromApi)||void 0===i||null===(a=i.coordinates)||void 0===a?void 0:a.convertedCoordinates)&&(0,V.jsx)(rpe,{coordinates:null===(s=g.original.finalData)||void 0===s||null===(o=s.plot)||void 0===o||null===(l=o.lamdaDataFromApi)||void 0===l||null===(c=l.coordinates)||void 0===c?void 0:c.convertedCoordinates})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"font-medium text-black text-sm mb-[2px]",children:null===(u=g.original.finalData)||void 0===u||null===(d=u.plot)||void 0===d||null===(h=d.CadastreDataFromApi)||void 0===h?void 0:h.presentationAddressApi.response.item.formatted.line1}),(0,V.jsx)("p",{className:"text-xs text-gray",children:null===(p=g.original.finalData)||void 0===p||null===(f=p.plot)||void 0===f||null===(m=f.CadastreDataFromApi)||void 0===m?void 0:m.presentationAddressApi.response.item.formatted.line2})]})]}):(0,V.jsx)("div",{className:"px-9",children:"-"})})}},{accessorKey:"leadSent",header:"Lead sendt",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black w-max",children:C_(null===(t=n.original.updatedAt)||void 0===t?void 0:t.seconds,null===(r=n.original.updatedAt)||void 0===r?void 0:r.nanoseconds)})}},{id:"handling",header:"Handling",cell:()=>(0,V.jsx)("button",{className:"h-8 w-8 flex items-center justify-center",children:(0,V.jsx)(Fpe,{className:"h-4 w-4 text-gray-500"})})}]),[p]),m=aA({data:p,columns:f,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:e-1,pageSize:10}},pageCount:Math.ceil(h.length/10),manualPagination:!0,onPaginationChange:t=>{if("function"===typeof t){const n=t({pageIndex:e-1,pageSize:10});r(n.pageIndex+1)}}});return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"mb-2 flex flex-col sm:flex-row sm:items-center justify-between bg-lightPurple rounded-[12px] py-3 px-2 gap-2 md:px-4",children:(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px]",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k i leads",className:"focus-within:outline-none",value:o,onChange:e=>l(e.target.value)})]})}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:m.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:a?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:f.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===h.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:f.length,className:"h-24 text-center",children:"No results."})}):m.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>m.previousPage(),disabled:!m.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:e})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:m.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>m.nextPage(),disabled:!m.getCanNextPage(),children:"Neste"})]})]})]})},Upe=()=>(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Antall kombinasjoner (tomt+hus)"}),(0,V.jsx)("p",{className:"text-gray text-sm md:text-base",children:"Liste over alle Antall kombinasjoner (tomt+hus)"})]})}),(0,V.jsx)(zpe,{})]})}),Vpe=()=>{var e;const[r,n]=(0,t.useState)(1),[i,a]=(0,t.useState)([]),[s,o]=(0,t.useState)(""),l=Kr(),[c,u]=(0,t.useState)(!0),d=(0,t.useMemo)((()=>i.filter((e=>{var t,r,n,i,a,o;const l=null===e||void 0===e||null===(t=e.CadastreDataFromApi)||void 0===t||null===(r=t.presentationAddressApi)||void 0===r||null===(n=r.response)||void 0===n||null===(i=n.item)||void 0===i?void 0:i.formatted;if(!l)return!1;const c=(null===(a=l.line1)||void 0===a?void 0:a.toLowerCase())||"",u=(null===(o=l.line2)||void 0===o?void 0:o.toLowerCase())||"",d=s.toLowerCase();return c.includes(d)||u.includes(d)}))),[i,s]);(0,t.useEffect)((()=>{(async()=>{u(!0);try{const e=Zm(lm(g_,"plot_building"),eg("view_count","desc")),t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()})));a(t)}catch(e){console.error("Error fetching plot data:",e)}finally{u(!1)}})()}),[]);const h=(0,t.useMemo)((()=>[{accessorKey:"tomt_navn",header:"Tomt navn",cell:e=>{var t,r,n,i,a;let{row:s}=e;const o=null===(t=s.original)||void 0===t||null===(r=t.CadastreDataFromApi)||void 0===r||null===(n=r.presentationAddressApi)||void 0===n||null===(i=n.response)||void 0===i||null===(a=i.item)||void 0===a?void 0:a.formatted;return(0,V.jsxs)("p",{className:"font-semibold text-sm text-darkBlack w-max",children:[null===o||void 0===o?void 0:o.line1," ",null===o||void 0===o?void 0:o.line2]})}},{accessorKey:"kommunenummer",header:"Kommunenummer",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black w-max",children:null===(t=n.original.lamdaDataFromApi)||void 0===t||null===(r=t.searchParameters)||void 0===r?void 0:r.kommunenummer})}},{accessorKey:"bruksnummer",header:"Bruksnummer",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack w-max",children:null===(t=n.original.lamdaDataFromApi)||void 0===t||null===(r=t.searchParameters)||void 0===r?void 0:r.bruksnummer})}},{accessorKey:"gardsnummer",header:"Gardsnummer",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm text-darkBlack w-max",children:null===(t=n.original.lamdaDataFromApi)||void 0===t||null===(r=t.searchParameters)||void 0===r?void 0:r.gardsnummer})}},{accessorKey:"plot_size",header:"Plot size",cell:e=>{var t,r,n,i;let{row:a}=e;return(0,V.jsx)("p",{className:"text-black text-sm mb-[2px] w-max",children:null===(t=a.original.additionalData)||void 0===t||null===(r=t.answer)||void 0===r||null===(n=r.bya_calculations)||void 0===n||null===(i=n.input)||void 0===i?void 0:i.plot_size})}},{accessorKey:"view_count",header:"Antall eiendomsvisninger",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-black text-sm mb-[2px] w-max",children:t.original.view_count||0})}},{id:"action",header:"Action",cell:e=>{let{row:t}=e;return(0,V.jsx)(qT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>l(`/se-constructed-plot/${t.original.id}`)})}}]),[l]),p=(0,t.useMemo)((()=>{const e=10*(r-1);return d.slice(e,e+10)}),[d,r]),f=aA({data:p,columns:h,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:r-1,pageSize:10}},pageCount:Math.ceil(d.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:r-1,pageSize:10});n(t.pageIndex+1)}}});return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"p-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Antall bygget tomt teller"}),(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{className:"mb-2 flex flex-col sm:flex-row sm:items-center justify-between bg-lightPurple rounded-[12px] py-3 px-3 md:px-4 gap-2",children:(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px]",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k",className:"focus-within:outline-none",value:s,onChange:e=>o(e.target.value)})]})}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:f.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:c?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:h.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===d.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:h.length,className:"h-24 text-center",children:"No results."})}):(null===(e=f.getRowModel().rows)||void 0===e?void 0:e.length)&&f.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>f.previousPage(),disabled:!f.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:r})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:f.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>f.nextPage(),disabled:!f.getCanNextPage(),children:"Neste"})]})]})]})]})})},Hpe=e=>`hsl(${260+20*e%40}, 65%, ${50+e%10}%)`,Gpe=e=>{let{chartData:t}=e;const r=null===t||void 0===t?void 0:t.map((e=>({name:e.Navn,value:parseFloat(e.value)})));return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"w-full h-[300px] relative",children:[(0,V.jsx)($5,{width:"100%",height:"100%",children:(0,V.jsx)(Yhe,{children:(0,V.jsx)(Zhe,{data:r,cx:"50%",cy:"50%",innerRadius:60,outerRadius:130,fill:"#8884d8",dataKey:"value",children:null===r||void 0===r?void 0:r.map(((e,t)=>(0,V.jsx)(Lhe,{fill:Hpe(t)},`cell-${t}`)))})})}),(0,V.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center",children:[(0,V.jsx)("span",{className:"text-gray text-base mb-2",children:"Eierandel"}),(0,V.jsx)("span",{className:"text-black font-semibold text-[26px]",children:"100%"})]})]}),(0,V.jsx)("div",{className:"mt-[48px] mb-3",children:(0,V.jsx)("div",{className:"flex justify-between gap-4",children:null===r||void 0===r?void 0:r.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-start gap-2",children:[(0,V.jsx)("div",{className:"h-[26px] w-3 flex items-center",children:(0,V.jsx)("div",{className:"w-full h-3 rounded-full",style:{backgroundColor:Hpe(t)}})}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"font-semibold text-[20px] h-[26px]",children:[e.value,"%"]}),(0,V.jsx)("span",{className:"text-sm font-medium text-[#111322]",children:e.name})]})]},t)))})})]})},Wpe=e=>{let{data:t}=e;function r(e){var t;let[r,n]=null===(t=e.split("/"))||void 0===t?void 0:t.map(Number);return r/n*100+"%"}const n=null===t||void 0===t?void 0:t.map((e=>({name:"Ownership Share",value:r(null===e||void 0===e?void 0:e.andel)})));return(0,V.jsxs)("div",{className:"flex gap-6",children:[(0,V.jsxs)("div",{className:"w-1/3 p-5 rounded-lg h-max",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsx)("h5",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold mb-8",children:"Eierskap"}),(0,V.jsx)(Gpe,{chartData:n})]}),(0,V.jsx)("div",{className:"w-2/3",children:(0,V.jsx)("div",{className:"grid grid-cols-2 gap-6",children:t&&(null===t||void 0===t?void 0:t.map(((e,t)=>{var n;return(0,V.jsxs)("div",{className:"p-5 rounded-lg flex flex-col gap-4",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsxs)("div",{children:[(0,V.jsxs)("h5",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold mb-2",children:["ID: ",null===e||void 0===e?void 0:e.eierId]}),(0,V.jsxs)("h6",{className:"text-black text-sm font-medium",children:["F\xd8DSELSNUMMER (Code: ",null===e||void 0===e||null===(n=e.personalNumberType)||void 0===n?void 0:n.code,")"]})]}),(0,V.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-gray text-xs mb-1",children:"Eierandel"}),(0,V.jsx)("h6",{className:"text-black text-sm font-medium",children:r(null===e||void 0===e?void 0:e.andel)})]})})]},t)})))})})]})};function qpe(e){return qpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qpe(e)}function Kpe(e){var t=function(e,t){if("object"!=qpe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qpe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qpe(t)?t:t+""}function Zpe(e,t,r){return(t=Kpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ype(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xpe,Qpe;var Jpe=(Qpe||(Qpe=1,Xpe=function(e,t,r,n,i,a,s,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,a,s,o],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}),Xpe),efe=Ype(Jpe),tfe=(0,t.createContext)(null);function rfe(e,t,r,n){var i,a,s={};return i=e,a=(e,i)=>{var a=r[i];a!==t[i]&&(s[i]=a,e(n,a))},Object.keys(i).forEach((e=>a(i[e],e))),s}function nfe(e,t,r){var n,i,a,s=(n=r,i=function(r,n,i){return"function"===typeof e[i]&&r.push(google.maps.event.addListener(t,n,e[i])),r},a=[],Object.keys(n).reduce((function(e,t){return i(e,n[t],t)}),a));return s}function ife(e){google.maps.event.removeListener(e)}function afe(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(ife)}function sfe(e){var{updaterMap:t,eventMap:r,prevProps:n,nextProps:i,instance:a}=e,s=nfe(i,a,r);return rfe(t,n,i,a),s}var ofe={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},lfe={extraMapTypes(e,t){t.forEach((function(t,r){e.mapTypes.set(String(r),t)}))},center(e,t){e.setCenter(t)},clickableIcons(e,t){e.setClickableIcons(t)},heading(e,t){e.setHeading(t)},mapTypeId(e,t){e.setMapTypeId(t)},options(e,t){e.setOptions(t)},streetView(e,t){e.setStreetView(t)},tilt(e,t){e.setTilt(t)},zoom(e,t){e.setZoom(t)}};(0,t.memo)((function(e){var{children:r,options:n,id:i,mapContainerStyle:a,mapContainerClassName:s,center:o,onClick:l,onDblClick:c,onDrag:u,onDragEnd:d,onDragStart:h,onMouseMove:p,onMouseOut:f,onMouseOver:m,onMouseDown:g,onMouseUp:v,onRightClick:x,onCenterChanged:y,onLoad:b,onUnmount:w}=e,[_,k]=(0,t.useState)(null),S=(0,t.useRef)(null),[j,E]=(0,t.useState)(null),[C,N]=(0,t.useState)(null),[T,P]=(0,t.useState)(null),[A,M]=(0,t.useState)(null),[I,O]=(0,t.useState)(null),[D,R]=(0,t.useState)(null),[L,F]=(0,t.useState)(null),[$,B]=(0,t.useState)(null),[z,U]=(0,t.useState)(null),[H,G]=(0,t.useState)(null),[W,q]=(0,t.useState)(null),[K,Z]=(0,t.useState)(null);return(0,t.useEffect)((()=>{n&&null!==_&&_.setOptions(n)}),[_,n]),(0,t.useEffect)((()=>{null!==_&&"undefined"!==typeof o&&_.setCenter(o)}),[_,o]),(0,t.useEffect)((()=>{_&&c&&(null!==C&&google.maps.event.removeListener(C),N(google.maps.event.addListener(_,"dblclick",c)))}),[c]),(0,t.useEffect)((()=>{_&&d&&(null!==T&&google.maps.event.removeListener(T),P(google.maps.event.addListener(_,"dragend",d)))}),[d]),(0,t.useEffect)((()=>{_&&h&&(null!==A&&google.maps.event.removeListener(A),M(google.maps.event.addListener(_,"dragstart",h)))}),[h]),(0,t.useEffect)((()=>{_&&g&&(null!==I&&google.maps.event.removeListener(I),O(google.maps.event.addListener(_,"mousedown",g)))}),[g]),(0,t.useEffect)((()=>{_&&p&&(null!==D&&google.maps.event.removeListener(D),R(google.maps.event.addListener(_,"mousemove",p)))}),[p]),(0,t.useEffect)((()=>{_&&f&&(null!==L&&google.maps.event.removeListener(L),F(google.maps.event.addListener(_,"mouseout",f)))}),[f]),(0,t.useEffect)((()=>{_&&m&&(null!==$&&google.maps.event.removeListener($),B(google.maps.event.addListener(_,"mouseover",m)))}),[m]),(0,t.useEffect)((()=>{_&&v&&(null!==z&&google.maps.event.removeListener(z),U(google.maps.event.addListener(_,"mouseup",v)))}),[v]),(0,t.useEffect)((()=>{_&&x&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(_,"rightclick",x)))}),[x]),(0,t.useEffect)((()=>{_&&l&&(null!==W&&google.maps.event.removeListener(W),q(google.maps.event.addListener(_,"click",l)))}),[l]),(0,t.useEffect)((()=>{_&&u&&(null!==K&&google.maps.event.removeListener(K),Z(google.maps.event.addListener(_,"drag",u)))}),[u]),(0,t.useEffect)((()=>{_&&y&&(null!==j&&google.maps.event.removeListener(j),E(google.maps.event.addListener(_,"center_changed",y)))}),[l]),(0,t.useEffect)((()=>{var e=null===S.current?null:new google.maps.Map(S.current,n);return k(e),null!==e&&b&&b(e),()=>{null!==e&&w&&w(e)}}),[]),(0,V.jsx)("div",{id:i,ref:S,style:a,className:s,children:(0,V.jsx)(tfe.Provider,{value:_,children:null!==_?r:null})})}));class cfe extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"state",{map:null}),Zpe(this,"registeredEvents",[]),Zpe(this,"mapRef",null),Zpe(this,"getInstance",(()=>null===this.mapRef?null:new google.maps.Map(this.mapRef,this.props.options))),Zpe(this,"panTo",(e=>{var t=this.getInstance();t&&t.panTo(e)})),Zpe(this,"setMapCallback",(()=>{null!==this.state.map&&this.props.onLoad&&this.props.onLoad(this.state.map)})),Zpe(this,"getRef",(e=>{this.mapRef=e}))}componentDidMount(){var e=this.getInstance();this.registeredEvents=sfe({updaterMap:lfe,eventMap:ofe,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{map:e}}),this.setMapCallback)}componentDidUpdate(e){null!==this.state.map&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:lfe,eventMap:ofe,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),afe(this.registeredEvents))}render(){return(0,V.jsx)("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:(0,V.jsx)(tfe.Provider,{value:this.state.map,children:null!==this.state.map?this.props.children:null})})}}function ufe(e,t,r,n,i,a,s){try{var o=e[a](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function dfe(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){ufe(a,n,i,s,o,"next",e)}function o(e){ufe(a,n,i,s,o,"throw",e)}s(void 0)}))}}function hfe(e){var{googleMapsApiKey:t,googleMapsClientId:r,version:n="weekly",language:i,region:a,libraries:s,channel:o,mapIds:l,authReferrerPolicy:c}=e,u=[];return efe(t&&r||!(t&&r),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?u.push("key=".concat(t)):r&&u.push("client=".concat(r)),n&&u.push("v=".concat(n)),i&&u.push("language=".concat(i)),a&&u.push("region=".concat(a)),s&&s.length&&u.push("libraries=".concat(s.sort().join(","))),o&&u.push("channel=".concat(o)),l&&l.length&&u.push("map_ids=".concat(l.join(","))),c&&u.push("auth_referrer_policy=".concat(c)),u.push("loading=async"),u.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(u.join("&"))}var pfe="undefined"!==typeof document;function ffe(e){var{url:t,id:r,nonce:n}=e;return pfe?new Promise((function(e,i){var a=document.getElementById(r),s=window;if(a){var o=a.getAttribute("data-state");if(a.src===t&&"error"!==o){if("ready"===o)return e(r);var l=s.initMap,c=a.onerror;return s.initMap=function(){l&&l(),e(r)},void(a.onerror=function(e){c&&c(e),i(e)})}a.remove()}var u=document.createElement("script");u.type="text/javascript",u.src=t,u.id=r,u.async=!0,u.nonce=n||"",u.onerror=function(e){u.setAttribute("data-state","error"),i(e)},s.initMap=function(){u.setAttribute("data-state","ready"),e(r)},document.head.appendChild(u)})).catch((e=>{throw console.error("injectScript error: ",e),e})):Promise.reject(new Error("document is undefined"))}function mfe(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function gfe(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(r,n){return mfe(r)||Reflect.apply(t,e,[r,n]),r};var r=e.appendChild.bind(e);e.appendChild=function(t){return mfe(t)||Reflect.apply(r,e,[t]),t}}}var vfe=!1;function xfe(){return(0,V.jsx)("div",{children:"Loading..."})}var yfe,bfe={id:"script-loader",version:"weekly"};class wfe extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"check",null),Zpe(this,"state",{loaded:!1}),Zpe(this,"cleanupCallback",(()=>{delete window.google.maps,this.injectScript()})),Zpe(this,"isCleaningUp",dfe((function*(){return new Promise((function(e){if(vfe){if(pfe)var t=window.setInterval((function(){vfe||(window.clearInterval(t),e())}),1)}else e()}))}))),Zpe(this,"cleanup",(()=>{vfe=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(e){return"string"===typeof e.src&&e.src.includes("maps.googleapis")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("link")).filter((function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("style")).filter((function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))})),Zpe(this,"injectScript",(()=>{this.props.preventGoogleFontsLoading&&gfe(),efe(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id),ffe({id:this.props.id,nonce:this.props.nonce,url:hfe(this.props)}).then((()=>{this.props.onLoad&&this.props.onLoad(),this.setState((function(){return{loaded:!0}}))})).catch((e=>{this.props.onError&&this.props.onError(e),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))}))})),Zpe(this,"getRef",(e=>{this.check=e}))}componentDidMount(){if(pfe){if(window.google&&window.google.maps&&!vfe)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch((function(e){console.error("Error at injecting script after cleaning up: ",e)}))}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),pfe&&e.language!==this.props.language&&(this.cleanup(),this.setState((function(){return{loaded:!1}}),this.cleanupCallback))}componentWillUnmount(){if(pfe){this.cleanup();window.setTimeout((()=>{this.check||(delete window.google,vfe=!1)}),1),this.props.onUnmount&&this.props.onUnmount()}}render(){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||(0,V.jsx)(xfe,{})]})}}function _fe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}Zpe(wfe,"defaultProps",bfe);var kfe=["loadingElement","onLoad","onError","onUnmount","children"],Sfe=(0,V.jsx)(xfe,{});(0,t.memo)((function(e){var{loadingElement:r,onLoad:n,onError:i,onUnmount:a,children:s}=e,o=_fe(e,kfe),{isLoaded:l,loadError:c}=function(e){var{id:r=bfe.id,version:n=bfe.version,nonce:i,googleMapsApiKey:a,googleMapsClientId:s,language:o,region:l,libraries:c,preventGoogleFontsLoading:u,channel:d,mapIds:h,authReferrerPolicy:p}=e,f=(0,t.useRef)(!1),[m,g]=(0,t.useState)(!1),[v,x]=(0,t.useState)(void 0);(0,t.useEffect)((function(){return f.current=!0,()=>{f.current=!1}}),[]),(0,t.useEffect)((function(){pfe&&u&&gfe()}),[u]),(0,t.useEffect)((function(){m&&efe(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")}),[m]);var y=hfe({version:n,googleMapsApiKey:a,googleMapsClientId:s,language:o,region:l,libraries:c,channel:d,mapIds:h,authReferrerPolicy:p});(0,t.useEffect)((function(){function e(){f.current&&(g(!0),yfe=y)}pfe&&(window.google&&window.google.maps&&yfe===y?e():ffe({id:r,url:y,nonce:i}).then(e).catch((function(e){f.current&&x(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(a||"-",") or Client ID (").concat(s||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)})))}),[r,y,i]);var b=(0,t.useRef)(void 0);return(0,t.useEffect)((function(){b.current&&c!==b.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),b.current=c}),[c]),{isLoaded:m,loadError:v,url:y}}(o);return(0,t.useEffect)((function(){l&&"function"===typeof n&&n()}),[l,n]),(0,t.useEffect)((function(){c&&"function"===typeof i&&i(c)}),[c,i]),(0,t.useEffect)((function(){return()=>{a&&a()}}),[a]),l?s:r||Sfe}));"function"===typeof SuppressedError&&SuppressedError;var jfe;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(jfe||(jfe={}));function Efe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cfe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Efe(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Efe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nfe={},Tfe={options(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var{options:r,onLoad:n,onUnmount:i}=e,a=(0,t.useContext)(tfe),[s,o]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==s&&s.setMap(a)}),[a]),(0,t.useEffect)((()=>{r&&null!==s&&s.setOptions(r)}),[s,r]),(0,t.useEffect)((()=>{var e=new google.maps.TrafficLayer(Cfe(Cfe({},r),{},{map:a}));return o(e),n&&n(e),()=>{null!==s&&(i&&i(s),s.setMap(null))}}),[]),null}));class Pfe extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"state",{trafficLayer:null}),Zpe(this,"setTrafficLayerCallback",(()=>{null!==this.state.trafficLayer&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)})),Zpe(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(Cfe(Cfe({},this.props.options),{},{map:this.context}));this.registeredEvents=sfe({updaterMap:Tfe,eventMap:Nfe,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{trafficLayer:e}}),this.setTrafficLayerCallback)}componentDidUpdate(e){null!==this.state.trafficLayer&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:Tfe,eventMap:Nfe,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),afe(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Zpe(Pfe,"contextType",tfe);(0,t.memo)((function(e){var{onLoad:r,onUnmount:n}=e,i=(0,t.useContext)(tfe),[a,s]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==a&&a.setMap(i)}),[i]),(0,t.useEffect)((()=>{var e=new google.maps.BicyclingLayer;return s(e),e.setMap(i),r&&r(e),()=>{null!==e&&(n&&n(e),e.setMap(null))}}),[]),null}));class Afe extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"state",{bicyclingLayer:null}),Zpe(this,"setBicyclingLayerCallback",(()=>{null!==this.state.bicyclingLayer&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))}))}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState((()=>({bicyclingLayer:e})),this.setBicyclingLayerCallback)}componentWillUnmount(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Zpe(Afe,"contextType",tfe);(0,t.memo)((function(e){var{onLoad:r,onUnmount:n}=e,i=(0,t.useContext)(tfe),[a,s]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==a&&a.setMap(i)}),[i]),(0,t.useEffect)((()=>{var e=new google.maps.TransitLayer;return s(e),e.setMap(i),r&&r(e),()=>{null!==a&&(n&&n(a),a.setMap(null))}}),[]),null}));class Mfe extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"state",{transitLayer:null}),Zpe(this,"setTransitLayerCallback",(()=>{null!==this.state.transitLayer&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))}))}componentDidMount(){var e=new google.maps.TransitLayer;this.setState((function(){return{transitLayer:e}}),this.setTransitLayerCallback)}componentWillUnmount(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}function Ife(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ofe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ife(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ife(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(Mfe,"contextType",tfe);var Dfe={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},Rfe={drawingMode(e,t){e.setDrawingMode(t)},options(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var{options:r,drawingMode:n,onCircleComplete:i,onMarkerComplete:a,onOverlayComplete:s,onPolygonComplete:o,onPolylineComplete:l,onRectangleComplete:c,onLoad:u,onUnmount:d}=e,h=(0,t.useContext)(tfe),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,x]=(0,t.useState)(null),[y,b]=(0,t.useState)(null),[w,_]=(0,t.useState)(null),[k,S]=(0,t.useState)(null),[j,E]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==p&&p.setMap(h)}),[h]),(0,t.useEffect)((()=>{r&&null!==p&&p.setOptions(r)}),[p,r]),(0,t.useEffect)((()=>{null!==p&&p.setDrawingMode(null!==n&&void 0!==n?n:null)}),[p,n]),(0,t.useEffect)((()=>{p&&i&&(null!==m&&google.maps.event.removeListener(m),g(google.maps.event.addListener(p,"circlecomplete",i)))}),[p,i]),(0,t.useEffect)((()=>{p&&a&&(null!==v&&google.maps.event.removeListener(v),x(google.maps.event.addListener(p,"markercomplete",a)))}),[p,a]),(0,t.useEffect)((()=>{p&&s&&(null!==y&&google.maps.event.removeListener(y),b(google.maps.event.addListener(p,"overlaycomplete",s)))}),[p,s]),(0,t.useEffect)((()=>{p&&o&&(null!==w&&google.maps.event.removeListener(w),_(google.maps.event.addListener(p,"polygoncomplete",o)))}),[p,o]),(0,t.useEffect)((()=>{p&&l&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(p,"polylinecomplete",l)))}),[p,l]),(0,t.useEffect)((()=>{p&&c&&(null!==j&&google.maps.event.removeListener(j),E(google.maps.event.addListener(p,"rectanglecomplete",c)))}),[p,c]),(0,t.useEffect)((()=>{efe(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(Ofe(Ofe({},r),{},{map:h}));return n&&e.setDrawingMode(n),i&&g(google.maps.event.addListener(e,"circlecomplete",i)),a&&x(google.maps.event.addListener(e,"markercomplete",a)),s&&b(google.maps.event.addListener(e,"overlaycomplete",s)),o&&_(google.maps.event.addListener(e,"polygoncomplete",o)),l&&S(google.maps.event.addListener(e,"polylinecomplete",l)),c&&E(google.maps.event.addListener(e,"rectanglecomplete",c)),f(e),u&&u(e),()=>{null!==p&&(m&&google.maps.event.removeListener(m),v&&google.maps.event.removeListener(v),y&&google.maps.event.removeListener(y),w&&google.maps.event.removeListener(w),k&&google.maps.event.removeListener(k),j&&google.maps.event.removeListener(j),d&&d(p),p.setMap(null))}}),[]),null}));class Lfe extends t.PureComponent{constructor(e){super(e),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{drawingManager:null}),Zpe(this,"setDrawingManagerCallback",(()=>{null!==this.state.drawingManager&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)})),efe(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Ofe(Ofe({},this.props.options),{},{map:this.context}));this.registeredEvents=sfe({updaterMap:Rfe,eventMap:Dfe,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{drawingManager:e}}),this.setDrawingManagerCallback)}componentDidUpdate(e){null!==this.state.drawingManager&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:Rfe,eventMap:Dfe,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),afe(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}function Ffe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ffe(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ffe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(Lfe,"contextType",tfe);var Bfe={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},zfe={animation(e,t){e.setAnimation(t)},clickable(e,t){e.setClickable(t)},cursor(e,t){e.setCursor(t)},draggable(e,t){e.setDraggable(t)},icon(e,t){e.setIcon(t)},label(e,t){e.setLabel(t)},map(e,t){e.setMap(t)},opacity(e,t){e.setOpacity(t)},options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},shape(e,t){e.setShape(t)},title(e,t){e.setTitle(t)},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},Ufe={};(0,t.memo)((function(e){var{position:r,options:n,clusterer:i,noClustererRedraw:a,children:s,draggable:o,visible:l,animation:c,clickable:u,cursor:d,icon:h,label:p,opacity:f,shape:m,title:g,zIndex:v,onClick:x,onDblClick:y,onDrag:b,onDragEnd:w,onDragStart:_,onMouseOut:k,onMouseOver:S,onMouseUp:j,onMouseDown:E,onRightClick:C,onClickableChanged:N,onCursorChanged:T,onAnimationChanged:P,onDraggableChanged:A,onFlatChanged:M,onIconChanged:I,onPositionChanged:O,onShapeChanged:D,onTitleChanged:R,onVisibleChanged:L,onZindexChanged:F,onLoad:$,onUnmount:B}=e,z=(0,t.useContext)(tfe),[U,H]=(0,t.useState)(null),[G,W]=(0,t.useState)(null),[q,K]=(0,t.useState)(null),[Z,Y]=(0,t.useState)(null),[X,Q]=(0,t.useState)(null),[J,ee]=(0,t.useState)(null),[te,re]=(0,t.useState)(null),[ne,ie]=(0,t.useState)(null),[ae,se]=(0,t.useState)(null),[oe,le]=(0,t.useState)(null),[ce,ue]=(0,t.useState)(null),[de,he]=(0,t.useState)(null),[pe,fe]=(0,t.useState)(null),[me,ge]=(0,t.useState)(null),[ve,xe]=(0,t.useState)(null),[ye,be]=(0,t.useState)(null),[we,_e]=(0,t.useState)(null),[ke,Se]=(0,t.useState)(null),[je,Ee]=(0,t.useState)(null),[Ce,Ne]=(0,t.useState)(null),[Te,Pe]=(0,t.useState)(null),[Ae,Me]=(0,t.useState)(null);(0,t.useEffect)((()=>{null!==U&&U.setMap(z)}),[z]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==U&&U.setOptions(n)}),[U,n]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==U&&U.setDraggable(o)}),[U,o]),(0,t.useEffect)((()=>{r&&null!==U&&U.setPosition(r)}),[U,r]),(0,t.useEffect)((()=>{"undefined"!==typeof l&&null!==U&&U.setVisible(l)}),[U,l]),(0,t.useEffect)((()=>{null===U||void 0===U||U.setAnimation(c)}),[U,c]),(0,t.useEffect)((()=>{U&&void 0!==u&&U.setClickable(u)}),[U,u]),(0,t.useEffect)((()=>{U&&void 0!==d&&U.setCursor(d)}),[U,d]),(0,t.useEffect)((()=>{U&&void 0!==h&&U.setIcon(h)}),[U,h]),(0,t.useEffect)((()=>{U&&void 0!==p&&U.setLabel(p)}),[U,p]),(0,t.useEffect)((()=>{U&&void 0!==f&&U.setOpacity(f)}),[U,f]),(0,t.useEffect)((()=>{U&&void 0!==m&&U.setShape(m)}),[U,m]),(0,t.useEffect)((()=>{U&&void 0!==g&&U.setTitle(g)}),[U,g]),(0,t.useEffect)((()=>{U&&void 0!==v&&U.setZIndex(v)}),[U,v]),(0,t.useEffect)((()=>{U&&y&&(null!==G&&google.maps.event.removeListener(G),W(google.maps.event.addListener(U,"dblclick",y)))}),[y]),(0,t.useEffect)((()=>{U&&w&&(null!==q&&google.maps.event.removeListener(q),K(google.maps.event.addListener(U,"dragend",w)))}),[w]),(0,t.useEffect)((()=>{U&&_&&(null!==Z&&google.maps.event.removeListener(Z),Y(google.maps.event.addListener(U,"dragstart",_)))}),[_]),(0,t.useEffect)((()=>{U&&E&&(null!==X&&google.maps.event.removeListener(X),Q(google.maps.event.addListener(U,"mousedown",E)))}),[E]),(0,t.useEffect)((()=>{U&&k&&(null!==J&&google.maps.event.removeListener(J),ee(google.maps.event.addListener(U,"mouseout",k)))}),[k]),(0,t.useEffect)((()=>{U&&S&&(null!==te&&google.maps.event.removeListener(te),re(google.maps.event.addListener(U,"mouseover",S)))}),[S]),(0,t.useEffect)((()=>{U&&j&&(null!==ne&&google.maps.event.removeListener(ne),ie(google.maps.event.addListener(U,"mouseup",j)))}),[j]),(0,t.useEffect)((()=>{U&&C&&(null!==ae&&google.maps.event.removeListener(ae),se(google.maps.event.addListener(U,"rightclick",C)))}),[C]),(0,t.useEffect)((()=>{U&&x&&(null!==oe&&google.maps.event.removeListener(oe),le(google.maps.event.addListener(U,"click",x)))}),[x]),(0,t.useEffect)((()=>{U&&b&&(null!==ce&&google.maps.event.removeListener(ce),ue(google.maps.event.addListener(U,"drag",b)))}),[b]),(0,t.useEffect)((()=>{U&&N&&(null!==de&&google.maps.event.removeListener(de),he(google.maps.event.addListener(U,"clickable_changed",N)))}),[N]),(0,t.useEffect)((()=>{U&&T&&(null!==pe&&google.maps.event.removeListener(pe),fe(google.maps.event.addListener(U,"cursor_changed",T)))}),[T]),(0,t.useEffect)((()=>{U&&P&&(null!==me&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(U,"animation_changed",P)))}),[P]),(0,t.useEffect)((()=>{U&&A&&(null!==ve&&google.maps.event.removeListener(ve),xe(google.maps.event.addListener(U,"draggable_changed",A)))}),[A]),(0,t.useEffect)((()=>{U&&M&&(null!==ye&&google.maps.event.removeListener(ye),be(google.maps.event.addListener(U,"flat_changed",M)))}),[M]),(0,t.useEffect)((()=>{U&&I&&(null!==we&&google.maps.event.removeListener(we),_e(google.maps.event.addListener(U,"icon_changed",I)))}),[I]),(0,t.useEffect)((()=>{U&&O&&(null!==ke&&google.maps.event.removeListener(ke),Se(google.maps.event.addListener(U,"position_changed",O)))}),[O]),(0,t.useEffect)((()=>{U&&D&&(null!==je&&google.maps.event.removeListener(je),Ee(google.maps.event.addListener(U,"shape_changed",D)))}),[D]),(0,t.useEffect)((()=>{U&&R&&(null!==Ce&&google.maps.event.removeListener(Ce),Ne(google.maps.event.addListener(U,"title_changed",R)))}),[R]),(0,t.useEffect)((()=>{U&&L&&(null!==Te&&google.maps.event.removeListener(Te),Pe(google.maps.event.addListener(U,"visible_changed",L)))}),[L]),(0,t.useEffect)((()=>{U&&F&&(null!==Ae&&google.maps.event.removeListener(Ae),Me(google.maps.event.addListener(U,"zindex_changed",F)))}),[F]),(0,t.useEffect)((()=>{var e=$fe($fe($fe({},n||Ufe),i?Ufe:{map:z}),{},{position:r}),t=new google.maps.Marker(e);return i?i.addMarker(t,!!a):t.setMap(z),r&&t.setPosition(r),"undefined"!==typeof l&&t.setVisible(l),"undefined"!==typeof o&&t.setDraggable(o),"undefined"!==typeof u&&t.setClickable(u),"string"===typeof d&&t.setCursor(d),h&&t.setIcon(h),"undefined"!==typeof p&&t.setLabel(p),"undefined"!==typeof f&&t.setOpacity(f),m&&t.setShape(m),"string"===typeof g&&t.setTitle(g),"number"===typeof v&&t.setZIndex(v),y&&W(google.maps.event.addListener(t,"dblclick",y)),w&&K(google.maps.event.addListener(t,"dragend",w)),_&&Y(google.maps.event.addListener(t,"dragstart",_)),E&&Q(google.maps.event.addListener(t,"mousedown",E)),k&&ee(google.maps.event.addListener(t,"mouseout",k)),S&&re(google.maps.event.addListener(t,"mouseover",S)),j&&ie(google.maps.event.addListener(t,"mouseup",j)),C&&se(google.maps.event.addListener(t,"rightclick",C)),x&&le(google.maps.event.addListener(t,"click",x)),b&&ue(google.maps.event.addListener(t,"drag",b)),N&&he(google.maps.event.addListener(t,"clickable_changed",N)),T&&fe(google.maps.event.addListener(t,"cursor_changed",T)),P&&ge(google.maps.event.addListener(t,"animation_changed",P)),A&&xe(google.maps.event.addListener(t,"draggable_changed",A)),M&&be(google.maps.event.addListener(t,"flat_changed",M)),I&&_e(google.maps.event.addListener(t,"icon_changed",I)),O&&Se(google.maps.event.addListener(t,"position_changed",O)),D&&Ee(google.maps.event.addListener(t,"shape_changed",D)),R&&Ne(google.maps.event.addListener(t,"title_changed",R)),L&&Pe(google.maps.event.addListener(t,"visible_changed",L)),F&&Me(google.maps.event.addListener(t,"zindex_changed",F)),H(t),$&&$(t),()=>{null!==G&&google.maps.event.removeListener(G),null!==q&&google.maps.event.removeListener(q),null!==Z&&google.maps.event.removeListener(Z),null!==X&&google.maps.event.removeListener(X),null!==J&&google.maps.event.removeListener(J),null!==te&&google.maps.event.removeListener(te),null!==ne&&google.maps.event.removeListener(ne),null!==ae&&google.maps.event.removeListener(ae),null!==oe&&google.maps.event.removeListener(oe),null!==de&&google.maps.event.removeListener(de),null!==pe&&google.maps.event.removeListener(pe),null!==me&&google.maps.event.removeListener(me),null!==ve&&google.maps.event.removeListener(ve),null!==ye&&google.maps.event.removeListener(ye),null!==we&&google.maps.event.removeListener(we),null!==ke&&google.maps.event.removeListener(ke),null!==Ce&&google.maps.event.removeListener(Ce),null!==Te&&google.maps.event.removeListener(Te),null!==Ae&&google.maps.event.removeListener(Ae),B&&B(t),i?i.removeMarker(t,!!a):t&&t.setMap(null)}}),[]);var Ie=(0,t.useMemo)((()=>s?t.Children.map(s,(e=>{if(!(0,t.isValidElement)(e))return e;var r=e;return(0,t.cloneElement)(r,{anchor:U})})):null),[s,U]);return(0,V.jsx)(V.Fragment,{children:Ie})||null}));class Vfe extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[])}componentDidMount(){var e=this;return dfe((function*(){var t=$fe($fe($fe({},e.props.options||Ufe),e.props.clusterer?Ufe:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=sfe({updaterMap:zfe,eventMap:Bfe,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)}))()}componentDidUpdate(e){this.marker&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:zfe,eventMap:Bfe,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),afe(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?t.Children.map(this.props.children,(e=>{if(!(0,t.isValidElement)(e))return e;var r=e;return(0,t.cloneElement)(r,{anchor:this.marker})})):null;return e||null}}Zpe(Vfe,"contextType",tfe);var Hfe=function(){function e(t,r){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=r,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var r=t.getMaxZoom(),n=this.cluster.getBounds(),i=t.getMap();null!==i&&"fitBounds"in i&&i.fitBounds(n),this.timeOut=window.setTimeout((function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(n);var i=e.getZoom()||0;null!==r&&i>r&&e.setZoom(r+1)}}),100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,r,n,i,a;if(this.div&&this.center){var s=null===this.sums||"undefined"===typeof this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,o=this.backgroundPosition.split(" "),l=parseInt((null===(e=o[0])||void 0===e?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),c=parseInt((null===(t=o[1])||void 0===t?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),u=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==u?"".concat(u.y,"px"):"0","; left: ").concat(null!==u?"".concat(u.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var d=document.createElement("img");d.alt=s,d.src=this.url,d.width=this.width,d.height=this.height,d.setAttribute("style","position: absolute; top: ".concat(c,"px; left: ").concat(l,"px")),this.cluster.getClusterer().enableRetinaIcons||(d.style.clip="rect(-".concat(c,"px, -").concat(l+this.width,"px, -").concat(c+this.height,", -").concat(l,")"));var h=document.createElement("div");h.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(r=this.sums)||void 0===r?void 0:r.text)&&(h.innerText="".concat(null===(n=this.sums)||void 0===n?void 0:n.text)),(null===(i=this.sums)||void 0===i?void 0:i.html)&&(h.innerHTML="".concat(null===(a=this.sums)||void 0===a?void 0:a.html)),this.div.innerHTML="",this.div.appendChild(d),this.div.appendChild(h),this.div.title=s,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),r=t[Math.min(t.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),Gfe=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Hfe(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=0,r=this.getMarkers();t<r.length;t++){var n=r[t].getPosition();n&&e.extend(n)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,r;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(r=e.getPosition())){var n=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(n-1)+r.lat())/n,(this.center.lng()*(n-1)+r.lng())/n),this.calculateBounds()}}else(r=e.getPosition())&&(this.center=r,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var i=this.markers.length,a=this.markerClusterer.getMaxZoom(),s=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==a&&"undefined"!==typeof s&&s>a)e.getMap()!==this.map&&e.setMap(this.map);else if(i<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(i===this.minClusterSize)for(var o=0,l=this.markers;o<l.length;o++){l[o].setMap(null)}else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,r=this.markerClusterer.getMaxZoom(),n=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==r&&"undefined"!==typeof n&&n>r||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function Wfe(e,t){var r=e.length,n=r.toString().length,i=Math.min(n,t);return{text:r.toString(),index:i,title:""}}var qfe=[53,56,66,78,90],Kfe=function(){function e(t,r,n){void 0===r&&(r=[]),void 0===n&&(n={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=n.gridSize||60,this.minClusterSize=n.minimumClusterSize||2,this.maxZoom=n.maxZoom||null,this.styles=n.styles||[],this.title=n.title||"",this.zoomOnClick=!0,void 0!==n.zoomOnClick&&(this.zoomOnClick=n.zoomOnClick),this.averageCenter=!1,void 0!==n.averageCenter&&(this.averageCenter=n.averageCenter),this.ignoreHidden=!1,void 0!==n.ignoreHidden&&(this.ignoreHidden=n.ignoreHidden),this.enableRetinaIcons=!1,void 0!==n.enableRetinaIcons&&(this.enableRetinaIcons=n.enableRetinaIcons),this.imagePath=n.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=n.imageExtension||"png",this.imageSizes=n.imageSizes||qfe,this.calculator=n.calculator||Wfe,this.batchSize=n.batchSize||2e3,this.batchSizeIE=n.batchSizeIE||500,this.clusterClass=n.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(r,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var r=t[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var n=0,i=this.clusters;n<i.length;n++){i[n].remove()}this.clusters=[];for(var a=0,s=this.listeners;a<s.length;a++){var o=s[a];google.maps.event.removeListener(o)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,r=0,n=e;r<n.length;r++){var i=n[r].getPosition();i&&t.extend(i)}var a=this.getMap();null!==a&&"fitBounds"in a&&a.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=e[r];n&&this.pushMarkerTo(n)}t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",(function(){t.ready&&(e.isAdded=!1,t.repaint())})),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){t=r;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!t&&r&&this.repaint(),r},e.prototype.removeMarkers=function(e,t){for(var r=!1,n=0,i=e;n<i.length;n++){var a=i[n];r=r||this.removeMarker_(a)}return!t&&r&&this.repaint(),r},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout((function(){for(var t=0,r=e;t<r.length;t++){r[t].remove()}}),0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==r&&(r.x+=this.gridSize,r.y-=this.gridSize);var n=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==n&&(n.x-=this.gridSize,n.y+=this.gridSize),null!==r){var i=t.fromDivPixelToLatLng(r);null!==i&&e.extend(i)}if(null!==n){var a=t.fromDivPixelToLatLng(n);null!==a&&e.extend(a)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0,r=this.clusters;t<r.length;t++){r[t].remove()}this.clusters=[];for(var n=0,i=this.markers;n<i.length;n++){var a=i[n];a.isAdded=!1,e&&a.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var r=(t.lat()-e.lat())*Math.PI/180,n=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},e.prototype.isMarkerInBounds=function(e,t){var r=e.getPosition();return!!r&&t.contains(r)},e.prototype.addToClosestCluster=function(e){for(var t,r=4e4,n=null,i=0,a=this.clusters;i<a.length;i++){var s=(t=a[i]).getCenter(),o=e.getPosition();if(s&&o){var l=this.distanceBetweenPoints(s,o);l<r&&(r=l,n=t)}}n&&n.isMarkerInClusterBounds(e)?n.addMarker(e):((t=new Gfe(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),n=(null!==r&&"getBounds"in r?r.getBounds():null),i=((null===r||void 0===r?void 0:r.getZoom())||0)>3?new google.maps.LatLngBounds(null===n||void 0===n?void 0:n.getSouthWest(),null===n||void 0===n?void 0:n.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),a=this.getExtendedBounds(i),s=Math.min(e+this.batchSize,this.markers.length),o=e;o<s;o++){var l=this.markers[o];l&&!l.isAdded&&this.isMarkerInBounds(l,a)&&(!this.ignoreHidden||this.ignoreHidden&&l.getVisible())&&this.addToClosestCluster(l)}if(s<this.markers.length)this.timerRefStatic=window.setTimeout((function(){t.createClusters(s)}),0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var c=0,u=this.clusters;c<u.length;c++){u[c].updateIcon()}}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){var r=t;this.prototype[r]=e.prototype[r]}return this}.apply(e,[t])},e}();function Zfe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Yfe={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Xfe={averageCenter(e,t){e.setAverageCenter(t)},batchSizeIE(e,t){e.setBatchSizeIE(t)},calculator(e,t){e.setCalculator(t)},clusterClass(e,t){e.setClusterClass(t)},enableRetinaIcons(e,t){e.setEnableRetinaIcons(t)},gridSize(e,t){e.setGridSize(t)},ignoreHidden(e,t){e.setIgnoreHidden(t)},imageExtension(e,t){e.setImageExtension(t)},imagePath(e,t){e.setImagePath(t)},imageSizes(e,t){e.setImageSizes(t)},maxZoom(e,t){e.setMaxZoom(t)},minimumClusterSize(e,t){e.setMinimumClusterSize(t)},styles(e,t){e.setStyles(t)},title(e,t){e.setTitle(t)},zoomOnClick(e,t){e.setZoomOnClick(t)}},Qfe={};(0,t.memo)((function(e){var{children:r,options:n,averageCenter:i,batchSizeIE:a,calculator:s,clusterClass:o,enableRetinaIcons:l,gridSize:c,ignoreHidden:u,imageExtension:d,imagePath:h,imageSizes:p,maxZoom:f,minimumClusterSize:m,styles:g,title:v,zoomOnClick:x,onClick:y,onClusteringBegin:b,onClusteringEnd:w,onMouseOver:_,onMouseOut:k,onLoad:S,onUnmount:j}=e,[E,C]=(0,t.useState)(null),N=(0,t.useContext)(tfe),[T,P]=(0,t.useState)(null),[A,M]=(0,t.useState)(null),[I,O]=(0,t.useState)(null),[D,R]=(0,t.useState)(null),[L,F]=(0,t.useState)(null);return(0,t.useEffect)((()=>{E&&k&&(null!==D&&google.maps.event.removeListener(D),R(google.maps.event.addListener(E,Yfe.onMouseOut,k)))}),[k]),(0,t.useEffect)((()=>{E&&_&&(null!==L&&google.maps.event.removeListener(L),F(google.maps.event.addListener(E,Yfe.onMouseOver,_)))}),[_]),(0,t.useEffect)((()=>{E&&y&&(null!==T&&google.maps.event.removeListener(T),P(google.maps.event.addListener(E,Yfe.onClick,y)))}),[y]),(0,t.useEffect)((()=>{E&&b&&(null!==A&&google.maps.event.removeListener(A),M(google.maps.event.addListener(E,Yfe.onClusteringBegin,b)))}),[b]),(0,t.useEffect)((()=>{E&&w&&(null!==I&&google.maps.event.removeListener(I),M(google.maps.event.addListener(E,Yfe.onClusteringEnd,w)))}),[w]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==E&&Xfe.averageCenter(E,i)}),[E,i]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==E&&Xfe.batchSizeIE(E,a)}),[E,a]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==E&&Xfe.calculator(E,s)}),[E,s]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==E&&Xfe.clusterClass(E,o)}),[E,o]),(0,t.useEffect)((()=>{"undefined"!==typeof l&&null!==E&&Xfe.enableRetinaIcons(E,l)}),[E,l]),(0,t.useEffect)((()=>{"undefined"!==typeof c&&null!==E&&Xfe.gridSize(E,c)}),[E,c]),(0,t.useEffect)((()=>{"undefined"!==typeof u&&null!==E&&Xfe.ignoreHidden(E,u)}),[E,u]),(0,t.useEffect)((()=>{"undefined"!==typeof d&&null!==E&&Xfe.imageExtension(E,d)}),[E,d]),(0,t.useEffect)((()=>{"undefined"!==typeof h&&null!==E&&Xfe.imagePath(E,h)}),[E,h]),(0,t.useEffect)((()=>{"undefined"!==typeof p&&null!==E&&Xfe.imageSizes(E,p)}),[E,p]),(0,t.useEffect)((()=>{"undefined"!==typeof f&&null!==E&&Xfe.maxZoom(E,f)}),[E,f]),(0,t.useEffect)((()=>{"undefined"!==typeof m&&null!==E&&Xfe.minimumClusterSize(E,m)}),[E,m]),(0,t.useEffect)((()=>{"undefined"!==typeof g&&null!==E&&Xfe.styles(E,g)}),[E,g]),(0,t.useEffect)((()=>{"undefined"!==typeof v&&null!==E&&Xfe.title(E,v)}),[E,v]),(0,t.useEffect)((()=>{"undefined"!==typeof x&&null!==E&&Xfe.zoomOnClick(E,x)}),[E,x]),(0,t.useEffect)((()=>{if(N){var e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zfe(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zfe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n||Qfe),t=new Kfe(N,[],e);return i&&Xfe.averageCenter(t,i),a&&Xfe.batchSizeIE(t,a),s&&Xfe.calculator(t,s),o&&Xfe.clusterClass(t,o),l&&Xfe.enableRetinaIcons(t,l),c&&Xfe.gridSize(t,c),u&&Xfe.ignoreHidden(t,u),d&&Xfe.imageExtension(t,d),h&&Xfe.imagePath(t,h),p&&Xfe.imageSizes(t,p),f&&Xfe.maxZoom(t,f),m&&Xfe.minimumClusterSize(t,m),g&&Xfe.styles(t,g),v&&Xfe.title(t,v),x&&Xfe.zoomOnClick(t,x),k&&R(google.maps.event.addListener(t,Yfe.onMouseOut,k)),_&&F(google.maps.event.addListener(t,Yfe.onMouseOver,_)),y&&P(google.maps.event.addListener(t,Yfe.onClick,y)),b&&M(google.maps.event.addListener(t,Yfe.onClusteringBegin,b)),w&&O(google.maps.event.addListener(t,Yfe.onClusteringEnd,w)),C(t),S&&S(t),()=>{null!==D&&google.maps.event.removeListener(D),null!==L&&google.maps.event.removeListener(L),null!==T&&google.maps.event.removeListener(T),null!==A&&google.maps.event.removeListener(A),null!==I&&google.maps.event.removeListener(I),j&&j(t)}}}),[]),null!==E&&r(E)||null}));class Jfe extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{markerClusterer:null}),Zpe(this,"setClustererCallback",(()=>{null!==this.state.markerClusterer&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)}))}componentDidMount(){if(this.context){var e=new Kfe(this.context,[],this.props.options);this.registeredEvents=sfe({updaterMap:Xfe,eventMap:Yfe,prevProps:{},nextProps:this.props,instance:e}),this.setState((()=>({markerClusterer:e})),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:Xfe,eventMap:Yfe,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),afe(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null}}function eme(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}Zpe(Jfe,"contextType",tfe);var tme=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"===typeof t.visible&&("undefined"===typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"===typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var r=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-r.left-r.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var n=0,i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];n<i.length;n++){var a=i[n];this.eventListeners.push(google.maps.event.addListener(this.div,a,eme))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",(function(){e.div&&(e.div.style.cursor="default")})))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",(function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||eme(t)})),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var r=0,n=0,i=t.getBounds();i&&!i.contains(this.position)&&t.setCenter(this.position);var a=t.getDiv(),s=a.offsetWidth,o=a.offsetHeight,l=this.pixelOffset.width,c=this.pixelOffset.height,u=this.div.offsetWidth,d=this.div.offsetHeight,h=this.infoBoxClearance.width,p=this.infoBoxClearance.height,f=this.getProjection().fromLatLngToContainerPixel(this.position);null!==f&&(f.x<-l+h?r=f.x+l-h:f.x+u+l+h>s&&(r=f.x+u+l+h-s),this.alignBottom?f.y<-c+p+d?n=f.y+c-p-d:f.y+c+p>o&&(n=f.y+c+p-o):f.y<-c+p?n=f.y+c-p:f.y+d+c+p>o&&(n=f.y+d+c+p-o)),0===r&&0===n||t.panBy(r,n)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)","undefined"!==typeof this.div.style.opacity&&""!==this.div.style.opacity){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*r+')"',this.div.style.filter="alpha(opacity="+100*r+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,r=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var n=this.div.currentStyle;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),"undefined"!==typeof e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),"undefined"!==typeof e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),"undefined"!==typeof e.content&&this.setContent(e.content),"undefined"!==typeof e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),"undefined"!==typeof e.maxWidth&&(this.maxWidth=e.maxWidth),"undefined"!==typeof e.pixelOffset&&(this.pixelOffset=e.pixelOffset),"undefined"!==typeof e.alignBottom&&(this.alignBottom=e.alignBottom),"undefined"!==typeof e.position&&this.setPosition(e.position),"undefined"!==typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!==typeof e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),"undefined"!==typeof e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),"undefined"!==typeof e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),"undefined"!==typeof e.isHidden&&(this.isHidden=e.isHidden),"undefined"!==typeof e.visible&&(this.isHidden=!e.visible),"undefined"!==typeof e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return"undefined"!==typeof e&&null!==e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var r=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",(function(){var e=t.getPosition();r.setPosition(e)})),this.mapListener=google.maps.event.addListener(t,"map_changed",(function(){r.setMap(t.map)}))),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var r=t[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),rme=["position"],nme=["position"];function ime(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ame(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ime(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ime(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var sme={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},ome={options(e,t){e.setOptions(t)},position(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},lme={};var cme,ume;(0,t.memo)((function(e){var{children:r,anchor:n,options:i,position:a,zIndex:s,onCloseClick:o,onDomReady:l,onContentChanged:c,onPositionChanged:u,onZindexChanged:d,onLoad:h,onUnmount:p}=e,f=(0,t.useContext)(tfe),[m,g]=(0,t.useState)(null),[v,x]=(0,t.useState)(null),[y,b]=(0,t.useState)(null),[w,_]=(0,t.useState)(null),[k,S]=(0,t.useState)(null),[j,E]=(0,t.useState)(null),C=(0,t.useRef)(null);return(0,t.useEffect)((()=>{f&&null!==m&&(m.close(),n?m.open(f,n):m.getPosition()&&m.open(f))}),[f,m,n]),(0,t.useEffect)((()=>{i&&null!==m&&m.setOptions(i)}),[m,i]),(0,t.useEffect)((()=>{if(a&&null!==m){var e=a instanceof google.maps.LatLng?a:new google.maps.LatLng(a.lat,a.lng);m.setPosition(e)}}),[a]),(0,t.useEffect)((()=>{"number"===typeof s&&null!==m&&m.setZIndex(s)}),[s]),(0,t.useEffect)((()=>{m&&o&&(null!==v&&google.maps.event.removeListener(v),x(google.maps.event.addListener(m,"closeclick",o)))}),[o]),(0,t.useEffect)((()=>{m&&l&&(null!==y&&google.maps.event.removeListener(y),b(google.maps.event.addListener(m,"domready",l)))}),[l]),(0,t.useEffect)((()=>{m&&c&&(null!==w&&google.maps.event.removeListener(w),_(google.maps.event.addListener(m,"content_changed",c)))}),[c]),(0,t.useEffect)((()=>{m&&u&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(m,"position_changed",u)))}),[u]),(0,t.useEffect)((()=>{m&&d&&(null!==j&&google.maps.event.removeListener(j),E(google.maps.event.addListener(m,"zindex_changed",d)))}),[d]),(0,t.useEffect)((()=>{if(f){var e,t=i||lme,{position:r}=t,a=_fe(t,rme);!r||r instanceof google.maps.LatLng||(e=new google.maps.LatLng(r.lat,r.lng));var s=new tme(ame(ame({},a),e?{position:e}:{}));C.current=document.createElement("div"),g(s),o&&x(google.maps.event.addListener(s,"closeclick",o)),l&&b(google.maps.event.addListener(s,"domready",l)),c&&_(google.maps.event.addListener(s,"content_changed",c)),u&&S(google.maps.event.addListener(s,"position_changed",u)),d&&E(google.maps.event.addListener(s,"zindex_changed",d)),s.setContent(C.current),n?s.open(f,n):s.getPosition()?s.open(f):efe(!1,"You must provide either an anchor or a position prop for <InfoBox>."),h&&h(s)}return()=>{null!==m&&(v&&google.maps.event.removeListener(v),w&&google.maps.event.removeListener(w),y&&google.maps.event.removeListener(y),k&&google.maps.event.removeListener(k),j&&google.maps.event.removeListener(j),p&&p(m),m.close())}}),[]),C.current?(0,ci.createPortal)(t.Children.only(r),C.current):null}));class dme extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"containerElement",null),Zpe(this,"state",{infoBox:null}),Zpe(this,"open",((e,t)=>{t?null!==this.context&&e.open(this.context,t):e.getPosition()?null!==this.context&&e.open(this.context):efe(!1,"You must provide either an anchor or a position prop for <InfoBox>.")})),Zpe(this,"setInfoBoxCallback",(()=>{null!==this.state.infoBox&&null!==this.containerElement&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))}))}componentDidMount(){var e,t=this.props.options||{},{position:r}=t,n=_fe(t,nme);!r||r instanceof google.maps.LatLng||(e=new google.maps.LatLng(r.lat,r.lng));var i=new tme(ame(ame({},n),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=sfe({updaterMap:ome,eventMap:sme,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;null!==t&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:ome,eventMap:sme,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;null!==t&&(e&&e(t),afe(this.registeredEvents),t.close())}render(){return this.containerElement?(0,ci.createPortal)(t.Children.only(this.props.children),this.containerElement):null}}Zpe(dme,"contextType",tfe);var hme=(ume||(ume=1,cme=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;0!==i--;){var s=a[i];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r}),cme),pme=Ype(hme),fme=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class mme{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,r]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");var n=r>>4;if(1!==n)throw new Error("Got v".concat(n," data when expected v").concat(1,"."));var i=fme[15&r];if(!i)throw new Error("Unrecognized array type.");var[a]=new Uint16Array(e,2,1),[s]=new Uint32Array(e,4,1);return new mme(s,a,i,e)}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,n=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var i=fme.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,o=(8-s%8)%8;if(i<0)throw new Error("Unexpected typed array class: ".concat(r,"."));n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+o,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+s+o),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+o,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return gme(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:a,nodeSize:s}=this,o=[0,i.length-1,0],l=[];o.length;){var c=o.pop()||0,u=o.pop()||0,d=o.pop()||0;if(u-d<=s)for(var h=d;h<=u;h++){var p=a[2*h],f=a[2*h+1];p>=e&&p<=r&&f>=t&&f<=n&&l.push(i[h])}else{var m=d+u>>1,g=a[2*m],v=a[2*m+1];g>=e&&g<=r&&v>=t&&v<=n&&l.push(i[m]),(0===c?e<=g:t<=v)&&(o.push(d),o.push(m-1),o.push(1-c)),(0===c?r>=g:n>=v)&&(o.push(m+1),o.push(u),o.push(1-c))}}return l}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:n,coords:i,nodeSize:a}=this,s=[0,n.length-1,0],o=[],l=r*r;s.length;){var c=s.pop()||0,u=s.pop()||0,d=s.pop()||0;if(u-d<=a)for(var h=d;h<=u;h++)bme(i[2*h],i[2*h+1],e,t)<=l&&o.push(n[h]);else{var p=d+u>>1,f=i[2*p],m=i[2*p+1];bme(f,m,e,t)<=l&&o.push(n[p]),(0===c?e-r<=f:t-r<=m)&&(s.push(d),s.push(p-1),s.push(1-c)),(0===c?e+r>=f:t+r>=m)&&(s.push(p+1),s.push(u),s.push(1-c))}}return o}}function gme(e,t,r,n,i,a){if(!(i-n<=r)){var s=n+i>>1;vme(e,t,s,n,i,a),gme(e,t,r,n,s-1,1-a),gme(e,t,r,s+1,i,1-a)}}function vme(e,t,r,n,i,a){for(;i>n;){if(i-n>600){var s=i-n+1,o=r-n+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(o-s/2<0?-1:1);vme(e,t,r,Math.max(n,Math.floor(r-o*c/s+u)),Math.min(i,Math.floor(r+(s-o)*c/s+u)),a)}var d=t[2*r+a],h=n,p=i;for(xme(e,t,n,r),t[2*i+a]>d&&xme(e,t,n,i);h<p;){for(xme(e,t,h,p),h++,p--;t[2*h+a]<d;)h++;for(;t[2*p+a]>d;)p--}t[2*n+a]===d?xme(e,t,n,p):xme(e,t,++p,i),p<=r&&(n=p+1),r<=p&&(i=p-1)}}function xme(e,t,r,n){yme(e,r,n),yme(t,2*r,2*n),yme(t,2*r+1,2*n+1)}function yme(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bme(e,t,r,n){var i=e-r,a=t-n;return i*i+a*a}var wme,_me={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},kme=Math.fround||(wme=new Float32Array(1),e=>(wme[0]=+e,wme[0]));class Sme{constructor(e){this.options=Object.assign(Object.create(_me),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:r,maxZoom:n}=this.options;t&&console.time("total time");var i="prepare ".concat(e.length," points");t&&console.time(i),this.points=e;for(var a=[],s=0;s<e.length;s++){var o=e[s];if(o.geometry){var[l,c]=o.geometry.coordinates,u=kme(Cme(l)),d=kme(Nme(c));a.push(u,d,1/0,s,-1,1),this.options.reduce&&a.push(0)}}var h=this.trees[n+1]=this._createTree(a);t&&console.timeEnd(i);for(var p=n;p>=r;p--){var f=+Date.now();h=this.trees[p]=this._createTree(this._cluster(h,p)),t&&console.log("z%d: %d clusters in %dms",p,h.numItems,+Date.now()-f)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var r=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){var s=this.getClusters([r,n,180,a],t),o=this.getClusters([-180,n,i,a],t);return s.concat(o)}var l=this.trees[this._limitZoom(t)],c=l.range(Cme(r),Nme(a),Cme(i),Nme(n)),u=l.data,d=[];for(var h of c){var p=this.stride*h;d.push(u[p+5]>1?jme(u,p,this.clusterProps):this.points[u[p+3]])}return d}getChildren(e){var t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);var a=i.data;if(t*this.stride>=a.length)throw new Error(n);var s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),o=a[t*this.stride],l=a[t*this.stride+1],c=i.within(o,l,s),u=[];for(var d of c){var h=d*this.stride;a[h+4]===e&&u.push(a[h+5]>1?jme(a,h,this.clusterProps):this.points[a[h+3]])}if(0===u.length)throw new Error(n);return u}getLeaves(e,t,r){t=t||10,r=r||0;var n=[];return this._appendLeaves(n,e,t,r,0),n}getTile(e,t,r){var n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:a,radius:s}=this.options,o=s/a,l=(r-o)/i,c=(r+1+o)/i,u={features:[]};return this._addTileFeatures(n.range((t-o)/i,l,(t+1+o)/i,c),n.data,t,r,i,u),0===t&&this._addTileFeatures(n.range(1-o/i,l,1,c),n.data,i,r,i,u),t===i-1&&this._addTileFeatures(n.range(0,l,o/i,c),n.data,-1,r,i,u),u.features.length?u:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,n,i){var a=this.getChildren(t);for(var s of a){var o=s.properties;if(o&&o.cluster?i+o.point_count<=n?i+=o.point_count:i=this._appendLeaves(e,o.cluster_id,r,n,i):i<n?i++:e.push(s),e.length===r)break}return i}_createTree(e){for(var t=new mme(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)t.add(e[r],e[r+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,r,n,i,a){for(var s of e){var o=s*this.stride,l=t[o+5]>1,c=void 0,u=void 0,d=void 0;if(l)c=Eme(t,o,this.clusterProps),u=t[o],d=t[o+1];else{var h=this.points[t[o+3]];c=h.properties;var[p,f]=h.geometry.coordinates;u=Cme(p),d=Nme(f)}var m={type:1,geometry:[[Math.round(this.options.extent*(u*i-r)),Math.round(this.options.extent*(d*i-n))]],tags:c},g=void 0;void 0!==(g=l||this.options.generateId?t[o+3]:this.points[t[o+3]].id)&&(m.id=g),a.features.push(m)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:r,extent:n,reduce:i,minPoints:a}=this.options,s=r/(n*Math.pow(2,t)),o=e.data,l=[],c=this.stride,u=0;u<o.length;u+=c)if(!(o[u+2]<=t)){o[u+2]=t;var d=o[u],h=o[u+1],p=e.within(o[u],o[u+1],s),f=o[u+5],m=f;for(var g of p){var v=g*c;o[v+2]>t&&(m+=o[v+5])}if(m>f&&m>=a){var x=d*f,y=h*f,b=void 0,w=-1,_=(u/c<<5)+(t+1)+this.points.length;for(var k of p){var S=k*c;if(!(o[S+2]<=t)){o[S+2]=t;var j=o[S+5];x+=o[S]*j,y+=o[S+1]*j,o[S+4]=_,i&&(b||(b=this._map(o,u,!0),w=this.clusterProps.length,this.clusterProps.push(b)),i(b,this._map(o,S)))}}o[u+4]=_,l.push(x/m,y/m,1/0,_,-1,m),i&&l.push(w)}else{for(var E=0;E<c;E++)l.push(o[u+E]);if(m>1)for(var C of p){var N=C*c;if(!(o[N+2]<=t)){o[N+2]=t;for(var T=0;T<c;T++)l.push(o[N+T])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+5]>1){var n=this.clusterProps[e[t+6]];return r?Object.assign({},n):n}var i=this.points[e[t+3]].properties,a=this.options.map(i);return r&&a===i?Object.assign({},a):a}}function jme(e,t,r){return{type:"Feature",id:e[t+3],properties:Eme(e,t,r),geometry:{type:"Point",coordinates:[Tme(e[t]),Pme(e[t+1])]}}}function Eme(e,t,r){var n=e[t+5],i=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?"".concat(Math.round(n/100)/10,"k"):n,a=e[t+6],s=-1===a?{}:Object.assign({},r[a]);return Object.assign(s,{cluster:!0,cluster_id:e[t+3],point_count:n,point_count_abbreviated:i})}function Cme(e){return e/360+.5}function Nme(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Tme(e){return 360*(e-.5)}function Pme(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function Ame(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}class Mme{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class Ime{constructor(e){var{markers:t,position:r}=e;this.markers=t,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(0!==this.markers.length||this._position){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(Mme.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>Mme.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&(Mme.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Ome{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return Rme(t)}}var Dme,Rme=e=>e.map((e=>new Ime({position:Mme.getPosition(e),markers:[e]})));class Lme extends Ome{constructor(e){var{maxZoom:t,radius:r=60}=e,n=Ame(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new Sme(Object.assign({maxZoom:this.maxZoom,radius:r},n))}calculate(e){var t=!1,r={zoom:e.map.getZoom()};if(!pme(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var n=this.markers.map((e=>{var t=Mme.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(n)}return t||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(t=!pme(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map((e=>this.transformCluster(e)))}transformCluster(e){var{geometry:{coordinates:[t,r]},properties:n}=e;if(n.cluster)return new Ime({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:r,lng:t}});var i=n.marker;return new Ime({markers:[i],position:Mme.getPosition(i)})}}class Fme{constructor(e,t){this.markers={sum:e.length};var r=t.map((e=>e.count)),n=r.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:n/t.length,sum:n,min:Math.min(...r),max:Math.max(...r)}}}}class $me{render(e,t,r){var{count:n,position:i}=e,a=n>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",s='<svg fill="'.concat(a,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(n,"</text>\n</svg>"),o="Cluster of ".concat(n," markers"),l=Number(google.maps.Marker.MAX_ZINDEX)+n;if(Mme.isAdvancedMarkerAvailable(r)){var c=(new DOMParser).parseFromString(s,"image/svg+xml").documentElement;c.setAttribute("transform","translate(0 25)");var u={map:r,position:i,zIndex:l,title:o,content:c};return new google.maps.marker.AdvancedMarkerElement(u)}var d={position:i,zIndex:l,title:o,icon:{url:"data:image/svg+xml;base64,".concat(btoa(s)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(d)}}class Bme{constructor(){!function(e,t){for(var r in t.prototype)e.prototype[r]=t.prototype[r]}(Bme,google.maps.OverlayView)}}!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(Dme||(Dme={}));var zme=(e,t,r)=>{r.fitBounds(t.bounds)};class Ume extends Bme{constructor(e){var{map:t,markers:r=[],algorithmOptions:n={},algorithm:i=new Lme(n),renderer:a=new $me,onClusterClick:s=zme}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=i,this.renderer=a,this.onClusterClick=s,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){var r=this.markers.indexOf(e);return-1!==r&&(Mme.setMap(e,null),this.markers.splice(r,1),t||this.render(),!0)}removeMarkers(e,t){var r=!1;return e.forEach((e=>{r=this.removeMarker(e,!0)||r})),r&&!t&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Dme.CLUSTERING_BEGIN,this);var{clusters:t,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||void 0==r){var n=new Set;for(var i of t)1==i.markers.length&&n.add(i.markers[0]);var a=[];for(var s of this.clusters)null!=s.marker&&(1==s.markers.length?n.has(s.marker)||Mme.setMap(s.marker,null):a.push(s.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>a.forEach((e=>Mme.setMap(e,null)))))}google.maps.event.trigger(this,Dme.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>Mme.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){var e=new Fme(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((r=>{1===r.markers.length?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,t),r.markers.forEach((e=>Mme.setMap(e,null))),this.onClusterClick&&r.marker.addListener("click",(e=>{google.maps.event.trigger(this,Dme.CLUSTER_CLICK,r),this.onClusterClick(e,r,t)}))),Mme.setMap(r.marker,t)}))}}function Vme(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hme(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vme(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vme(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gme(e){var r=function(){efe(!!t.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=(0,t.useContext)(tfe);return efe(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),[n,i]=(0,t.useState)(null);return(0,t.useEffect)((()=>{if(r&&null===n){var t=new Ume(Hme(Hme({},e),{},{map:r}));i(t)}}),[r]),n}(0,t.memo)((function(e){var{children:t,options:r}=e,n=Gme(r);return null!==n?t(n):null}));var Wme={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},qme={options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},zIndex(e,t){e.setZIndex(t)}};(0,t.memo)((function(e){var{children:r,anchor:n,options:i,position:a,zIndex:s,onCloseClick:o,onDomReady:l,onContentChanged:c,onPositionChanged:u,onZindexChanged:d,onLoad:h,onUnmount:p}=e,f=(0,t.useContext)(tfe),[m,g]=(0,t.useState)(null),[v,x]=(0,t.useState)(null),[y,b]=(0,t.useState)(null),[w,_]=(0,t.useState)(null),[k,S]=(0,t.useState)(null),[j,E]=(0,t.useState)(null),C=(0,t.useRef)(null);return(0,t.useEffect)((()=>{null!==m&&(m.close(),n?m.open(f,n):m.getPosition()&&m.open(f))}),[f,m,n]),(0,t.useEffect)((()=>{i&&null!==m&&m.setOptions(i)}),[m,i]),(0,t.useEffect)((()=>{a&&null!==m&&m.setPosition(a)}),[a]),(0,t.useEffect)((()=>{"number"===typeof s&&null!==m&&m.setZIndex(s)}),[s]),(0,t.useEffect)((()=>{m&&o&&(null!==v&&google.maps.event.removeListener(v),x(google.maps.event.addListener(m,"closeclick",o)))}),[o]),(0,t.useEffect)((()=>{m&&l&&(null!==y&&google.maps.event.removeListener(y),b(google.maps.event.addListener(m,"domready",l)))}),[l]),(0,t.useEffect)((()=>{m&&c&&(null!==w&&google.maps.event.removeListener(w),_(google.maps.event.addListener(m,"content_changed",c)))}),[c]),(0,t.useEffect)((()=>{m&&u&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(m,"position_changed",u)))}),[u]),(0,t.useEffect)((()=>{m&&d&&(null!==j&&google.maps.event.removeListener(j),E(google.maps.event.addListener(m,"zindex_changed",d)))}),[d]),(0,t.useEffect)((()=>{var e=new google.maps.InfoWindow(i);return g(e),C.current=document.createElement("div"),o&&x(google.maps.event.addListener(e,"closeclick",o)),l&&b(google.maps.event.addListener(e,"domready",l)),c&&_(google.maps.event.addListener(e,"content_changed",c)),u&&S(google.maps.event.addListener(e,"position_changed",u)),d&&E(google.maps.event.addListener(e,"zindex_changed",d)),e.setContent(C.current),a&&e.setPosition(a),s&&e.setZIndex(s),n?e.open(f,n):e.getPosition()?e.open(f):efe(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),h&&h(e),()=>{v&&google.maps.event.removeListener(v),w&&google.maps.event.removeListener(w),y&&google.maps.event.removeListener(y),k&&google.maps.event.removeListener(k),j&&google.maps.event.removeListener(j),p&&p(e),e.close()}}),[]),C.current?(0,ci.createPortal)(t.Children.only(r),C.current):null}));class Kme extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"containerElement",null),Zpe(this,"state",{infoWindow:null}),Zpe(this,"open",((e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):efe(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")})),Zpe(this,"setInfoWindowCallback",(()=>{null!==this.state.infoWindow&&null!==this.containerElement&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))}))}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=sfe({updaterMap:qme,eventMap:Wme,prevProps:{},nextProps:this.props,instance:e}),this.setState((()=>({infoWindow:e})),this.setInfoWindowCallback)}componentDidUpdate(e){null!==this.state.infoWindow&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:qme,eventMap:Wme,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){null!==this.state.infoWindow&&(afe(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?(0,ci.createPortal)(t.Children.only(this.props.children),this.containerElement):null}}function Zme(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yme(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zme(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zme(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(Kme,"contextType",tfe);var Xme={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Qme={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},visible(e,t){e.setVisible(t)}},Jme={};(0,t.memo)((function(e){var{options:r,draggable:n,editable:i,visible:a,path:s,onDblClick:o,onDragEnd:l,onDragStart:c,onMouseDown:u,onMouseMove:d,onMouseOut:h,onMouseOver:p,onMouseUp:f,onRightClick:m,onClick:g,onDrag:v,onLoad:x,onUnmount:y}=e,b=(0,t.useContext)(tfe),[w,_]=(0,t.useState)(null),[k,S]=(0,t.useState)(null),[j,E]=(0,t.useState)(null),[C,N]=(0,t.useState)(null),[T,P]=(0,t.useState)(null),[A,M]=(0,t.useState)(null),[I,O]=(0,t.useState)(null),[D,R]=(0,t.useState)(null),[L,F]=(0,t.useState)(null),[$,B]=(0,t.useState)(null),[z,U]=(0,t.useState)(null),[V,H]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==w&&w.setMap(b)}),[b]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==w&&w.setOptions(r)}),[w,r]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==w&&w.setDraggable(n)}),[w,n]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==w&&w.setEditable(i)}),[w,i]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==w&&w.setVisible(a)}),[w,a]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==w&&w.setPath(s)}),[w,s]),(0,t.useEffect)((()=>{w&&o&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(w,"dblclick",o)))}),[o]),(0,t.useEffect)((()=>{w&&l&&(null!==j&&google.maps.event.removeListener(j),E(google.maps.event.addListener(w,"dragend",l)))}),[l]),(0,t.useEffect)((()=>{w&&c&&(null!==C&&google.maps.event.removeListener(C),N(google.maps.event.addListener(w,"dragstart",c)))}),[c]),(0,t.useEffect)((()=>{w&&u&&(null!==T&&google.maps.event.removeListener(T),P(google.maps.event.addListener(w,"mousedown",u)))}),[u]),(0,t.useEffect)((()=>{w&&d&&(null!==A&&google.maps.event.removeListener(A),M(google.maps.event.addListener(w,"mousemove",d)))}),[d]),(0,t.useEffect)((()=>{w&&h&&(null!==I&&google.maps.event.removeListener(I),O(google.maps.event.addListener(w,"mouseout",h)))}),[h]),(0,t.useEffect)((()=>{w&&p&&(null!==D&&google.maps.event.removeListener(D),R(google.maps.event.addListener(w,"mouseover",p)))}),[p]),(0,t.useEffect)((()=>{w&&f&&(null!==L&&google.maps.event.removeListener(L),F(google.maps.event.addListener(w,"mouseup",f)))}),[f]),(0,t.useEffect)((()=>{w&&m&&(null!==$&&google.maps.event.removeListener($),B(google.maps.event.addListener(w,"rightclick",m)))}),[m]),(0,t.useEffect)((()=>{w&&g&&(null!==z&&google.maps.event.removeListener(z),U(google.maps.event.addListener(w,"click",g)))}),[g]),(0,t.useEffect)((()=>{w&&v&&(null!==V&&google.maps.event.removeListener(V),H(google.maps.event.addListener(w,"drag",v)))}),[v]),(0,t.useEffect)((()=>{var e=new google.maps.Polyline(Yme(Yme({},r||Jme),{},{map:b}));return s&&e.setPath(s),"undefined"!==typeof a&&e.setVisible(a),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof n&&e.setDraggable(n),o&&S(google.maps.event.addListener(e,"dblclick",o)),l&&E(google.maps.event.addListener(e,"dragend",l)),c&&N(google.maps.event.addListener(e,"dragstart",c)),u&&P(google.maps.event.addListener(e,"mousedown",u)),d&&M(google.maps.event.addListener(e,"mousemove",d)),h&&O(google.maps.event.addListener(e,"mouseout",h)),p&&R(google.maps.event.addListener(e,"mouseover",p)),f&&F(google.maps.event.addListener(e,"mouseup",f)),m&&B(google.maps.event.addListener(e,"rightclick",m)),g&&U(google.maps.event.addListener(e,"click",g)),v&&H(google.maps.event.addListener(e,"drag",v)),_(e),x&&x(e),()=>{null!==k&&google.maps.event.removeListener(k),null!==j&&google.maps.event.removeListener(j),null!==C&&google.maps.event.removeListener(C),null!==T&&google.maps.event.removeListener(T),null!==A&&google.maps.event.removeListener(A),null!==I&&google.maps.event.removeListener(I),null!==D&&google.maps.event.removeListener(D),null!==L&&google.maps.event.removeListener(L),null!==$&&google.maps.event.removeListener($),null!==z&&google.maps.event.removeListener(z),y&&y(e),e.setMap(null)}}),[]),null}));class ege extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{polyline:null}),Zpe(this,"setPolylineCallback",(()=>{null!==this.state.polyline&&this.props.onLoad&&this.props.onLoad(this.state.polyline)}))}componentDidMount(){var e=new google.maps.Polyline(Yme(Yme({},this.props.options),{},{map:this.context}));this.registeredEvents=sfe({updaterMap:Qme,eventMap:Xme,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polyline:e}}),this.setPolylineCallback)}componentDidUpdate(e){null!==this.state.polyline&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:Qme,eventMap:Xme,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),afe(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}function tge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tge(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(ege,"contextType",tfe);var nge={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},ige={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},paths(e,t){e.setPaths(t)},visible(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var{options:r,draggable:n,editable:i,visible:a,path:s,paths:o,onDblClick:l,onDragEnd:c,onDragStart:u,onMouseDown:d,onMouseMove:h,onMouseOut:p,onMouseOver:f,onMouseUp:m,onRightClick:g,onClick:v,onDrag:x,onLoad:y,onUnmount:b,onEdit:w}=e,_=(0,t.useContext)(tfe),[k,S]=(0,t.useState)(null),[j,E]=(0,t.useState)(null),[C,N]=(0,t.useState)(null),[T,P]=(0,t.useState)(null),[A,M]=(0,t.useState)(null),[I,O]=(0,t.useState)(null),[D,R]=(0,t.useState)(null),[L,F]=(0,t.useState)(null),[$,B]=(0,t.useState)(null),[z,U]=(0,t.useState)(null),[V,H]=(0,t.useState)(null),[G,W]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==k&&k.setMap(_)}),[_]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==k&&k.setOptions(r)}),[k,r]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==k&&k.setDraggable(n)}),[k,n]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==k&&k.setEditable(i)}),[k,i]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==k&&k.setVisible(a)}),[k,a]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==k&&k.setPath(s)}),[k,s]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==k&&k.setPaths(o)}),[k,o]),(0,t.useEffect)((()=>{k&&"function"===typeof l&&(null!==j&&google.maps.event.removeListener(j),E(google.maps.event.addListener(k,"dblclick",l)))}),[l]),(0,t.useEffect)((()=>{k&&(google.maps.event.addListener(k.getPath(),"insert_at",(()=>{null===w||void 0===w||w(k)})),google.maps.event.addListener(k.getPath(),"set_at",(()=>{null===w||void 0===w||w(k)})),google.maps.event.addListener(k.getPath(),"remove_at",(()=>{null===w||void 0===w||w(k)})))}),[k,w]),(0,t.useEffect)((()=>{k&&"function"===typeof c&&(null!==C&&google.maps.event.removeListener(C),N(google.maps.event.addListener(k,"dragend",c)))}),[c]),(0,t.useEffect)((()=>{k&&"function"===typeof u&&(null!==T&&google.maps.event.removeListener(T),P(google.maps.event.addListener(k,"dragstart",u)))}),[u]),(0,t.useEffect)((()=>{k&&"function"===typeof d&&(null!==A&&google.maps.event.removeListener(A),M(google.maps.event.addListener(k,"mousedown",d)))}),[d]),(0,t.useEffect)((()=>{k&&"function"===typeof h&&(null!==I&&google.maps.event.removeListener(I),O(google.maps.event.addListener(k,"mousemove",h)))}),[h]),(0,t.useEffect)((()=>{k&&"function"===typeof p&&(null!==D&&google.maps.event.removeListener(D),R(google.maps.event.addListener(k,"mouseout",p)))}),[p]),(0,t.useEffect)((()=>{k&&"function"===typeof f&&(null!==L&&google.maps.event.removeListener(L),F(google.maps.event.addListener(k,"mouseover",f)))}),[f]),(0,t.useEffect)((()=>{k&&"function"===typeof m&&(null!==$&&google.maps.event.removeListener($),B(google.maps.event.addListener(k,"mouseup",m)))}),[m]),(0,t.useEffect)((()=>{k&&"function"===typeof g&&(null!==z&&google.maps.event.removeListener(z),U(google.maps.event.addListener(k,"rightclick",g)))}),[g]),(0,t.useEffect)((()=>{k&&"function"===typeof v&&(null!==V&&google.maps.event.removeListener(V),H(google.maps.event.addListener(k,"click",v)))}),[v]),(0,t.useEffect)((()=>{k&&"function"===typeof x&&(null!==G&&google.maps.event.removeListener(G),W(google.maps.event.addListener(k,"drag",x)))}),[x]),(0,t.useEffect)((()=>{var e=new google.maps.Polygon(rge(rge({},r),{},{map:_}));return s&&e.setPath(s),o&&e.setPaths(o),"undefined"!==typeof a&&e.setVisible(a),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof n&&e.setDraggable(n),l&&E(google.maps.event.addListener(e,"dblclick",l)),c&&N(google.maps.event.addListener(e,"dragend",c)),u&&P(google.maps.event.addListener(e,"dragstart",u)),d&&M(google.maps.event.addListener(e,"mousedown",d)),h&&O(google.maps.event.addListener(e,"mousemove",h)),p&&R(google.maps.event.addListener(e,"mouseout",p)),f&&F(google.maps.event.addListener(e,"mouseover",f)),m&&B(google.maps.event.addListener(e,"mouseup",m)),g&&U(google.maps.event.addListener(e,"rightclick",g)),v&&H(google.maps.event.addListener(e,"click",v)),x&&W(google.maps.event.addListener(e,"drag",x)),S(e),y&&y(e),()=>{null!==j&&google.maps.event.removeListener(j),null!==C&&google.maps.event.removeListener(C),null!==T&&google.maps.event.removeListener(T),null!==A&&google.maps.event.removeListener(A),null!==I&&google.maps.event.removeListener(I),null!==D&&google.maps.event.removeListener(D),null!==L&&google.maps.event.removeListener(L),null!==$&&google.maps.event.removeListener($),null!==z&&google.maps.event.removeListener(z),null!==V&&google.maps.event.removeListener(V),b&&b(e),e.setMap(null)}}),[]),null}));class age extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=sfe({updaterMap:ige,eventMap:nge,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:ige,eventMap:nge,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),afe(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}function sge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sge(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(age,"contextType",tfe);var lge={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},cge={bounds(e,t){e.setBounds(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},visible(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var{options:r,bounds:n,draggable:i,editable:a,visible:s,onDblClick:o,onDragEnd:l,onDragStart:c,onMouseDown:u,onMouseMove:d,onMouseOut:h,onMouseOver:p,onMouseUp:f,onRightClick:m,onClick:g,onDrag:v,onBoundsChanged:x,onLoad:y,onUnmount:b}=e,w=(0,t.useContext)(tfe),[_,k]=(0,t.useState)(null),[S,j]=(0,t.useState)(null),[E,C]=(0,t.useState)(null),[N,T]=(0,t.useState)(null),[P,A]=(0,t.useState)(null),[M,I]=(0,t.useState)(null),[O,D]=(0,t.useState)(null),[R,L]=(0,t.useState)(null),[F,$]=(0,t.useState)(null),[B,z]=(0,t.useState)(null),[U,V]=(0,t.useState)(null),[H,G]=(0,t.useState)(null),[W,q]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==_&&_.setMap(w)}),[w]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==_&&_.setOptions(r)}),[_,r]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==_&&_.setDraggable(i)}),[_,i]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==_&&_.setEditable(a)}),[_,a]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==_&&_.setVisible(s)}),[_,s]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==_&&_.setBounds(n)}),[_,n]),(0,t.useEffect)((()=>{_&&o&&(null!==S&&google.maps.event.removeListener(S),j(google.maps.event.addListener(_,"dblclick",o)))}),[o]),(0,t.useEffect)((()=>{_&&l&&(null!==E&&google.maps.event.removeListener(E),C(google.maps.event.addListener(_,"dragend",l)))}),[l]),(0,t.useEffect)((()=>{_&&c&&(null!==N&&google.maps.event.removeListener(N),T(google.maps.event.addListener(_,"dragstart",c)))}),[c]),(0,t.useEffect)((()=>{_&&u&&(null!==P&&google.maps.event.removeListener(P),A(google.maps.event.addListener(_,"mousedown",u)))}),[u]),(0,t.useEffect)((()=>{_&&d&&(null!==M&&google.maps.event.removeListener(M),I(google.maps.event.addListener(_,"mousemove",d)))}),[d]),(0,t.useEffect)((()=>{_&&h&&(null!==O&&google.maps.event.removeListener(O),D(google.maps.event.addListener(_,"mouseout",h)))}),[h]),(0,t.useEffect)((()=>{_&&p&&(null!==R&&google.maps.event.removeListener(R),L(google.maps.event.addListener(_,"mouseover",p)))}),[p]),(0,t.useEffect)((()=>{_&&f&&(null!==F&&google.maps.event.removeListener(F),$(google.maps.event.addListener(_,"mouseup",f)))}),[f]),(0,t.useEffect)((()=>{_&&m&&(null!==B&&google.maps.event.removeListener(B),z(google.maps.event.addListener(_,"rightclick",m)))}),[m]),(0,t.useEffect)((()=>{_&&g&&(null!==U&&google.maps.event.removeListener(U),V(google.maps.event.addListener(_,"click",g)))}),[g]),(0,t.useEffect)((()=>{_&&v&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(_,"drag",v)))}),[v]),(0,t.useEffect)((()=>{_&&x&&(null!==W&&google.maps.event.removeListener(W),q(google.maps.event.addListener(_,"bounds_changed",x)))}),[x]),(0,t.useEffect)((()=>{var e=new google.maps.Rectangle(oge(oge({},r),{},{map:w}));return"undefined"!==typeof s&&e.setVisible(s),"undefined"!==typeof a&&e.setEditable(a),"undefined"!==typeof i&&e.setDraggable(i),"undefined"!==typeof n&&e.setBounds(n),o&&j(google.maps.event.addListener(e,"dblclick",o)),l&&C(google.maps.event.addListener(e,"dragend",l)),c&&T(google.maps.event.addListener(e,"dragstart",c)),u&&A(google.maps.event.addListener(e,"mousedown",u)),d&&I(google.maps.event.addListener(e,"mousemove",d)),h&&D(google.maps.event.addListener(e,"mouseout",h)),p&&L(google.maps.event.addListener(e,"mouseover",p)),f&&$(google.maps.event.addListener(e,"mouseup",f)),m&&z(google.maps.event.addListener(e,"rightclick",m)),g&&V(google.maps.event.addListener(e,"click",g)),v&&G(google.maps.event.addListener(e,"drag",v)),x&&q(google.maps.event.addListener(e,"bounds_changed",x)),k(e),y&&y(e),()=>{null!==S&&google.maps.event.removeListener(S),null!==E&&google.maps.event.removeListener(E),null!==N&&google.maps.event.removeListener(N),null!==P&&google.maps.event.removeListener(P),null!==M&&google.maps.event.removeListener(M),null!==O&&google.maps.event.removeListener(O),null!==R&&google.maps.event.removeListener(R),null!==F&&google.maps.event.removeListener(F),null!==B&&google.maps.event.removeListener(B),null!==U&&google.maps.event.removeListener(U),null!==H&&google.maps.event.removeListener(H),null!==W&&google.maps.event.removeListener(W),b&&b(e),e.setMap(null)}}),[]),null}));class uge extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{rectangle:null}),Zpe(this,"setRectangleCallback",(()=>{null!==this.state.rectangle&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)}))}componentDidMount(){var e=new google.maps.Rectangle(oge(oge({},this.props.options),{},{map:this.context}));this.registeredEvents=sfe({updaterMap:cge,eventMap:lge,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{rectangle:e}}),this.setRectangleCallback)}componentDidUpdate(e){null!==this.state.rectangle&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:cge,eventMap:lge,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),afe(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}function dge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dge(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(uge,"contextType",tfe);var pge={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},fge={center(e,t){e.setCenter(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},radius(e,t){e.setRadius(t)},visible(e,t){e.setVisible(t)}},mge={};(0,t.memo)((function(e){var{options:r,center:n,radius:i,draggable:a,editable:s,visible:o,onDblClick:l,onDragEnd:c,onDragStart:u,onMouseDown:d,onMouseMove:h,onMouseOut:p,onMouseOver:f,onMouseUp:m,onRightClick:g,onClick:v,onDrag:x,onCenterChanged:y,onRadiusChanged:b,onLoad:w,onUnmount:_}=e,k=(0,t.useContext)(tfe),[S,j]=(0,t.useState)(null),[E,C]=(0,t.useState)(null),[N,T]=(0,t.useState)(null),[P,A]=(0,t.useState)(null),[M,I]=(0,t.useState)(null),[O,D]=(0,t.useState)(null),[R,L]=(0,t.useState)(null),[F,$]=(0,t.useState)(null),[B,z]=(0,t.useState)(null),[U,V]=(0,t.useState)(null),[H,G]=(0,t.useState)(null),[W,q]=(0,t.useState)(null),[K,Z]=(0,t.useState)(null),[Y,X]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==S&&S.setMap(k)}),[k]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==S&&S.setOptions(r)}),[S,r]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==S&&S.setDraggable(a)}),[S,a]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==S&&S.setEditable(s)}),[S,s]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==S&&S.setVisible(o)}),[S,o]),(0,t.useEffect)((()=>{"number"===typeof i&&null!==S&&S.setRadius(i)}),[S,i]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==S&&S.setCenter(n)}),[S,n]),(0,t.useEffect)((()=>{S&&l&&(null!==E&&google.maps.event.removeListener(E),C(google.maps.event.addListener(S,"dblclick",l)))}),[l]),(0,t.useEffect)((()=>{S&&c&&(null!==N&&google.maps.event.removeListener(N),T(google.maps.event.addListener(S,"dragend",c)))}),[c]),(0,t.useEffect)((()=>{S&&u&&(null!==P&&google.maps.event.removeListener(P),A(google.maps.event.addListener(S,"dragstart",u)))}),[u]),(0,t.useEffect)((()=>{S&&d&&(null!==M&&google.maps.event.removeListener(M),I(google.maps.event.addListener(S,"mousedown",d)))}),[d]),(0,t.useEffect)((()=>{S&&h&&(null!==O&&google.maps.event.removeListener(O),D(google.maps.event.addListener(S,"mousemove",h)))}),[h]),(0,t.useEffect)((()=>{S&&p&&(null!==R&&google.maps.event.removeListener(R),L(google.maps.event.addListener(S,"mouseout",p)))}),[p]),(0,t.useEffect)((()=>{S&&f&&(null!==F&&google.maps.event.removeListener(F),$(google.maps.event.addListener(S,"mouseover",f)))}),[f]),(0,t.useEffect)((()=>{S&&m&&(null!==B&&google.maps.event.removeListener(B),z(google.maps.event.addListener(S,"mouseup",m)))}),[m]),(0,t.useEffect)((()=>{S&&g&&(null!==U&&google.maps.event.removeListener(U),V(google.maps.event.addListener(S,"rightclick",g)))}),[g]),(0,t.useEffect)((()=>{S&&v&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(S,"click",v)))}),[v]),(0,t.useEffect)((()=>{S&&x&&(null!==W&&google.maps.event.removeListener(W),q(google.maps.event.addListener(S,"drag",x)))}),[x]),(0,t.useEffect)((()=>{S&&y&&(null!==K&&google.maps.event.removeListener(K),Z(google.maps.event.addListener(S,"center_changed",y)))}),[v]),(0,t.useEffect)((()=>{S&&b&&(null!==Y&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(S,"radius_changed",b)))}),[b]),(0,t.useEffect)((()=>{var e=new google.maps.Circle(hge(hge({},r||mge),{},{map:k}));return"number"===typeof i&&e.setRadius(i),"undefined"!==typeof n&&e.setCenter(n),"number"===typeof i&&e.setRadius(i),"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof s&&e.setEditable(s),"undefined"!==typeof a&&e.setDraggable(a),l&&C(google.maps.event.addListener(e,"dblclick",l)),c&&T(google.maps.event.addListener(e,"dragend",c)),u&&A(google.maps.event.addListener(e,"dragstart",u)),d&&I(google.maps.event.addListener(e,"mousedown",d)),h&&D(google.maps.event.addListener(e,"mousemove",h)),p&&L(google.maps.event.addListener(e,"mouseout",p)),f&&$(google.maps.event.addListener(e,"mouseover",f)),m&&z(google.maps.event.addListener(e,"mouseup",m)),g&&V(google.maps.event.addListener(e,"rightclick",g)),v&&G(google.maps.event.addListener(e,"click",v)),x&&q(google.maps.event.addListener(e,"drag",x)),y&&Z(google.maps.event.addListener(e,"center_changed",y)),b&&X(google.maps.event.addListener(e,"radius_changed",b)),j(e),w&&w(e),()=>{null!==E&&google.maps.event.removeListener(E),null!==N&&google.maps.event.removeListener(N),null!==P&&google.maps.event.removeListener(P),null!==M&&google.maps.event.removeListener(M),null!==O&&google.maps.event.removeListener(O),null!==R&&google.maps.event.removeListener(R),null!==F&&google.maps.event.removeListener(F),null!==B&&google.maps.event.removeListener(B),null!==U&&google.maps.event.removeListener(U),null!==H&&google.maps.event.removeListener(H),null!==K&&google.maps.event.removeListener(K),null!==Y&&google.maps.event.removeListener(Y),_&&_(e),e.setMap(null)}}),[]),null}));class gge extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{circle:null}),Zpe(this,"setCircleCallback",(()=>{null!==this.state.circle&&this.props.onLoad&&this.props.onLoad(this.state.circle)}))}componentDidMount(){var e=new google.maps.Circle(hge(hge({},this.props.options),{},{map:this.context}));this.registeredEvents=sfe({updaterMap:fge,eventMap:pge,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{circle:e}}),this.setCircleCallback)}componentDidUpdate(e){null!==this.state.circle&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:fge,eventMap:pge,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){var e;null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),afe(this.registeredEvents),null===(e=this.state.circle)||void 0===e||e.setMap(null))}render(){return null}}function vge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vge(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(gge,"contextType",tfe);var yge={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},bge={add(e,t){e.add(t)},addgeojson(e,t,r){e.addGeoJson(t,r)},contains(e,t){e.contains(t)},foreach(e,t){e.forEach(t)},loadgeojson(e,t,r,n){e.loadGeoJson(t,r,n)},overridestyle(e,t,r){e.overrideStyle(t,r)},remove(e,t){e.remove(t)},revertstyle(e,t){e.revertStyle(t)},controlposition(e,t){e.setControlPosition(t)},controls(e,t){e.setControls(t)},drawingmode(e,t){e.setDrawingMode(t)},map(e,t){e.setMap(t)},style(e,t){e.setStyle(t)},togeojson(e,t){e.toGeoJson(t)}};(0,t.memo)((function(e){var{options:r,onClick:n,onDblClick:i,onMouseDown:a,onMouseMove:s,onMouseOut:o,onMouseOver:l,onMouseUp:c,onRightClick:u,onAddFeature:d,onRemoveFeature:h,onRemoveProperty:p,onSetGeometry:f,onSetProperty:m,onLoad:g,onUnmount:v}=e,x=(0,t.useContext)(tfe),[y,b]=(0,t.useState)(null),[w,_]=(0,t.useState)(null),[k,S]=(0,t.useState)(null),[j,E]=(0,t.useState)(null),[C,N]=(0,t.useState)(null),[T,P]=(0,t.useState)(null),[A,M]=(0,t.useState)(null),[I,O]=(0,t.useState)(null),[D,R]=(0,t.useState)(null),[L,F]=(0,t.useState)(null),[$,B]=(0,t.useState)(null),[z,U]=(0,t.useState)(null),[V,H]=(0,t.useState)(null),[G,W]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==y&&y.setMap(x)}),[x]),(0,t.useEffect)((()=>{y&&i&&(null!==w&&google.maps.event.removeListener(w),_(google.maps.event.addListener(y,"dblclick",i)))}),[i]),(0,t.useEffect)((()=>{y&&a&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(y,"mousedown",a)))}),[a]),(0,t.useEffect)((()=>{y&&s&&(null!==j&&google.maps.event.removeListener(j),E(google.maps.event.addListener(y,"mousemove",s)))}),[s]),(0,t.useEffect)((()=>{y&&o&&(null!==C&&google.maps.event.removeListener(C),N(google.maps.event.addListener(y,"mouseout",o)))}),[o]),(0,t.useEffect)((()=>{y&&l&&(null!==T&&google.maps.event.removeListener(T),P(google.maps.event.addListener(y,"mouseover",l)))}),[l]),(0,t.useEffect)((()=>{y&&c&&(null!==A&&google.maps.event.removeListener(A),M(google.maps.event.addListener(y,"mouseup",c)))}),[c]),(0,t.useEffect)((()=>{y&&u&&(null!==I&&google.maps.event.removeListener(I),O(google.maps.event.addListener(y,"rightclick",u)))}),[u]),(0,t.useEffect)((()=>{y&&n&&(null!==D&&google.maps.event.removeListener(D),R(google.maps.event.addListener(y,"click",n)))}),[n]),(0,t.useEffect)((()=>{y&&d&&(null!==L&&google.maps.event.removeListener(L),F(google.maps.event.addListener(y,"addfeature",d)))}),[d]),(0,t.useEffect)((()=>{y&&h&&(null!==$&&google.maps.event.removeListener($),B(google.maps.event.addListener(y,"removefeature",h)))}),[h]),(0,t.useEffect)((()=>{y&&p&&(null!==z&&google.maps.event.removeListener(z),U(google.maps.event.addListener(y,"removeproperty",p)))}),[p]),(0,t.useEffect)((()=>{y&&f&&(null!==V&&google.maps.event.removeListener(V),H(google.maps.event.addListener(y,"setgeometry",f)))}),[f]),(0,t.useEffect)((()=>{y&&m&&(null!==G&&google.maps.event.removeListener(G),W(google.maps.event.addListener(y,"setproperty",m)))}),[m]),(0,t.useEffect)((()=>{if(null!==x){var e=new google.maps.Data(xge(xge({},r),{},{map:x}));i&&_(google.maps.event.addListener(e,"dblclick",i)),a&&S(google.maps.event.addListener(e,"mousedown",a)),s&&E(google.maps.event.addListener(e,"mousemove",s)),o&&N(google.maps.event.addListener(e,"mouseout",o)),l&&P(google.maps.event.addListener(e,"mouseover",l)),c&&M(google.maps.event.addListener(e,"mouseup",c)),u&&O(google.maps.event.addListener(e,"rightclick",u)),n&&R(google.maps.event.addListener(e,"click",n)),d&&F(google.maps.event.addListener(e,"addfeature",d)),h&&B(google.maps.event.addListener(e,"removefeature",h)),p&&U(google.maps.event.addListener(e,"removeproperty",p)),f&&H(google.maps.event.addListener(e,"setgeometry",f)),m&&W(google.maps.event.addListener(e,"setproperty",m)),b(e),g&&g(e)}return()=>{y&&(null!==w&&google.maps.event.removeListener(w),null!==k&&google.maps.event.removeListener(k),null!==j&&google.maps.event.removeListener(j),null!==C&&google.maps.event.removeListener(C),null!==T&&google.maps.event.removeListener(T),null!==A&&google.maps.event.removeListener(A),null!==I&&google.maps.event.removeListener(I),null!==D&&google.maps.event.removeListener(D),null!==L&&google.maps.event.removeListener(L),null!==$&&google.maps.event.removeListener($),null!==z&&google.maps.event.removeListener(z),null!==V&&google.maps.event.removeListener(V),null!==G&&google.maps.event.removeListener(G),v&&v(y),y.setMap(null))}}),[]),null}));class wge extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{data:null}),Zpe(this,"setDataCallback",(()=>{null!==this.state.data&&this.props.onLoad&&this.props.onLoad(this.state.data)}))}componentDidMount(){if(null!==this.context){var e=new google.maps.Data(xge(xge({},this.props.options),{},{map:this.context}));this.registeredEvents=sfe({updaterMap:bge,eventMap:yge,prevProps:{},nextProps:this.props,instance:e}),this.setState((()=>({data:e})),this.setDataCallback)}}componentDidUpdate(e){null!==this.state.data&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:bge,eventMap:yge,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),afe(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}function _ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_ge(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(wge,"contextType",tfe);var Sge={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},jge={options(e,t){e.setOptions(t)},url(e,t){e.setUrl(t)},zIndex(e,t){e.setZIndex(t)}};class Ege extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{kmlLayer:null}),Zpe(this,"setKmlLayerCallback",(()=>{null!==this.state.kmlLayer&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)}))}componentDidMount(){var e=new google.maps.KmlLayer(kge(kge({},this.props.options),{},{map:this.context}));this.registeredEvents=sfe({updaterMap:jge,eventMap:Sge,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{kmlLayer:e}}),this.setKmlLayerCallback)}componentDidUpdate(e){null!==this.state.kmlLayer&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:jge,eventMap:Sge,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),afe(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}function Cge(e,t){return"function"===typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function Nge(e,t){return new t(e.lat,e.lng)}function Tge(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function Pge(e,t,r,n){return void 0!==r?function(e,t,r){var n=e&&e.fromLatLngToDivPixel(r.getNorthEast()),i=e&&e.fromLatLngToDivPixel(r.getSouthWest());return n&&i?{left:"".concat(i.x+t.x,"px"),top:"".concat(n.y+t.y,"px"),width:"".concat(n.x-i.x-t.x,"px"),height:"".concat(i.y-n.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,r){return e instanceof t?e:r(e,t)}(r,google.maps.LatLngBounds,Tge)):function(e,t,r){var n=e&&e.fromLatLngToDivPixel(r);if(n){var{x:i,y:a}=n;return{left:"".concat(i+t.x,"px"),top:"".concat(a+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,r){return e instanceof t?e:r(e,t)}(n,google.maps.LatLng,Nge))}function Age(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mge(e,t,r,n,i){class a extends google.maps.OverlayView{constructor(e,t,r,n){super(),this.container=e,this.pane=t,this.position=r,this.bounds=n}onAdd(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null===t||void 0===t||t.appendChild(this.container)}draw(){var e=this.getProjection(),t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Age(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Age(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.container?Cge(this.container,i):{x:0,y:0}),r=Pge(e,t,this.bounds,this.position);for(var[n,a]of Object.entries(r))this.container.style[n]=a}onRemove(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}return new a(e,t,r,n)}function Ige(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oge(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function Dge(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}Zpe(Ege,"contextType",tfe);(0,t.memo)((function(e){var{position:r,bounds:n,mapPaneName:i,zIndex:a,onLoad:s,onUnmount:o,getPixelPositionOffset:l,children:c}=e,u=(0,t.useContext)(tfe),d=(0,t.useMemo)((()=>{var e=document.createElement("div");return e.style.position="absolute",e}),[]),h=(0,t.useMemo)((()=>Mge(d,i,r,n,l)),[d,i,r,n]);return(0,t.useEffect)((()=>(null===s||void 0===s||s(h),null===h||void 0===h||h.setMap(u),()=>{null===o||void 0===o||o(h),null===h||void 0===h||h.setMap(null)})),[u,h]),(0,t.useEffect)((()=>{d.style.zIndex="".concat(a)}),[a,d]),ci.createPortal(c,d)}));class Rge extends t.PureComponent{constructor(e){super(e),Zpe(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Zpe(this,"updatePane",(()=>{var e=this.props.mapPaneName,t=this.overlayView.getPanes();efe(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?this.setState({paneEl:t[e]}):this.setState({paneEl:null})})),Zpe(this,"onAdd",(()=>{var e,t;this.updatePane(),null===(e=(t=this.props).onLoad)||void 0===e||e.call(t,this.overlayView)})),Zpe(this,"onPositionElement",(()=>{var e,t,r,n,i,a,s=this.overlayView.getProjection(),o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ige(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ige(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({x:0,y:0},this.containerRef.current?Cge(this.containerRef.current,this.props.getPixelPositionOffset):{}),l=Pge(s,o,this.props.bounds,this.props.position);(i=l,a={left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height},i.left!==a.left||i.top!==a.top||i.width!==a.height||i.height!==a.height)&&this.setState({containerStyle:{top:null!==(e=l.top)&&void 0!==e?e:0,left:null!==(t=l.left)&&void 0!==t?t:0,width:null!==(r=l.width)&&void 0!==r?r:0,height:null!==(n=l.height)&&void 0!==n?n:0,position:"absolute"}})})),Zpe(this,"draw",(()=>{this.onPositionElement()})),Zpe(this,"onRemove",(()=>{var e,t;this.setState((()=>({paneEl:null}))),null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t,this.overlayView)})),this.containerRef=(0,t.createRef)();var r=new google.maps.OverlayView;r.onAdd=this.onAdd,r.draw=this.draw,r.onRemove=this.onRemove,this.overlayView=r}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=Oge(e.position),r=Oge(this.props.position),n=Dge(e.bounds),i=Dge(this.props.bounds);t===r&&n===i||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?ci.createPortal((0,V.jsx)("div",{ref:this.containerRef,style:this.state.containerStyle,children:t.Children.only(this.props.children)}),e):null}}function Lge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lge(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(Rge,"FLOAT_PANE","floatPane"),Zpe(Rge,"MAP_PANE","mapPane"),Zpe(Rge,"MARKER_LAYER","markerLayer"),Zpe(Rge,"OVERLAY_LAYER","overlayLayer"),Zpe(Rge,"OVERLAY_MOUSE_TARGET","overlayMouseTarget"),Zpe(Rge,"contextType",tfe);var $ge={onDblClick:"dblclick",onClick:"click"},Bge={opacity(e,t){e.setOpacity(t)}};(0,t.memo)((function(e){var{url:r,bounds:n,options:i,visible:a}=e,s=(0,t.useContext)(tfe),o=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),l=(0,t.useMemo)((()=>new google.maps.GroundOverlay(r,o,i)),[]);return(0,t.useEffect)((()=>{null!==l&&l.setMap(s)}),[s]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==l&&(l.set("url",r),l.setMap(s))}),[l,r]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==l&&l.setOpacity(a?1:0)}),[l,a]),(0,t.useEffect)((()=>{var e=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));"undefined"!==typeof n&&null!==l&&(l.set("bounds",e),l.setMap(s))}),[l,n]),null}));class zge extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{groundOverlay:null}),Zpe(this,"setGroundOverlayCallback",(()=>{null!==this.state.groundOverlay&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)}))}componentDidMount(){efe(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Fge(Fge({},this.props.options),{},{map:this.context}));this.registeredEvents=sfe({updaterMap:Bge,eventMap:$ge,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{groundOverlay:e}}),this.setGroundOverlayCallback)}componentDidUpdate(e){null!==this.state.groundOverlay&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:Bge,eventMap:$ge,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}function Uge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uge(Object(r),!0).forEach((function(t){Zpe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zpe(zge,"defaultProps",{onLoad:function(){}}),Zpe(zge,"contextType",tfe);var Hge={},Gge={data(e,t){e.setData(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var{data:r,onLoad:n,onUnmount:i,options:a}=e,s=(0,t.useContext)(tfe),[o,l]=(0,t.useState)(null);return(0,t.useEffect)((()=>{google.maps.visualization||efe(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)}),[]),(0,t.useEffect)((()=>{efe(!!r,"data property is required in HeatmapLayer %s",r)}),[r]),(0,t.useEffect)((()=>{null!==o&&o.setMap(s)}),[s]),(0,t.useEffect)((()=>{a&&null!==o&&o.setOptions(a)}),[o,a]),(0,t.useEffect)((()=>{var e=new google.maps.visualization.HeatmapLayer(Vge(Vge({},a),{},{data:r,map:s}));return l(e),n&&n(e),()=>{null!==o&&(i&&i(o),o.setMap(null))}}),[]),null}));class Wge extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{heatmapLayer:null}),Zpe(this,"setHeatmapLayerCallback",(()=>{null!==this.state.heatmapLayer&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)}))}componentDidMount(){efe(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),efe(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Vge(Vge({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=sfe({updaterMap:Gge,eventMap:Hge,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{heatmapLayer:e}}),this.setHeatmapLayerCallback)}componentDidUpdate(e){afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:Gge,eventMap:Hge,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),afe(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Zpe(Wge,"contextType",tfe);var qge={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},Kge={register(e,t,r){e.registerPanoProvider(t,r)},links(e,t){e.setLinks(t)},motionTracking(e,t){e.setMotionTracking(t)},options(e,t){e.setOptions(t)},pano(e,t){e.setPano(t)},position(e,t){e.setPosition(t)},pov(e,t){e.setPov(t)},visible(e,t){e.setVisible(t)},zoom(e,t){e.setZoom(t)}};class Zge extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{streetViewPanorama:null}),Zpe(this,"setStreetViewPanoramaCallback",(()=>{null!==this.state.streetViewPanorama&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)}))}componentDidMount(){var e,t,r=null!==(e=null===(t=this.context)||void 0===t?void 0:t.getStreetView())&&void 0!==e?e:null;this.registeredEvents=sfe({updaterMap:Kge,eventMap:qge,prevProps:{},nextProps:this.props,instance:r}),this.setState((()=>({streetViewPanorama:r})),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){null!==this.state.streetViewPanorama&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:Kge,eventMap:qge,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),afe(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Zpe(Zge,"contextType",tfe);class Yge extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"state",{streetViewService:null}),Zpe(this,"setStreetViewServiceCallback",(()=>{null!==this.state.streetViewService&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)}))}componentDidMount(){var e=new google.maps.StreetViewService;this.setState((function(){return{streetViewService:e}}),this.setStreetViewServiceCallback)}componentWillUnmount(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Zpe(Yge,"contextType",tfe);t.PureComponent;var Xge={onDirectionsChanged:"directions_changed"},Qge={directions(e,t){e.setDirections(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},panel(e,t){e.setPanel(t)},routeIndex(e,t){e.setRouteIndex(t)}};class Jge extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"state",{directionsRenderer:null}),Zpe(this,"setDirectionsRendererCallback",(()=>{null!==this.state.directionsRenderer&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))}))}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=sfe({updaterMap:Qge,eventMap:Xge,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{directionsRenderer:e}}),this.setDirectionsRendererCallback)}componentDidUpdate(e){null!==this.state.directionsRenderer&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:Qge,eventMap:Xge,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),afe(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Zpe(Jge,"contextType",tfe);t.PureComponent;var eve={onPlacesChanged:"places_changed"},tve={bounds(e,t){e.setBounds(t)}};class rve extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"containerElement",(0,t.createRef)()),Zpe(this,"state",{searchBox:null}),Zpe(this,"setSearchBoxCallback",(()=>{null!==this.state.searchBox&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)}))}componentDidMount(){if(efe(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=sfe({updaterMap:tve,eventMap:eve,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{searchBox:t}}),this.setSearchBoxCallback)}}}componentDidUpdate(e){null!==this.state.searchBox&&(afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:tve,eventMap:eve,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),afe(this.registeredEvents))}render(){return(0,V.jsx)("div",{ref:this.containerElement,children:t.Children.only(this.props.children)})}}Zpe(rve,"contextType",tfe);var nve={onPlaceChanged:"place_changed"},ive={bounds(e,t){e.setBounds(t)},restrictions(e,t){e.setComponentRestrictions(t)},fields(e,t){e.setFields(t)},options(e,t){e.setOptions(t)},types(e,t){e.setTypes(t)}};class ave extends t.PureComponent{constructor(){super(...arguments),Zpe(this,"registeredEvents",[]),Zpe(this,"containerElement",(0,t.createRef)()),Zpe(this,"state",{autocomplete:null}),Zpe(this,"setAutocompleteCallback",(()=>{null!==this.state.autocomplete&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)}))}componentDidMount(){var e;efe(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=null===(e=this.containerElement.current)||void 0===e?void 0:e.querySelector("input");if(t){var r=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=sfe({updaterMap:ive,eventMap:nve,prevProps:{},nextProps:this.props,instance:r}),this.setState((()=>({autocomplete:r})),this.setAutocompleteCallback)}}componentDidUpdate(e){afe(this.registeredEvents),this.registeredEvents=sfe({updaterMap:ive,eventMap:nve,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){null!==this.state.autocomplete&&afe(this.registeredEvents)}render(){return(0,V.jsx)("div",{ref:this.containerElement,className:this.props.className,children:t.Children.only(this.props.children)})}}Zpe(ave,"defaultProps",{className:""}),Zpe(ave,"contextType",tfe);var sve=6378137,ove=.0066943799901413165,lve=484813681109536e-20,cve=Math.PI/2,uve=1e-10,dve=.017453292519943295,hve=57.29577951308232,pve=Math.PI/4,fve=2*Math.PI,mve=3.14159265359,gve={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const vve={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var xve=/[\s_\-\/\(\)]/g;function yve(e,t){if(e[t])return e[t];for(var r,n=Object.keys(e),i=t.toLowerCase().replace(xve,""),a=-1;++a<n.length;)if((r=n[a]).toLowerCase().replace(xve,"")===i)return e[r]}function bve(e){var t,r,n,i={},a=e.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var r=t.split("=");return r.push(!0),e[r[0].toLowerCase()]=r[1],e}),{}),s={proj:"projName",datum:"datumCode",rf:function(e){i.rf=parseFloat(e)},lat_0:function(e){i.lat0=e*dve},lat_1:function(e){i.lat1=e*dve},lat_2:function(e){i.lat2=e*dve},lat_ts:function(e){i.lat_ts=e*dve},lon_0:function(e){i.long0=e*dve},lon_1:function(e){i.long1=e*dve},lon_2:function(e){i.long2=e*dve},alpha:function(e){i.alpha=parseFloat(e)*dve},gamma:function(e){i.rectified_grid_angle=parseFloat(e)},lonc:function(e){i.longc=e*dve},x_0:function(e){i.x0=parseFloat(e)},y_0:function(e){i.y0=parseFloat(e)},k_0:function(e){i.k0=parseFloat(e)},k:function(e){i.k0=parseFloat(e)},a:function(e){i.a=parseFloat(e)},b:function(e){i.b=parseFloat(e)},r:function(e){i.a=i.b=parseFloat(e)},r_a:function(){i.R_A=!0},zone:function(e){i.zone=parseInt(e,10)},south:function(){i.utmSouth=!0},towgs84:function(e){i.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){i.to_meter=parseFloat(e)},units:function(e){i.units=e;var t=yve(vve,e);t&&(i.to_meter=t.to_meter)},from_greenwich:function(e){i.from_greenwich=e*dve},pm:function(e){var t=yve(gve,e);i.from_greenwich=(t||parseFloat(e))*dve},nadgrids:function(e){"@null"===e?i.datumCode="none":i.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&-1!==t.indexOf(e.substr(0,1))&&-1!==t.indexOf(e.substr(1,1))&&-1!==t.indexOf(e.substr(2,1))&&(i.axis=e)},approx:function(){i.approx=!0}};for(t in a)r=a[t],t in s?"function"===typeof(n=s[t])?n(r):i[n]=r:i[t]=r;return"string"===typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}const wve=function(e){var t=new Nve(e);return t.output()};var _ve=1,kve=/\s/,Sve=/[A-Za-z]/,jve=/[A-Za-z84_]/,Eve=/[,\]]/,Cve=/[\d\.E\-\+]/;function Nve(e){if("string"!==typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=_ve}function Tve(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var n=t?{}:e,i=r.reduce((function(e,t){return Pve(t,e),e}),n);t&&(e[t]=i)}function Pve(e,t){if(Array.isArray(e)){var r=e.shift();if("PARAMETER"===r&&(r=e.shift()),1===e.length)return Array.isArray(e[0])?(t[r]={},void Pve(e[0],t[r])):void(t[r]=e[0]);if(e.length)if("TOWGS84"!==r){if("AXIS"===r)return r in t||(t[r]=[]),void t[r].push(e);var n;switch(Array.isArray(r)||(t[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[r]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&Pve(e[2],t[r]));case"SPHEROID":case"ELLIPSOID":return t[r]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&Pve(e[3],t[r]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return e[0]=["name",e[0]],void Tve(t,r,e);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return e[0]=["name",e[0]],Tve(t,r,e),void(t[r].type=r);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return Pve(e,t[r]);return Tve(t,r,e)}}else t[r]=e;else t[r]=!0}else t[e]=!0}Nve.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;kve.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case _ve:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},Nve.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(Eve.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},Nve.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=_ve)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=_ve,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Nve.prototype.number=function(e){if(!Cve.test(e)){if(Eve.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},Nve.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},Nve.prototype.keyword=function(e){if(jve.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=_ve)}if(!Eve.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},Nve.prototype.neutral=function(e){if(Sve.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(Cve.test(e))return this.word=e,void(this.state=3);if(!Eve.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},Nve.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Ave=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Mve(e){return.017453292519943295*e}function Ive(e){for(var t=Object.keys(e),r=0,n=t.length;r<n;++r){var i=t[r];-1!==Ave.indexOf(i)&&Ove(e[i]),"object"===typeof e[i]&&Ive(e[i])}}function Ove(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var r="",n=0,i=e.AXIS.length;n<i;++n){var a=[e.AXIS[n][0].toLowerCase(),e.AXIS[n][1].toLowerCase()];-1!==a[0].indexOf("north")||("y"===a[0]||"lat"===a[0])&&"north"===a[1]?r+="n":-1!==a[0].indexOf("south")||("y"===a[0]||"lat"===a[0])&&"south"===a[1]?r+="s":-1!==a[0].indexOf("east")||("x"===a[0]||"lon"===a[0])&&"east"===a[1]?r+="e":-1===a[0].indexOf("west")&&("x"!==a[0]&&"lon"!==a[0]||"west"!==a[1])||(r+="w")}2===r.length&&(r+="u"),3===r.length&&(e.axis=r)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;function o(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_1949"===e.datumCode&&(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"belge_1972"===e.datumCode&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Mve],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Mve],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Mve],["lat0","latitude_of_origin",Mve],["lat0","standard_parallel_1",Mve],["lat1","standard_parallel_1",Mve],["lat2","standard_parallel_2",Mve],["azimuth","Azimuth"],["alpha","azimuth",Mve],["srsCode","name"]].forEach((function(t){return function(e,t){var r=t[0],n=t[1];!(r in e)&&n in e&&(e[r]=e[n],3===t.length&&(e[r]=t[2](e[r])))}(e,t)})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName?!e.lat_ts&&e.lat0&&"Polar_Stereographic"===e.projName&&(e.lat_ts=e.lat0,e.lat0=Mve(e.lat0>0?90:-90)):(e.lat0=Mve(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function Dve(e){var t=wve(e),r=t[0],n={};return Pve(t,n),Ive(n),n[r]}function Rve(e){var t=this;if(2===arguments.length){var r=arguments[1];"string"===typeof r?"+"===r.charAt(0)?Rve[e]=bve(arguments[1]):Rve[e]=Dve(arguments[1]):Rve[e]=r}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?Rve.apply(t,e):Rve(e)}));if("string"===typeof e){if(e in Rve)return Rve[e]}else"EPSG"in e?Rve["EPSG:"+e.EPSG]=e:"ESRI"in e?Rve["ESRI:"+e.ESRI]=e:"IAU2000"in e?Rve["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(Rve);const Lve=Rve;var Fve=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var $ve=["3857","900913","3785","102113"];const Bve=function(e){if(!function(e){return"string"===typeof e}(e))return e;if(function(e){return e in Lve}(e))return Lve[e];if(function(e){return Fve.some((function(t){return e.indexOf(t)>-1}))}(e)){var t=Dve(e);if(function(e){var t=yve(e,"authority");if(t){var r=yve(t,"epsg");return r&&$ve.indexOf(r)>-1}}(t))return Lve["EPSG:3857"];var r=function(e){var t=yve(e,"extension");if(t)return yve(t,"proj4")}(t);return r?bve(r):t}return function(e){return"+"===e[0]}(e)?bve(e):void 0};function zve(e,t){var r,n;if(e=e||{},!t)return e;for(n in t)void 0!==(r=t[n])&&(e[n]=r);return e}function Uve(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)}function Vve(e){return e<0?-1:1}function Hve(e){return Math.abs(e)<=mve?e:e-Vve(e)*fve}function Gve(e,t,r){var n=e*r,i=.5*e;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(cve-t))/n}function Wve(e,t){for(var r,n,i=.5*e,a=cve-2*Math.atan(t),s=0;s<=15;s++)if(r=e*Math.sin(a),a+=n=cve-2*Math.atan(t*Math.pow((1-r)/(1+r),i))-a,Math.abs(n)<=1e-10)return a;return-9999}const qve={init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Uve(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,r,n=e.x,i=e.y;if(i*hve>90&&i*hve<-90&&n*hve>180&&n*hve<-180)return null;if(Math.abs(Math.abs(i)-cve)<=uve)return null;if(this.sphere)t=this.x0+this.a*this.k0*Hve(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(pve+.5*i));else{var a=Math.sin(i),s=Gve(this.e,i,a);t=this.x0+this.a*this.k0*Hve(n-this.long0),r=this.y0-this.a*this.k0*Math.log(s)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n=e.x-this.x0,i=e.y-this.y0;if(this.sphere)r=cve-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var a=Math.exp(-i/(this.a*this.k0));if(-9999===(r=Wve(this.e,a)))return null}return t=Hve(this.long0+n/(this.a*this.k0)),e.x=t,e.y=r,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function Kve(e){return e}var Zve=[qve,{init:function(){},forward:Kve,inverse:Kve,names:["longlat","identity"]}],Yve={},Xve=[];function Qve(e,t){var r=Xve.length;return e.names?(Xve[r]=e,e.names.forEach((function(e){Yve[e.toLowerCase()]=r})),this):(console.log(t),!0)}const Jve={start:function(){Zve.forEach(Qve)},add:Qve,get:function(e){if(!e)return!1;var t=e.toLowerCase();return"undefined"!==typeof Yve[t]&&Xve[Yve[t]]?Xve[Yve[t]]:void 0}};var exe={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},txe=exe.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exe.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var rxe={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var nxe in rxe){var ixe=rxe[nxe];rxe[ixe.datumName]=ixe}const axe=rxe;const sxe=function(e,t,r,n,i,a,s){var o={};return o.datum_type=void 0===e||"none"===e?5:4,t&&(o.datum_params=t.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=1),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=2,o.datum_params[3]*=lve,o.datum_params[4]*=lve,o.datum_params[5]*=lve,o.datum_params[6]=o.datum_params[6]/1e6+1))),s&&(o.datum_type=3,o.grids=s),o.a=r,o.b=n,o.es=i,o.ep2=a,o};var oxe={};function lxe(e){if(0===e.length)return null;var t="@"===e[0];return t&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:oxe[e]||null,isNull:!1}}function cxe(e){return e/3600*Math.PI/180}function uxe(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function dxe(e){return e.map((function(e){return[cxe(e.longitudeShift),cxe(e.latitudeShift)]}))}function hxe(e,t,r){return{name:uxe(e,t+8,t+16).trim(),parent:uxe(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,r),upperLatitude:e.getFloat64(t+88,r),lowerLongitude:e.getFloat64(t+104,r),upperLongitude:e.getFloat64(t+120,r),latitudeInterval:e.getFloat64(t+136,r),longitudeInterval:e.getFloat64(t+152,r),gridNodeCount:e.getInt32(t+168,r)}}function pxe(e,t,r,n){for(var i=t+176,a=[],s=0;s<r.gridNodeCount;s++){var o={latitudeShift:e.getFloat32(i+16*s,n),longitudeShift:e.getFloat32(i+16*s+4,n),latitudeAccuracy:e.getFloat32(i+16*s+8,n),longitudeAccuracy:e.getFloat32(i+16*s+12,n)};a.push(o)}return a}function fxe(e,t){if(!(this instanceof fxe))return new fxe(e);t=t||function(e){if(e)throw e};var r=Bve(e);if("object"===typeof r){var n=fxe.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var i=yve(axe,r.datumCode);i&&(r.datum_params=r.datum_params||(i.towgs84?i.towgs84.split(","):null),r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var a=function(e,t,r,n,i){if(!e){var a=yve(exe,n);a||(a=txe),e=a.a,t=a.b,r=a.rf}return r&&!t&&(t=(1-1/r)*e),(0===r||Math.abs(e-t)<uve)&&(i=!0,t=e),{a:e,b:t,rf:r,sphere:i}}(r.a,r.b,r.rf,r.ellps,r.sphere),s=function(e,t,r,n){var i=e*e,a=t*t,s=(i-a)/i,o=0;return n?(i=(e*=1-s*(.16666666666666666+s*(.04722222222222222+.022156084656084655*s)))*e,s=0):o=Math.sqrt(s),{es:s,e:o,ep2:(i-a)/a}}(a.a,a.b,a.rf,r.R_A),o=function(e){return void 0===e?null:e.split(",").map(lxe)}(r.nadgrids),l=r.datum||sxe(r.datumCode,r.datum_params,a.a,a.b,s.es,s.ep2,o);zve(this,r),zve(this,n),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,this.init(),t(null,this)}else t("Could not get projection name from: "+e)}else t("Could not parse to valid json: "+e)}fxe.projections=Jve,fxe.projections.start();const mxe=fxe;function gxe(e,t,r){var n,i,a,s,o=e.x,l=e.y,c=e.z?e.z:0;if(l<-cve&&l>-1.001*cve)l=-cve;else if(l>cve&&l<1.001*cve)l=cve;else{if(l<-cve)return{x:-1/0,y:-1/0,z:e.z};if(l>cve)return{x:1/0,y:1/0,z:e.z}}return o>Math.PI&&(o-=2*Math.PI),i=Math.sin(l),s=Math.cos(l),a=i*i,{x:((n=r/Math.sqrt(1-t*a))+c)*s*Math.cos(o),y:(n+c)*s*Math.sin(o),z:(n*(1-t)+c)*i}}function vxe(e,t,r,n){var i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y=1e-12,b=e.x,w=e.y,_=e.z?e.z:0;if(i=Math.sqrt(b*b+w*w),a=Math.sqrt(b*b+w*w+_*_),i/r<y){if(v=0,a/r<y)return x=-n,{x:e.x,y:e.y,z:e.z}}else v=Math.atan2(w,b);s=_/a,d=(o=i/a)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*o*o)),h=s*l,g=0;do{g++,c=t*(u=r/Math.sqrt(1-t*h*h))/(u+(x=i*d+_*h-u*(1-t*h*h))),m=(f=s*(l=1/Math.sqrt(1-c*(2-c)*o*o)))*d-(p=o*(1-c)*l)*h,d=p,h=f}while(m*m>1e-24&&g<30);return{x:v,y:Math.atan(f/Math.abs(p)),z:x}}function xxe(e){return 1===e||2===e}function yxe(e,t,r){if(function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(1===e.datum_type?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:2!==e.datum_type||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}(e,t))return r;if(5===e.datum_type||5===t.datum_type)return r;var n=e.a,i=e.es;if(3===e.datum_type){if(0!==bxe(e,!1,r))return;n=sve,i=ove}var a=t.a,s=t.b,o=t.es;if(3===t.datum_type&&(a=sve,s=6356752.314,o=ove),i===o&&n===a&&!xxe(e.datum_type)&&!xxe(t.datum_type))return r;if((r=gxe(r,i,n),xxe(e.datum_type)&&(r=function(e,t,r){if(1===t)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(2===t){var n=r[0],i=r[1],a=r[2],s=r[3],o=r[4],l=r[5],c=r[6];return{x:c*(e.x-l*e.y+o*e.z)+n,y:c*(l*e.x+e.y-s*e.z)+i,z:c*(-o*e.x+s*e.y+e.z)+a}}}(r,e.datum_type,e.datum_params)),xxe(t.datum_type)&&(r=function(e,t,r){if(1===t)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(2===t){var n=r[0],i=r[1],a=r[2],s=r[3],o=r[4],l=r[5],c=r[6],u=(e.x-n)/c,d=(e.y-i)/c,h=(e.z-a)/c;return{x:u+l*d-o*h,y:-l*u+d+s*h,z:o*u-s*d+h}}}(r,t.datum_type,t.datum_params)),r=vxe(r,o,a,s),3===t.datum_type)&&0!==bxe(t,!0,r))return;return r}function bxe(e,t,r){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},i={x:Number.NaN,y:Number.NaN},a=[];e:for(var s=0;s<e.grids.length;s++){var o=e.grids[s];if(a.push(o.name),o.isNull){i=n;break}if(o.mandatory,null!==o.grid)for(var l=o.grid.subgrids,c=0,u=l.length;c<u;c++){var d=l[c],h=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,p=d.ll[0]-h,f=d.ll[1]-h,m=d.ll[0]+(d.lim[0]-1)*d.del[0]+h,g=d.ll[1]+(d.lim[1]-1)*d.del[1]+h;if(!(f>n.y||p>n.x||g<n.y||m<n.x)&&(i=wxe(n,t,d),!isNaN(i.x)))break e}else if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*hve+" "+n.y*hve+" tried: '"+a+"'"),-1):(r.x=-i.x,r.y=i.y,0)}function wxe(e,t,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var i={x:e.x,y:e.y};i.x-=r.ll[0],i.y-=r.ll[1],i.x=Hve(i.x-Math.PI)+Math.PI;var a=_xe(i,r);if(t){if(isNaN(a.x))return n;a.x=i.x-a.x,a.y=i.y-a.y;var s,o,l=9;do{if(o=_xe(a,r),isNaN(o.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}s={x:i.x-(o.x+a.x),y:i.y-(o.y+a.y)},a.x+=s.x,a.y+=s.y}while(l--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Hve(a.x+r.ll[0]),n.y=a.y+r.ll[1]}else isNaN(a.x)||(n.x=e.x+a.x,n.y=e.y+a.y);return n}function _xe(e,t){var r,n={x:e.x/t.del[0],y:e.y/t.del[1]},i=Math.floor(n.x),a=Math.floor(n.y),s=n.x-1*i,o=n.y-1*a,l={x:Number.NaN,y:Number.NaN};if(i<0||i>=t.lim[0])return l;if(a<0||a>=t.lim[1])return l;r=a*t.lim[0]+i;var c=t.cvs[r][0],u=t.cvs[r][1];r++;var d=t.cvs[r][0],h=t.cvs[r][1];r+=t.lim[0];var p=t.cvs[r][0],f=t.cvs[r][1];r--;var m=t.cvs[r][0],g=t.cvs[r][1],v=s*o,x=s*(1-o),y=(1-s)*(1-o),b=(1-s)*o;return l.x=y*c+x*d+b*m+v*p,l.y=y*u+x*h+b*g+v*f,l}function kxe(e,t,r){var n,i,a,s=r.x,o=r.y,l=r.z||0,c={};for(a=0;a<3;a++)if(!t||2!==a||void 0!==r.z)switch(0===a?(n=s,i=-1!=="ew".indexOf(e.axis[a])?"x":"y"):1===a?(n=o,i=-1!=="ns".indexOf(e.axis[a])?"y":"x"):(n=l,i="z"),e.axis[a]){case"e":case"n":c[i]=n;break;case"w":case"s":c[i]=-n;break;case"u":void 0!==r[i]&&(c.z=n);break;case"d":void 0!==r[i]&&(c.z=-n);break;default:return null}return c}function Sxe(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function jxe(e){if("function"===typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!==typeof e||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function Exe(e,t,r,n){var i,a=void 0!==(r=Array.isArray(r)?Sxe(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function(e){jxe(e.x),jxe(e.y)}(r),e.datum&&t.datum&&function(e,t){return(1===e.datum.datum_type||2===e.datum.datum_type||3===e.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==e.datumCode}(e,t)&&(r=Exe(e,i=new mxe("WGS84"),r,n),e=i),n&&"enu"!==e.axis&&(r=kxe(e,!1,r)),"longlat"===e.projName)r={x:r.x*dve,y:r.y*dve,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),!(r=e.inverse(r)))return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=yxe(e.datum,t.datum,r))return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),"longlat"===t.projName?r={x:r.x*hve,y:r.y*hve,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),n&&"enu"!==t.axis?kxe(t,!0,r):(r&&!a&&delete r.z,r)}var Cxe=mxe("WGS84");function Nxe(e,t,r,n){var i,a,s;return Array.isArray(r)?(i=Exe(e,t,r,n)||{x:NaN,y:NaN},r.length>2?"undefined"!==typeof e.name&&"geocent"===e.name||"undefined"!==typeof t.name&&"geocent"===t.name?"number"===typeof i.z?[i.x,i.y,i.z].concat(r.slice(3)):[i.x,i.y,r[2]].concat(r.slice(3)):[i.x,i.y].concat(r.slice(2)):[i.x,i.y]):(a=Exe(e,t,r,n),2===(s=Object.keys(r)).length||s.forEach((function(n){if("undefined"!==typeof e.name&&"geocent"===e.name||"undefined"!==typeof t.name&&"geocent"===t.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;a[n]=r[n]})),a)}function Txe(e){return e instanceof mxe?e:e.oProj?e.oProj:mxe(e)}const Pxe=function(e,t,r){e=Txe(e);var n,i=!1;return"undefined"===typeof t?(t=e,e=Cxe,i=!0):("undefined"!==typeof t.x||Array.isArray(t))&&(r=t,t=e,e=Cxe,i=!0),t=Txe(t),r?Nxe(e,t,r):(n={forward:function(r,n){return Nxe(e,t,r,n)},inverse:function(r,n){return Nxe(t,e,r,n)}},i&&(n.oProj=t),n)};var Axe="AJSAJS",Mxe="AFAFAF",Ixe=65,Oxe=73,Dxe=79,Rxe=86,Lxe=90;const Fxe={forward:$xe,inverse:function(e){var t=Vxe(Wxe(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:Bxe};function $xe(e,t){return t=t||5,function(e,t){var r="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+function(e,t,r){var n=Gxe(r),i=Math.floor(e/1e5),a=Math.floor(t/1e5)%20;return function(e,t,r){var n=r-1,i=Axe.charCodeAt(n),a=Mxe.charCodeAt(n),s=i+e-1,o=a+t,l=!1;s>Lxe&&(s=s-Lxe+Ixe-1,l=!0);(s===Oxe||i<Oxe&&s>Oxe||(s>Oxe||i<Oxe)&&l)&&s++;(s===Dxe||i<Dxe&&s>Dxe||(s>Dxe||i<Dxe)&&l)&&++s===Oxe&&s++;s>Lxe&&(s=s-Lxe+Ixe-1);o>Rxe?(o=o-Rxe+Ixe-1,l=!0):l=!1;(o===Oxe||a<Oxe&&o>Oxe||(o>Oxe||a<Oxe)&&l)&&o++;(o===Dxe||a<Dxe&&o>Dxe||(o>Dxe||a<Dxe)&&l)&&++o===Oxe&&o++;o>Rxe&&(o=o-Rxe+Ixe-1);return String.fromCharCode(s)+String.fromCharCode(o)}(i,a,n)}(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+n.substr(n.length-5,t)}(function(e){var t,r,n,i,a,s,o,l,c=e.lat,u=e.lon,d=6378137,h=.00669438,p=.9996,f=zxe(c),m=zxe(u);l=Math.floor((u+180)/6)+1,180===u&&(l=60);c>=56&&c<64&&u>=3&&u<12&&(l=32);c>=72&&c<84&&(u>=0&&u<9?l=31:u>=9&&u<21?l=33:u>=21&&u<33?l=35:u>=33&&u<42&&(l=37));o=zxe(6*(l-1)-180+3),t=h/(1-h),r=d/Math.sqrt(1-h*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),i=t*Math.cos(f)*Math.cos(f),a=Math.cos(f)*(m-o),s=d*((1-h/4-3*h*h/64-5*h*h*h/256)*f-(3*h/8+3*h*h/32+45*h*h*h/1024)*Math.sin(2*f)+(15*h*h/256+45*h*h*h/1024)*Math.sin(4*f)-35*h*h*h/3072*Math.sin(6*f));var g=p*r*(a+(1-n+i)*a*a*a/6+(5-18*n+n*n+72*i-58*t)*a*a*a*a*a/120)+5e5,v=p*(s+r*Math.tan(f)*(a*a/2+(5-n+9*i+4*i*i)*a*a*a*a/24+(61-58*n+n*n+600*i-330*t)*a*a*a*a*a*a/720));c<0&&(v+=1e7);return{northing:Math.round(v),easting:Math.round(g),zoneNumber:l,zoneLetter:Hxe(c)}}({lat:e[1],lon:e[0]}),t)}function Bxe(e){var t=Vxe(Wxe(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function zxe(e){return e*(Math.PI/180)}function Uxe(e){return e/Math.PI*180}function Vxe(e){var t=e.northing,r=e.easting,n=e.zoneLetter,i=e.zoneNumber;if(i<0||i>60)return null;var a,s,o,l,c,u,d,h,p,f=.9996,m=6378137,g=.00669438,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),x=r-5e5,y=t;n<"N"&&(y-=1e7),d=6*(i-1)-180+3,a=.006739496752268451,p=(h=y/f/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*h)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*h)+151*v*v*v/96*Math.sin(6*h),s=m/Math.sqrt(1-g*Math.sin(p)*Math.sin(p)),o=Math.tan(p)*Math.tan(p),l=a*Math.cos(p)*Math.cos(p),c=.99330562*m/Math.pow(1-g*Math.sin(p)*Math.sin(p),1.5),u=x/(s*f);var b=p-s*Math.tan(p)/c*(u*u/2-(5+3*o+10*l-4*l*l-9*a)*u*u*u*u/24+(61+90*o+298*l+45*o*o-1.6983531815716497-3*l*l)*u*u*u*u*u*u/720);b=Uxe(b);var w,_=(u-(1+2*o+l)*u*u*u/6+(5-2*l+28*o-3*l*l+8*a+24*o*o)*u*u*u*u*u/120)/Math.cos(p);if(_=d+Uxe(_),e.accuracy){var k=Vxe({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});w={top:k.lat,right:k.lon,bottom:b,left:_}}else w={lat:b,lon:_};return w}function Hxe(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function Gxe(e){var t=e%6;return 0===t&&(t=6),t}function Wxe(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,r=e.length,n=null,i="",a=0;!/[A-Z]/.test(t=e.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+e;i+=t,a++}var s=parseInt(i,10);if(0===a||a+3>r)throw"MGRSPoint bad conversion from: "+e;var o=e.charAt(a++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+e;n=e.substring(a,a+=2);for(var l=Gxe(s),c=function(e,t){var r=Axe.charCodeAt(t-1),n=1e5,i=!1;for(;r!==e.charCodeAt(0);){if(++r===Oxe&&r++,r===Dxe&&r++,r>Lxe){if(i)throw"Bad character: "+e;r=Ixe,i=!0}n+=1e5}return n}(n.charAt(0),l),u=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var r=Mxe.charCodeAt(t-1),n=0,i=!1;for(;r!==e.charCodeAt(0);){if(++r===Oxe&&r++,r===Dxe&&r++,r>Rxe){if(i)throw"Bad character: "+e;r=Ixe,i=!0}n+=1e5}return n}(n.charAt(1),l);u<qxe(o);)u+=2e6;var d=r-a;if(d%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var h,p,f,m=d/2,g=0,v=0;return m>0&&(h=1e5/Math.pow(10,m),p=e.substring(a,a+m),g=parseFloat(p)*h,f=e.substring(a+m),v=parseFloat(f)*h),{easting:g+c,northing:v+u,zoneLetter:o,zoneNumber:s,accuracy:h}}function qxe(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Kxe(e,t,r){if(!(this instanceof Kxe))return new Kxe(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"===typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"===typeof e&&"undefined"===typeof t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Kxe.fromMGRS=function(e){return new Kxe(Bxe(e))},Kxe.prototype.toMGRS=function(e){return $xe([this.x,this.y],e)};const Zxe=Kxe;var Yxe=.046875,Xxe=.01953125,Qxe=.01068115234375;function Jxe(e){var t=[];t[0]=1-e*(.25+e*(Yxe+e*(Xxe+e*Qxe))),t[1]=e*(.75-e*(Yxe+e*(Xxe+e*Qxe)));var r=e*e;return t[2]=r*(.46875-e*(.013020833333333334+.007120768229166667*e)),r*=e,t[3]=r*(.3645833333333333-.005696614583333333*e),t[4]=r*e*.3076171875,t}function eye(e,t,r,n){return r*=t,t*=t,n[0]*e-r*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}function tye(e,t,r){for(var n=1/(1-t),i=e,a=20;a;--a){var s=Math.sin(i),o=1-t*s*s;if(i-=o=(eye(i,s,Math.cos(i),r)-e)*(o*Math.sqrt(o))*n,Math.abs(o)<uve)return i}return i}const rye={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Jxe(this.es),this.ml0=eye(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,r,n,i=e.x,a=e.y,s=Hve(i-this.long0),o=Math.sin(a),l=Math.cos(a);if(this.es){var c=l*s,u=Math.pow(c,2),d=this.ep2*Math.pow(l,2),h=Math.pow(d,2),p=Math.abs(l)>uve?Math.tan(a):0,f=Math.pow(p,2),m=Math.pow(f,2);t=1-this.es*Math.pow(o,2),c/=Math.sqrt(t);var g=eye(a,o,l,this.en);r=this.a*(this.k0*c*(1+u/6*(1-f+d+u/20*(5-18*f+m+14*d-58*f*d+u/42*(61+179*m-m*f-479*f)))))+this.x0,n=this.a*(this.k0*(g-this.ml0+o*s*c/2*(1+u/12*(5-f+9*d+4*h+u/30*(61+m-58*f+270*d-330*f*d+u/56*(1385+543*m-m*f-3111*f))))))+this.y0}else{var v=l*Math.sin(s);if(Math.abs(Math.abs(v)-1)<uve)return 93;if(r=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=l*Math.cos(s)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(n))>=1){if(v-1>uve)return 93;n=0}else n=Math.acos(n);a<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=r,e.y=n,e},inverse:function(e){var t,r,n,i,a=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);if(this.es)if(r=tye(t=this.ml0+s/this.k0,this.es,this.en),Math.abs(r)<cve){var o=Math.sin(r),l=Math.cos(r),c=Math.abs(l)>uve?Math.tan(r):0,u=this.ep2*Math.pow(l,2),d=Math.pow(u,2),h=Math.pow(c,2),p=Math.pow(h,2);t=1-this.es*Math.pow(o,2);var f=a*Math.sqrt(t)/this.k0,m=Math.pow(f,2);n=r-(t*=c)*m/(1-this.es)*.5*(1-m/12*(5+3*h-9*u*h+u-4*d-m/30*(61+90*h-252*u*h+45*p+46*u-m/56*(1385+3633*h+4095*p+1574*p*h)))),i=Hve(this.long0+f*(1-m/6*(1+2*h+u-m/20*(5+28*h+24*p+8*u*h+6*u-m/42*(61+662*h+1320*p+720*p*h))))/l)}else n=cve*Vve(s),i=0;else{var g=Math.exp(a/this.k0),v=.5*(g-1/g),x=this.lat0+s/this.k0,y=Math.cos(x);t=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(v,2))),n=Math.asin(t),s<0&&(n=-n),i=0===v&&0===y?0:Hve(Math.atan2(v,y)+this.long0)}return e.x=i,e.y=n,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function nye(e){var t=Math.exp(e);return t=(t-1/t)/2}function iye(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),n=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function aye(e){var t=Math.abs(e);return t=function(e){var t=1+e,r=t-1;return 0===r?e:e*Math.log(t)/r}(t*(1+t/(iye(1,t)+1))),e<0?-t:t}function sye(e,t){for(var r,n=2*Math.cos(2*t),i=e.length-1,a=e[i],s=0;--i>=0;)r=n*a-s+e[i],s=a,a=r;return t+r*Math.sin(2*t)}function oye(e,t,r){for(var n,i,a=Math.sin(t),s=Math.cos(t),o=nye(r),l=function(e){var t=Math.exp(e);return(t+1/t)/2}(r),c=2*s*l,u=-2*a*o,d=e.length-1,h=e[d],p=0,f=0,m=0;--d>=0;)n=f,i=p,h=c*(f=h)-n-u*(p=m)+e[d],m=u*f-i+c*p;return[(c=a*l)*h-(u=s*o)*m,c*m+u*h]}const lye={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(rye.init.apply(this),this.forward=rye.forward,this.inverse=rye.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),r*=t,this.cgb[1]=r*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r*=t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),r*=t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(t*(-24832/14175)-2.4)),r*=t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r*=t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),r*=t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r*=t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r*=t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r*=t,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=.6650675310896665*r;var n=sye(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(e,t){for(var r,n=2*Math.cos(t),i=e.length-1,a=e[i],s=0;--i>=0;)r=n*a-s+e[i],s=a,a=r;return Math.sin(t)*r}(this.gtu,2*n))},forward:function(e){var t=Hve(e.x-this.long0),r=e.y;r=sye(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),a=Math.sin(t),s=Math.cos(t);r=Math.atan2(n,s*i),t=Math.atan2(a*i,iye(n,i*s)),t=aye(Math.tan(t));var o,l,c=oye(this.gtu,2*r,2*t);return r+=c[0],t+=c[1],Math.abs(t)<=2.623395162778?(o=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*r+this.Zb)+this.y0):(o=1/0,l=1/0),e.x=o,e.y=l,e},inverse:function(e){var t,r,n=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var a=oye(this.utg,2*i,2*n);i+=a[0],n+=a[1],n=Math.atan(nye(n));var s=Math.sin(i),o=Math.cos(i),l=Math.sin(n),c=Math.cos(n);i=Math.atan2(s*c,iye(l,c*o)),t=Hve((n=Math.atan2(l,c*o))+this.long0),r=sye(this.cgb,i)}else t=1/0,r=1/0;return e.x=t,e.y=r,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]};const cye={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(Hve(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*dve,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,lye.init.apply(this),this.forward=lye.forward,this.inverse=lye.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function uye(e,t){return Math.pow((1-e)/(1+e),t)}const dye={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+pve)/(Math.pow(Math.tan(.5*this.lat0+pve),this.C)*uye(this.e*e,this.ratexp))},forward:function(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+pve),this.C)*uye(this.e*Math.sin(r),this.ratexp))-cve,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,r=e.y,n=Math.pow(Math.tan(.5*r+pve)/this.K,1/this.C),i=20;i>0&&(r=2*Math.atan(n*uye(this.e*Math.sin(e.y),-.5*this.e))-cve,!(Math.abs(r-e.y)<1e-14));--i)e.y=r;return i?(e.x=t,e.y=r,e):null},names:["gauss"]};const hye={init:function(){dye.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,r,n,i;return e.x=Hve(e.x-this.long0),dye.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n),e.x=i*r*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*r*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,r,n,i,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=iye(e.x,e.y)){var s=2*Math.atan2(a,this.R2);t=Math.sin(s),r=Math.cos(s),i=Math.asin(r*this.sinc0+e.y*t*this.cosc0/a),n=Math.atan2(e.x*t,a*this.cosc0*r-e.y*this.sinc0*t)}else i=this.phic0,n=0;return e.x=n,e.y=i,dye.inverse.apply(this,[e]),e.x=Hve(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};const pye={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=uve&&(this.k0=.5*(1+Vve(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=uve&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=uve&&Math.abs(Math.cos(this.lat_ts))>uve&&(this.k0=.5*this.cons*Uve(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Gve(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Uve(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-cve,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,r,n,i,a,s,o=e.x,l=e.y,c=Math.sin(l),u=Math.cos(l),d=Hve(o-this.long0);return Math.abs(Math.abs(o-this.long0)-Math.PI)<=uve&&Math.abs(l+this.lat0)<=uve?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*c+this.coslat0*u*Math.cos(d)),e.x=this.a*t*u*Math.sin(d)+this.x0,e.y=this.a*t*(this.coslat0*c-this.sinlat0*u*Math.cos(d))+this.y0,e):(r=2*Math.atan(this.ssfn_(l,c,this.e))-cve,i=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=uve?(a=Gve(this.e,l*this.con,this.con*c),s=2*this.a*this.k0*a/this.cons,e.x=this.x0+s*Math.sin(o-this.long0),e.y=this.y0-this.con*s*Math.cos(o-this.long0),e):(Math.abs(this.sinlat0)<uve?(t=2*this.a*this.k0/(1+i*Math.cos(d)),e.y=t*n):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*i*Math.cos(d))),e.y=t*(this.cosX0*n-this.sinX0*i*Math.cos(d))+this.y0),e.x=t*i*Math.sin(d)+this.x0,e))},inverse:function(e){var t,r,n,i,a;e.x-=this.x0,e.y-=this.y0;var s=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var o=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,r=this.lat0,s<=uve?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(o)*this.sinlat0+e.y*Math.sin(o)*this.coslat0/s),t=Math.abs(this.coslat0)<uve?this.lat0>0?Hve(this.long0+Math.atan2(e.x,-1*e.y)):Hve(this.long0+Math.atan2(e.x,e.y)):Hve(this.long0+Math.atan2(e.x*Math.sin(o),s*this.coslat0*Math.cos(o)-e.y*this.sinlat0*Math.sin(o))),e.x=t,e.y=r,e)}if(Math.abs(this.coslat0)<=uve){if(s<=uve)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,n=s*this.cons/(2*this.a*this.k0),r=this.con*Wve(this.e,n),t=this.con*Hve(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=uve?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/s),t=Hve(this.long0+Math.atan2(e.x*Math.sin(i),s*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),r=-1*Wve(this.e,Math.tan(.5*(cve+a)));return e.x=t,e.y=r,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(e,t,r){return t*=r,Math.tan(.5*(cve+e))*Math.pow((1-t)/(1+t),.5*r)}};const fye={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),a=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(t,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+a*t)/(1-a*t));this.K=s-this.alpha*o+this.alpha*a/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(e.x-this.lambda0),s=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return e.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,e.x=this.R*s+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,r=e.y-this.y0,n=t/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+s/this.alpha,l=0,c=a,u=-1e3,d=0;Math.abs(c-u)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=o,e.y=c,e},names:["somerc"]};var mye=1e-7;const gye={init:function(){var e,t,r,n,i,a,s,o,l,c,u,d=0,h=0,p=0,f=0,m=0,g=0,v=0;this.no_off=function(e){var t="object"===typeof e.PROJECTION?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(t)}(this),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var y=!1;if("rectified_grid_angle"in this&&(y=!0),x&&(v=this.alpha),y&&(d=this.rectified_grid_angle*dve),x||y)h=this.longc;else if(p=this.long1,m=this.lat1,f=this.long2,g=this.lat2,Math.abs(m-g)<=mye||(e=Math.abs(m))<=mye||Math.abs(e-cve)<=mye||Math.abs(Math.abs(this.lat0)-cve)<=mye||Math.abs(Math.abs(g)-cve)<=mye)throw new Error;var b=1-this.es;t=Math.sqrt(b),Math.abs(this.lat0)>uve?(o=Math.sin(this.lat0),r=Math.cos(this.lat0),e=1-this.es*o*o,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/b),this.A=this.B*this.k0*t/e,(i=(n=this.B*t/(r*Math.sqrt(e)))*n-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(Gve(this.e,this.lat0,o),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=i=1),x||y?(x?(u=Math.asin(Math.sin(v)/n),y||(d=v)):(u=d,v=Math.asin(n*Math.sin(u))),this.lam0=h-Math.asin(.5*(i-1/i)*Math.tan(u))/this.B):(a=Math.pow(Gve(this.e,m,Math.sin(m)),this.B),s=Math.pow(Gve(this.e,g,Math.sin(g)),this.B),i=this.E/a,l=(s-a)/(s+a),c=((c=this.E*this.E)-s*a)/(c+s*a),(e=p-f)<-Math.pi?f-=fve:e>Math.pi&&(f+=fve),this.lam0=Hve(.5*(p+f)-Math.atan(c*Math.tan(.5*this.B*(p-f))/l)/this.B),u=Math.atan(2*Math.sin(this.B*Hve(p-this.lam0))/(i-1/i)),d=v=Math.asin(n*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(pve-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(pve+i))},forward:function(e){var t,r,n,i,a,s,o,l,c={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-cve)>uve){if(t=.5*((a=this.E/Math.pow(Gve(this.e,e.y,Math.sin(e.y)),this.B))-(s=1/a)),r=.5*(a+s),i=Math.sin(this.B*e.x),n=(t*this.singam-i*this.cosgam)/r,Math.abs(Math.abs(n)-1)<uve)throw new Error;l=.5*this.ArB*Math.log((1-n)/(1+n)),s=Math.cos(this.B*e.x),o=Math.abs(s)<mye?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+i*this.singam,s)}else l=e.y>0?this.v_pole_n:this.v_pole_s,o=this.ArB*e.y;return this.no_rot?(c.x=o,c.y=l):(o-=this.u_0,c.x=l*this.cosrot+o*this.sinrot,c.y=o*this.cosrot-l*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(e){var t,r,n,i,a,s,o,l={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(r=e.y,t=e.x):(r=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=.5*((n=Math.exp(-this.BrA*r))-1/n),a=.5*(n+1/n),o=((s=Math.sin(this.BrA*t))*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(o)-1)<uve)l.x=0,l.y=o<0?-cve:cve;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=Wve(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};const vye={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<uve)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),n=Uve(this.e,t,r),i=Gve(this.e,this.lat1,t),a=Math.sin(this.lat2),s=Math.cos(this.lat2),o=Uve(this.e,a,s),l=Gve(this.e,this.lat2,a),c=Gve(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>uve?this.ns=Math.log(n/o)/Math.log(i/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=uve&&(r=Vve(r)*(cve-2e-10));var n,i,a=Math.abs(Math.abs(r)-cve);if(a>uve)n=Gve(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if((a=r*this.ns)<=0)return null;i=0}var s=this.ns*Hve(t-this.long0);return e.x=this.k0*(i*Math.sin(s))+this.x0,e.y=this.k0*(this.rh-i*Math.cos(s))+this.y0,e},inverse:function(e){var t,r,n,i,a,s=(e.x-this.x0)/this.k0,o=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+o*o),r=1):(t=-Math.sqrt(s*s+o*o),r=-1);var l=0;if(0!==t&&(l=Math.atan2(r*s,r*o)),0!==t||this.ns>0){if(r=1/this.ns,n=Math.pow(t/(this.a*this.f0),r),-9999===(i=Wve(this.e,n)))return null}else i=-cve;return a=Hve(l/this.ns+this.long0),e.x=a,e.y=i,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};const xye={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,r,n,i,a,s,o,l=e.x,c=e.y,u=Hve(l-this.long0);return t=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/t)-this.s45),n=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),a=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),s=this.n*a,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=o*Math.cos(s)/1,e.x=o*Math.sin(s)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,r,n,i,a,s,o,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),a=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(t)),e.x=this.long0-r/this.alfa,s=t,o=0;var c=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-e.y)<1e-10&&(o=1),s=e.y,c+=1}while(0===o&&c<15);return c>=15?null:e},names:["Krovak","krovak"]};function yye(e,t,r,n,i){return e*i-t*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)}function bye(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function wye(e){return.375*e*(1+.25*e*(1+.46875*e))}function _ye(e){return.05859375*e*e*(1+.75*e)}function kye(e){return e*e*e*(35/3072)}function Sye(e,t,r){var n=t*r;return e/Math.sqrt(1-n*n)}function jye(e){return Math.abs(e)<cve?e:e-Vve(e)*Math.PI}function Eye(e,t,r,n,i){var a,s;a=e/t;for(var o=0;o<15;o++)if(a+=s=(e-(t*a-r*Math.sin(2*a)+n*Math.sin(4*a)-i*Math.sin(6*a)))/(t-2*r*Math.cos(2*a)+4*n*Math.cos(4*a)-6*i*Math.cos(6*a)),Math.abs(s)<=1e-10)return a;return NaN}const Cye={init:function(){this.sphere||(this.e0=bye(this.es),this.e1=wye(this.es),this.e2=_ye(this.es),this.e3=kye(this.es),this.ml0=this.a*yye(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,r,n=e.x,i=e.y;if(n=Hve(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var a=Math.sin(i),s=Math.cos(i),o=Sye(this.a,this.e,a),l=Math.tan(i)*Math.tan(i),c=n*Math.cos(i),u=c*c,d=this.es*s*s/(1-this.es);t=o*c*(1-u*l*(1/6-(8-l+8*d)*u/120)),r=this.a*yye(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+o*a/s*u*(.5+(5-l+6*d)*u/24)}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n=e.x/this.a,i=e.y/this.a;if(this.sphere){var a=i+this.lat0;t=Math.asin(Math.sin(a)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(a))}else{var s=Eye(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-cve)<=uve)return e.x=this.long0,e.y=cve,i<0&&(e.y*=-1),e;var o=Sye(this.a,this.e,Math.sin(s)),l=o*o*o/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),u=n*this.a/o,d=u*u;t=s-o*Math.tan(s)/l*u*u*(.5-(1+3*c)*u*u/24),r=u*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(s)}return e.x=Hve(r+this.long0),e.y=jye(t),e},names:["Cassini","Cassini_Soldner","cass"]};function Nye(e,t){var r;return e>1e-7?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t}var Tye=.3333333333333333,Pye=.17222222222222222,Aye=.10257936507936508,Mye=.06388888888888888,Iye=.0664021164021164,Oye=.016415012942191543;const Dye={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-cve)<uve?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<uve?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Nye(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,r=[];return r[0]=e*Tye,t=e*e,r[0]+=t*Pye,r[1]=t*Mye,t*=e,r[0]+=t*Aye,r[1]+=t*Iye,r[2]=t*Oye,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Nye(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,r,n,i,a,s,o,l,c,u,d=e.x,h=e.y;if(d=Hve(d-this.long0),this.sphere){if(a=Math.sin(h),u=Math.cos(h),n=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+u*n:1+this.sinph0*a+this.cosph0*u*n)<=uve)return null;t=(r=Math.sqrt(2/r))*u*Math.sin(d),r*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*u*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.lat0)<uve)return null;r=pve-.5*h,t=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(d),r*=n}}else{switch(o=0,l=0,c=0,n=Math.cos(d),i=Math.sin(d),a=Math.sin(h),s=Nye(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(o=s/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:c=1+this.sinb1*o+this.cosb1*l*n;break;case this.EQUIT:c=1+l*n;break;case this.N_POLE:c=cve+h,s=this.qp-s;break;case this.S_POLE:c=h-cve,s=this.qp+s}if(Math.abs(c)<uve)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),r=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*o-this.sinb1*l*n):(c=Math.sqrt(2/(1+l*n)))*o*this.ymf,t=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:s>=0?(t=(c=Math.sqrt(s))*i,r=n*(this.mode===this.S_POLE?c:-c)):t=r=0}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,a,s,o,l=e.x/this.a,c=e.y/this.a;if(this.sphere){var u,d=0,h=0;if((r=.5*(u=Math.sqrt(l*l+c*c)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=Math.sin(r),d=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(u)<=uve?0:Math.asin(c*h/u),l*=h,c=d*u;break;case this.OBLIQ:r=Math.abs(u)<=uve?this.lat0:Math.asin(d*this.sinph0+c*h*this.cosph0/u),l*=h*this.cosph0,c=(d-Math.sin(r)*this.sinph0)*u;break;case this.N_POLE:c=-c,r=cve-r;break;case this.S_POLE:r-=cve}t=0!==c||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,c):0}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,c*=this.dd,(s=Math.sqrt(l*l+c*c))<uve)return e.x=this.long0,e.y=this.lat0,e;i=2*Math.asin(.5*s/this.rq),n=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(o=n*this.sinb1+c*i*this.cosb1/s,a=this.qp*o,c=s*this.cosb1*n-c*this.sinb1*i):(o=c*i/s,a=this.qp*o,c=s*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),!(a=l*l+c*c))return e.x=this.long0,e.y=this.lat0,e;o=1-a/this.qp,this.mode===this.S_POLE&&(o=-o)}t=Math.atan2(l,c),r=function(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}(Math.asin(o),this.apa)}return e.x=Hve(this.long0+t),e.y=r,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Rye(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}const Lye={init:function(){Math.abs(this.lat1+this.lat2)<uve||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Uve(this.e3,this.sin_po,this.cos_po),this.qs1=Nye(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Uve(this.e3,this.sin_po,this.cos_po),this.qs2=Nye(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Nye(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>uve?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=Nye(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*Hve(t-this.long0),s=i*Math.sin(a)+this.x0,o=this.rh-i*Math.cos(a)+this.y0;return e.x=s,e.y=o,e},inverse:function(e){var t,r,n,i,a,s;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),i=0,0!==t&&(i=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,s=this.phi1z(this.e3,r)),a=Hve(i/this.ns0+this.long0),e.x=a,e.y=s,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var r,n,i,a,s=Rye(.5*t);if(e<uve)return s;for(var o=e*e,l=1;l<=25;l++)if(s+=a=.5*(i=1-(n=e*(r=Math.sin(s)))*n)*i/Math.cos(s)*(t/(1-o)-r/i+.5/e*Math.log((1-n)/(1+n))),Math.abs(a)<=1e-7)return s;return null}};const Fye={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,r,n,i,a,s,o,l=e.x,c=e.y;return n=Hve(l-this.long0),t=Math.sin(c),r=Math.cos(c),i=Math.cos(n),(a=this.sin_p14*t+this.cos_p14*r*i)>0||Math.abs(a)<=uve?(s=this.x0+1*this.a*r*Math.sin(n)/a,o=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*i)/a):(s=this.x0+this.infinity_dist*r*Math.sin(n),o=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*i)),e.x=s,e.y=o,e},inverse:function(e){var t,r,n,i,a,s;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),r=Math.sin(i),s=Rye((n=Math.cos(i))*this.sin_p14+e.y*r*this.cos_p14/t),a=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r),a=Hve(this.long0+a)):(s=this.phic0,a=0),e.x=a,e.y=s,e},names:["gnom"]};const $ye={init:function(){this.sphere||(this.k0=Uve(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,r,n=e.x,i=e.y,a=Hve(n-this.long0);if(this.sphere)t=this.x0+this.a*a*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var s=Nye(this.e,Math.sin(i));t=this.x0+this.a*this.k0*a,r=this.y0+this.a*s*.5/this.k0}return e.x=t,e.y=r,e},inverse:function(e){var t,r;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=Hve(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=function(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*cve:cve;for(var n,i,a,s,o=Math.asin(.5*t),l=0;l<30;l++)if(i=Math.sin(o),a=Math.cos(o),s=e*i,o+=n=Math.pow(1-s*s,2)/(2*a)*(t/(1-e*e)-i/(1-s*s)+.5/e*Math.log((1-s)/(1+s))),Math.abs(n)<=1e-10)return o;return NaN}(this.e,2*e.y*this.k0/this.a),t=Hve(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e},names:["cea"]};const Bye={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,r=e.y,n=Hve(t-this.long0),i=jye(r-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*i,e},inverse:function(e){var t=e.x,r=e.y;return e.x=Hve(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=jye(this.lat0+(r-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};const zye={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=bye(this.es),this.e1=wye(this.es),this.e2=_ye(this.es),this.e3=kye(this.es),this.ml0=this.a*yye(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,r,n,i=e.x,a=e.y,s=Hve(i-this.long0);if(n=s*Math.sin(a),this.sphere)Math.abs(a)<=uve?(t=this.a*s,r=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(a),r=this.a*(jye(a-this.lat0)+(1-Math.cos(n))/Math.tan(a)));else if(Math.abs(a)<=uve)t=this.a*s,r=-1*this.ml0;else{var o=Sye(this.a,this.e,Math.sin(a))/Math.tan(a);t=o*Math.sin(n),r=this.a*yye(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+o*(1-Math.cos(n))}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){var t,r,n,i,a,s,o,l,c;if(n=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=uve)t=Hve(n/this.a+this.long0),r=0;else{var u;for(s=this.lat0+i/this.a,o=n*n/this.a/this.a+s*s,l=s,a=20;a;--a)if(l+=c=-1*(s*(l*(u=Math.tan(l))+1)-l-.5*(l*l+o)*u)/((l-s)/u-1),Math.abs(c)<=uve){r=l;break}t=Hve(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=uve)r=0,t=Hve(this.long0+n/this.a);else{var d,h,p,f,m;for(s=(this.ml0+i)/this.a,o=n*n/this.a/this.a+s*s,l=s,a=20;a;--a)if(m=this.e*Math.sin(l),d=Math.sqrt(1-m*m)*Math.tan(l),h=this.a*yye(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(s*(d*(f=h/this.a)+1)-f-.5*d*(f*f+o))/(this.es*Math.sin(2*l)*(f*f+o-2*s*f)/(4*d)+(s-f)*(d*p-2/Math.sin(2*l))-p),Math.abs(c)<=uve){r=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=Hve(this.long0+Math.asin(n*d/this.a)/Math.sin(r))}return e.x=t,e.y=r,e},names:["Polyconic","poly"]};const Uye={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,r=e.x,n=e.y-this.lat0,i=r-this.long0,a=n/lve*1e-5,s=i,o=1,l=0;for(t=1;t<=10;t++)o*=a,l+=this.A[t]*o;var c,u=l,d=s,h=1,p=0,f=0,m=0;for(t=1;t<=6;t++)c=p*u+h*d,h=h*u-p*d,p=c,f=f+this.B_re[t]*h-this.B_im[t]*p,m=m+this.B_im[t]*h+this.B_re[t]*p;return e.x=m*this.a+this.x0,e.y=f*this.a+this.y0,e},inverse:function(e){var t,r,n=e.x,i=e.y,a=n-this.x0,s=(i-this.y0)/this.a,o=a/this.a,l=1,c=0,u=0,d=0;for(t=1;t<=6;t++)r=c*s+l*o,l=l*s-c*o,c=r,u=u+this.C_re[t]*l-this.C_im[t]*c,d=d+this.C_im[t]*l+this.C_re[t]*c;for(var h=0;h<this.iterations;h++){var p,f=u,m=d,g=s,v=o;for(t=2;t<=6;t++)p=m*u+f*d,f=f*u-m*d,m=p,g+=(t-1)*(this.B_re[t]*f-this.B_im[t]*m),v+=(t-1)*(this.B_im[t]*f+this.B_re[t]*m);f=1,m=0;var x=this.B_re[1],y=this.B_im[1];for(t=2;t<=6;t++)p=m*u+f*d,f=f*u-m*d,m=p,x+=t*(this.B_re[t]*f-this.B_im[t]*m),y+=t*(this.B_im[t]*f+this.B_re[t]*m);var b=x*x+y*y;u=(g*x+v*y)/b,d=(v*x-g*y)/b}var w=u,_=d,k=1,S=0;for(t=1;t<=9;t++)k*=w,S+=this.D[t]*k;var j=this.lat0+S*lve*1e5,E=this.long0+_;return e.x=E,e.y=j,e},names:["New_Zealand_Map_Grid","nzmg"]};const Vye={init:function(){},forward:function(e){var t=e.x,r=e.y,n=Hve(t-this.long0),i=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=i,e.y=a,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=Hve(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e},names:["Miller_Cylindrical","mill"]};const Hye={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Jxe(this.es)},forward:function(e){var t,r,n=e.x,i=e.y;if(n=Hve(n-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(i),s=20;s;--s){var o=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<uve)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;t=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);r=this.a*eye(i,l,c,this.en),t=this.a*n*c/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r/=this.C_x*(this.m+Math.cos(t)),this.m?t=Rye((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=Rye(Math.sin(t)/this.n)),r=Hve(r+this.long0),t=jye(t)):(t=tye(e.y/this.a,this.es,this.en),(n=Math.abs(t))<cve?(n=Math.sin(t),r=Hve(this.long0+e.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)))):n-uve<cve&&(r=this.long0)),e.x=r,e.y=t,e},names:["Sinusoidal","sinu"]};const Gye={init:function(){},forward:function(e){for(var t=e.x,r=e.y,n=Hve(t-this.long0),i=r,a=Math.PI*Math.sin(r);;){var s=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=s,Math.abs(s)<uve)break}i/=2,Math.PI/2-Math.abs(r)<uve&&(n=0);var o=.900316316158*this.a*n*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=o,e.y=l,e},inverse:function(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var n=Hve(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return e.x=n,e.y=i,e},names:["Mollweide","moll"]};const Wye={init:function(){Math.abs(this.lat1+this.lat2)<uve||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=bye(this.es),this.e1=wye(this.es),this.e2=_ye(this.es),this.e3=kye(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Uve(this.e,this.sinphi,this.cosphi),this.ml1=yye(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<uve?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Uve(this.e,this.sinphi,this.cosphi),this.ml2=yye(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=yye(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,r=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var i=yye(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-i)}var a=this.ns*Hve(r-this.long0),s=this.x0+t*Math.sin(a),o=this.y0+this.rh-t*Math.cos(a);return e.x=s,e.y=o,e},inverse:function(e){var t,r,n,i;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var a=0;return 0!==r&&(a=Math.atan2(t*e.x,t*e.y)),this.sphere?(i=Hve(this.long0+a/this.ns),n=jye(this.g-r/this.a),e.x=i,e.y=n,e):(n=Eye(this.g-r/this.a,this.e0,this.e1,this.e2,this.e3),i=Hve(this.long0+a/this.ns),e.x=i,e.y=n,e)},names:["Equidistant_Conic","eqdc"]};const qye={init:function(){this.R=this.a},forward:function(e){var t,r,n=e.x,i=e.y,a=Hve(n-this.long0);Math.abs(i)<=uve&&(t=this.x0+this.R*a,r=this.y0);var s=Rye(2*Math.abs(i/Math.PI));(Math.abs(a)<=uve||Math.abs(Math.abs(i)-cve)<=uve)&&(t=this.x0,r=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var o=.5*Math.abs(Math.PI/a-a/Math.PI),l=o*o,c=Math.sin(s),u=Math.cos(s),d=u/(c+u-1),h=d*d,p=d*(2/c-1),f=p*p,m=Math.PI*this.R*(o*(d-f)+Math.sqrt(l*(d-f)*(d-f)-(f+l)*(h-f)))/(f+l);a<0&&(m=-m),t=this.x0+m;var g=l+d;return m=Math.PI*this.R*(p*g-o*Math.sqrt((f+l)*(l+1)-g*g))/(f+l),r=i>=0?this.y0+m:this.y0-m,e.x=t,e.y=r,e},inverse:function(e){var t,r,n,i,a,s,o,l,c,u,d,h;return e.x-=this.x0,e.y-=this.y0,d=Math.PI*this.R,a=(n=e.x/d)*n+(i=e.y/d)*i,d=3*(i*i/(l=-2*(s=-Math.abs(i)*(1+a))+1+2*i*i+a*a)+(2*(o=s-2*i*i+n*n)*o*o/l/l/l-9*s*o/l/l)/27)/(c=(s-o*o/3/l)/l)/(u=2*Math.sqrt(-c/3)),Math.abs(d)>1&&(d=d>=0?1:-1),h=Math.acos(d)/3,r=e.y>=0?(-u*Math.cos(h+Math.PI/3)-o/3/l)*Math.PI:-(-u*Math.cos(h+Math.PI/3)-o/3/l)*Math.PI,t=Math.abs(n)<uve?this.long0:Hve(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-i*i)+a*a))/2/n),e.x=t,e.y=r,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};const Kye={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_,k=e.x,S=e.y,j=Math.sin(e.y),E=Math.cos(e.y),C=Hve(k-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=uve?(e.x=this.x0+this.a*(cve-S)*Math.sin(C),e.y=this.y0-this.a*(cve-S)*Math.cos(C),e):Math.abs(this.sin_p12+1)<=uve?(e.x=this.x0+this.a*(cve+S)*Math.sin(C),e.y=this.y0+this.a*(cve+S)*Math.cos(C),e):(x=this.sin_p12*j+this.cos_p12*E*Math.cos(C),v=(g=Math.acos(x))?g/Math.sin(g):1,e.x=this.x0+this.a*v*E*Math.sin(C),e.y=this.y0+this.a*v*(this.cos_p12*j-this.sin_p12*E*Math.cos(C)),e):(t=bye(this.es),r=wye(this.es),n=_ye(this.es),i=kye(this.es),Math.abs(this.sin_p12-1)<=uve?(a=this.a*yye(t,r,n,i,cve),s=this.a*yye(t,r,n,i,S),e.x=this.x0+(a-s)*Math.sin(C),e.y=this.y0-(a-s)*Math.cos(C),e):Math.abs(this.sin_p12+1)<=uve?(a=this.a*yye(t,r,n,i,cve),s=this.a*yye(t,r,n,i,S),e.x=this.x0+(a+s)*Math.sin(C),e.y=this.y0+(a+s)*Math.cos(C),e):(o=j/E,l=Sye(this.a,this.e,this.sin_p12),c=Sye(this.a,this.e,j),u=Math.atan((1-this.es)*o+this.es*l*this.sin_p12/(c*E)),y=0===(d=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(C)))?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(d)-Math.PI)<=uve?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(C)*Math.cos(u)/Math.sin(d)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),g=l*y*(1-(b=y*y)*(m=(p=this.e*this.cos_p12*Math.cos(d)/Math.sqrt(1-this.es))*p)*(1-m)/6+(w=b*y)/8*(f=h*p)*(1-2*m)+(_=w*y)/120*(m*(4-7*m)-3*h*h*(1-7*m))-_*y/48*f),e.x=this.x0+g*Math.sin(d),e.y=this.y0+g*Math.cos(d),e))},inverse:function(e){var t,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_,k;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*cve*this.a)return;return r=t/this.a,n=Math.sin(r),i=Math.cos(r),a=this.long0,Math.abs(t)<=uve?s=this.lat0:(s=Rye(i*this.sin_p12+e.y*n*this.cos_p12/t),o=Math.abs(this.lat0)-cve,a=Math.abs(o)<=uve?this.lat0>=0?Hve(this.long0+Math.atan2(e.x,-e.y)):Hve(this.long0-Math.atan2(-e.x,e.y)):Hve(this.long0+Math.atan2(e.x*n,t*this.cos_p12*i-e.y*this.sin_p12*n))),e.x=a,e.y=s,e}return l=bye(this.es),c=wye(this.es),u=_ye(this.es),d=kye(this.es),Math.abs(this.sin_p12-1)<=uve?(s=Eye(((h=this.a*yye(l,c,u,d,cve))-(t=Math.sqrt(e.x*e.x+e.y*e.y)))/this.a,l,c,u,d),a=Hve(this.long0+Math.atan2(e.x,-1*e.y)),e.x=a,e.y=s,e):Math.abs(this.sin_p12+1)<=uve?(h=this.a*yye(l,c,u,d,cve),s=Eye(((t=Math.sqrt(e.x*e.x+e.y*e.y))-h)/this.a,l,c,u,d),a=Hve(this.long0+Math.atan2(e.x,e.y)),e.x=a,e.y=s,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),m=Math.atan2(e.x,e.y),p=Sye(this.a,this.e,this.sin_p12),g=Math.cos(m),x=-(v=this.e*this.cos_p12*g)*v/(1-this.es),y=3*this.es*(1-x)*this.sin_p12*this.cos_p12*g/(1-this.es),_=1-x*(w=(b=t/p)-x*(1+x)*Math.pow(b,3)/6-y*(1+3*x)*Math.pow(b,4)/24)*w/2-b*w*w*w/6,f=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*g),a=Hve(this.long0+Math.asin(Math.sin(m)*Math.sin(w)/Math.cos(f))),k=Math.sin(f),s=Math.atan2((k-this.es*_*this.sin_p12)*Math.tan(f),k*(1-this.es)),e.x=a,e.y=s,e)},names:["Azimuthal_Equidistant","aeqd"]};const Zye={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,r,n,i,a,s,o,l=e.x,c=e.y;return n=Hve(l-this.long0),t=Math.sin(c),r=Math.cos(c),i=Math.cos(n),((a=this.sin_p14*t+this.cos_p14*r*i)>0||Math.abs(a)<=uve)&&(s=1*this.a*r*Math.sin(n),o=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*i)),e.x=s,e.y=o,e},inverse:function(e){var t,r,n,i,a,s,o;return e.x-=this.x0,e.y-=this.y0,r=Rye((t=Math.sqrt(e.x*e.x+e.y*e.y))/this.a),n=Math.sin(r),i=Math.cos(r),s=this.long0,Math.abs(t)<=uve?(o=this.lat0,e.x=s,e.y=o,e):(o=Rye(i*this.sin_p14+e.y*n*this.cos_p14/t),a=Math.abs(this.lat0)-cve,Math.abs(a)<=uve?(s=this.lat0>=0?Hve(this.long0+Math.atan2(e.x,-e.y)):Hve(this.long0-Math.atan2(-e.x,e.y)),e.x=s,e.y=o,e):(s=Hve(this.long0+Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n)),e.x=s,e.y=o,e))},names:["ortho"]};var Yye=1,Xye=2,Qye=3,Jye=4,ebe=5,tbe=6,rbe=1,nbe=2,ibe=3,abe=4;function sbe(e,t,r,n){var i;return e<uve?(n.value=rbe,i=0):(i=Math.atan2(t,r),Math.abs(i)<=pve?n.value=rbe:i>pve&&i<=cve+pve?(n.value=nbe,i-=cve):i>cve+pve||i<=-(cve+pve)?(n.value=ibe,i=i>=0?i-mve:i+mve):(n.value=abe,i+=cve)),i}function obe(e,t){var r=e+t;return r<-mve?r+=fve:r>+mve&&(r-=fve),r}const lbe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=cve-pve/2?this.face=ebe:this.lat0<=-(cve-pve/2)?this.face=tbe:Math.abs(this.long0)<=pve?this.face=Yye:Math.abs(this.long0)<=cve+pve?this.face=this.long0>0?Xye:Jye:this.face=Qye,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,r,n,i,a,s,o={x:0,y:0},l={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,r=e.x,this.face===ebe)i=cve-t,r>=pve&&r<=cve+pve?(l.value=rbe,n=r-cve):r>cve+pve||r<=-(cve+pve)?(l.value=nbe,n=r>0?r-mve:r+mve):r>-(cve+pve)&&r<=-pve?(l.value=ibe,n=r+cve):(l.value=abe,n=r);else if(this.face===tbe)i=cve+t,r>=pve&&r<=cve+pve?(l.value=rbe,n=-r+cve):r<pve&&r>=-pve?(l.value=nbe,n=-r):r<-pve&&r>=-(cve+pve)?(l.value=ibe,n=-r-cve):(l.value=abe,n=r>0?-r+mve:-r-mve);else{var c,u,d,h,p,f;this.face===Xye?r=obe(r,+cve):this.face===Qye?r=obe(r,+mve):this.face===Jye&&(r=obe(r,-cve)),h=Math.sin(t),p=Math.cos(t),f=Math.sin(r),c=p*Math.cos(r),u=p*f,d=h,this.face===Yye?n=sbe(i=Math.acos(c),d,u,l):this.face===Xye?n=sbe(i=Math.acos(u),d,-c,l):this.face===Qye?n=sbe(i=Math.acos(-c),d,-u,l):this.face===Jye?n=sbe(i=Math.acos(-u),d,c,l):(i=n=0,l.value=rbe)}return s=Math.atan(12/mve*(n+Math.acos(Math.sin(n)*Math.cos(pve))-cve)),a=Math.sqrt((1-Math.cos(i))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===nbe?s+=cve:l.value===ibe?s+=mve:l.value===abe&&(s+=1.5*mve),o.x=a*Math.cos(s),o.y=a*Math.sin(s),o.x=o.x*this.a+this.x0,o.y=o.y*this.a+this.y0,e.x=o.x,e.y=o.y,e},inverse:function(e){var t,r,n,i,a,s,o,l,c,u,d,h,p={lam:0,phi:0},f={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?f.value=rbe:e.y>=0&&e.y>=Math.abs(e.x)?(f.value=nbe,t-=cve):e.x<0&&-e.x>=Math.abs(e.y)?(f.value=ibe,t=t<0?t+mve:t-mve):(f.value=abe,t+=cve),c=mve/12*Math.tan(t),a=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),s=Math.atan(a),(o=1-(n=Math.cos(t))*n*(i=Math.tan(r))*i*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?o=-1:o>1&&(o=1),this.face===ebe)l=Math.acos(o),p.phi=cve-l,f.value===rbe?p.lam=s+cve:f.value===nbe?p.lam=s<0?s+mve:s-mve:f.value===ibe?p.lam=s-cve:p.lam=s;else if(this.face===tbe)l=Math.acos(o),p.phi=l-cve,f.value===rbe?p.lam=-s+cve:f.value===nbe?p.lam=-s:f.value===ibe?p.lam=-s-cve:p.lam=s<0?-s-mve:-s+mve;else{var m,g,v;c=(m=o)*m,g=(c+=(v=c>=1?0:Math.sqrt(1-c)*Math.sin(s))*v)>=1?0:Math.sqrt(1-c),f.value===nbe?(c=g,g=-v,v=c):f.value===ibe?(g=-g,v=-v):f.value===abe&&(c=g,g=v,v=-c),this.face===Xye?(c=m,m=-g,g=c):this.face===Qye?(m=-m,g=-g):this.face===Jye&&(c=m,m=g,g=-c),p.phi=Math.acos(-v)-cve,p.lam=Math.atan2(g,m),this.face===Xye?p.lam=obe(p.lam,-cve):this.face===Qye?p.lam=obe(p.lam,-mve):this.face===Jye&&(p.lam=obe(p.lam,+cve))}return 0!==this.es&&(u=p.phi<0?1:0,d=Math.tan(p.phi),h=this.b/Math.sqrt(d*d+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-h*h)/(this.one_minus_f*h)),u&&(p.phi=-p.phi)),p.lam+=this.long0,e.x=p.lam,e.y=p.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var cbe=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ube=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],dbe=.8487,hbe=1.3523,pbe=hve/5,fbe=1/pbe,mbe=18,gbe=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))};const vbe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=Hve(e.x-this.long0),r=Math.abs(e.y),n=Math.floor(r*pbe);n<0?n=0:n>=mbe&&(n=17);var i={x:gbe(cbe[n],r=hve*(r-fbe*n))*t,y:gbe(ube[n],r)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*dbe+this.x0,i.y=i.y*this.a*hbe+this.y0,i},inverse:function(e){var t={x:(e.x-this.x0)/(this.a*dbe),y:Math.abs(e.y-this.y0)/(this.a*hbe)};if(t.y>=1)t.x/=cbe[18][0],t.y=e.y<0?-cve:cve;else{var r=Math.floor(t.y*mbe);for(r<0?r=0:r>=mbe&&(r=17);;)if(ube[r][0]>t.y)--r;else{if(!(ube[r+1][0]<=t.y))break;++r}var n=ube[r],i=5*(t.y-n[0])/(ube[r+1][0]-n[0]);i=function(e,t,r,n){for(var i=t;n;--n){var a=e(i);if(i-=a,Math.abs(a)<r)break}return i}((function(e){return(gbe(n,e)-t.y)/function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])}(n,e)}),i,uve,100),t.x/=gbe(cbe[r],i),t.y=(5*r+i)*dve,e.y<0&&(t.y=-t.y)}return t.x=Hve(t.x+this.long0),t},names:["Robinson","robin"]};const xbe={init:function(){this.name="geocent"},forward:function(e){return gxe(e,this.es,this.a)},inverse:function(e){return vxe(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var ybe=0,bbe=1,wbe=2,_be=3,kbe={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Sbe={init:function(){if(Object.keys(kbe).forEach(function(e){if("undefined"===typeof this[e])this[e]=kbe[e].def;else{if(kbe[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);kbe[e].num&&(this[e]=parseFloat(this[e]))}kbe[e].degrees&&(this[e]=this[e]*dve)}.bind(this)),Math.abs(Math.abs(this.lat0)-cve)<uve?this.mode=this.lat0<0?bbe:ybe:Math.abs(this.lat0)<uve?this.mode=wbe:(this.mode=_be,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function(e){e.x-=this.long0;var t,r,n,i,a=Math.sin(e.y),s=Math.cos(e.y),o=Math.cos(e.x);switch(this.mode){case _be:r=this.sinph0*a+this.cosph0*s*o;break;case wbe:r=s*o;break;case bbe:r=-a;break;case ybe:r=a}switch(t=(r=this.pn1/(this.p-r))*s*Math.sin(e.x),this.mode){case _be:r*=this.cosph0*a-this.sinph0*s*o;break;case wbe:r*=a;break;case ybe:r*=-s*o;break;case bbe:r*=s*o}return i=1/((n=r*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-r*this.sg)*this.cw*i,r=n*i,e.x=t*this.a,e.y=r*this.a,e},inverse:function(e){e.x/=this.a,e.y/=this.a;var t,r,n,i={x:e.x,y:e.y};n=1/(this.pn1-e.y*this.sw),t=this.pn1*e.x*n,r=this.pn1*e.y*this.cw*n,e.x=t*this.cg+r*this.sg,e.y=r*this.cg-t*this.sg;var a=iye(e.x,e.y);if(Math.abs(a)<uve)i.x=0,i.y=e.y;else{var s,o;switch(o=1-a*a*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/a+a/this.pn1),s=Math.sqrt(1-o*o),this.mode){case _be:i.y=Math.asin(s*this.sinph0+e.y*o*this.cosph0/a),e.y=(s-this.sinph0*Math.sin(i.y))*a,e.x*=o*this.cosph0;break;case wbe:i.y=Math.asin(e.y*o/a),e.y=s*a,e.x*=o;break;case ybe:i.y=Math.asin(s),e.y=-e.y;break;case bbe:i.y=-Math.asin(s)}i.x=Math.atan2(e.x,e.y)}return e.x=i.x+this.long0,e.y=i.y,e},names:["Tilted_Perspective","tpers"]};const jbe={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(e){var t,r,n,i,a=e.x,s=e.y;if(a-=this.long0,"ellipse"===this.shape){s=Math.atan(this.radius_p2*Math.tan(s));var o=this.radius_p/iye(this.radius_p*Math.cos(s),Math.sin(s));if(r=o*Math.cos(a)*Math.cos(s),n=o*Math.sin(a)*Math.cos(s),i=o*Math.sin(s),(this.radius_g-r)*r-n*n-i*i*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;t=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/iye(i,t)),e.y=this.radius_g_1*Math.atan(i/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(i/iye(n,t)))}else"sphere"===this.shape&&(t=Math.cos(s),r=Math.cos(a)*t,n=Math.sin(a)*t,i=Math.sin(s),t=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/iye(i,t)),e.y=this.radius_g_1*Math.atan(i/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(i/iye(n,t))));return e.x=e.x*this.a,e.y=e.y*this.a,e},inverse:function(e){var t,r,n,i,a=-1,s=0,o=0;if(e.x=e.x/this.a,e.y=e.y/this.a,"ellipse"===this.shape){this.flip_axis?(o=Math.tan(e.y/this.radius_g_1),s=Math.tan(e.x/this.radius_g_1)*iye(1,o)):(s=Math.tan(e.x/this.radius_g_1),o=Math.tan(e.y/this.radius_g_1)*iye(1,s));var l=o/this.radius_p;if(t=s*s+l*l+a*a,(n=(r=2*this.radius_g*a)*r-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=(-r-Math.sqrt(n))/(2*t),a=this.radius_g+i*a,s*=i,o*=i,e.x=Math.atan2(s,a),e.y=Math.atan(o*Math.cos(e.x)/a),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if("sphere"===this.shape){if(this.flip_axis?(o=Math.tan(e.y/this.radius_g_1),s=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+o*o)):(s=Math.tan(e.x/this.radius_g_1),o=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+s*s)),t=s*s+o*o+a*a,(n=(r=2*this.radius_g*a)*r-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=(-r-Math.sqrt(n))/(2*t),a=this.radius_g+i*a,s*=i,o*=i,e.x=Math.atan2(s,a),e.y=Math.atan(o*Math.cos(e.x)/a)}return e.x=e.x+this.long0,e},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var Ebe=1.340264,Cbe=-.081106,Nbe=893e-6,Tbe=.003796,Pbe=Math.sqrt(3)/2;const Abe={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(e){var t=Hve(e.x-this.long0),r=e.y,n=Math.asin(Pbe*Math.sin(r)),i=n*n,a=i*i*i;return e.x=t*Math.cos(n)/(Pbe*(Ebe+3*Cbe*i+a*(7*Nbe+9*Tbe*i))),e.y=n*(Ebe+Cbe*i+a*(Nbe+Tbe*i)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t,r,n,i,a=e.y;for(i=0;i<12&&(a-=n=(a*(Ebe+Cbe*(t=a*a)+(r=t*t*t)*(Nbe+Tbe*t))-e.y)/(Ebe+3*Cbe*t+r*(7*Nbe+9*Tbe*t)),!(Math.abs(n)<1e-9));++i);return r=(t=a*a)*t*t,e.x=Pbe*e.x*(Ebe+3*Cbe*t+r*(7*Nbe+9*Tbe*t))/Math.cos(a),e.y=Math.asin(Math.sin(a)/Pbe),e.x=Hve(e.x+this.long0),e},names:["eqearth","Equal Earth","Equal_Earth"]};var Mbe=1e-10;function Ibe(e){var t,r,n,i=Hve(e.x-(this.long0||0)),a=e.y;return t=this.am1+this.m1-eye(a,r=Math.sin(a),n=Math.cos(a),this.en),r=n*i/(t*Math.sqrt(1-this.es*r*r)),e.x=t*Math.sin(r),e.y=this.am1-t*Math.cos(r),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Obe(e){var t,r,n,i;if(e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a,r=iye(e.x,e.y=this.am1-e.y),i=tye(this.am1+this.m1-r,this.es,this.en),(t=Math.abs(i))<cve)t=Math.sin(i),n=r*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(i);else{if(!(Math.abs(t-cve)<=Mbe))throw new Error;n=0}return e.x=Hve(n+(this.long0||0)),e.y=jye(i),e}function Dbe(e){var t,r,n=Hve(e.x-(this.long0||0)),i=e.y;return r=this.cphi1+this.phi1-i,Math.abs(r)>Mbe?(e.x=r*Math.sin(t=n*Math.cos(i)/r),e.y=this.cphi1-r*Math.cos(t)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Rbe(e){var t,r;e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var n=iye(e.x,e.y=this.cphi1-e.y);if(r=this.cphi1+this.phi1-n,Math.abs(r)>cve)throw new Error;return t=Math.abs(Math.abs(r)-cve)<=Mbe?0:n*Math.atan2(e.x,e.y)/Math.cos(r),e.x=Hve(t+(this.long0||0)),e.y=jye(r),e}const Lbe={init:function(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<Mbe)throw new Error;this.es?(this.en=Jxe(this.es),this.m1=eye(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Obe,this.forward=Ibe):(Math.abs(this.phi1)+Mbe>=cve?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Rbe,this.forward=Dbe)},names:["bonne","Bonne (Werner lat_1=90)"]};Pxe.defaultDatum="WGS84",Pxe.Proj=mxe,Pxe.WGS84=new Pxe.Proj("WGS84"),Pxe.Point=Zxe,Pxe.toPoint=Sxe,Pxe.defs=Lve,Pxe.nadgrid=function(e,t){var r=new DataView(t),n=function(e){var t=e.getInt32(8,!1);if(11===t)return!1;t=e.getInt32(8,!0),11!==t&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(r),i=function(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:uxe(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}(r,n),a=function(e,t,r){for(var n=176,i=[],a=0;a<t.nSubgrids;a++){var s=hxe(e,n,r),o=pxe(e,n,s,r),l=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),c=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);i.push({ll:[cxe(s.lowerLongitude),cxe(s.lowerLatitude)],del:[cxe(s.longitudeInterval),cxe(s.latitudeInterval)],lim:[l,c],count:s.gridNodeCount,cvs:dxe(o)}),n+=176+16*s.gridNodeCount}return i}(r,i,n),s={header:i,subgrids:a};return oxe[e]=s,s},Pxe.transform=Exe,Pxe.mgrs=Fxe,Pxe.version="__VERSION__",function(e){e.Proj.projections.add(rye),e.Proj.projections.add(lye),e.Proj.projections.add(cye),e.Proj.projections.add(hye),e.Proj.projections.add(pye),e.Proj.projections.add(fye),e.Proj.projections.add(gye),e.Proj.projections.add(vye),e.Proj.projections.add(xye),e.Proj.projections.add(Cye),e.Proj.projections.add(Dye),e.Proj.projections.add(Lye),e.Proj.projections.add(Fye),e.Proj.projections.add($ye),e.Proj.projections.add(Bye),e.Proj.projections.add(zye),e.Proj.projections.add(Uye),e.Proj.projections.add(Vye),e.Proj.projections.add(Hye),e.Proj.projections.add(Gye),e.Proj.projections.add(Wye),e.Proj.projections.add(qye),e.Proj.projections.add(Kye),e.Proj.projections.add(Zye),e.Proj.projections.add(lbe),e.Proj.projections.add(vbe),e.Proj.projections.add(xbe),e.Proj.projections.add(Sbe),e.Proj.projections.add(jbe),e.Proj.projections.add(Abe),e.Proj.projections.add(Lbe)}(Pxe);const Fbe=Pxe;Fbe.defs("EPSG:25833","+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs");const $be=e=>{let{coordinates:r}=e;const[n,i]=(0,t.useState)(!1),a=r,[s,o]=Fbe("EPSG:25833","EPSG:4326",a),l=null!==r&&void 0!==r&&r.length?r.reduce((e=>(e.north=Math.max(e.north,o),e.south=Math.min(e.south,o),e.east=Math.max(e.east,s),e.west=Math.min(e.west,s),e)),{north:o,south:o,east:s,west:s}):null,c=l?{lat:(l.north+l.south)/2,lng:(l.east+l.west)/2}:{lat:0,lng:0};return(0,t.useEffect)((()=>{if(window.google&&window.google.maps)i(!0);else{const e=document.createElement("script");e.src=`https://maps.googleapis.com/maps/api/js?key=${{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_MAPS_API_KEY}&v=weekly`,e.async=!0,e.onload=()=>i(!0),e.onerror=()=>console.error("Failed to load Google Maps API"),document.head.appendChild(e)}return()=>{document.querySelectorAll("script[src*='maps.googleapis.com']").forEach((e=>e.remove()))}}),[]),n?(0,V.jsx)(cfe,{mapContainerStyle:{width:"100%",height:"100%"},center:c,zoom:18,options:{mapTypeId:"satellite",mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!1,disableDefaultUI:!0,draggable:!1,scrollwheel:!1,disableDoubleClickZoom:!0,styles:[{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]}]},children:(0,V.jsx)(Vfe,{position:{lat:o,lng:s}})}):(0,V.jsx)("div",{children:"Loading..."})},Bbe=()=>{var e,r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v,x,y,b,w,_,k,S,j,E,C,N,T,P,A,M,I,O,D,R,L,F,$,B,z,U,H,G,W,q,K,Z,Y,X,Q,J,ee,te,re,ne,ie,ae,se,oe,le,ce,ue,de,he,pe,fe,me,ge,ve,xe,ye,be,we,_e,ke,Se,je,Ee,Ce,Ne,Te,Pe,Ae,Me,Ie,Oe,De,Re,Le,Fe,$e,Be,ze,Ue,Ve,He,Ge,We,qe,Ke,Ze,Ye,Xe,Qe,Je,et,tt,rt,nt,it,at,st,ot,lt,ct,ut,dt,ht,pt,ft,mt,gt,vt,xt,yt,bt,wt,_t,kt,St,jt,Et,Ct,Nt,Tt,Pt,At,Mt,It,Ot,Dt,Rt,Lt,Ft,$t,Bt,zt,Ut,Vt,Ht,Gt,Wt,qt,Kt,Zt,Yt,Xt,Qt,Jt,er,tr,rr,nr,ir,ar,sr,or,lr,cr;const ur=Gr().pathname.split("/"),dr=ur.length>2?ur[2]:null,[hr,pr]=(0,t.useState)(!1),[fr,mr]=(0,t.useState)(!1),[gr,vr]=(0,t.useState)(null),[xr,yr]=(0,t.useState)(null),[br,wr]=(0,t.useState)(null);(0,t.useEffect)((()=>{var e;if(null!==gr&&void 0!==gr&&null!==(e=gr.additionalData)&&void 0!==e&&e.answer)try{var t;const e=null===gr||void 0===gr||null===(t=gr.additionalData)||void 0===t?void 0:t.answer;wr(e)}catch(r){console.error("Error parsing additionalData.answer:",r),wr(null)}}),[null===gr||void 0===gr?void 0:gr.additionalData]),(0,t.useEffect)((()=>{if(dr){pr(!0);const e=async()=>{try{const e=cm(g_,"plot_building",dr),t=await dg(e);let r=[];if(t.exists()){vr(t.data());const e=lm(g_,"plot_building",dr,"viewer");r=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),yr(r),pr(!1)}}catch(e){pr(!1),console.error("Error fetching plot data:",e)}};e()}}),[dr]);const[_r,kr]=(0,t.useState)(!0),Sr=null===gr||void 0===gr?void 0:gr.lamdaDataFromApi,jr=[{id:"Regulering",label:"Regulering"},...null!==Sr&&void 0!==Sr&&Sr.latestOwnership?[{id:"Eierinformasjon",label:"Eierinformasjon"}]:[],{id:"Bygninger",label:"Bygninger"},{id:"Dokument",label:"Dokument"}],[Er,Cr]=(0,t.useState)(jr[0].id),Nr=null===gr||void 0===gr?void 0:gr.CadastreDataFromApi,Tr=null===Nr||void 0===Nr||null===(e=Nr.cadastreApi)||void 0===e||null===(r=e.response)||void 0===r||null===(n=r.item)||void 0===n||null===(i=n.geojson)||void 0===i?void 0:i.bbox,Pr=Array.isArray(Tr)&&4===Tr.length,Ar=(0,t.useRef)(null),Mr=()=>{Ar.current&&Ar.current.scrollBy({left:-90,behavior:"smooth"})},Ir=()=>{Ar.current&&Ar.current.scrollBy({left:90,behavior:"smooth"})},Or=Pr&&[Tr[0]-30,Tr[1]-30,Tr[2]+30,Tr[3]+30],[Dr,Rr]=(0,t.useState)(null);(0,t.useEffect)((()=>{Pr&&(async()=>{const e=`https://wms.geonorge.no/skwms1/wms.reguleringsplaner?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&QUERY_LAYERS=Planomrade_02,Arealformal_02&LAYERS=Planomrade_02,Arealformal_02&INFO_FORMAT=text/html&CRS=EPSG:25833&BBOX=${Tr[0]},${Tr[1]},${Tr[2]},${Tr[3]}&WIDTH=800&HEIGHT=600&I=400&J=300`;try{const t=await fetch(e),r=await t.text(),n=(new DOMParser).parseFromString(r,"text/html");n.querySelectorAll("img").forEach((e=>e.remove()));const i=n.body.innerHTML;Rr(i)}catch(t){console.error("Error fetching feature info:",t),Rr("<p>Error loading data</p>")}})()}),[Pr,Tr]);const Lr=Pr?[{id:1,src:`https://wms.geonorge.no/skwms1/wms.reguleringsplaner?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&LAYERS=Planomrade_02,Arealformal_02,Grenser_og_juridiske_linjer_02&STYLES=default,default,default&CRS=EPSG:25833&BBOX=${Or[0]},${Or[1]},${Or[2]},${Or[3]}&WIDTH=800&HEIGHT=600&FORMAT=image/png`,alt:"Reguleringsplan image"},{id:2,src:`https://wms.geonorge.no/skwms1/wms.matrikkelkart?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&LAYERS=MatrikkelKart&STYLES=default&CRS=EPSG:25833&BBOX=${Or[0]},${Or[1]},${Or[2]},${Or[3]}&WIDTH=1024&HEIGHT=768&FORMAT=image/png`,alt:"Matrikkelkart image"}]:[],[Fr,$r]=(0,t.useState)(null);(0,t.useEffect)((()=>{!Fr&&Lr.length>0&&$r(Lr[0])}),[Lr,Fr]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"bg-lightPurple py-4 md:py-5 relative px-4 md:px-6",children:[(0,V.jsx)("img",{src:M4,alt:"images",className:"absolute top-0 left-0 w-full h-full",style:{zIndex:1}}),(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between relative gap-2",style:{zIndex:9},children:[(0,V.jsxs)("div",{children:[hr?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}):(0,V.jsx)("h2",{className:"text-black text-2xl md:text-[28px] desktop:text-[32px] font-semibold mb-2",children:(null===Nr||void 0===Nr||null===(a=Nr.presentationAddressApi)||void 0===a||null===(s=a.response)||void 0===s||null===(o=s.item)||void 0===o||null===(l=o.formatted)||void 0===l?void 0:l.line1)||(null===gr||void 0===gr||null===(c=gr.getAddress)||void 0===c?void 0:c.adressetekst)}),hr?(0,V.jsx)("div",{className:"w-[300px] h-[30px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)("p",{className:"text-gray text-base md:text-lg desktop:text-xl",children:(null===Nr||void 0===Nr||null===(u=Nr.presentationAddressApi)||void 0===u||null===(d=u.response)||void 0===d||null===(h=d.item)||void 0===h||null===(p=h.formatted)||void 0===p?void 0:p.line2)||`${null===gr||void 0===gr||null===(f=gr.getAddress)||void 0===f?void 0:f.kommunenummer} ${null===gr||void 0===gr||null===(m=gr.getAddress)||void 0===m?void 0:m.kommunenavn}`})]}),(0,V.jsx)("div",{className:"flex items-center gap-3 md:gap-6",children:(0,V.jsxs)("div",{className:"flex items-center gap-4",children:[hr?(0,V.jsx)("div",{className:"w-[100px] h-[20px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-gray text-sm md:text-base",children:["Gnr:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===Sr||void 0===Sr||null===(g=Sr.searchParameters)||void 0===g?void 0:g.gardsnummer})]}),hr?(0,V.jsx)("div",{className:"w-[100px] h-[20px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"text-gray text-sm md:text-base",children:["Bnr:"," ",(0,V.jsx)("span",{className:"text-black font-semibold",children:null===Sr||void 0===Sr||null===(v=Sr.searchParameters)||void 0===v?void 0:v.bruksnummer})]})]})})]})]}),(0,V.jsx)("div",{className:"bg-[#125D56] py-5 relative px-4 md:px-6",children:hr?(0,V.jsx)("div",{className:"w-full h-[30px] rounded-md custom-shimmer mb-2",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap md:flex-nowrap gap-4 lg:gap-8 desktop:gap-[70px] justify-between",children:[(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Eiendommen er"}),(0,V.jsx)("p",{className:"text-white text-sm md:text-base font-semibold",children:"ferdig regulert til boligform\xe5l"})]})]}),(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Eiendommen har en"}),(0,V.jsxs)("p",{className:"text-white text-sm md:text-base font-semibold",children:["Utnyttelsesgrad p\xe5"," ",null===br||void 0===br||null===(x=br.bya_calculations)||void 0===x||null===(y=x.input)||void 0===y?void 0:y.bya_percentage,"%"]})]})]}),(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Ekisterende BYA"}),(0,V.jsxs)("p",{className:"text-white text-sm md:text-base font-semibold",children:["Utnyttelsesgrad p\xe5"," ",((e,t,r,n,i,a)=>{const s=null!==(e=null===Nr||void 0===Nr||null===(t=Nr.buildingsApi)||void 0===t||null===(r=t.response)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.builtUpArea)))&&void 0!==e?e:[];if(null!==Sr&&void 0!==Sr&&null!==(i=Sr.eiendomsInformasjon)&&void 0!==i&&null!==(a=i.basisInformasjon)&&void 0!==a&&a.areal_beregnet){var o,l;return`${((s?s.reduce(((e,t)=>e+t),0):0)/(null===Sr||void 0===Sr||null===(o=Sr.eiendomsInformasjon)||void 0===o||null===(l=o.basisInformasjon)||void 0===l?void 0:l.areal_beregnet)*100).toFixed(2)}  %`}return"0"})()]}),(0,V.jsxs)("p",{className:"text-white text-xs md:text-sm",children:["Tilgjengelig BYA"," ",((e,t,r,n,i,a)=>{const s=null!==(e=null===Nr||void 0===Nr||null===(t=Nr.buildingsApi)||void 0===t||null===(r=t.response)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.builtUpArea)))&&void 0!==e?e:[];if(null!==br&&void 0!==br&&null!==(i=br.bya_calculations)&&void 0!==i&&null!==(a=i.results)&&void 0!==a&&a.total_allowed_bya){var o,l,c,u;const e=((s?s.reduce(((e,t)=>e+t),0):0)/(null===Sr||void 0===Sr||null===(o=Sr.eiendomsInformasjon)||void 0===o||null===(l=o.basisInformasjon)||void 0===l?void 0:l.areal_beregnet)*100).toFixed(2);return`${((null===br||void 0===br||null===(c=br.bya_calculations)||void 0===c||null===(u=c.input)||void 0===u?void 0:u.bya_percentage)-e).toFixed(2)} %`}return"0"})()]})]})]}),(0,V.jsxs)("div",{className:"w-full sm:w-[48%] md:w-1/4 flex items-start gap-3",children:[(0,V.jsx)("img",{src:A4,alt:"check"}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("p",{className:"text-white text-xs md:text-sm",children:"Boligen kan ha en"}),(0,V.jsxs)("p",{className:"text-white text-sm md:text-base font-semibold",children:["Grunnflate p\xe5"," ",null===br||void 0===br||null===(b=br.bya_calculations)||void 0===b||null===(w=b.results)||void 0===w?void 0:w.available_building_area," ","m",(0,V.jsx)("sup",{children:"2"})]}),(0,V.jsxs)("p",{className:"text-white text-xs md:text-sm",children:["Tilgjengelig"," ",((e,t,r,n,i,a)=>{const s=null!==(e=null===Nr||void 0===Nr||null===(t=Nr.buildingsApi)||void 0===t||null===(r=t.response)||void 0===r||null===(n=r.items)||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.builtUpArea)))&&void 0!==e?e:[];if(null!==br&&void 0!==br&&null!==(i=br.bya_calculations)&&void 0!==i&&null!==(a=i.results)&&void 0!==a&&a.total_allowed_bya){var o,l;const e=s?s.reduce(((e,t)=>e+t),0):0;return(0,V.jsxs)(V.Fragment,{children:[((null===br||void 0===br||null===(o=br.bya_calculations)||void 0===o||null===(l=o.results)||void 0===l?void 0:l.total_allowed_bya)-e).toFixed(2),"m",(0,V.jsx)("sup",{children:"2"})]})}return"0"})()]})]})]})]})}),(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h2",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold mb-3",children:"Seerdetaljer"}),(null===xr||void 0===xr?void 0:xr.length)>0?(0,V.jsxs)("table",{className:"border border-gray1 rounded-lg w-full",cellPadding:"8",children:[(0,V.jsx)("thead",{className:"border border-gray1",children:(0,V.jsxs)("tr",{children:[(0,V.jsx)("th",{className:"border border-gray1 text-sm md:text-base",children:"Navn"}),(0,V.jsx)("th",{className:"border border-gray1 text-sm md:text-base",children:"Siste visning"}),(0,V.jsx)("th",{className:"border border-gray1 text-sm md:text-base",children:"Visningstall"})]})}),(0,V.jsx)("tbody",{children:xr.map((e=>(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{className:"text-center text-gray border border-gray1 text-sm md:text-base",children:e.name}),(0,V.jsx)("td",{className:"text-center text-gray border border-gray1 text-sm md:text-base",children:new Date(e.last_updated_date).toLocaleString()}),(0,V.jsx)("td",{className:"text-center text-gray border border-gray1 text-sm md:text-base",children:e.view_count})]},e.id)))})]}):(0,V.jsx)("p",{children:"Fant ingen seere."})]}),(0,V.jsxs)("div",{className:"p-4 md:p-6 rounded-lg",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 cursor-pointer",onClick:()=>{kr(!_r)},children:[(0,V.jsx)("h3",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold",children:"Eiendomsinformasjon"}),_r?(0,V.jsx)("img",{src:mi,alt:"arrow"}):(0,V.jsx)("img",{src:mi,alt:"arrow",className:"rotate-180"})]}),(0,V.jsx)("div",{className:"mt-6 "+(_r?"block":"hidden"),children:(0,V.jsxs)("div",{className:"flex flex-col desktop:flex-row gap-4 md:gap-6 desktop:gap-4 big:gap-6 justify-between",children:[(0,V.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 desktop:gap-4 big:gap-6",children:[(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Tomteopplysninger"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Areal beregnet"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(_=Sr.eiendomsInformasjon)&&void 0!==_&&null!==(k=_.basisInformasjon)&&void 0!==k&&k.areal_beregnet?(0,V.jsxs)(V.Fragment,{children:[null===Sr||void 0===Sr||null===(S=Sr.eiendomsInformasjon)||void 0===S||null===(j=S.basisInformasjon)||void 0===j?void 0:j.areal_beregnet," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Etablerings\xe5rs dato"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(E=Sr.eiendomsInformasjon)&&void 0!==E&&null!==(C=E.basisInformasjon)&&void 0!==C&&C.etableringsdato?E_(null===Sr||void 0===Sr||null===(N=Sr.eiendomsInformasjon)||void 0===N||null===(T=N.basisInformasjon)||void 0===T?void 0:T.etableringsdato):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Sist oppdatert"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(P=Sr.eiendomsInformasjon)&&void 0!==P&&null!==(A=P.basisInformasjon)&&void 0!==A&&A.sist_oppdatert?E_(null===Sr||void 0===Sr||null===(M=Sr.eiendomsInformasjon)||void 0===M||null===(I=M.basisInformasjon)||void 0===I?void 0:I.sist_oppdatert.split("T")[0]):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Tomtens totale BYA"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(O=br.bya_calculations)&&void 0!==O&&null!==(D=O.results)&&void 0!==D&&D.total_allowed_bya?(0,V.jsxs)(V.Fragment,{children:[null===br||void 0===br||null===(R=br.bya_calculations)||void 0===R||null===(L=R.results)||void 0===L?void 0:L.total_allowed_bya," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Er registrert land"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Nr||void 0===Nr||null===(F=Nr.cadastreApi)||void 0===F||null===($=F.response)||void 0===$?void 0:$.item.isRegisteredLand)||!0===(null===Nr||void 0===Nr||null===(B=Nr.cadastreApi)||void 0===B||null===(z=B.response)||void 0===z?void 0:z.item.isRegisteredLand)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Festenummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(U=Sr.eiendomsInformasjon)&&void 0!==U&&null!==(H=U.basisInformasjon)&&void 0!==H&&H.festenummer?null===Sr||void 0===Sr||null===(G=Sr.eiendomsInformasjon)||void 0===G||null===(W=G.basisInformasjon)||void 0===W?void 0:W.festenummer:"-"})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Kommunale data"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kommune"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null===Nr||void 0===Nr||null===(q=Nr.presentationAddressApi)||void 0===q||null===(K=q.response)||void 0===K||null===(Z=K.item)||void 0===Z||null===(Y=Z.municipality)||void 0===Y?void 0:Y.municipalityName})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kommunenummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(X=Sr.eiendomsInformasjon)&&void 0!==X&&null!==(Q=X.kommune_info)&&void 0!==Q&&Q.kommunenr?null===Sr||void 0===Sr||null===(J=Sr.eiendomsInformasjon)||void 0===J||null===(ee=J.kommune_info)||void 0===ee?void 0:ee.kommunenr:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"G\xe5rdsnummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(te=Sr.eiendomsInformasjon)&&void 0!==te&&null!==(re=te.kommune_info)&&void 0!==re&&re.gaardsnummer?null===Sr||void 0===Sr||null===(ne=Sr.eiendomsInformasjon)||void 0===ne||null===(ie=ne.kommune_info)||void 0===ie?void 0:ie.gaardsnummer:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Bruksnummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(ae=Sr.eiendomsInformasjon)&&void 0!==ae&&null!==(se=ae.kommune_info)&&void 0!==se&&se.bruksnummer?null===Sr||void 0===Sr||null===(oe=Sr.eiendomsInformasjon)||void 0===oe||null===(le=oe.kommune_info)||void 0===le?void 0:le.bruksnummer:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Seksjonsnummer"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Sr&&void 0!==Sr&&null!==(ce=Sr.eiendomsInformasjon)&&void 0!==ce&&null!==(ue=ce.kommune_info)&&void 0!==ue&&ue.seksjonsnr?null===Sr||void 0===Sr||null===(de=Sr.eiendomsInformasjon)||void 0===de||null===(he=de.kommune_info)||void 0===he?void 0:he.seksjonsnr:"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Fylke"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==Nr&&void 0!==Nr&&null!==(pe=Nr.cadastreApi)&&void 0!==pe&&null!==(fe=pe.response)&&void 0!==fe&&null!==(me=fe.item.municipality)&&void 0!==me&&me.regionName?null===Nr||void 0===Nr||null===(ge=Nr.cadastreApi)||void 0===ge||null===(ve=ge.response)||void 0===ve||null===(xe=ve.item.municipality)||void 0===xe?void 0:xe.regionName:"-"})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Eiendomsstatus"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kan selges"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Nr||void 0===Nr||null===(ye=Nr.cadastreApi)||void 0===ye||null===(be=ye.response)||void 0===be?void 0:be.item.canBeSold)||"Ja"===(null===Nr||void 0===Nr||null===(we=Nr.cadastreApi)||void 0===we||null===(_e=we.response)||void 0===_e?void 0:_e.item.canBeSold)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kan bel\xe5nes"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Nr||void 0===Nr||null===(ke=Nr.cadastreApi)||void 0===ke||null===(Se=ke.response)||void 0===Se?void 0:Se.item.canBeMortgaged)||"Ja"===(null===Nr||void 0===Nr||null===(je=Nr.cadastreApi)||void 0===je||null===(Ee=je.response)||void 0===Ee?void 0:Ee.item.canBeMortgaged)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har bygning"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Nr||void 0===Nr||null===(Ce=Nr.cadastreApi)||void 0===Ce||null===(Ne=Ce.response)||void 0===Ne?void 0:Ne.item.hasBuilding)||"Ja"===(null===Nr||void 0===Nr||null===(Te=Nr.cadastreApi)||void 0===Te||null===(Pe=Te.response)||void 0===Pe?void 0:Pe.item.hasBuilding)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har fritidsbolig"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Nr||void 0===Nr||null===(Ae=Nr.cadastreApi)||void 0===Ae||null===(Me=Ae.response)||void 0===Me?void 0:Me.item.hasHolidayHome)||"Ja"===(null===Nr||void 0===Nr||null===(Ie=Nr.cadastreApi)||void 0===Ie||null===(Oe=Ie.response)||void 0===Oe?void 0:Oe.item.hasHolidayHome)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har bolig"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===Nr||void 0===Nr||null===(De=Nr.cadastreApi)||void 0===De||null===(Re=De.response)||void 0===Re?void 0:Re.item.hasHousing)||"Ja"===(null===Nr||void 0===Nr||null===(Le=Nr.cadastreApi)||void 0===Le||null===(Fe=Le.response)||void 0===Fe?void 0:Fe.item.hasHousing)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Parkeringsinformasjon"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Parkering reservert plass"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==($e=br.bya_calculations)&&void 0!==$e&&null!==(Be=$e.results)&&void 0!==Be&&null!==(ze=Be.parking)&&void 0!==ze&&ze.required_spaces?(0,V.jsxs)(V.Fragment,{children:[null===br||void 0===br||null===(Ue=br.bya_calculations)||void 0===Ue||null===(Ve=Ue.results)||void 0===Ve||null===(He=Ve.parking)||void 0===He?void 0:He.required_spaces," ","stk"]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Parkering omr\xe5de per plass"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(Ge=br.bya_calculations)&&void 0!==Ge&&null!==(We=Ge.results)&&void 0!==We&&null!==(qe=We.parking)&&void 0!==qe&&qe.area_per_space?(0,V.jsxs)(V.Fragment,{children:[null===br||void 0===br||null===(Ke=br.bya_calculations)||void 0===Ke||null===(Ze=Ke.results)||void 0===Ze||null===(Ye=Ze.parking)||void 0===Ye?void 0:Ye.area_per_space," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Totalt parkeringsomr\xe5de"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:null!==br&&void 0!==br&&null!==(Xe=br.bya_calculations)&&void 0!==Xe&&null!==(Qe=Xe.results)&&void 0!==Qe&&null!==(Je=Qe.parking)&&void 0!==Je&&Je.total_parking_area?(0,V.jsxs)(V.Fragment,{children:[null===br||void 0===br||null===(et=br.bya_calculations)||void 0===et||null===(tt=et.results)||void 0===tt||null===(rt=tt.parking)||void 0===rt?void 0:rt.total_parking_area," ","m",(0,V.jsx)("sup",{children:"2"})]}):"-"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Parkering er usikker"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:!0===(null===br||void 0===br||null===(nt=br.bya_calculations)||void 0===nt||null===(it=nt.results)||void 0===it||null===(at=it.parking)||void 0===at?void 0:at.is_uncertain)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Ytterligere eiendomsforhold"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har forurensning"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Nr||void 0===Nr||null===(st=Nr.cadastreApi)||void 0===st||null===(ot=st.response)||void 0===ot?void 0:ot.item.hasSoilContamination)||!0===(null===Nr||void 0===Nr||null===(lt=Nr.cadastreApi)||void 0===lt||null===(ct=lt.response)||void 0===ct?void 0:ct.item.hasSoilContamination)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Har aktive festegrunner"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Nr||void 0===Nr||null===(ut=Nr.cadastreApi)||void 0===ut||null===(dt=ut.response)||void 0===dt?void 0:dt.item.hasActiveLeasedLand)||!0===(null===Nr||void 0===Nr||null===(ht=Nr.cadastreApi)||void 0===ht||null===(pt=ht.response)||void 0===pt?void 0:pt.item.hasActiveLeasedLand)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Inng\xe5r i samlet eiendom"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Nr||void 0===Nr||null===(ft=Nr.cadastreApi)||void 0===ft||null===(mt=ft.response)||void 0===mt?void 0:mt.item.includedInTotalRealEstate)||!0===(null===Nr||void 0===Nr||null===(gt=Nr.cadastreApi)||void 0===gt||null===(vt=gt.response)||void 0===vt?void 0:vt.item.includedInTotalRealEstate)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Kulturminner registrert"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(xt=Sr.eiendomsInformasjon)||void 0===xt||null===(yt=xt.status)||void 0===yt?void 0:yt.kulturminner_registrert)||!0===(null===Sr||void 0===Sr||null===(bt=Sr.eiendomsInformasjon)||void 0===bt||null===(wt=bt.status)||void 0===wt?void 0:wt.kulturminner_registrert)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Grunnforurensning"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(_t=Sr.eiendomsInformasjon)||void 0===_t||null===(kt=_t.status)||void 0===kt?void 0:kt.grunnforurensning)||!0===(null===Sr||void 0===Sr||null===(St=Sr.eiendomsInformasjon)||void 0===St||null===(jt=St.status)||void 0===jt?void 0:jt.grunnforurensning)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]}),(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 md:p-5 flex flex-col gap-3 md:gap-4",children:[(0,V.jsx)("h2",{className:"text-black text-sm md:text-base desktop:text-lg font-semibold flex items-center gap-2",children:"Spesielle registreringer"}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Sammensl\xe5tte tomter"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Nr||void 0===Nr||null===(Et=Nr.cadastreApi)||void 0===Et||null===(Ct=Et.response)||void 0===Ct?void 0:Ct.item.numberOfPlots)||!0===(null===Nr||void 0===Nr||null===(Nt=Nr.cadastreApi)||void 0===Nt||null===(Tt=Nt.response)||void 0===Tt?void 0:Tt.item.numberOfPlots)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Tinglyst"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(Pt=Sr.eiendomsInformasjon)||void 0===Pt||null===(At=Pt.basisInformasjon)||void 0===At?void 0:At.tinglyst)||!0===(null===Sr||void 0===Sr||null===(Mt=Sr.eiendomsInformasjon)||void 0===Mt||null===(It=Mt.basisInformasjon)||void 0===It?void 0:It.tinglyst)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Ugyldig"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:(0,V.jsx)("img",{src:C4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Oppm\xe5ling ikke fullf\xf8rt"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(Ot=Sr.eiendomsInformasjon)||void 0===Ot||null===(Dt=Ot.status)||void 0===Dt?void 0:Dt.oppmaling_ikke_fullfort)||!0===(null===Sr||void 0===Sr||null===(Rt=Sr.eiendomsInformasjon)||void 0===Rt||null===(Lt=Rt.status)||void 0===Lt?void 0:Lt.oppmaling_ikke_fullfort)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Mangler grenseoppmerking"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(Ft=Sr.eiendomsInformasjon)||void 0===Ft||null===($t=Ft.status)||void 0===$t?void 0:$t.mangler_grensepunktmerking)||!0===(null===Sr||void 0===Sr||null===(Bt=Sr.eiendomsInformasjon)||void 0===Bt||null===(zt=Bt.status)||void 0===zt?void 0:zt.mangler_grensepunktmerking)?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:"Under sammensl\xe5ing"}),(0,V.jsx)("h5",{className:"text-sm md:text-base text-black font-medium",children:"Ja"===(null===Sr||void 0===Sr||null===(Ut=Sr.eiendomsInformasjon)||void 0===Ut||null===(Vt=Ut.status)||void 0===Vt?void 0:Vt.under_sammenslaing)||"Ja"===(null===Sr||void 0===Sr||null===(Ht=Sr.eiendomsInformasjon)||void 0===Ht||null===(Gt=Ht.status)||void 0===Gt?void 0:Gt.under_sammenslaing)===!0?(0,V.jsx)("img",{src:C4,alt:"check"}):(0,V.jsx)("img",{src:E4,alt:"check"})})]})]})]})]}),(0,V.jsx)("div",{className:"rounded-[12px] overflow-hidden h-[300px] desktop:h-auto w-full desktop:w-[407px]",children:hr?(0,V.jsx)("div",{className:"w-full h-full rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)(V.Fragment,{children:(null===Sr||void 0===Sr||null===(Wt=Sr.coordinates)||void 0===Wt?void 0:Wt.convertedCoordinates)&&(0,V.jsx)(rpe,{coordinates:null===Sr||void 0===Sr||null===(qt=Sr.coordinates)||void 0===qt?void 0:qt.convertedCoordinates})})})]})})]}),(0,V.jsxs)("div",{className:"w-full mt-8 md:mt-[44px]",children:[(0,V.jsx)("div",{className:"flex border-b border-[#DDDDDD] overflow-x-auto",children:jr.map((e=>(0,V.jsx)("button",{onClick:()=>Cr(e.id),className:"px-3 md:px-4 py-2 text-black border-b-[3px] text-sm md:text-base desktop:text-lg transition-colors duration-300 "+(Er===e.id?"border-[#6941C6] font-semibold":"border-transparent"),children:e.label},e.id)))}),(0,V.jsxs)("div",{className:"pt-5 md:pt-8",children:["Regulering"===Er&&(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 md:gap-[44px] desktop:gap-[60px]",children:[hr?(0,V.jsx)("div",{className:"w-1/2 h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"relative w-full md:w-1/2",children:[(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[(0,V.jsx)("h2",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold",children:"Reguleringsplan"}),(0,V.jsx)("img",{src:N4,alt:"images"})]}),(0,V.jsx)("div",{className:"flex flex-col gap-2 md:gap-3",children:(0,V.jsx)(V.Fragment,{children:br&&(null===br||void 0===br||null===(Kt=br.conclusion)||void 0===Kt?void 0:Kt.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-start gap-2 md:gap-3 text-gray text-sm md:text-base",children:[(0,V.jsx)("img",{src:T4,alt:"images"}),(0,V.jsx)("span",{children:e})]},t))))})})]}),(0,V.jsxs)("div",{className:"w-full flex flex-col gap-4 md:gap-8 items-center mt-7 md:mt-[55px]",children:[(0,V.jsxs)("div",{className:"rounded-[12px] overflow-hidden w-full relative border border-[#7D89B0] h-[450px] md:h-[590px]",children:[fr&&(0,V.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-500 bg-opacity-50 z-10",children:(0,V.jsx)("div",{className:"spinner-border animate-spin border-t-4 border-b-4 border-blue-500 w-12 h-12 border-solid rounded-full"})}),(0,V.jsx)("img",{src:null===Fr||void 0===Fr?void 0:Fr.src,alt:null===Fr||void 0===Fr?void 0:Fr.alt,className:"h-full w-full",onLoad:()=>mr(!1),onError:()=>mr(!1)}),(0,V.jsx)("div",{className:"absolute top-0 left-[4px] flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("div",{className:"bg-white h-[44px] w-[44px] rounded-full flex items-center justify-center "+((null===Fr||void 0===Fr?void 0:Fr.id)===(null===(Zt=Lr[0])||void 0===Zt?void 0:Zt.id)?"opacity-50":"opacity-100"),style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},onClick:()=>{var e;if((null===Fr||void 0===Fr?void 0:Fr.id)!==(null===(e=Lr[0])||void 0===e?void 0:e.id)){const e=Lr.findIndex((e=>e.id===Fr.id));mr(!0);const t=e-1;t>=0&&($r(Lr[t]),Mr())}},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:`${(null===Fr||void 0===Fr?void 0:Fr.id)!==(null===(Yt=Lr[0])||void 0===Yt?void 0:Yt.id)&&"cursor-pointer"} rotate-180`})})}),(0,V.jsx)("div",{className:"absolute bottom-0 right-[4px] flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("div",{className:"bg-white h-[44px] w-[44px] rounded-full flex items-center justify-center "+((null===Fr||void 0===Fr?void 0:Fr.id)===(null===(Xt=Lr[Lr.length-1])||void 0===Xt?void 0:Xt.id)?"opacity-50":"opacity-100"),style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},onClick:()=>{var e;if((null===Fr||void 0===Fr?void 0:Fr.id)!==(null===(e=Lr[Lr.length-1])||void 0===e?void 0:e.id)){const e=Lr.findIndex((e=>e.id===Fr.id));mr(!0);const t=e+1;t<Lr.length&&$r(Lr[t]),Ir()}},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:`${(null===Fr||void 0===Fr?void 0:Fr.id)!==(null===(Qt=Lr[Lr.length-1])||void 0===Qt?void 0:Qt.id)&&"cursor-pointer"}`})})})]}),(0,V.jsxs)("div",{className:"relative w-full flex justify-center",children:[(0,V.jsx)("div",{className:"gap-4 md:gap-8 flex overflow-x-auto overFlowScrollHidden",ref:Ar,children:Lr.map(((e,t)=>(0,V.jsx)("div",{className:"relative min-w-[90px] max-w-[90px]",children:(0,V.jsx)("img",{src:e.src,alt:e.alt,className:"h-[90px] w-full rounded-[12px] cursor-pointer "+((null===Fr||void 0===Fr?void 0:Fr.id)===(null===e||void 0===e?void 0:e.id)?"border-2 border-primary":"border border-[#7D89B033]"),style:{zIndex:999},onClick:()=>(e=>{(null===Fr||void 0===Fr?void 0:Fr.id)===e.id?mr(!1):mr(!0),$r(e)})(e)})},t)))}),Lr.length>5&&(0,V.jsx)("div",{className:"absolute top-0 right-0 h-[90px] w-[90px]",style:{zIndex:9999,background:"linear-gradient(-90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 90.63%)"}}),Lr.length>5&&(0,V.jsx)("div",{className:"absolute top-0 left-0 h-[90px] w-[90px]",style:{zIndex:9999,background:"linear-gradient(90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 90.63%)"}}),Lr.length>5&&(0,V.jsx)("div",{className:"absolute top-0 left-0 flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:((null===Fr||void 0===Fr?void 0:Fr.id)!==(null===(Jt=Lr[0])||void 0===Jt?void 0:Jt.id)?"cursor-pointer opacity-100":"opacity-50")+" rotate-180",onClick:()=>{var e;if((null===Fr||void 0===Fr?void 0:Fr.id)!==(null===(e=Lr[0])||void 0===e?void 0:e.id)){const e=Lr.findIndex((e=>e.id===Fr.id));mr(!0);const t=e-1;t>=0&&($r(Lr[t]),Mr())}}})}),Lr.length>5&&(0,V.jsx)("div",{className:"absolute top-0 right-0 flex items-center justify-center h-full",style:{zIndex:99999},children:(0,V.jsx)("img",{src:P4,alt:"arrow",className:""+((null===Fr||void 0===Fr?void 0:Fr.id)!==(null===(er=Lr[Lr.length-1])||void 0===er?void 0:er.id)?"cursor-pointer opacity-100":"opacity-50"),onClick:()=>{var e;if((null===Fr||void 0===Fr?void 0:Fr.id)!==(null===(e=Lr[Lr.length-1])||void 0===e?void 0:e.id)){const e=Lr.findIndex((e=>e.id===Fr.id));mr(!0);const t=e+1;t<Lr.length&&$r(Lr[t]),Ir()}}})})]})]})]}),hr?(0,V.jsx)("div",{className:"w-1/2 h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsxs)("div",{className:"relative w-full md:w-1/2",children:[(0,V.jsxs)("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[(0,V.jsxs)("h2",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold",children:["Kommuneplan for"," ",null===Nr||void 0===Nr||null===(tr=Nr.presentationAddressApi)||void 0===tr||null===(rr=tr.response)||void 0===rr||null===(nr=rr.item)||void 0===nr||null===(ir=nr.municipality)||void 0===ir?void 0:ir.municipalityName]}),(0,V.jsx)("img",{src:N4,alt:"images"})]}),(0,V.jsx)("div",{className:"flex flex-col gap-2 md:gap-3",children:br&&(null===br||void 0===br||null===(ar=br.applicable_rules)||void 0===ar?void 0:ar.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-start gap-2 md:gap-3 text-gray text-sm md:text-base",children:[(0,V.jsx)("img",{src:T4,alt:"images"}),(0,V.jsxs)("div",{children:[e.rule," ",(0,V.jsx)("span",{className:"text-primary font-bold",children:e.section})]})]},t))))})]})]})})}),"Eierinformasjon"===Er&&(0,V.jsx)(Wpe,{data:null===Sr||void 0===Sr?void 0:Sr.latestOwnership}),"Bygninger"===Er&&(0,V.jsx)(V.Fragment,{children:hr?(0,V.jsx)("div",{className:"w-full h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)(V.Fragment,{children:(null===Nr||void 0===Nr||null===(sr=Nr.buildingsApi)||void 0===sr||null===(or=sr.response)||void 0===or?void 0:or.items.length)>0?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)("h2",{className:"text-black text-lg md:text-xl desktop:text-2xl font-semibold mb-4 md:mb-6",children:"Eksisterende bebyggelse"})}),(0,V.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 desktop:grid-cols-4 gap-4 lg:gap-6 mb-8 md:mb-16",children:null===Nr||void 0===Nr||null===(lr=Nr.buildingsApi)||void 0===lr||null===(cr=lr.response)||void 0===cr?void 0:cr.items.map(((e,t)=>{var r,n,i,a,s,o,l,c,u;return(0,V.jsxs)("div",{className:"bg-gray3 rounded-[8px] p-3 lg:p-5 flex flex-col gap-2 lg:gap-4",children:[(0,V.jsxs)("div",{className:"flex flex-col gap-2 lg:gap-4",children:[(0,V.jsx)("div",{className:"w-full h-[177px] rounded-[8px]",children:(0,V.jsx)($be,{coordinates:null===e||void 0===e||null===(r=e.position)||void 0===r||null===(n=r.geometry)||void 0===n?void 0:n.coordinates})}),(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("h3",{className:"text-black font-semibold text-base md:text-lg truncate",children:null===e||void 0===e||null===(i=e.typeOfBuilding)||void 0===i?void 0:i.text}),(0,V.jsx)("p",{className:"text-xs md:text-sm text-gray",children:null===e||void 0===e||null===(a=e.buildingStatus)||void 0===a?void 0:a.text})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-[2px]",children:[(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:["Antall etasjer:"," ",(0,V.jsx)("span",{className:"text-black font-medium text-sm md:text-base",children:null===e||void 0===e?void 0:e.numberOfFloors})]}),(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:["Bruksareal:"," ",(0,V.jsxs)("span",{className:"text-black font-medium text-sm md:text-base",children:[null===e||void 0===e?void 0:e.totalFloorSpace," m",(0,V.jsx)("sup",{children:"2"})]})]}),(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:["Rammetillatelse:"," ",(0,V.jsx)("span",{className:"text-black font-medium text-sm md:text-base",children:E_(null===e||void 0===e||null===(s=e.registeredApprovedDate)||void 0===s?void 0:s.timestamp)})]}),(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:["Igangsettelse:"," ",(0,V.jsx)("span",{className:"text-black font-medium text-sm md:text-base",children:E_(null===e||void 0===e||null===(o=e.approvedDate)||void 0===o?void 0:o.timestamp)})]}),(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:["Midleritidg bruk:"," ",(0,V.jsx)("span",{className:"text-black font-medium text-sm md:text-base",children:E_(null===e||void 0===e||null===(l=e.usedDate)||void 0===l?void 0:l.timestamp)})]}),(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:["Ferdigattest:"," ",(0,V.jsx)("span",{className:"text-black font-medium text-sm md:text-base",children:E_(null===e||void 0===e||null===(c=e.buildingStatusHistory[0])||void 0===c||null===(u=c.buildingStatusRegisteredDate)||void 0===u?void 0:u.timestamp)})]}),(0,V.jsxs)("div",{className:"text-gray text-xs md:text-sm",children:["Bebygd areal (BYA):"," ",(0,V.jsxs)("span",{className:"text-black font-medium text-sm md:text-base",children:[null===e||void 0===e?void 0:e.builtUpArea," m",(0,V.jsx)("sup",{children:"2"})]})]}),(0,V.jsxs)("div",{className:"text-gray font-bold text-xs md:text-sm",children:["Bygningen utgj\xf8r"," ",((t,r)=>{const n=null===e||void 0===e?void 0:e.builtUpArea,i=null===br||void 0===br||null===(t=br.bya_calculations)||void 0===t||null===(r=t.results)||void 0===r?void 0:r.total_allowed_bya;return n&&i>0?`${(n/i*100).toFixed(2)} %`:"0"})()," ","av BYA"]})]})]},t)}))})]}):(0,V.jsx)("p",{children:"Ingen bygningsdata funnet."})})}),"Dokument"===Er&&(0,V.jsx)(V.Fragment,{children:hr?(0,V.jsx)("div",{className:"w-full h-[300px] rounded-md custom-shimmer",style:{borderRadius:"8px"}}):(0,V.jsx)(V.Fragment,{children:Pr&&Dr&&(0,V.jsx)("div",{children:(0,V.jsx)("div",{dangerouslySetInnerHTML:{__html:Dr},style:{width:"100%",height:"820px"}})})})})]})]})]})]})},zbe=()=>{const[e,r]=(0,t.useState)(1),[n,i]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[o,l]=(0,t.useState)(""),c=localStorage.getItem("Iplot_admin"),[u,d]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){const t=null===e||void 0===e?void 0:e.supplier;d(t)}})()}),[u]);const h=(0,t.useMemo)((()=>n.filter((e=>{var t,r;return null===(t=e.user)||void 0===t||null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase())}))),[n,o]);(0,t.useEffect)((()=>{(async()=>{s(!0);try{let e=Zm(lm(g_,"leads"),Xm("IsoptForBank","==",!0));e="andre.finger@gmail.com"===c?Zm(lm(g_,"leads"),Xm("IsoptForBank","==",!0)):Zm(lm(g_,"leads"),Xm("IsoptForBank","==",!0),Xm("finalData.husmodell.Husdetaljer.Leverand\xf8rer","==",String(u)));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=t.sort(((e,t)=>t.updatedAt.toDate()-e.updatedAt.toDate())),n=["drashti.doubledotts@gmail.com","abc@gmail.com","keren@arnhoff.no","simen@askerhaandverk.no","ole@nestegg.no","fenger@iplot.no","drashtisavani22@gmail.com","rudraksh.shukla98@gmail.com","tanmaymundra01@gmail.com"],a=r.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email)&&!n.includes(e.user.email)}));i(a)}catch(e){console.error("Error fetching leads data:",e)}finally{s(!1)}})()}),[u]);const p=(0,t.useMemo)((()=>{const t=10*(e-1);return h.slice(t,t+10)}),[e,h]),f=(0,t.useMemo)((()=>[{accessorKey:"kunde",header:"Kunde",cell:e=>{let{row:t}=e;return(0,V.jsxs)("div",{className:"flex items-start gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray1 bg-gray3 flex items-center justify-center",children:t.original.user.name[0]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"font-medium text-black text-sm mb-[2px]",children:t.original.user.name}),(0,V.jsx)("p",{className:"text-xs text-gray",children:t.original.user.email})]})]})}},{accessorKey:"husmodell",header:"Husmodell",cell:e=>{let{row:t}=e;return(0,V.jsxs)("div",{className:"flex items-center gap-3 w-max",children:[(0,V.jsx)("img",{src:t.original.finalData.husmodell.Husdetaljer.photo,alt:"Husmodell",className:"w-8 h-8 rounded-full"}),(0,V.jsx)("p",{className:"font-medium text-sm text-darkBlack",children:t.original.finalData.husmodell.Husdetaljer.husmodell_name})]})}},{accessorKey:"leverandor",header:"Leverand\xf8r",cell:e=>{let{row:r}=e;const[n,i]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{const e=await(async e=>{const t=await w_(e);if(t)return t})(r.original.finalData.husmodell.Husdetaljer.Leverand\u00f8rer);i(e)})()}),[r.original.finalData.husmodell.Husdetaljer.Leverand\u00f8rer]),(0,V.jsx)("div",{className:"w-[140px]",children:(0,V.jsx)("img",{src:null===n||void 0===n?void 0:n.photo,alt:"leverandor",className:"w-full"})})}},{accessorKey:"adresse",header:"Adresse",cell:e=>{var t,r,n,i,a,s,o,l,c,u,d,h,p,f,m;let{row:g}=e;return(0,V.jsx)(V.Fragment,{children:null!==(t=g.original.finalData)&&void 0!==t&&t.plot?(0,V.jsxs)("div",{className:"flex items-start gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:(null===(r=g.original.finalData)||void 0===r||null===(n=r.plot)||void 0===n||null===(i=n.lamdaDataFromApi)||void 0===i||null===(a=i.coordinates)||void 0===a?void 0:a.convertedCoordinates)&&(0,V.jsx)(rpe,{coordinates:null===(s=g.original.finalData)||void 0===s||null===(o=s.plot)||void 0===o||null===(l=o.lamdaDataFromApi)||void 0===l||null===(c=l.coordinates)||void 0===c?void 0:c.convertedCoordinates})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"font-medium text-black text-sm mb-[2px]",children:null===(u=g.original.finalData)||void 0===u||null===(d=u.plot)||void 0===d||null===(h=d.CadastreDataFromApi)||void 0===h?void 0:h.presentationAddressApi.response.item.formatted.line1}),(0,V.jsx)("p",{className:"text-xs text-gray",children:null===(p=g.original.finalData)||void 0===p||null===(f=p.plot)||void 0===f||null===(m=f.CadastreDataFromApi)||void 0===m?void 0:m.presentationAddressApi.response.item.formatted.line2})]})]}):(0,V.jsx)("div",{className:"px-9",children:"-"})})}},{accessorKey:"leadSent",header:"Lead sendt",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black w-max",children:C_(null===(t=n.original.updatedAt)||void 0===t?void 0:t.seconds,null===(r=n.original.updatedAt)||void 0===r?void 0:r.nanoseconds)})}},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e;return(0,V.jsx)("span",{className:"px-3 py-1 rounded-full bg-[#F1F2FF] text-[#02107A] text-xs font-semibold whitespace-nowrap w-max",children:"Lead sendt"})}},{id:"handling",header:"Handling",cell:()=>(0,V.jsx)("button",{className:"h-8 w-8 flex items-center justify-center",children:(0,V.jsx)(Fpe,{className:"h-4 w-4 text-gray-500"})})}]),[]),m=aA({data:p,columns:f,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:e-1,pageSize:10}},pageCount:Math.ceil(h.length/10),manualPagination:!0,onPaginationChange:t=>{if("function"===typeof t){const n=t({pageIndex:e-1,pageSize:10});r(n.pageIndex+1)}}});return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"mb-2 flex flex-col sm:flex-row sm:items-center justify-between bg-lightPurple rounded-[12px] py-3 px-2 gap-2 md:px-4",children:(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px]",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k i leads",className:"focus-within:outline-none",value:o,onChange:e=>l(e.target.value)})]})}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:m.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:a?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:f.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===h.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:f.length,className:"h-24 text-center",children:"No results."})}):m.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>m.previousPage(),disabled:!m.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:e})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:m.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>m.nextPage(),disabled:!m.getCanNextPage(),children:"Neste"})]})]})]})},Ube=()=>(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Antall bankleads"}),(0,V.jsx)("p",{className:"text-gray text-sm md:text-base",children:"Liste over alle Antall bankleads"})]})}),(0,V.jsx)(zbe,{})]})});const Vbe=r.p+"static/media/Ic_download.f0cb66080c580091a86b7529bee45dc3.svg",Hbe=e=>{var r,n;let{id:i}=e;const[a,s]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(!i)return;const e=cm(g_,"leads_from_supplier",String(i),"preferred_house_model",String(i)),t=await dg(e);t.exists()&&s(t.data())})()}),[i]);const[o,l]=(0,t.useState)(null);return(0,t.useEffect)((()=>{var e;if(null===a||void 0===a||null===(e=a.Husmodell)||void 0===e||!e[0])return;(async()=>{var e;const t=await y_(String(null===a||void 0===a||null===(e=a.Husmodell)||void 0===e?void 0:e[0]));t&&t.Husdetaljer&&l(t)})()}),[null===a||void 0===a?void 0:a.Husmodell]),(0,V.jsx)(V.Fragment,{children:o?(0,V.jsxs)("div",{className:"flex items-center gap-3 w-max",children:[(0,V.jsx)("img",{src:null===o||void 0===o||null===(r=o.Husdetaljer)||void 0===r?void 0:r.photo,alt:"logo",className:"h-10 w-10 rounded-full"}),(0,V.jsx)("p",{className:"text-black text-sm font-semibold",children:null===o||void 0===o||null===(n=o.Husdetaljer)||void 0===n?void 0:n.husmodell_name})]}):(0,V.jsx)("p",{className:"text-center",children:"-"})})},Gbe=F_("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Wbe=F_("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),qbe=F_("CircleArrowRight",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]),Kbe=F_("PhoneForwarded",[["polyline",{points:"18 2 22 6 18 10",key:"6vjanh"}],["line",{x1:"14",x2:"22",y1:"6",y2:"6",key:"1jsywh"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Zbe=F_("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Ybe=F_("InspectionPanel",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 7h.01",key:"7u93v4"}],["path",{d:"M17 7h.01",key:"14a9sn"}],["path",{d:"M7 17h.01",key:"19xn7k"}],["path",{d:"M17 17h.01",key:"1sd3ek"}]]),Xbe=F_("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Qbe=F_("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]),Jbe=F_("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),ewe=F_("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]),twe=F_("Signature",[["path",{d:"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284",key:"y32ogt"}],["path",{d:"M3 21h18",key:"itz85i"}]]),rwe=e=>{let{log:r,leadId:n,fetchLogs:i}=e;const[a,s]=(0,t.useState)(!1),[o,l]=(0,t.useState)((null===r||void 0===r?void 0:r.notat)||(null===r||void 0===r?void 0:r.notes)||"");return(0,V.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-6 text-xs md:text-sm text-black font-medium flex items-center gap-2 justify-between w-[600px] md:w-full",children:a?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("input",{value:o,onChange:e=>l(e.target.value),className:"border border-gray2 rounded-lg focus-within:outline-none px-3 py-2 text-xs md:text-sm"}),(0,V.jsx)("button",{onClick:async()=>{try{const e=cm(g_,"leads_from_supplier",n,"followups",r.id),t=new Date,a=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"}).format(t),c=`${a} | ${new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t)}`;await mg(e,{notat:o,updatedAt:c}),await mg(cm(g_,"leads_from_supplier",String(n)),{updatedAt:uo.now()}),s(!1),l(""),await i()}catch(D_e){console.error("Failed to update note",D_e)}},className:"bg-purple text-white px-3 md:px-6 py-2 rounded",children:"Save"})]}):(0,V.jsxs)(V.Fragment,{children:[(null===r||void 0===r?void 0:r.notat)||(null===r||void 0===r?void 0:r.notes),(0,V.jsx)("button",{onClick:()=>s(!0),className:"ml-2 rounded-lg",children:(0,V.jsx)(GT,{className:"h-6 w-6 text-purple"})})]})})};const nwe=r.p+"static/media/Ic_calender2.34840895ffc2bf52d4b2f9051db627ca.svg",iwe=e=>{let{selectedDate:t,onDateChange:r,dateFormat:n="dd.MM.yyyy | HH:mm",placeholderText:i="Select date and time",className:a,minDate:s}=e;const o=e=>{let{value:t,onClick:r}=e;return(0,V.jsxs)("div",{style:{position:"relative"},className:`${a} cursor-pointer flex items-center gap-2 w-full`,onClick:r,children:[(0,V.jsx)("input",{type:"text",value:t,placeholder:i,readOnly:!0,className:"text-base focus-within:outline-none w-full bg-transparent"}),(0,V.jsx)("img",{src:nwe,alt:"Calendar icon"})]})};return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("div",{className:"custom-datepicker-wrapper w-full",children:(0,V.jsx)(FT,{selected:t,onChange:r,dateFormat:n,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"Time",customInput:(0,V.jsx)(o,{value:t?new Intl.DateTimeFormat("default",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t):"",onClick:()=>{}}),showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full flex",minDate:s})})})},awe=kQ.object({date:kQ.coerce.date({required_error:"Dato er p\xe5krevd",invalid_type_error:"Ugyldig datoformat"}),notat:kQ.string({required_error:"Notat er p\xe5krevd"}).min(2,{message:"Notat m\xe5 best\xe5 av minst 2 tegn."}),Hurtigvalg:kQ.string().optional()}),swe=e=>{let{fetchLogs:r,fetchHusmodellData:n,handlePopup:i,SelectHistoryValue:a,setSelectHistoryValue:s,setDropdownOpen:o}=e;const l=AG({resolver:FG(awe)}),c=Gr().pathname.split("/"),u=c.length>2?c[2]:null;(0,t.useEffect)((()=>{a&&l.setValue("Hurtigvalg",a)}),[a,l]);const[d,h]=(0,t.useState)(!1);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("h3",{className:"text-lg md:text-xl desktop:text-2xl mb-4 text-darkBlack font-semibold",children:"Legg til ny oppf\xf8lgning"}),(0,V.jsx)(tW,{...l,children:(0,V.jsxs)("form",{onSubmit:l.handleSubmit((async e=>{try{var t,a;const c={...e,date:null!==(t=e.date)&&void 0!==t?t:null,notat:null!==(a=e.notat)&&void 0!==a?a:null};try{const e=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"}),t=cm(g_,"leads_from_supplier",String(u),"history",String(u));(await dg(t)).exists()?(await mg(t,{...c,updatedAt:e.format(new Date)}),He.success("Ny aktivitet lagret.",{position:"top-right"})):(await fg(t,{...c,createdAt:e.format(new Date),updatedAt:e.format(new Date)}),He.success("Follow up created.",{position:"top-right"}));const a=new Date,o=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"}).format(a),d=`${o} | ${new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(a)}`,h=lm(g_,"leads_from_supplier",String(u),"followups");await vg(h,{...c,createdAt:d,updatedAt:d}),await mg(cm(g_,"leads_from_supplier",String(u)),{updatedAt:uo.now()}),await r(),await n(),i(),l.reset(),s("")}catch(o){console.error("Firestore operation failed:",o),He.error("Something went wrong. Please try again.",{position:"top-right"})}}catch(o){console.error("Firestore operation failed:",o),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("div",{className:"",children:(0,V.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:"Hurtigvalg",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Legg til ny aktivitet"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:a?(0,V.jsx)(bW,{placeholder:"Hva gjelder det?",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",disable:a}):(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,onOpenChange:e=>{h(e),o(e)},open:d,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Velg ny aktivitet"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsxs)(GZ,{children:[(0,V.jsx)(XZ,{value:"Telefon",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Gbe,{className:"w-5 h-5"})," Telefon"]})}),(0,V.jsx)(XZ,{value:"M\xf8te",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Wbe,{className:"w-5 h-5"}),"M\xf8te"]})}),(0,V.jsx)(XZ,{value:"Videom\xf8te",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Zbe,{className:"w-5 h-5"}),"Videom\xf8te"]})}),(0,V.jsx)(XZ,{value:"Befaring",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Ybe,{className:"w-5 h-5"}),"Befaring"]})}),(0,V.jsx)(XZ,{value:"E-post",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Xbe,{className:"w-5 h-5"}),"E-post"]})}),(0,V.jsx)(XZ,{value:"Annet",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Qbe,{className:"w-5 h-5"}),"Annet"]})})]})})]})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:"date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Sett oppf\xf8lgning til"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative w-full",children:(0,V.jsx)(iwe,{selectedDate:t.value?t.value:null,onDateChange:e=>{e&&t.onChange(e)},className:"border border-gray1 rounded-lg px-[14px] py-[10px] w-full",placeholderText:"Velg tidspunkt/frist",dateFormat:"dd.MM.yyyy | HH:mm",minDate:new Date})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:"notat",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Notat"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(J3,{placeholder:"Fyll inn kommentar",...t,className:`h-[100px] bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `})})}),(0,V.jsx)(cW,{})]})}})})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center mt-8",children:[(0,V.jsx)("div",{onClick:()=>l.reset(),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-lightPurple bg-lightPurple text-primary text-base rounded-[8px] h-[48px] font-medium relative py-[10px] flex items-center gap-2 px-[50px]"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-green2 bg-green2 text-white text-base rounded-[8px] h-[48px] font-medium relative px-[50px] py-[10px] flex items-center gap-2",type:"submit"})]})]})})]})},owe=kQ.object({notat:kQ.string({required_error:"Notat er p\xe5krevd"}).min(2,{message:"Notat m\xe5 best\xe5 av minst 2 tegn."}),Hurtigvalg:kQ.string().optional()}),lwe=e=>{let{fetchLogs:r,fetchHusmodellData:n,handlePopup:i,SelectHistoryValue:a,setSelectHistoryValue:s,setDropdownOpen:o}=e;const l=AG({resolver:FG(owe)}),c=Gr().pathname.split("/"),u=c.length>2?c[2]:null;(0,t.useEffect)((()=>{a&&l.setValue("Hurtigvalg",a)}),[a,l]);const[d,h]=(0,t.useState)(!1);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("h3",{className:"text-lg md:text-xl desktop:text-2xl mb-4 text-darkBlack font-semibold",children:"Legg til ny oppf\xf8lgning"}),(0,V.jsx)(tW,{...l,children:(0,V.jsxs)("form",{onSubmit:l.handleSubmit((async e=>{try{var t;const o={...e,notat:null!==(t=e.notat)&&void 0!==t?t:null};try{const e=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"}),t=cm(g_,"leads_from_supplier",String(u),"history",String(u));(await dg(t)).exists()?(await mg(t,{...o,updatedAt:e.format(new Date)}),He.success("Loggen er oppdatert",{position:"top-right"})):(await fg(t,{...o,createdAt:e.format(new Date),updatedAt:e.format(new Date)}),He.success("Loggen er oppdatert",{position:"top-right"}));const a=new Date,c=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"}).format(a),d=`${c} | ${new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(a)}`,h=lm(g_,"leads_from_supplier",String(u),"followups");await vg(h,{...o,createdAt:d,updatedAt:d}),await mg(cm(g_,"leads_from_supplier",String(u)),{updatedAt:uo.now()}),await r(),await n(),i(),l.reset(),s("")}catch(a){console.error("Firestore operation failed:",a),He.error("Something went wrong. Please try again.",{position:"top-right"})}}catch(a){console.error("Firestore operation failed:",a),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("div",{className:"",children:(0,V.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:"Hurtigvalg",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Legg til ny aktivitet"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:a?(0,V.jsx)(bW,{placeholder:"Hva gjelder det?",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",disable:a}):(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,onOpenChange:e=>{h(e),o(e)},open:d,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Velg ny aktivitet"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsxs)(GZ,{children:[(0,V.jsx)(XZ,{value:"Telefon",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Gbe,{className:"w-5 h-5"})," Telefon"]})}),(0,V.jsx)(XZ,{value:"M\xf8te",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Wbe,{className:"w-5 h-5"}),"M\xf8te"]})}),(0,V.jsx)(XZ,{value:"Videom\xf8te",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Zbe,{className:"w-5 h-5"}),"Videom\xf8te"]})}),(0,V.jsx)(XZ,{value:"Befaring",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Ybe,{className:"w-5 h-5"}),"Befaring"]})}),(0,V.jsx)(XZ,{value:"E-post",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Xbe,{className:"w-5 h-5"}),"E-post"]})}),(0,V.jsx)(XZ,{value:"Annet",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(Qbe,{className:"w-5 h-5"}),"Annet"]})})]})})]})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:"notat",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Notat"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(J3,{placeholder:"Fyll inn kommentar",...t,className:`h-[100px] bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `})})}),(0,V.jsx)(cW,{})]})}})})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center mt-8",children:[(0,V.jsx)("div",{onClick:()=>l.reset(),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-lightPurple bg-lightPurple text-primary text-base rounded-[8px] h-[48px] font-medium relative py-[10px] flex items-center gap-2 px-[50px]"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-green2 bg-green2 text-white text-base rounded-[8px] h-[48px] font-medium relative px-[50px] py-[10px] flex items-center gap-2",type:"submit"})]})]})})]})},cwe=kQ.object({email:kQ.string().email({message:"Vennligst skriv inn en gyldig e-postadresse."}).min(1,{message:"E-posten m\xe5 v\xe6re p\xe5 minst 2 tegn."}),name:kQ.string().min(1,{message:"Navn m\xe5 best\xe5 av minst 2 tegn."}),telefon:kQ.string().refine((e=>{const t=D3(e),r=null!==t&&void 0!==t&&t.countryCallingCode?`+${t.countryCallingCode}`:"",n=(null===t||void 0===t?void 0:t.nationalNumber)||"";if("+47"!==r)return!1;const i=j_[r];return!!i&&i(n)}),{message:"Vennligst skriv inn et gyldig telefonnummer for det valgte landet."}),adresse:kQ.string().optional()}),uwe=e=>{let{getLeadData:r,handlePopup:n,leadData:i}=e;const a=AG({resolver:FG(cwe)}),s=Gr().pathname.split("/"),o=s.length>2?s[2]:null;return(0,t.useEffect)((()=>{var e,t,r,n,s,o;i&&(a.setValue("name",null===i||void 0===i||null===(e=i.leadData)||void 0===e?void 0:e.name),a.setValue("email",(null===i||void 0===i||null===(t=i.leadData)||void 0===t?void 0:t.email)||(null===i||void 0===i||null===(r=i.leadData)||void 0===r?void 0:r.epost)),a.setValue("telefon",(null===i||void 0===i||null===(n=i.leadData)||void 0===n?void 0:n.telefon)&&I_(null===i||void 0===i||null===(s=i.leadData)||void 0===s?void 0:s.telefon)),a.setValue("adresse",null===i||void 0===i||null===(o=i.leadData)||void 0===o?void 0:o.adresse))}),[i,a]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("h3",{className:"text-lg md:text-xl desktop:text-2xl mb-4 text-darkBlack font-semibold",children:"Rediger profil"}),(0,V.jsx)(tW,{...a,children:(0,V.jsxs)("form",{onSubmit:a.handleSubmit((async e=>{e&&(e.telefon=function(e){return e.replace("+","")}(e.telefon));try{try{await mg(cm(g_,"leads_from_supplier",String(o)),{updatedAt:uo.now(),"leadData.name":e.name,"leadData.email":e.email,"leadData.telefon":e.telefon,"leadData.adresse":e.adresse}),await r(),n(),He.success("Updated Successfully.",{position:"top-right"}),a.reset()}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("div",{className:"",children:(0,V.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:a.control,name:"name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Navn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn navnet ditt",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:a.control,name:"email",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"E-post"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn E-post",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:a.control,name:"telefon",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Telefon"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(R3,{placeholder:"Skriv inn Telefon",...t,className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"tel"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:a.control,name:"adresse",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Anleggsadresse"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn anleggsadresse",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center mt-8",children:[(0,V.jsx)("div",{onClick:()=>a.reset(),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-lightPurple bg-lightPurple text-primary text-base rounded-[8px] h-[48px] font-medium relative py-[10px] flex items-center gap-2 px-[50px]"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-green2 bg-green2 text-white text-base rounded-[8px] h-[48px] font-medium relative px-[50px] py-[10px] flex items-center gap-2",type:"submit"})]})]})})]})},dwe=kQ.object({Husmodell:kQ.array(kQ.string().min(1,{message:"Husmodell m\xe5 spesifiseres."})).min(1,{message:"Minst \xe9n husmodell m\xe5 velges."}).optional(),City:kQ.array(kQ.string().min(1,{message:"\xd8nsket bygget i m\xe5 spesifiseres."})).min(1,{message:"Minst \xe9n by m\xe5 velges."}).optional(),Tildelt:kQ.string().min(1,{message:"Tildelt i must m\xe5 spesifiseres."})}),hwe={januar:"January",februar:"February","m\xe4rz":"March",april:"April",mai:"May",juni:"June",juli:"July",august:"August",september:"September",oktober:"October",november:"November",dezember:"December"},pwe=()=>{var e,r,n,i,a,s,o,l,c,u;const d=Gr(),h=Kr(),p=d.pathname.split("/"),f=p.length>2?p[2]:null,[m,g]=(0,t.useState)(null),v=localStorage.getItem("Iplot_admin"),[x,y]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){const t=null===e||void 0===e?void 0:e.supplier;y(t)}})()}),[x]);const b=(0,t.useCallback)((async()=>{if(f)try{const e=await(async e=>{try{const t=cm(g_,"leads_from_supplier",e),r=await dg(t);if(r.exists())return r.data();console.error("No document found for ID:",e)}catch(t){console.error("Error fetching lead data:",t)}})(f);e&&g(e)}catch(e){console.error("Failed to fetch data:",e)}}),[f]);(0,t.useEffect)((()=>{f&&b()}),[b]);const w=AG({resolver:FG(dwe)}),[_,k]=(0,t.useState)([]),S=async()=>{try{let e;e=Zm(lm(g_,"house_model"),Xm("Husdetaljer.Leverand\xf8rer","==","andre.finger@gmail.com"===v?"065f9498-6cdb-469b-8601-bb31114d7c95":x));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()})));k(t)}catch(e){console.error("Error fetching husmodell data:",e)}},[j,E]=(0,t.useState)([]),[C,N]=(0,t.useState)(),[T,P]=(0,t.useState)("");(0,t.useEffect)((()=>{null!==m&&void 0!==m&&m.supplierId&&(async e=>{const t=await w_(e);t&&N(t)})(null===m||void 0===m?void 0:m.supplierId)}),[null===m||void 0===m?void 0:m.supplierId]);const[A,M]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{try{let e=Zm(lm(g_,"cities"));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()})));E(t)}catch(e){console.error("Error fetching city data:",e)}})(),S(),(async()=>{try{let e;e=Zm(lm(g_,"admin"),Xm("supplier","==","andre.finger@gmail.com"===v?"065f9498-6cdb-469b-8601-bb31114d7c95":String(x)));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()})));M(t)}catch(e){console.error("Error fetching suppliers data:",e)}})()}),[x]),(0,t.useEffect)((()=>{(async()=>{if(!f)return;const e=cm(g_,"leads_from_supplier",String(f),"preferred_house_model",String(f)),t=await dg(e);if(t.exists()){const e=t.data();Object.entries(e).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&w.setValue(t,r)}))}})()}),[w,f,(null===_||void 0===_?void 0:_.length)>0,j.length>0]);const[I,O]=(0,t.useState)(0);(0,t.useEffect)((()=>{(async()=>{if(!f)return;const e=cm(g_,"leads_from_supplier",String(f),"history",String(f)),t=await dg(e);if(t.exists()){const e=t.data();Object.entries(e).forEach((e=>{let[t,r]=e;"activeStep"===t&&O(r)}))}})()}),[f]);const D=[{title:"Lead mottatt",date:C_(null===m||void 0===m||null===(e=m.createdAt)||void 0===e?void 0:e.seconds,null===m||void 0===m||null===(r=m.createdAt)||void 0===r?void 0:r.nanoseconds)},{title:"I dialog",date:"-"},{title:"F\xf8rstegangsm\xf8te",date:"-"},{title:"Tilbud sendt",date:"-"},{title:"Signert",date:"-"}],R=e=>e<I||e===I?"bg-[#008930] border-[#EEF3F7]":"bg-[#F9FAFB] border-[#F9FAFB]",L=e=>e<I?"bg-[#EAECF0]":e===I?"bg-white":"bg-[#EAECF0]",F=e=>e<=I?"text-purple":"text-black",[$,B]=(0,t.useState)([]),[z,U]=(0,t.useState)("All"),H=async()=>{if(!f)return;const e=lm(g_,"leads_from_supplier",String(f),"followups");try{const t=(await pg(e)).docs.map((e=>{var t;const r=e.data();let n;if("initial"!==(null===r||void 0===r?void 0:r.type)&&"initial"!==(null===r||void 0===r?void 0:r.Hurtigvalg)||O(1),"string"===typeof r.createdAt){const[e,t]=r.createdAt.split("|").map((e=>e.trim())),[i,a,s]=e.split(" "),o=hwe[a.toLowerCase()]||a;n=new Date(`${o} ${i}, ${s} ${t}`).getTime()}else n=null!==(t=r.createdAt)&&void 0!==t&&t.toMillis?r.createdAt.toMillis():0;return{id:e.id,...r,_sortTime:n}}));t.sort(((e,t)=>t._sortTime-e._sortTime)),B(t)}catch(t){console.error("Failed to fetch logs:",t)}},G="All"===z?"":z,W=G?$.filter((e=>((null===e||void 0===e?void 0:e.Hurtigvalg)||(null===e||void 0===e?void 0:e.type))===G)):$;(0,t.useEffect)((()=>{H()}),[f]);const q=_&&_.length>0?_.map((e=>{var t;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(t=e.Husdetaljer)||void 0===t?void 0:t.husmodell_name}})):[],K=j&&j.length>0?j.map((e=>({value:null===e||void 0===e?void 0:e.name,label:null===e||void 0===e?void 0:e.name}))):[],[Z,Y]=(0,t.useState)(!1),X=()=>{Y(!Z)},[Q,J]=(0,t.useState)(!1),ee=()=>{J(!Q)},[te,re]=(0,t.useState)(!1),ne=()=>{re(!te)},[ie,ae]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(!f)return;const e=cm(g_,"leads_from_supplier",String(f),"preferred_house_model",String(f)),t=await dg(e);if(t.exists()){var r;const e=t.data();if(null!==e&&void 0!==e&&null!==(r=e.Husmodell)&&void 0!==r&&r[0]){var n;const t=await y_(String(null===e||void 0===e||null===(n=e.Husmodell)||void 0===n?void 0:n[0]));t&&t.Husdetaljer&&ae(t)}}})()}),[f]);const[se,oe]=(0,t.useState)(!1);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"bg-lightPurple py-4 px-4 md:px-6",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3",children:[(0,V.jsx)(ti,{to:"/my-leads",className:"text-gray text-xs md:text-sm font-medium",children:"Leads"}),(0,V.jsx)(KV,{className:"w-4 h-4 text-gray2"}),(0,V.jsx)("span",{className:"text-primary text-xs md:text-sm font-medium",children:"Leadsdetaljer"})]}),ie&&(0,V.jsxs)("div",{className:"text-darkBlack text-lg md:text-xl desktop:text-2xl font-medium mt-2 md:mt-4",children:["Lead for"," ",(0,V.jsx)("span",{className:"font-bold",children:null===ie||void 0===ie||null===(n=ie.Husdetaljer)||void 0===n?void 0:n.husmodell_name})]})]}),(0,V.jsxs)("div",{className:"p-4 md:p-6 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6 md:items-center justify-between",children:[(0,V.jsxs)("div",{className:"flex items-center gap-4 md:gap-6",children:[(0,V.jsx)("div",{className:"w-[100px] h-[100px] md:w-[120px] md:h-[120px] desktop:w-[160px] desktop:h-[160px] rounded-full flex items-center justify-center border-[4px] border-[#fff] bg-lightPurple text-primary text-[2rem] md:text-[40px] desktop:text-[48px] font-medium",style:{boxShadow:"0px 4px 6px -2px #10182808, 0px 12px 16px -4px #10182814"},children:null===m||void 0===m||null===(i=m.leadData)||void 0===i?void 0:i.name.split(" ").map((e=>e.charAt(0))).join("")}),(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsx)("h4",{className:"text-darkBlack text-xl md:text-2xl desktop:text-[28px] font-medium",children:null===m||void 0===m||null===(a=m.leadData)||void 0===a?void 0:a.name}),(0,V.jsxs)("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap",children:[(0,V.jsx)("span",{className:"flex items-center gap-2 md:gap-4",children:(null===m||void 0===m||null===(s=m.leadData)||void 0===s?void 0:s.email)||(null===m||void 0===m||null===(o=m.leadData)||void 0===o?void 0:o.epost)&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("span",{className:"text-gray text-sm md:text-base desktop:text-lg",children:(null===m||void 0===m||null===(l=m.leadData)||void 0===l?void 0:l.email)||(null===m||void 0===m||null===(c=m.leadData)||void 0===c?void 0:c.epost)}),(0,V.jsx)("div",{className:"border-l border-gray2 h-[14px]"})]})}),(0,V.jsx)("span",{className:"text-gray text-sm md:text-base desktop:text-lg",children:I_(null===m||void 0===m||null===(u=m.leadData)||void 0===u?void 0:u.telefon)})]})]}),(0,V.jsx)(GT,{className:"text-primary cursor-pointer",onClick:ne})]}),(0,V.jsx)("div",{className:"flex gap-2 md:gap-4",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2 md:gap-4 md:items-end",children:[(0,V.jsx)("div",{className:"flex items-center gap-3 md:gap-5",children:(0,V.jsx)("p",{className:"text-xs sm:text-sm text-gray",children:T_(null===m||void 0===m?void 0:m.createdAt)})}),(0,V.jsxs)("div",{className:"flex items-center gap-1",children:[(0,V.jsx)("span",{className:"text-gray text-xs sm:text-sm",children:"Kilde:"}),(0,V.jsx)("div",{className:"bg-lightPurple py-1 px-3 h-[28px] rounded-[40px] flex items-center justify-between clear-start text-black text-xs sm:text-sm font-medium",children:null===C||void 0===C?void 0:C.company_name})]})]})})]}),(0,V.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,V.jsx)(HT,{text:"Legg til ny oppf\xf8lgning",className:"border border-green2 bg-green2 text-white text-sm md:text-base rounded-[8px] h-[40px] md:h-[48px] font-medium relative px-4 md:px-[30px] py-[10px] flex items-center gap-2",type:"button",onClick:()=>{X(),P("")}}),(0,V.jsx)(HT,{text:"Ny loggf\xf8ring",className:"border border-lightPurple bg-lightPurple text-primary text-sm md:text-base rounded-[8px] h-[40px] md:h-[48px] font-medium relative px-4 md:px-[30px] py-[10px] flex items-center gap-2",type:"button",onClick:()=>{ee(),P("")}})]}),(0,V.jsx)(tW,{...w,children:(0,V.jsx)("form",{onSubmit:w.handleSubmit((async e=>{try{const t=new Intl.DateTimeFormat("nb-NO",{day:"numeric",month:"long",year:"numeric"}),r=cm(g_,"leads_from_supplier",String(f),"preferred_house_model",String(f)),n=await dg(r);void 0===e.City&&delete e.City,void 0===e.Husmodell&&delete e.Husmodell,n.exists()?(await mg(r,{...e,updatedAt:t.format(new Date)}),He.success("Preferred house info updated.",{position:"top-right"}),await mg(cm(g_,"leads_from_supplier",String(f)),{updatedAt:uo.now()}),h("/my-leads")):(await fg(r,{...e,createdAt:t.format(new Date),updatedAt:t.format(new Date)}),He.success("Preferred house info created.",{position:"top-right"}),await mg(cm(g_,"leads_from_supplier",String(f)),{updatedAt:uo.now()}),h("/my-leads"))}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:(0,V.jsxs)("div",{className:"shadow-shadow3 border border-gray2 rounded-lg p-4 md:p-6",children:[(0,V.jsx)("h4",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-semibold mb-3 md:mb-5",children:"Leadsinformasjon"}),(0,V.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-3 md:gap-x-5 gap-y-4 md:gap-y-8",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:w.control,name:"Husmodell",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Husmodell"}),(0,V.jsx)(lW,{children:(0,V.jsx)(r4,{options:q,onChange:e=>{const r=e.map((e=>e.value));t.onChange(r)},placeholder:"Velg Husmodell",className:(null!==r&&void 0!==r&&r.error?"border-red":"border-gray1")+" ",value:t.value})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:w.control,name:"City",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"\xd8nsket bygget i"}),(0,V.jsx)(lW,{children:(0,V.jsx)(r4,{options:K,onChange:e=>{const r=e.map((e=>e.value));t.onChange(r)},placeholder:"Velg fylke",className:(null!==r&&void 0!==r&&r.error?"border-red":"border-gray1")+" ",value:t.value})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"",children:(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:w.control,name:"Tildelt",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Tildelt"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Select Leverand\xf8rer"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsx)(GZ,{children:null===A||void 0===A?void 0:A.map(((e,t)=>(0,V.jsxs)(XZ,{value:null===e||void 0===e?void 0:e.id,children:[null===e||void 0===e?void 0:e.f_name," ",null===e||void 0===e?void 0:e.l_name]},t)))})})]})})}),(0,V.jsx)(cW,{})]})}})})})]}),(0,V.jsx)("div",{className:"flex justify-end w-full gap-3 md:gap-5 items-center mt-4 md:mt-8",children:(0,V.jsx)(HT,{text:"Lagre",className:"border border-green2 bg-green2 text-white text-base rounded-[8px] h-[40px] md:h-[48px] font-medium relative px-px-6 md:[50px] py-[10px] flex items-center gap-2",type:"submit"})})]})})}),(0,V.jsxs)("div",{className:"shadow-shadow3 border border-gray2 rounded-lg p-3 md:p-6",children:[(0,V.jsx)("h4",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-semibold mb-3 md:mb-5",children:"Fremdrift"}),(0,V.jsx)("div",{className:"w-full mb-3 md:mb-5",children:(0,V.jsxs)("div",{className:"relative flex justify-between items-center",children:[(0,V.jsx)("div",{className:"absolute top-3.5 md:top-5 left-[50px] md:left-[72px] right-[50px] md:right-[72px] h-0.5 bg-gray2 z-0"}),(0,V.jsx)("div",{className:"absolute top-3.5 md:top-5 left-[50px] md:left-[72px] h-0.5 bg-purple z-10 transition-all duration-300 ease-in-out",style:{width:`calc((100% - 144px) * ${I/(D.length-1)})`}}),D.map(((e,t)=>(0,V.jsxs)("div",{className:"flex flex-col z-20 items-center w-[145px]",children:[(0,V.jsx)("div",{className:`w-8 md:w-10 h-8 md:h-10 rounded-full flex items-center justify-center border-4 shadow-md ${R(t)}`,children:(0,V.jsx)("div",{className:`w-3 h-3 rounded-full ${L(t)}`})}),(0,V.jsx)("div",{className:`mt-2 md:mt-3 font-medium whitespace-nowrap text-[10px] sm:text-xs md:text-sm desktop:text-base text-center ${F(t)}`,children:e.title}),(0,V.jsx)("div",{className:`text-[10px] sm:text-xs md:text-sm desktop:text-base whitespace-nowrap text-center ${F(t)}`,children:e.date})]},t)))]})}),(0,V.jsxs)("div",{className:"flex sm:items-center gap-3 md:gap-5",children:[(0,V.jsx)("span",{className:"text-xs md:text-sm desktop::text-base",children:"Hurtigvalg:"}),(0,V.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:[{label:"I dialog",color:"#581845",textColor:"text-[#581845]"},{label:"F\xf8rstegangsm\xf8te",color:"#996CFF",textColor:"text-primary"},{label:"Tilbud sendt",color:"#E46A00",textColor:"text-[#994700]"},{label:"Signert",color:"#0022E4",textColor:"text-[#001795]"}].map((e=>{let{label:t,color:r,textColor:n}=e;return(0,V.jsxs)("div",{onClick:()=>{"I dialog"===t&&O(1),"F\xf8rstegangsm\xf8te"===t&&O(2),"Tilbud sendt"===t&&O(3),"Signert"===t&&O(4),P(t),X()},className:"cursor-pointer border-2 rounded-lg py-2 px-2.5 sm:px-4 shadow-shadow1 flex items-center gap-2 transition-all duration-200 border-primary\n                          "+(T===t?"bg-[#EBDEFF]":""),children:[(0,V.jsx)("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:r}}),(0,V.jsx)("span",{className:`text-[10px] sm:text-xs font-medium ${n}`,children:t})]},t)}))})]})]}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,V.jsx)("h3",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-semibold mb-3 md:mb-5",children:"Logg"}),(0,V.jsx)("div",{className:"w-[300px]",children:(0,V.jsxs)(HZ,{onValueChange:e=>{U(e)},value:z,children:[(0,V.jsx)(qZ,{className:"bg-white rounded-[8px] border text-black border-gray1",children:(0,V.jsx)(WZ,{placeholder:"Enter Type partner"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsx)(GZ,{children:[{name:"All"},{name:"Telefon"},{name:"Telesamtale"},{name:"M\xf8te"},{name:"initial"},{name:"Ring tilbake"},{name:"Videom\xf8te"},{name:"Befaring"},{name:"E-post"},{name:"Annet"},{name:"F\xf8rstegangsm\xf8te"},{name:"Tilbud sendt"},{name:"Signert"}].map(((e,t)=>(0,V.jsx)(XZ,{value:e.name,children:e.name},t)))})})]})})]}),(0,V.jsx)("div",{className:"overflow-x-auto w-full",children:(0,V.jsxs)("table",{className:"min-w-full rounded-md overflow-hidden",children:[(0,V.jsx)("thead",{className:"bg-[#F9FAFB]",children:(0,V.jsxs)("tr",{children:[(0,V.jsx)("th",{className:"px-3 md:px-4 py-3 text-left text-xs font-medium text-gray",children:"Date"}),(0,V.jsx)("th",{className:"px-3 md:px-4 py-3 text-left text-xs font-medium text-gray",children:"Title"}),(0,V.jsx)("th",{className:"px-3 md:px-4 py-3 text-left text-xs font-medium text-gray",children:"Note"})]})}),(0,V.jsx)("tbody",{children:W&&W.length>0?W.map(((e,t)=>{const r=(null===e||void 0===e?void 0:e.Hurtigvalg)||(null===e||void 0===e?void 0:e.type);return(0,V.jsxs)("tr",{className:"border-b border-gray2",children:[(0,V.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-6 text-xs md:text-sm text-black font-medium w-max whitespace-nowrap",children:(null===e||void 0===e?void 0:e.createdAt)&&M_(null===e||void 0===e?void 0:e.createdAt)||T_(null===e||void 0===e?void 0:e.date)}),(0,V.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-6 text-xs md:text-sm text-black font-medium w-max whitespace-nowrap",children:(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"Telefon":case"Telesamtale":return(0,V.jsx)(Gbe,{className:"w-5 h-5"});case"M\xf8te":return(0,V.jsx)(Wbe,{className:"w-5 h-5"});case"initial":return(0,V.jsx)(qbe,{className:"w-5 h-5"});case"Ring tilbake":return(0,V.jsx)(Kbe,{className:"w-5 h-5"});case"Videom\xf8te":return(0,V.jsx)(Zbe,{className:"w-5 h-5"});case"Befaring":return(0,V.jsx)(Ybe,{className:"w-5 h-5"});case"E-post":return(0,V.jsx)(Xbe,{className:"w-5 h-5"});case"Annet":return(0,V.jsx)(Qbe,{className:"w-5 h-5"});case"F\xf8rstegangsm\xf8te":return(0,V.jsx)(Jbe,{className:"w-5 h-5"});case"Tilbud sendt":return(0,V.jsx)(ewe,{className:"w-5 h-5"});case"Signert":return(0,V.jsx)(twe,{className:"w-5 h-5"});default:return null}})(r),r]})}),(0,V.jsx)(rwe,{log:e,leadId:String(f),fetchLogs:H})]},t)})):(0,V.jsx)("tr",{children:(0,V.jsx)("td",{colSpan:3,children:(0,V.jsx)("div",{className:"text-center py-2 text-xs md:text-sm text-black",children:"No Logs Found"})})})})]})})]})]}),Z&&(0,V.jsx)(sA,{isOpen:!0,onClose:()=>{se||Y(!1)},children:(0,V.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg w-[100vw] sm:w-[500px] relative",children:[(0,V.jsx)("button",{className:"absolute top-3 right-3",onClick:()=>Y(!1),children:(0,V.jsx)("img",{src:U3,alt:"close"})}),(0,V.jsx)(swe,{fetchLogs:H,fetchHusmodellData:S,handlePopup:X,SelectHistoryValue:T,setSelectHistoryValue:P,setDropdownOpen:oe})]})}),Q&&(0,V.jsx)(sA,{isOpen:!0,onClose:()=>{se||J(!1)},children:(0,V.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg w-[100vw] sm:w-[500px] relative",children:[(0,V.jsx)("button",{className:"absolute top-3 right-3",onClick:()=>J(!1),children:(0,V.jsx)("img",{src:U3,alt:"close"})}),(0,V.jsx)(lwe,{fetchLogs:H,fetchHusmodellData:S,handlePopup:ee,SelectHistoryValue:T,setSelectHistoryValue:P,setDropdownOpen:oe})]})}),te&&(0,V.jsx)(sA,{isOpen:!0,onClose:ne,children:(0,V.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-lg w-[100vw] sm:w-[500px] relative",children:[(0,V.jsx)("button",{className:"absolute top-3 right-3",onClick:()=>re(!1),children:(0,V.jsx)("img",{src:U3,alt:"close"})}),(0,V.jsx)(uwe,{handlePopup:ne,getLeadData:b,leadData:m})]})})]})},fwe=e=>{var r,n,i,a,s,o,l,c;let{id:u}=e;const[d,h]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{if(!u)return;const e=lm(g_,"leads_from_supplier",String(u),"followups");try{const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=e=>{const t=null===e||void 0===e?void 0:e.updatedAt;if("string"===typeof t){const[e,r]=t.split("|").map((e=>e.trim())),[n,i,a]=e.split(" "),s=hwe[i.toLowerCase()]||i,o=new Date(`${s} ${n}, ${a} ${r}`).getTime();return isNaN(o)?0:o}return null!==t&&void 0!==t&&t.toMillis?t.toMillis():null!==e&&void 0!==e&&null!==(r=e.date)&&void 0!==r&&r.seconds?1e3*e.date.seconds:0;var r};t.sort(((e,t)=>r(t)-r(e))),h(t)}catch(t){console.error("Failed to fetch logs:",t)}})()}),[u]),(0,V.jsx)(V.Fragment,{children:d&&d.length>0?(0,V.jsx)("div",{className:`flex items-center justify-between w-max rounded-[16px] py-[2px] px-2\n        ${"F\xf8rstegangsm\xf8te"===(null===(r=d[0])||void 0===r?void 0:r.Hurtigvalg)?"bg-[#e3d8fe] text-primary":""}\n        ${"Tilbud sendt"===(null===(n=d[0])||void 0===n?void 0:n.Hurtigvalg)?"bg-[#e2e6fd] text-[#001795]":""}\n        ${"Signert"===(null===(i=d[0])||void 0===i?void 0:i.Hurtigvalg)?"bg-lightGreen text-darkGreen":""}\n        ${["Signert","F\xf8rstegangsm\xf8te","Tilbud sendt"].includes(null===(a=d[0])||void 0===a?void 0:a.Hurtigvalg)?"":"bg-[#FFEBD9] text-[#994700]"}`,children:"initial"===(null===(s=d[0])||void 0===s?void 0:s.Hurtigvalg)||"initial"===(null===(o=d[0])||void 0===o?void 0:o.type)?"Ubehandlet":(null===(l=d[0])||void 0===l?void 0:l.Hurtigvalg)||(null===(c=d[0])||void 0===c?void 0:c.type)}):(0,V.jsx)("div",{className:"text-[#994700] flex items-center justify-between w-max bg-[#FFEBD9] rounded-[16px] py-[2px] px-2",children:"Ubehandlet"})})},mwe=e=>{let{id:r}=e;const[n,i]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(!r)return;const e=cm(g_,"leads_from_supplier",String(r),"preferred_house_model",String(r)),t=await dg(e);t.exists()&&i(t.data())})()}),[r]);const[a,s]=(0,t.useState)(null);return(0,t.useEffect)((()=>{if(null===n||void 0===n||!n.Tildelt)return;(async()=>{const e=await __(String(null===n||void 0===n?void 0:n.Tildelt));e&&s(e)})()}),[null===n||void 0===n?void 0:n.Tildelt]),(0,V.jsx)(V.Fragment,{children:a?(0,V.jsxs)("div",{className:"flex items-center gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray1 bg-gray3 flex items-center justify-center",children:(null===a||void 0===a?void 0:a.f_name[0])||(null===a||void 0===a?void 0:a.name[0])}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("p",{className:"font-medium text-black text-sm mb-[2px]",children:[(null===a||void 0===a?void 0:a.f_name)||(null===a||void 0===a?void 0:a.name)," ",null===a||void 0===a?void 0:a.l_name]}),(0,V.jsx)("p",{className:"text-xs text-gray",children:null===a||void 0===a?void 0:a.email})]})]}):(0,V.jsx)("p",{className:"text-center",children:"-"})})},gwe=e=>{var r,n;let{id:i,rowData:a}=e;const[s,o]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{if(i)try{const e=lm(g_,"leads_from_supplier",String(i),"followups"),t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=e=>{var t;const r=null===e||void 0===e?void 0:e.updatedAt;if("string"===typeof r)try{const[e,t]=r.split("|").map((e=>e.trim())),[n,i,a]=e.split(" "),s=hwe[i.toLowerCase()]||i,o=new Date(`${s} ${n}, ${a} ${t}`).getTime();return isNaN(o)?0:o}catch{return 0}return null!==r&&void 0!==r&&r.toMillis?r.toMillis():null!==e&&void 0!==e&&null!==(t=e.date)&&void 0!==t&&t.seconds?1e3*e.date.seconds:0},n=t.sort(((e,t)=>r(t)-r(e)));o(n)}catch(e){console.error("Error fetching followups:",e)}})()}),[i]);const l=s.length>0?(null===(r=s[0])||void 0===r?void 0:r.notat)||(null===(n=s[0])||void 0===n?void 0:n.notes):null;return(0,V.jsx)("p",{className:"text-sm text-black w-max max-w-[500px]",children:l||a||"Ingen notater"})},vwe=e=>{var r,n;let{id:i}=e;const[a,s]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{if(!i)return;const e=lm(g_,"leads_from_supplier",String(i),"followups");try{const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),r=e=>{const t=null===e||void 0===e?void 0:e.updatedAt;if("string"===typeof t){const[e,r]=t.split("|").map((e=>e.trim())),[n,i,a]=e.split(" "),s=hwe[i.toLowerCase()]||i,o=new Date(`${s} ${n}, ${a} ${r}`).getTime();return isNaN(o)?0:o}return null!==t&&void 0!==t&&t.toMillis?t.toMillis():null!==e&&void 0!==e&&null!==(r=e.date)&&void 0!==r&&r.seconds?1e3*e.date.seconds:0;var r};t.sort(((e,t)=>r(t)-r(e))),s(t)}catch(t){console.error("Failed to fetch logs:",t)}})()}),[i]),(0,V.jsx)(V.Fragment,{children:a&&a.length>0?(0,V.jsx)("p",{className:"text-sm font-semibold text-black w-max",children:null!==a&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&r.date?T_(null===a||void 0===a||null===(n=a[0])||void 0===n?void 0:n.date):"-"}):(0,V.jsx)(V.Fragment,{children:"-"})})},xwe=()=>{var e;const[r,n]=(0,t.useState)(null),[i,a]=(0,t.useState)(null),[s,o]=(0,t.useState)("asc"),[l,c]=(0,t.useState)(1),[u,d]=(0,t.useState)([]),[h,p]=(0,t.useState)(""),f=Kr(),[m,g]=(0,t.useState)(!0),[v,x]=(0,t.useState)(null),[y,b]=(0,t.useState)("Til oppf\xf8lgning"),w=localStorage.getItem("Iplot_admin"),[_,k]=(0,t.useState)([]),[S,j]=(0,t.useState)({});(0,t.useEffect)((()=>{g(!0);u.length>0&&(async()=>{const e={};await Promise.all(u.map((async t=>{const r=lm(g_,"leads_from_supplier",String(t.id),"followups");try{const n=(await pg(r)).docs.map((e=>({id:e.id,...e.data()}))),i=e=>{const t=null===e||void 0===e?void 0:e.updatedAt;if("string"===typeof t){const[e,r]=t.split("|").map((e=>e.trim())),[n,i,a]=e.split(" "),s=hwe[i.toLowerCase()]||i,o=new Date(`${s} ${n}, ${a} ${r}`).getTime();return isNaN(o)?0:o}return null!==t&&void 0!==t&&t.toMillis?t.toMillis():null!==e&&void 0!==e&&null!==(r=e.date)&&void 0!==r&&r.seconds?1e3*e.date.seconds:0;var r};n.sort(((e,t)=>i(t)-i(e))),e[t.id]=n}catch(n){console.error("Failed to fetch logs:",n)}}))),j(e),g(!1)})()}),[u]),(0,t.useEffect)((()=>{const e=async()=>{const e=h.toLowerCase();g(!0);const t=await Promise.all(u.map((async t=>{var n,i,a,s,o;const l=null===t||void 0===t||null===(n=t.leadSource)||void 0===n?void 0:n.toLowerCase(),c=null===t||void 0===t||null===(i=t.leadData)||void 0===i||null===(a=i.kilde)||void 0===a?void 0:a.toLowerCase(),u=null===t||void 0===t||null===(s=t.leadData)||void 0===s||null===(o=s.name)||void 0===o?void 0:o.toLowerCase();if(!((null===l||void 0===l?void 0:l.includes(e))||(null===c||void 0===c?void 0:c.includes(e))||(null===u||void 0===u?void 0:u.includes(e))))return null;const d=P_(t.createdAt);if(null!==r){if(!(d===A_(r)))return null}if(null!==v){const{startDate:e,endDate:t}=(e=>{const t=new Date;let r,n=t;switch(e){case"12 m\xe5neder":r=new Date(t),r.setFullYear(t.getFullYear()-1);break;case"30 dager":r=new Date(t),r.setDate(t.getDate()-30);break;case"7 dager":r=new Date(t),r.setDate(t.getDate()-7);break;case"24 timer":r=new Date(t),r.setHours(t.getHours()-24);break;default:return null}return{startDate:r.toISOString().split("T")[0],endDate:n.toISOString().split("T")[0]}})(v);if(!(d>=e&&d<=t))return null}if("Up for grabs"===y){const e=(null===S||void 0===S?void 0:S[t.id])||[],r=e&&(null===e||void 0===e?void 0:e[0]);return"initial"===(null===r||void 0===r?void 0:r.type)||"initial"===(null===r||void 0===r?void 0:r.Hurtigvalg)?t:null}if("Fremtidige oppgaver"===y){var h;const e=Array.isArray(null===S||void 0===S?void 0:S[t.id])?S[t.id]:[],r=null===e||void 0===e?void 0:e[0],n=null!==r&&void 0!==r&&null!==(h=r.date)&&void 0!==h&&h.seconds?new Date(1e3*r.date.seconds):null,i=new Date;return n&&n>i?t:null}if("Til oppf\xf8lgning"===y){var p;const e=Array.isArray(null===S||void 0===S?void 0:S[t.id])?S[t.id]:[],r=null===e||void 0===e?void 0:e[0];if("initial"===(null===r||void 0===r?void 0:r.type)||"initial"===(null===r||void 0===r?void 0:r.Hurtigvalg)||"Signert"===(null===r||void 0===r?void 0:r.type)||"Signert"===(null===r||void 0===r?void 0:r.Hurtigvalg))return null;const n=null!==r&&void 0!==r&&null!==(p=r.date)&&void 0!==p&&p.seconds?new Date(1e3*r.date.seconds):null,i=new Date;i.setHours(0,0,0,0);return n&&n.setHours(0,0,0,0)<=i.getTime()?t:null}if("Avsluttede leads"===y){const e=Array.isArray(null===S||void 0===S?void 0:S[t.id])?S[t.id]:[],r=null===e||void 0===e?void 0:e[0];return"Signert"===(null===r||void 0===r?void 0:r.type)||"Signert"===(null===r||void 0===r?void 0:r.Hurtigvalg)?t:null}return t}))),n=t.filter(Boolean);k(n),g(!1)};Object.keys(S).length>0&&e()}),[u,h,r,v,y,S]),(0,t.useEffect)((()=>{(async()=>{g(!0);try{let e=Zm(lm(g_,"leads_from_supplier"),eg("updatedAt","desc"));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()})));d(t)}catch(e){console.error("Error fetching leads data:",e)}finally{g(!1)}})()}),[]);const E=async e=>{if(!e)return;const t=lm(g_,"leads_from_supplier",String(e),"followups");try{const e=(await pg(t)).docs.map((e=>({id:e.id,...e.data()}))),r=e=>{const t=null===e||void 0===e?void 0:e.updatedAt;if("string"===typeof t){const[e,r]=t.split("|").map((e=>e.trim())),[n,i,a]=e.split(" "),s=hwe[i.toLowerCase()]||i,o=new Date(`${s} ${n}, ${a} ${r}`).getTime();return isNaN(o)?0:o}return null!==t&&void 0!==t&&t.toMillis?t.toMillis():null!==e&&void 0!==e&&null!==(r=e.date)&&void 0!==r&&r.seconds?1e3*e.date.seconds:0;var r};return e.sort(((e,t)=>r(t)-r(e))),e}catch(r){console.error("Failed to fetch logs:",r)}},[C,N]=(0,t.useState)(new Map);(0,t.useEffect)((()=>{(async()=>{const e=new Map;for(const t of _){const r=null===t||void 0===t?void 0:t.id;if(r){const t=await E(r);e.set(r,t||[])}}N(e)})()}),[_,s]);const T=async e=>{if(!e)return;const t=cm(g_,"leads_from_supplier",String(e),"preferred_house_model",String(e)),r=await dg(t);return r.exists()?r.data():void 0},[P,A]=(0,t.useState)(new Map),[M,I]=(0,t.useState)(new Map);(0,t.useEffect)((()=>{_.forEach((e=>{e.id&&!P.has(e.id)&&((async e=>{var t;const r=await T(e);if(null!==r&&void 0!==r&&null!==(t=r.Husmodell)&&void 0!==t&&t[0]){const t=await y_(r.Husmodell[0]);t&&t.Husdetaljer&&A((r=>new Map(r).set(e,t)))}})(e.id),(async e=>{const t=await T(e);if(null!==t&&void 0!==t&&t.Tildelt){const r=await __(null===t||void 0===t?void 0:t.Tildelt);r&&I((t=>new Map(t).set(e,r)))}})(e.id))}))}),[_]);const O=(e,t)=>{var r,n,i;let a=e.leadData;switch(t){case"Aktivitet":{const t=null===e||void 0===e?void 0:e.id,r=C.get(String(t));if(!r||0===r.length)return"ubehandlet";const n=r[0],i="initial"===(null===n||void 0===n?void 0:n.Hurtigvalg)||"initial"===(null===n||void 0===n?void 0:n.type)?"ubehandlet":(null===n||void 0===n?void 0:n.Hurtigvalg)||(null===n||void 0===n?void 0:n.type);return"string"===typeof i?i.toLowerCase():i}case"Siste dato":return null!==(r=T_(e.updatedAt))&&void 0!==r?r:0;case"Kunde":return null===(null===a||void 0===a?void 0:a.name)||void 0===(null===a||void 0===a?void 0:a.name)?"":"string"===typeof(null===a||void 0===a?void 0:a.name)?null===a||void 0===a?void 0:a.name.toLowerCase():"number"===typeof(null===a||void 0===a?void 0:a.name)?null===a||void 0===a?void 0:a.name:null!==(n=null===a||void 0===a?void 0:a.name)&&void 0!==n?n:"";case"Husmodell":{var s,o,l;const t=P.get(e.id);return null!==(s=null===t||void 0===t||null===(o=t.Husdetaljer)||void 0===o||null===(l=o.husmodell_name)||void 0===l?void 0:l.toLowerCase())&&void 0!==s?s:""}case"Broker":{var c;const t=M.get(e.id);return null!==(c=(null===t||void 0===t?void 0:t.f_name.toLowerCase())||(null===t||void 0===t?void 0:t.l_name.toLowerCase())||(null===t||void 0===t?void 0:t.name.toLowerCase()))&&void 0!==c?c:""}case"Anleggsadresse":return null===(null===a||void 0===a?void 0:a.adresse)||void 0===(null===a||void 0===a?void 0:a.adresse)?"":"string"===typeof(null===a||void 0===a?void 0:a.adresse)?null===a||void 0===a?void 0:a.adresse.toLowerCase():"number"===typeof(null===a||void 0===a?void 0:a.adresse)?null===a||void 0===a?void 0:a.adresse:null!==(i=null===a||void 0===a?void 0:a.adresse)&&void 0!==i?i:"";case"Siste aktivitet":{var u,d;const t=null===e||void 0===e?void 0:e.id,r=C.get(String(t));if(!r||0===r.length)return null!==(u=null===a||void 0===a||null===(d=a.notaterF\u00f8rsteSamtale)||void 0===d?void 0:d.toLowerCase())&&void 0!==u?u:"";const n=r[0],i=(null===n||void 0===n?void 0:n.notat)||(null===n||void 0===n?void 0:n.notes);return"string"===typeof i?i.toLowerCase():i}default:return""}},D=(0,t.useMemo)((()=>{if(!i)return _;const e=[..._].sort(((e,t)=>{const r=O(e,i),n=O(t,i);return r===n?0:"asc"===s?r>n?1:-1:r<n?1:-1}));return e}),[_,i,s,C]),R=(0,t.useMemo)((()=>{const e=[{accessorKey:"Aktivitet",header:"Aktivitet",cell:e=>{let{row:t}=e;return(0,V.jsx)(fwe,{id:t.original.id})}},{accessorKey:"kunde",header:"Kunde",cell:e=>{var t;let{row:r}=e;return(0,V.jsxs)("div",{className:"flex items-center gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray1 bg-gray3 flex items-center justify-center",children:r.original.leadData.name[0]}),(0,V.jsxs)("div",{children:[(0,V.jsx)(ti,{to:`/my-leads-details/${r.original.id}`,className:"font-medium text-purple text-sm mb-[2px]",children:r.original.leadData.name}),(0,V.jsx)("p",{className:"text-xs text-gray",children:r.original.leadData.email||(null===(t=r.original.leadData)||void 0===t?void 0:t.epost)})]})]})}},{accessorKey:"Husmodell",header:"Husmodell",cell:e=>{let{row:t}=e;return(0,V.jsx)(Hbe,{id:t.original.id})}},{accessorKey:"Broker",header:"Broker",cell:e=>{let{row:t}=e;return(0,V.jsx)(mwe,{id:t.original.id})}},{accessorKey:"adresse",header:"Anleggsadresse",cell:e=>{var t,r;let{row:n}=e;return null!==(t=n.original.leadData)&&void 0!==t&&t.adresse?(0,V.jsx)("p",{className:"text-black text-sm font-medium w-max",children:null===(r=n.original.leadData)||void 0===r?void 0:r.adresse}):(0,V.jsx)("p",{className:"text-center",children:"-"})}},{accessorKey:"Siste aktivitet",header:"Siste aktivitet",cell:e=>{var t;let{row:r}=e;return(0,V.jsx)(gwe,{id:r.original.id,rowData:null===(t=r.original.leadData)||void 0===t?void 0:t.notaterF\u00f8rsteSamtale})}},{id:"handling",header:"Handling",cell:()=>(0,V.jsx)("button",{className:"h-8 w-8 flex items-center justify-center",children:(0,V.jsx)(Fpe,{className:"h-4 w-4 text-gray-500"})})}],t={accessorKey:"Siste dato",header:"Siste dato",cell:e=>{let{row:t}=e;return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(vwe,{id:t.original.id})})}};return e.splice(1,0,t),e}),[w,f,l,y]),L=(0,t.useMemo)((()=>{const e=10*(l-1);return D.slice(e,e+10)}),[D,l]),F=aA({data:L,columns:R,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:l-1,pageSize:10}},pageCount:Math.ceil(D.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:l-1,pageSize:10});c(t.pageIndex+1)}}});return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex lg:items-center flex-col lg:flex-row gap-2 justify-between",children:[(0,V.jsxs)("div",{className:"shadow-shadow1 border border-gray1 rounded-[8px] flex w-max",children:[(0,V.jsx)("div",{className:`p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer ${"12 m\xe5neder"===v&&"bg-gray2"}`,onClick:()=>x("12 m\xe5neder"),children:"12 m\xe5neder"}),(0,V.jsx)("div",{className:`p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm border border-t-0 border-b-0 border-gray1 cursor-pointer ${"30 dager"===v&&"bg-gray2"}`,onClick:()=>x("30 dager"),children:"30 dager"}),(0,V.jsx)("div",{className:`p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer border-r border-gray1 ${"7 dager"===v&&"bg-gray2"}`,onClick:()=>x("7 dager"),children:"7 dager"}),(0,V.jsx)("div",{className:`p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer ${"24 timer"===v&&"bg-gray2"}`,onClick:()=>x("24 timer"),children:"24 timer"})]}),(0,V.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 sm:items-center",children:(0,V.jsx)(UT,{selectedDate:r,onDateChange:n,dateFormat:"MM/dd/yyyy",placeholderText:"Velg dato",className:"border border-gray1 rounded-[8px] flex gap-2 items-center p-2.5 md:py-[10px] md:px-4 cursor-pointer shadow-shadow1 h-[40px] w-max"})})]}),(0,V.jsxs)("div",{className:"mb-2 flex flex-col desktop:flex-row desktop:items-center justify-between bg-lightPurple rounded-[12px] py-3 px-3 gap-2 md:px-4",children:[(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-2 md:gap-3 lg:items-center",children:[(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px] relative",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k i leads",className:"focus-within:outline-none",value:h,onChange:e=>p(e.target.value)}),h&&(0,V.jsx)(B_,{className:"text-primary cursor-pointer h-5 w-5 absolute right-[14px]",onClick:()=>p("")})]}),(0,V.jsxs)("div",{className:"shadow-shadow1 border border-gray1 rounded-[8px] flex flex-col sm:flex-row overflow-hidden md:w-max",children:[(0,V.jsx)("div",{className:`p-2.5 md:py-3 md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer ${"Up for grabs"===y&&"bg-white"}`,onClick:()=>b("Up for grabs"),children:"Up for grabs"}),(0,V.jsx)("div",{className:`p-2.5 md:py-3 md:px-4 text-black2 font-medium text-[13px] sm:text-sm border-b border-t sm:border-t-0 sm:border-b-0 sm:border-r sm:border-l border-gray1 cursor-pointer ${"Til oppf\xf8lgning"===y&&"bg-white"}`,onClick:()=>b("Til oppf\xf8lgning"),children:"Til oppf\xf8lgning"}),(0,V.jsx)("div",{className:`p-2.5 md:py-3 md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer border-b sm:border-b-0 sm:border-r border-gray1 ${"Fremtidige oppgaver"===y&&"bg-white"}`,onClick:()=>b("Fremtidige oppgaver"),children:"Fremtidige oppgaver"}),(0,V.jsx)("div",{className:`p-2.5 md:py-3 md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer ${"Avsluttede leads"===y&&"bg-white"}`,onClick:()=>b("Avsluttede leads"),children:"Avsluttede leads"})]})]}),(0,V.jsx)("div",{className:"flex gap-2 md:gap-3 items-center",children:(0,V.jsxs)("div",{className:"border border-gray1 rounded-[8px] flex gap-2 items-center p-2.5 md:py-[10px] md:px-4 cursor-pointer shadow-shadow1 h-[40px] bg-[#fff]",onClick:()=>{const e=WV.json_to_sheet(_),t=WV.book_new();WV.book_append_sheet(t,e,"Leads From Supplier"),OV(t,"leads_from_supplier.xlsx")},children:[(0,V.jsx)("img",{src:Vbe,alt:""}),(0,V.jsx)("span",{className:"text-black font-medium text-sm",children:"Eksporter"})]})})]}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:F.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:(0,V.jsxs)("div",{className:"flex items-center cursor-pointer select-none",onClick:()=>{const t=e.column.columnDef.header;i===t?o("asc"===s?"desc":"asc"):(a(t),o("asc"))},children:[iA(e.column.columnDef.header,e.getContext()),i===e.column.columnDef.header&&(0,V.jsxs)("span",{className:"text-darkBlack",children:["\xa0","asc"===s?"\u25b2":"\u25bc"]})]})},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:m?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:R.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===D.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:R.length,className:"h-24 text-center",children:"No results."})}):(null===(e=F.getRowModel().rows)||void 0===e?void 0:e.length)&&F.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>F.previousPage(),disabled:!F.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:l})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:F.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>F.nextPage(),disabled:!F.getCanNextPage(),children:"Neste"})]})]})]})})},ywe=()=>{var e;const[r,n]=(0,t.useState)(null),[i,a]=(0,t.useState)(null),[s,o]=(0,t.useState)("asc"),[l,c]=(0,t.useState)(1),[u,d]=(0,t.useState)([]),[h,p]=(0,t.useState)(""),f=Kr(),[m,g]=(0,t.useState)(!0),[v,x]=(0,t.useState)(null),y=localStorage.getItem("Iplot_admin"),[b,w]=(0,t.useState)(null),[_,k]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&null!==e&&void 0!==e&&e.id&&w(null===e||void 0===e?void 0:e.id)})()}),[]);const S=async()=>{g(!0);try{const e=await pg(Zm(function(e,t){if(e=em(e,im),Yf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ks(qs.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new am(e,null,function(e){return new Oc(mo.emptyPath(),e)}(t))}(g_,"preferred_house_model"),Xm("Tildelt","==",String(b)))),t=Array.from(new Set(e.docs.map((e=>{var t;return null===(t=e.ref.parent.parent)||void 0===t?void 0:t.id}))));if(0===t.length)return void k([]);const r=await Promise.all(t.map((e=>pg(lm(g_,"leads_from_supplier",String(e),"followups")).then((t=>{const r=t.docs.map((e=>({id:e.id,...e.data()})));return r.sort(((e,t)=>{const r=e=>{var t,r;if("string"===typeof e.updatedAt){const[t,r]=e.updatedAt.split("|").map((e=>e.trim())),[n,i,a]=t.split(" "),s=hwe[i.toLowerCase()]||i;return new Date(`${s} ${n}, ${a} ${r}`).getTime()}return null!==(t=e.updatedAt)&&void 0!==t&&t.toMillis?e.updatedAt.toMillis():null!==(r=e.date)&&void 0!==r&&r.seconds?1e3*e.date.seconds:0};return r(t)-r(e)})),dg(cm(g_,"leads_from_supplier",String(e))).then((t=>({id:String(e),...t.data(),followups:r[0]||[]})))})))));r.sort(((e,t)=>{const r=e=>{var t;const r=null===(t=e.followups)||void 0===t?void 0:t.updatedAt;if("string"===typeof r){const[e,t]=r.split("|").map((e=>e.trim())),[n,i,a]=e.split(" "),s=hwe[i.toLowerCase()]||i;return new Date(`${s} ${n}, ${a} ${t}`).getTime()}return null!==r&&void 0!==r&&r.toMillis?r.toMillis():null!==(n=e.followups)&&void 0!==n&&null!==(i=n.date)&&void 0!==i&&i.seconds?1e3*e.followups.date.seconds:0;var n,i};return r(t)-r(e)})),d(r)}catch(e){console.error("Error fetching fast leads:",e)}finally{g(!1)}},[j,E]=(0,t.useState)(null),[C,N]=(0,t.useState)({});(0,t.useEffect)((()=>{g(!0);u.length>0&&(async()=>{const e={};await Promise.all(u.map((async t=>{const r=lm(g_,"leads_from_supplier",String(t.id),"followups");try{const n=(await pg(r)).docs.map((e=>({id:e.id,...e.data()}))),i=e=>{const t=null===e||void 0===e?void 0:e.updatedAt;if("string"===typeof t){const[e,r]=t.split("|").map((e=>e.trim())),[n,i,a]=e.split(" "),s=hwe[i.toLowerCase()]||i,o=new Date(`${s} ${n}, ${a} ${r}`).getTime();return isNaN(o)?0:o}return null!==t&&void 0!==t&&t.toMillis?t.toMillis():null!==e&&void 0!==e&&null!==(r=e.date)&&void 0!==r&&r.seconds?1e3*e.date.seconds:0;var r};n.sort(((e,t)=>i(t)-i(e))),e[t.id]=n}catch(n){console.error("Failed to fetch logs:",n)}}))),N(e),g(!1)})()}),[u]),(0,t.useEffect)((()=>{const e=async()=>{const e=h.toLowerCase();g(!0);const t=await Promise.all(u.map((async t=>{var n,i,a,s,o;const l=null===t||void 0===t||null===(n=t.leadSource)||void 0===n?void 0:n.toLowerCase(),c=null===t||void 0===t||null===(i=t.leadData)||void 0===i||null===(a=i.kilde)||void 0===a?void 0:a.toLowerCase(),u=null===t||void 0===t||null===(s=t.leadData)||void 0===s||null===(o=s.name)||void 0===o?void 0:o.toLowerCase();if(!((null===l||void 0===l?void 0:l.includes(e))||(null===c||void 0===c?void 0:c.includes(e))||(null===u||void 0===u?void 0:u.includes(e))))return null;const d=P_(t.createdAt);if(null!==r){if(!(d===A_(r)))return null}if(null!==v){const{startDate:e,endDate:t}=(e=>{const t=new Date;let r,n=t;switch(e){case"12 m\xe5neder":r=new Date(t),r.setFullYear(t.getFullYear()-1);break;case"30 dager":r=new Date(t),r.setDate(t.getDate()-30);break;case"7 dager":r=new Date(t),r.setDate(t.getDate()-7);break;case"24 timer":r=new Date(t),r.setHours(t.getHours()-24);break;default:return null}return{startDate:r.toISOString().split("T")[0],endDate:n.toISOString().split("T")[0]}})(v);if(!(d>=e&&d<=t))return null}if("Fremtidige oppgaver"===j){var h;const e=Array.isArray(null===C||void 0===C?void 0:C[t.id])?C[t.id]:[],r=null===e||void 0===e?void 0:e[0],n=null!==r&&void 0!==r&&null!==(h=r.date)&&void 0!==h&&h.seconds?new Date(1e3*r.date.seconds):null,i=new Date;return n&&n>i?t:null}if("Til oppf\xf8lgning"===j){var p;const e=Array.isArray(null===C||void 0===C?void 0:C[t.id])?C[t.id]:[],r=null===e||void 0===e?void 0:e[0];if("initial"===(null===r||void 0===r?void 0:r.type)||"initial"===(null===r||void 0===r?void 0:r.Hurtigvalg)||"Signert"===(null===r||void 0===r?void 0:r.type)||"Signert"===(null===r||void 0===r?void 0:r.Hurtigvalg))return null;const n=null!==r&&void 0!==r&&null!==(p=r.date)&&void 0!==p&&p.seconds?new Date(1e3*r.date.seconds):null,i=new Date;i.setHours(0,0,0,0);return n&&n.setHours(0,0,0,0)<=i.getTime()?t:null}if("Avsluttede leads"===j){const e=Array.isArray(null===C||void 0===C?void 0:C[t.id])?C[t.id]:[],r=null===e||void 0===e?void 0:e[0];return"Signert"===(null===r||void 0===r?void 0:r.type)||"Signert"===(null===r||void 0===r?void 0:r.Hurtigvalg)?t:null}return t}))),n=t.filter(Boolean);k(n),g(!1)};Object.keys(C).length>0&&e()}),[u,h,r,v,j,C]),(0,t.useEffect)((()=>{b&&S()}),[b]);const T=async e=>{if(!e)return;const t=lm(g_,"leads_from_supplier",String(e),"followups");try{const e=(await pg(t)).docs.map((e=>({id:e.id,...e.data()}))),r=e=>{const t=null===e||void 0===e?void 0:e.updatedAt;if("string"===typeof t){const[e,r]=t.split("|").map((e=>e.trim())),[n,i,a]=e.split(" "),s=hwe[i.toLowerCase()]||i,o=new Date(`${s} ${n}, ${a} ${r}`).getTime();return isNaN(o)?0:o}return null!==t&&void 0!==t&&t.toMillis?t.toMillis():null!==e&&void 0!==e&&null!==(r=e.date)&&void 0!==r&&r.seconds?1e3*e.date.seconds:0;var r};return e.sort(((e,t)=>r(t)-r(e))),e}catch(r){console.error("Failed to fetch logs:",r)}},[P,A]=(0,t.useState)(new Map);(0,t.useEffect)((()=>{(async()=>{const e=new Map;for(const t of _){const r=null===t||void 0===t?void 0:t.id;if(r){const t=await T(r);e.set(r,t||[])}}A(e)})()}),[_,s]);const M=async e=>{if(!e)return;const t=cm(g_,"leads_from_supplier",String(e),"preferred_house_model",String(e)),r=await dg(t);return r.exists()?r.data():void 0},[I,O]=(0,t.useState)(new Map),[D,R]=(0,t.useState)(new Map);(0,t.useEffect)((()=>{_.forEach((e=>{e.id&&!I.has(e.id)&&((async e=>{var t;const r=await M(e);if(null!==r&&void 0!==r&&null!==(t=r.Husmodell)&&void 0!==t&&t[0]){const t=await y_(r.Husmodell[0]);t&&t.Husdetaljer&&O((r=>new Map(r).set(e,t)))}})(e.id),(async e=>{const t=await M(e);if(null!==t&&void 0!==t&&t.Tildelt){const r=await __(null===t||void 0===t?void 0:t.Tildelt);r&&R((t=>new Map(t).set(e,r)))}})(e.id))}))}),[_]);const L=(e,t)=>{var r,n;let i=e.leadData;switch(t){case"Aktivitet":{const t=null===e||void 0===e?void 0:e.id,r=P.get(String(t));if(!r||0===r.length)return"ubehandlet";const n=r[0],i="initial"===(null===n||void 0===n?void 0:n.Hurtigvalg)||"initial"===(null===n||void 0===n?void 0:n.type)?"ubehandlet":(null===n||void 0===n?void 0:n.Hurtigvalg)||(null===n||void 0===n?void 0:n.type);return"string"===typeof i?i.toLowerCase():i}case"Siste dato":{var a;const t=null===e||void 0===e?void 0:e.id,r=P.get(String(t));if(!r||0===r.length)return 0;const n=r[0];return null!==(a=T_(null===n||void 0===n?void 0:n.date))&&void 0!==a?a:0}case"Kunde":return null===(null===i||void 0===i?void 0:i.name)||void 0===(null===i||void 0===i?void 0:i.name)?"":"string"===typeof(null===i||void 0===i?void 0:i.name)?null===i||void 0===i?void 0:i.name.toLowerCase():"number"===typeof(null===i||void 0===i?void 0:i.name)?null===i||void 0===i?void 0:i.name:null!==(r=null===i||void 0===i?void 0:i.name)&&void 0!==r?r:"";case"Husmodell":{var s,o,l;const t=I.get(e.id);return null!==(s=null===t||void 0===t||null===(o=t.Husdetaljer)||void 0===o||null===(l=o.husmodell_name)||void 0===l?void 0:l.toLowerCase())&&void 0!==s?s:""}case"Broker":{var c;const t=D.get(e.id);return null!==(c=(null===t||void 0===t?void 0:t.f_name.toLowerCase())||(null===t||void 0===t?void 0:t.l_name.toLowerCase())||(null===t||void 0===t?void 0:t.name.toLowerCase()))&&void 0!==c?c:""}case"Anleggsadresse":return null===(null===i||void 0===i?void 0:i.adresse)||void 0===(null===i||void 0===i?void 0:i.adresse)?"":"string"===typeof(null===i||void 0===i?void 0:i.adresse)?null===i||void 0===i?void 0:i.adresse.toLowerCase():"number"===typeof(null===i||void 0===i?void 0:i.adresse)?null===i||void 0===i?void 0:i.adresse:null!==(n=null===i||void 0===i?void 0:i.adresse)&&void 0!==n?n:"";case"Siste aktivitet":{var u,d;const t=null===e||void 0===e?void 0:e.id,r=P.get(String(t));if(!r||0===r.length)return null!==(u=null===i||void 0===i||null===(d=i.notaterF\u00f8rsteSamtale)||void 0===d?void 0:d.toLowerCase())&&void 0!==u?u:"";const n=r[0],a=(null===n||void 0===n?void 0:n.notat)||(null===n||void 0===n?void 0:n.notes);return"string"===typeof a?a.toLowerCase():a}default:return""}},F=(0,t.useMemo)((()=>{if(!i)return _;const e=[..._].sort(((e,t)=>{const r=L(e,i),n=L(t,i);return r===n?0:"asc"===s?r>n?1:-1:r<n?1:-1}));return e}),[_,i,s,P]),$=(0,t.useMemo)((()=>{const e=[{accessorKey:"Aktivitet",header:"Aktivitet",cell:e=>{let{row:t}=e;return(0,V.jsx)(fwe,{id:t.original.id})}},{accessorKey:"kunde",header:"Kunde",cell:e=>{var t;let{row:r}=e;return(0,V.jsxs)("div",{className:"flex items-center gap-3 w-max",children:[(0,V.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray1 bg-gray3 flex items-center justify-center",children:r.original.leadData.name[0]}),(0,V.jsxs)("div",{children:[(0,V.jsx)(ti,{to:`/my-leads-details/${r.original.id}`,className:"font-medium text-purple text-sm mb-[2px]",children:r.original.leadData.name}),(0,V.jsx)("p",{className:"text-xs text-gray",children:r.original.leadData.email||(null===(t=r.original.leadData)||void 0===t?void 0:t.epost)})]})]})}},{accessorKey:"Husmodell",header:"Husmodell",cell:e=>{let{row:t}=e;return(0,V.jsx)(Hbe,{id:t.original.id})}},{accessorKey:"Broker",header:"Broker",cell:e=>{let{row:t}=e;return(0,V.jsx)(mwe,{id:t.original.id})}},{accessorKey:"adresse",header:"Anleggsadresse",cell:e=>{var t,r;let{row:n}=e;return null!==(t=n.original.leadData)&&void 0!==t&&t.adresse?(0,V.jsx)("p",{className:"text-black text-sm font-medium w-max",children:null===(r=n.original.leadData)||void 0===r?void 0:r.adresse}):(0,V.jsx)("p",{className:"text-center",children:"-"})}},{accessorKey:"Siste aktivitet",header:"Siste aktivitet",cell:e=>{var t;let{row:r}=e;return(0,V.jsx)(gwe,{id:r.original.id,rowData:null===(t=r.original.leadData)||void 0===t?void 0:t.notaterF\u00f8rsteSamtale})}},{id:"handling",header:"Handling",cell:()=>(0,V.jsx)("button",{className:"h-8 w-8 flex items-center justify-center",children:(0,V.jsx)(Fpe,{className:"h-4 w-4 text-gray-500"})})}],t={accessorKey:"Siste dato",header:"Siste dato",cell:e=>{let{row:t}=e;return(0,V.jsx)(vwe,{id:t.original.id})}};return e.splice(1,0,t),e}),[y,f,l,j]),B=(0,t.useMemo)((()=>{const e=10*(l-1);return F.slice(e,e+10)}),[F,l]),z=aA({data:B,columns:$,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:l-1,pageSize:10}},pageCount:Math.ceil(F.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:l-1,pageSize:10});c(t.pageIndex+1)}}});return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex lg:items-center flex-col lg:flex-row gap-2 justify-between",children:[(0,V.jsxs)("div",{className:"shadow-shadow1 border border-gray1 rounded-[8px] flex w-max",children:[(0,V.jsx)("div",{className:`p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer ${"12 m\xe5neder"===v&&"bg-gray2"}`,onClick:()=>x("12 m\xe5neder"),children:"12 m\xe5neder"}),(0,V.jsx)("div",{className:`p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm border border-t-0 border-b-0 border-gray1 cursor-pointer ${"30 dager"===v&&"bg-gray2"}`,onClick:()=>x("30 dager"),children:"30 dager"}),(0,V.jsx)("div",{className:`p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer border-r border-gray1 ${"7 dager"===v&&"bg-gray2"}`,onClick:()=>x("7 dager"),children:"7 dager"}),(0,V.jsx)("div",{className:`p-2.5 md:py-[10px] md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer ${"24 timer"===v&&"bg-gray2"}`,onClick:()=>x("24 timer"),children:"24 timer"})]}),(0,V.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 sm:items-center",children:(0,V.jsx)(UT,{selectedDate:r,onDateChange:n,dateFormat:"MM/dd/yyyy",placeholderText:"Velg dato",className:"border border-gray1 rounded-[8px] flex gap-2 items-center p-2.5 md:py-[10px] md:px-4 cursor-pointer shadow-shadow1 h-[40px] w-max"})})]}),(0,V.jsxs)("div",{className:"mb-2 flex flex-col desktop:flex-row desktop:items-center justify-between bg-lightPurple rounded-[12px] py-3 px-3 gap-2 md:px-4",children:[(0,V.jsxs)("div",{className:"flex flex-col lg:flex-row gap-2 md:gap-3 lg:items-center",children:[(0,V.jsxs)("div",{className:"flex items-center border border-gray1 shadow-shadow1 bg-[#fff] gap-2 rounded-lg py-[10px] px-[14px] relative",children:[(0,V.jsx)("img",{src:pi,alt:"search"}),(0,V.jsx)("input",{type:"text",placeholder:"S\xf8k i leads",className:"focus-within:outline-none",value:h,onChange:e=>p(e.target.value)}),h&&(0,V.jsx)(B_,{className:"text-primary cursor-pointer h-5 w-5 absolute right-[14px]",onClick:()=>p("")})]}),(0,V.jsxs)("div",{className:"shadow-shadow1 border border-gray1 rounded-[8px] flex flex-col sm:flex-row overflow-hidden sm:w-max",children:[(0,V.jsx)("div",{className:`p-2.5 md:py-3 md:px-4 text-black2 font-medium text-[13px] sm:text-sm border-b sm:border-b-0 sm:border-r border-gray1 cursor-pointer ${"Til oppf\xf8lgning"===j&&"bg-white"}`,onClick:()=>E("Til oppf\xf8lgning"),children:"Til oppf\xf8lgning"}),(0,V.jsx)("div",{className:`p-2.5 md:py-3 md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer border-b sm:border-b-0 sm:border-r border-gray1 ${"Fremtidige oppgaver"===j&&"bg-white"}`,onClick:()=>E("Fremtidige oppgaver"),children:"Fremtidige oppgaver"}),(0,V.jsx)("div",{className:`p-2.5 md:py-3 md:px-4 text-black2 font-medium text-[13px] sm:text-sm cursor-pointer ${"Avsluttede leads"===j&&"bg-white"}`,onClick:()=>E("Avsluttede leads"),children:"Avsluttede leads"})]})]}),(0,V.jsx)("div",{className:"flex gap-2 md:gap-3 items-center",children:(0,V.jsxs)("div",{className:"border border-gray1 rounded-[8px] flex gap-2 items-center p-2.5 md:py-[10px] md:px-4 cursor-pointer shadow-shadow1 h-[40px] bg-[#fff]",onClick:()=>{const e=WV.json_to_sheet(F),t=WV.book_new();WV.book_append_sheet(t,e,"Leads From Supplier"),OV(t,"leads_from_supplier.xlsx")},children:[(0,V.jsx)("img",{src:Vbe,alt:""}),(0,V.jsx)("span",{className:"text-black font-medium text-sm",children:"Eksporter"})]})})]}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:z.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:(0,V.jsxs)("div",{className:"flex items-center cursor-pointer select-none",onClick:()=>{const t=e.column.columnDef.header;i===t?o("asc"===s?"desc":"asc"):(a(t),o("asc"))},children:[iA(e.column.columnDef.header,e.getContext()),i===e.column.columnDef.header&&(0,V.jsxs)("span",{className:"text-darkBlack",children:["\xa0","asc"===s?"\u25b2":"\u25bc"]})]})},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:m?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:$.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===F.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:$.length,className:"h-24 text-center",children:"No results."})}):(null===(e=z.getRowModel().rows)||void 0===e?void 0:e.length)&&z.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>z.previousPage(),disabled:!z.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:l})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:z.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>z.nextPage(),disabled:!z.getCanNextPage(),children:"Neste"})]})]})]})})},bwe=()=>{const[e,r]=(0,t.useState)("Alle leads"),n=localStorage.getItem("Iplot_admin");return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 px-4 md:px-6 pt-6",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-lg md:text-xl desktop:text-2xl",children:"Leads for Fjellheimhytta"}),(0,V.jsxs)("div",{className:"flex gap-2 text-center",children:[(0,V.jsx)("div",{className:"flex gap-1.5",children:["Alle leads",n&&"andre.finger@gmail.com"!==n&&"Mine leads"].filter(Boolean).map((t=>(0,V.jsx)("button",{onClick:()=>r(t),className:"px-2 md:px-4 py-2 text-sm font-medium "+(e===t?"border-b-2 border-purple text-purple":"text-gray-500"),children:t.charAt(0).toUpperCase()+t.slice(1)},t)))}),(0,V.jsx)(HT,{text:"Opprett nytt lead",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",icon:(0,V.jsx)(cA,{className:"text-white w-5 h-5"}),path:"/add-lead"})]})]}),"Alle leads"===e&&(0,V.jsx)(xwe,{}),"Mine leads"===e&&(0,V.jsx)(ywe,{})]})},wwe=F_("UserRoundCheck",[["path",{d:"M2 21a8 8 0 0 1 13.292-6",key:"bjp14o"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]),_we=F_("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),kwe={getAddress:async function(e){try{return await fetch(`https://ws.geonorge.no/adresser/v1/sok?sok=${e}`)}catch(t){throw t.response}},getSingleAddress:async function(e){try{const t=`https://ws.geonorge.no/adresser/v1/sok?sok=${e.adressenavn} ${e.nummer}`,r=await fetch(t);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){throw console.error("Error fetching address:",t),t}},handleLookup:async e=>{if(!e)return;const t=e.replace(/\D/g,"").replace(/^47/,"");try{const e=await fetch(`https://services.api1881.no/lookup/phonenumber/${t}`,{method:"GET",headers:{"Ocp-Apim-Subscription-Key":"cce12bb764f34e9083eec0f57fd0dc53"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(D_e){console.error(D_e)}}},Swe=kwe,jwe=kQ.object({Kundeinformasjon:kQ.array(kQ.object({mobileNummer:kQ.string().refine((e=>{const t=D3(e),r=null!==t&&void 0!==t&&t.countryCallingCode?`+${t.countryCallingCode}`:"",n=(null===t||void 0===t?void 0:t.nationalNumber)||"";if("+47"!==r)return!1;const i=j_[r];return!!i&&i(n)}),{message:"Vennligst skriv inn et gyldig telefonnummer for det valgte landet."}),f_name:kQ.string().min(1,{message:"Fornavn m\xe5 best\xe5 av minst 2 tegn."}),l_name:kQ.string().min(1,{message:"Etternavn m\xe5 best\xe5 av minst 2 tegn."}),Adresse:kQ.string().min(1,{message:"Adresse m\xe5 best\xe5 av minst 2 tegn."}),EPost:kQ.string().email({message:"Vennligst skriv inn en gyldig e-postadresse."}).min(1,{message:"E-posten m\xe5 v\xe6re p\xe5 minst 2 tegn."}),dato:kQ.string().optional(),Personnummer:kQ.string().optional(),Kundetype:kQ.string().min(1,{message:"Kundetype m\xe5 spesifiseres."})})).min(1,"Minst ett produkt er p\xe5krevd.")}),Ewe=(0,t.forwardRef)(((e,r)=>{let{setActiveTab:n}=e;const i=Gr(),a=Kr(),s=i.pathname.split("/"),o=s.length>2?s[2]:null,l=AG({resolver:FG(jwe),defaultValues:{Kundeinformasjon:[{mobileNummer:"",f_name:"",l_name:"",Adresse:"",EPost:"",dato:"",Personnummer:"",Kundetype:""}]}}),[c,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&u(e)})()}),[]);const{fields:d,append:h,remove:p}=fG({control:l.control,name:"Kundeinformasjon"}),[f,m]=(0,t.useState)();(0,t.useEffect)((()=>{if(!o)return;(async()=>{const e=await b_(o);if(e&&null!==e&&void 0!==e&&e.Kunden){var t,r,n;if(null!==e&&void 0!==e&&null!==(t=e.Kunden)&&void 0!==t&&t.phoneCallApiData)m(null===e||void 0===e||null===(n=e.Kunden)||void 0===n?void 0:n.phoneCallApiData);if(null!==(r=e.Kunden)&&void 0!==r&&r.Kundeinformasjon){const t=[];e.Kunden.Kundeinformasjon.forEach(((e,r)=>{const n={};Object.entries(e).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&(n[t]=r)})),t.push(n)})),l.setValue("Kundeinformasjon",t)}}})()}),[o]);const[g,v]=(0,t.useState)(null),x=localStorage.getItem("Iplot_admin");(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){const t=null===e||void 0===e?void 0:e.supplier;v(t)}})()}),[]);const y=async e=>{n(1);try{const t=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",",""),r=o||yW(),i=cm(g_,"bank_leads",r),s={...e,id:r,...f?{phoneCallApiData:f}:{}};o?(await mg(i,{Kunden:s,updatedAt:t(new Date)}),He.success("Lagret",{position:"top-right"}),a(`/edit-agent-leads/${r}`),n(1)):(await fg(i,{Kunden:s,updatedAt:t(new Date),createdAt:t(new Date),createDataBy:{email:null===c||void 0===c?void 0:c.email,photo:null===c||void 0===c?void 0:c.photo,name:null!==c&&void 0!==c&&c.f_name?`${null===c||void 0===c?void 0:c.f_name} ${null===c||void 0===c?void 0:c.l_name}`:null===c||void 0===c?void 0:c.name},supplierId:"andre.finger@gmail.com"!==x?g:null,status:"Sent"}),He.success("Added successfully",{position:"top-right"}),a(`/edit-agent-leads/${r}`),n(1))}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}};(0,t.useImperativeHandle)(r,(()=>({validateForm:async()=>{let e=!1;return await l.handleSubmit((async t=>{await y(t),e=!0}))(),e}})));return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...l,children:(0,V.jsxs)("form",{onSubmit:l.handleSubmit(y),className:"relative",children:[(0,V.jsxs)("div",{className:"mx-4 md:mx-8 lg:mx-10 rounded-lg",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsxs)("div",{className:"py-2.5 md:py-4 px-3 md:px-5 flex items-center gap-3 border-b border-[#E8E8E8]",children:[(0,V.jsx)(wwe,{}),(0,V.jsx)("span",{className:"text-sm md:text-base desktop:text-lg font-semibold",children:"Registrering av kunde"})]}),(0,V.jsx)("div",{className:"bg-[#F6F4F2] py-2 md:py-3 px-3 md:px-5 text-sm font-semibold",children:"Informasjon om oppdragsgiver"}),(0,V.jsx)("div",{className:"p-3 md:p-6 mb-6 z-40 relative",children:(0,V.jsx)("div",{className:"flex flex-col gap-4 md:gap-8",children:d.map(((e,t)=>(0,V.jsx)("div",{children:(0,V.jsxs)("div",{className:"flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[0===t?(0,V.jsxs)("div",{children:[(0,V.jsxs)("h3",{className:"text-base font-semibold mb-1.5",children:["Kundeinformasjon (",t+1,")"]}),(0,V.jsx)("p",{className:"text-sm text-[#4D4D4D]",children:"Oppdragsnummeret blir automatisk tildelt i Vitec ved signering av oppdragsavtalen."})]}):(0,V.jsxs)("div",{children:[(0,V.jsxs)("h3",{className:"text-base font-semibold mb-1.5",children:["Kundeinformasjon (",t+1,")"]}),(0,V.jsxs)("p",{className:"text-sm text-[#4D4D4D]",children:["Kunde ",t+1," skal v\xe6re medl\xe5nstaker ."]})]}),0!==t&&(0,V.jsx)("div",{className:"w-max whitespace-nowrap flex items-center gap-1 font-medium text-[#D4121E] cursor-pointer",onClick:()=>{(e=>{d.length>1&&p(e)})(t)},children:(0,V.jsx)(_we,{})})]}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:`Kundeinformasjon.${t}.mobileNummer`,render:e=>{let{field:r,fieldState:n}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(n.error?"text-red":"")+" mb-[6px] text-sm",children:"Mobilnummer"}),(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"relative flex flex-col sm:flex-row gap-1.5 sm:items-center",children:[(0,V.jsx)(R3,{placeholder:"Skriv inn Telefon",...r,className:`bg-white w-full sm:w-max rounded-[8px] border text-black\n                              ${null!==n&&void 0!==n&&n.error?"border-red":"border-gray1"} `,type:"tel"}),(0,V.jsx)("div",{className:"border-primary border-2 rounded-lg py-2 px-3 text-primary font-semibold cursor-pointer h-10 md:h-12 flex items-center justify-center text-sm md:text-base",onClick:()=>(async(e,t)=>{if(e)try{const o=await Swe.handleLookup(e);var r,n,i,a,s;o&&(m(o),l.setValue(`Kundeinformasjon.${t}.f_name`,null===o||void 0===o||null===(r=o.contacts[0])||void 0===r?void 0:r.firstName),l.setValue(`Kundeinformasjon.${t}.l_name`,null===o||void 0===o||null===(n=o.contacts[0])||void 0===n?void 0:n.lastName),l.setValue(`Kundeinformasjon.${t}.Adresse`,null===o||void 0===o||null===(i=o.contacts[0])||void 0===i||null===(a=i.geography)||void 0===a||null===(s=a.address)||void 0===s?void 0:s.addressString))}catch(o){console.error(o)}})(r.value,t),children:"S\xf8k p\xe5 telefonummer"})]})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:`Kundeinformasjon.${t}.f_name`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Fornavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Fornavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:`Kundeinformasjon.${t}.l_name`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Etternavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Etternavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})})]}),(0,V.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:`Kundeinformasjon.${t}.Adresse`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Adresse"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Adresse",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:`Kundeinformasjon.${t}.mobileNummer`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Mobilnummer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative flex gap-1.5 items-center",children:(0,V.jsx)(R3,{placeholder:"Skriv inn Telefon",...t,className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"tel"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:`Kundeinformasjon.${t}.EPost`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"E-post"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn E-post",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"email"})})}),(0,V.jsx)(cW,{})]})}})})]}),(0,V.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:`Kundeinformasjon.${t}.dato`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"F\xf8dselsdato"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn F\xf8dselsdato",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:`Kundeinformasjon.${t}.Personnummer`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Personnummer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Personnummer",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:l.control,name:`Kundeinformasjon.${t}.Kundetype`,render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Kundetype"}),(0,V.jsx)(lW,{children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Velg kundetype"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsxs)(GZ,{children:[(0,V.jsx)(XZ,{value:"Privatperson",children:"Privatperson"}),(0,V.jsx)(XZ,{value:"Selskap",children:"Selskap"})]})})]})}),(0,V.jsx)(cW,{})]})}})})]}),t!==d.length-1&&(0,V.jsx)("div",{className:"border-t border-gray2"})]})},e.id)))})})]}),(0,V.jsx)("div",{className:"mb-8 mx-4 md:mx-8 lg:mx-10",children:(0,V.jsx)("div",{className:"text-white rounded-lg w-max bg-purple font-medium justify-center text-base flex items-center gap-1 cursor-pointer h-full px-4 py-[10px]",onClick:()=>{h({mobileNummer:"",f_name:"",l_name:"",Adresse:"",EPost:"",dato:"",Personnummer:"",Kundetype:""})},children:"+ Legg til medl\xe5ntaker"})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)(HT,{text:"Tilbake",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>a("/agent-leads")}),(0,V.jsx)("div",{id:"submit",children:(0,V.jsx)(HT,{text:"Neste",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})})]})]})})})})),Cwe=F_("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Nwe=F_("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),Twe=F_("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),Pwe=F_("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Awe=F_("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Mwe=kQ.object({plot:kQ.object({address:kQ.string().min(1,"Adresse er p\xe5krevd"),Kommunenummer:kQ.string().min(1,"Kommunenummer er p\xe5krevd"),"G\xe5rdsnummer":kQ.string().min(1,"G\xe5rdsnummer er p\xe5krevd"),Bruksnummer:kQ.string().min(1,"Bruksnummer er p\xe5krevd"),Seksjonsnummer:kQ.string().optional(),Festenummer:kQ.string().optional(),alreadyHavePlot:kQ.string().min(1,"P\xe5krevd"),Kommentar:kQ.string().min(1,{message:"Kommentar til banken m\xe5 best\xe5 av minst 1 tegn."}),tomtekostnader:kQ.string().min(1,{message:"Estimert totale tomtekostnader m\xe5 best\xe5 av minst 1 tegn."})}),house:kQ.object({housemodell:kQ.string().min(1,{message:"Housemodell must m\xe5 spesifiseres."}),Kommentar:kQ.string().min(1,{message:"Kommentar til banken m\xe5 best\xe5 av minst 1 tegn."}),byggekostnader:kQ.string().min(1,{message:"Estimert totale byggekostnader m\xe5 best\xe5 av minst 1 tegn."})})}),Iwe=(0,t.forwardRef)(((e,r)=>{var n;let{setActiveTab:i}=e;const a=Gr(),s=Kr(),o=a.pathname.split("/"),l=o.length>2?o[2]:null,c=AG({resolver:FG(Mwe)}),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(!0),f=c.watch("plot.alreadyHavePlot"),m=async e=>{try{const t=cm(g_,"bank_leads",String(l)),r={...e,id:l},n=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");await mg(t,{plotHusmodell:r,updatedAt:n(new Date)}),He.success("Lagret",{position:"top-right"}),s(`/edit-agent-leads/${l}`),i(2)}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}},g=localStorage.getItem("Iplot_admin"),[v,x]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e&&null!==e&&void 0!==e&&e.supplier){const t=null===e||void 0===e?void 0:e.supplier;x(t)}else x(null)})()}),[v]);const[y,b]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{try{let e;e=Zm(lm(g_,"house_model"),"andre.finger@gmail.com"===g?eg("updatedAt","desc"):v||null!==v?Xm("Husdetaljer.Leverand\xf8rer","==",v):eg("updatedAt","desc"));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()})));b(t)}catch(e){console.error("Error fetching husmodell data:",e)}})()}),[v]),(0,t.useEffect)((()=>{if(!l)return;(async()=>{const e=await b_(l);e&&e.plotHusmodell&&Object.entries(e.plotHusmodell).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&c.setValue(t,r)}))})()}),[c,l,y]),(0,t.useImperativeHandle)(r,(()=>({validateForm:async()=>{let e=!1;return await c.handleSubmit((async t=>{await m(t),e=!0}))(),e}})));const w=(null===(n=c.formState.errors)||void 0===n?void 0:n.plot)&&"alreadyHavePlot"in c.formState.errors.plot&&c.formState.errors.plot.alreadyHavePlot;return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...c,children:(0,V.jsxs)("form",{onSubmit:c.handleSubmit(m),className:"relative",children:[(0,V.jsxs)("div",{className:"mx-4 md:mx-8 lg:mx-10 rounded-lg",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsxs)("div",{className:"py-2.5 md:py-4 px-3 md:px-5 flex items-center gap-3 border-b border-[#E8E8E8]",children:[(0,V.jsx)(wwe,{}),(0,V.jsx)("span",{className:"text-sm md:text-base desktop:text-lg font-semibold",children:"Registrering av prosjekt"})]}),(0,V.jsxs)("div",{className:"bg-[#F6F4F2] py-2 md:py-3 px-3 md:px-5 text-sm font-semibold",children:["Informasjon om ",(0,V.jsx)("span",{className:"font-extrabold",children:"tomten:"})]}),(0,V.jsx)("div",{className:"p-3 md:p-6 mb-6 z-40 relative",children:(0,V.jsxs)("div",{className:"flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap desktop:flex-nowrap gap-4 md:gap-6",children:[(0,V.jsx)("div",{className:"w-full lg:w-[48.5%] desktop:w-[35%]",children:(0,V.jsx)(nW,{control:c.control,name:"plot.address",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Adresse for prosjektet"}),(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"relative",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[(0,V.jsx)(bW,{placeholder:"Skriv inn Adresse for prosjektet",...t,className:`bg-white truncate pr-10 rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",onChange:e=>{p(!0),(async e=>{const t=e.target.value;if(t)try{const e=await Swe.getAddress(t);if(!e.ok)throw new Error(`Response status: ${e.status}`);const r=await e.json();d(r.adresser)}catch(r){console.error(null===r||void 0===r?void 0:r.message)}})(e),t.onChange(e.target.value)},autoComplete:"off"}),t.value&&(0,V.jsx)(B_,{onClick:()=>{c.setValue("plot.address",""),c.setValue("plot.Kommunenummer",""),c.setValue("plot.G\xe5rdsnummer",""),c.setValue("plot.Bruksnummer",""),c.setValue("plot.Seksjonsnummer",""),c.setValue("plot.Festenummer",""),d(null)},className:"cursor-pointer text-primary absolute top-3 w-5 h-5 right-2"})]}),(t.value||u)&&h&&(null===u||void 0===u?void 0:u.length)>0&&(0,V.jsx)("div",{className:"absolute top-auto left-0 bg-white rounded-[8px] py-[12px] p-2.5 desktop:px-3 w-full h-auto max-h-[400px] overflow-y-auto overFlowYAuto",style:{zIndex:999,boxShadow:"rgba(16, 24, 40, 0.09) 0px 4px 6px -2px, rgba(16, 24, 40, 0.09) 0px 12px 16px -4px"},children:null===u||void 0===u?void 0:u.map(((e,t)=>(0,V.jsxs)("div",{className:"p-2 desktop:p-3 flex items-center gap-2.5 desktop:gap-4 hover:bg-lightPurple cursor-pointer",onClick:()=>{const t={"plot.address":`${e.adressetekst} ${e.postnummer} ${e.poststed}`,"plot.Kommunenummer":e.kommunenummer,"plot.G\xe5rdsnummer":e.gardsnummer,"plot.Bruksnummer":e.bruksnummer,"plot.Seksjonsnummer":e.bokstav,"plot.Festenummer":e.festenummer};Object.entries(t).forEach((e=>{let[t,r]=e;c.setValue(t,`${r}`)})),p(!1)},children:[(0,V.jsx)(Awe,{}),(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{className:"text-gray text-sm font-medium",children:"Adresse:"})," ",(0,V.jsx)("span",{className:"text-black font-medium text-base",children:`${e.adressetekst}  ${e.postnummer} ${e.poststed}`||"N/A"})]})]},t)))})]})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"w-full sm:w-[48.3%] md:w-[48%] lg:w-[48.5%] desktop:w-[13%]",children:(0,V.jsx)(nW,{control:c.control,name:"plot.Kommunenummer",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Kommunenummer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Kommunenummer",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",disable:!!t.value})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"w-full sm:w-[48.3%] md:w-[48%] lg:w-[48.5%] desktop:w-[13%]",children:(0,V.jsx)(nW,{control:c.control,name:"plot.G\xe5rdsnummer",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"G\xe5rdsnummer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn G\xe5rdsnummer",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",disable:!!t.value})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"w-full sm:w-[48.3%] md:w-[48%] lg:w-[48.5%] desktop:w-[13%]",children:(0,V.jsx)(nW,{control:c.control,name:"plot.Bruksnummer",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Bruksnummer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Bruksnummer",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",disable:!!t.value})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"w-full sm:w-[48.3%] md:w-[48%] lg:w-[48.5%] desktop:w-[13%]",children:(0,V.jsx)(nW,{control:c.control,name:"plot.Seksjonsnummer",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Seksjonsnummer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Seksjonsnummer",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",disable:!!t.value})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"w-full sm:w-[48.3%] md:w-[48%] lg:w-[48.5%] desktop:w-[13%]",children:(0,V.jsx)(nW,{control:c.control,name:"plot.Festenummer",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Festenummer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Festenummer",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",disable:!!t.value})})}),(0,V.jsx)(cW,{})]})}})})]}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsx)("p",{className:"font-semibold text-sm md:text-base",children:"Eier kunden tomten allerede?"}),(0,V.jsx)("div",{className:"flex gap-2 md:gap-4 items-center",children:[{label:"Ja",value:"Ja"},{label:"Nei",value:"Nei"}].map(((e,t)=>(0,V.jsx)("div",{onClick:()=>{c.setValue("plot.alreadyHavePlot",e.value)},className:"border-2 rounded-lg p-[10px] w-[80px] md:w-[106px] cursor-pointer "+(f===e.value?"border-[#002776]":"border-transparent"),style:{boxShadow:f===e.value?"":"0px 1px 4px 0px #27201D26"},children:(0,V.jsx)("div",{className:(f===e.value?"font-medium":"text-[#4D4D4D] font-normal")+" text-sm text-center font-medium",children:e.label})},t)))})]}),w&&!c.watch("plot.alreadyHavePlot")&&(0,V.jsx)("div",{className:"text-red text-sm mt-2",children:w.message})]}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6",children:[(0,V.jsx)("div",{className:"w-full md:w-[50%] desktop:w-[35%]",children:(0,V.jsx)(nW,{control:c.control,name:"plot.tomtekostnader",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Estimert"," ",(0,V.jsx)("span",{className:"text-darkBlack font-bold",children:"totale tomtekostnader"})," ","(kj\xf8p + klargj\xf8ring):"]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv her...",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",inputMode:"numeric",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"tomtekostnader",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})}})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"w-full md:w-[50%] desktop:w-[65%]",children:(0,V.jsx)(nW,{control:c.control,name:"plot.Kommentar",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Kommentar til banken:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv her...",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})})]}),(0,V.jsx)("div",{className:"border-t border-[#D1D1D1] w-full"}),(0,V.jsxs)("div",{className:"bg-[#F6F4F2] py-3 px-3 md:px-5 text-sm font-semibold",children:["Informasjon om"," ",(0,V.jsx)("span",{className:"font-extrabold",children:"husmodellen:"})]}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6",children:[(0,V.jsx)("div",{className:"w-full md:w-[50%] desktop:w-[35%]",children:(0,V.jsx)(nW,{control:c.control,name:"house.housemodell",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Velg husmodell"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Velg husmodell"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsx)(GZ,{children:y&&y.length>0?null===y||void 0===y?void 0:y.map(((e,t)=>{var r;return(0,V.jsx)(XZ,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e||null===(r=e.Husdetaljer)||void 0===r?void 0:r.husmodell_name},t)})):(0,V.jsx)(V.Fragment,{children:"Ingen hus funnet!"})})})]})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"w-full md:w-[50%] desktop:w-[65%]"})]}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6",children:[(0,V.jsx)("div",{className:"w-full md:w-[50%] desktop:w-[35%]",children:(0,V.jsx)(nW,{control:c.control,name:"house.byggekostnader",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsxs)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:["Estimert"," ",(0,V.jsx)("span",{className:"text-darkBlack font-bold",children:"totale byggekostnader"})," ","(oppstilling p\xe5 neste side):"]}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv her...",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text",inputMode:"numeric",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"byggekostnader",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})}})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"w-full md:w-[50%] desktop:w-[65%]",children:(0,V.jsx)(nW,{control:c.control,name:"house.Kommentar",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Kommentar til banken:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv her...",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})})]})]})})]}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)("div",{onClick:()=>i(0),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{id:"submit",children:(0,V.jsx)(HT,{text:"Neste",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})})]})]})})})}));const Owe=r.p+"static/media/Ic_upload_blue_img.4fb885ee8aa78aea6e17ccaedb952721.svg",Dwe=kQ.object({documents:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).optional(),"\xd8konomisk":kQ.string({required_error:"P\xe5krevd"}).min(1,"P\xe5krevd")}),Rwe=(0,t.forwardRef)(((e,r)=>{var n,i,a,s,o,l,c,u,d;let{setActiveTab:h,getData:p}=e;const f=AG({resolver:FG(Dwe),defaultValues:{"\xd8konomisk":"Last opp en \xf8konomisk plan"}}),m=Gr().pathname.split("/"),g=m.length>2?m[2]:null,[v,x]=(0,t.useState)(null),y=null===v||void 0===v?void 0:v.Prisliste,[b,w]=(0,t.useState)(null),[_,k]=(0,t.useState)(null),[S,j]=(0,t.useState)({}),[E,C]=(0,t.useState)(null),[N,T]=(0,t.useState)({}),[P,A]=(0,t.useState)(null),[M,I]=(0,t.useState)({}),[O,D]=(0,t.useState)(null),[R,L]=(0,t.useState)({});(0,t.useEffect)((()=>{b&&(async()=>{try{const e=cm(g_,"house_model",String(b)),t=await dg(e);t.exists()?x(t.data()):console.error("No document found for husmodell ID.")}catch(e){console.error("Error fetching data:",e)}})()}),[b]);const F=t.useRef(null),$=()=>{var e;null===(e=F.current)||void 0===e||e.click()},B=e=>{e.preventDefault()},z=f.watch("documents"),U=async(e,t)=>{if(!e.length)return;let r=[...z||[]];const n=Array.from(e).map((async e=>{if(e.size>5242880)return He.error("Image size must be less than 5MB.",{position:"top-right"}),null;const t=`${Date.now()}_${e.name}`,r=h_(v_,`documents/${t}`);try{const t=await c_(r,e);return await d_(t.ref)}catch(n){return console.error("Error uploading file:",n),null}})),i=(await Promise.all(n)).filter(Boolean);i.length&&(r=[...r,...i],f.setValue(t,r),f.clearErrors(t))},H=async e=>{e.preventDefault(),e.dataTransfer.files&&await U(e.dataTransfer.files,"documents")},[G,W]=(0,t.useState)(!1),[q,K]=(0,t.useState)(null),Z=async e=>{e.target.files&&await U(e.target.files,"documents")},[Y,X]=(0,t.useState)(!1),[Q,J]=(0,t.useState)(null),[ee,te]=(0,t.useState)({Headline:"",pris:null,IncludingOffer:!1}),re=e=>{J(e),X(!0),te({Headline:"",pris:"",IncludingOffer:!1})},[ne,ie]=(0,t.useState)([]),[ae,se]=(0,t.useState)([]),[oe,le]=(0,t.useState)(),[ce,ue]=(0,t.useState)({Tomtekost:[]});(0,t.useEffect)((()=>{if(null!==y&&void 0!==y&&y.Tomtekost){const e={IncludingOffer:!1,pris:"0",TomtekostID:(new Date).toISOString().split("T")[0],Headline:"Tomtekj\xf8p"};ue((t=>({Tomtekost:[...t.Tomtekost,...null===y||void 0===y?void 0:y.Tomtekost,e]})))}}),[]);const[de,he]=(0,t.useState)({Byggekostnader:[]});(0,t.useEffect)((()=>{if(null!==y&&void 0!==y&&y.Byggekostnader){const e={IncludingOffer:!1,pris:"0",ByggekostnaderID:(new Date).toISOString().split("T")[0],Headline:"Kundens tilvalg"};he((t=>({Byggekostnader:[...t.Byggekostnader,...null===y||void 0===y?void 0:y.Byggekostnader,e]})))}}),[null===y||void 0===y?void 0:y.Byggekostnader]);const pe=async e=>{const t=(oe?null===oe||void 0===oe?void 0:oe.Byggekostnader:(null===de||void 0===de?void 0:de.Byggekostnader)||[]).map(((e,t)=>({...e,pris:S[t]?S[t]:e.pris,Headline:N[t]?N[t]:e.Headline}))),r=ae.map((e=>({...e,pris:e.pris}))),n=(oe?null===oe||void 0===oe?void 0:oe.Tomtekost:(null===ce||void 0===ce?void 0:ce.Tomtekost)||[]).map(((e,t)=>({...e,pris:R[t]?R[t]:e.pris,Headline:M[t]?M[t]:e.Headline}))),i=ne.map((e=>({...e,pris:e.pris}))),a={...oe?null===oe||void 0===oe?void 0:oe.Tomtekost:ce,Byggekostnader:[...t,...r],Tomtekost:[...n,...i]},s={...e,husmodellData:a,houseId:b};void 0!==e.documents?s.documents=e.documents:delete s.documents;try{const e=cm(g_,"bank_leads",String(g)),t={...s,id:g},r=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");await mg(e,{ProjectAccount:t,updatedAt:r(new Date)}),He.success("Lagret",{position:"top-right"}),p(),h(3)}catch(o){console.error("Firestore operation failed:",o),He.error("Something went wrong. Please try again.",{position:"top-right"})}};(0,t.useEffect)((()=>{if(!g)return;(async()=>{const e=await b_(g);var t,r,n,i,a,s;e&&e.plotHusmodell&&w(String(null===(t=e.plotHusmodell)||void 0===t||null===(r=t.house)||void 0===r?void 0:r.housemodell));e&&null!==e&&void 0!==e&&e.ProjectAccount&&((null===e||void 0===e||null===(n=e.plotHusmodell)||void 0===n||null===(i=n.house)||void 0===i?void 0:i.housemodell)===(null===e||void 0===e||null===(a=e.ProjectAccount)||void 0===a?void 0:a.houseId)&&(Object.entries(e.ProjectAccount).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&f.setValue(t,r)})),le(null===e||void 0===e||null===(s=e.ProjectAccount)||void 0===s?void 0:s.husmodellData)))})()}),[f,g,b]);const fe=e=>e?parseFloat(String(e).replace(/\s/g,"").replace(/\./g,"").replace(",",".")):0,me=null!==(n=null!==(i=null===oe||void 0===oe?void 0:oe.Byggekostnader)&&void 0!==i?i:null===de||void 0===de?void 0:de.Byggekostnader)&&void 0!==n?n:[],ge=null!==(a=null!==(s=null===oe||void 0===oe?void 0:oe.Tomtekost)&&void 0!==s?s:null===ce||void 0===ce?void 0:ce.Tomtekost)&&void 0!==a?a:[],ve=[...me,...ae].reduce(((e,t,r)=>{var n;const i=r<me.length&&null!==(n=S[r])&&void 0!==n?n:t.pris;return e+fe(i)}),0),xe=ve.toLocaleString("nb-NO"),ye=[...ge,...ne].reduce(((e,t,r)=>{var n;const i=r<ge.length&&null!==(n=R[r])&&void 0!==n?n:t.pris;return e+fe(i)}),0),be=ye.toLocaleString("nb-NO");(0,t.useImperativeHandle)(r,(()=>({validateForm:async()=>{let e=!1;return await f.handleSubmit((async t=>{await pe(t),e=!0}))(),e}})));const we=f.watch("\xd8konomisk");return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(tW,{...f,children:(0,V.jsxs)("form",{onSubmit:f.handleSubmit(pe),className:"relative",children:[(0,V.jsxs)("div",{className:"px-4 md:px-6",children:[(0,V.jsx)("div",{className:"pb-3 md:pb-5 text-[#111322] text-base md:text-lg desktop:text-xl font-semibold",children:"\xd8konomisk plan"}),(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{className:"mb-7 md:mb-[40px]",children:(0,V.jsx)(nW,{control:f.control,name:"\xd8konomisk",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"flex flex-wrap items-center gap-3 md:gap-5",children:[(0,V.jsxs)("div",{className:"relative flex items-center gap-2 cursor-pointer",onClick:()=>f.setValue("\xd8konomisk","Last opp en \xf8konomisk plan"),children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] border text-black\n        ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4 accent-primary`,type:"radio",value:"Last opp en \xf8konomisk plan",onChange:e=>{f.setValue("\xd8konomisk",e.target.value)},checked:"Last opp en \xf8konomisk plan"===t.value}),(0,V.jsxs)("p",{className:"text-sm md:text-base "+("Last opp en \xf8konomisk plan"===t.value?"text-darkBlack":"text-[#5D6B98]"),children:[(0,V.jsx)("span",{className:"font-bold",children:"Last opp"})," en \xf8konomisk plan"]})]}),(0,V.jsxs)("div",{className:"relative flex items-center gap-2 cursor-pointer",onClick:()=>f.setValue("\xd8konomisk","Opprett en \xf8konomisk plan"),children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] border text-black\n        ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4 accent-primary`,type:"radio",value:"Opprett en \xf8konomisk plan",onChange:e=>{f.setValue("\xd8konomisk",e.target.value)},checked:"Opprett en \xf8konomisk plan"===t.value}),(0,V.jsxs)("p",{className:"text-sm md:text-base "+("Opprett en \xf8konomisk plan"===t.value?"text-darkBlack":"text-[#5D6B98]"),children:[(0,V.jsx)("span",{className:"font-bold",children:"Opprett"})," en \xf8konomisk plan"]})]}),(0,V.jsxs)("div",{className:"relative flex items-center gap-2 cursor-pointer",onClick:()=>f.setValue("\xd8konomisk","Ettersend en \xf8konomisk plan"),children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] border text-black\n        ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4 accent-primary`,type:"radio",value:"Ettersend en \xf8konomisk plan",onChange:e=>{f.setValue("\xd8konomisk",e.target.value)},checked:"Ettersend en \xf8konomisk plan"===t.value}),(0,V.jsxs)("p",{className:"text-sm md:text-base "+("Ettersend en \xf8konomisk plan"===t.value?"text-darkBlack":"text-[#5D6B98]"),children:[(0,V.jsx)("span",{className:"font-bold",children:"Ettersend"})," en \xf8konomisk plan"]})]})]})}),(0,V.jsx)(cW,{})]})}})}),"Last opp en \xf8konomisk plan"===we&&(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-[62px]",children:[(0,V.jsx)(nW,{control:f.control,name:"documents",render:()=>(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full p-3 rounded-lg",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 border-dashed laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:B,onClick:$,onDrop:H,children:[(0,V.jsx)("img",{src:Owe,alt:"upload"}),(0,V.jsxs)("div",{className:"flex items-center gap-3",children:[(0,V.jsx)("span",{className:"text-[#7839EE] border-2 border-[#7839EE] rounded-[40px] py-2 px-4 font-medium whitespace-nowrap",children:"Last opp"}),(0,V.jsx)("p",{className:"text-[#111322] text-sm text-center truncate w-full",children:"Slipp fil for \xe5 laste opp her"})]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"Filformater: kun PDF, max 5 MB"}),(0,V.jsx)("input",{type:"file",ref:F,className:"hidden",accept:".pdf",onChange:Z,name:"documents",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm font-medium",children:"Dokumenter"}),z&&z.length>0?(0,V.jsx)("div",{className:"flex flex-col items-center gap-3",children:null===z||void 0===z?void 0:z.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsx)("div",{children:(0,V.jsx)("div",{className:"bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer w-8 h-8",onClick:()=>(e=>{K(e),W(!0)})(t),children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})})]},t)))}):(0,V.jsx)("p",{className:"text-gray",children:"No documents found!"})]})]})]})]}),"Opprett en \xf8konomisk plan"===we&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("h4",{className:"px-4 md:px-6 pb-5 text-darkBlack font-semibold text-sm md:text-base desktop:text-lg",children:"Har du ikke laget en \xf8konomisk plan? Fyll ut den \xf8konomiske planen her:"}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6 px-4 md:px-6 mb-28",children:[(0,V.jsxs)("div",{className:"w-full md:w-1/2 p-2 md:p-4 border border-gray2 rounded-lg h-max",style:{boxShadow:"0px 4px 6px -2px #10182808, 0px 12px 16px -4px #10182814"},children:[(0,V.jsxs)("div",{className:"text-center p-2 md:p-4 text-[#101828] font-medium text-sm md:text-base desktop:text-lg bg-[#F9F9FB] mb-3 md:mb-5 relative",children:["Byggekostnader",(0,V.jsx)(GT,{className:"text-primary absolute top-2 h-5 w-5 md:w-6 md:h-6 md:top-5 right-4"})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-3 md:gap-5",children:[(oe?(null===oe||void 0===oe?void 0:oe.Byggekostnader.length)>0:(null===de||void 0===de||null===(o=de.Byggekostnader)||void 0===o?void 0:o.length)>0)&&(0,V.jsx)("div",{className:"flex flex-col gap-3 md:gap-5",children:null===(l=oe?null===oe||void 0===oe?void 0:oe.Byggekostnader:null===de||void 0===de?void 0:de.Byggekostnader)||void 0===l||null===(c=l.sort(((e,t)=>{var r,n;const i=parseInt(null===(r=String(null===e||void 0===e?void 0:e.pris))||void 0===r?void 0:r.replace(/\D/g,""))||0,a=parseInt(null===(n=String(null===t||void 0===t?void 0:t.pris))||void 0===n?void 0:n.replace(/\D/g,""))||0,s=!(null===e||void 0===e||!e.pris),o=!(null===t||void 0===t||!t.pris);return s&&!o?-1:!s&&o?1:a-i})))||void 0===c?void 0:c.map(((e,t)=>{var r,n,i,a;const s=_===t,o=E===t;return(0,V.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-1 md:gap-2",children:o?(0,V.jsx)("input",{type:"text",value:null!==(r=null!==(n=N[t])&&void 0!==n?n:e.Headline)&&void 0!==r?r:"",onChange:e=>{T({...N,[t]:e.target.value})},onBlur:()=>C(null),className:"focus-within:outline-none placeholder:text-gray text-sm rounded-[8px] shadow-shadow1 border border-gray1 py-[6px] px-[10px] w-[400px]"}):(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm font-medium cursor-pointer",onClick:()=>C(t),children:N[t]?N[t]:null===e||void 0===e?void 0:e.Headline})}),(0,V.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[s?(0,V.jsx)("input",{inputMode:"numeric",type:"text",value:null!==(i=null!==(a=S[t])&&void 0!==a?a:e.pris)&&void 0!==i?i:"",onChange:e=>{j({...S,[t]:e.target.value.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(e.target.value.replace(/\D/g,""))):""})},onBlur:()=>k(null),className:"focus-within:outline-none placeholder:text-gray rounded-[8px] shadow-shadow1 border border-gray1 py-[6px] px-[10px] w-[140px]"}):(0,V.jsx)("h4",{className:"text-black font-medium text-sm md:text-base cursor-pointer whitespace-nowrap",onClick:()=>k(t),children:S[t]?`kr ${S[t]}`:null!==e&&void 0!==e&&e.pris?`kr ${e.pris}`:"inkl. i tilbud"}),(0,V.jsx)(_we,{className:"text-red w-4 md:w-5 h-4 md:h-5 cursor-pointer",onClick:()=>{const e=t;if(oe){const t=oe.Byggekostnader.filter(((t,r)=>r!==e));le({...oe,Byggekostnader:t})}else{var r;const t=(null===de||void 0===de||null===(r=de.Byggekostnader)||void 0===r?void 0:r.filter(((t,r)=>r!==e)))||[];he({...de,Byggekostnader:t})}const n={...S},i={...N};delete n[e],delete i[e],j(n),T(i)}})]})]},t)}))}),null===ae||void 0===ae?void 0:ae.map(((e,t)=>{var r,n;const i=_===t;return(0,V.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-1 md:gap-2",children:(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm font-medium",children:null===e||void 0===e?void 0:e.Headline})}),(0,V.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[i?(0,V.jsx)("input",{inputMode:"numeric",type:"text",value:null!==(r=null!==(n=S[t])&&void 0!==n?n:e.pris)&&void 0!==r?r:"",onChange:e=>{j({...S,[t]:e.target.value.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(e.target.value.replace(/\D/g,""))):""})},onBlur:()=>k(null),className:"focus-within:outline-none placeholder:text-gray rounded-[8px] shadow-shadow1 border border-gray1 py-[6px] px-[10px] w-[140px]"}):(0,V.jsx)("h4",{className:"text-black font-medium text-sm md:text-base cursor-pointer whitespace-nowrap",onClick:()=>k(t),children:S[t]?`kr ${S[t]}`:null!==e&&void 0!==e&&e.pris?`kr ${e.pris}`:"inkl. i tilbud"}),(0,V.jsx)(_we,{className:"text-red w-4 md:w-5 h-4 md:h-5 cursor-pointer",onClick:()=>{const e=ae.filter(((e,r)=>r!==t));se(e);const r={...S},n={...N};delete r[t],delete n[t],j(r),T(n)}})]})]},t)})),(0,V.jsx)("div",{className:"border-t border-gray2"}),(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-2",children:(0,V.jsx)("p",{className:"text-gray text-sm md:text-base desktop:text-lg font-bold",children:"Sum byggkostnader"})}),(0,V.jsxs)("h4",{className:"text-black font-bold text-sm md:text-base",children:["kr ",xe]})]}),(0,V.jsx)("div",{className:"flex items-center justify-center",children:(0,V.jsxs)("div",{className:"bg-[#7839EE] rounded-[40px] py-2 md:py-3.5 px-3 md:px-5 flex items-center gap-2 cursor-pointer",onClick:()=>re("byggekost"),children:[(0,V.jsx)(cA,{className:"text-white w-4 md:w-5 h-4 md:h-5"}),(0,V.jsx)("span",{className:"text-white font-medium text-sm md:text-base",children:"Legg til ny byggekostnad"})]})})]})]}),(0,V.jsxs)("div",{className:"w-full md:w-1/2 p-2 md:p-4 border border-gray2 rounded-lg h-max",style:{boxShadow:"0px 4px 6px -2px #10182808, 0px 12px 16px -4px #10182814"},children:[(0,V.jsxs)("div",{className:"text-center  p-2 md:p-4 text-[#101828] font-medium text-sm md:text-base desktop:text-lg bg-[#F9F9FB] mb-3 md:mb-5 relative",children:["Tomkostnader",(0,V.jsx)(GT,{className:"text-primary absolute top-2 h-5 w-5 md:w-6 md:h-6 md:top-5 right-4"})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-3 md:gap-5",children:[(oe?(null===oe||void 0===oe?void 0:oe.Tomtekost.length)>0:(null===ce||void 0===ce?void 0:ce.Tomtekost.length)>0)&&(null===(u=oe?null===oe||void 0===oe?void 0:oe.Tomtekost:null===ce||void 0===ce?void 0:ce.Tomtekost)||void 0===u?void 0:u.sort(((e,t)=>{var r,n;const i=parseInt(null===(r=String(null===e||void 0===e?void 0:e.pris))||void 0===r?void 0:r.replace(/\D/g,""))||0,a=parseInt(null===(n=String(null===t||void 0===t?void 0:t.pris))||void 0===n?void 0:n.replace(/\D/g,""))||0,s=!(null===e||void 0===e||!e.pris),o=!(null===t||void 0===t||!t.pris);return s&&!o?-1:!s&&o?1:a-i})).map(((e,t)=>{var r,n,i,a;const s=O===t,o=P===t;return(0,V.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-1 md:gap-2",children:o?(0,V.jsx)("input",{type:"text",value:null!==(r=null!==(n=M[t])&&void 0!==n?n:e.Headline)&&void 0!==r?r:"",onChange:e=>{I({...M,[t]:e.target.value})},onBlur:()=>A(null),className:"focus-within:outline-none placeholder:text-gray text-sm rounded-[8px] shadow-shadow1 border border-gray1 py-[6px] px-[10px] w-[400px]"}):(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm font-medium cursor-pointer",onClick:()=>A(t),children:M[t]?M[t]:null===e||void 0===e?void 0:e.Headline})}),s?(0,V.jsx)("input",{inputMode:"numeric",type:"text",value:null!==(i=null!==(a=R[t])&&void 0!==a?a:e.pris)&&void 0!==i?i:"",onChange:e=>{L({...R,[t]:e.target.value.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(e.target.value.replace(/\D/g,""))):""})},onBlur:()=>D(null),className:"focus-within:outline-none placeholder:text-gray rounded-[8px] shadow-shadow1 border border-gray1 py-[6px] px-[10px] w-[140px]"}):(0,V.jsx)("h4",{className:"text-black font-medium text-sm md:text-base cursor-pointer whitespace-nowrap",onClick:()=>D(t),children:R[t]?`kr ${R[t]}`:null!==e&&void 0!==e&&e.pris?`kr ${e.pris}`:"inkl. i tilbud"})]},t)}))),null===ne||void 0===ne?void 0:ne.map(((e,t)=>{var r,n;const i=_===t;return(0,V.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-1 md:gap-2",children:(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm font-medium",children:null===e||void 0===e?void 0:e.Headline})}),(0,V.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[i?(0,V.jsx)("input",{inputMode:"numeric",type:"text",value:null!==(r=null!==(n=R[t])&&void 0!==n?n:e.pris)&&void 0!==r?r:"",onChange:e=>{L({...R,[t]:e.target.value.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(e.target.value.replace(/\D/g,""))):""})},onBlur:()=>k(null),className:"focus-within:outline-none placeholder:text-gray rounded-[8px] shadow-shadow1 border border-gray1 py-[6px] px-[10px] w-[140px]"}):(0,V.jsx)("h4",{className:"text-black font-medium text-sm md:text-base cursor-pointer whitespace-nowrap",onClick:()=>k(t),children:R[t]?`kr ${R[t]}`:null!==e&&void 0!==e&&e.pris?`kr ${e.pris}`:"inkl. i tilbud"}),(0,V.jsx)(_we,{className:"text-red w-4 md:w-5 h-4 md:h-5 cursor-pointer",onClick:()=>{const e=ne.filter(((e,r)=>r!==t));ie(e);const r={...R},n={...N};delete r[t],delete n[t],L(r),I(n)}})]})]},t)})),(0,V.jsx)("div",{className:"border-t border-gray2"}),(0,V.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-1 md:gap-2",children:(0,V.jsx)("p",{className:"text-gray text-sm md:text-base desktop:text-lg font-bold",children:"Sum tomtekostnader"})}),(0,V.jsxs)("h4",{className:"text-black font-bold text-sm md:text-base",children:["kr ",be]})]}),(0,V.jsx)("div",{className:"flex items-center justify-center",children:(0,V.jsxs)("div",{className:"bg-[#7839EE] rounded-[40px] py-2 md:py-3.5 px-3 md:px-5 flex items-center gap-2 cursor-pointer",onClick:()=>re("tomtekost"),children:[(0,V.jsx)(cA,{className:"text-white w-4 md:w-5 h-4 md:h-5"}),(0,V.jsx)("span",{className:"text-white font-medium text-sm md:text-base",children:"Legg til ny tomtekostnad"})]})})]})]})]})]}),"Ettersend en \xf8konomisk plan"===we&&(0,V.jsx)("p",{className:"text-darkBlack px-4 md:px-6 text-sm md:text-base desktop:text-lg font-medium",children:"Du vil ettersende \xf8konomisk plan"}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center fixed bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)("div",{onClick:()=>h(1),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})}),G&&(0,V.jsx)(sA,{onClose:()=>{W(!G)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,V.jsx)("p",{className:"mb-4",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,V.jsx)("div",{onClick:()=>{W(!1),K(null)},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>{if(null!==q){const e=z.filter(((e,t)=>t!==q));f.setValue("documents",e)}W(!1),K(null)}})]})]})})}),Y&&(0,V.jsx)(sA,{onClose:()=>{X(!Y)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-xl w-[400px]",children:[(0,V.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"tomtekost"===Q?"Ny tomtekostnad":"Ny byggekostnad"}),(0,V.jsx)("input",{type:"text",placeholder:"Tittel",value:ee.Headline,onChange:e=>te({...ee,Headline:e.target.value}),className:"w-full mb-4 border border-gray1 p-2 rounded"}),(0,V.jsxs)("div",{className:"mb-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-end gap-2 mb-[6px]",children:(0,V.jsxs)("div",{className:"flex items-center gap-3 text-black text-sm font-medium",children:["inkl. i tilbud",(0,V.jsxs)("div",{className:"toggle-container",children:[(0,V.jsx)("input",{type:"checkbox",id:"toggleTomtekSwitch",className:"toggle-input",checked:ee.IncludingOffer,onChange:e=>{const t=e.target.checked;te((e=>({...e,IncludingOffer:t,pris:t?null:""})))}}),(0,V.jsx)("label",{htmlFor:"toggleTomtekSwitch",className:"toggle-label"})]})]})}),(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)("input",{placeholder:"Skriv inn Pris fra",className:"w-full mb-4 border border-gray1 p-2 rounded disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-[#F5F5F5]",inputMode:"numeric",type:"text",value:null===ee.pris?"-":(null===(d=ee.pris)||void 0===d?void 0:d.toString())||"",onChange:e=>{let{target:{value:t}}=e;const r=t.replace(/\D/g,"");te((e=>({...e,pris:r?new Intl.NumberFormat("no-NO").format(Number(r)):""})))},disabled:ee.IncludingOffer})})]}),(0,V.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,V.jsx)("div",{onClick:()=>X(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>{const e={...ee,["tomtekost"===Q?"TomtekostID":"ByggekostID"]:(new Date).toISOString()};"tomtekost"===Q?ie((t=>[...t,e])):"byggekost"===Q&&se((t=>[...t,e])),X(!1)}})]})]})})})]})})),Lwe=e=>{var r,n,i,a,s,o,l,c,u,d;let{setActiveTab:h}=e;const p=Gr(),f=Kr(),m=p.pathname.split("/"),g=m.length>2?m[2]:null,[v,x]=(0,t.useState)();(0,t.useEffect)((()=>{if(!g)return;(async()=>{const e=await b_(g);x(e)})()}),[g]);const[y,b]=(0,t.useState)(null);(0,t.useEffect)((()=>{var e,t;null!==v&&void 0!==v&&null!==(e=v.plotHusmodell)&&void 0!==e&&null!==(t=e.house)&&void 0!==t&&t.housemodell&&(async()=>{try{var e,t;const r=cm(g_,"house_model",String(null===v||void 0===v||null===(e=v.plotHusmodell)||void 0===e||null===(t=e.house)||void 0===t?void 0:t.housemodell)),n=await dg(r);n.exists()?b(n.data()):console.error("No document found for husmodell ID.")}catch(r){console.error("Error fetching data:",r)}})()}),[v]);const w=null===v||void 0===v||null===(r=v.plotHusmodell)||void 0===r?void 0:r.plot,_=null===v||void 0===v||null===(n=v.plotHusmodell)||void 0===n?void 0:n.house;function k(e){return"string"!==typeof e?0:Number(e.replace(/\s/g,""))}const S=k(null===w||void 0===w?void 0:w.tomtekostnader)+k(null===_||void 0===_?void 0:_.byggekostnader);function j(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"mx-4 md:mx-8 lg:mx-10 rounded-lg mb-28",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsx)("div",{className:"py-4 px-5 flex items-center gap-3 border-b border-[#E8E8E8]",children:(0,V.jsx)("span",{className:"text-sm md:text-base desktop:text-lg font-semibold",children:"Oppsummering"})}),(0,V.jsxs)("div",{className:"p-5",children:[(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om kunden"}),(0,V.jsx)("div",{className:"py-5 grid grid-cols-2 gap-6",children:v&&(null===v||void 0===v||null===(i=v.Kunden)||void 0===i?void 0:i.Kundeinformasjon.length)&&(null===v||void 0===v||null===(a=v.Kunden)||void 0===a?void 0:a.Kundeinformasjon.map(((e,t)=>(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Type"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.Kundetype})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Navn:"}),(0,V.jsxs)("div",{className:"w-[300px] text-darkBlack",children:[null===e||void 0===e?void 0:e.f_name," ",null===e||void 0===e?void 0:e.l_name]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.Adresse})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Mobil:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.mobileNummer})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"E-post:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.EPost})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"F\xf8dselsdato:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.dato})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Personnummer:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.Personnummer})]})]},t))))}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om tomten"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===w||void 0===w?void 0:w.address})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kunden eier tomten allerede:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null!==w&&void 0!==w&&w.alreadyHavePlot?null===w||void 0===w?void 0:w.alreadyHavePlot:"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale tomtekostnader:"}),(0,V.jsxs)("div",{className:"text-darkBlack",children:["kr ",null===w||void 0===w?void 0:w.tomtekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===w||void 0===w?void 0:w.Kommentar})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om husmodellen"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Husmodell"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===y||void 0===y||null===(s=y.Husdetaljer)||void 0===s?void 0:s.husmodell_name})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale byggekostnader:"}),(0,V.jsxs)("div",{className:"text-darkBlack",children:["kr ",null===_||void 0===_?void 0:_.byggekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center mb-3",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===_||void 0===_?void 0:_.Kommentar})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om \xf8konomisk plan"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Lastet opp"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Last opp en \xf8konomisk plan"===(null===v||void 0===v||null===(o=v.ProjectAccount)||void 0===o?void 0:o.\u00d8konomisk)?"Ja":"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Operettet"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Opprett en \xf8konomisk plan"===(null===v||void 0===v||null===(l=v.ProjectAccount)||void 0===l?void 0:l.\u00d8konomisk)?"Ja":"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center mb-3",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Ettersendes"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Ettersend en \xf8konomisk plan"===(null===v||void 0===v||null===(c=v.ProjectAccount)||void 0===c?void 0:c.\u00d8konomisk)?"Ja":"Nei"})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Forh\xe5ndstakst"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsx)("div",{className:"flex flex-col gap-2",children:(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"\xd8nskes forh\xe5ndstakst?"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Ja, jeg \xf8nsker forh\xe5ndstakst"===(null===v||void 0===v||null===(u=v.Forhandstakst)||void 0===u?void 0:u.advance_quote)?"Ja (lead sendes til megler n\xe5r du sendes inn banktipset)":null===v||void 0===v||null===(d=v.Forhandstakst)||void 0===d?void 0:d.advance_quote})]})})}),(0,V.jsxs)("div",{className:"bg-[#F9F9FB] rounded-lg py-3 px-4 flex flex-col gap-3",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum tomtekostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===w||void 0===w?void 0:w.tomtekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversendes megler)"})]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum byggkostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===_||void 0===_?void 0:_.byggekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversende banken)"})]})]}),(0,V.jsx)("div",{className:"border-t border-[#EAECF0] w-full"}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] font-medium text-xl",children:"Totale kostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-bold text-xl",children:["kr ",j(S)]})]})]})]})]}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center fixed bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)("div",{onClick:()=>h(3),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Send til bank",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:async()=>{try{var e,t,r,n,i,a,s,o,l,c;const u=await fetch("https://nh989m12uk.execute-api.eu-north-1.amazonaws.com/prod/banklead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"send-welcome",email:"rudraksh.shukla98@gmail.com",fields:{FNAME:null===v||void 0===v||null===(e=v.Kunden)||void 0===e||null===(t=e.Kundeinformasjon[0])||void 0===t?void 0:t.f_name,LNAME:null===v||void 0===v||null===(r=v.Kunden)||void 0===r||null===(n=r.Kundeinformasjon[0])||void 0===n?void 0:n.l_name,phone:null===v||void 0===v||null===(i=v.Kunden)||void 0===i||null===(a=i.Kundeinformasjon[0])||void 0===a?void 0:a.mobileNummer,email:null===v||void 0===v||null===(s=v.Kunden)||void 0===s||null===(o=s.Kundeinformasjon[0])||void 0===o?void 0:o.EPost,dealer:"BoligPartner",office:"BoligPartner",projectAddress:null===v||void 0===v||null===(l=v.plotHusmodell)||void 0===l||null===(c=l.plot)||void 0===c?void 0:c.address,landCost:`kr ${null===w||void 0===w?void 0:w.tomtekostnader}`,buildingCost:`kr ${null===_||void 0===_?void 0:_.byggekostnader}`,totalCost:`kr ${j(S)}`,link:`https://admin.mintomt.no/bank-leads-detail/${g}`}})}),d=await u.json();ge.success(d.message,{position:"top-right"}),f("/agent-leads")}catch(u){console.error("Error:",u)}}})]})]})},Fwe=r.p+"static/media/Img_opp.f0e49c4c09d088e60884.png",$we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAABICAYAAAC6L9h5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMFSURBVHgB7dpNaNRAFAfwl5kk3dpP6kert1JoQVDBpZ71LvTk1ZvQ1rNCj6LQgwjePBRPexG99+pFqEhBBNuDVVFZpCvdj6S7ySY7yZgUobDGzSMftmzf77j7mib/zL4kMwEghBBCCCEkRwz6l5pJ0cX5+XO3FlfLZu1XC/qFAkrTaLxee7i8gCmPDYnZTJrVCjcb1VHoI9Z+g2Nr+/mnlBkKCYFCQjjBIeEPPbZx22xM6vqgoRcGG5AxBopot61piNpjCVLV9Qrj3IGsSWCi45rYcgVREx6ADzlZfvR817Fak92fD49NwPqrpzM7m5tfIT/hFc6LK8KMudwCCklPRI5m6fsw4A1PQL5iAwpR40agkBAoJAQKCYFCQqCQECgkBAoJgUJCoJAQKCSEow+pxyO2oigSjgHUakEPyrUbNy9btulCAh3HM6TwI0+U8DowMTl14VLxektqPma2oosOTfNn/dv2dgXCyZEUEvzzQ+eLxVN3Fldb9b1dSIIrDEyj6gcjJmI+yReFoVGV8WTnMVgQgWC/SqUn925DSqlGEq/osmXUwpUHSCoyoIMvmNq2mpBiu2A3G1XIADVuBAoJgUJCSHt1A67pwFUNEgkuG57bkQdd9i/SZ1xjYW9JuOlwv4YhA6lCKpc3Ojsf3y41jZoBCfiS12fmrrz0fDHS/Z2mF1j5y9aKY1nfAb0gfYgxRTXq5hZkINUtwJ+/T3UPsvRgbc917NPdnw+NjMP6i2dXP3/YeA9HLG1PyuCO+N+LMQU2kGAMZY8aNwKFhEAhIVBICBQSAoWEQCEhUEgIFBIChYRAISFgQkr7EByzdR75tpnCGLhiP/n8LQ7q2TA2gNnZ4pmFuyvvzHoV/SImFuPMcW27CBE7Gzw5S01VPwVFbcic5FbLfFN6fH8JUx07n6TrKheOMy3c7F+C7SU4e4oQYi5YXII8BMf0A1t7cnuSlOhpHmrcCBQSAoWEENu4tbFRPn52KrwU/d/OnSMFJGOaOgQZ6ufRdizm0AkhhBBCCCEkxm+DEdehhUAnTAAAAABJRU5ErkJggg==",Bwe=kQ.object({documents:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).optional(),advance_quote:kQ.string({required_error:"P\xe5krevd"}).min(1,"P\xe5krevd"),Kommentar:kQ.string().optional()}).superRefine(((e,t)=>{"Nei, jeg \xf8nsker ikke forh\xe5ndstakst"!==e.advance_quote&&(!e.Kommentar||e.Kommentar.trim().length<2)&&t.addIssue({path:["Kommentar"],code:kQ.ZodIssueCode.custom,message:"Kommentar til megler m\xe5 best\xe5 av minst 2 tegn."})})),zwe=(0,t.forwardRef)(((e,r)=>{var n,i,a,s,o;let{setActiveTab:l}=e;const c=AG({resolver:FG(Bwe),defaultValues:{advance_quote:"Ja, jeg \xf8nsker forh\xe5ndstakst"}}),u=Gr().pathname.split("/"),d=u.length>2?u[2]:null,[h,p]=(0,t.useState)();(0,t.useEffect)((()=>{if(!d)return;(async()=>{const e=await b_(d);p(e),e&&e.Forhandstakst&&Object.entries(e.Forhandstakst).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&c.setValue(t,r)}))})()}),[d]);const[f,m]=(0,t.useState)(null);(0,t.useEffect)((()=>{var e,t;null!==h&&void 0!==h&&null!==(e=h.plotHusmodell)&&void 0!==e&&null!==(t=e.house)&&void 0!==t&&t.housemodell&&(async()=>{try{var e,t;const r=cm(g_,"house_model",String(null===h||void 0===h||null===(e=h.plotHusmodell)||void 0===e||null===(t=e.house)||void 0===t?void 0:t.housemodell)),n=await dg(r);n.exists()?m(n.data()):console.error("No document found for husmodell ID.")}catch(r){console.error("Error fetching data:",r)}})()}),[h]);const g=null===h||void 0===h||null===(n=h.plotHusmodell)||void 0===n?void 0:n.plot,v=null===h||void 0===h||null===(i=h.plotHusmodell)||void 0===i?void 0:i.house,x=async e=>{const t={...e};void 0!==e.documents?t.documents=e.documents:delete t.documents,void 0!==e.Kommentar?t.Kommentar=e.Kommentar:delete t.Kommentar;try{const e=cm(g_,"bank_leads",String(d)),r={...t,id:d},n=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");await mg(e,{Forhandstakst:r,updatedAt:n(new Date)}),He.success("Lagret",{position:"top-right"}),l(4)}catch(r){console.error("Firestore operation failed:",r),He.error("Something went wrong. Please try again.",{position:"top-right"})}};(0,t.useImperativeHandle)(r,(()=>({validateForm:async()=>{let e=!1;return await c.handleSubmit((async t=>{await x(t),e=!0}))(),e}})));const y=t.useRef(null),b=()=>{var e;null===(e=y.current)||void 0===e||e.click()},w=e=>{e.preventDefault()},_=c.watch("documents"),k=async(e,t)=>{if(!e.length)return;let r=[..._||[]];const n=Array.from(e).map((async e=>{if(e.size>5242880)return He.error("Image size must be less than 5MB.",{position:"top-right"}),null;const t=`${Date.now()}_${e.name}`,r=h_(v_,`documents/${t}`);try{const t=await c_(r,e);return await d_(t.ref)}catch(n){return console.error("Error uploading file:",n),null}})),i=(await Promise.all(n)).filter(Boolean);i.length&&(r=[...r,...i],c.setValue(t,r),c.clearErrors(t))},S=async e=>{e.preventDefault(),e.dataTransfer.files&&await k(e.dataTransfer.files,"documents")},[j,E]=(0,t.useState)(!1),[C,N]=(0,t.useState)(null),T=async e=>{e.target.files&&await k(e.target.files,"documents")},P=c.watch("advance_quote");function A(e){return"string"!==typeof e?0:Number(e.replace(/\s/g,""))}const M=A(null===g||void 0===g?void 0:g.tomtekostnader)+A(null===v||void 0===v?void 0:v.byggekostnader);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(tW,{...c,children:(0,V.jsxs)("form",{onSubmit:c.handleSubmit(x),className:"relative",children:[(0,V.jsxs)("div",{className:"mx-4 md:mx-8 lg:mx-10 rounded-lg mb-28",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsxs)("div",{style:{background:`url(${Fwe})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},className:"px-5 py-7 flex gap-[40px] items-center",children:[(0,V.jsx)("img",{src:$we,alt:"opp"}),(0,V.jsxs)("p",{className:"text-white text-xl",children:["\xd8nsker du en kostnadsfri forh\xe5ndstakst fra"," ",(0,V.jsx)("span",{className:"font-bold",children:"Eie Eiendomsmegling"}),"?"]})]}),(0,V.jsxs)("div",{className:"p-5",children:[(0,V.jsx)("div",{className:"pt-8 text-xl text-darkBlack font-semibold mb-5",children:"\xd8nsker du \xe5 innhente en kostnadsfri forh\xe5ndstakst fra Eie Eiendomsmegling?"}),(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm mb-5",children:"Med en forh\xe5ndstakst fra Eie Eiendomsmegling \xf8ker sannsynligheten for at kunden f\xe5r byggel\xe5nsfinansiering."}),(0,V.jsx)("div",{className:"mb-5",children:(0,V.jsx)(nW,{control:c.control,name:"advance_quote",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"flex items-center gap-5",children:[(0,V.jsxs)("div",{className:"relative flex items-center gap-2 cursor-pointer",onClick:()=>c.setValue("advance_quote","Ja, jeg \xf8nsker forh\xe5ndstakst"),children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] border text-black\n          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4 accent-primary`,type:"radio",value:"Ja, jeg \xf8nsker forh\xe5ndstakst",onChange:e=>{c.setValue("advance_quote",e.target.value)},checked:"Ja, jeg \xf8nsker forh\xe5ndstakst"===t.value}),(0,V.jsx)("p",{className:""+("Ja, jeg \xf8nsker forh\xe5ndstakst"===t.value?"text-darkBlack":"text-[#5D6B98]"),children:"Ja, jeg \xf8nsker forh\xe5ndstakst"})]}),(0,V.jsxs)("div",{className:"relative flex items-center gap-2 cursor-pointer",onClick:()=>c.setValue("advance_quote","Nei, jeg \xf8nsker ikke forh\xe5ndstakst"),children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] border text-black\n          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4 accent-primary`,type:"radio",value:"Nei, jeg \xf8nsker ikke forh\xe5ndstakst",onChange:e=>{c.setValue("advance_quote",e.target.value)},checked:"Nei, jeg \xf8nsker ikke forh\xe5ndstakst"===t.value}),(0,V.jsx)("p",{className:""+("Nei, jeg \xf8nsker ikke forh\xe5ndstakst"===t.value?"text-darkBlack":"text-[#5D6B98]"),children:"Nei, jeg \xf8nsker ikke forh\xe5ndstakst"})]})]})}),(0,V.jsx)(cW,{})]})}})}),"Ja, jeg \xf8nsker forh\xe5ndstakst"===P?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg font-medium text-darkBlack",children:"Informasjon om kunden"}),(0,V.jsx)("div",{className:"py-5 grid grid-cols-2 gap-6",children:h&&(null===h||void 0===h||null===(a=h.Kunden)||void 0===a?void 0:a.Kundeinformasjon.length)&&(null===h||void 0===h||null===(s=h.Kunden)||void 0===s?void 0:s.Kundeinformasjon.map(((e,t)=>(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Type"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.Kundetype})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Navn:"}),(0,V.jsxs)("div",{className:"w-[300px] text-[#000000] font-semibold",children:[null===e||void 0===e?void 0:e.f_name," ",null===e||void 0===e?void 0:e.l_name]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.Adresse})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Mobil:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.mobileNummer})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"E-post:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.EPost})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"F\xf8dselsdato:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.dato})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Personnummer:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.Personnummer})]})]},t))))}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg font-medium text-darkBlack pt-5",children:"Informasjon om tomten"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null===g||void 0===g?void 0:g.address})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kunden eier tomten allerede:"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null!==g&&void 0!==g&&g.alreadyHavePlot?null===g||void 0===g?void 0:g.alreadyHavePlot:"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale tomtekostnader:"}),(0,V.jsxs)("div",{className:"w-full text-[#000000] font-semibold",children:["kr ",null===g||void 0===g?void 0:g.tomtekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null===g||void 0===g?void 0:g.Kommentar})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg font-medium text-darkBlack pt-5",children:"Informasjon om husmodellen"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Husmodell"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null===f||void 0===f||null===(o=f.Husdetaljer)||void 0===o?void 0:o.husmodell_name})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale byggekostnader:"}),(0,V.jsxs)("div",{className:"w-full text-[#000000] font-semibold",children:["kr ",null===v||void 0===v?void 0:v.byggekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center mb-3",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null===v||void 0===v?void 0:v.Kommentar})]}),(0,V.jsxs)("div",{className:"bg-[#F9F9FB] rounded-lg py-3 px-4 flex flex-col gap-3",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum tomtekostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===g||void 0===g?void 0:g.tomtekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversendes megler)"})]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum byggkostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===v||void 0===v?void 0:v.byggekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversende banken)"})]})]}),(0,V.jsx)("div",{className:"border-t border-[#EAECF0] w-full"}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] font-medium text-xl",children:"Totale kostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-bold text-xl",children:["kr ",(I=M,I.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))]})]})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsxs)("div",{className:"py-5",children:[(0,V.jsx)("h4",{className:"text-darkBlack font-semibold text-xl mb-5",children:"Last opp informasjon til megler"}),(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm mb-5",children:"Jo bedre dokumentasjon du deler med megler, jo bedre grunnlag har megler til \xe5 sette en god forh\xe5ndstakst. Last gjerne opp byggetegninger, pristilbud, link til Finn-annonse, plantegninger med mer."}),(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,V.jsx)(nW,{control:c.control,name:"documents",render:()=>(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full p-3 rounded-lg",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 border-dashed laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:w,onClick:b,onDrop:S,children:[(0,V.jsx)("img",{src:Owe,alt:"upload"}),(0,V.jsxs)("div",{className:"flex items-center gap-3",children:[(0,V.jsx)("span",{className:"text-[#7839EE] border-2 border-[#7839EE] rounded-[40px] py-2 px-4 font-medium whitespace-nowrap",children:"Last opp"}),(0,V.jsx)("p",{className:"text-[#111322] text-sm text-center truncate w-full",children:"Slipp fil for \xe5 laste opp her"})]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"Filformater: kun PDF, max 5 MB"}),(0,V.jsx)("input",{type:"file",ref:y,className:"hidden",accept:".pdf",onChange:T,name:"documents",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm font-medium",children:"Dokumenter"}),_&&_.length>0?(0,V.jsx)("div",{className:"flex flex-col items-center gap-3",children:null===_||void 0===_?void 0:_.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsx)("div",{children:(0,V.jsx)("div",{className:"bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer w-8 h-8",onClick:()=>(e=>{N(e),E(!0)})(t),children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})})]},t)))}):(0,V.jsx)("p",{className:"text-gray",children:"No documents found!"})]})]})]}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsxs)("div",{className:"pt-5",children:[(0,V.jsx)("h4",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-medium mb-4",children:"Har du ytterligere informasjon som kan v\xe6re lurt \xe5 dele med megler?"}),(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm mb-4",children:"Beskriv gjerne antatt standard; vannb\xe5ren varme, parkett etc. og eventuelt annet som du mener er av meglers interesse."}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:c.control,name:"Kommentar",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Kommentar til megler:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv her...",...t,className:`bg-white rounded-[8px] border text-black\n                                            ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})})]})]}):(0,V.jsx)("p",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-medium",children:"Du kan bestille kostnadsfri forh\xe5ndstakst sendere ved \xe5 g\xe5 inn p\xe5 dette leadet etter at du har sendt inn til banken."})]})]}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center fixed bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)("div",{onClick:()=>l(2),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Neste",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})}),j&&(0,V.jsx)(sA,{onClose:()=>{E(!j)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,V.jsx)("p",{className:"mb-4",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,V.jsx)("div",{onClick:()=>{E(!1),N(null)},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>{if(null!==C){const e=_.filter(((e,t)=>t!==C));c.setValue("documents",e)}E(!1),N(null)}})]})]})})})]});var I})),Uwe=()=>{var e,r;const[n,i]=(0,t.useState)(0),a=[{label:"Kunden",icon:(0,V.jsx)(Cwe,{className:"w-4 h-4 md:w-6 md:h-6"})},{label:"Tomt og husmodell",icon:(0,V.jsx)(Nwe,{className:"w-4 h-4 md:w-6 md:h-6"})},{label:"Prosjektregnskap",icon:(0,V.jsx)(Twe,{className:"w-4 h-4 md:w-6 md:h-6"})},{label:"Forh\xe5ndstakst",icon:(0,V.jsx)(Pwe,{className:"w-4 h-4 md:w-6 md:h-6"})},{label:"Oppsummering",icon:(0,V.jsx)(Pwe,{className:"w-4 h-4 md:w-6 md:h-6"})}],s=Gr().pathname.split("/"),o=s.length>2?s[2]:null,[l,c]=(0,t.useState)(),u=(0,t.useCallback)((async()=>{if(o)try{const e=await b_(o);e&&c(e)}catch(e){console.error("Failed to fetch data:",e)}}),[o]);(0,t.useEffect)((()=>{o&&u()}),[u]);const d=null===l||void 0===l||null===(e=l.plotHusmodell)||void 0===e?void 0:e.plot,h=null===l||void 0===l||null===(r=l.plotHusmodell)||void 0===r?void 0:r.house,p=(0,t.useRef)(null),f=(0,t.useRef)(null),m=(0,t.useRef)(null),g=(0,t.useRef)(null),v=(0,t.useRef)(null);function x(e){return"string"!==typeof e?0:Number(e.replace(/\s/g,""))}const y=x(null===d||void 0===d?void 0:d.tomtekostnader)+x(null===h||void 0===h?void 0:h.byggekostnader);function b(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{children:[0===n&&(0,V.jsx)("div",{className:"px-4 md:px-8 pt-4 pb-8 flex flex-col gap-6 bg-[#F5F3FF]",children:(0,V.jsxs)("div",{children:[(0,V.jsx)("h3",{className:"text-[#111322] font-bold text-lg md:text-xl desktop:text-2xl mb-2",children:"Registrer lead til bank"}),(0,V.jsxs)("p",{className:"text-[#4D4D4D] text-sm",children:["Her registrer du informasjon om kunden. Jo mer informasjon, jo bedre kan banken forberede seg"," ",(0,V.jsx)("br",{className:"hidden lg:block"})," f\xf8r de tar kontakt med kunden."]})]})}),1===n&&(0,V.jsxs)("div",{className:"px-4 md:px-8 pt-4 pb-8 flex flex-col gap-6 bg-[#F5F3FF]",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1",children:[(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(0),children:"Kunderegistrering"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#5D6B98] text-sm",children:"Tomt og husmodell"})]}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h3",{className:"text-[#111322] font-bold text-lg md:text-xl desktop:text-2xl mb-2",children:"Registrer lead til bank"}),(0,V.jsxs)("p",{className:"text-[#4D4D4D] text-sm",children:["Her registrer du informasjon om kunden. Jo mer informasjon, jo bedre kan banken forberede seg"," ",(0,V.jsx)("br",{className:"hidden lg:block"})," f\xf8r de tar kontakt med kunden."]})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-[#5D6B98] mb-2 text-sm",children:"Tilbudspris"}),(0,V.jsxs)("h3",{className:"text-darkBlack font-semibold text-base md:text-lg desktop:text-xl whitespace-nowrap",children:["kr ",y?b(y):0]}),(0,V.jsx)("p",{className:"text-sm text-gray",children:"inkl. tomtepris"})]})]})]}),2===n&&(0,V.jsxs)("div",{className:"px-4 md:px-8 pt-4 pb-8 flex flex-col gap-6 bg-[#F5F3FF]",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1",children:[(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(0),children:"Kunderegistrering"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(1),children:"Tomt og husmodell"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#5D6B98] text-sm",children:"Prosjektregnskap"})]}),(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h3",{className:"text-[#111322] font-bold text-lg md:text-xl desktop:text-2xl mb-2",children:"Registrer lead til bank"}),(0,V.jsxs)("p",{className:"text-[#4D4D4D] text-sm",children:["Her registrer du informasjon om kunden. Jo mer informasjon, jo bedre kan banken forberede seg"," ",(0,V.jsx)("br",{className:"hidden lg:block"})," f\xf8r de tar kontakt med kunden."]})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-[#5D6B98] mb-2 text-sm",children:"Tilbudspris"}),(0,V.jsxs)("h3",{className:"text-darkBlack font-semibold text-base md:text-lg desktop:text-xl whitespace-nowrap",children:["kr ",y?b(y):0]}),(0,V.jsx)("p",{className:"text-sm text-gray",children:"inkl. tomtepris"})]})]})]}),3===n&&(0,V.jsxs)("div",{className:"px-4 md:px-8 pt-4 pb-8 flex flex-col gap-6 bg-[#F5F3FF]",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1",children:[(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(0),children:"Kunderegistrering"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(1),children:"Tomt og husmodell"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(2),children:"Prosjektregnskap"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#5D6B98] text-sm",children:"Forh\xe5ndstakst"})]}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h3",{className:"text-[#111322] font-bold text-lg md:text-xl desktop:text-2xl mb-2",children:"Registrer lead til bank"}),(0,V.jsxs)("p",{className:"text-[#4D4D4D] text-sm",children:["Her registrer du informasjon om kunden. Jo mer informasjon, jo bedre kan banken forberede seg"," ",(0,V.jsx)("br",{className:"hidden lg:block"})," f\xf8r de tar kontakt med kunden."]})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-[#5D6B98] mb-2 text-sm",children:"Tilbudspris"}),(0,V.jsxs)("h3",{className:"text-darkBlack font-semibold text-base md:text-lg desktop:text-xl whitespace-nowrap",children:["kr ",y?b(y):0]}),(0,V.jsx)("p",{className:"text-sm text-gray",children:"inkl. tomtepris"})]})]})]}),4===n&&(0,V.jsxs)("div",{className:"px-4 md:px-8 pt-4 pb-8 flex flex-col gap-6 bg-[#F5F3FF]",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1",children:[(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(0),children:"Kunderegistrering"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(1),children:"Tomt og husmodell"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(2),children:"Prosjektregnskap"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>i(3),children:"Forh\xe5ndstakst"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#5D6B98] text-sm",children:"Oppsummering"})]}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h3",{className:"text-[#111322] font-bold text-lg md:text-xl desktop:text-2xl mb-2",children:"Registrer lead til bank"}),(0,V.jsxs)("p",{className:"text-[#4D4D4D] text-sm",children:["Her registrer du informasjon om kunden. Jo mer informasjon, jo bedre kan banken forberede seg"," ",(0,V.jsx)("br",{className:"hidden lg:block"})," f\xf8r de tar kontakt med kunden."]})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-[#5D6B98] mb-2 text-sm",children:"Tilbudspris"}),(0,V.jsxs)("h3",{className:"text-darkBlack font-semibold text-base md:text-lg desktop:text-xl whitespace-nowrap",children:["kr ",y?b(y):0]}),(0,V.jsx)("p",{className:"text-sm text-gray",children:"inkl. tomtepris"})]})]})]}),(0,V.jsxs)("div",{className:"relative",children:[(0,V.jsx)("div",{className:"flex items-center justify-between gap-2 mb-6 px-4 py-1 md:px-8 lg:px-10 mt-4 overflow-x-auto",children:(0,V.jsx)("div",{className:"flex gap-2 md:gap-3 lg:gap-4 rounded-lg bg-white p-1 md:p-1.2",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:a.map(((e,t)=>(0,V.jsxs)("button",{className:`text-sm md:text-base whitespace-nowrap ${o?"cursor-pointer":"cursor-auto"} flex items-center gap-2 text-darkBlack py-2 px-2 md:px-3 rounded-lg ${n===t?"font-semibold bg-[#7839EE] text-white":"text-[#4D4D4D]"}`,onClick:()=>{o&&(async e=>{if(0===n&&p.current&&!await p.current.validateForm())return;if(1===n&&f.current&&!await f.current.validateForm())return;if(2===n&&m.current&&!await m.current.validateForm())return;if(3===n&&g.current&&!await g.current.validateForm())return;if(4===n&&v.current&&!await v.current.validateForm())return;i(e)})(t)},children:[e.icon,e.label]},t)))})}),0===n&&(0,V.jsx)(Ewe,{ref:p,setActiveTab:i}),1===n&&(0,V.jsx)(Iwe,{ref:f,setActiveTab:i}),2===n&&(0,V.jsx)(Rwe,{ref:m,setActiveTab:i,getData:u}),3===n&&(0,V.jsx)(zwe,{setActiveTab:i,ref:g}),4===n&&(0,V.jsx)(Lwe,{setActiveTab:i})]})]})})},Vwe=()=>{var e;const[r,n]=(0,t.useState)(1),[i,a]=(0,t.useState)([]),s=Kr(),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!0),v=Gr().pathname,[x,y]=(0,t.useState)(null),b=localStorage.getItem("Iplot_admin");(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){const t=null===e||void 0===e?void 0:e.supplier;y(t)}})()}),[]);const w=(0,t.useMemo)((()=>i.filter((e=>{const t=new Date(e.createdAt);return d&&p?t>=d&&t<=p:d&&!p?t>=d:!(!d&&p)||t<=p}))),[i,d,p]),_=async()=>{g(!0);try{let e;e="/active-agent-leads"===v?Zm(lm(g_,"bank_leads"),Xm("status","==","Approved")):Zm(lm(g_,"bank_leads"));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),r={januar:"January",februar:"February",mars:"March",april:"April",mai:"May",juni:"June",juli:"July",august:"August",september:"September",oktober:"October",november:"November",desember:"December"},n=e=>{const t=e.toLowerCase().split(" ");if(3!==t.length)return new Date(e);const[n,i,a]=t,s=r[i]||i;return new Date(`${n} ${s} ${a}`)},i=t.sort(((e,t)=>{const r=n(e.updatedAt);return n(t.updatedAt).getTime()-r.getTime()}));a(i)}catch(e){console.error("Error fetching bank lead data:",e)}finally{g(!1)}};(0,t.useEffect)((()=>{_()}),[x,v]);const k=(0,t.useMemo)((()=>[{accessorKey:"id",header:"Id",cell:e=>{var t,r,n;let{row:i}=e;return(0,V.jsxs)(ti,{to:`/agent-leads-detail/${null===(t=i.original)||void 0===t?void 0:t.id}`,className:"text-sm text-darkBlack",children:["#",null===(r=i.original)||void 0===r||null===(n=r.id)||void 0===n?void 0:n.substring(0,4),"..."]})}},{accessorKey:"name",header:"Navn",cell:e=>{var t,r,n,i,a,s;let{row:o}=e;return(0,V.jsxs)("div",{className:"flex items-center text-sm text-darkBlack w-max",children:[null===(t=o.original)||void 0===t||null===(r=t.Kunden)||void 0===r||null===(n=r.Kundeinformasjon[0])||void 0===n?void 0:n.f_name," ",null===(i=o.original)||void 0===i||null===(a=i.Kunden)||void 0===a||null===(s=a.Kundeinformasjon[0])||void 0===s?void 0:s.l_name]})}},{accessorKey:"Anleggsadresse",header:"Anleggsadresse",cell:e=>{var t,r,n;let{row:i}=e;return(0,V.jsx)("div",{className:"flex items-center text-sm text-darkBlack w-max",children:null===(t=i.original)||void 0===t||null===(r=t.plotHusmodell)||void 0===r||null===(n=r.plot)||void 0===n?void 0:n.address})}},{accessorKey:"Forhandler",header:"Forhandler",cell:e=>{let{row:t}=e;return(0,V.jsx)("div",{className:"flex items-center text-sm text-darkBlack w-max",children:"BoligPartner"})}},{accessorKey:"Konsulent",header:"Konsulent",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("div",{className:"flex items-center text-sm text-darkBlack w-max",children:null===(t=n.original)||void 0===t||null===(r=t.createDataBy)||void 0===r?void 0:r.name})}},{accessorKey:"Lead sendt videre",header:"Lead sendt videre",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black w-max",children:t.original.createdAt})}},{accessorKey:"Tilbudspris",header:"Tilbudspris",cell:e=>{var t,r,n,i;let{row:a}=e;const s=null===(t=a.original)||void 0===t||null===(r=t.plotHusmodell)||void 0===r?void 0:r.plot,o=null===(n=a.original)||void 0===n||null===(i=n.plotHusmodell)||void 0===i?void 0:i.house;function l(e){return"string"!==typeof e?0:Number(e.replace(/\s/g,""))}const c=l(null===s||void 0===s?void 0:s.tomtekostnader)+l(null===o||void 0===o?void 0:o.byggekostnader);return(0,V.jsxs)("p",{className:"text-sm font-semibold text-black w-max",children:["kr ",(u=c,u.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))]});var u}},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e;return(0,V.jsx)(V.Fragment,{children:"Sent"===t.original.status?(0,V.jsx)("p",{className:"text-xs text-[#A27200] w-max bg-[#FFF6E0] py-0.5 px-2 rounded-[16px]",children:t.original.status}):"Rejected"===t.original.status?(0,V.jsx)("p",{className:"text-xs text-[#A20000] w-max bg-[#FFE0E0] py-0.5 px-2 rounded-[16px]",children:t.original.status}):"Approved"===t.original.status?(0,V.jsx)("p",{className:"text-xs text-[#00857A] bg-[#E0FFF5] w-max py-0.5 px-2 rounded-[16px]",children:t.original.status}):"In Process"===t.original.status&&(0,V.jsx)("p",{className:"text-xs text-[#C84D00] bg-[#FFEAE0] w-max py-0.5 px-2 rounded-[16px]",children:t.original.status})})}},{id:"action",header:"Action",cell:e=>{let{row:t}=e;return(0,V.jsx)(V.Fragment,{children:"/active-agent-leads"===v?(0,V.jsx)(qT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>{var e;return s(`/agent-leads-detail/${null===(e=t.original)||void 0===e?void 0:e.id}?step=2`)}}):(0,V.jsxs)("div",{className:"flex items-center gap-3",children:[(0,V.jsx)(GT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>s(`/edit-agent-leads/${t.original.id}`)}),(0,V.jsx)(WT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>{return e=t.original.id,u(e),void l(!0);var e}})]})})}}].filter(Boolean)),[b,s,x]),S=(0,t.useMemo)((()=>{const e=10*(r-1);return w.slice(e,e+10)}),[w,r]),j=aA({data:S,columns:k,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:r-1,pageSize:10}},pageCount:Math.ceil(w.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:r-1,pageSize:10});n(t.pageIndex+1)}}});return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between bg-lightPurple rounded-[12px] py-3 px-4",children:[(0,V.jsx)("div",{className:"hidden sm:block"}),(0,V.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center w-full sm:w-auto",children:(0,V.jsx)(uA,{startDate:d,endDate:p,onDateChange:(e,t)=>{h(e),f(t)},className:"w-full"})})]}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:j.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:m?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:k.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===w.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:k.length,className:"h-24 text-center",children:"No results."})}):(null===(e=j.getRowModel().rows)||void 0===e?void 0:e.length)&&j.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black text-sm",onClick:()=>j.previousPage(),disabled:!j.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:r})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:j.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>j.nextPage(),disabled:!j.getCanNextPage(),children:"Neste"})]})]}),o&&(0,V.jsx)(sA,{onClose:()=>{l(!o)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>l(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:()=>(async e=>{try{await gg(cm(g_,"bank_leads",e)),_(),l(!1),He.success("Slettet",{position:"top-right"})}catch(t){console.error("Error deleting document:",t)}})(c),children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})})]})},Hwe=()=>(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"S\xf8knader sendt til bank"}),(0,V.jsx)("p",{className:"text-gray text-sm md:text-base",children:"Liste over alle dine s\xf8knader om bankl\xe5n"})]}),(0,V.jsx)("div",{className:"flex gap-3",children:(0,V.jsx)(HT,{text:"Legg til",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-3 md:px-4 py-[10px] flex items-center gap-2",icon:(0,V.jsx)(cA,{className:"text-white w-5 h-5"}),path:"/add-agent-leads"})})]}),(0,V.jsx)(Vwe,{})]})}),Gwe=F_("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]),Wwe=F_("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),qwe=e=>{var r,n,i,a,s,o,l,c,u,d,h,p,f,m,g,v;let{bankData:x}=e;const[y,b]=(0,t.useState)(null);(0,t.useEffect)((()=>{var e,t;null!==x&&void 0!==x&&null!==(e=x.plotHusmodell)&&void 0!==e&&null!==(t=e.house)&&void 0!==t&&t.housemodell&&(async()=>{try{var e,t;const r=cm(g_,"house_model",String(null===x||void 0===x||null===(e=x.plotHusmodell)||void 0===e||null===(t=e.house)||void 0===t?void 0:t.housemodell)),n=await dg(r);n.exists()?b(n.data()):console.error("No document found for husmodell ID.")}catch(r){console.error("Error fetching data:",r)}})()}),[x]);const w=null===x||void 0===x||null===(r=x.plotHusmodell)||void 0===r?void 0:r.plot,_=null===x||void 0===x||null===(n=x.plotHusmodell)||void 0===n?void 0:n.house;function k(e){return"string"!==typeof e?0:Number(e.replace(/\s/g,""))}const S=k(null===w||void 0===w?void 0:w.tomtekostnader)+k(null===_||void 0===_?void 0:_.byggekostnader);const j=null===x||void 0===x||null===(i=x.ProjectAccount)||void 0===i?void 0:i.husmodellData,E=null!==(a=null===j||void 0===j?void 0:j.Byggekostnader)&&void 0!==a?a:[],C=null!==(s=null===j||void 0===j?void 0:j.Tomtekost)&&void 0!==s?s:[],N=e=>e?parseFloat(String(e).replace(/\s/g,"").replace(/\./g,"").replace(",",".")):0,T=[...E].reduce(((e,t,r)=>{const n=(E.length,t.pris);return e+N(n)}),0),P=T.toLocaleString("nb-NO"),A=[...C].reduce(((e,t,r)=>{const n=(C.length,t.pris);return e+N(n)}),0),M=A.toLocaleString("nb-NO");return(0,V.jsxs)("div",{className:"mb-28 mx-10",children:[(0,V.jsxs)("div",{className:"rounded-lg mb-6",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsx)("div",{className:"py-4 px-5 flex items-center gap-3 border-b border-[#E8E8E8]",children:(0,V.jsx)("span",{className:"text-sm md:text-base desktop:text-lg font-semibold",children:"Oppsummering"})}),(0,V.jsxs)("div",{className:"p-5",children:[(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om kunden"}),(0,V.jsx)("div",{className:"py-5 grid grid-cols-2 gap-6",children:x&&(null===x||void 0===x||null===(o=x.Kunden)||void 0===o?void 0:o.Kundeinformasjon.length)&&(null===x||void 0===x||null===(l=x.Kunden)||void 0===l?void 0:l.Kundeinformasjon.map(((e,t)=>(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Type"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.Kundetype})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Navn:"}),(0,V.jsxs)("div",{className:"w-[300px] text-darkBlack",children:[null===e||void 0===e?void 0:e.f_name," ",null===e||void 0===e?void 0:e.l_name]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.Adresse})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Mobil:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.mobileNummer})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"E-post:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.EPost})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"F\xf8dselsdato:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.dato})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Personnummer:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.Personnummer})]})]},t))))}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om tomten"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===w||void 0===w?void 0:w.address})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kunden eier tomten allerede:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null!==w&&void 0!==w&&w.alreadyHavePlot?null===w||void 0===w?void 0:w.alreadyHavePlot:"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale tomtekostnader:"}),(0,V.jsxs)("div",{className:"text-darkBlack",children:["kr ",null===w||void 0===w?void 0:w.tomtekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===w||void 0===w?void 0:w.Kommentar})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om husmodellen"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Husmodell"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===y||void 0===y||null===(c=y.Husdetaljer)||void 0===c?void 0:c.husmodell_name})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale byggekostnader:"}),(0,V.jsxs)("div",{className:"text-darkBlack",children:["kr ",null===_||void 0===_?void 0:_.byggekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center mb-3",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===_||void 0===_?void 0:_.Kommentar})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om \xf8konomisk plan"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Lastet opp"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Last opp en \xf8konomisk plan"===(null===x||void 0===x||null===(u=x.ProjectAccount)||void 0===u?void 0:u.\u00d8konomisk)?"Ja":"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Operettet"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Opprett en \xf8konomisk plan"===(null===x||void 0===x||null===(d=x.ProjectAccount)||void 0===d?void 0:d.\u00d8konomisk)?"Ja":"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center mb-3",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Ettersendes"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Ettersend en \xf8konomisk plan"===(null===x||void 0===x||null===(h=x.ProjectAccount)||void 0===h?void 0:h.\u00d8konomisk)?"Ja":"Nei"})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Forh\xe5ndstakst"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsx)("div",{className:"flex flex-col gap-2",children:(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"\xd8nskes forh\xe5ndstakst?"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Ja, jeg \xf8nsker forh\xe5ndstakst"===(null===x||void 0===x||null===(p=x.Forhandstakst)||void 0===p?void 0:p.advance_quote)?"Ja (lead sendes til megler n\xe5r du sendes inn banktipset)":null===x||void 0===x||null===(f=x.Forhandstakst)||void 0===f?void 0:f.advance_quote})]})})}),(0,V.jsxs)("div",{className:"bg-[#F9F9FB] rounded-lg py-3 px-4 flex flex-col gap-3",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum tomtekostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===w||void 0===w?void 0:w.tomtekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversendes megler)"})]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum byggkostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===_||void 0===_?void 0:_.byggekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversende banken)"})]})]}),(0,V.jsx)("div",{className:"border-t border-[#EAECF0] w-full"}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] font-medium text-xl",children:"Totale kostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-bold text-xl",children:["kr ",S?(I=S,I.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")):0]})]})]})]})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("h4",{className:"text-darkBlack mb-5 text-sm md:text-base desktop:text-lg font-semibold",children:"\xd8konomisk plan"}),(0,V.jsxs)("div",{className:"flex gap-6",children:[(0,V.jsxs)("div",{className:"w-1/2 p-4 border border-gray2 rounded-lg h-max",style:{boxShadow:"0px 4px 6px -2px #10182808, 0px 12px 16px -4px #10182814"},children:[(0,V.jsx)("div",{className:"text-center p-4 text-[#101828] font-medium text-sm md:text-base desktop:text-lg bg-[#F9F9FB] mb-5 relative",children:"Byggekostnader"}),(0,V.jsxs)("div",{className:"flex flex-col gap-5",children:[(null===j||void 0===j||null===(m=j.Byggekostnader)||void 0===m?void 0:m.length)>0&&(0,V.jsx)("div",{className:"flex flex-col gap-5",children:null===j||void 0===j||null===(g=j.Byggekostnader)||void 0===g?void 0:g.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-2",children:(0,V.jsx)("p",{className:"text-gray text-sm font-medium",children:null===e||void 0===e?void 0:e.Headline})}),(0,V.jsx)("h4",{className:"text-black font-medium text-base",children:null!==e&&void 0!==e&&e.pris?`kr ${e.pris}`:"inkl. i tilbud"})]},t)))}),(0,V.jsx)("div",{className:"border-t border-gray2"}),(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-2",children:(0,V.jsx)("p",{className:"text-gray text-sm md:text-base desktop:text-lg font-bold",children:"Sum byggkostnader"})}),(0,V.jsxs)("h4",{className:"text-black font-bold text-base",children:["kr ",P]})]})]})]}),(0,V.jsxs)("div",{className:"w-1/2 p-4 border border-gray2 rounded-lg h-max",style:{boxShadow:"0px 4px 6px -2px #10182808, 0px 12px 16px -4px #10182814"},children:[(0,V.jsx)("div",{className:"text-center p-4 text-[#101828] font-medium text-sm md:text-base desktop:text-lg bg-[#F9F9FB] mb-5 relative",children:"Tomkostnader"}),(0,V.jsxs)("div",{className:"flex flex-col gap-5",children:[(null===j||void 0===j?void 0:j.Tomtekost.length)>0&&(null===j||void 0===j||null===(v=j.Tomtekost)||void 0===v?void 0:v.map(((e,t)=>(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-2",children:(0,V.jsx)("p",{className:"text-gray text-sm font-medium",children:null===e||void 0===e?void 0:e.Headline})}),(0,V.jsx)("h4",{className:"text-black font-medium text-base",children:null!==e&&void 0!==e&&e.pris?`kr ${e.pris}`:"inkl. i tilbud"})]},t)))),(0,V.jsx)("div",{className:"border-t border-gray2"}),(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,V.jsx)("div",{className:"flex items-center gap-2",children:(0,V.jsx)("p",{className:"text-gray text-sm md:text-base desktop:text-lg font-bold",children:"Sum tomtekostnader"})}),(0,V.jsxs)("h4",{className:"text-black font-bold text-base",children:["kr ",M]})]})]})]})]})]})]});var I},Kwe=kQ.object({documents:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).optional(),advance_quote:kQ.string({required_error:"P\xe5krevd"}).min(1,"P\xe5krevd"),Kommentar:kQ.string().optional()}).superRefine(((e,t)=>{"Nei, jeg \xf8nsker ikke forh\xe5ndstakst"!==e.advance_quote&&(!e.Kommentar||e.Kommentar.trim().length<2)&&t.addIssue({path:["Kommentar"],code:kQ.ZodIssueCode.custom,message:"Kommentar til megler m\xe5 best\xe5 av minst 2 tegn."})})),Zwe=e=>{var r,n,i,a,s;let{setActiveTab:o,bankData:l,getData:c}=e;const u=AG({resolver:FG(Kwe),defaultValues:{advance_quote:"Ja, jeg \xf8nsker forh\xe5ndstakst"}}),d=Gr().pathname.split("/"),h=d.length>2?d[2]:null;(0,t.useEffect)((()=>{if(!h)return;(async()=>{const e=await b_(h);e&&e.Forhandstakst&&Object.entries(e.Forhandstakst).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&u.setValue(t,r)}))})()}),[h]);const[p,f]=(0,t.useState)(null);(0,t.useEffect)((()=>{var e,t;null!==l&&void 0!==l&&null!==(e=l.plotHusmodell)&&void 0!==e&&null!==(t=e.house)&&void 0!==t&&t.housemodell&&(async()=>{try{var e,t;const r=cm(g_,"house_model",String(null===l||void 0===l||null===(e=l.plotHusmodell)||void 0===e||null===(t=e.house)||void 0===t?void 0:t.housemodell)),n=await dg(r);n.exists()?f(n.data()):console.error("No document found for husmodell ID.")}catch(r){console.error("Error fetching data:",r)}})()}),[l]);const m=null===l||void 0===l||null===(r=l.plotHusmodell)||void 0===r?void 0:r.plot,g=null===l||void 0===l||null===(n=l.plotHusmodell)||void 0===n?void 0:n.house,v=t.useRef(null),x=()=>{var e;null===(e=v.current)||void 0===e||e.click()},y=e=>{e.preventDefault()},b=u.watch("documents"),w=async(e,t)=>{if(!e.length)return;let r=[...b||[]];const n=Array.from(e).map((async e=>{if(e.size>5242880)return He.error("Image size must be less than 5MB.",{position:"top-right"}),null;const t=`${Date.now()}_${e.name}`,r=h_(v_,`documents/${t}`);try{const t=await c_(r,e);return await d_(t.ref)}catch(n){return console.error("Error uploading file:",n),null}})),i=(await Promise.all(n)).filter(Boolean);i.length&&(r=[...r,...i],u.setValue(t,r),u.clearErrors(t))},_=async e=>{e.preventDefault(),e.dataTransfer.files&&await w(e.dataTransfer.files,"documents")},[k,S]=(0,t.useState)(!1),[j,E]=(0,t.useState)(null),C=async e=>{e.target.files&&await w(e.target.files,"documents")},N=u.watch("advance_quote");function T(e){return"string"!==typeof e?0:Number(e.replace(/\s/g,""))}const P=T(null===m||void 0===m?void 0:m.tomtekostnader)+T(null===g||void 0===g?void 0:g.byggekostnader);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(tW,{...u,children:(0,V.jsxs)("form",{onSubmit:u.handleSubmit((async e=>{const t={...e};void 0!==e.documents?t.documents=e.documents:delete t.documents,void 0!==e.Kommentar?t.Kommentar=e.Kommentar:delete t.Kommentar;try{const e=cm(g_,"bank_leads",String(h)),r={...t,id:h},n=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");await mg(e,{Forhandstakst:r,updatedAt:n(new Date)}),He.success("Lagret",{position:"top-right"}),o(2),c()}catch(r){console.error("Firestore operation failed:",r),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsxs)("div",{className:"mx-10 rounded-lg mb-28",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsxs)("div",{style:{background:`url(${Fwe})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},className:"px-5 py-7 flex gap-[40px] items-center",children:[(0,V.jsx)("img",{src:$we,alt:"opp"}),(0,V.jsxs)("p",{className:"text-white text-xl",children:["\xd8nsker du en kostnadsfri forh\xe5ndstakst fra"," ",(0,V.jsx)("span",{className:"font-bold",children:"Eie Eiendomsmegling"}),"?"]})]}),(0,V.jsxs)("div",{className:"p-5",children:[(0,V.jsx)("div",{className:"pt-8 text-xl text-darkBlack font-semibold mb-5",children:"\xd8nsker du \xe5 innhente en kostnadsfri forh\xe5ndstakst fra Eie Eiendomsmegling?"}),(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm mb-5",children:"Med en forh\xe5ndstakst fra Eie Eiendomsmegling \xf8ker sannsynligheten for at kunden f\xe5r byggel\xe5nsfinansiering."}),(0,V.jsx)("div",{className:"mb-5",children:(0,V.jsx)(nW,{control:u.control,name:"advance_quote",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"flex items-center gap-5",children:[(0,V.jsxs)("div",{className:"relative flex items-center gap-2 cursor-pointer",onClick:()=>u.setValue("advance_quote","Ja, jeg \xf8nsker forh\xe5ndstakst"),children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] border text-black\n          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4 accent-primary`,type:"radio",value:"Ja, jeg \xf8nsker forh\xe5ndstakst",onChange:e=>{u.setValue("advance_quote",e.target.value)},checked:"Ja, jeg \xf8nsker forh\xe5ndstakst"===t.value}),(0,V.jsx)("p",{className:""+("Ja, jeg \xf8nsker forh\xe5ndstakst"===t.value?"text-darkBlack":"text-[#5D6B98]"),children:"Ja, jeg \xf8nsker forh\xe5ndstakst"})]}),(0,V.jsxs)("div",{className:"relative flex items-center gap-2 cursor-pointer",onClick:()=>u.setValue("advance_quote","Nei, jeg \xf8nsker ikke forh\xe5ndstakst"),children:[(0,V.jsx)("input",{className:`bg-white rounded-[8px] border text-black\n          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} h-4 w-4 accent-primary`,type:"radio",value:"Nei, jeg \xf8nsker ikke forh\xe5ndstakst",onChange:e=>{u.setValue("advance_quote",e.target.value)},checked:"Nei, jeg \xf8nsker ikke forh\xe5ndstakst"===t.value}),(0,V.jsx)("p",{className:""+("Nei, jeg \xf8nsker ikke forh\xe5ndstakst"===t.value?"text-darkBlack":"text-[#5D6B98]"),children:"Nei, jeg \xf8nsker ikke forh\xe5ndstakst"})]})]})}),(0,V.jsx)(cW,{})]})}})}),"Ja, jeg \xf8nsker forh\xe5ndstakst"===N?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg font-medium text-darkBlack",children:"Informasjon om kunden"}),(0,V.jsx)("div",{className:"py-5 grid grid-cols-2 gap-6",children:l&&(null===l||void 0===l||null===(i=l.Kunden)||void 0===i?void 0:i.Kundeinformasjon.length)&&(null===l||void 0===l||null===(a=l.Kunden)||void 0===a?void 0:a.Kundeinformasjon.map(((e,t)=>(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Type"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.Kundetype})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Navn:"}),(0,V.jsxs)("div",{className:"w-[300px] text-[#000000] font-semibold",children:[null===e||void 0===e?void 0:e.f_name," ",null===e||void 0===e?void 0:e.l_name]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.Adresse})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Mobil:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.mobileNummer})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"E-post:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.EPost})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"F\xf8dselsdato:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.dato})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[150px] text-[#5D6B98]",children:"Personnummer:"}),(0,V.jsx)("div",{className:"w-[300px] text-[#000000] font-semibold",children:null===e||void 0===e?void 0:e.Personnummer})]})]},t))))}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg font-medium text-darkBlack pt-5",children:"Informasjon om tomten"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null===m||void 0===m?void 0:m.address})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kunden eier tomten allerede:"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null!==m&&void 0!==m&&m.alreadyHavePlot?null===m||void 0===m?void 0:m.alreadyHavePlot:"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale tomtekostnader:"}),(0,V.jsxs)("div",{className:"w-full text-[#000000] font-semibold",children:["kr ",null===m||void 0===m?void 0:m.tomtekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null===m||void 0===m?void 0:m.Kommentar})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg font-medium text-darkBlack pt-5",children:"Informasjon om husmodellen"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Husmodell"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null===p||void 0===p||null===(s=p.Husdetaljer)||void 0===s?void 0:s.husmodell_name})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale byggekostnader:"}),(0,V.jsxs)("div",{className:"w-full text-[#000000] font-semibold",children:["kr ",null===g||void 0===g?void 0:g.byggekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center mb-3",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"w-full text-[#000000] font-semibold",children:null===g||void 0===g?void 0:g.Kommentar})]}),(0,V.jsxs)("div",{className:"bg-[#F9F9FB] rounded-lg py-3 px-4 flex flex-col gap-3",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum tomtekostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===m||void 0===m?void 0:m.tomtekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversendes megler)"})]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum byggkostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===g||void 0===g?void 0:g.byggekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversende banken)"})]})]}),(0,V.jsx)("div",{className:"border-t border-[#EAECF0] w-full"}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] font-medium text-xl",children:"Totale kostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-bold text-xl",children:["kr ",(A=P,A.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))]})]})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsxs)("div",{className:"py-5",children:[(0,V.jsx)("h4",{className:"text-darkBlack font-semibold text-xl mb-5",children:"Last opp informasjon til megler"}),(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm mb-5",children:"Jo bedre dokumentasjon du deler med megler, jo bedre grunnlag har megler til \xe5 sette en god forh\xe5ndstakst. Last gjerne opp byggetegninger, pristilbud, link til Finn-annonse, plantegninger med mer."}),(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,V.jsx)(nW,{control:u.control,name:"documents",render:()=>(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full p-3 rounded-lg",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 border-dashed laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:y,onClick:x,onDrop:_,children:[(0,V.jsx)("img",{src:Owe,alt:"upload"}),(0,V.jsxs)("div",{className:"flex items-center gap-3",children:[(0,V.jsx)("span",{className:"text-[#7839EE] border-2 border-[#7839EE] rounded-[40px] py-2 px-4 font-medium whitespace-nowrap",children:"Last opp"}),(0,V.jsx)("p",{className:"text-[#111322] text-sm text-center truncate w-full",children:"Slipp fil for \xe5 laste opp her"})]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"Filformater: kun PDF, max 5 MB"}),(0,V.jsx)("input",{type:"file",ref:v,className:"hidden",accept:".pdf",onChange:C,name:"documents",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm font-medium",children:"Dokumenter"}),b&&b.length>0?(0,V.jsx)("div",{className:"flex flex-col items-center gap-3",children:null===b||void 0===b?void 0:b.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsx)("div",{children:(0,V.jsx)("div",{className:"bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer w-8 h-8",onClick:()=>(e=>{E(e),S(!0)})(t),children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})})]},t)))}):(0,V.jsx)("p",{className:"text-gray",children:"No documents found!"})]})]})]}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsxs)("div",{className:"pt-5",children:[(0,V.jsx)("h4",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-medium mb-4",children:"Har du ytterligere informasjon som kan v\xe6re lurt \xe5 dele med megler?"}),(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm mb-4",children:"Beskriv gjerne antatt standard; vannb\xe5ren varme, parkett etc. og eventuelt annet som du mener er av meglers interesse."}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:u.control,name:"Kommentar",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Kommentar til megler:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv her...",...t,className:`bg-white rounded-[8px] border text-black\n                                            ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})})]})]}):(0,V.jsx)("p",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-medium",children:"Du kan bestille kostnadsfri forh\xe5ndstakst sendere ved \xe5 g\xe5 inn p\xe5 dette leadet etter at du har sendt inn til banken."})]})]}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center fixed bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)("div",{onClick:()=>o(2),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Neste",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})}),k&&(0,V.jsx)(sA,{onClose:()=>{S(!k)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,V.jsx)("p",{className:"mb-4",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,V.jsx)("div",{onClick:()=>{S(!1),E(null)},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>{if(null!==j){const e=b.filter(((e,t)=>t!==j));u.setValue("documents",e)}S(!1),E(null)}})]})]})})})]});var A};const Ywe=r.p+"static/media/Tick.cf96463d775bc3aaab509a6df4b7855f.svg",Xwe=e=>{let{steps:r,currIndex:n,Style:i}=e;const a=(0,t.useRef)([]);return(0,t.useEffect)((()=>{const e=a.current[n];e&&e.scrollIntoView({behavior:"smooth",inline:"start"})}),[n]),(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("div",{className:"py-3",children:(0,V.jsx)("div",{className:"stepper_main overFlowScrollHidden",children:(0,V.jsxs)("div",{className:"stepper-wrapper gap-3 big:gap-5 sBig:gap-[28px]",children:[(0,V.jsx)("div",{className:"progress"}),r.map(((e,t)=>{var s;let o="";if(null!==e&&void 0!==e&&null!==(s=e.comment)&&void 0!==s&&s.full_fort_date){const t=new Date(e.date),r=new Date(e.comment.full_fort_date),n=SS(t,Number(e.day)||0);if(FS(n)&&FS(r)){const e=US(r,n);o=(0,V.jsxs)("span",{style:{color:e<0?"#00857A":"#A20000",fontWeight:"600"},children:["(",e>=0?"+":"",e," dager)"]})}}return(0,V.jsxs)("div",{ref:e=>a.current[t]=e,className:"screen-indicator-span cursor-pointer "+(t<n?"completed":t===n?"current":""),style:{color:t===n?"#2a343e":""},children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-2",style:{zIndex:2},children:[t<n?(0,V.jsx)("div",{className:"w-6 h-6 bg-[#099250] flex items-center justify-center rounded-full",children:(0,V.jsx)("img",{src:Ywe,alt:"Completed"})}):(0,V.jsx)("span",{className:"screen-index"}),t<r.length-1&&(0,V.jsx)("div",{className:`screen-indicator ${i&&"screen-more"} ${t<n?"completed":t===n?"current":""}`})]}),(0,V.jsxs)("div",{children:[(0,V.jsx)("h5",{className:"text-darkBlack text-sm font-medium mb-1",children:e.name}),(0,V.jsx)("p",{className:"text-darkBlack text-xs",children:e.date&&e.date.split("-").reverse().join(".")}),(0,V.jsx)("p",{className:"text-darkBlack text-xs",children:"Forventet varighet:"}),(0,V.jsxs)("p",{className:"text-darkBlack text-xs",children:[e.day," dager",o]})]})]},t)}))]})})})})})},Qwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAABuCAYAAADbCdolAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABmeSURBVHgB7V1prGRVtV6n5ntv1R36Nk2jLc177495qEQT2xmcggoSEuMYY/yB4cVgYmIUwSjDHw1IjEZ/GAXnIcHERKM+5Ic0MRIeT2VoedAREoSmu+mm73xrrjrv+/bZ+1JdfeqcqjpjVfdKTuoOp6r22fvba6/1rbXXtmyIjCndalVeOHBAGo8/LlmxJAzJii3VXE5Ozc2J5dG0biYjC/j+mWZTuhKd8Klsy5KVclna+M5MT5v4vVn8ft72thS6XemM0Qd8RwfP/C98tq1/D9RetLXT6UgbP//HLbfIv918s/MPttsKZ4xGkYykTNjJW8WieKG+i47KtdtSbLUkjvYQVOVa7YzBZ+d1sllZK5UU2OIfvjOF+iKDNuXx89MA2DO4lBBc3SinorukCmDUXjVorzqujI9inYXm4j1xdBm/owRAl6gt+7RABoNWzedls1BU7U+FaJDl8ONTt94q/7rtNufv0JJix9vG1ADMEgcsm9BeXsIBLmIJmIH2ins45xoNtST2gzqHv22UirKNQU0LyIwmy+Lnp264QZ674w7nHzFrstQAjA3ZgiZoDKG9qElon8U5lBySPAZmFiBTmqBPaKetzcxIG6+ZFGmyHEDG1h7+whfkua9/3fl7jJosFQCj9qJRujWE9spDexFgSQwhQTYDgBWwXJ6xVGLA2rTHALIwjPWwhJosqzXZ4euvfwlkbH8MIEscYJZuRLVQUAPkpb2otebqdcezk/hFGfy45uG90vZyA9k2nmMDV2q0GEVrsh2Q9S6XEYMsBQCzpWVlZIPay4uWQGcUqL2gPZIcOrNUlrlUurj9GWWPlaSaInuMcpom610uIwZZKpbITRjI5LX8GjML7UVJetg6uMi/uXmVluabVsHjtfBMaQKZ0mSwceNcLhMFmKIlMKu2CnnPpZGDyMGk95iW4SKsygC8G1XCv3VIzs7OqNc0LZc2tG+cy2ViAOPSyMdRS6OHSWyIzjkAzPyeBiGochiseRKwA5bKWi4vK9DO/G9ajH6K3avJIl4uEwOYoiVgDDfz3tqL7j+XI3qP8fPQ3qIIWPBxKlzlQl0QgNViCUZ/UWmxVIEsJk2WCMDY2U08CLWXZ7wRV9ZwTykVtp5hpKILdUGht7k2U5JtTqQ02WMSjyaLHWCWnsmb8LQ6mPWesxoPypBQNqaQ0DhiqIsKqQu2s9/oVzfZsgJ+rJYyz5LSr8mOhKzJYgeY4rwwa8h7+Rn21ArUXukakjPFUBfz29uuE4bPzKX+xdlZaeA1dSAjhaE12ZMA2dE773L+EQLIYgUYtRdd/HVoL79mZxImVUcVRV3ATqRn6WaP8Xls/J1pSM0BICNQ7aQuTBDGLmmy/N9/XStHf/Qjp1EBU3xiAxibyRlCu6vpw9hz6aThXEgRLTGMECDUuIOMfhVOgqZ4ESBru4AscScA7ctTkwFsT1xzjRw3miyAWHElHLIz6+j0FysVpZIH3a3cf/x/aWvLmfUyWWI07ho1FQ17l8wFcmOMSJyn7TYmKtbT9KQYpxbaXbzoIvl3jK2FpX1cyUkMolJxdLYBu9tTbeI+Lo1pNuy9xBj9C7DHVjGZ+rNgKXy2OsBHm2z3dlV5l3PoJcMNJi6Ms+IlF0LgPnKAmWD2Goz6Bjo165GLpBh78EpJZUuEJYpewbUIDcWQEe2z/knFfqjlc3IKbP9ytSYi9lgp11FJF+3JWpnALYrcBsvocBATCTNe4BJnZpvU5EkGGEVpANiQKvNCHC+yX7JdW3nTBBmNhrTxZGFIpAAzXqPKkbIsX85rDuDKTejS6CZ8DlItDCdR3OBDTWZA1plCkEUGMLM0rg/hNaqlMaE06KjFhJMqBJlleYAsLyfnZpUDkDaeLIhEBjDORIZHtsB5Zf3CQeS8sJRMw9LoJnwmBuu9QWYrr/OEB082iRIJwEyskdu5LD8WBPfR7sprz2UahT3AZ1Mgw0Ty0mTM6j0JkNXSlks2poQOMBNrZFZn2yfWuOM1TuHS2C87IPNZLhUvBpCR8TexyzRlYYwqoQOMH7gBVV+F7ZX1sbto0FemxGscRtw0WXdALhkjAWT8t3QWhjWhPRQqwBy2Pivr8BqtIfbecWmcVEJ1XDEgm9WabNDmYRPFWAEZu0aKR2QiPczQAMaHV2nC8IT8KAnOTsbszoal0U16NZnhyVw1mThAW58pyUlGQSbQ+A8FYPwQds8qZlp7CEqCQeyKTiI8GwFmhBwhY5JLAFnOZRucEYeQLcoL9DAxOXMTtGSGADDLsbvQAVUftt7k11eYN3WWLY2DROWSEWQI7vPVLQuDkrUdD/NEuSyb2azmGdMPssAAy3Y7ws1kVON+yWlcOlnfYZopiXHEcIGLmHilAak+FCdjVlQpqVWVOGCl3ssMFOzmg1Flr2iX2wuthpKYhAzVJMQEyBd0Cg/DR5R+cyOjfrXVhpl6NiNLtbpKdOymdNEMpMH4QOt4yBb3/vmw9bQxpiWQHZUYrc7YJYFmueT4G3FqYTjJiyxVQHil0QEIDLBm11tFq3widFJlygLZUYlJYWZcdhftMmonD5BRmExwAsHyRgodgMA2mN/6b2twqW1dck6GEUNj0FZdgl2mkgBIyrrcq4x9AK2RL8hJ2GZrukJRWmyzSNN1zJb/mQlPIExKVFlOgIfL5YIHX0YxxCzjv1w266oumJ24pxlZRqsKBWEGVvTOoHPaazwx8KCDxGD4NgDEEqOqTGbfvWpjDdOx8f9GeU7m6g2pcPOM7eTlJaHTItFghu9iXvrZFgqKQnaWTNhjpDLmWXRFvLUZ38TNzVw218FRipUMpRENwJiCg044x3eFK2bfJKkeOgBFTcy6Ac1oM2a0rMIBYJ4Z8/OMtxkX0EIHWFdv9589Z3dFIkab0fygNlvwCTNRm3FpZVbxKQTOGdNkcTyJCWih2mCGTKXXaNztcxKNmLr8qvIQ+rxK2wx8mNoW6MJJmr/V4WVyy1yp3ZJyo6lS1bNitGP4cAsNYMqo5y4aTaaeWxqjFzOJyS+y33kwBePBzVxuxw7uFxMrroPW4EUvn6lDs+2O0mjOf8MDWigA42P0hjnOgSteMf1Nm4wVsJu6uAxLwotlnWkH0QPt1Wi4dwvKgWYNV6DCDjDt5DfemlnEDE1Po57xypBLAYxsQEbQhrCrFwYxLUzfMyujgovHyVRxsTakCdFREWQXFnYSE4xGo43WhH2WA+BKur5GWYI/WyCAKYOTTD0aWep2PTuGAztzxRVSesc7xIYHNErVFoaaujBo288/L90XX5TOM89I59QpaeNnU4pgGLCxDcXLL5fZd70LPV913Qzr+v36vd3NTfW93ZMnpYs2tPnz+rp0dHHirAQTFSK6+mopvfWtI/eRW5sz6oAuUdkuLEjMUgCr990nm/feK7ly+bT7jUZj4ZlNOAMbAChrieyWYM8VWIOV8RCOT+I989TWLXTewrXXytii+B1oIMywFga3/pe/SB2dVb3nHmkePeoLNNWGq66Spc98RsaWnjYQcM3Dh6X+wANS+9OfpIr2cCLstGPE+lqK3vnYx2T+Ix+RqKS4vCybf/yjdDFulsumHEYOSG9Q6zElNKi2D0RT8M1zugOHaYitdziPLRwwdgpmYmHfPjUQe+66S/Y9+qjs/trXxFpcVDPWa+Z3qBlCakN2zx6ZedvbZOmLX5QLAPJX/PWvsnzrrZLbu1e1o8u+yYzWxYH7yEcKmADLXE1ga5mKjAPTtSW4BP6M7ghqPEClKE/J7d4tu264QS58+BGZOXDAGVi2awABGYVwGS++8pWyfNNNsu/QIdl1440KhNQUg9riKhH1kRG2h8vWPDQws2hJiNM5sDXQbCvcHoq8+ElswuJpF+2Xl2GZmnvnO6Ud8UB5tYOAX/7qV2XfQw9J4dWvTq4tA8SYM6rYDIBGwnYRYOMmFJKyBmxhnIE5PQDTx9Rl4Jqf/5vfyOwll0hnjCUqlHZoKb7qVbLvz3+Wyrvf7YDMikp/jicmKkDhIRckyHfBruROJ2bJ5iRhGyx0CTrT9TF1GXhIu3/2M7HAbo98NmKY2oZtASWw9w9/kMp73xuOJgv4GapP+j9SXopzqugA7LNFvM7TEZBgEkuFw6GF503T7Ye6tnK6aRykbE4yc7Onl3IcpBH030rQHmU4AZs//vFobjaXBszi9sbGS23Q38ffs9xUjMCx+LVDf5Z6H0Iz5//619K+9FKpwxHIjuhd9n9me2VFbFIj2dEIBAsTjzTPINDYPa+GMwuqgdIFMMj6t74lK3fcITm400oIMAwsBzX3ildI5ZprFN1hmUM13QZX/30R927/4hdiY0aOMhO38J4Tn/+8ZGFL9b7PUu2YlcLeC6TwlrfI3Ic+pAz73u88QzSYMgDm3l/9Sp573euku7oqmQAgW7nlFtnAxMnt2jXS+whIG+Acti96tdq4kjqAdY8flzY0iPDqETWrHntMtn7/eyljYPeig+mluQ6s/r34mtdIASBpHDs2UidxlrdJZwygNOqPPiYWuKTV226TuSuvlOXbb5f8/v2+WjV/0UWy9JWvyMnPfc73VF8v6Rw5ojSs8BpRxuHngkjqjHyCxhSv672ornP653VogpPXX6/fMBg6XBKyr32tjNwGdaCoDLxyuj0C72vj7rvlWSzH21gChzHiF6+7TkoXXxwoXktt7tU+r0tJjF7txHmR5Js4wNs//am0MZM9BUtCAbxYZG3BlSd3BE139MMflurBg84/BjkWtMcA3vnPftaxd1LmVUYhk0dT6Fz0NpwBhor8JMe6/BKdkDxW9hTc+hOf/KSKVQ6kRjSgKh/4gOSwpNoxapKkZKJ5sA6MZT+xfYLwoQjjd3hpPPusrH7zm763Z+HAlN/zHt+w1jTIZBOtQwyO5VfdOkQhyLZ/8hPpwEnwk9Kb37xzEts0y0QDLDuEm26HQBYOK1wqW889Jw1wXX5SeOMbJbu0NPXJmZMHMJKxeGHGQuntb/e9vXH4sMQmTOPBtfXb3/remgenl3/5y2XaJXU8mJ/YOiWbOV25887zvhcxtfZ9ByVuaTz4oNgw+i0Ppl1RIYhMjLNAkslvi4xcSEZRFWxTpyNxSfoA5vLwds8lYNOX4eYv3nijd5iGH3XypLRO+dtDYYra8AJ+jAmJXqeUMSqQGfMUs/L73y85cGEWTYQhbbgM7m899JBKioxz2UodwGwWYJOePDPWiwfVwGRChmWWvvxlKSFM49zs3blk/UlnBE1lHlUYJ+zyOEIfAGWwzI/+4bYsfvrTIrxGlI0f/EA2z3aAlT/1Kcm/4Q0qI0JxXhik7IUXqjBLlkFmAzwf7UWgbn73u84vMYZGlJBoHSKLg0HwkSUArdHVeweGFVN7N4ikC2BYHksIBvPylUEdrYG3/p3vSO3QIecBY6YCVMuGAULcFMWIthfrjSmHSsaXdAEsG3Ax0+BqPPKIrHzpS7EHdk+TYQCWQpLVtGhrQK7+qDJVKdMcsOZTT8mxK66QDozsjPl7zNLlRBlmsoyRDRGlGDBszswogGVs+1zK9I6gQzbvvluef/3rpX3smJPUl5DQbsz0JiW6CSvfgG6IVXRhYTdRh6biWkfbq/pkEZHgKdOBl8hMEstPn7SefFJWvvENWf/+9x2uh8HmbjIcuaoVAYY+o0tZDpIunBCVuSujCz3UbrvtPOeQwtQlW9cN6RdTa2wDmquuD7IPq/cCA4xlzHtLmAdqGEExRKeRxGzrjbdVsOZVaK42SFUuSlaC4KJwAEuXX+5rXzHFpzvmErly002y8ctfStaHaD6tXQCO/cILZwy4AdcqNFeL3FzICiNw6QB2UZ01wUolVamFVfgMwzxyUwGO5j/+IQ1cKluVwoHCbOVsZ/ZE64EHpPXPfyqAtZ99dqe+/E6ee4LgMpty5973Pt9b+YwdtH8cDdbC+5rHj0sO10jNk9MnoAHXWkTgooTiRbbRSFZzYZUWVncp6CotZl0fpdkb3/uenPz2tyXXp8kss2Xf/C7JZWm6CmOkaEPpkktUqrafNP/+d2mjj8YZAE6+0559FOkD12qE4KKEAjBzKhiFBWi5jtcANIKsCLDl7OEr2liqOrJz+utEiX7Gheuuc90a1n9v7eDBxDwsM/HXIgYXJXQeLKM1TQtA4UWPpAgGmcvnUB2aSarbgwmDz7OXXSaVT3zC997m009L9b77Eqlj3+stNn3AFcYUj+5QeF3kjM0nyE7htTaN2Zs6faiwf7+c//OfO+Efj5x8ysYPfyidzc1EAKbsZoBLeYt+x/9IcIAEL34i/khX5+qIY6tNk/C5uVs7D7vrZfff7+R3eZUr4KZZeHIbd96ZyPLI79zC8l1jqpAXuNDOPP6/lDTRyi8vozPzulFeoYWwKwFGKbbmgey+i3+jtmrrnzOgCZZvvln2w7OlBhNTScf1Q50BXbv9dmmfOBE7wPh9XEm2fc707GoGnyWeiiHYwYFtsIVOVwpoSB08FD3Jpt5uH8RwTByI+sDPnXwuvf2fmzWYYkMidebKK2Xugx+U3J49zj1eHJ4OY5G3YxA+7vQhtopHy/BgBstnWVTg4rmV+LljZZLf2d3VO2rm4THOscoxBkIBDQ+kzpgeEWhhpIgElfLHP67KWFpk47XTIhgcAoz7ACy3kIsPuBi+OvbRj6o0oiBlA0YVtcWPZTERuuolxPtF6Sq0a1d1W2bBZbYkLek6lrNs8Ac2pqKBVs/lZatYcM7VGcH2auqLkbxEiAoWaLvgAnUFFg2u7tqaHL3qKmkdORJr+pDKrmUICODqWN5neqpaHgglzbZAaqvzQMJpY6imAJvU0ZifbbdkD1Tt7u2qOgTe2DR+UkUnMARcg/YwZGqsEgZNYgaSu4zAuh+59DKp/+1vkovZyeG3MTOC4Tw/o56Hls3rbOIw4R/RYViWAho3jBFo58E+4waz/BAdbE6dIE/Dq+1W5z3N0pNpW/3d7+TIm94k9UOPOeCKMdrAPqNBX/OhI1hVmoT4Aosai4R+2kekY2c0Gpu8gKs0pFei6lLRcUDnrFYqyqYbOzQStzAnDUTqcdhxx66+WjpHjyYCLjpbpCT8NBdDe7t2jroOX8PGktHqAI0OwUhvU53T0Wkk7LByGMcyR7RMdaEFmo8+qup2beFiCaokUod6U2+8PECHjhBZ5mFa7OeIXKtYU6YzlbL/Pdrb2fndxDihzRh6Yh3REqsiy3i2gjXmVrFeIU8mABQzOlqHDkntv++R2v88KI2HH97JpN3p2BHBZZX9+8jySByk0O5q+9hdlAV4jOS62hH67bEBjJ1eO3i/cvVl4/Ticu2MpVJ+CgsLsg1j2G0pVNoMnbYGALIaMstvj3MuUgNc1AYYd4t7F4dZtpj6DDDxRI8238MTRx5/XAGLReBseIhM/jMOSbD8J1uq997rhJv42S5tYaXEzhNPuPcRLpoTvnYXjXpMBB4304kQXBTwbuMbB12o1xcOHJAGOjzr11B1TpB7pRv+jZBbw5VB5xRYcqndHvy9DGXAM+WJuiMtmZa1szN81Ie2+l57/x7aEJHSGOJ53BIrCS4CZwUasOOhvXgPK0rv2dpWZMSgyh0cqcJ/Xix7//ehQFo/viVSx7X6H8eQfzwTZz6TlTXOQJ20OGjgMjpbYxWdSfeaXtBQINNtiJtJH1p07bOhnBmXpZdLoxe4VF9jki+p427syLUXJWbHzDrjsvQrF5lct6PCFPO1qrrbK7ZplkxmBmwlxZmlRFQoCJrfL0OCByws1htStOMBl2lbaqSrwbbYBHcGgpYHnHY8iM+MqWYDd5ycWWfSOLMQxCyN7APx4bt4RF9Fk6lxSerGw8lasKTUacv5PN6k0VQHnw/qOqW50LGcvWtYMpX3JGeX1AAur+cmoGizLsKccLzv+CIKqRwLQ9Aq2wzL5eKQSybPRFyFl9mAfZZaOytEUYQqnnXbJ7+LzgPpnbw92KiPSlI92bviHMi0AC22DG3GPH1fu4y7ZKDJlKsu0y/M8fLyiNlfPJN7Dl55EskDqR8DE9ecBbj2AGQkWT3tMv26po3/NKT/RCHGsG94GPbKa0S/zUcYCvKTiZjkZsmkit8NL5NEK4PgA+0yvR9gizUW9P7KadNmZq+Dp/bCROS5kIUElkYjE9XvxrVm/Iy5S+KTps3ZSy1GKsOeIg9TRUV0Uucg7cV+4UGjZUzG+MLsZ8rE9bktjuZaRMftAtDMscCDhCCjPUYaozslIONzVH1qX5CyWMAkVMHvBI2EiexvW+eaMXOWS+Ywxr+iMeBhTjrIjO3lFcw2hv2MSvRM1gKd2L42dlkJnbibKScAWcdHk3FJmXSQ8blrHtkUKkUHwKPtZX5PUiZ+xSDIVPB2c1OKmLV+zP8kg0xpL4Cr7WV74fkrzYba6ZW09qJMhd1LkDFqz9TsGab+TjHIaE8O0kqGsWf0Y9x8ubBlarz3l5j/mpQBsk7G2yabNJAp7ZXLeRcrwbOQwkmCsR8kU0UPmU5dAsgq9cZULZeEFJfHgdqL52hCe80mTEv0y9RFUwyNsYTALrM2ux6ErAGZ4cnSyvirzbNoZ9MnHWeulS7tRZnKcJ0BGXfLzDODYAgKY10f5ZxWkDEkNCiWqOrCwqifa7YSiTd6ydTGg20dKF+EFiPIPDWZ3iK3CU2WRpBxRxbbN6iuBCfQ7E6hv3S1fqoTDvpB5qfJmPbCxL00DREHqKGJ1UHtYv2PWWivNNleRqY+o2VUTUaAbeuNvmmRpseZRmZndl5tqEnfAv//BQNxT9EnBYwAAAAASUVORK5CYII=",Jwe=kQ.object({photo:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).min(1,"Minst ett bilde kreves."),text:kQ.string().min(1,{message:"text m\xe5 best\xe5 av minst 2 tegn."}),full_fort_date:kQ.string().min(1,"Fullf\xf8rt den er p\xe5krevd")}),e_e=e=>{let{SelectIndex:r,setIsModalOpen:n,getData:i}=e;const a=AG({resolver:FG(Jwe)}),s=Gr().pathname.split("/"),o=s.length>2?s[2]:null;(0,t.useEffect)((()=>{(async()=>{if(!o)return;const e=cm(g_,"bank_leads",o),t=await dg(e);if(t.exists()){var n,i;const e=t.data(),s=null===e||void 0===e||null===(n=e.Fremdriftsplan)||void 0===n||null===(i=n[r])||void 0===i?void 0:i.comment;s&&(a.setValue("text",s.text||""),a.setValue("photo",s.photo||[]),a.setValue("full_fort_date",s.full_fort_date||""))}})()}),[o,r]);const l=t.useRef(null),c=a.watch("photo"),u=async(e,t)=>{if(!e.length)return;let r=[...Array.isArray(c)?c:[]];const n=Array.from(e).map((async e=>{var t;if(e.size>2097152)return He.error("Image size must be less than 2MB.",{position:"top-right"}),null;const r="pdf"===(null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase())?"documents":"images",n=`${Date.now()}_${e.name}`,i=h_(v_,`${r}/${n}`);try{const t=await c_(i,e);return await d_(t.ref)}catch(a){return console.error("Error uploading file:",a),null}})),i=(await Promise.all(n)).filter(Boolean);i.length&&(r=[...r,...i],a.setValue(t,r),a.clearErrors(t))},d=async e=>{e.target.files&&await u(e.target.files,"photo")},h=()=>{var e;null===(e=l.current)||void 0===e||e.click()},p=async e=>{e.preventDefault(),e.dataTransfer.files&&await u(e.dataTransfer.files,"photo")},f=e=>{e.preventDefault()};return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...a,children:(0,V.jsxs)("form",{onSubmit:a.handleSubmit((async e=>{try{const t=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");if(o){const n=cm(g_,"bank_leads",String(o)),a={[`Fremdriftsplan.${r}.comment`]:e,updatedAt:t(new Date)};a[`Fremdriftsplan.${r}.status`]="Sent",await mg(n,a),He.success("Lagret",{position:"top-right"}),i()}n(!1)}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("h2",{className:"text-darkBlack text-xl font-semibold p-5 border-b border-[#DCDFEA]",children:"Grunnarbeider: Kommentar fra utbygger"}),(0,V.jsx)("div",{className:"mb-5 p-5",children:(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:a.control,name:"full_fort_date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Dato fullf\xf8rt av entreprepen\xf8r"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Dato fullf\xf8rt av entreprepen\xf8r",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"col-span-2",children:(0,V.jsx)(nW,{control:a.control,name:"text",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Legg igjen utfyllende tekst til banken:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(J3,{placeholder:"Beskrivelse ....",...t,className:`h-[160px] bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"flex items-center gap-5 col-span-2",children:[(0,V.jsx)(nW,{control:a.control,name:"photo",render:e=>{let{fieldState:t}=e;return(0,V.jsxs)(sW,{className:"w-max",children:[(0,V.jsx)("p",{className:(t.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Bilder fra jobben:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:f,onClick:h,onDrop:p,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"SVG, PNG, JPG, PDF or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:l,className:"hidden",accept:".svg, .png, .jpg, .jpeg, .gif, .pdf",onChange:d,name:"photo",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}}),(0,V.jsx)("div",{children:c&&(0,V.jsx)("div",{className:"mt-5 flex items-center gap-5 flex-wrap",children:null===c||void 0===c?void 0:c.map(((e,t)=>{const r=e.toLowerCase().includes(".pdf");return(0,V.jsxs)("div",{className:"relative h-[140px] w-[140px]",children:[(0,V.jsx)("img",{src:r?Qwe:e,alt:r?"PDF file":"Uploaded image",className:"object-cover w-full h-full rounded-lg"}),(0,V.jsx)("div",{className:"absolute top-2 right-2 bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer",onClick:()=>{const e=c.filter(((e,r)=>r!==t));a.setValue("photo",e)},children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})]},t)}))})})]})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>n(!1)}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})})})};function t_e(e){return"kr"+e.replace(" NOK","").replace(/\s+/g," ")}const r_e=e=>{let{bankData:r,getData:n}=e;const[i,a]=(0,t.useState)(0),s=["Byggekontrakt","Grunnarbeider","Betongarbeid","LeveringByggesett","TettBygg","FerdigUte","FerdigInne","Forh\xe5ndsbefaring","Overtakelse"],o=null!==r&&void 0!==r&&r.Fremdriftsplan?Object.entries(null===r||void 0===r?void 0:r.Fremdriftsplan).filter((e=>{let[t]=e;return"id"!==t})).map((e=>{let[t,r]=e;return{name:t,...r}})).sort(((e,t)=>s.indexOf(e.name)-s.indexOf(t.name))):[];(0,t.useEffect)((()=>{if(o&&o.length>0){const e=o.reduce(((e,t,r)=>t.comment?r:e),-1);-1!==e&&a(e+1)}}),[o]);const[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(null);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"mx-10 rounded-lg mb-20",children:[(0,V.jsx)("h3",{className:"text-darkBlack text-xl font-semibold mb-2",children:"Fremdrifts- og faktureringsplan"}),(0,V.jsxs)("p",{className:"text-darkBlack text-sm font-medium mb-6",children:["Her oppdaterer du status p\xe5 fremdriften slik at banken f\xe5r oppdatert informasjon om fremdriften."," "]}),(0,V.jsx)("div",{className:"flex flex-col gap-6 mb-6",children:(0,V.jsx)(Xwe,{steps:o,currIndex:i,Style:"true"})}),(0,V.jsx)("div",{className:"flex flex-col gap-6",children:o&&o.map(((e,t)=>{var r,n,a;let s="";if(null!==e&&void 0!==e&&null!==(r=e.comment)&&void 0!==r&&r.full_fort_date){const t=new Date(e.date),r=new Date(e.comment.full_fort_date),n=SS(t,Number(e.day)||0);if(FS(n)&&FS(r)){const e=US(r,n);s=`(${e>=0?"+":""}${e} dager)`}}return(0,V.jsxs)("div",{className:`py-3 px-4 bg-[#FFFFFF14] rounded-lg border flex flex-col gap-4 ${"Approve"===e.status?"border-[#61C4A4]":"Unpaid"===e.status||"Reject"===e.status?"border-[#FFAFAF]":"Sent"===e.status&&"border-[#FFB795]"}`,children:[(0,V.jsxs)("div",{className:`flex items-center gap-2 justify-between ${i>t&&"cursor-pointer"} `,onClick:()=>{i>t&&(e=>{p((t=>t===e?null:e))})(t)},children:[(0,V.jsxs)("h4",{className:"text-darkBlack font-medium text-sm md:text-base desktop:text-lg",children:["Step ",t+1,":"," ",(0,V.jsx)("span",{className:"font-bold",children:e.name})]}),i>t?(0,V.jsxs)("div",{className:"flex items-center gap-4",children:["Approve"===e.status?(0,V.jsxs)("div",{className:"bg-[#E0FFF5] rounded-[16px] py-0.5 px-2 text-xs text-[#00857A]",children:["Betalt ",t_e(e.pris)," (",e.date.split("-").reverse().join("."),")"]}):"Reject"===e.status?(0,V.jsx)("div",{className:"bg-[#FFE0E0] rounded-[16px] py-0.5 px-2 text-xs text-[#A20000]",children:"Avvis"}):"Sent"===e.status&&(0,V.jsx)("div",{className:"bg-[#FFEAE0] rounded-[16px] py-0.5 px-2 text-xs text-[#C84D00]",children:"Send Information"}),(0,V.jsx)(zZ,{className:"text-primary transition-transform duration-200 "+(h===t?"rotate-180":"")})]}):i===t?(0,V.jsxs)("div",{className:"flex items-center gap-4",children:[(0,V.jsx)("span",{className:"text-primary text-sm font-semibold cursor-pointer",onClick:()=>{c(!0),d(e.name)},children:"Fullf\xf8r steget"}),(0,V.jsx)("div",{className:"bg-[#FFE0E0] rounded-[16px] py-0.5 px-2 text-xs text-[#A20000]",children:"Ubetalt"})]}):i<t&&(0,V.jsx)("div",{className:"bg-[#FFE0E0] rounded-[16px] py-0.5 px-2 text-xs text-[#A20000]",children:"Ubetalt"})]}),(0,V.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,V.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm",children:"Forventet oppstart"}),(0,V.jsx)("h6",{className:"text-darkBlack font-medium",children:e.date.split("-").reverse().join(".")})]}),(null===e||void 0===e?void 0:e.comment)&&(0,V.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm",children:"Fullf\xf8rt"}),(0,V.jsxs)("h6",{className:"text-darkBlack font-medium",children:[e.comment.full_fort_date.split("-").reverse().join(".")," ",(0,V.jsx)("span",{className:"text-[#30374F99]",children:s})]})]}),(0,V.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsxs)("h6",{className:"text-darkBlack font-medium",children:[null===e||void 0===e?void 0:e.day," dager"]})]}),(0,V.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)("h6",{className:"text-darkBlack font-medium",children:t_e(e.pris)})]})]}),i>t&&h===t&&(0,V.jsxs)("div",{className:"border border-[#EAECF0] rounded-lg",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 p-4 border-b border-[#EAECF0]",children:[(0,V.jsx)("h3",{className:"text-darkBlack font-semibold",children:"Grunnarbeider: Kommentar fra utbygger"}),"Approve"!==e.status&&(0,V.jsx)(GT,{className:"text-primary cursor-pointer",onClick:()=>{c(!0),d(e.name)}})]}),(0,V.jsxs)("div",{className:"p-4",children:[(0,V.jsx)("div",{className:"text-[#5D6B98] text-base mb-6",children:e.comment.text}),(0,V.jsxs)("div",{children:[(0,V.jsx)("h4",{className:"text-darkBlack font-semibold",children:"Bilder fra jobben:"}),e.comment.photo&&(0,V.jsx)("div",{className:"mt-5 flex items-center gap-5 flex-wrap",children:null===(n=e.comment.photo)||void 0===n?void 0:n.map(((e,t)=>{const r=e.toLowerCase().includes(".pdf");return(0,V.jsx)("div",{className:"relative h-[140px] w-[140px]",children:(0,V.jsx)("img",{src:r?Qwe:e,alt:r?"PDF file":"Uploaded image",className:"object-cover w-full h-full rounded-lg"})},t)}))})]})]})]}),i>t&&h===t&&(null===e||void 0===e?void 0:e.payment)&&(0,V.jsxs)("div",{className:"border border-[#EAECF0] rounded-lg",children:[(0,V.jsx)("div",{className:"flex items-center justify-between gap-2 p-4 border-b border-[#EAECF0]",children:(0,V.jsx)("h3",{className:"text-darkBlack font-semibold",children:"Grunnarbeider: Svar til utbygger"})}),(0,V.jsxs)("div",{className:"p-4",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-base mb-6",children:e.payment.text}),(0,V.jsxs)("div",{children:[(0,V.jsx)("h4",{className:"text-darkBlack font-semibold",children:"Dokumenter"}),e.payment.pdf&&(0,V.jsx)("div",{className:"mt-5 flex items-center gap-5 flex-wrap",children:null===(a=e.payment.pdf)||void 0===a?void 0:a.map(((e,t)=>(0,V.jsx)("div",{className:"relative h-[140px] w-[140px]",children:(0,V.jsx)("img",{src:Qwe,alt:"logo",className:"object-cover w-full h-full rounded-lg"})},t)))})]})]})]})]},t)}))})]}),l&&(0,V.jsx)(sA,{onClose:()=>{c(!l)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 mx-4",children:(0,V.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden w-[80%]",children:(0,V.jsx)(e_e,{SelectIndex:u,setIsModalOpen:c,getData:n})})})})]})},n_e=kQ.object({date:kQ.string().min(1,"Forventet oppstart er p\xe5krevd"),day:kQ.string().min(1,"Antatt antall dager til \xe5 fullf\xf8re er p\xe5krevd"),pris:kQ.string().min(1,"Utbetaling ihht. faktureringsplan er p\xe5krevd")}),i_e=kQ.object({Byggekontrakt:n_e,Grunnarbeider:n_e,Betongarbeid:n_e,LeveringByggesett:n_e,TettBygg:n_e,FerdigUte:n_e,FerdigInne:n_e,"Forh\xe5ndsbefaring":n_e,Overtakelse:n_e}),a_e=e=>{let{setActiveTab:r,getData:n}=e;const i=Gr().pathname.split("/"),a=i.length>2?i[2]:null,s=AG({resolver:FG(i_e)}),o=localStorage.getItem("Iplot_admin"),[l,c]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e&&null!==e&&void 0!==e&&e.supplier){const t=null===e||void 0===e?void 0:e.supplier;c(t)}else c(null)})()}),[l]);const[u,d]=(0,t.useState)([]);return(0,t.useEffect)((()=>{(async()=>{try{let e;e=Zm(lm(g_,"house_model"),"andre.finger@gmail.com"===o?eg("updatedAt","desc"):l||null!==l?Xm("Husdetaljer.Leverand\xf8rer","==",l):eg("updatedAt","desc"));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()})));d(t)}catch(e){console.error("Error fetching husmodell data:",e)}})()}),[l]),(0,t.useEffect)((()=>{if(!a)return;(async()=>{const e=await b_(a);e&&e.Fremdriftsplan&&Object.entries(e.Fremdriftsplan).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&s.setValue(t,r)}))})()}),[s,a,u]),(0,t.useEffect)((()=>{const e=["Byggekontrakt","Grunnarbeider","Betongarbeid","LeveringByggesett","TettBygg","FerdigUte","FerdigInne","Forh\xe5ndsbefaring","Overtakelse"],t=s.watch(((t,r)=>{let{name:n}=r;for(let l=0;l<e.length-1;l++){var i,a,o;const r=e[l],c=e[l+1],u=null===t||void 0===t||null===(i=t[r])||void 0===i?void 0:i.date,d=null===t||void 0===t||null===(a=t[r])||void 0===a?void 0:a.day,h=null===t||void 0===t||null===(o=t[c])||void 0===o?void 0:o.date;if(u&&d&&(!h||(null===n||void 0===n?void 0:n.includes(r)))){const e=new Date(u),t=parseInt(d,10);if(!isNaN(e.getTime())&&!isNaN(t)){const r=new Date(e);r.setDate(e.getDate()+t);const n=r.toISOString().split("T")[0];s.setValue(`${c}.date`,n)}}}}));return()=>t.unsubscribe()}),[s]),(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...s,children:(0,V.jsxs)("form",{onSubmit:s.handleSubmit((async e=>{try{const t=cm(g_,"bank_leads",String(a)),i=e=>({...e,status:"Unpaid"}),s={Byggekontrakt:i(e.Byggekontrakt),Grunnarbeider:i(e.Grunnarbeider),Betongarbeid:i(e.Betongarbeid),LeveringByggesett:i(e.LeveringByggesett),TettBygg:i(e.TettBygg),FerdigUte:i(e.FerdigUte),FerdigInne:i(e.FerdigInne),"Forh\xe5ndsbefaring":i(e.Forh\u00e5ndsbefaring),Overtakelse:i(e.Overtakelse),id:a},o=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");await mg(t,{Fremdriftsplan:s,updatedAt:o(new Date)}),He.success("Lagret",{position:"top-right"}),r(3),n()}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsxs)("div",{className:"mx-10 rounded-lg mb-10",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsxs)("div",{className:"py-4 px-5 border-b border-[#E8E8E8]",children:[(0,V.jsx)("span",{className:"text-xl font-semibold",children:"Fremdrifts- og faktureringsplan"}),(0,V.jsxs)("p",{className:"text-[#5D6B98] font-bold text-sm mt-2",children:["Her legge du inn forventet tidsbruk i antall dager"," ",(0,V.jsx)("span",{className:"font-normal",children:"(medregnet helger og helligdager)"})]})]}),(0,V.jsxs)("div",{className:"p-5 flex flex-col gap-5",children:[(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsxs)("h4",{className:"font-medium text-sm md:text-base desktop:text-lg text-black",children:["Step 1: ",(0,V.jsx)("span",{className:"font-bold",children:"Byggekontrakt"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Byggekontrakt.date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Byggekontrakt.day",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Antatt antall dager til \xe5 fullf\xf8re",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Byggekontrakt.pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Utbetaling ihht. faktureringsplan",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsxs)("h4",{className:"font-medium text-sm md:text-base desktop:text-lg text-black",children:["Step 2: ",(0,V.jsx)("span",{className:"font-bold",children:"Grunnarbeider"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Grunnarbeider.date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date",disable:!0})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Grunnarbeider.day",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Antatt antall dager til \xe5 fullf\xf8re",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Grunnarbeider.pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Utbetaling ihht. faktureringsplan",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsxs)("h4",{className:"font-medium text-sm md:text-base desktop:text-lg text-black",children:["Step 3: ",(0,V.jsx)("span",{className:"font-bold",children:"Betongarbeid"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Betongarbeid.date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date",disable:!0})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Betongarbeid.day",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Antatt antall dager til \xe5 fullf\xf8re",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Betongarbeid.pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Utbetaling ihht. faktureringsplan",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsxs)("h4",{className:"font-medium text-sm md:text-base desktop:text-lg text-black",children:["Step 4: ",(0,V.jsx)("span",{className:"font-bold",children:"Levering byggesett"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"LeveringByggesett.date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date",disable:!0})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"LeveringByggesett.day",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Antatt antall dager til \xe5 fullf\xf8re",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"LeveringByggesett.pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Utbetaling ihht. faktureringsplan",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsxs)("h4",{className:"font-medium text-sm md:text-base desktop:text-lg text-black",children:["Step 5: ",(0,V.jsx)("span",{className:"font-bold",children:"Tett bygg"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"TettBygg.date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date",disable:!0})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"TettBygg.day",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Antatt antall dager til \xe5 fullf\xf8re",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"TettBygg.pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Utbetaling ihht. faktureringsplan",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsxs)("h4",{className:"font-medium text-sm md:text-base desktop:text-lg text-black",children:["Step 6: ",(0,V.jsx)("span",{className:"font-bold",children:"Ferdig ute"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"FerdigUte.date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date",disable:!0})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"FerdigUte.day",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Antatt antall dager til \xe5 fullf\xf8re",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"FerdigUte.pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Utbetaling ihht. faktureringsplan",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsxs)("h4",{className:"font-medium text-sm md:text-base desktop:text-lg text-black",children:["Step 7: ",(0,V.jsx)("span",{className:"font-bold",children:"Ferdig inne"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"FerdigInne.date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date",disable:!0})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"FerdigInne.day",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Antatt antall dager til \xe5 fullf\xf8re",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"FerdigInne.pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Utbetaling ihht. faktureringsplan",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsxs)("h4",{className:"font-medium text-sm md:text-base desktop:text-lg text-black",children:["Step 8: ",(0,V.jsx)("span",{className:"font-bold",children:"Forh\xe5ndsbefaring"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Forh\xe5ndsbefaring.date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date",disable:!0})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Forh\xe5ndsbefaring.day",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Antatt antall dager til \xe5 fullf\xf8re",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Forh\xe5ndsbefaring.pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Utbetaling ihht. faktureringsplan",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,V.jsxs)("h4",{className:"font-medium text-sm md:text-base desktop:text-lg text-black",children:["Step 9: ",(0,V.jsx)("span",{className:"font-bold",children:"Overtakelse"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-4 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Overtakelse.date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date",disable:!0})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Overtakelse.day",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Antatt antall dager til \xe5 fullf\xf8re",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"number"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:s.control,name:"Overtakelse.pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Utbetaling ihht. faktureringsplan",...t,className:`bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})},value:null===t.value?"-":t.value})})}),(0,V.jsx)(cW,{})]})}})})]})]})]})]}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)("div",{onClick:()=>r(1),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{id:"submit",children:(0,V.jsx)(HT,{text:"Neste",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})})]})]})})})},s_e=kQ.object({"Entrepren\xf8rgaranti":kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).optional(),Forsikringsbevis:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).optional(),Kontrakt:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).optional()}),o_e=e=>{let{setActiveTab:r,getData:n}=e;const i=AG({resolver:FG(s_e)}),a=Gr().pathname.split("/"),s=a.length>2?a[2]:null;(0,t.useEffect)((()=>{if(!s)return;(async()=>{const e=await b_(s);e&&e.Documenter&&Object.entries(e.Documenter).forEach((e=>{let[t,r]=e;void 0!==r&&null!==r&&i.setValue(t,r)}))})()}),[s]);const o=t.useRef(null),l=()=>{var e;null===(e=o.current)||void 0===e||e.click()},c=e=>{e.preventDefault()},u=i.watch("Entrepren\xf8rgaranti"),d=async(e,t)=>{if(!e.length)return;let r=[...i.watch(t)||[]];const n=Array.from(e).map((async e=>{if(e.size>5242880)return He.error("Image size must be less than 5MB.",{position:"top-right"}),null;const t=`${Date.now()}_${e.name}`,r=h_(v_,`documents/${t}`);try{const t=await c_(r,e);return await d_(t.ref)}catch(n){return console.error("Error uploading file:",n),null}})),a=(await Promise.all(n)).filter(Boolean);a.length&&(r=[...r,...a],i.setValue(t,r),i.clearErrors(t))},h=async e=>{e.preventDefault(),e.dataTransfer.files&&await d(e.dataTransfer.files,"Entrepren\xf8rgaranti")},p=t.useRef(null),f=()=>{var e;null===(e=p.current)||void 0===e||e.click()},m=e=>{e.preventDefault()},g=i.watch("Forsikringsbevis"),v=async e=>{e.preventDefault(),e.dataTransfer.files&&await d(e.dataTransfer.files,"Forsikringsbevis")},x=async e=>{e.target.files&&await d(e.target.files,"Forsikringsbevis")},y=t.useRef(null),b=()=>{var e;null===(e=y.current)||void 0===e||e.click()},w=e=>{e.preventDefault()},_=i.watch("Kontrakt"),k=async e=>{e.preventDefault(),e.dataTransfer.files&&await d(e.dataTransfer.files,"Kontrakt")},S=async e=>{e.target.files&&await d(e.target.files,"Kontrakt")},[j,E]=(0,t.useState)(!1),[C,N]=(0,t.useState)(null),[T,P]=(0,t.useState)(null),A=e=>{N(e),E(!0)},M=async e=>{e.target.files&&await d(e.target.files,"Entrepren\xf8rgaranti")},I=async e=>{try{if(!e)return void console.error("File path is missing!");const t=h_(p_(),e),r=await d_(t),n=document.createElement("a");n.href=r,n.target="_blank",n.rel="noopener noreferrer",n.download=e.split("/").pop()||"download",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(t){console.error("Error downloading file:",t)}};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(tW,{...i,children:(0,V.jsxs)("form",{onSubmit:i.handleSubmit((async e=>{const t={...e};void 0!==e.Entrepren\u00f8rgaranti?t.Entrepren\u00f8rgaranti=e.Entrepren\u00f8rgaranti:delete t.Entrepren\u00f8rgaranti,void 0!==e.Forsikringsbevis?t.Forsikringsbevis=e.Forsikringsbevis:delete t.Forsikringsbevis,void 0!==e.Kontrakt?t.Kontrakt=e.Kontrakt:delete t.Kontrakt;try{const e=cm(g_,"bank_leads",String(s)),i={...t,id:s},a=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");await mg(e,{Documenter:i,updatedAt:a(new Date)}),He.success("Lagret",{position:"top-right"}),r(4),n()}catch(i){console.error("Firestore operation failed:",i),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsxs)("div",{className:"mx-10 rounded-lg mb-28",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsxs)("div",{className:"p-5 border-b border-[#DCDFEA]",children:[(0,V.jsx)("div",{className:"text-xl text-darkBlack font-semibold mb-2",children:"Dokumentasjon"}),(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm",children:"Her laster du opp dokumentasjon som er relevant for prosjektet"})]}),(0,V.jsxs)("div",{className:"p-5 flex flex-col gap-5",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h4",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-semibold mb-4",children:"Entrepren\xf8rgaranti"}),(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,V.jsx)(nW,{control:i.control,name:"Entrepren\xf8rgaranti",render:()=>(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full p-3 rounded-lg",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 border-dashed laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:c,onClick:l,onDrop:h,children:[(0,V.jsx)("img",{src:Owe,alt:"upload"}),(0,V.jsxs)("div",{className:"flex items-center gap-3",children:[(0,V.jsx)("span",{className:"text-[#7839EE] border-2 border-[#7839EE] rounded-[40px] py-2 px-4 font-medium whitespace-nowrap",children:"Last opp"}),(0,V.jsx)("p",{className:"text-[#111322] text-sm text-center truncate w-full",children:"Slipp fil for \xe5 laste opp her"})]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"Filformater: kun PDF, max 5 MB"}),(0,V.jsx)("input",{type:"file",ref:o,className:"hidden",accept:".pdf",onChange:M,name:"Entrepren\xf8rgaranti",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm font-medium",children:"Dokumenter"}),u&&u.length>0?(0,V.jsx)("div",{className:"flex flex-col items-center gap-3",children:null===u||void 0===u?void 0:u.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsxs)("div",{className:"flex items-center gap-6",children:[(0,V.jsx)("img",{src:g4,alt:"delete",className:"cursor-pointer",onClick:()=>{A(t),P("Entrepren\xf8rgaranti")}}),(0,V.jsx)("img",{src:z3,alt:"download",className:"cursor-pointer",onClick:()=>I(e)})]})]},t)))}):(0,V.jsx)("p",{className:"text-gray",children:"No Entrepren\xf8rgaranti found!"})]})]})]}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsxs)("div",{children:[(0,V.jsx)("h4",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-semibold mb-4",children:"Forsikringsbevis"}),(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,V.jsx)(nW,{control:i.control,name:"Forsikringsbevis",render:()=>(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full p-3 rounded-lg",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 border-dashed laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:m,onClick:f,onDrop:v,children:[(0,V.jsx)("img",{src:Owe,alt:"upload"}),(0,V.jsxs)("div",{className:"flex items-center gap-3",children:[(0,V.jsx)("span",{className:"text-[#7839EE] border-2 border-[#7839EE] rounded-[40px] py-2 px-4 font-medium whitespace-nowrap",children:"Last opp"}),(0,V.jsx)("p",{className:"text-[#111322] text-sm text-center truncate w-full",children:"Slipp fil for \xe5 laste opp her"})]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"Filformater: kun PDF, max 5 MB"}),(0,V.jsx)("input",{type:"file",ref:p,className:"hidden",accept:".pdf",onChange:x,name:"Forsikringsbevis",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm font-medium",children:"Dokumenter"}),g&&g.length>0?(0,V.jsx)("div",{className:"flex flex-col items-center gap-3",children:null===g||void 0===g?void 0:g.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsxs)("div",{className:"flex items-center gap-6",children:[(0,V.jsx)("img",{src:g4,alt:"delete",className:"cursor-pointer",onClick:()=>{A(t),P("Forsikringsbevis")}}),(0,V.jsx)("img",{src:z3,alt:"download",className:"cursor-pointer",onClick:()=>I(e)})]})]},t)))}):(0,V.jsx)("p",{className:"text-gray",children:"No Forsikringsbevis found!"})]})]})]}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA]"}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("h4",{className:"text-darkBlack text-sm md:text-base desktop:text-lg font-semibold mb-4",children:["Kontrakt"," ",(0,V.jsx)("span",{className:"text-[#5D6B98]",children:"(eks. NS-3425)"})]}),(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,V.jsx)(nW,{control:i.control,name:"Kontrakt",render:()=>(0,V.jsxs)(sW,{className:"w-full",children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full p-3 rounded-lg",style:{boxShadow:"0px 2px 4px -2px #1018280F, 0px 4px 8px -2px #1018281A"},children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 border-dashed laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:w,onClick:b,onDrop:k,children:[(0,V.jsx)("img",{src:Owe,alt:"upload"}),(0,V.jsxs)("div",{className:"flex items-center gap-3",children:[(0,V.jsx)("span",{className:"text-[#7839EE] border-2 border-[#7839EE] rounded-[40px] py-2 px-4 font-medium whitespace-nowrap",children:"Last opp"}),(0,V.jsx)("p",{className:"text-[#111322] text-sm text-center truncate w-full",children:"Slipp fil for \xe5 laste opp her"})]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"Filformater: kun PDF, max 5 MB"}),(0,V.jsx)("input",{type:"file",ref:y,className:"hidden",accept:".pdf",onChange:S,name:"Kontrakt",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm font-medium",children:"Dokumenter"}),_&&_.length>0?(0,V.jsx)("div",{className:"flex flex-col items-center gap-3",children:null===_||void 0===_?void 0:_.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsxs)("div",{className:"flex items-center gap-6",children:[(0,V.jsx)("img",{src:g4,alt:"delete",onClick:()=>{A(t),P("Kontrakt")},className:"cursor-pointer"}),(0,V.jsx)("img",{src:z3,alt:"download",className:"cursor-pointer",onClick:()=>I(e)})]})]},t)))}):(0,V.jsx)("p",{className:"text-gray",children:"No Kontrakt found!"})]})]})]})]})]}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center fixed bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)("div",{onClick:()=>r(2),children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Neste",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})}),j&&(0,V.jsx)(sA,{onClose:()=>{j?(E(!1),P(null)):E(!0)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,V.jsx)("p",{className:"mb-4",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,V.jsx)("div",{onClick:()=>{E(!1),P(null),N(null)},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>{if(null!==C&&T){const e=i.watch(T).filter(((e,t)=>t!==C));i.setValue(T,e)}E(!1),N(null),P(null)}})]})]})})})]})},l_e=()=>{var e,r,n,i,a,s;const o=Kr(),l=Gr(),c=l.pathname.split("/"),u=c.length>2?c[2]:null,[d,h]=(0,t.useState)(!0),[p,f]=(0,t.useState)(),m=(0,t.useCallback)((async()=>{if(u){h(!0);try{const e=await b_(u);e&&f(e)}catch(e){console.error("Failed to fetch data:",e)}finally{h(!1)}}}),[u]);(0,t.useEffect)((()=>{u?m():h(!1)}),[m]);const[g,v]=(0,t.useState)(0),x=[{label:"Summary",icon:(0,V.jsx)(Gwe,{})},{label:"Forh\xe5ndstakst",icon:(0,V.jsx)(Nwe,{})},{label:"Fremdrifts- og faktureringsplan",icon:(0,V.jsx)(Twe,{})},{label:"Dokumentasjon",icon:(0,V.jsx)(Pwe,{})},{label:"Fremdriftsplan",icon:(0,V.jsx)(Wwe,{})}];return(0,t.useEffect)((()=>{const e=setTimeout((()=>{window.scrollTo(0,0)}),0);return()=>clearTimeout(e)}),[g]),(0,t.useEffect)((()=>{const e=new URLSearchParams(l.search),t=e.get("step");t&&(v(Number(t)),e.delete("step"),o(`${l.pathname}?${e.toString()}`,{replace:!0}))}),[]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"px-8 pt-4 pb-8 flex flex-col gap-6 bg-[#F5F3FF]",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1",children:[(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>o("/agent-leads"),children:"Leads sendt til banken"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#5D6B98] text-sm",children:"Detaljer om potensielle kunder"})]}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,V.jsxs)("div",{className:"text-darkBlack text-[2rem] font-medium",children:[null===p||void 0===p||null===(e=p.Kunden)||void 0===e||null===(r=e.Kundeinformasjon[0])||void 0===r?void 0:r.f_name," ",null===p||void 0===p||null===(n=p.Kunden)||void 0===n||null===(i=n.Kundeinformasjon[0])||void 0===i?void 0:i.l_name," ",(0,V.jsxs)("span",{className:"text-[#5D6B98] text-xl",children:["(",u,")"]})]}),(0,V.jsx)("div",{children:"Sent"===(null===p||void 0===p?void 0:p.status)?(0,V.jsx)("p",{className:"text-xs text-[#A27200] w-max bg-[#FFF6E0] py-0.5 px-2 rounded-[16px]",children:null===p||void 0===p?void 0:p.status}):"Rejected"===(null===p||void 0===p?void 0:p.status)?(0,V.jsx)("p",{className:"text-xs text-[#A20000] w-max bg-[#FFE0E0] py-0.5 px-2 rounded-[16px]",children:null===p||void 0===p?void 0:p.status}):"Approved"===(null===p||void 0===p?void 0:p.status)?(0,V.jsx)("p",{className:"text-xs text-[#00857A] bg-[#E0FFF5] w-max py-0.5 px-2 rounded-[16px]",children:null===p||void 0===p?void 0:p.status}):"In Process"===(null===p||void 0===p?void 0:p.status)&&(0,V.jsx)("p",{className:"text-xs text-[#C84D00] bg-[#FFEAE0] w-max py-0.5 px-2 rounded-[16px]",children:null===p||void 0===p?void 0:p.status})})]}),(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm md:text-base desktop:text-lg font-medium",children:null===p||void 0===p||null===(a=p.plotHusmodell)||void 0===a||null===(s=a.plot)||void 0===s?void 0:s.address})]})]}),(0,V.jsxs)("div",{className:"relative",children:[(0,V.jsx)("div",{className:"flex items-center justify-between gap-2 mb-6 px-10 mt-4",children:(0,V.jsx)("div",{className:"flex gap-4 rounded-lg bg-white p-[6px]",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:x.map(((e,t)=>(0,V.jsxs)("button",{className:`${u?"cursor-pointer":"cursor-auto"} flex items-center gap-2 text-darkBlack py-2 px-3 rounded-lg ${g===t?"font-semibold bg-[#7839EE] text-white":"text-[#4D4D4D]"}`,onClick:()=>v(t),children:[e.icon,e.label]},t)))})}),0===g&&(0,V.jsx)(qwe,{bankData:p,loading:d}),1===g&&(0,V.jsx)(Zwe,{bankData:p,setActiveTab:v,getData:m}),2===g&&(0,V.jsx)(a_e,{setActiveTab:v,getData:m}),3===g&&(0,V.jsx)(o_e,{setActiveTab:v,getData:m}),4===g&&(0,V.jsx)(r_e,{bankData:p,loading:d,getData:m})]})]})},c_e=()=>{var e;const[r,n]=(0,t.useState)(1),[i,a]=(0,t.useState)([]),s=Kr(),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(!0),v=Gr().pathname,[x,y]=(0,t.useState)(null),b=localStorage.getItem("Iplot_admin");(0,t.useEffect)((()=>{(async()=>{const e=await N_();if(e){const t=null===e||void 0===e?void 0:e.supplier;y(t)}})()}),[]);const w=(0,t.useMemo)((()=>i.filter((e=>{const t=new Date(e.createdAt);return d&&p?t>=d&&t<=p:d&&!p?t>=d:!(!d&&p)||t<=p}))),[i,d,p]),_=async()=>{g(!0);try{let e;e="/active-bank-leads"===v?Zm(lm(g_,"bank_leads"),Xm("status","==","Approved")):Zm(lm(g_,"bank_leads"));const t=(await pg(e)).docs.map((e=>({id:e.id,...e.data()}))),r={januar:"January",februar:"February",mars:"March",april:"April",mai:"May",juni:"June",juli:"July",august:"August",september:"September",oktober:"October",november:"November",desember:"December"},n=e=>{const t=e.toLowerCase().split(" ");if(3!==t.length)return new Date(e);const[n,i,a]=t,s=r[i]||i;return new Date(`${n} ${s} ${a}`)},i=t.sort(((e,t)=>{const r=n(e.updatedAt);return n(t.updatedAt).getTime()-r.getTime()}));a(i)}catch(e){console.error("Error fetching bank lead data:",e)}finally{g(!1)}};(0,t.useEffect)((()=>{_()}),[x,v]);const[k,S]=(0,t.useState)(!1),[j,E]=(0,t.useState)(null),C=(0,t.useMemo)((()=>[{accessorKey:"id",header:"Id",cell:e=>{var t,r,n;let{row:i}=e;return(0,V.jsxs)(ti,{to:`/bank-leads-detail/${null===(t=i.original)||void 0===t?void 0:t.id}`,className:"text-sm text-darkBlack",children:["#",null===(r=i.original)||void 0===r||null===(n=r.id)||void 0===n?void 0:n.substring(0,4),"..."]})}},{accessorKey:"name",header:"Navn",cell:e=>{var t,r,n,i,a,s;let{row:o}=e;return(0,V.jsxs)("div",{className:"flex items-center text-sm text-darkBlack w-max",children:[null===(t=o.original)||void 0===t||null===(r=t.Kunden)||void 0===r||null===(n=r.Kundeinformasjon[0])||void 0===n?void 0:n.f_name," ",null===(i=o.original)||void 0===i||null===(a=i.Kunden)||void 0===a||null===(s=a.Kundeinformasjon[0])||void 0===s?void 0:s.l_name]})}},{accessorKey:"Anleggsadresse",header:"Anleggsadresse",cell:e=>{var t,r,n;let{row:i}=e;return(0,V.jsx)("div",{className:"flex items-center text-sm text-darkBlack w-max",children:null===(t=i.original)||void 0===t||null===(r=t.plotHusmodell)||void 0===r||null===(n=r.plot)||void 0===n?void 0:n.address})}},{accessorKey:"Forhandler",header:"Forhandler",cell:e=>{let{row:t}=e;return(0,V.jsx)("div",{className:"flex items-center text-sm text-darkBlack w-max",children:"BoligPartner"})}},{accessorKey:"Konsulent",header:"Konsulent",cell:e=>{var t,r;let{row:n}=e;return(0,V.jsx)("div",{className:"flex items-center text-sm text-darkBlack w-max",children:null===(t=n.original)||void 0===t||null===(r=t.createDataBy)||void 0===r?void 0:r.name})}},{accessorKey:"Lead sendt videre",header:"Lead sendt videre",cell:e=>{let{row:t}=e;return(0,V.jsx)("p",{className:"text-sm font-semibold text-black w-max",children:t.original.createdAt})}},{accessorKey:"Tilbudspris",header:"Tilbudspris",cell:e=>{var t,r,n,i;let{row:a}=e;const s=null===(t=a.original)||void 0===t||null===(r=t.plotHusmodell)||void 0===r?void 0:r.plot,o=null===(n=a.original)||void 0===n||null===(i=n.plotHusmodell)||void 0===i?void 0:i.house;function l(e){return"string"!==typeof e?0:Number(e.replace(/\s/g,""))}const c=l(null===s||void 0===s?void 0:s.tomtekostnader)+l(null===o||void 0===o?void 0:o.byggekostnader);return(0,V.jsxs)("p",{className:"text-sm font-semibold text-black w-max",children:["kr ",(u=c,u.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))]});var u}},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e;return(0,V.jsxs)("div",{className:"flex items-center gap-2",children:["Sent"===t.original.status?(0,V.jsx)("p",{className:"text-xs text-[#A27200] w-max bg-[#FFF6E0] py-0.5 px-2 rounded-[16px]",children:t.original.status}):"Rejected"===t.original.status?(0,V.jsx)("p",{className:"text-xs text-[#A20000] w-max bg-[#FFE0E0] py-0.5 px-2 rounded-[16px]",children:t.original.status}):"Approved"===t.original.status?(0,V.jsx)("p",{className:"text-xs text-[#00857A] bg-[#E0FFF5] w-max py-0.5 px-2 rounded-[16px]",children:t.original.status}):"In Process"===t.original.status&&(0,V.jsx)("p",{className:"text-xs text-[#C84D00] bg-[#FFEAE0] w-max py-0.5 px-2 rounded-[16px]",children:t.original.status}),(0,V.jsx)(GT,{className:"h-[18px] w-[18px] text-primary cursor-pointer",onClick:()=>{S(!0),u(t.original.id),E(t.original.status)}})]})}},{id:"action",header:"Action",cell:e=>{let{row:t}=e;return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("div",{className:"flex items-center gap-3",children:(0,V.jsx)(WT,{className:"h-5 w-5 text-primary cursor-pointer",onClick:()=>{return e=t.original.id,u(e),void l(!0);var e}})})})}}].filter(Boolean)),[b,s,x]),N=(0,t.useMemo)((()=>{const e=10*(r-1);return w.slice(e,e+10)}),[w,r]),T=aA({data:N,columns:C,getCoreRowModel:eA(),getPaginationRowModel:rA(),getSortedRowModel:nA(),state:{pagination:{pageIndex:r-1,pageSize:10}},pageCount:Math.ceil(w.length/10),manualPagination:!0,onPaginationChange:e=>{if("function"===typeof e){const t=e({pageIndex:r-1,pageSize:10});n(t.pageIndex+1)}}});return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"mb-2 flex items-center justify-between bg-lightPurple rounded-[12px] py-3 px-4",children:[(0,V.jsx)("div",{}),(0,V.jsx)("div",{className:"flex gap-3 items-center",children:(0,V.jsx)(uA,{startDate:d,endDate:p,onDateChange:(e,t)=>{h(e),f(t)}})})]}),(0,V.jsxs)("div",{className:"rounded-lg border border-gray2 shadow-shadow2 overflow-hidden",children:[(0,V.jsxs)(YT,{children:[(0,V.jsx)(XT,{children:T.getHeaderGroups().map((e=>(0,V.jsx)(JT,{className:"hover:bg-transparent",children:e.headers.map((e=>(0,V.jsx)(eP,{className:"h-8 text-sm",children:iA(e.column.columnDef.header,e.getContext())},e.id)))},e.id)))}),(0,V.jsx)(QT,{children:m?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:C.length,className:"h-24 text-center",children:(0,V.jsx)(ZT,{className:"w-6 h-6 animate-spin mx-auto"})})}):0===w.length?(0,V.jsx)(JT,{children:(0,V.jsx)(tP,{colSpan:C.length,className:"h-24 text-center",children:"No results."})}):(null===(e=T.getRowModel().rows)||void 0===e?void 0:e.length)&&T.getRowModel().rows.map((e=>(0,V.jsx)(JT,{"data-state":e.getIsSelected()&&"selected",className:"hover:bg-muted/50",children:e.getVisibleCells().map((e=>(0,V.jsx)(tP,{className:"px-3 md:px-6 py-3",children:iA(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]}),(0,V.jsxs)("div",{className:"flex justify-between items-center py-4 px-6 border-t border-gray2",children:[(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black text-sm",onClick:()=>T.previousPage(),disabled:!T.getCanPreviousPage(),children:"Forrige"}),(0,V.jsxs)("span",{className:"text-black text-sm",children:["Side ",(0,V.jsx)("span",{className:"font-semibold",children:r})," av"," ",(0,V.jsx)("span",{className:"font-semibold",children:T.getPageCount()})]}),(0,V.jsx)("button",{className:"px-[14px] py-2 rounded-lg disabled:opacity-50 shadow-shadow1 border border-gray1 text-black font-semibold text-sm",onClick:()=>T.nextPage(),disabled:!T.getCanNextPage(),children:"Neste"})]})]}),o&&(0,V.jsx)(sA,{onClose:()=>{l(!o)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>l(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:()=>(async e=>{try{await gg(cm(g_,"bank_leads",e)),_(),l(!1),He.success("Slettet",{position:"top-right"})}catch(t){console.error("Error deleting document:",t)}})(c),children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})}),k&&(0,V.jsx)(sA,{onClose:()=>{S(!k)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex justify-center items-center",children:(0,V.jsx)("div",{className:"bg-white p-6 rounded-xl w-[300px] shadow-lg relative",children:(0,V.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),j&&c)try{await mg(cm(g_,"bank_leads",c),{status:j,updatedAt:(new Date).toISOString()}),S(!1),u(null),He.success("Status updated"),_()}catch(t){console.error("Error updating status",t)}},children:[(0,V.jsx)("h2",{className:"text-sm md:text-base desktop:text-lg font-semibold mb-4",children:"Change Status"}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsxs)("label",{className:"flex items-center gap-2",children:[(0,V.jsx)("input",{type:"radio",name:"status",value:"Sent",checked:"Sent"===j,onChange:e=>E(e.target.value),className:"accent-primary h-4 w-4"}),"Sent"]}),(0,V.jsxs)("label",{className:"flex items-center gap-2",children:[(0,V.jsx)("input",{type:"radio",name:"status",value:"Approved",checked:"Approved"===j,onChange:e=>E(e.target.value),className:"accent-primary h-4 w-4"}),"Approved"]}),(0,V.jsxs)("label",{className:"flex items-center gap-2",children:[(0,V.jsx)("input",{type:"radio",name:"status",value:"Rejected",checked:"Rejected"===j,onChange:e=>E(e.target.value),className:"accent-primary h-4 w-4"}),"Rejected"]}),(0,V.jsxs)("label",{className:"flex items-center gap-2",children:[(0,V.jsx)("input",{type:"radio",name:"status",value:"In Process",checked:"In Process"===j,onChange:e=>E(e.target.value),className:"accent-primary h-4 w-4"}),"In Process"]})]}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>S(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})})]})]})})})})]})},u_e=()=>(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"px-6 pt-6 pb-16 flex flex-col gap-6",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Leads"}),(0,V.jsx)("p",{className:"text-gray",children:"Liste over alle Leads"})]})}),(0,V.jsx)(c_e,{})]})}),d_e=e=>{var r,n,i,a,s,o,l,c,u,d;let{bankData:h}=e;const[p,f]=(0,t.useState)(null);(0,t.useEffect)((()=>{var e,t;null!==h&&void 0!==h&&null!==(e=h.plotHusmodell)&&void 0!==e&&null!==(t=e.house)&&void 0!==t&&t.housemodell&&(async()=>{try{var e,t;const r=cm(g_,"house_model",String(null===h||void 0===h||null===(e=h.plotHusmodell)||void 0===e||null===(t=e.house)||void 0===t?void 0:t.housemodell)),n=await dg(r);n.exists()?f(n.data()):console.error("No document found for husmodell ID.")}catch(r){console.error("Error fetching data:",r)}})()}),[h]);const m=null===h||void 0===h||null===(r=h.plotHusmodell)||void 0===r?void 0:r.plot,g=null===h||void 0===h||null===(n=h.plotHusmodell)||void 0===n?void 0:n.house;function v(e){return"string"!==typeof e?0:Number(e.replace(/\s/g,""))}const x=v(null===m||void 0===m?void 0:m.tomtekostnader)+v(null===g||void 0===g?void 0:g.byggekostnader);return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"mx-10 rounded-lg mb-28",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:[(0,V.jsx)("div",{className:"py-4 px-5 flex items-center gap-3 border-b border-[#E8E8E8]",children:(0,V.jsx)("span",{className:"text-sm md:text-base desktop:text-lg font-semibold",children:"Oppsummering"})}),(0,V.jsxs)("div",{className:"p-5",children:[(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om kunden"}),(0,V.jsx)("div",{className:"py-5 grid grid-cols-2 gap-6",children:h&&(null===h||void 0===h||null===(i=h.Kunden)||void 0===i?void 0:i.Kundeinformasjon.length)&&(null===h||void 0===h||null===(a=h.Kunden)||void 0===a?void 0:a.Kundeinformasjon.map(((e,t)=>(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Type"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.Kundetype})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Navn:"}),(0,V.jsxs)("div",{className:"w-[300px] text-darkBlack",children:[null===e||void 0===e?void 0:e.f_name," ",null===e||void 0===e?void 0:e.l_name]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.Adresse})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Mobil:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.mobileNummer})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"E-post:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.EPost})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"F\xf8dselsdato:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.dato})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Personnummer:"}),(0,V.jsx)("div",{className:"w-[300px] text-darkBlack",children:null===e||void 0===e?void 0:e.Personnummer})]})]},t))))}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om tomten"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Adresse:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===m||void 0===m?void 0:m.address})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kunden eier tomten allerede:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null!==m&&void 0!==m&&m.alreadyHavePlot?null===m||void 0===m?void 0:m.alreadyHavePlot:"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale tomtekostnader:"}),(0,V.jsxs)("div",{className:"text-darkBlack",children:["kr ",null===m||void 0===m?void 0:m.tomtekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===m||void 0===m?void 0:m.Kommentar})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om husmodellen"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Husmodell"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===p||void 0===p||null===(s=p.Husdetaljer)||void 0===s?void 0:s.husmodell_name})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Totale byggekostnader:"}),(0,V.jsxs)("div",{className:"text-darkBlack",children:["kr ",null===g||void 0===g?void 0:g.byggekostnader]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center mb-3",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Kommentar:"}),(0,V.jsx)("div",{className:"text-darkBlack",children:null===g||void 0===g?void 0:g.Kommentar})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Informasjon om \xf8konomisk plan"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Lastet opp"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Last opp en \xf8konomisk plan"===(null===h||void 0===h||null===(o=h.ProjectAccount)||void 0===o?void 0:o.\u00d8konomisk)?"Ja":"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Operettet"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Opprett en \xf8konomisk plan"===(null===h||void 0===h||null===(l=h.ProjectAccount)||void 0===l?void 0:l.\u00d8konomisk)?"Ja":"Nei"})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center mb-3",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"Ettersendes"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Ettersend en \xf8konomisk plan"===(null===h||void 0===h||null===(c=h.ProjectAccount)||void 0===c?void 0:c.\u00d8konomisk)?"Ja":"Nei"})]})]})}),(0,V.jsx)("div",{className:"border-t border-[#DCDFEA] mb-5"}),(0,V.jsx)("div",{className:"text-sm md:text-base desktop:text-lg text-black font-medium",children:"Forh\xe5ndstakst"}),(0,V.jsx)("div",{className:"py-5",children:(0,V.jsx)("div",{className:"flex flex-col gap-2",children:(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98]",children:"\xd8nskes forh\xe5ndstakst?"}),(0,V.jsx)("div",{className:"text-darkBlack",children:"Ja, jeg \xf8nsker forh\xe5ndstakst"===(null===h||void 0===h||null===(u=h.Forhandstakst)||void 0===u?void 0:u.advance_quote)?"Ja (lead sendes til megler n\xe5r du sendes inn banktipset)":null===h||void 0===h||null===(d=h.Forhandstakst)||void 0===d?void 0:d.advance_quote})]})})}),(0,V.jsxs)("div",{className:"bg-[#F9F9FB] rounded-lg py-3 px-4 flex flex-col gap-3",children:[(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum tomtekostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===m||void 0===m?void 0:m.tomtekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversendes megler)"})]})]}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] text-base",children:"Sum byggkostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-medium flex gap-4 items-center",children:["kr ",null===g||void 0===g?void 0:g.byggekostnader,(0,V.jsx)("p",{className:"text-[#5D6B98] text-base font-normal",children:"(prosjektregnskapet oversende banken)"})]})]}),(0,V.jsx)("div",{className:"border-t border-[#EAECF0] w-full"}),(0,V.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,V.jsx)("div",{className:"w-[300px] text-[#5D6B98] font-medium text-xl",children:"Totale kostnader"}),(0,V.jsxs)("div",{className:"w-full text-darkBlack font-bold text-xl",children:["kr ",(y=x,y.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))]})]})]})]})]})});var y},h_e=kQ.object({photo:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).min(1,"Minst ett bilde kreves."),text:kQ.string().min(1,{message:"text m\xe5 best\xe5 av minst 2 tegn."}),full_fort_date:kQ.string().min(1,"Fullf\xf8rt den er p\xe5krevd")}),p_e=e=>{let{SelectIndex:r,setIsModalOpen:n,getData:i}=e;const a=AG({resolver:FG(h_e)}),s=Gr().pathname.split("/"),o=s.length>2?s[2]:null;(0,t.useEffect)((()=>{(async()=>{if(!o)return;const e=cm(g_,"bank_leads",o),t=await dg(e);if(t.exists()){var n,i;const e=t.data(),s=null===e||void 0===e||null===(n=e.Fremdriftsplan)||void 0===n||null===(i=n[r])||void 0===i?void 0:i.comment;s&&(a.setValue("text",s.text||""),a.setValue("full_fort_date",s.full_fort_date||""),a.setValue("photo",s.photo||[]))}})()}),[o,r]);const l=t.useRef(null),c=a.watch("photo"),u=async(e,t)=>{if(!e.length)return;let r=[...Array.isArray(c)?c:[]];const n=Array.from(e).map((async e=>{var t;if(e.size>2097152)return He.error("Image size must be less than 2MB.",{position:"top-right"}),null;const r="pdf"===(null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase())?"documents":"images",n=`${Date.now()}_${e.name}`,i=h_(v_,`${r}/${n}`);try{const t=await c_(i,e);return await d_(t.ref)}catch(a){return console.error("Error uploading file:",a),null}})),i=(await Promise.all(n)).filter(Boolean);i.length&&(r=[...r,...i],a.setValue(t,r),a.clearErrors(t))},d=async e=>{e.target.files&&await u(e.target.files,"photo")},h=()=>{var e;null===(e=l.current)||void 0===e||e.click()},p=async e=>{e.preventDefault(),e.dataTransfer.files&&await u(e.dataTransfer.files,"photo")},f=e=>{e.preventDefault()};return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...a,children:(0,V.jsxs)("form",{onSubmit:a.handleSubmit((async e=>{try{const t=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");if(o){const n=cm(g_,"bank_leads",String(o)),a={[`Fremdriftsplan.${r}.comment`]:e,updatedAt:t(new Date)};a[`Fremdriftsplan.${r}.status`]="Sent",await mg(n,a),He.success("Lagret",{position:"top-right"}),i()}n(!1)}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("h2",{className:"text-darkBlack text-xl font-semibold p-5 border-b border-[#DCDFEA]",children:"Grunnarbeider: Kommentar fra utbygger"}),(0,V.jsx)("div",{className:"mb-5 p-5",children:(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:a.control,name:"full_fort_date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Dato fullf\xf8rt av entreprepen\xf8r"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Dato fullf\xf8rt av entreprepen\xf8r",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"col-span-2",children:(0,V.jsx)(nW,{control:a.control,name:"text",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Legg igjen utfyllende tekst til banken:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(J3,{placeholder:"Beskrivelse ....",...t,className:`h-[160px] bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"flex items-center gap-5 col-span-2",children:[(0,V.jsx)(nW,{control:a.control,name:"photo",render:e=>{let{fieldState:t}=e;return(0,V.jsxs)(sW,{className:"w-max",children:[(0,V.jsx)("p",{className:(t.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Bilder fra jobben:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:f,onClick:h,onDrop:p,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"SVG, PNG, JPG, PDF or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:l,className:"hidden",accept:".svg, .png, .jpg, .jpeg, .gif, .pdf",onChange:d,name:"photo",multiple:!0})]})})})}),(0,V.jsx)(cW,{})]})}}),(0,V.jsx)("div",{children:c&&(0,V.jsx)("div",{className:"mt-5 flex items-center gap-5 flex-wrap",children:null===c||void 0===c?void 0:c.map(((e,t)=>{const r=e.toLowerCase().includes(".pdf");return(0,V.jsxs)("div",{className:"relative h-[140px] w-[140px]",children:[(0,V.jsx)("img",{src:r?Qwe:e,alt:r?"PDF file":"Uploaded image",className:"object-cover w-full h-full rounded-lg"}),(0,V.jsx)("div",{className:"absolute top-2 right-2 bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer",onClick:()=>{const e=c.filter(((e,r)=>r!==t));a.setValue("photo",e)},children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})]},t)}))})})]})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>n(!1)}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})})})},f_e=kQ.object({pdf:kQ.array(kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()])).min(1,"Minst ett bilde kreves."),text:kQ.string().min(1,{message:"text m\xe5 best\xe5 av minst 2 tegn."}),paid_date:kQ.string().min(1,"Dato utbetalt er p\xe5krevd"),pris:kQ.string().min(1,{message:"Pris m\xe5 best\xe5 av minst 1 tegn."})}),m_e=e=>{let{SelectIndex:r,setIsPDFModalOpen:n,getData:i}=e;const a=AG({resolver:FG(f_e)}),s=Gr().pathname.split("/"),o=s.length>2?s[2]:null;(0,t.useEffect)((()=>{(async()=>{if(!o)return;const e=cm(g_,"bank_leads",o),t=await dg(e);if(t.exists()){var n,i;const e=t.data(),s=null===e||void 0===e||null===(n=e.Fremdriftsplan)||void 0===n||null===(i=n[r])||void 0===i?void 0:i.payment;s&&(a.setValue("text",s.text||""),a.setValue("paid_date",s.paid_date||""),a.setValue("pris",s.pris||""),a.setValue("pdf",s.pdf||[]))}})()}),[o,r]);const l=t.useRef(null),c=a.watch("pdf"),[u,d]=(0,t.useState)(""),h=async(e,t)=>{if(!e.length)return;let r=[...Array.isArray(c)?c:[]];const n=Array.from(e).map((async e=>{if(e.size>2097152)return He.error("Image size must be less than 2MB.",{position:"top-right"}),null;const t=`${Date.now()}_${e.name}`,r=h_(v_,`documents/${t}`);try{const t=await c_(r,e);return await d_(t.ref)}catch(n){return console.error("Error uploading file:",n),null}})),i=(await Promise.all(n)).filter(Boolean);i.length&&(r=[...r,...i],a.setValue(t,r),a.clearErrors(t))},p=async e=>{e.target.files&&await h(e.target.files,"pdf")},f=()=>{var e;null===(e=l.current)||void 0===e||e.click()},m=async e=>{e.preventDefault(),e.dataTransfer.files&&await h(e.dataTransfer.files,"pdf")},g=e=>{e.preventDefault()};return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...a,children:(0,V.jsxs)("form",{onSubmit:a.handleSubmit((async e=>{try{const t=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",","");if(o){const n=cm(g_,"bank_leads",String(o)),a={[`Fremdriftsplan.${r}.payment`]:e,updatedAt:t(new Date)};a[`Fremdriftsplan.${r}.status`]=u,await mg(n,a),He.success("Lagret",{position:"top-right"}),i()}n(!1),d("")}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("h2",{className:"text-darkBlack text-xl font-semibold p-5 border-b border-[#DCDFEA]",children:"Grunnarbeider: Svar til utbygger"}),(0,V.jsx)("div",{className:"mb-5 p-5",children:(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,V.jsx)("div",{className:"col-span-2",children:(0,V.jsx)(nW,{control:a.control,name:"text",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Legg igjen utfyllende tekst til banken:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(J3,{placeholder:"Beskrivelse ....",...t,className:`h-[160px] bg-white rounded-[8px] border text-black\n                                  ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:a.control,name:"pris",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Pris fra"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Pris fra",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,inputMode:"numeric",type:"text",onChange:e=>{let{target:{value:r}}=e;return t.onChange({target:{name:"pris",value:r.replace(/\D/g,"")?new Intl.NumberFormat("no-NO").format(Number(r.replace(/\D/g,""))):""}})}})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:a.control,name:"paid_date",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"")+" mb-[6px] text-sm",children:"Forventet oppstart"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Forventet oppstart",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"date"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"flex items-center gap-5 col-span-2",children:[(0,V.jsx)(nW,{control:a.control,name:"pdf",render:e=>{let{fieldState:t}=e;return(0,V.jsxs)(sW,{className:"w-max",children:[(0,V.jsx)("p",{className:(t.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Bilder fra jobben:"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"flex items-center gap-5 w-full",children:(0,V.jsx)("div",{className:"relative w-full",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-3 cursor-pointer w-full",onDragOver:g,onClick:f,onDrop:m,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-sm text-center truncate w-full",children:"PDF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:l,className:"hidden",accept:".pdf",onChange:p,name:"pdf"})]})})})}),(0,V.jsx)(cW,{})]})}}),(0,V.jsx)("div",{children:c&&(0,V.jsx)("div",{className:"mt-5 flex items-center gap-5 flex-wrap",children:null===c||void 0===c?void 0:c.map(((e,t)=>(0,V.jsxs)("div",{className:"relative h-[140px] w-[140px]",children:[(0,V.jsx)("img",{src:Qwe,alt:"logo",className:"object-cover w-full h-full rounded-lg"}),(0,V.jsx)("div",{className:"absolute top-2 right-2 bg-[#FFFFFFCC] rounded-[12px] p-[6px] cursor-pointer",onClick:()=>{const e=c.filter(((e,r)=>r!==t));a.setValue("pdf",e)},children:(0,V.jsx)("img",{src:Y3,alt:"delete"})})]},t)))})})]})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4 left-0",children:[(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:()=>n(!1)}),(0,V.jsx)(HT,{text:"Avvis",className:"border border-[#A20000] bg-[#A20000] text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit",onClick:()=>{d("Reject")}}),(0,V.jsx)(HT,{text:"Godkjenn",className:"border border-[#099250] bg-[#099250] text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit",onClick:()=>{d("Approve")}})]})]})})})};function g_e(e){let t=e&&e.replace(" NOK","");return"kr "+(t&&t.replace(/\s+/g," "))}const v_e=e=>{let{bankData:r,getData:n}=e;const i=Gr().pathname.split("/"),a=i.length>2?i[2]:null,[s,o]=(0,t.useState)(0),l=["Byggekontrakt","Grunnarbeider","Betongarbeid","LeveringByggesett","TettBygg","FerdigUte","FerdigInne","Forh\xe5ndsbefaring","Overtakelse"],c=null!==r&&void 0!==r&&r.Fremdriftsplan?Object.entries(null===r||void 0===r?void 0:r.Fremdriftsplan).filter((e=>{let[t]=e;return"id"!==t})).map((e=>{let[t,r]=e;return{name:t,...r}})).sort(((e,t)=>l.indexOf(e.name)-l.indexOf(t.name))):[];(0,t.useEffect)((()=>{if(c&&c.length>0){const e=c.reduce(((e,t,r)=>t.comment?r:e),-1);-1!==e&&o(e+1)}}),[c]);const[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"mx-10 rounded-lg mb-20",children:[(0,V.jsx)("h3",{className:"text-darkBlack text-xl font-semibold mb-2",children:"Fremdrifts- og faktureringsplan"}),(0,V.jsxs)("p",{className:"text-darkBlack text-sm font-medium mb-6",children:["Her oppdaterer du status p\xe5 fremdriften slik at banken f\xe5r oppdatert informasjon om fremdriften."," "]}),(0,V.jsx)("div",{className:"flex flex-col gap-6 mb-6",children:(0,V.jsx)(Xwe,{steps:c,currIndex:s,Style:"true"})}),(0,V.jsx)("div",{className:"flex flex-col gap-6",children:c&&c.map(((e,t)=>{var r,i,o;let l="";if(null!==e&&void 0!==e&&null!==(r=e.comment)&&void 0!==r&&r.full_fort_date){const t=new Date(e.date),r=new Date(e.comment.full_fort_date),n=SS(t,Number(e.day)||0);if(FS(n)&&FS(r)){const e=US(r,n);l=`(${e>=0?"+":""}${e} dager)`}}return(0,V.jsxs)("div",{className:`py-3 px-4 bg-[#FFFFFF14] rounded-lg border flex flex-col gap-4 ${"Approve"===e.status?"border-[#61C4A4]":"Unpaid"===e.status||"Reject"===e.status?"border-[#FFAFAF]":"Sent"===e.status&&"border-[#FFB795]"}`,children:[(0,V.jsxs)("div",{className:`flex items-center gap-2 justify-between ${s>t&&"cursor-pointer"} `,onClick:()=>{s>t&&(e=>{m((t=>t===e?null:e))})(t)},children:[(0,V.jsxs)("h4",{className:"text-darkBlack font-medium text-sm md:text-base desktop:text-lg",children:["Step ",t+1,":"," ",(0,V.jsx)("span",{className:"font-bold",children:e.name})]}),s>t?(0,V.jsxs)("div",{className:"flex items-center gap-4",children:["Approve"===e.status?(0,V.jsxs)("div",{className:"bg-[#E0FFF5] rounded-[16px] py-0.5 px-2 text-xs text-[#00857A]",children:["Betalt ",g_e(e.pris)," (",e.date&&e.date.split("-").reverse().join("."),")"]}):"Reject"===e.status?(0,V.jsx)("div",{className:"bg-[#FFE0E0] rounded-[16px] py-0.5 px-2 text-xs text-[#A20000]",children:"Avvis"}):"Sent"===e.status&&(0,V.jsx)("div",{className:"bg-[#FFEAE0] rounded-[16px] py-0.5 px-2 text-xs text-[#C84D00]",children:"Send Information"}),"Approve"!==e.status&&!(null!==e&&void 0!==e&&e.payment)&&(0,V.jsx)("div",{className:"bg-[#6941C6] rounded-[16px] py-0.5 px-2 text-xs text-white cursor-pointer",onClick:t=>{t.preventDefault(),t.stopPropagation(),v(!0),p(e.name)},children:"Pay for this Step"}),(0,V.jsx)(zZ,{className:"text-primary transition-transform duration-200 "+(f===t?"rotate-180":"")})]}):s===t?(0,V.jsxs)("div",{className:"flex items-center gap-4",children:[(0,V.jsx)("span",{className:"text-primary text-sm font-semibold cursor-pointer",onClick:()=>{d(!0),p(e.name)},children:"Fullf\xf8r steget"}),(0,V.jsx)("div",{className:"bg-[#FFE0E0] rounded-[16px] py-0.5 px-2 text-xs text-[#A20000]",children:"Ubetalt"})]}):s<t&&(0,V.jsx)("div",{className:"bg-[#FFE0E0] rounded-[16px] py-0.5 px-2 text-xs text-[#A20000]",children:"Ubetalt"})]}),(0,V.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,V.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm",children:"Forventet oppstart"}),(0,V.jsx)("h6",{className:"text-darkBlack font-medium",children:(null===e||void 0===e?void 0:e.date)&&(null===e||void 0===e?void 0:e.date.split("-").reverse().join("."))})]}),(null===e||void 0===e?void 0:e.comment)&&(0,V.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm",children:"Fullf\xf8rt"}),(0,V.jsxs)("h6",{className:"text-darkBlack font-medium",children:[e.comment.full_fort_date.split("-").reverse().join(".")," ",(0,V.jsx)("span",{className:"text-[#30374F99]",children:l})]})]}),(0,V.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm",children:"Antatt antall dager til \xe5 fullf\xf8re"}),(0,V.jsxs)("h6",{className:"text-darkBlack font-medium",children:[null===e||void 0===e?void 0:e.day," dager"]})]}),(0,V.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm",children:"Utbetaling ihht. faktureringsplan"}),(0,V.jsx)("h6",{className:"text-darkBlack font-medium",children:g_e(e.pris)})]})]}),s>t&&f===t&&(0,V.jsxs)("div",{className:"border border-[#EAECF0] rounded-lg",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 p-4 border-b border-[#EAECF0]",children:[(0,V.jsx)("h3",{className:"text-darkBlack font-semibold",children:"Grunnarbeider: Kommentar fra utbygger"}),(0,V.jsx)(GT,{className:"text-primary cursor-pointer",onClick:()=>{d(!0),p(e.name)}})]}),(0,V.jsxs)("div",{className:"p-4",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-base mb-6",children:e.comment.text}),(0,V.jsxs)("div",{children:[(0,V.jsx)("h4",{className:"text-darkBlack font-semibold",children:"Bilder fra jobben:"}),e.comment.photo&&(0,V.jsx)("div",{className:"mt-5 flex items-center gap-5 flex-wrap",children:null===(i=e.comment.photo)||void 0===i?void 0:i.map(((e,t)=>{const r=e.toLowerCase().includes(".pdf");return(0,V.jsx)("div",{className:"relative h-[140px] w-[140px]",children:(0,V.jsx)("img",{src:r?Qwe:e,alt:r?"PDF file":"Uploaded image",className:"object-cover w-full h-full rounded-lg"})},t)}))})]})]})]}),s>t&&f===t&&(null===e||void 0===e?void 0:e.payment)&&(0,V.jsxs)("div",{className:"border border-[#EAECF0] rounded-lg",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 p-4 border-b border-[#EAECF0]",children:[(0,V.jsx)("h3",{className:"text-darkBlack font-semibold",children:"Grunnarbeider: Svar til utbygger"}),"Approve"!==e.status&&(0,V.jsx)(GT,{className:"text-primary cursor-pointer",onClick:()=>{v(!0),p(e.name)}})]}),(0,V.jsxs)("div",{className:"p-4",children:[(0,V.jsx)("p",{className:"text-[#5D6B98] text-base mb-6",children:e.payment.text}),(0,V.jsxs)("div",{children:[(0,V.jsx)("h4",{className:"text-darkBlack font-semibold",children:"Dokumenter"}),e.payment.pdf&&(0,V.jsx)("div",{className:"mt-5 flex items-center gap-5 flex-wrap",children:null===(o=e.payment.pdf)||void 0===o?void 0:o.map(((e,t)=>(0,V.jsx)("div",{className:"relative h-[140px] w-[140px]",children:(0,V.jsx)("img",{src:Qwe,alt:"logo",className:"object-cover w-full h-full rounded-lg"})},t)))})]})]})]}),s>t&&f===t&&(0,V.jsxs)("div",{className:"flex justify-end items-center gap-4",children:[(0,V.jsx)(HT,{text:"Avvis",className:"border border-[#A20000] bg-[#A20000] text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit",onClick:async()=>{try{if(a){const t=cm(g_,"bank_leads",String(a)),r={[`Fremdriftsplan.${e.name}.status`]:"Reject"};await mg(t,r),ge.success("Status Lagret",{position:"top-right"}),n()}}catch(t){console.error("Firestore operation failed:",t),ge.error("Something went wrong. Please try again.",{position:"top-right"})}}}),(0,V.jsx)(HT,{text:"Godkjenn",className:"border border-[#099250] bg-[#099250] text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit",onClick:async()=>{try{if(a){const t=cm(g_,"bank_leads",String(a)),r={[`Fremdriftsplan.${e.name}.status`]:"Approve"};await mg(t,r),ge.success("Status Lagret",{position:"top-right"}),n()}}catch(t){console.error("Firestore operation failed:",t),ge.error("Something went wrong. Please try again.",{position:"top-right"})}}})]})]},t)}))})]}),u&&(0,V.jsx)(sA,{onClose:()=>{d(!u)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 mx-4",children:(0,V.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden w-[80%]",children:(0,V.jsx)(p_e,{SelectIndex:h,setIsModalOpen:d,getData:n})})})}),g&&(0,V.jsx)(sA,{onClose:()=>{v(!g)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 mx-4",children:(0,V.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden w-[80%]",children:(0,V.jsx)(m_e,{SelectIndex:h,setIsPDFModalOpen:v,getData:n})})})})]})},x_e=e=>{let{getData:r}=e;const n=Gr().pathname.split("/"),i=n.length>2?n[2]:null,[a,s]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]);(0,t.useEffect)((()=>{if(!i)return;(async()=>{const e=await b_(i);var t,r,n;e&&e.Documenter&&(s(null===e||void 0===e||null===(t=e.Documenter)||void 0===t?void 0:t.Entrepren\u00f8rgaranti),l(null===e||void 0===e||null===(r=e.Documenter)||void 0===r?void 0:r.Forsikringsbevis),u(null===e||void 0===e||null===(n=e.Documenter)||void 0===n?void 0:n.Kontrakt))})()}),[i]);const[d,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),v=e=>{f(e),h(!0)},x=async e=>{try{if(!e)return void console.error("File path is missing!");const t=h_(p_(),e),r=await d_(t),n=document.createElement("a");n.href=r,n.target="_blank",n.rel="noopener noreferrer",n.download=e.split("/").pop()||"download",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(t){console.error("Error downloading file:",t)}};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"mx-10 mb-28",children:(0,V.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,V.jsxs)("div",{className:"rounded-lg border-[#DCDFEA] border",children:[(0,V.jsx)("h4",{className:"text-darkBlack text-xl font-semibold mb-4 p-5 border-b border-[#DCDFEA]",children:"Entrepren\xf8rgaranti"}),(0,V.jsx)("div",{className:"p-5",children:a&&a.length>0?(0,V.jsx)("div",{className:"grid grid-cols-2 gap-6",children:null===a||void 0===a?void 0:a.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsxs)("div",{className:"flex items-center gap-6",children:[(0,V.jsx)("img",{src:g4,alt:"delete",className:"cursor-pointer",onClick:()=>{v(t),g("Entrepren\xf8rgaranti")}}),(0,V.jsx)("img",{src:z3,alt:"download",className:"cursor-pointer",onClick:()=>x(e)})]})]},t)))}):(0,V.jsx)("p",{className:"text-gray",children:"No Entrepren\xf8rgaranti found!"})})]}),(0,V.jsxs)("div",{className:"rounded-lg border-[#DCDFEA] border",children:[(0,V.jsx)("h4",{className:"text-darkBlack text-xl font-semibold mb-4 p-5 border-b border-[#DCDFEA]",children:"Forsikringsbevis"}),(0,V.jsx)("div",{className:"p-5",children:o&&o.length>0?(0,V.jsx)("div",{className:"grid grid-cols-2 gap-6",children:null===o||void 0===o?void 0:o.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsxs)("div",{className:"flex items-center gap-6",children:[(0,V.jsx)("img",{src:g4,alt:"delete",className:"cursor-pointer",onClick:()=>{v(t),g("Forsikringsbevis")}}),(0,V.jsx)("img",{src:z3,alt:"download",className:"cursor-pointer",onClick:()=>x(e)})]})]},t)))}):(0,V.jsx)("p",{className:"text-gray",children:"No Forsikringsbevis found!"})})]}),(0,V.jsxs)("div",{className:"rounded-lg border-[#DCDFEA] border",children:[(0,V.jsxs)("h4",{className:"text-darkBlack text-xl font-semibold mb-4 p-5 border-b border-[#DCDFEA]",children:["Kontrakt ",(0,V.jsx)("span",{className:"text-[#5D6B98]",children:"(eks. NS-3425)"})]}),(0,V.jsx)("div",{className:"p-5",children:c&&c.length>0?(0,V.jsx)("div",{className:"grid grid-cols-2 gap-6",children:null===c||void 0===c?void 0:c.map(((e,t)=>(0,V.jsxs)("div",{className:"border border-gray2 rounded-lg p-3 bg-[#F9FAFB] flex items-center justify-between relative w-full",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4 truncate",children:[(0,V.jsx)("div",{className:"border-[4px] border-lightPurple rounded-full flex items-center justify-center",children:(0,V.jsx)("div",{className:"bg-darkPurple w-7 h-7 rounded-full flex justify-center items-center",children:(0,V.jsx)("img",{src:Q3,alt:"file"})})}),(0,V.jsx)(H3,{file:e})]}),(0,V.jsxs)("div",{className:"flex items-center gap-6",children:[(0,V.jsx)("img",{src:g4,alt:"delete",onClick:()=>{v(t),g("Kontrakt")},className:"cursor-pointer"}),(0,V.jsx)("img",{src:z3,alt:"download",className:"cursor-pointer",onClick:()=>x(e)})]})]},t)))}):(0,V.jsx)("p",{className:"text-gray",children:"No Kontrakt found!"})})]})]})}),d&&(0,V.jsx)(sA,{onClose:()=>{d?(h(!1),g(null)):h(!0)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,V.jsx)("p",{className:"mb-4",children:"Er du sikker p\xe5 at du vil slette?"}),(0,V.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,V.jsx)("div",{onClick:()=>{h(!1),g(null),f(null)},children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",onClick:async()=>{if(null!==p&&m&&i)try{let e,t;if("Entrepren\xf8rgaranti"===m?(e=a,t=s):"Forsikringsbevis"===m?(e=o,t=l):"Kontrakt"===m&&(e=c,t=u),e&&Array.isArray(e)&&e.length>0){const n=e.filter(((e,t)=>t!==p)),a=cm(g_,"bank_leads",i);await mg(a,{[`Documenter.${m}`]:n}),t&&t(n),He.success("Deleted successfully",{position:"top-right"}),r()}}catch(e){console.error("Error deleting file:",e),He.error("Failed to delete file. Please try again.")}h(!1),f(null),g(null)}})]})]})})})]})},y_e=()=>{var e,r,n,i,a,s;const o=Kr(),l=Gr().pathname.split("/"),c=l.length>2?l[2]:null,[u,d]=(0,t.useState)(),h=(0,t.useCallback)((async()=>{if(c)try{const e=await b_(c);e&&d(e)}catch(e){console.error("Failed to fetch data:",e)}}),[c]);(0,t.useEffect)((()=>{c&&h()}),[h]);const[p,f]=(0,t.useState)(0),m=[{label:"Summary",icon:(0,V.jsx)(Gwe,{})},{label:"Dokumentasjon",icon:(0,V.jsx)(Pwe,{})},{label:"Fremdriftsplan",icon:(0,V.jsx)(Wwe,{})}];return(0,t.useEffect)((()=>{const e=setTimeout((()=>{window.scrollTo(0,0)}),0);return()=>clearTimeout(e)}),[p]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"px-8 pt-4 pb-8 flex flex-col gap-6 bg-[#F5F3FF]",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1",children:[(0,V.jsx)("span",{className:"text-[#7839EE] text-sm font-medium cursor-pointer",onClick:()=>o("/agent-leads"),children:"Leads sendt til banken"}),(0,V.jsx)(KV,{className:"h-4 w-4 text-[#5D6B98]"}),(0,V.jsx)("span",{className:"text-[#5D6B98] text-sm",children:"Detaljer om potensielle kunder"})]}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,V.jsxs)("div",{className:"text-darkBlack text-[2rem] font-medium",children:[null===u||void 0===u||null===(e=u.Kunden)||void 0===e||null===(r=e.Kundeinformasjon[0])||void 0===r?void 0:r.f_name," ",null===u||void 0===u||null===(n=u.Kunden)||void 0===n||null===(i=n.Kundeinformasjon[0])||void 0===i?void 0:i.l_name," ",(0,V.jsxs)("span",{className:"text-[#5D6B98] text-xl",children:["(",c,")"]})]}),(0,V.jsx)("div",{children:"Sent"===(null===u||void 0===u?void 0:u.status)?(0,V.jsx)("p",{className:"text-xs text-[#A27200] w-max bg-[#FFF6E0] py-0.5 px-2 rounded-[16px]",children:null===u||void 0===u?void 0:u.status}):"Rejected"===(null===u||void 0===u?void 0:u.status)?(0,V.jsx)("p",{className:"text-xs text-[#A20000] w-max bg-[#FFE0E0] py-0.5 px-2 rounded-[16px]",children:null===u||void 0===u?void 0:u.status}):"Approved"===(null===u||void 0===u?void 0:u.status)?(0,V.jsx)("p",{className:"text-xs text-[#00857A] bg-[#E0FFF5] w-max py-0.5 px-2 rounded-[16px]",children:null===u||void 0===u?void 0:u.status}):"In Process"===(null===u||void 0===u?void 0:u.status)&&(0,V.jsx)("p",{className:"text-xs text-[#C84D00] bg-[#FFEAE0] w-max py-0.5 px-2 rounded-[16px]",children:null===u||void 0===u?void 0:u.status})})]}),(0,V.jsx)("p",{className:"text-[#5D6B98] text-sm md:text-base desktop:text-lg font-medium",children:null===u||void 0===u||null===(a=u.plotHusmodell)||void 0===a||null===(s=a.plot)||void 0===s?void 0:s.address})]})]}),(0,V.jsxs)("div",{className:"relative",children:[(0,V.jsx)("div",{className:"flex items-center justify-between gap-2 mb-6 px-10 mt-4",children:(0,V.jsx)("div",{className:"flex gap-4 rounded-lg bg-white p-[6px]",style:{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A"},children:m.map(((e,t)=>(0,V.jsxs)("button",{className:`${c?"cursor-pointer":"cursor-auto"} flex items-center gap-2 text-darkBlack py-2 px-3 rounded-lg ${p===t?"font-semibold bg-[#7839EE] text-white":"text-[#4D4D4D]"}`,onClick:()=>f(t),children:[e.icon,e.label]},t)))})}),0===p&&(0,V.jsx)(d_e,{bankData:u}),1===p&&(0,V.jsx)(x_e,{getData:h}),2===p&&(0,V.jsx)(v_e,{bankData:u,getData:h})]})]})},b_e=kQ.object({photo:kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()]),f_name:kQ.string().min(1,{message:"Fornavn m\xe5 best\xe5 av minst 2 tegn."}),l_name:kQ.string().min(1,{message:"Etternavn m\xe5 best\xe5 av minst 2 tegn."}),email:kQ.string().email({message:"Vennligst skriv inn en gyldig e-postadresse."}).min(1,{message:"E-posten m\xe5 v\xe6re p\xe5 minst 2 tegn."}),password:kQ.string().min(8,{message:"Passordet m\xe5 v\xe6re minst 8 tegn langt."}).regex(/[A-Z]/,{message:"Passordet m\xe5 inneholde minst \xe9n stor bokstav."}).regex(/[a-z]/,{message:"Passordet m\xe5 inneholde minst \xe9n liten bokstav."}).regex(/[0-9]/,{message:"Passordet m\xe5 inneholde minst ett tall."}).regex(/[@$!%*?&]/,{message:"Passordet m\xe5 inneholde minst ett spesialtegn."})});const w_e=()=>{const e=AG({resolver:FG(b_e)}),r=t.useRef(null),n=Gr().pathname.split("/"),i=n.length>2?n[2]:null,a=Kr(),[s,o]=(0,t.useState)(!1),l=async(t,r)=>{if(!t)return;if(t.size>2097152)return void He.error("Image size must be less than 2MB.",{position:"top-right"});const n=`${Date.now()}_${t.name}`,i=h_(v_,`images/${n}`);try{const n=await c_(i,t),a=await d_(n.ref);e.setValue(r,a),e.clearErrors(r)}catch(a){console.error(`Error uploading file for ${r}:`,a)}},c=async e=>{const t=e.target.files;t&&t[0]&&await l(t[0],"photo")},u=()=>{var e;null===(e=r.current)||void 0===e||e.click()},d=async e=>{e.preventDefault();const t=e.dataTransfer.files;t&&t[0]&&await l(t[0],"photo")},h=e=>{e.preventDefault()},p=e.watch("photo");(0,t.useEffect)((()=>{if(!i)return;(async()=>{const t=await __(i);t&&Object.entries(t).forEach((t=>{let[r,n]=t;"password"===r&&e.setValue(r,n),void 0!==n&&null!==n&&e.setValue(r,n)}))})()}),[e,i]);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3",children:[(0,V.jsx)(ti,{to:"/Brukeradministrasjon",className:"text-gray text-xs md:text-sm font-medium",children:"Brukere"}),(0,V.jsx)(KV,{className:"text-gray2 w-4 h-4"}),(0,V.jsx)("span",{className:"text-primary text-xs md:text-sm font-medium",children:"Legg til nye brukere"})]}),(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Legg til bruker"}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start gap-4 lg:gap-8",children:[(0,V.jsx)("div",{className:"w-max",children:(0,V.jsx)("h5",{className:"text-black text-sm font-medium whitespace-nowrap mr-16",children:"Brukerdetaljer"})}),(0,V.jsx)("div",{className:"w-full shadow-shadow2 rounded-lg overflow-hidden relative",children:(0,V.jsx)(tW,{...e,children:(0,V.jsxs)("form",{onSubmit:e.handleSubmit((async e=>{try{const r=cm(g_,"admin",e.email),n=await dg(r),s=i||yW(),l=(t=e.password,Ope.getRounds(t)?t:Ope.hashSync(t,10));i?(await mg(r,{...e,id:s,password:l,updatedAt:new Date,role:"Bankansvarlig"}),He.success("Lagret",{position:"top-right"}),l===e.password?(o(!1),a("/Brukeradministrasjon")):o(!0)):n.exists()?He.error("Already Added!",{position:"top-right"}):(await fg(r,{...e,id:s,role:"Bankansvarlig",password:l,createdAt:new Date,updatedAt:new Date}),await fetch("https://nh989m12uk.execute-api.eu-north-1.amazonaws.com/prod/banklead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"send-login",email:e.email,firstName:e.f_name,lastName:e.l_name,password:e.password,link:"https://admin.mintomt.no/",company:"Mintomt"})}),He.success("Admin created successfully!",{position:"top-right"}),o(!0))}catch(r){console.error("Firestore operation failed:",r),He.error("Something went wrong. Please try again.",{position:"top-right"})}var t})),className:"relative",children:[(0,V.jsx)("div",{className:"p-4 laptop:p-6",children:(0,V.jsxs)("div",{className:"flex flex-col md:grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"col-span-2 flex flex-col md:flex-row gap-4 md:gap-6 items-center",children:[(0,V.jsx)("div",{className:"w-full md:w-1/2",children:(0,V.jsx)(nW,{control:e.control,name:"photo",render:()=>(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-1.5 md:gap-3 cursor-pointer",onDragOver:h,onClick:u,onDrop:d,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:"SVG, PNG, JPG or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:r,className:"hidden",accept:".svg, .png, .jpg, .jpeg, .gif",onChange:c,name:"photo"})]})})}),(0,V.jsx)(cW,{})]})})}),(0,V.jsx)("div",{className:"w-1/2",children:"string"===typeof p&&(0,V.jsx)("img",{src:p,alt:"logo",height:"140px",width:"140px"})})]}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"f_name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Fornavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Fornavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"l_name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Etternavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Etternavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"email",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"E-post"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn E-post",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"password",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Passord"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Passord",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"password"})})}),(0,V.jsx)(cW,{})]})}})})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4",children:[(0,V.jsx)("div",{onClick:()=>e.reset(),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})})})]})]}),s&&(0,V.jsx)(sA,{onClose:()=>{o(!s)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,V.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"E-post:"}),(0,V.jsx)("span",{className:"text-base",children:e.getValues("email")})]}),(0,V.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"Password:"}),(0,V.jsx)("span",{className:"text-base",children:e.getValues("password")})]}),(0,V.jsx)("br",{}),(0,V.jsxs)("p",{children:[(0,V.jsx)("span",{className:"font-semibold",children:"Note:"})," Dette er din e-post og passord. vennligst send dette passordet til denne brukeren."]}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>o(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:()=>a("/Brukeradministrasjon"),children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})})]})},__e=kQ.object({name:kQ.string().min(1,{message:"Navn m\xe5 best\xe5 av minst 2 tegn."}),Adresse:kQ.string().min(1,{message:"Adresse m\xe5 best\xe5 av minst 2 tegn."}),supplier:kQ.string().min(1,{message:"Leverand\xf8r m\xe5 velges"})}),k_e=e=>{let{setIsOfficePopup:r,setDropdownOpen:n}=e;const i=AG({resolver:FG(__e)}),a=Gr().pathname.split("/"),s=a.length>2?a[2]:null,[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&u(e)})()}),[]);(0,t.useEffect)((()=>{(async()=>{try{const e=(await pg(lm(g_,"suppliers"))).docs.map((e=>({id:e.id,...e.data()})));l(e)}catch(e){console.error("Error fetching husmodell data:",e)}})()}),[]);(0,t.useEffect)((()=>{if(!s)return;(async()=>{const e=await __(s);e&&Object.entries(e).forEach((e=>{let[t,r]=e;"password"===t&&i.setValue(t,r),void 0!==r&&null!==r&&i.setValue(t,r)}))})()}),[i,s]);const[d,h]=(0,t.useState)(!1);return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(tW,{...i,children:(0,V.jsxs)("form",{onSubmit:i.handleSubmit((async e=>{try{const t=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",",""),n=s||yW(),i=cm(g_,"office",n);s?(await mg(i,{data:e,id:n,updatedAt:t(new Date)}),He.success("Lagret",{position:"top-right"})):(await fg(i,{data:e,id:n,updatedAt:t(new Date),createdAt:t(new Date),createDataBy:{email:null===c||void 0===c?void 0:c.email,photo:null===c||void 0===c?void 0:c.photo,name:null!==c&&void 0!==c&&c.f_name?`${null===c||void 0===c?void 0:c.f_name} ${null===c||void 0===c?void 0:c.l_name}`:null===c||void 0===c?void 0:c.name}}),He.success("Added successfully",{position:"top-right"})),r(!1)}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsxs)("div",{className:"p-5 laptop:p-6",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2 justify-between mb-6",children:[(0,V.jsx)("h4",{className:"text-darkBlack text-xl font-semibold",children:"Opprett nytt kontor"}),(0,V.jsx)(B_,{className:"text-primary cursor-pointer",onClick:()=>r(!1)})]}),(0,V.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:i.control,name:"name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Navn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Navn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:i.control,name:"Adresse",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Adresse"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Adresse",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:i.control,name:"supplier",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Leverand\xf8rer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,onOpenChange:e=>{h(e),n(e)},open:d,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Select Leverand\xf8rer"})}),(0,V.jsx)(YZ,{className:"bg-white",onClick:e=>e.stopPropagation(),children:(0,V.jsx)(GZ,{children:null===o||void 0===o?void 0:o.map(((e,t)=>(0,V.jsx)(XZ,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.company_name},t)))})})]})})}),(0,V.jsx)(cW,{})]})}})})]})]}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4",children:[(0,V.jsx)("div",{onClick:()=>i.reset(),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})})})},S_e=kQ.object({photo:kQ.union([kQ.instanceof(File).refine((e=>null===e||e.size<=10485760),{message:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 10 MB."}),kQ.string()]),f_name:kQ.string().min(1,{message:"Fornavn m\xe5 best\xe5 av minst 2 tegn."}),l_name:kQ.string().min(1,{message:"Etternavn m\xe5 best\xe5 av minst 2 tegn."}),email:kQ.string().email({message:"Vennligst skriv inn en gyldig e-postadresse."}).min(1,{message:"E-posten m\xe5 v\xe6re p\xe5 minst 2 tegn."}),modulePermissions:kQ.array(kQ.object({id:kQ.number(),name:kQ.string(),permissions:kQ.object({all:kQ.boolean(),add:kQ.boolean(),edit:kQ.boolean(),delete:kQ.boolean(),duplicate:kQ.boolean().optional()})})).min(1,"At least one permission is required"),supplier:kQ.string().min(1,{message:"Leverand\xf8r m\xe5 velges"}),office:kQ.string().min(1,{message:"Kontor m\xe5 velges"}),is_admin:kQ.boolean(),password:kQ.string().min(8,{message:"Passordet m\xe5 v\xe6re minst 8 tegn langt."}).regex(/[A-Z]/,{message:"Passordet m\xe5 inneholde minst \xe9n stor bokstav."}).regex(/[a-z]/,{message:"Passordet m\xe5 inneholde minst \xe9n liten bokstav."}).regex(/[0-9]/,{message:"Passordet m\xe5 inneholde minst ett tall."}).regex(/[@$!%*?&]/,{message:"Passordet m\xe5 inneholde minst ett spesialtegn."})});const j_e=()=>{var e,r;const n=AG({resolver:FG(S_e),defaultValues:{f_name:"",l_name:"",email:"",modulePermissions:[],supplier:"",office:"",is_admin:!1,password:""}}),i=t.useRef(null),a=Gr().pathname.split("/"),s=a.length>2?a[2]:null,o=Kr(),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(!1),h=async(e,t)=>{if(!e)return;if(e.size>2097152)return void He.error("Image size must be less than 2MB.",{position:"top-right"});const r=`${Date.now()}_${e.name}`,i=h_(v_,`images/${r}`);try{const r=await c_(i,e),a=await d_(r.ref);n.setValue(t,a),n.clearErrors(t)}catch(a){console.error(`Error uploading file for ${t}:`,a)}},[p,f]=(0,t.useState)(null),[m,g]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&(null!==e&&void 0!==e&&e.role&&g(null===e||void 0===e?void 0:e.role),null!==e&&void 0!==e&&e.supplier&&f(null===e||void 0===e?void 0:e.supplier))})()}),[]);(0,t.useEffect)((()=>{(async()=>{try{let e=(await pg(lm(g_,"suppliers"))).docs.map((e=>({id:e.id,...e.data()})));m&&"Agent"===m&&(e=e.filter((e=>e.id===p))),c(e)}catch(e){console.error("Error fetching husmodell data:",e)}})()}),[m]);const[v,x]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{try{let e;if(n.watch("supplier")){const t=n.getValues("supplier"),r=Zm(lm(g_,"office"),Xm("data.supplier","==",t));e=await pg(r)}else e=await pg(lm(g_,"office"));const t=e.docs.map((e=>({id:e.id,...e.data()})));x(t)}catch(e){console.error("Error fetching husmodell data:",e)}})()}),[n.watch("supplier")]);const y=async e=>{const t=e.target.files;t&&t[0]&&await h(t[0],"photo")},b=()=>{var e;null===(e=i.current)||void 0===e||e.click()},w=async e=>{e.preventDefault();const t=e.dataTransfer.files;t&&t[0]&&await h(t[0],"photo")},_=e=>{e.preventDefault()},k=n.watch("photo"),[S,j]=(0,t.useState)([{id:1,name:"Husmodell",permissions:{all:!0,add:!0,edit:!0,delete:!0,duplicate:!0}}]),E=[{key:"all",label:"All"},{key:"add",label:"Add"},{key:"edit",label:"Edit"},{key:"delete",label:"Delete"},{key:"duplicate",label:"Duplicate"}];(0,t.useEffect)((()=>{n.setValue("modulePermissions",S)}),[n,S]),(0,t.useEffect)((()=>{if(!s)return;(async()=>{const e=await __(s);e&&Object.entries(e).forEach((e=>{let[t,r]=e;"password"===t&&n.setValue(t,r),void 0!==r&&null!==r&&n.setValue(t,r),"modulePermissions"===t&&j(r)}))})()}),[n,s,l.length>0,v.length>0]);const[C,N]=(0,t.useState)(!1),[T,P]=(0,t.useState)(!1);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"px-4 md:px-6 pt-6 pb-16 flex flex-col gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"flex items-center gap-1.5 md:gap-3",children:[(0,V.jsx)(ti,{to:"/Brukeradministrasjon",className:"text-gray text-xs md:text-sm font-medium",children:"Brukere"}),(0,V.jsx)(KV,{className:"text-gray2 w-4 h-4"}),(0,V.jsx)("span",{className:"text-primary text-xs md:text-sm font-medium",children:"Legg til nye brukere"})]}),(0,V.jsx)("h1",{className:"text-darkBlack font-medium text-xl md:text-2xl desktop:text-[30px]",children:"Legg til bruker"}),(0,V.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start gap-4 lg:gap-8",children:[(0,V.jsx)("div",{className:"w-max",children:(0,V.jsx)("h5",{className:"text-black text-sm font-medium whitespace-nowrap mr-16",children:"Brukerdetaljer"})}),(0,V.jsx)("div",{className:"w-full shadow-shadow2 rounded-lg overflow-hidden relative",children:(0,V.jsx)(tW,{...n,children:(0,V.jsxs)("form",{onSubmit:n.handleSubmit((async e=>{try{const n=cm(g_,"admin",e.email),i=await dg(n),a=s||yW(),l=(r=e.password,Ope.getRounds(r)?r:Ope.hashSync(r,10));if(s)await mg(n,{...e,id:a,password:l,updatedAt:new Date,role:"Agent"}),He.success("Lagret",{position:"top-right"}),l===e.password?(d(!1),o("/Brukeradministrasjon")):d(!0);else if(i.exists())He.error("Already Added!",{position:"top-right"});else{var t;const r=v.find((t=>t.id===e.office));await fg(n,{...e,id:a,password:l,createdAt:new Date,role:"Agent",updatedAt:new Date}),await fetch("https://nh989m12uk.execute-api.eu-north-1.amazonaws.com/prod/banklead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"send-login",email:e.email,firstName:e.f_name,lastName:e.l_name,password:e.password,link:"https://admin.mintomt.no/",company:null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.name})}),He.success("Admin created successfully!",{position:"top-right"}),d(!0)}}catch(n){console.error("Firestore operation failed:",n),He.error("Something went wrong. Please try again.",{position:"top-right"})}var r})),className:"relative",children:[(0,V.jsxs)("div",{className:"p-4 laptop:p-6",children:[(0,V.jsx)("div",{className:"text-primary flex items-center justify-end mb-4 font-medium cursor-pointer",onClick:()=>N(!0),children:"+ Opprett nytt kontor"}),(0,V.jsxs)("div",{className:"flex flex-col md:grid md:grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsxs)("div",{className:"col-span-2 flex flex-col md:flex-row gap-4 md:gap-6 items-center",children:[(0,V.jsx)("div",{className:"w-full md:w-1/2",children:(0,V.jsx)(nW,{control:n.control,name:"photo",render:()=>(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)("div",{className:"border border-gray2 rounded-[8px] px-3 laptop:px-6 py-4 flex justify-center items-center flex-col gap-1.5 md:gap-3 cursor-pointer",onDragOver:_,onClick:b,onDrop:w,children:[(0,V.jsx)("img",{src:uW,alt:"upload"}),(0,V.jsxs)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:[(0,V.jsx)("span",{className:"text-primary font-medium truncate",children:"Klikk for opplasting"})," ","eller dra-og-slipp"]}),(0,V.jsx)("p",{className:"text-gray text-xs md:text-sm text-center truncate w-full",children:"SVG, PNG, JPG or GIF (maks. 800x400px)"}),(0,V.jsx)("input",{type:"file",ref:i,className:"hidden",accept:".svg, .png, .jpg, .jpeg, .gif",onChange:y,name:"photo"})]})})}),(0,V.jsx)(cW,{})]})})}),(0,V.jsx)("div",{className:"w-1/2",children:"string"===typeof k&&(0,V.jsx)("img",{src:k,alt:"logo",height:"140px",width:"140px"})})]}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"f_name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Fornavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Fornavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"l_name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Etternavn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Etternavn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"email",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"E-post"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn E-post",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsxs)("div",{className:"col-span-2",children:[(0,V.jsx)("p",{className:"text-black mb-[6px] text-sm md:text-base desktop:text-lg font-medium",children:"Informasjon om tilgangsniv\xe5"}),(0,V.jsx)("div",{className:"border border-gray1 border-r-0 border-b-0 rounded shadow-sm overflow-x-auto",children:(0,V.jsxs)("table",{className:"min-w-full bg-white border-r border-gray1",children:[(0,V.jsx)("thead",{children:(0,V.jsxs)("tr",{className:"bg-gray-50 border-b border-gray1",children:[(0,V.jsx)("th",{className:"py-3 px-3 md:px-4 text-sm md:text-base text-left font-medium text-gray-500 tracking-wider border-r border-gray1 text-black",children:"#/Modules"}),E.map((e=>(0,V.jsx)("th",{className:"py-3 px-3 md:px-4 text-sm md:text-base text-center font-medium text-gray-500 tracking-wider border-r border-gray1 text-black",children:e.label},e.key)))]})}),(0,V.jsx)("tbody",{children:S.map(((e,t)=>(0,V.jsxs)("tr",{className:2===t?"border-t-2 border-b-2 border-primary":"border-b border-gray1",children:[(0,V.jsx)("td",{className:"py-3 px-3 md:px-4 border-r border-gray1 text-black text-sm md:text-base",children:e.name}),E.map((t=>(0,V.jsx)("td",{className:"text-center py-2 px-3 md:px-4 border-r border-gray1",children:(0,V.jsxs)("label",{className:"inline-flex items-center justify-center cursor-pointer",children:[(0,V.jsx)("input",{type:"checkbox",className:"hidden",checked:e.permissions[t.key],onChange:()=>{return r=e.id,n=t.key,void j((e=>e.map(((e,t)=>{if(e.id===r){if("all"===n){const t=!e.permissions.all,r={};return Object.keys(e.permissions).forEach((e=>{r[e]=t})),{...e,permissions:r}}{const t={...e.permissions,[n]:!e.permissions[n]},r=Object.entries(t).filter((e=>{let[t]=e;return"all"!==t})).every((e=>{let[t,r]=e;return!0===r}));return t.all=!!r,{...e,permissions:t}}}return e}))));var r,n}}),(0,V.jsx)("div",{className:"w-6 h-6 border rounded flex items-center justify-center "+(e.permissions[t.key]?"bg-primary border-[#fff]":"bg-white border-gray1"),children:e.permissions[t.key]&&(0,V.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-4 h-4 text-white",children:(0,V.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]})},`${e.id}-${t.key}`)))]},e.id)))})]})}),"string"===typeof(null===(e=n.formState.errors.modulePermissions)||void 0===e?void 0:e.message)&&(0,V.jsx)("div",{className:"text-red text-xs mt-2",children:null===(r=n.formState.errors.modulePermissions)||void 0===r?void 0:r.message})]}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"supplier",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Leverand\xf8rer"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e),e&&n.resetField("office",{defaultValue:"",keepTouched:!1,keepDirty:!1})},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Select Leverand\xf8rer"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsx)(GZ,{children:null===l||void 0===l?void 0:l.map(((e,t)=>(0,V.jsx)(XZ,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.company_name},t)))})})]})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"password",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Passord"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Passord",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"password"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"office",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Kontor"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsxs)(HZ,{onValueChange:e=>{t.onChange(e)},value:t.value,children:[(0,V.jsx)(qZ,{className:`bg-white rounded-[8px] border text-black ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,children:(0,V.jsx)(WZ,{placeholder:"Select Kontor"})}),(0,V.jsx)(YZ,{className:"bg-white",children:(0,V.jsx)(GZ,{children:null===v||void 0===v?void 0:v.map(((e,t)=>{var r;return(0,V.jsx)(XZ,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.name},t)}))})})]})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{className:"col-span-2",children:(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:n.control,name:"is_admin",render:e=>{let{field:t}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)(lW,{children:(0,V.jsxs)("div",{className:"relative flex items-center gap-2",children:[(0,V.jsx)("input",{type:"checkbox",id:"is_admin",checked:t.value,onChange:t.onChange,className:"accent-primary h-[18px] w-[18px]"}),(0,V.jsx)("label",{htmlFor:"is_admin",className:"text-sm md:text-base",children:"Give access as a super admin?"})]})}),(0,V.jsx)(cW,{})]})}})})})]})]}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center sticky bottom-0 bg-white z-50 border-t border-gray2 p-4",children:[(0,V.jsx)("div",{onClick:()=>n.reset(),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})})})]})]}),u&&(0,V.jsx)(sA,{onClose:()=>{d(!u)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,V.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"E-post:"}),(0,V.jsx)("span",{className:"text-base",children:n.getValues("email")})]}),(0,V.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,V.jsx)("p",{className:"text-sm md:text-base desktop:text-lg font-bold",children:"Password:"}),(0,V.jsx)("span",{className:"text-base",children:n.getValues("password")})]}),(0,V.jsx)("br",{}),(0,V.jsxs)("p",{children:[(0,V.jsx)("span",{className:"font-semibold",children:"Note:"})," Dette er din e-post og passord. vennligst send dette passordet til denne brukeren."]}),(0,V.jsxs)("div",{className:"flex justify-center mt-5 w-full gap-5 items-center",children:[(0,V.jsx)("div",{onClick:()=>d(!1),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)("div",{onClick:()=>o("/Brukeradministrasjon"),children:(0,V.jsx)(HT,{text:"Bekrefte",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})})]})]})})}),C&&(0,V.jsx)(sA,{onClose:()=>{T||N(!1)},isOpen:!0,children:(0,V.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50",children:(0,V.jsx)("div",{className:"bg-white rounded-lg shadow-lg w-[90vw] md:w-[80vw] lg:w-[70vw] overflow-hidden",children:(0,V.jsx)(k_e,{setIsOfficePopup:N,setDropdownOpen:P})})})})]})},E_e=kQ.object({leadData:kQ.object({name:kQ.string().min(1,{message:"Navn m\xe5 best\xe5 av minst 2 tegn."}),epost:kQ.string().email({message:"Vennligst skriv inn en gyldig e-postadresse."}).min(1,{message:"E-posten m\xe5 v\xe6re p\xe5 minst 2 tegn."}),telefon:kQ.string().refine((e=>{const t=D3(e),r=null!==t&&void 0!==t&&t.countryCallingCode?`+${t.countryCallingCode}`:"",n=(null===t||void 0===t?void 0:t.nationalNumber)||"";if("+47"!==r)return!1;const i=j_[r];return!!i&&i(n)}),{message:"Vennligst skriv inn et gyldig telefonnummer for det valgte landet."})})}),C_e=()=>{const e=AG({resolver:FG(E_e)}),r=Gr(),n=Kr(),i=r.pathname.split("/"),a=i.length>2?i[2]:null;const[s,o]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=await N_();e&&o(e)})()}),[]);return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"p-4 md:p-6",children:[(0,V.jsx)("h3",{className:"text-lg md:text-xl desktop:text-2xl mb-4 text-darkBlack font-semibold",children:"Opprett nytt lead"}),(0,V.jsx)(tW,{...e,children:(0,V.jsxs)("form",{onSubmit:e.handleSubmit((async e=>{try{e&&(e.leadData.telefon=function(e){return e.replace("+","")}(e.leadData.telefon));const t=e=>e.toLocaleString("sv-SE",{timeZone:"UTC"}).replace(",",""),r=a||yW(),i=cm(g_,"leads_from_supplier",r);a?(await mg(i,{...e,updatedAt:t(new Date)}),He.success("Lagret",{position:"top-right"}),n("/my-leads")):(await fg(i,{...e,updatedAt:uo.now(),createdAt:uo.now(),supplierId:"065f9498-6cdb-469b-8601-bb31114d7c95",createDataBy:{email:null===s||void 0===s?void 0:s.email,photo:null===s||void 0===s?void 0:s.photo,name:null!==s&&void 0!==s&&s.f_name?`${null===s||void 0===s?void 0:s.f_name} ${null===s||void 0===s?void 0:s.l_name}`:null===s||void 0===s?void 0:s.name}}),He.success("Added successfully",{position:"top-right"}),n("/my-leads"))}catch(t){console.error("Firestore operation failed:",t),He.error("Something went wrong. Please try again.",{position:"top-right"})}})),className:"relative",children:[(0,V.jsx)("div",{className:"",children:(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:gap-6",children:[(0,V.jsx)("h3",{className:"col-span-2 text-darkBlack font-semibold text-xl",children:"Lead Data"}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"leadData.name",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Navn"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn navn",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"leadData.epost",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"E-post"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn E-post",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"email"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:e.control,name:"leadData.telefon",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Telefon"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(R3,{placeholder:"Skriv inn Telefon",...t,className:`bg-white rounded-[8px] border text-black\n                              ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"tel"})})}),(0,V.jsx)(cW,{})]})}})})]})}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center mt-8",children:[(0,V.jsx)("div",{onClick:()=>{e.reset(),n("/my-leads")},children:(0,V.jsx)(HT,{text:"Tilbake",className:"border border-lightPurple bg-lightPurple text-primary text-base rounded-[8px] h-[48px] font-medium relative py-[10px] flex items-center gap-2 px-[50px]"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-green2 bg-green2 text-white text-base rounded-[8px] h-[48px] font-medium relative px-[50px] py-[10px] flex items-center gap-2",type:"submit"})]})]})})]})})},N_e=()=>{const e=Kr(),t=AG({resolver:FG(kQ.object({email:kQ.string().email({message:"Vennligst skriv inn en gyldig e-postadresse."}).min(1,{message:"E-postadresse er p\xe5krevd."}),password:kQ.string().min(8,{message:"Passordet m\xe5 v\xe6re minst 8 tegn langt."}).regex(/[A-Z]/,{message:"Passordet m\xe5 inneholde minst \xe9n stor bokstav."}).regex(/[a-z]/,{message:"Passordet m\xe5 inneholde minst \xe9n liten bokstav."}).regex(/[0-9]/,{message:"Passordet m\xe5 inneholde minst ett tall."}).regex(/[@$!%*?&]/,{message:"Passordet m\xe5 inneholde minst ett spesialtegn."})}))});return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,V.jsx)("div",{className:"relative w-full max-w-[490px]",children:(0,V.jsxs)("div",{className:"mx-4 bg-white p-7 w-full",style:{boxShadow:"0px 8px 8px -4px #10182808, 0px 20px 24px -4px #10182814"},children:[(0,V.jsx)("div",{className:"flex justify-center mb-10",children:(0,V.jsx)("img",{src:di,alt:"logo"})}),(0,V.jsx)(tW,{...t,children:(0,V.jsxs)("form",{onSubmit:t.handleSubmit((async t=>{try{const r=cm(g_,"admin",t.email),n=await dg(r);if(n.exists()){const i=n.data(),a=null===i||void 0===i?void 0:i.password;if(a){if(Ope.compareSync(t.password,a)){He.success("Login successfully",{position:"top-right"}),localStorage.setItem("Iplot_admin",t.email);const r=await N_();r&&(null!==r&&void 0!==r&&r.role&&"Bankansvarlig"===(null===r||void 0===r?void 0:r.role)?e("/bank-leads"):e("/dashboard"))}else He.error("Incorrect password",{position:"top-right"})}else if(t.password){const n=Ope.hashSync(t.password,10);await mg(r,{password:n}),He.success("Login successfully",{position:"top-right"}),localStorage.setItem("Iplot_admin",t.email);const i=await N_();i&&(null!==i&&void 0!==i&&i.role&&"Bankansvarlig"===(null===i||void 0===i?void 0:i.role)?e("/bank-leads"):e("/dashboard"))}}else He.error("Admin not exist",{position:"top-right"})}catch(r){console.error("Error during sign-in",r)}})),className:"relative",children:[(0,V.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:t.control,name:"email",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"E-post"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn E-post",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"text"})})}),(0,V.jsx)(cW,{})]})}})}),(0,V.jsx)("div",{children:(0,V.jsx)(nW,{control:t.control,name:"password",render:e=>{let{field:t,fieldState:r}=e;return(0,V.jsxs)(sW,{children:[(0,V.jsx)("p",{className:(r.error?"text-red":"text-black")+" mb-[6px] text-sm font-medium",children:"Passord"}),(0,V.jsx)(lW,{children:(0,V.jsx)("div",{className:"relative",children:(0,V.jsx)(bW,{placeholder:"Skriv inn Passord",...t,className:`bg-white rounded-[8px] border text-black\n                                          ${null!==r&&void 0!==r&&r.error?"border-red":"border-gray1"} `,type:"password"})})}),(0,V.jsx)(cW,{})]})}})})]}),(0,V.jsxs)("div",{className:"flex justify-end w-full gap-5 items-center p-4",children:[(0,V.jsx)("div",{onClick:()=>t.reset(),children:(0,V.jsx)(HT,{text:"Avbryt",className:"border border-gray2 text-black text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2"})}),(0,V.jsx)(HT,{text:"Lagre",className:"border border-purple bg-purple text-white text-sm rounded-[8px] h-[40px] font-medium relative px-4 py-[10px] flex items-center gap-2",type:"submit"})]})]})})]})})})})},T_e=()=>{const e=V_(),[r,n]=(0,t.useState)(null),[i,a]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{(async()=>{const e=await N_();null!==e&&void 0!==e&&e.role&&n(e.role),a(!1)})()}),[]),e&&!i?(0,V.jsx)(vn,{to:"Bankansvarlig"===r?"/bank-leads":"/dashboard",replace:!0}):i?(0,V.jsx)("div",{children:"Loading..."}):(0,V.jsx)(xn,{})};function P_e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:,.<>?";let r="";for(let n=0;n<e;n++){r+=t[Math.floor(88*Math.random())]}return r}const A_e=()=>{const e=Kr(),r=Gr(),n=V_(),[i,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(null),l=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{(async()=>{const e=await N_();null!==e&&void 0!==e&&e.role&&o(e.role),a(!1)})()}),[]),(0,t.useEffect)((()=>{if(!l.current&&(l.current=!0,"/"===r.pathname)){const t=new URLSearchParams(r.search).get("token"),i=async t=>{e(`/auth?token=${t}`);try{var r;const o=await fetch("https://tr1av984od.execute-api.eu-north-1.amazonaws.com/prod/sso/verify-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}),l=await o.json(),c=cm(g_,"admin",null===l||void 0===l||null===(r=l.userData)||void 0===r?void 0:r.email),u=await dg(c);if(u.exists()){var n;const t=u.data(),r=null===t||void 0===t?void 0:t.password,i=Ope.hashSync(r,10);await mg(c,{password:i}),ge.success("Login successfully",{position:"top-right"}),localStorage.setItem("Iplot_admin",null===l||void 0===l||null===(n=l.userData)||void 0===n?void 0:n.email);const a=await N_();a&&e("Bankansvarlig"===(null===a||void 0===a?void 0:a.role)?"/bank-leads":"/dashboard")}else{var i,a,s;const t=yW(),[r,...n]=null===l||void 0===l||null===(i=l.userData)||void 0===i?void 0:i.name.trim().split(" "),o=n.join(" ");await fg(c,{email:null===l||void 0===l||null===(a=l.userData)||void 0===a?void 0:a.email,f_name:r,l_name:o,id:t,password:P_e(),createdAt:new Date,role:"Agent",updatedAt:new Date,supplier:"9f523136-72ca-4bde-88e5-de175bc2fc71"}),ge.success("Admin created successfully!",{position:"top-right"}),localStorage.setItem("Iplot_admin",null===l||void 0===l||null===(s=l.userData)||void 0===s?void 0:s.email),e("/dashboard")}}catch(o){console.error("Token verification failed:",o),e("/login",{replace:!0})}};(async()=>{t?await i(t):(e(n?"Bankansvarlig"===s?"/bank-leads":"/dashboard":"/login",{replace:!0}),a(!1))})()}}),[r.search,n,s,e]),i?(0,V.jsx)("div",{children:"Loading..."}):(0,V.jsx)(xn,{})},M_e=function(e,t){return Gt({basename:t?.basename,unstable_getContext:t?.unstable_getContext,future:t?.future,history:Ke({window:t?.window}),hydrationData:t?.hydrationData||Qn(),routes:e,mapRouteProperties:pn,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}([{path:"/",element:(0,V.jsx)(A_e,{}),children:[{path:"/",element:(0,V.jsx)(vn,{to:"/login",replace:!0})},{path:"/",element:(0,V.jsx)(T_e,{}),children:[{path:"login",element:(0,V.jsx)(N_e,{})}]},{path:"/",element:(0,V.jsx)(H_,{}),children:[{path:"/dashboard",element:(0,V.jsx)(VT,{})},{path:"/Leverandorer",element:(0,V.jsx)(qV,{})},{path:"/legg-til-leverandor",element:(0,V.jsx)($3,{})},{path:"/edit-til-leverandor/*",element:(0,V.jsx)($3,{})},{path:"/Husmodeller",element:(0,V.jsx)(lA,{})},{path:"/se-husmodell/*",element:(0,V.jsx)(K3,{})},{path:"/edit-husmodell/*",element:(0,V.jsx)(S4,{})},{path:"/add-husmodell",element:(0,V.jsx)(S4,{})},{path:"/plot",element:(0,V.jsx)(j4,{})},{path:"/se-plot/*",element:(0,V.jsx)(npe,{})},{path:"/users",element:(0,V.jsx)(ipe,{})},{path:"/se-user/*",element:(0,V.jsx)(ape,{})},{path:"/property",element:(0,V.jsx)(spe,{})},{path:"/Brukeradministrasjon",element:(0,V.jsx)(lpe,{})},{path:"/legg-user",element:(0,V.jsx)(Lpe,{})},{path:"/edit-user/*",element:(0,V.jsx)(Lpe,{})},{path:"/se-husleads",element:(0,V.jsx)(Bpe,{})},{path:"/se-kombinasjoner",element:(0,V.jsx)(Upe,{})},{path:"/constructed-plot",element:(0,V.jsx)(Vpe,{})},{path:"/se-constructed-plot/*",element:(0,V.jsx)(Bbe,{})},{path:"/se-bankleads",element:(0,V.jsx)(Ube,{})},{path:"/my-leads",element:(0,V.jsx)(bwe,{})},{path:"/my-leads-details/*",element:(0,V.jsx)(pwe,{})},{path:"/add-agent-leads",element:(0,V.jsx)(Uwe,{})},{path:"/edit-agent-leads/*",element:(0,V.jsx)(Uwe,{})},{path:"/agent-leads",element:(0,V.jsx)(Hwe,{})},{path:"/active-agent-leads",element:(0,V.jsx)(Hwe,{})},{path:"/agent-leads-detail/*",element:(0,V.jsx)(l_e,{})},{path:"/bank-leads",element:(0,V.jsx)(u_e,{})},{path:"/active-bank-leads",element:(0,V.jsx)(u_e,{})},{path:"/bank-leads-detail/*",element:(0,V.jsx)(y_e,{})},{path:"/add-bank-user",element:(0,V.jsx)(w_e,{})},{path:"/edit-bank-user/*",element:(0,V.jsx)(w_e,{})},{path:"/add-agent-user",element:(0,V.jsx)(j_e,{})},{path:"/edit-agent-user/*",element:(0,V.jsx)(j_e,{})},{path:"/add-lead",element:(0,V.jsx)(C_e,{})}]}]}]),I_e=new class{#y;#m;#u;#b;#w;#_;#k;#S;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.#y=e.queryCache||new D,this.#m=e.mutationCache||new L,this.#u=e.defaultOptions||{},this.#b=new Map,this.#w=new Map,this.#_=0}mount(){this.#_++,1===this.#_&&(this.#k=j.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#y.onFocus())})),this.#S=E.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#y.onOnline())})))}unmount(){this.#_--,0===this.#_&&(this.#k?.(),this.#k=void 0,this.#S?.(),this.#S=void 0)}isFetching(e){return this.#y.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#m.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#y.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#y.build(this,t),n=r.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(l(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#y.findAll(e).map((e=>{let{queryKey:t,state:r}=e;return[t,r.data]}))}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=this.#y.get(n.queryHash),a=i?.state.data,s=function(e,t){return"function"===typeof e?e(t):e}(t,a);if(void 0!==s)return this.#y.build(this,n).setData(s,{...r,manual:!0})}setQueriesData(e,t,r){return k.batch((()=>this.#y.findAll(e).map((e=>{let{queryKey:n}=e;return[n,this.setQueryData(n,t,r)]}))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#y.get(t.queryHash)?.state}removeQueries(e){const t=this.#y;k.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const r=this.#y;return k.batch((()=>(r.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e){const t={revert:!0,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}},r=k.batch((()=>this.#y.findAll(e).map((e=>e.cancel(t)))));return Promise.all(r).then(o).catch(o)}invalidateQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k.batch((()=>(this.#y.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))))}refetchQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={...t,cancelRefetch:t.cancelRefetch??!0},n=k.batch((()=>this.#y.findAll(e).filter((e=>!e.isDisabled())).map((e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(o)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(n).then(o)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=this.#y.build(this,t);return r.isStaleByTime(l(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(o).catch(o)}fetchInfiniteQuery(e){return e.behavior=B(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(o).catch(o)}ensureInfiniteQueryData(e){return e.behavior=B(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return E.isOnline()?this.#m.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#y}getMutationCache(){return this.#m}getDefaultOptions(){return this.#u}setDefaultOptions(e){this.#u=e}setQueryDefaults(e,t){this.#b.set(h(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#b.values()],r={};return t.forEach((t=>{p(e,t.queryKey)&&Object.assign(r,t.defaultOptions)})),r}setMutationDefaults(e,t){this.#w.set(h(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#w.values()],r={};return t.forEach((t=>{p(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)})),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#u.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=d(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===w&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#u.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#y.clear(),this.#m.clear()}}({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}}),O_e=()=>(0,V.jsxs)(G,{client:I_e,children:[(0,V.jsx)(Ve,{toastOptions:{style:{zIndex:999999999}}}),(0,V.jsx)(ui,{router:M_e})]});i.createRoot(document.getElementById("root")).render((0,V.jsx)(t.StrictMode,{children:(0,V.jsx)(O_e,{})})),a()})()})();
//# sourceMappingURL=main.6011d478.js.map